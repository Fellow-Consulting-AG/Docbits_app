"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[6778],{16778:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ls});var s=i(61758),o=i(58790),a=i(29104);const n=e=>((0,s.Qi)("data-v-ff37a10a"),e=e(),(0,s.jt)(),e),l={class:"row highlighted-back q-pl-md top-back-button-bar"},r={class:"row full-width"},d={class:"primary-dashboard"},c={key:2,class:"row q-pl-md q-pb-xs",id:"validation_view"},h={class:"full-width scroll-area-height-validation",id:"right_section",ref:"right_section"},u={class:"q-pr-sm q-pa-sm"},g={class:"full-width medi-fields-content-height"},m={class:"scroll-area-height-validation"},p={id:"image_container"},_={class:"full-width",id:"image_scrolle",style:{position:"relative"}},f=n((()=>(0,s.Lk)("div",{class:"img-magnifier-glass"},null,-1))),v={id:"validate-container",class:""},b=["src","width"],k=["width","height","viewBox"],w={id:"marquee",ref:"marquee",x:"450",y:"420",width:"150",height:"150"},y={id:"boxes",ref:"boxes"},C={key:0,class:"full-width",id:"afterSlot"},L={key:0,class:"row q-pl-sm q-pr-sm"},x={class:"col-sm-12 col-md-12 col-lg-12 secondary-c-text text-h6 q-pb-md text-weight-bold"},F={class:"full-width"},E={class:"column absolute-right q-ml-auto justify-between right-action-bar back-white"},A={class:"action-bar-items",id:"validation_bar_content"},D=n((()=>(0,s.Lk)("br",null,null,-1))),S=["src"],I=["src"],T={class:"action-bar-bottom"},R={class:"q-my-auto"},O={class:"validation-view-button q-pt-md"},M={class:"hidden",id:"left_section",ref:"left_section"},q={key:0,class:"scroll-area-height-validation max-width-240"},P={class:"row justify-center q-pl-md q-pr-md q-pt-md"},B={class:"secondary-c-text text-h6 text-weight-bold"},V={class:"row"},W={class:"page-numbers center-inner"},$={class:"full-width pages-left-scroll-area-height scrolle-y pages-section-padding row justify-center"},N=["data-id","src"],K={key:1},Q={key:2,class:"scroll-area-height-validation max-width-240 relative-position"},z={key:3,class:"row bg-grey-2 q-pl-md q-pr-md q-pb-md"},X=n((()=>(0,s.Lk)("div",{class:"text-h6 text-bold"},"Need help deciding?",-1))),U={class:"row"},H={class:"text-weight-bold"},j={class:""},G={class:"text-weight-bold"},Y={class:"row",style:{"border-radius":"5px"}},J={class:"full-width"},Z=n((()=>(0,s.Lk)("div",{class:"full-width"}," MONITOR 1 ",-1))),ee={class:"full-width"},te=n((()=>(0,s.Lk)("div",{class:"full-width"}," MONITOR 2 ",-1))),ie={class:"footer-filename"},se={class:"footer-status-message"},oe={class:"next-prev-buttons float-right q-ml-auto"},ae=n((()=>(0,s.Lk)("img",{width:"24",src:"images/back_new_2.svg"},null,-1))),ne=n((()=>(0,s.Lk)("img",{width:"24",src:"images/forward_new.svg"},null,-1))),le={class:"footer-status-message"},re={key:3},de={key:4,class:"q-ml-auto"},ce={key:6,class:"footer-status-message q-px-md"};function he(e,t,i,n,he,ue){const ge=(0,s.g2)("DocumentLock"),me=(0,s.g2)("InvoiceDuplicateLock"),pe=(0,s.g2)("MessageBanner"),_e=(0,s.g2)("SubHeader"),fe=(0,s.g2)("q-icon"),ve=(0,s.g2)("f-btn"),be=(0,s.g2)("timeSpentTimer"),ke=((0,s.g2)("AISeverityLevel"),(0,s.g2)("FieldsView")),we=(0,s.g2)("q-resize-observer"),ye=(0,s.g2)("AnnotationView"),Ce=(0,s.g2)("q-btn"),Le=(0,s.g2)("q-splitter"),xe=(0,s.g2)("q-tooltip"),Fe=(0,s.g2)("keyboardShortcutInfoBtn"),Ee=(0,s.g2)("q-separator"),Ae=(0,s.g2)("TaskBtn"),De=(0,s.g2)("import-multi-invoice"),Se=(0,s.g2)("autoTesting"),Ie=(0,s.g2)("q-badge"),Te=(0,s.g2)("q-item-section"),Re=(0,s.g2)("q-item"),Oe=(0,s.g2)("q-list"),Me=(0,s.g2)("q-menu"),qe=(0,s.g2)("q-input"),Pe=(0,s.g2)("supportForm"),Be=(0,s.g2)("TaskList"),Ve=(0,s.g2)("ErrorDocumentView"),We=(0,s.g2)("Loader"),$e=(0,s.g2)("q-space"),Ne=(0,s.g2)("q-card-section"),Ke=(0,s.g2)("q-card"),Qe=(0,s.g2)("q-dialog"),ze=(0,s.g2)("SplitDocument"),Xe=(0,s.g2)("q-toolbar-title"),Ue=(0,s.g2)("q-toolbar"),He=(0,s.g2)("ScriptLogs"),je=(0,s.g2)("q-card-actions"),Ge=(0,s.g2)("q-select"),Ye=(0,s.g2)("NonMappedColumnsBtn"),Je=(0,s.g2)("BlockSupplier"),Ze=(0,s.g2)("IgnoreTableValidation"),et=(0,s.g2)("UnBlockSupplier"),tt=(0,s.g2)("q-slider"),it=(0,s.g2)("q-footer"),st=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(ge,{document_version:e.document_version,trigger_document_lock:e.trigger_document_lock,doc_id:e.docId,onSetTriggerDocumentLock:e.setTriggerDocumentLock},null,8,["document_version","trigger_document_lock","doc_id","onSetTriggerDocumentLock"]),!e.trigger_document_lock&&e.isInvoiceDuplicate?((0,s.uX)(),(0,s.Wv)(me,{key:0,doc_id:e.docId,doc_type:e.docType,doc_status:e.docStatus,onSetInvoiceDuplicateStatus:e.setInvoiceDuplicateStatus},null,8,["doc_id","doc_type","doc_status","onSetInvoiceDuplicateStatus"])):(0,s.Q3)("",!0),!e.isReadOnly||e.trigger_document_lock||e.isInvoiceDuplicate?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(pe,{key:1,message:e.error_message,messageCategoryClass:"error-banner"},null,8,["message"])),(0,s.bF)(_e,{name:"field_validation",onSearch:!1,label:e.$t("field_validation"),show_expiry_alert:!0},null,8,["label"]),(0,s.Lk)("div",l,[(0,s.Lk)("div",r,[(0,s.Lk)("div",{class:"secondary-c-text text-h6",style:(0,o.Tr)("width:"+e.imageFieldSplitter+"%")},[(0,s.Lk)("div",null,[(0,s.bF)(ve,{appearance:"tertiary","data-cy":"dashboard",onClick:e.goToDashboard},{default:(0,s.k6)((()=>[(0,s.bF)(fe,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,s.Lk)("label",d,(0,o.v_)(e.$t("pages.screen2a.dashboard")),1)])),_:1},8,["onClick"])])],4),(0,s.Lk)("div",{class:"q-pt-sm q-pl-md filename-container",style:(0,o.Tr)("width:"+(100-e.imageFieldSplitter)+"%")},[(0,s.bF)(be)],4)]),(0,s.Q3)("",!0)]),e.doc_fetch_error?((0,s.uX)(),(0,s.CE)("div",z,[(0,s.bF)(Ve)])):((0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("div",h,[(0,s.bF)(Le,{limits:[30,80],modelValue:e.imageFieldSplitter,"onUpdate:modelValue":[t[16]||(t[16]=t=>e.imageFieldSplitter=t),t[17]||(t[17]=t=>e.splitterChanged())],class:"medi-right-content-height"},{before:(0,s.k6)((()=>[(0,s.Lk)("div",u,[(0,s.Lk)("div",g,[e.hasApiData()?((0,s.uX)(),(0,s.Wv)(ke,{key:0,ref:"fieldsView",page:e.page,isPanelSection:!1,renderOpenWindoIcon:!0,onGetImageDetails:e.getImageDetails,onSetSplitterModel:e.setSplitterModel,onHandleScroll:e.removeOverlayandLines,onShowConnectionFromField:e.showConnectionFromField,onRefreshCanvasAfterSelection:e.refreshCanvasAfterSelection,onRemoveOldMapiingsAndDrawNew:e.removeOldMapiingsAndDrawNew,onEnableOrDisableExportButton:e.enableOrDisableExportButton,onCheckFieldInvalid:e.checkFieldInvalid},null,8,["page","onGetImageDetails","onSetSplitterModel","onHandleScroll","onShowConnectionFromField","onRefreshCanvasAfterSelection","onRemoveOldMapiingsAndDrawNew","onEnableOrDisableExportButton","onCheckFieldInvalid"])):(0,s.Q3)("",!0)])])])),after:(0,s.k6)((()=>[(0,s.bF)(we,{onResize:e.onResize,debounce:0},null,8,["onResize"]),(0,s.Lk)("div",m,[(0,s.Lk)("div",p,[(0,s.Lk)("div",_,[(0,s.bF)(Le,{horizontal:"",limits:[0,100],disable:!e.isExtenedPanel,modelValue:e.splitterModel,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.splitterModel=t),e.removeOverlayandLines],class:"scroll-area-height-img","after-class":e.isExtenedPanel?"q-pa-xs":"q-px-sm","before-class":"q-pa-sm img-magnifier-container","separator-class":(e.isExtenedPanel,"q-ma-sm")},{before:(0,s.k6)((()=>[f,"annotate"==e.field_view_mode?((0,s.uX)(),(0,s.Wv)(ye,{key:0,ref:"child_comp",enableEditing:e.enable_editing,cropUrl:e.image+"?"+e.tokenQueryParam,width:e.imageWidth,selectFont:e.selectFont,selectFontSize:e.selectFontSize,selectColor:e.selectColor,screenmode:"annotate"},null,8,["enableEditing","cropUrl","width","selectFont","selectFontSize","selectColor"])):(0,s.Q3)("",!0),(0,s.Lk)("div",v,[(0,s.Lk)("img",{class:"screenshot",src:e.image+"?"+e.tokenQueryParam,width:e.imageWidth,id:"screenshot",ref:"screenshot",draggable:"false",onLoad:t[0]||(t[0]=t=>{e.imageLoaded=!0,e.getImageDetails()})},null,40,b),((0,s.uX)(),(0,s.CE)("svg",{width:e.imageWidth,height:e.imageHeight,viewBox:e.viewBox,id:"draw",ref:"draw",xmlns:"http://www.w3.org/2000/svg",style:{height:"auto","border-bottom":"5px dotted"}},[(0,s.Lk)("rect",w,null,512),(0,s.Lk)("g",y,null,512)],8,k))])])),separator:(0,s.k6)((()=>[e.isExtenedPanel?((0,s.uX)(),(0,s.Wv)(Ce,{key:0,disable:!e.isExtenedPanel,round:"",unelevated:"",size:"xs",icon:"swap_vert",class:"panel-expand-button highlighted-back z-index-1",onClick:t[1]||(t[1]=t=>e.toggleSplitter())},null,8,["disable"])):(0,s.Q3)("",!0)])),after:(0,s.k6)((()=>[e.renderComponent&&e.hasApiData()?((0,s.uX)(),(0,s.CE)("div",C,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.formLayout,((t,i)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:`div-${i}`},[!0===t.is_panel_section_group?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"display-inline-block",style:(0,o.Tr)("width:"+e.getElementWidth(t)+"%")},[t.title?((0,s.uX)(),(0,s.CE)("div",L,[(0,s.Lk)("div",x,(0,o.v_)(t.title),1)])):(0,s.Q3)("",!0),(0,s.Lk)("div",F,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.rows,((t,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:`div-${a}`},[e.isFieldHidden(t)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:0,class:"",style:(0,o.Tr)("width:"+e.getElementWidth(t)+"%")},[((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.fieldType),{currentField:t,isReadOnly:e.isReadOnly,fieldName:t.name,groupIndex:i,onUpdateModel:e.$refs["fieldsView"].updateModel,onInputClicked:e.$refs["fieldsView"].showConnectionFromField,onInputValueChanges:e.$refs["fieldsView"].onInputValueChanges,onApplyFuzzySearch:e.$refs["fieldsView"].applyFuzzySearchWrapper},null,40,["currentField","isReadOnly","fieldName","groupIndex","onUpdateModel","onInputClicked","onInputValueChanges","onApplyFuzzySearch"]))],4))],64)))),128))])],4)):(0,s.Q3)("",!0)],64)))),128))])):(0,s.Q3)("",!0)])),_:1},8,["disable","modelValue","after-class","separator-class","onUpdate:modelValue"])])]),(0,s.Lk)("div",E,[e.showScrollUpButton?((0,s.uX)(),(0,s.Wv)(Ce,{key:0,icon:"keyboard_arrow_up",flat:"",class:"validation-view-scroll-down icon-grey",onClick:e.onScrollUp},null,8,["onClick"])):(0,s.Q3)("",!0),(0,s.Lk)("div",A,[(0,s.bF)(Ce,{disable:"annotate"===e.field_view_mode,icon:"img:images/loupe.svg",dense:"",flat:"",class:"validation-view-button",onClick:e.initiateMagnifyGlass},{default:(0,s.k6)((()=>[(0,s.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("pages.screen2a.magnify")),1)])),_:1})])),_:1},8,["disable","onClick"]),(0,s.bF)(Ce,{icon:"img:images/dual-monitor.svg",flat:"",class:"validation-view-button",onClick:e.selectBetweenMonitor},{default:(0,s.k6)((()=>[(0,s.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("open_image"))+" ",1),D,(0,s.eW)(" "+(0,o.v_)(e.$t("pages.messages.CHROME_ONLY")),1)])),_:1})])),_:1},8,["onClick"]),(0,s.bF)(Fe),(0,s.bF)(Ee,{class:"separator-space"}),(0,s.bF)(Ae,{onBtnClicked:t[3]||(t[3]=t=>e.toggleSideBar("tasks"))}),e.user_settings["ANNOTATION_MODE"]&&"annotate"==e.field_view_mode?((0,s.uX)(),(0,s.Wv)(Ce,{key:0,flat:"",class:"validation-view-button",onClick:t[4]||(t[4]=t=>e.changeScreenMode())},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{width:"24",height:"24",src:0==e.doc_annotations.length?"annotation/annotation_icon.svg":"annotation/annotation_icon_mark.svg"},null,8,S),(0,s.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("annotation.deactivate_mode")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0),e.user_settings["ANNOTATION_MODE"]&&"validate"==e.field_view_mode?((0,s.uX)(),(0,s.Wv)(Ce,{key:1,flat:"",class:"validation-view-button",onClick:t[5]||(t[5]=t=>e.changeScreenMode())},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{width:"24",height:"24",src:0==e.doc_annotations.length?"annotation/annotation_icon.svg":"annotation/annotation_icon_mark.svg"},null,8,I),(0,s.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("annotation.activate_mode")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(De,{isDashboard:!1,docId:e.docId,onSetImages:e.setImage},null,8,["docId","onSetImages"]),!0===e.is_admin?((0,s.uX)(),(0,s.Wv)(Ce,{key:2,disabled:"ELECTRONIC_DOCUMENT"===e.record.extraction_method,icon:"img:images/ocr_icon.svg",flat:"",class:"validation-view-button",onClick:e.viewOCRDocument},{default:(0,s.k6)((()=>[(0,s.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("ocr_view")),1)])),_:1})])),_:1},8,["disabled","onClick"])):(0,s.Q3)("",!0),(0,s.bF)(Ee,{class:"separator-space"}),!0===e.is_debug?((0,s.uX)(),(0,s.Wv)(Ce,{key:3,icon:"adb",flat:"",class:"validation-view-button icon-grey",onClick:t[6]||(t[6]=t=>e.enableOrDisableExportButton(!0))},{default:(0,s.k6)((()=>[(0,s.bF)(xe,null,{default:(0,s.k6)((()=>[(0,s.eW)("Debug Field Validations. Results will be displayed in the console after clicking it")])),_:1})])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(Se,{onSetApiData:e.setApiData},null,8,["onSetApiData"]),(0,s.bF)(Ce,{icon:"img:images/costumer_care.svg",flat:"",class:"validation-view-button",onClick:t[7]||(t[7]=t=>e.toggleSideBar("support"))},{default:(0,s.k6)((()=>[(0,s.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("pages.support.create_ticket")),1)])),_:1})])),_:1}),e.DOC_SCRIPT_MODULE?((0,s.uX)(),(0,s.Wv)(Ce,{key:4,icon:"img:images/doc_script_logs.svg",flat:"",size:"20px",class:"validation-view-button v-p-0",onClick:t[8]||(t[8]=t=>e.display_doc_script_logs=!0)},{default:(0,s.k6)((()=>[e.script_error_count>0?((0,s.uX)(),(0,s.Wv)(Ie,{key:0,color:"red",rounded:"",floating:""},{default:(0,s.k6)((()=>[(0,s.eW)("!")])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("doc_script_logs")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0),e.user_settings["BARCODE_ASSIGNMENT_SETTING"]?((0,s.uX)(),(0,s.Wv)(Ce,{key:5,icon:"img:images/barcode.svg",flat:"",size:"20px",class:"validation-view-button v-p-0",onClick:t[9]||(t[9]=t=>e.prepareBarcodeData())},{default:(0,s.k6)((()=>[(0,s.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("barcode_assignment")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(Ce,{flat:"",dense:"",size:"10px",class:"validation-view-button more_button",style:{background:"#707070",color:"white"},round:"",onClick:t[12]||(t[12]=(0,a.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,s.k6)((()=>[(0,s.bF)(Me,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"top left",self:"top right"},{default:(0,s.k6)((()=>[(0,s.bF)(Oe,{dense:"",style:{"min-width":"100px"}},{default:(0,s.k6)((()=>[e.images.length>1?((0,s.uX)(),(0,s.Wv)(Re,{key:0,clickable:"",onClick:e.displaySplitDocumentView},{default:(0,s.k6)((()=>[(0,s.bF)(Te,{avatar:"",class:"list-avatar"},{default:(0,s.k6)((()=>[(0,s.bF)(fe,{name:"img:images/split.svg",size:"xs",class:"invert",style:{"font-size":"22px"}})])),_:1}),(0,s.bF)(Te,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("split_document_btn_tooltip")),1)])),_:1})])),_:1},8,["onClick"])):(0,s.Q3)("",!0),"INVOICE"==e.docType?((0,s.uX)(),(0,s.Wv)(Re,{key:1,clickable:"",onClick:t[10]||(t[10]=t=>e.toFlowScreen(this.$route.params.id))},{default:(0,s.k6)((()=>[(0,s.bF)(Te,{avatar:"",class:"list-avatar"},{default:(0,s.k6)((()=>[(0,s.bF)(fe,{name:"img:images/flow.svg",size:"xs",class:"invert",style:{"font-size":"22px"}})])),_:1}),(0,s.bF)(Te,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("document_flow")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(Ee,{inset:""}),(0,s.bF)(Re,{clickable:"",onClick:t[11]||(t[11]=t=>e.goToLayoutTemplate())},{default:(0,s.k6)((()=>[(0,s.bF)(Te,{avatar:"",class:"list-avatar"},{default:(0,s.k6)((()=>[(0,s.bF)(fe,{name:"img:images/layout.svg",size:"xs",class:"invert",style:{"font-size":"22px"}})])),_:1}),(0,s.bF)(Te,null,{default:(0,s.k6)((()=>[(0,s.eW)("Go to Layout Template")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})]),(0,s.Lk)("div",T,[e.showScrollDownButton?((0,s.uX)(),(0,s.Wv)(Ce,{key:0,icon:"keyboard_arrow_down",flat:"",class:"validation-view-scroll-down icon-grey",onClick:e.onScrollDown},null,8,["onClick"])):(0,s.Q3)("",!0),(0,s.bF)(Ee,{class:"q-mb-sm"}),(0,s.Lk)("div",R,[(0,s.bF)(Ce,{icon:"img:images/pages.svg",flat:"",class:"validation-view-button",onClick:t[13]||(t[13]=t=>e.toggleSideBar("pages"))},{default:(0,s.k6)((()=>[(0,s.bF)(xe,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.currentPage())+" / "+(0,o.v_)(e.images.length),1)])),_:1})])),_:1})]),(0,s.bF)(qe,{outlined:"",dense:"",modelValue:e.page,"onUpdate:modelValue":[t[14]||(t[14]=t=>e.page=t),t[15]||(t[15]=t=>{e.quickActionClicked(t)})],class:"validation-view-input",onBlur:e.validatePageNumber},null,8,["modelValue","onBlur"]),(0,s.Lk)("span",O,(0,o.v_)(e.lastPageItem),1),(0,s.Lk)("div",null,[(0,s.bF)(Ce,{disable:1==e.page,icon:"keyboard_arrow_up",flat:"",class:"validation-view-page-button icon-grey",onClick:e.movePageDown},null,8,["disable","onClick"]),(0,s.bF)(Ce,{disable:e.page==e.lastPageItem,icon:"keyboard_arrow_down",flat:"",class:"validation-view-page-button icon-grey",onClick:e.movePageUp},null,8,["disable","onClick"])])])])])])),_:1},8,["modelValue"])],512),(0,s.Lk)("div",M,["pages"==e.current_sidebar?((0,s.uX)(),(0,s.CE)("div",q,[(0,s.Lk)("div",P,[(0,s.Lk)("span",B,(0,o.v_)(e.$t("pages.screen2a.pages")),1)]),(0,s.Lk)("div",V,[(0,s.Lk)("div",W,(0,o.v_)(e.currentPage())+"/"+(0,o.v_)(e.images.length),1)]),(0,s.Lk)("div",$,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,((i,a)=>((0,s.uX)(),(0,s.CE)("img",{"data-id":a,key:a,src:e.baseUrl+"/"+i.path+"?"+e.tokenQueryParam,class:(0,o.C4)(["q-pa-xs shadow-5 max-width-120 q-ma-sm cursor-pointer",a===e.page-1?"active":""]),style:{height:"160px"},onClick:t[18]||(t[18]=(...t)=>e.imageclicked&&e.imageclicked(...t))},null,10,N)))),128))])])):(0,s.Q3)("",!0),"support"==e.current_sidebar?((0,s.uX)(),(0,s.CE)("div",K,[(0,s.bF)(Pe)])):(0,s.Q3)("",!0),"tasks"==e.current_sidebar?((0,s.uX)(),(0,s.CE)("div",Q,[(0,s.bF)(Be,{onBtnClicked:t[19]||(t[19]=t=>e.toggleSideBar("tasks"))})])):(0,s.Q3)("",!0)],512)])),(0,s.bF)(We),(0,s.bF)(Qe,{modelValue:e.showDialog,"onUpdate:modelValue":t[21]||(t[21]=t=>e.showDialog=t)},{default:(0,s.k6)((()=>[(0,s.bF)(Ke,null,{default:(0,s.k6)((()=>[(0,s.bF)(Ne,{class:"row items-center q-pb-none"},{default:(0,s.k6)((()=>[X,(0,s.bF)($e),(0,s.bo)((0,s.bF)(Ce,{icon:"close",flat:"",round:"",dense:""},null,512),[[st]])])),_:1}),(0,s.bF)(Ne,null,{default:(0,s.k6)((()=>[(0,s.eW)(" Don't think too much and just contact us to learn more about the application! ")])),_:1}),(0,s.Lk)("div",U,[(0,s.bF)($e),(0,s.bF)(Ce,{flat:"",color:"primary",label:"Contact us",onClick:t[20]||(t[20]=t=>e.goFormular())})])])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(Qe,{modelValue:e.split_document,"onUpdate:modelValue":t[22]||(t[22]=t=>e.split_document=t),persistent:""},{default:(0,s.k6)((()=>[(0,s.bF)(ze)])),_:1},8,["modelValue"]),(0,s.bF)(Qe,{modelValue:e.display_doc_script_logs,"onUpdate:modelValue":t[23]||(t[23]=t=>e.display_doc_script_logs=t)},{default:(0,s.k6)((()=>[(0,s.bF)(Ke,{style:{width:"900px","max-width":"50vw","min-height":"500px","max-height":"50vw"}},{default:(0,s.k6)((()=>[(0,s.bF)(Ue,{class:"text-white secondary-toolbar"},{default:(0,s.k6)((()=>[(0,s.bF)(Xe,null,{default:(0,s.k6)((()=>[(0,s.Lk)("span",H,(0,o.v_)(e.$t("doc_script_logs")),1)])),_:1}),(0,s.bo)((0,s.bF)(Ce,{flat:"",round:"",dense:"",icon:"close"},null,512),[[st]])])),_:1}),(0,s.bF)(Ne,{class:""},{default:(0,s.k6)((()=>[(0,s.bF)(He)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Lk)("div",j,[(0,s.bF)(Qe,{modelValue:e.textConfirmation,"onUpdate:modelValue":t[28]||(t[28]=t=>e.textConfirmation=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,s.k6)((()=>[(0,s.bF)(Ke,{style:{width:"440px"}},{default:(0,s.k6)((()=>[(0,s.bF)(Ue,{class:"secondary-toolbar"},{default:(0,s.k6)((()=>[(0,s.bF)(Xe,null,{default:(0,s.k6)((()=>[(0,s.Lk)("span",G,(0,o.v_)(e.$t("confirmation")),1)])),_:1}),(0,s.bo)((0,s.bF)(Ce,{flat:"",round:"",dense:"",icon:"close"},null,512),[[st]])])),_:1}),(0,s.bF)(Ne,{class:"q-pt-none"},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.textConfirmationMsg),1)])),_:1}),(0,s.bF)(je,{align:"right",class:"text-teal"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(Ce,{color:"grey",label:e.$t("pages.screen2a.cancel"),"data-cy":"cancel",onClick:t[24]||(t[24]=t=>e.cancelOverlayDiv())},null,8,["label"]),[[st]]),(0,s.bo)((0,s.bF)(Ce,{color:"grey","data-cy":"no",label:"Don't ask again",onClick:t[25]||(t[25]=t=>e.askLater())},null,512),[[st]]),(0,s.bo)((0,s.bF)(Ce,{color:"grey","data-cy":"no",label:e.$t("re_select"),onClick:t[26]||(t[26]=t=>e.enableDrawing(!0))},null,8,["label"]),[[st]]),(0,s.bo)((0,s.bF)(Ce,{color:"primary","data-cy":"yes",label:e.$t("pages.screen2a.yes"),onClick:t[27]||(t[27]=t=>e.updateFieldData())},null,8,["label"]),[[st]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(Qe,{modelValue:e.saveInstant,"onUpdate:modelValue":t[29]||(t[29]=t=>e.saveInstant=t)},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.updateFieldData()),1)])),_:1},8,["modelValue"])]),(0,s.bF)(Qe,{modelValue:e.selectMonitor,"onUpdate:modelValue":t[32]||(t[32]=t=>e.selectMonitor=t),position:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(Ke,{style:{width:"600px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Y,[(0,s.Lk)("div",{style:{padding:"10px","text-align":"center"},class:"col-sm-6 col-md-6 col-lg-6 cursor-pointer",onClick:t[30]||(t[30]=t=>e.openComponentInSeparateWindow(0))},[(0,s.bF)(Ne,{class:"screenhover",style:{border:"1px solid #d8d8d8","border-radius":"5px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",J,[(0,s.bF)(fe,{name:"desktop_windows",size:"xl",style:{"font-size":"150px"}})]),Z])),_:1})]),(0,s.Lk)("div",{style:{padding:"10px","text-align":"center"},class:"col-sm-6 col-md-6 col-lg-6 cursor-pointer",onClick:t[31]||(t[31]=t=>e.openComponentInSeparateWindow(1))},[(0,s.bF)(Ne,{class:"screenhover",style:{border:"1px solid #d8d8d8","border-radius":"5px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ee,[(0,s.bF)(fe,{name:"desktop_windows",size:"xl",style:{"font-size":"150px"}})]),te])),_:1})])])])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(Qe,{modelValue:e.display_barcode_assignment,"onUpdate:modelValue":t[33]||(t[33]=t=>e.display_barcode_assignment=t),onKeydown:t[34]||(t[34]=(0,a.jR)((t=>e.display_barcode_assignment=!1),["esc"]))},{default:(0,s.k6)((()=>[(0,s.bF)(Ke,{style:{"min-width":"320px","max-width":"1000px"}},{default:(0,s.k6)((()=>[(0,s.bF)(Ne,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("Barcode Mapping (currently reverse order)")),1)])),_:1}),e.barcode_amount>0?((0,s.uX)(),(0,s.Wv)(Ne,{key:0},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.barcode_data,((t,i)=>((0,s.uX)(),(0,s.CE)("div",{style:{"margin-top":"15px"},key:t},[(0,s.eW)(" Barcode "+(0,o.v_)(i)+" : "+(0,o.v_)(t)+" ",1),(0,s.bF)(Ge,{outlined:"",dense:"",clearable:"",modelValue:e.barcode_field_set[i],"onUpdate:modelValue":[t=>e.barcode_field_set[i]=t,s=>e.setFieldData(t,e.barcode_field_set[i],i)],options:e.doc_fields},null,8,["modelValue","onUpdate:modelValue","options"])])))),128))])),_:1})):((0,s.uX)(),(0,s.Wv)(Ne,{key:1},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,(0,o.v_)(e.$t("No Barcodes extracted/found")),1)])),_:1}))])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(it,{class:"validation-status-bar back-white"},{default:(0,s.k6)((()=>[(0,s.bF)(Ue,{class:(0,o.C4)(["row justify-start",""==e.current_sidebar?"":"opened-right-padding"])},{default:(0,s.k6)((()=>[(0,s.Lk)("span",ie,(0,o.v_)(e.record.filename),1),(0,s.bF)(Ce,{size:"md",flat:"",dense:"",class:"q-ml-xs",onClick:t[35]||(t[35]=t=>e.downloadFile())},{default:(0,s.k6)((()=>[(0,s.bF)(fe,{name:"download",style:{color:"#8a8a8a"}})])),_:1}),(0,s.bF)(Ee,{vertical:"",class:"q-mx-md"}),(0,s.Lk)("span",se,(0,o.v_)(e.currentDisplayedMessage),1),e.currentDisplayedMessage?((0,s.uX)(),(0,s.Wv)(Ee,{key:0,vertical:"",class:"q-mx-md"})):(0,s.Q3)("",!0),e.script_error_count>0?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[e.DOC_SCRIPT_MODULE?((0,s.uX)(),(0,s.CE)("span",{key:0,class:"footer-status-message text-red cursor-pointer",onClick:t[36]||(t[36]=t=>e.display_doc_script_logs=!0)},[(0,s.eW)((0,o.v_)(e.$t("error_in_document_script"))+" ",1),(0,s.bF)(Ie,{align:"top",rounded:"",color:"red"},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.script_error_count),1)])),_:1})])):(0,s.Q3)("",!0),(0,s.bF)(Ee,{vertical:"",class:"q-mx-md"})],64)):(0,s.Q3)("",!0),(0,s.Lk)("div",oe,[(0,s.bF)(ve,{appearance:"tertiary","data-cy":"previous",onClick:t[37]||(t[37]=t=>e.routeToNextDoc("previous"))},{default:(0,s.k6)((()=>[(0,s.bF)(fe,{class:"text-red-13",size:"sm"},{default:(0,s.k6)((()=>[ae])),_:1}),(0,s.bF)(xe,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("Previous_Document")),1)])),_:1})])),_:1}),(0,s.bF)(ve,{appearance:"tertiary","data-cy":"next",onClick:t[38]||(t[38]=t=>e.routeToNextDoc("next"))},{default:(0,s.k6)((()=>[(0,s.bF)(xe,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("Next_Document")),1)])),_:1}),(0,s.bF)(fe,{class:"text-red-13",size:"sm",style:{"margin-left":"7px"}},{default:(0,s.k6)((()=>[ne])),_:1})])),_:1})]),(0,s.bF)($e),e.record.table_blocked?((0,s.uX)(),(0,s.CE)(s.FK,{key:2},[(0,s.bF)(Ee,{vertical:"",class:"q-mx-md"}),(0,s.bF)(fe,{class:"text-blue",style:{"font-size":"22px"},name:"info"}),(0,s.Lk)("span",le,(0,o.v_)(e.$t("block_supplier_warning")),1)],64)):(0,s.Q3)("",!0),(0,s.bF)(Ee,{vertical:"",class:"q-mx-xs"}),e.record.table_blocked?((0,s.uX)(),(0,s.CE)("div",de,[(0,s.bF)(et,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])])):((0,s.uX)(),(0,s.CE)("div",re,[(0,s.bF)(Ce,{flat:"",dense:"",icon:"img:images/table_extraction.svg",class:"icon-grey validation-footer-table-button",onClick:e.goToTableExtraction},{default:(0,s.k6)((()=>[(0,s.bF)(xe,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("go_to_table_extraction_view")),1)])),_:1})])),_:1},8,["onClick"]),e.has_ai_table?((0,s.uX)(),(0,s.Wv)(Ce,{key:0,flat:"",dense:"",icon:"img:images/Add_column.svg",class:"icon-grey-svg validation-footer-table-button",onClick:t[39]||(t[39]=t=>e.showNonMappedColumnsDialog())},{default:(0,s.k6)((()=>[(0,s.bF)(xe,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("add_empty_mapped_columns")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(Ye),(0,s.bF)(Je),e.has_ai_table?((0,s.uX)(),(0,s.Wv)(Ce,{key:1,flat:"",dense:"",icon:"img:images/table_delete.svg",class:"icon-grey validation-footer-table-button",onClick:e.deleteTable},{default:(0,s.k6)((()=>[(0,s.bF)(xe,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("delete_table")),1)])),_:1})])),_:1},8,["onClick"])):(0,s.Q3)("",!0),e.has_ai_table?((0,s.uX)(),(0,s.Wv)(Ce,{key:2,flat:"",dense:"",icon:"img:images/column.svg",class:"icon-grey validation-footer-table-button",onClick:t[40]||(t[40]=t=>e.addColumnInLineItems())},{default:(0,s.k6)((()=>[(0,s.bF)(xe,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("add_new_table_column")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(Ze,{class:"q-mx-xs"}),e.has_ai_table?((0,s.uX)(),(0,s.Wv)(Ce,{key:3,flat:"",dense:"",icon:"repartition",class:"icon-grey validation-footer-table-button",onClick:t[41]||(t[41]=t=>e.restoreDeleteColumn())},{default:(0,s.k6)((()=>[(0,s.bF)(xe,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("restore_table_column")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),e.images.length?((0,s.uX)(),(0,s.Wv)(Ee,{key:5,vertical:"",class:"q-mx-xs"})):(0,s.Q3)("",!0),e.images.length?((0,s.uX)(),(0,s.CE)("span",ce,(0,o.v_)(e.currentPage())+" / "+(0,o.v_)(e.images.length),1)):(0,s.Q3)("",!0),"annotate"!==e.field_view_mode?((0,s.uX)(),(0,s.CE)(s.FK,{key:7},[(0,s.bF)(Ee,{vertical:"",class:"q-mx-xs"}),(0,s.bF)(Ce,{flat:"",dense:"",icon:"remove",class:"icon-grey validation-footer-button",onClick:e.ZoomOut},null,8,["onClick"]),(0,s.bF)(tt,{class:"zoom-slider",dense:"",modelValue:e.zoom_value,"onUpdate:modelValue":[t[42]||(t[42]=t=>e.zoom_value=t),t[43]||(t[43]=t=>{e.zoom(t)})],min:.3,max:.8,step:.005},null,8,["modelValue"]),(0,s.bF)(Ce,{flat:"",dense:"",icon:"add",class:"icon-grey validation-footer-plus-button",onClick:e.ZoomIn},null,8,["onClick"])],64)):(0,s.Q3)("",!0)])),_:1},8,["class"])])),_:1})],64)}var ue=i(1659),ge=i(6044),me=i(24622),pe=i(45938),_e=i(38734),fe=i(46162),ve=i(11470),be=i(96056),ke=i(8420),we=i(64233),ye=i(18505),Ce=i(57366),Le=i(28684),xe=i(42300),Fe=i(31018),Ee=i(80884),Ae=i(21984),De=i(14907),Se=i(41903),Ie=i(54885),Te=i(25891),Re=i(84857),Oe=i(39281),Me=i(98859),qe=i(7080),Pe=i(42112),Be=i(91906),Ve=i(95488),We=i(1435),$e=i(56254),Ne=i(82080),Ke=i(12566),Qe=i(96075),ze=i(56653),Xe=i(46687),Ue=i(80204),He=i(72608),je=i(68450),Ge=i(64500),Ye=i(31191),Je=i(4924),Ze=i(76956),et=i(1252),tt=i(90467),it=i(42643),st=i(26471),ot=i(94124),at=i(18783),nt=i(7538),lt=i(9e4),rt=i(15268),dt=i(21529),ct=i(35519),ht=i(92867),ut=i(38888),gt=i(80637),mt=i(40260),pt=i(8537),_t=i(33722),ft=i(18233),vt=i(32759),bt=i(97752);const kt=e=>((0,s.Qi)("data-v-4cdd5356"),e=e(),(0,s.jt)(),e),wt=kt((()=>(0,s.Lk)("img",{width:"24",height:"24",src:"images/keyboard_dark_2.svg"},null,-1)));function yt(e,t,i,n,l,r){const d=(0,s.g2)("q-tooltip"),c=(0,s.g2)("q-icon"),h=(0,s.g2)("q-btn"),u=(0,s.g2)("q-item-section"),g=(0,s.g2)("q-item-label"),m=(0,s.g2)("q-item"),p=(0,s.g2)("keyboardShortcutInfo"),_=(0,s.g2)("q-card-actions"),f=(0,s.g2)("q-card"),v=(0,s.g2)("q-dialog"),b=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.CE)(s.FK,null,[e.show_all_menu_btns?((0,s.uX)(),(0,s.Wv)(h,{key:0,flat:"",class:"validation-view-button"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{name:"keyboard",width:"22",class:"keyboard-icon cursor-pointer",onClick:e.buttonClick},{default:(0,s.k6)((()=>[(0,s.bF)(d,{style:{"white-space":"nowrap"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("keyboard_shortcut")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})):(0,s.bo)(((0,s.uX)(),(0,s.Wv)(m,{key:1,clickable:"",onClick:e.buttonClick},{default:(0,s.k6)((()=>[(0,s.bF)(u,{avatar:""},{default:(0,s.k6)((()=>[wt])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.$t("keyboard_shortcut")),1)])),_:1})])),_:1})])),_:1},8,["onClick"])),[[b]]),(0,s.bF)(v,{modelValue:e.showKeyboardShortcuts,"onUpdate:modelValue":t[1]||(t[1]=t=>e.showKeyboardShortcuts=t),onKeydown:t[2]||(t[2]=(0,a.jR)((t=>e.showKeyboardShortcuts=!1),["esc"]))},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(p),(0,s.bF)(_,{align:"right"},{default:(0,s.k6)((()=>[(0,s.bF)(h,{flat:"",color:"primary",label:e.$t("close"),class:"float-right",style:{"font-weight":"900"},onClick:t[0]||(t[0]=t=>e.showKeyboardShortcuts=!1)},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}const Ct={class:"text-weight-medium text-h6"},Lt={class:"highlighted-back"},xt={class:"text-left",style:{"font-weight":"bold"}},Ft={class:"text-left",style:{"font-weight":"900"}},Et=(0,s.Lk)("tr",null,[(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Moves to next fields "),(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,s.Lk)("span",{class:"shortcut-Key-box"}," Enter ")])],-1),At=(0,s.Lk)("tr",null,[(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Validate & jump to next red-marked field "),(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,s.Lk)("span",{class:"shortcut-Key-box q-mr-sm"}," TAB ")])],-1),Dt={class:"text-left",style:{"font-weight":"bold"}},St={class:"text-left",style:{"font-weight":"900"}},It=["src"],Tt=(0,s.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," k ",-1),Rt=(0,s.Lk)("tr",null,[(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Checkbox check/uncheck "),(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,s.Lk)("span",{class:"shortcut-Key-box"}," Space ")])],-1),Ot=(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Moves to next group of fields ",-1),Mt={class:"text-left",style:{"font-weight":"900"}},qt=["src"],Pt=(0,s.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," G ",-1),Bt=(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Move To first field of first group ",-1),Vt={class:"text-left",style:{"font-weight":"900"}},Wt=["src"],$t=(0,s.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," F ",-1),Nt=(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Save document ",-1),Kt={class:"text-left",style:{"font-weight":"900"}},Qt=["src"],zt=(0,s.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," S ",-1),Xt=(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Reject document ",-1),Ut={class:"text-left",style:{"font-weight":"900"}},Ht=["src"],jt=(0,s.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," R ",-1),Gt=(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Export without Sonderwunsch ",-1),Yt={class:"text-left",style:{"font-weight":"900"}},Jt=["src"],Zt=(0,s.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," E ",-1),ei=(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Export with Sonderwunsch ",-1),ti={class:"text-left",style:{"font-weight":"900"}},ii=["src"],si=(0,s.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," W ",-1),oi=(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Jump to Table Section ",-1),ai={class:"text-left",style:{"font-weight":"900"}},ni=["src"],li=(0,s.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," T ",-1),ri=(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Create new line ",-1),di={class:"text-left",style:{"font-weight":"900"}},ci=["src"],hi=(0,s.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," plus (+) ",-1),ui=(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to Next Column ",-1),gi={class:"text-left"},mi=(0,s.Lk)("img",{src:"images/keyboard-left-arrow.svg"},null,-1),pi=(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to previous Column ",-1),_i={class:"text-left"},fi={class:"q-mr-sm"},vi=(0,s.Lk)("img",{src:"images/keyboard-right-arrow.svg"},null,-1),bi=(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to above Row ",-1),ki={class:"text-left"},wi=(0,s.Lk)("img",{src:"images/keyboard-up-arrow.svg"},null,-1),yi=(0,s.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to below Row ",-1),Ci={class:"text-left"},Li=(0,s.Lk)("img",{src:"images/keyboard-down-arrow.svg"},null,-1),xi={key:0},Fi={class:"text-left",style:{"font-weight":"bold"}},Ei={class:"text-left",style:{"font-weight":"900"}},Ai={class:"shortcut-Key-box q-mr-sm"},Di={class:"shortcut-Key-box q-ml-sm"};function Si(e,t,i,a,n,l){const r=(0,s.g2)("q-card-section"),d=(0,s.g2)("q-icon"),c=(0,s.g2)("q-markup-table");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ct,(0,o.v_)(e.$t("keyboard_shortcuts")),1)])),_:1}),(0,s.bF)(r,{class:"v-p-0"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"full-width",style:{overflow:"scroll","max-height":"60vh"},"virtual-scroll":""},{default:(0,s.k6)((()=>[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",Lt,[(0,s.Lk)("th",xt,(0,o.v_)(e.$t("action")),1),(0,s.Lk)("th",Ft,(0,o.v_)(e.$t("keyboard_shortcut")),1)])]),(0,s.Lk)("tbody",null,[Et,At,(0,s.Lk)("tr",null,[(0,s.Lk)("td",Dt,(0,o.v_)(e.$t("doc2light.descriptions.check_keyboard_shortcut")),1),(0,s.Lk)("td",St,[(0,s.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,It)])),_:1}),(0,s.eW)(" + "),Tt])]),Rt,(0,s.Lk)("tr",null,[Ot,(0,s.Lk)("td",Mt,[(0,s.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,qt)])),_:1}),(0,s.eW)(" + "),Pt])]),(0,s.Lk)("tr",null,[Bt,(0,s.Lk)("td",Vt,[(0,s.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,Wt)])),_:1}),(0,s.eW)(" + "),$t])]),(0,s.Lk)("tr",null,[Nt,(0,s.Lk)("td",Kt,[(0,s.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,Qt)])),_:1}),(0,s.eW)(" + "),zt])]),(0,s.Lk)("tr",null,[Xt,(0,s.Lk)("td",Ut,[(0,s.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,Ht)])),_:1}),(0,s.eW)(" + "),jt])]),(0,s.Lk)("tr",null,[Gt,(0,s.Lk)("td",Yt,[(0,s.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,Jt)])),_:1}),(0,s.eW)(" + "),Zt])]),(0,s.Lk)("tr",null,[ei,(0,s.Lk)("td",ti,[(0,s.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,ii)])),_:1}),(0,s.eW)(" + "),si])]),(0,s.Lk)("tr",null,[oi,(0,s.Lk)("td",ai,[(0,s.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,ni)])),_:1}),(0,s.eW)(" + "),li])]),(0,s.Lk)("tr",null,[ri,(0,s.Lk)("td",di,[(0,s.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,ci)])),_:1}),(0,s.eW)(" + "),hi])]),(0,s.Lk)("tr",null,[ui,(0,s.Lk)("td",gi,[(0,s.bF)(d,{size:"36px",class:"black_to_white"},{default:(0,s.k6)((()=>[mi])),_:1})])]),(0,s.Lk)("tr",null,[pi,(0,s.Lk)("td",_i,[(0,s.Lk)("span",fi,[(0,s.bF)(d,{size:"36px",class:"black_to_white"},{default:(0,s.k6)((()=>[vi])),_:1})])])]),(0,s.Lk)("tr",null,[bi,(0,s.Lk)("td",ki,[(0,s.bF)(d,{size:"36px",class:"black_to_white"},{default:(0,s.k6)((()=>[wi])),_:1})])]),(0,s.Lk)("tr",null,[yi,(0,s.Lk)("td",Ci,[(0,s.bF)(d,{size:"36px",class:"black_to_white"},{default:(0,s.k6)((()=>[Li])),_:1})])]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.formLayout,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[""!==e.short_cut_key_2&&""!==e.short_cut_key_1?((0,s.uX)(),(0,s.CE)("tr",xi,[(0,s.Lk)("td",Fi," Move to Group "+(0,o.v_)(e.title),1),(0,s.Lk)("td",Ei,[(0,s.Lk)("span",Ai,(0,o.v_)(e.short_cut_key_1),1),(0,s.eW)(" + "),(0,s.Lk)("span",Di,(0,o.v_)(e.short_cut_key_2),1)])])):(0,s.Q3)("",!0)],64)))),128))])])),_:1})])),_:1})],64)}var Ii=i(18453);const Ti=(0,s.pM)({el:"#app",mixins:[Ii.A],props:{},components:{},data(){return{combination_key:""}},mounted:function(){this.combination_key=this.getCombinationKey(null)},setup(){const e=(0,ot.uL)(),{formLayout:t}=(0,ue.bP)(e);return{formLayout:t}}});var Ri=i(12807),Oi=i(44189),Mi=i(857),qi=i(50492),Pi=i(98582),Bi=i.n(Pi);const Vi=(0,Ri.A)(Ti,[["render",Si]]),Wi=Vi;Bi()(Ti,"components",{QCardSection:Oi.A,QMarkupTable:Mi.A,QIcon:qi.A});const $i=(0,s.pM)({el:"#app",mixins:[Ii.A],props:{},components:{keyboardShortcutInfo:Wi},mounted:function(){window.addEventListener("keydown",this.keyboardKeyDownEvent)},unmounted:function(){window.removeEventListener("keydown",this.keyboardKeyDownEvent)},methods:{keyboardKeyDownEvent(e){const t=this.isCombinationKey(e);75===e.keyCode&&!0===t&&(e.preventDefault(),this.showKeyboardShortcuts=!0)},buttonClick(){this.showKeyboardShortcuts=!0}},data(){return{}},setup(){const e=(0,ot.q3)(),{show_all_menu_btns:t}=(0,ue.bP)(e);return{show_all_menu_btns:t,showKeyboardShortcuts:(0,_e.KR)(!1)}}});var Ni=i(56384),Ki=i(97410),Qi=i(90124),zi=i(25173),Xi=i(13796),Ui=i(82156),Hi=i(23316),ji=i(62669),Gi=i(88672);const Yi=(0,Ri.A)($i,[["render",yt],["__scopeId","data-v-4cdd5356"]]),Ji=Yi;Bi()($i,"components",{QBtn:Ni.A,QIcon:qi.A,QTooltip:Ki.A,QItem:Qi.A,QItemSection:zi.A,QItemLabel:Xi.A,QDialog:Ui.A,QCard:Hi.A,QCardActions:ji.A}),Bi()($i,"directives",{ClosePopup:Gi.A});var Zi=i(86224),es=i(73937),ts=i(6315),is=i(23403),ss=function(e,t,i,s){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function n(e){try{r(s.next(e))}catch(t){a(t)}}function l(e){try{r(s["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):o(e.value).then(n,l)}r((s=s.apply(e,t||[])).next())}))};const os=document.querySelector.bind(document),as=(0,s.pM)({el:"#app",mixins:[me.A,be.A,ye.A,we.A,Ce.A,xe.A,Fe.A,Te.A,Ge.A,Je.A,Ne.A,Xe.A,Ye.A,Zi.A,Le.A,ge.A],components:{Loader:ke.A,supportForm:ze.A,scriptBtn:We.A,SubHeader:Ve.A,ScriptLogs:is.A,IgnoreTableValidation:ht.A,BlockSupplier:ut.A,autoTesting:Ee.A,DocumentLock:Ae.A,MessageBanner:Re.A,SelectionPopup:Oe.A,Classification:Me.A,AISeverityLevel:qe.A,ImportMultiInvoice:Be.A,FieldsView:Pe["default"],SplitDocument:$e.A,ErrorDocumentView:Ke.A,InvoiceDuplicateLock:Ue.A,restartClassificationPopup:st.A,Label:at.A,CheckBox:nt.A,TextInput:lt.A,LineItemTable:rt.A,MultiCheckBox:dt.A,TableOfCheckboxes:ct.A,HorizontalSeparator:mt.A,ExtractedTableTabPanels:_t.A,timeSpentTimer:bt.A,keyboardShortcutInfoBtn:Ji,autoAccountingBtn:pt.A,InvoiceButtons:ft.A,AnnotationView:ts.A,QRCodeExtractedFields:vt.A,TaskBtn:et.A,TaskList:tt.A,UnBlockSupplier:gt.A,NonMappedColumnsBtn:it.A},watch:{$route(e,t){if(!e.hasOwnProperty("path")||!t.hasOwnProperty("path"))return;const i=e.path.split("/"),s=t.path.split("/");i.length>2&&s.length>2&&i[1]===s[1]&&this.get_cached_data_id!=this.docId&&window.location.reload()}},data(){return{docId:"",docStatus:"",contact:this.$t("confirm"),showDialog:!1,showExportDialog:!1,zoom_value:(0,_e.KR)(.6),showArticlePage:!1,disableSelectionButton:!0,loading:!1,shownButtonsLength:0,showExpandButton:!1,saveInstant:!1,magnifyGlass:{},allowedDoctypes:Ze.Gk,format_warning_dismiss:{},excluded_fields:["fields_group"],account_block:"",error_message:"",currentDisplayedMessage:(0,_e.KR)(""),trigger_document_lock:(0,_e.KR)(!1),isInvoiceDuplicate:(0,_e.KR)(!1),split_document:(0,_e.KR)(!1),headerFabIcon:(0,_e.KR)(!1),dropdownModel:(0,_e.KR)(!1),imageLoaded:(0,_e.KR)(!1),textConfirmation:!1,selectMonitor:(0,_e.KR)(!1),doc_script_module_setting:Ze.$B,barcode_amount:(0,_e.KR)(0),barcode_data:(0,_e.KR)({}),display_barcode_assignment:(0,_e.KR)(!1),barcode_field_set:(0,_e.KR)({}),doc_fields:(0,_e.KR)([])}},beforeRouteLeave:function(e,t,i){return ss(this,void 0,void 0,(function*(){this.setDataToCache(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.removeMagnifier(),this.removeAllNotifications(),this.page=1,this.external_window&&this.external_window.close(),"function"===typeof this.format_warning_dismiss&&this.format_warning_dismiss(),yield this.releaseDocLock({doc_id:this.record.doc_id}),this.resetDocStore(e.fullPath),this.resetStoreOnRouteChange(),i()}))},showDialog1:function(){setTimeout((()=>{this.showDialog=!0}),2e3)},beforeMount:function(){this.renderComponent=!1,this.isExtenedPanel=!1},mounted:function(){this.showLoading(),this.connectWebSocket(),this.init(),this.show_all_menu_btns=!0,this.isDebugFlagHandler(),this.is_admin=(0,es.N6)();let e=this.$route.params.id;this.getDocAnnotations(e),window.addEventListener("resize",this.windowResize),document.body.addEventListener("click",this.mouseClicked,!0);const t=os(".img-magnifier-container");t&&t.addEventListener("scroll",this.removeOverlayandLines);const i=os(".q-splitter__after");i&&i.addEventListener("scroll",this.removeOverlayandLines),document.addEventListener("dispatch_status_bar_message",this.dispatchTaskbarMessage),document.addEventListener("highlight_table_row",this.highlightTableRowArea),document.addEventListener("refresh_canvas",this.refreshCanvas),document.addEventListener("set_splitter_model",this.setSplitterModelWrapper),window.FieldValidationView=this,window.addEventListener("beforeunload",this.unLockDoc)},unmounted:function(){window.removeEventListener("resize",this.windowResize),window.removeEventListener("beforeunload",this.unLockDoc),window.removeEventListener("keydown",this.keydownEvent),document.removeEventListener("dispatch_status_bar_message",this.dispatchTaskbarMessage),document.removeEventListener("highlight_table_row",this.highlightTableRowArea),document.removeEventListener("removeSelectedAreaOnImage",this.removeSelectedAreaOnImage);const e=os(".img-magnifier-container");e&&e.removeEventListener("scroll",this.removeOverlayandLines);const t=os(".q-splitter__after");t&&t.removeEventListener("scroll",this.removeOverlayandLines);try{this.screenshot=os(".screenshot"),this.screenshot&&(this.screenshot.removeEventListener("dblclick",this.dblClickToSelect),this.screenshot.removeEventListener("pointerdown",this.startDrag))}catch(i){}document.removeEventListener("refresh_canvas",this.refreshCanvas),document.removeEventListener("set_splitter_model",this.setSplitterModelWrapper)},methods:{prepareBarcodeData(){this.record.hasOwnProperty("barcode_mapping")||(this.record.barcode_mapping={}),this.barcode_field_set=JSON.parse(JSON.stringify(this.record.barcode_mapping)),this.doc_fields=[],this.barcode_amount=Object.keys(JSON.parse(JSON.stringify(this.record.barcode_data))).length;let e=JSON.parse(JSON.stringify(this.record.barcode_data)),t=1;for(const[i,s]of Object.entries(e))s.forEach((e=>{this.barcode_data[t]=e,t+=1}));for(let i in this.formBuilderConfigModel){let e=this.formBuilderConfigModel[i];"TextInput"!=e.fieldType&&"AmountFields"!=e.fieldType||e.hasOwnProperty("id")&&(e["value"]=e["field_id"],e["label"]=this.$t(e["field_name"]),this.doc_fields.push(e))}this.display_barcode_assignment=!0},setFieldData(e,t,i){if(null!=this.record.barcode_mapping[i]&&void 0!=this.record.barcode_mapping[i]){let e=this.record.barcode_mapping[i].field_name;this.formBuilderModel[e].formatted_value="",this.$refs.fieldsView.inputValueChanges(e)}null!=t&&void 0!=t&&(this.record.barcode_mapping[i]=t,this.formBuilderModel[t.field_name].formatted_value=e,this.$refs.fieldsView.inputValueChanges(t.field_name))},dispatchTaskbarMessage(e){e.detail.message&&(this.currentDisplayedMessage=e.detail.message)},showNonMappedColumnsDialog(){if(this.isFormBuilderMode||this.isReadOnly)return;const e=new CustomEvent("show_non_mapped_columns_dialog",{});document.dispatchEvent(e)},deleteTable(){if(this.isFormBuilderMode||this.isReadOnly)return;this.record.tables=[];const e=new CustomEvent("delete_table",{});document.dispatchEvent(e)},addColumnInLineItems(){if(this.isFormBuilderMode||this.isReadOnly)return;const e=new CustomEvent("add_ai_new_column",{});document.dispatchEvent(e)},ZoomIn(){this.zoom_value>=.79||(this.zoom_value=this.zoom_value+.1,this.zoom(this.zoom_value))},ZoomOut(){this.zoom_value<=.3||(this.zoom_value=this.zoom_value-.1,this.zoom(this.zoom_value))},toggleSideBar(e){if(this.current_sidebar==e)return this.toggleMenu(),void(this.current_sidebar="");""==this.current_sidebar&&this.toggleMenu(),this.current_sidebar=e},improveDocuments(){return ss(this,void 0,void 0,(function*(){try{if(this.isReadOnly)return;yield ve.M8.improve_document_quality(this.docId)}catch(e){return this.hideLoading(),void this.showErrorToast("There was an error improving the document")}}))},init(){return ss(this,void 0,void 0,(function*(){try{if(this.docId=this.$route.params.id,this.setAppType(),yield this.getOrgSettings(),yield this.getInvoiceDataByDocId(this.docId),!this.record||0===Object.keys(this.record).length||!1===this.record.success||this.doc_fetch_error)return void this.hideLoading();this.handleReadOnly(),this.handleDocLockSubscribe(),this.getSplitterValueFromStorage(),this.handleDiplicateInvoiceSettings(),this.isReadOnly?(this.error_message=this.$t("pages.messages.READ_ONLY_MSG"),this.trigger_document_lock=!1):this.trigger_document_lock=!0,this.initPage()}catch(e){}finally{this.hideLoading()}}))},handleDiplicateInvoiceSettings(){return ss(this,void 0,void 0,(function*(){yield this.getDocTypeSettings(),this.isInvoiceDuplicate=this.model[Ze.aH.DUPLICATE_DETECTION],this.isInvoiceDuplicate||(this.isInvoiceDuplicate=this.model[Ze.aH.DUPLICATE_INVOICE_DETECTION])}))},setInvoiceDuplicateStatus(e){this.isInvoiceDuplicate=e},setTriggerDocumentLock(e){this.trigger_document_lock=e},setCurrentPage(){this.lastPageItem=this.record.images.length},setAppType(){this.$route.params.id||this.goToDashboard(),setTimeout((()=>{this.showDialog=!1}),1e4)},handleDocLockSubscribe(){const e=(0,ot.oI)();e.$subscribe(((e,t)=>{this.isReadOnly=!this.doc_lock.success,this.handleReadOnly()}))},handleReadOnly(){if(Ze.B2.includes(this.record.status))return void(this.isReadOnly=!0);const e=pe.tH.hasAccess("update");e||(this.isReadOnly=!0)},getInvoiceDataByDocId(e){return ss(this,void 0,void 0,(function*(){try{if((yield this.setRecordFromCache())&&this.record.doc_id===e)return;this.record=[],this.clearSelectedSessionStorage(),yield this.getDocumentById(e)}catch(t){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}}))},getConfidence(e){return e?e<1?(100*+e.toFixed(2)).toFixed(0):+e.toFixed(2):""},initPage(){this.handleFormatWarning(),this.docType=this.record.doc_type,this.docStatus=this.record.status,this.setImage(),this.initImageArea(),window.addEventListener("keydown",this.keydownEvent),document.addEventListener("removeSelectedAreaOnImage",this.removeSelectedAreaOnImage),this.getAI_IndicatorData(),this.enableOrDisableExportButton(),setTimeout((()=>{this.setCurrentPage()}),200),this.DOC_SCRIPT_MODULE=this.user_settings[this.doc_script_module_setting]},changeContentScroll(e){const t=document.querySelector("#validation_bar_content");var i=t.scrollTop;t.scrollTop=i+e},onScrollUp(){this.changeContentScroll(-110);const e=document.querySelector("#validation_bar_content"),t=e.scrollHeight-e.clientHeight;var i=e.scrollTop;this.showScrollDownButton=i!=t,this.showScrollUpButton=0!=i},onScrollDown(){this.changeContentScroll(110);const e=document.querySelector("#validation_bar_content"),t=e.scrollHeight-e.clientHeight;var i=e.scrollTop;this.showScrollDownButton=i!=t,this.showScrollUpButton=0!=i},openPDfWindoByDefault(){this.user_settings["DUAL_MONITOR_MODE_SETTING"]&&this.isMultiScreen()&&0==this.pdf_in_window&&this.selectBetweenMonitor()},isElementLoaded(e){return ss(this,void 0,void 0,(function*(){while(null===document.querySelector(e))yield new Promise((e=>requestAnimationFrame(e)));return document.querySelector(e)}))},selectBetweenMonitor(){return ss(this,void 0,void 0,(function*(){if(0!=this.pdf_in_window)this.external_window.close(),this.pdf_in_window=!1,this.splitterModel=80,this.prepareRectangles();else if(this.isMultiScreen()){const e=yield ve.jD.getUserPreference({key:"MONITOR_PREFERENCE"});if(e){let t=e.slice(-1),i=isNaN(t)?0:+t-1;this.openComponentInSeparateWindow(i)}else this.selectMonitor=!0}else this.showErrorToast(this.$t("pages.messages.MULTI_SCREENS_NOT_FOUND"))}))},openComponentInSeparateWindow(e){this.pdf_in_window=!0,this.selectMonitor=!1,this.splitterModel=0,this.setDataToCache(),this.removeOverlayandLines();let t=this.$router.resolve({path:"/show_pdf/"+this.docId});this.openWindowOnSelectedMonitor(e,t.href)},routeToNextDoc(e){return ss(this,void 0,void 0,(function*(){this.showLoading();try{let t=yield this.makeQueryParamFromFilters();const i=yield ve.jD.getUserAllPreferences();let s=i.PAGINATION_SIZE;const o=yield ve.z6.getList("?&skip=0&limit="+s+t);let a=null,n=null;for(let e=0;e<o.documents.length;e++)if(o.documents[e].id===this.docId){a=e>0?o.documents[e-1].id:"",n=e<o.documents.length-1?o.documents[e+1].id:"";break}""!==n&&"next"===e?(this.showSuccessToast(this.$t("pages.messages.NEXT_DOC_LOADED")),this.unLockDoc(),window.removeEventListener("beforeunload",this.onTabClose),this.resetAllStoreData(),this.$router.push("/field_validation_v1/"+n)):""!==a&&"previous"===e?(this.showSuccessToast(this.$t("pages.messages.PREVIOUS_DOC_LOADED")),this.unLockDoc(),window.removeEventListener("beforeunload",this.onTabClose),this.resetAllStoreData(),this.$router.push("/field_validation_v1/"+a)):this.showErrorToast(this.$t("pages.messages.NO_NEXT_DOC"))}catch(t){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}))},onTabClose(e){let t=Se.A.has("event_name")?Se.A.getItem("event_name"):null;t&&"language_change"===t||(e.preventDefault(),e.returnValue="",this.clearSelectedSessionStorage())},keydownEvent(e){try{"Escape"===e.key?(this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.removeMagnifier()):"Enter"===e.key?(this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.connectionId=""):"ArrowDown"===e.key&&(this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.$refs["fieldsView"].selectNextField(this.connectionId),setTimeout((()=>{this.enableOrDisableExportButton()}),5),this.connectionId="")}catch(e){}},getAI_IndicatorData(){return ss(this,void 0,void 0,(function*(){try{let e;if(this.ai_fields=this.record&&this.record.fields&&Array.isArray(this.record.fields)?this.record.fields.length:0,!this.record.filter_values||!(this.record.filter_values.length>0)||!Array.isArray(this.record.filter_values))throw"getAI_IndicatorData () no filter_values or doc_type to proceed";let t="?doc_type="+this.record.doc_type+"&filter_values="+this.record.filter_values.join();if(e=yield ve.M8.get_ai_score(t),!1===e.success)throw e.message;if(!0===e.success){this.ai_rules=e.rules,this.mean_effective_weight=e.mean_effective_weight;const t=new CustomEvent("FV_gauge_calculation",{detail:e});document.dispatchEvent(t)}}catch(e){}}))},imageclicked(e){this.image=this.baseUrl+"/"+(0,Qe.v)(this.record.images[e.target.dataset.id].path),this.page=parseInt(e.target.dataset.id)+1,this.pdf_in_window?this.pdfInChildPage():this.pdfInSamePage()},movePageUp(){this.page!=this.lastPageItem?(this.page++,this.quickActionClicked(this.page)):this.showErrorToast(this.$t("pages.screen2a.page_limit_reached"))},movePageDown(){1!=this.page&&(this.page--,this.quickActionClicked(this.page))},downloadFile(){try{let e=fe.VA+"/resource/document/"+this.docId+"/"+this.docId+".pdf?"+this.tokenQueryParam;if(!e)return;fetch(e).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=this.record.filename,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)})).catch((e=>{}))}catch(e){}},validatePageNumber(){this.page?(this.page>this.lastPageItem&&(this.page=this.lastPageItem),this.quickActionClicked(this.page)):this.page=1},quickActionClicked(e){!e||0==e||e>this.lastPageItem||(this.image=this.baseUrl+"/"+(0,Qe.v)(this.record.images[e-1].path),this.pdf_in_window?this.pdfInChildPage():this.pdfInSamePage())},pdfInSamePage(){this.removeOverlayandLines(),this.getImageDetails()},pdfInChildPage(){this.external_window.PdfView.image=this.image,this.external_window.PdfView.removeOverlayandLines(),this.$nextTick((()=>{this.external_window.PdfView.prepareRectangles()}))},getImageDetails(){if(0==this.renderComponent||0==this.imageLoaded)return;let e=this.screenshot;0==this.screenshot.offsetWidth&&(e=os("#screenshot2")),this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight,this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight),this.$nextTick((()=>{this.prepareRectangles()})),this.hideLoading(),this.enableOrDisableExportButton()},assignImageDimenions(){let e=os("#image_container");if(e){e.querySelector(".q-splitter__before");this.imageWidth=e.offsetWidth-90,this.imageHeight=e.offsetHeight-32}this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight)},showConnectionFromRect(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing();const t=e.target.getAttribute("connectionId"),i=e.target,s=this.getElementToConnect(os("#"+t));this.scrollInToViewCenter(s),this.scrollInToViewCenter(i),document.documentElement.scrollTop=0,setTimeout((()=>{if(t.startsWith(Ze.Al))return i.classList.add("border"),void this.dsiplayFieldInToView(t);this.showConnection(t,i,s)}),50)},highlightTableRowArea(e){this.showConnectionFromField(e.detail,!0)},showConnectionFromField(e,t=!1){if("annotate"===this.field_view_mode)return void this.showNotification(this.$t("annotation_mode_is_on_warning"));this.pdf_in_window?(this.external_window.PdfView.removeOverlayandLines(),this.external_window.PdfView.restrictDrawing()):(this.removeOverlayandLines(),this.restrictDrawing());let i=this.getElementToConnect(os("#"+e));if(!i)return;let s=Number(i.getAttribute("pageno"));s=isNaN(s)?this.page:s;let o=!1;s&&s!==this.page&&(o=!0,this.page=s,this.image=this.baseUrl+"/"+(0,Qe.v)(this.record.images[this.page-1].path),this.pdf_in_window&&this.sendMessegeToChildWindow("image",this.image,!0),this.getImageDetails(),this.$forceUpdate()),this.connectionId=e,this.$nextTick((()=>{setTimeout((()=>{this.pdf_in_window?this.external_window.PdfView.proceedForReactFinding(e,i,t):this.proceedForReactFinding(e,i,t)}),o?300:100)}))},proceedForReactFinding(e,t,i){let s=os("#"+e+"_rect");s&&(this.scrollInToViewCenter(s),document.documentElement.scrollTop=0),setTimeout((()=>{i?this.highlightRow(s):s?this.showConnection(e,s,t):this.proceedIfReactNotFound(t)}),50)},proceedIfReactNotFound(e){if("ELECTRONIC_DOCUMENT"===this.record.extraction_method)return;this.componentType=e.getAttribute("child_type");let t="";if("checkbox"===this.componentType)t=e.getAttribute("aria-checked")?"true":"";else{let i=e.querySelector(this.componentType);i&&(t=i.value)}if(""!=t){this.showNotification(this.$t("pages.messages.SELECT_AREA_NO_COORDINATES"));const e=new CustomEvent("dispatch_status_bar_message",{detail:{message:this.$t("pages.messages.SELECT_AREA")}});document.dispatchEvent(e)}else{this.showNotification(this.$t("pages.messages.SELECT_AREA"));const e=new CustomEvent("dispatch_status_bar_message",{detail:{message:this.$t("pages.messages.SELECT_AREA")}});document.dispatchEvent(e)}this.pdf_in_window?(this.external_window.PdfView.enableDrawing(),this.external_window.PdfView.connectionId=this.connectionId):this.enableDrawing()},showConnection(e,t,i){this.pdf_in_window?this.external_window.PdfView.proceedForReactFinding(e,i,!1):t&&i?(this.drawOverlay(e,t),t.classList.add("border"),this.connect(t,i,"#26a69a",2)):alert(this.$t("pages.messages.NO_MAPPING_AVAILABLE"))},saveOverlayResult(){this.cleanRectangles(),this.pdf_in_window?this.external_window.PdfView.redraw():this.redraw(),this.getTextByCoordinates(this.rectCordinate)},connect(e,t,i,s){const o=this.getOffset(e),a=this.getOffset(t),n=o.left,l=o.top+o.height/2,r=a.right,d=a.top+a.height/2,c=Math.sqrt((r-n)*(r-n)+(d-l)*(d-l)),h=(n+r)/2-c/2,u=(l+d)/2-s/2,g=Math.atan2(l-d,n-r)*(180/Math.PI);this.removeAllConnectionLines();const m=document.createElement("div");m.setAttribute("id","connection_line"),m.style.cssText="z-index: 102;padding:0px; margin:0px; height:"+s+"px; background-color:"+i+"; line-height:1px; position:absolute; left:"+h+"px; top:"+u+"px; width:"+c+"px; -moz-transform:rotate("+g+"deg); -webkit-transform:rotate("+g+"deg); -o-transform:rotate("+g+"deg); -ms-transform:rotate("+g+"deg); transform:rotate("+g+"deg);",document.body.appendChild(m)},getTextByCoordinates(e){return ss(this,void 0,void 0,(function*(){const t=this.record;let i,s=new FormData,o=e.startX/this.imageWidth,a=e.startY/this.imageHeight,n=e.endX/this.imageWidth,l=e.endY/this.imageHeight;s.append("x0",o.toString()),s.append("y0",a.toString()),s.append("x1",n.toString()),s.append("y1",l.toString()),s.append("doc_id",t.doc_id),s.append("page",this.page.toString()),s.append("field_name",this.connectionId),this.showLoading();try{i=yield ve.M8.get_field_value(s)}catch(d){return void this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}this.textApiResponse=i;const r=i.coords;if(!r||0===r[0].x&&0===r[0].y&&""===i.formatted_value)return this.showErrorToast(this.$t("pages.messages.EMPTY_MAPPING_NOT_ALLOWED")),void(this.pdf_in_window?(this.external_window.PdfView.prepareRectangles(),this.external_window.PdfView.enableDrawing()):(this.prepareRectangles(),this.enableDrawing()));"INVOICE"==this.record.doc_type?this.dontAsk?(this.textApiResponse.multi_line?this.textConfirmationMsg=this.$t("is_multi_line_confirm"):this.textConfirmationMsg=this.$t("is_draw_correct"),this.textConfirmation=!0):this.saveInstant=!0:this.updateFieldData()}))},updateFieldData(){this.$refs["fieldsView"].updateFieldData(this.textApiResponse),this.saveInstant=!1,this.textApiResponse=null},enableOrDisableExportButton(e){this.enableExportButton=!0,this.fieldErrors={},this.record.fields.forEach(((e,t)=>{this.checkFieldInvalid(e,!1)})),e&&this.printFieldsNeedToBeValidated(this.fieldErrors)},checkFieldInvalid(e,t=!0){if(!1===e.is_valid&&!this.isFieldCalcualtedFromLayout(e.name)&&this.isfieldsNotDisplayed(e.name))return this.enableExportButton=!1,void(this.fieldErrors[e.name]=this.getLabelForFormBuilder(this.formBuilderConfigModel[e.name],"form_builder."));this.fieldErrors.hasOwnProperty(e.name)&&delete this.fieldErrors[e.name],t&&0===(0,je.Ns)(this.fieldErrors)&&(this.enableExportButton=!0)},printFieldsNeedToBeValidated(e){},isFieldCalcualtedFromLayout(e){let t=!1;for(const i of this.formLayout)for(const s of i.rows)s.field_name==e&&s.calculation_formula&&(t=!0);return t},isfieldsNotDisplayed(e){let t=!0;return this.fieldsNotDisplayed.hasOwnProperty(e)&&(t=!1),t},setApiData(e){this.record=e,this.$forceUpdate()},windowResize(){this.assignImageDimenions(),setTimeout((()=>{this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.getImageDetails(),this.removeMagnifier()}),20)},refreshCanvas(){this.prepareRectangles(),this.$forceUpdate(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.getImageDetails(),this.redraw()},refreshCanvasAfterSelection(e){this.refreshCanvas(),this.showConnectionFromField(e)},removeSelectedAreaOnImage(e){this.rectangles.pop(),this.refreshCanvas(),this.restrictDrawing()},handleFormatWarning(){"XML_INVOICE"!=this.record.doc_type&&(this.format_warning_dismiss=this.showRulesNotFoundToast(this.record,window.location.href))},isDebugFlagHandler(){this.is_debug=!1,this.$route.query&&"true"===this.$route.query.is_debug&&(this.is_debug=!0)},viewOCRDocument(){let e=this.$router.resolve({path:"/ocr-document/"+this.docId+"/"+this.page});window.open(e.href,"_blank","location=yes,toolbar=yes,scrollbars=yes,resizable=yes,left=500,width=1500,height=1000")},fieldValidationError(e){let t="REQUIRED";return e&&(t=e),t},hasApiData(){return 0!==(0,je.Ns)(this.record)&&!this.doc_fetch_error},removeOldMapiingsAndDrawNew(e){if(this.pdf_in_window)return this.external_window.PdfView.restrictDrawing(),this.external_window.PdfView.record=this.record,void this.external_window.PdfView.prepareRectangles();this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.prepareRectangles();let t=this.getElementToConnect(os("#"+e)),i=os("#"+e+"_rect");i&&t&&this.showConnection(e,i,t)},getElementToConnect(e){return this.componentType=e.getAttribute("child_type"),"checkbox"===this.componentType?e.querySelector(".q-checkbox__bg"):e},toggleSplitter(){this.splitterModel>=95?(this.splitterModel=60,this.setAfterPanelHeight(!0)):this.splitterModel=115},setSplitterModelWrapper(e){this.setSplitterModel(e.detail.data)},setSplitterModel(e){this.splitterModel=100,this.setAfterPanelHeight(e)},setAfterPanelHeight(e){e&&this.isElementLoaded("#afterSlot").then((e=>{const t=os("#afterSlot"),i=os("#image_scrolle");if(t&&i){let e=t.offsetHeight/i.offsetHeight*100;this.splitterModel=100-e-5,this.openPDfWindoByDefault()}}))},displaySplitDocumentView(){this.isReadOnly||(this.split_document=!0)},onResize(e){this.windowResize()},goToLayoutTemplate(){try{if(!this.doc_loaded)return;const e=He.Z.getDetailViewRoute({doc_type_key:this.record.doc_type||"",layout_template_id:this.layout_template_id||"",sub_doc_type_key:this.record.sub_doc_type||""});window.open(e,"_blank").focus()}catch(e){}},toFlowScreen(e){this.$router.push("/doc_flow/"+e)},askLater(){Ie.A.set("dontAsk","neverAsk"),Ie.A.get("dontAsk")},restartExport(e){return ss(this,void 0,void 0,(function*(){try{return yield ve.M8.restart_document(e),!0}catch(t){throw t}}))},getSupplier(){let e="supplier_name",t="";for(let i of this.record.fields)if(i.name===e&&i.formatted_value){t=i.formatted_value;break}return t},goToDashboard(){this.$router.push("/dashboard")},splitterChanged(){this.saveSplitterValueInStorage();const e=new CustomEvent("splitter_changed",{detail:this.splitterModel});document.dispatchEvent(e)},getOverlayHeadings(){const e=os("#"+this.connectionId);if(!e)return"";const t=e.getAttribute("child_type");if(!t)return"";this.componentType=t;let i="",s="";if("checkbox"===this.componentType)s=e.getAttribute("aria-label"),i="Un-Checked","true"===e.getAttribute("aria-checked")&&(i="Checked");else{const t=os("."+this.connectionId);s=t.innerHTML;const o=e.querySelector(this.componentType);i=o.value}return i+Ze.Tr+s},selectNextField(e){this.$refs["fieldsView"].selectNextField(e),setTimeout((()=>{this.enableOrDisableExportButton()}),5)},initTempFieldDelete(){this.$refs["fieldsView"].initTempFieldDelete()},getFieldByIndex(e){return this.formBuilderModel[e]},getHTMLField(e){const t=os("#"+e.name);return t&&e.page&&null!=e.page&&e.coords&&t.setAttribute("pageno",e.page),t},initiateMagnifyGlass(){this.pdf_in_window?this.external_window.PdfView.initMagnifyGlass():this.initMagnifyGlass()},sendMessegeToChildWindow(e,t,i){this.external_window.PdfView.getDataFromParent({key:e,value:t,redraw:i})},changeScreenMode(){if(!this.isReadOnly){if("validate"==this.field_view_mode){this.field_view_mode="annotate",os("#validate-container").classList.add("hidden"),this.screenshot.classList.remove("cursor-crosshair"),this.removeOverlayandLines(),this.screenshot.removeEventListener("dblclick",this.dblClickToSelect),this.screenshot.removeEventListener("pointerdown",this.startDrag),this.screenshot.removeEventListener("pointerdown",this.startDrag),document.body.removeEventListener("click",this.mouseClicked,!0);const e=os(".img-magnifier-container");e&&e.removeEventListener("scroll",this.removeOverlayandLines);const t=os(".q-splitter__after");t&&t.removeEventListener("scroll",this.removeOverlayandLines),this.enable_editing=!0}else{os("#validate-container").classList.remove("hidden"),this.field_view_mode="validate",this.screenshot.addEventListener("dblclick",this.dblClickToSelect),this.screenshot.addEventListener("pointerdown",this.startDrag),this.screenshot.addEventListener("pointerdown",this.startDrag),document.body.addEventListener("click",this.mouseClicked,!0);const e=os(".img-magnifier-container");e&&e.addEventListener("scroll",this.removeOverlayandLines);const t=os(".q-splitter__after");t&&t.addEventListener("scroll",this.removeOverlayandLines),this.enable_editing=!1,this.getImageDetails()}this.screenshot.classList.remove("cursor-crosshair")}},enableEditing(){this.enable_editing,this.screenshot.classList.add("cursor-crosshair")},unLockDoc(e){this.releaseDocLock({doc_id:this.record.doc_id})},goToTableExtraction(){this.$router.push("/tbl_ext_v3/"+this.$route.params.id)},restoreDeleteColumn(){if(this.isFormBuilderMode||this.isReadOnly)return;const e=new CustomEvent("restore_delete_column",{});document.dispatchEvent(e)}},setup(){const e=(0,De.A)(),t=(Ie.A.set("dontAsk",""),Ie.A.get("dontAsk"),(0,ot.q3)());t.$reset();const{record:i,get_cached_data_id:s,doc_loaded:o,confirmationForPoConnectionReset:a,error:n,notifications:l,layout_template_id:r,show_all_menu_btns:d,has_ai_table:c,fieldErrors:h,enableExportButton:u,page:g,document_version:m,doc_annotations:p,fieldsNotDisplayed:_,script_error_count:f}=(0,ue.bP)(t),{getDocumentById:v,resetDocStore:b,resetAllStoreData:k,setRecordFromCache:w,setDataToCache:y,removeCache:C,getDocAnnotations:L}=t,x=(0,ot.uL)(),{formLayout:F,isExtenedPanel:E,formBuilderModel:A,formBuilderConfigModel:D,renderComponent:S,docType:I}=(0,ue.bP)(x),{getElementWidth:T,isFieldHidden:R}=x;let O=[],M=[],q=(0,_e.KR)(!1),P=(0,_e.KR)(!1),B=(0,_e.KR)(!1);const V=(0,ot.oI)(),{releaseDocLock:W}=V,{doc_lock:$}=(0,ue.bP)(V),N=(0,ot.XB)(),{isConfirmationBoxDisable:K}=(0,ue.bP)(N),{resetStoreOnRouteChange:Q}=N,z=(0,ot.fX)(),{makeQueryParamFromFilters:X}=z,U=(0,ot.Bu)(),{user_settings:H}=(0,ue.bP)(U),{getOrgSettings:j}=U,G=(0,ot._6)(),{tokenQueryParam:Y}=(0,ue.bP)(G);G.getTokenQueryParam();const J=(0,ot.G6)(),{connect:Z}=J,ee=(0,ot.wt)(),{model:te}=(0,ue.bP)(ee),{getDocTypeSettings:ie}=ee;let se=[],oe={startX:0,startY:0,endX:0,endY:0};const ae={x:0,y:0,width:0,height:0,connectionId:""};let ne=0,le=0,re=os(".screenshot"),de=os("#marquee"),ce=(os("#foreignObject"),os("#boxes")),he=os(".areas");return{getDocTypeSettings:ie,resetAllStoreData:k,resetDocStore:b,isFieldHidden:R,doc_annotations:p,connectWebSocket:Z,show_all_menu_btns:d,get_cached_data_id:s,has_ai_table:c,doc_loaded:o,removeCache:C,setDataToCache:y,releaseDocLock:W,getDocumentById:v,setRecordFromCache:w,resetStoreOnRouteChange:Q,isConfirmationBoxDisable:K,fields_pending_load_count:(0,_e.KR)(0),fields_loaded_count:(0,_e.KR)(0),notifications:l,record:i,docType:I,confirmationForPoConnectionReset:a,doc_fetch_error:(0,_e.KR)(n),doc_lock:$,page:g,showTooltip:q,showTooltipWithHide:P,showTooltipWithClose:B,tableRows:O,fieldsNotDisplayed:_,image:(0,_e.KR)(""),current_sidebar:(0,_e.KR)(""),layout:M,images:(0,_e.KR)({}),baseUrl:fe.VA,isReadOnly:(0,_e.KR)(!1),componentType:"input",lastPageItem:(0,_e.KR)(0),lineitem_count:0,lineitem_error:(0,_e.KR)(!1),is_debug:(0,_e.KR)(!1),tb_version:"default",document_version:m,showScrollDownButton:(0,_e.KR)(!1),showScrollUpButton:(0,_e.KR)(!1),splitterModel:(0,_e.KR)(60),imageFieldSplitter:(0,_e.KR)(76),showNotification(t){e.notify({message:t,color:"primary",position:"top"})},doc_type_list:M,ai_rules:(0,_e.KR)(0),ai_fields:(0,_e.KR)(0),mean_effective_weight:(0,_e.KR)(0),textConfirmationMsg:(0,_e.KR)(""),formLayout:F,isExtenedPanel:E,renderComponent:S,enableExportButton:u,getElementWidth:T,imageHeight:(0,_e.KR)(0),imageWidth:(0,_e.KR)(0),viewBox:(0,_e.KR)("0 0 0 0"),textApiResponse:(0,_e.KR)(),connectionId:(0,_e.KR)(""),is_admin:(0,_e.KR)(!1),layout_template_id:r,pdf_in_window:!1,external_window:(0,_e.KR)(),makeQueryParamFromFilters:X,rectangles:se,rectCordinate:oe,marqueeRect:ae,startX:ne,startY:le,screenshot:re,marquee:de,boxes:ce,areas:he,formBuilderModel:A,formBuilderConfigModel:D,user_settings:H,getOrgSettings:j,getDocAnnotations:L,tokenQueryParam:Y,screen_mode:(0,_e.KR)(!1),field_view_mode:(0,_e.KR)("validate"),enable_editing:(0,_e.KR)(!1),fieldErrors:h,selectFont:(0,_e.KR)("Helvetica"),selectFontSize:(0,_e.KR)(12),selectColor:(0,_e.KR)("#000000"),DOC_SCRIPT_MODULE:(0,_e.KR)(!1),display_doc_script_logs:(0,_e.KR)(!1),script_error_count:f,model:te}}});var ns=i(98072),ls=i(1096),rs=i(10386),ds=i(23954),cs=i(84436),hs=i(53999),us=i(67837),gs=i(76056),ms=i(93676),ps=i(36914),_s=i(39150),fs=i(94940),vs=i(57092),bs=i(1444),ks=i(80460),ws=i(67156),ys=i(42315);const Cs=(0,Ri.A)(as,[["render",he],["__scopeId","data-v-ff37a10a"]]),Ls=Cs;Bi()(as,"components",{QIcon:qi.A,QSplitter:ns.A,QResizeObserver:ls.A,QBtn:Ni.A,QTooltip:Ki.A,QSeparator:rs.A,QBadge:ds.A,QMenu:cs.A,QList:hs.A,QItem:Qi.A,QItemSection:zi.A,QInput:us.A,QDrawer:gs.A,QDialog:Ui.A,QCard:Hi.A,QCardSection:Oi.A,QSpace:ms.A,QToolbar:ps.A,QToolbarTitle:_s.A,QCardActions:ji.A,QSelect:fs.A,QFooter:vs.A,QSlider:bs.A,QCheckbox:ks.A,QField:ws.A,QTable:ys.A}),Bi()(as,"directives",{ClosePopup:Gi.A})}}]);