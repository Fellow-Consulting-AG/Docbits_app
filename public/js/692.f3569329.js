"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[692],{20692:(t,e,s)=>{s.r(e),s.d(e,{default:()=>Mt});var i=s(61758);function a(t,e,s,a,n,r){const o=(0,i.g2)("SideMenu"),l=(0,i.g2)("newUpdateError"),d=(0,i.g2)("router-view"),u=(0,i.g2)("q-page-container"),c=(0,i.g2)("q-layout");return(0,i.uX)(),(0,i.Wv)(c,{view:"lHh lpR lFf"},{default:(0,i.k6)((()=>[(0,i.bF)(o),(0,i.bF)(u,null,{default:(0,i.k6)((()=>[(0,i.bF)(l),((0,i.uX)(),(0,i.Wv)(d,{key:t.$route.fullPath}))])),_:1})])),_:1})}var n=s(50411),r=s(23537),o=s(1659),l=s(45022),d=s(24622),u=s(38734),c=s(46162),h=s(18505),g=s(76956),p=s(58790);const _=t=>((0,i.Qi)("data-v-f62aed7e"),t=t(),(0,i.jt)(),t),b={key:0},m=["src"],k={key:1},f=["src"],v=_((()=>(0,i.Lk)("img",{src:"icons/LOGO.svg",target:"_blank",rel:"noopener noreferrer"},null,-1))),y={class:"text-capitalize"},w={class:"fixed-bottom"},A={key:0},L={class:"text-capitalize"},F={key:1},C={class:"text-capitalize"},S={class:"text-center q-pt-md ellipsis q-px-sm"},I={class:"q-mini-drawer-hide drawer-close"};function q(t,e,s,a,n,r){const o=(0,i.g2)("q-avatar"),l=(0,i.g2)("q-badge"),d=(0,i.g2)("InvoiceIcon"),u=(0,i.g2)("q-icon"),c=(0,i.g2)("q-tooltip"),h=(0,i.g2)("q-item-section"),g=(0,i.g2)("q-item"),_=(0,i.g2)("q-separator"),q=(0,i.g2)("q-list"),E=(0,i.g2)("UserDropDown"),x=(0,i.g2)("q-menu"),Q=(0,i.g2)("q-btn"),$=(0,i.g2)("q-drawer"),O=(0,i.gN)("ripple");return t.isDashboardRoute?((0,i.uX)(),(0,i.Wv)($,{key:0,modelValue:t.drawer,"onUpdate:modelValue":e[4]||(e[4]=e=>t.drawer=e),"show-if-above":"",mini:!t.drawer||t.miniState,width:250,breakpoint:500,bordered:"",class:"highlighted-back"},{default:(0,i.k6)((()=>[t.isMobile()?((0,i.uX)(),(0,i.CE)("div",b,[(0,i.bF)(o,{class:"cursor-pointer big-fellow-icon",square:"",onClick:e[0]||(e[0]=e=>t.drawer=!t.drawer)},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{src:t.$q.dark.isActive?"images/docbits-black.svg":"images/docbits.svg",target:"_blank",rel:"noopener noreferrer",class:"icon-width"},null,8,m)])),_:1})])):((0,i.uX)(),(0,i.CE)("div",k,[t.miniState?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(o,{key:0,class:"cursor-pointer big-fellow-icon",square:"",onClick:e[1]||(e[1]=e=>t.miniState=!0)},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{src:t.$q.dark.isActive?"images/docbits-black.svg":"images/docbits.svg",target:"_blank",rel:"noopener noreferrer",class:"icon-width"},null,8,f)])),_:1})),t.miniState?((0,i.uX)(),(0,i.Wv)(o,{key:1,square:"",class:"cursor-pointer small-fellow-icon",onClick:e[2]||(e[2]=e=>t.miniState=!1)},{default:(0,i.k6)((()=>[v])),_:1})):(0,i.Q3)("",!0)])),(0,i.bF)(q,{padding:"",class:(0,p.C4)(["scroll-menu",t.isMobile()?"":"thin-scrollbar"])},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.menuList,((e,s)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:s},[(0,i.bo)(((0,i.uX)(),(0,i.Wv)(g,{clickable:"",onClick:s=>t.navigateTo(e.to),active:t.isActive(e.to),"active-class":"active-text",id:e.name},{default:(0,i.k6)((()=>[(0,i.bF)(h,{avatar:""},{default:(0,i.k6)((()=>["tasks"==e.name&&t.task_count>0?((0,i.uX)(),(0,i.Wv)(l,{key:0,color:"red",style:{position:"absolute","z-index":"1",top:"4px",right:"4px"},label:t.task_count},null,8,["label"])):(0,i.Q3)("",!0),"invoice_dashboard"===e.name?((0,i.uX)(),(0,i.Wv)(d,{key:1,isActive:!!t.isActive(e.to)},null,8,["isActive"])):((0,i.uX)(),(0,i.Wv)(u,{key:2,color:t.isActive(e.to)?"primary":t.$q.dark.isActive?"grey-3":"grey-8",name:e.icon},null,8,["color","name"])),(0,i.bF)(c,{class:"text-capitalize"},{default:(0,i.k6)((()=>[(0,i.eW)((0,p.v_)(t.$t(e.label).toLowerCase()),1)])),_:2},1024)])),_:2},1024),(0,i.bF)(h,null,{default:(0,i.k6)((()=>[(0,i.Lk)("span",y,(0,p.v_)(t.$t(e.label).toLowerCase()),1)])),_:2},1024)])),_:2},1032,["onClick","active","id"])),[[O]]),e.separator?((0,i.uX)(),(0,i.Wv)(_,{key:"sep"+s})):(0,i.Q3)("",!0)],64)))),128))])),_:1},8,["class"]),(0,i.Lk)("div",w,[(0,i.bF)(_),(0,i.bF)(q,{padding:""},{default:(0,i.k6)((()=>[t.isMobile()?((0,i.uX)(),(0,i.CE)("div",F,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.bottomItems,((e,s)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:s},["notifications"!==e.name&&"user"!==e.name?(0,i.bo)(((0,i.uX)(),(0,i.Wv)(g,{key:0,clickable:"",onClick:s=>t.navigateTo(e.to),active:t.isActive(e.to),"active-class":"active-text",id:e.name},{default:(0,i.k6)((()=>[(0,i.bF)(h,{avatar:""},{default:(0,i.k6)((()=>[(0,i.bF)(u,{color:t.isActive(e.to)?"primary":t.$q.dark.isActive?"grey-3":"grey-8",name:e.icon},null,8,["color","name"]),(0,i.bF)(c,{class:"text-capitalize"},{default:(0,i.k6)((()=>[(0,i.eW)((0,p.v_)(t.$t(e.label).toLowerCase()),1)])),_:2},1024)])),_:2},1024),(0,i.bF)(h,null,{default:(0,i.k6)((()=>[(0,i.Lk)("span",C,(0,p.v_)(t.$t(e.label).toLowerCase()),1)])),_:2},1024)])),_:2},1032,["onClick","active","id"])),[[O]]):(0,i.Q3)("",!0)],64)))),128)),(0,i.bF)(_),(0,i.bo)(((0,i.uX)(),(0,i.Wv)(g,{clickable:"",onClick:t.logout},{default:(0,i.k6)((()=>[(0,i.bF)(h,{avatar:""},{default:(0,i.k6)((()=>[(0,i.bF)(u,{class:"icon-grey",name:"power_settings_new"})])),_:1}),(0,i.bF)(h,{class:"text-capitalize"},{default:(0,i.k6)((()=>[(0,i.eW)((0,p.v_)(t.$t("layout.logout")),1)])),_:1})])),_:1},8,["onClick"])),[[O]])])):((0,i.uX)(),(0,i.CE)("div",A,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.bottomItems,((e,s)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:s},[(0,i.bo)(((0,i.uX)(),(0,i.Wv)(g,{clickable:"",onClick:s=>t.navigateTo(e.to),active:t.isActive(e.to),"active-class":"active-text",id:e.name},{default:(0,i.k6)((()=>[(0,i.bF)(h,{avatar:""},{default:(0,i.k6)((()=>[(0,i.bF)(u,{color:t.isActive(e.to)?"primary":t.$q.dark.isActive?"grey-3":"grey-8",name:e.icon},null,8,["color","name"]),(0,i.bF)(c,{class:"text-capitalize"},{default:(0,i.k6)((()=>[(0,i.eW)((0,p.v_)(t.$t(e.label).toLowerCase()),1)])),_:2},1024)])),_:2},1024),(0,i.bF)(h,null,{default:(0,i.k6)((()=>[(0,i.Lk)("span",L,(0,p.v_)(t.$t(e.label).toLowerCase()),1)])),_:2},1024),"user"==e.name?((0,i.uX)(),(0,i.Wv)(x,{key:0,style:{"border-radius":"10px"},class:"no-shadow gray-border",anchor:"bottom right",self:"bottom left",offset:[0,0]},{default:(0,i.k6)((()=>[(0,i.bF)(E)])),_:1})):(0,i.Q3)("",!0)])),_:2},1032,["onClick","active","id"])),[[O]]),e.separator?((0,i.uX)(),(0,i.Wv)(_,{key:"sep"+s})):(0,i.Q3)("",!0)],64)))),128))]))])),_:1}),(0,i.bF)(_),(0,i.Lk)("div",null,[(0,i.Lk)("p",S,(0,p.v_)(t.app_version),1),(0,i.bF)(c,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,p.v_)(t.app_version),1)])),_:1})])]),(0,i.Lk)("div",I,[(0,i.bF)(Q,{dense:"",round:"",unelevated:"",class:"highlighted-back menu-close-button",icon:"chevron_left",onClick:e[3]||(e[3]=e=>t.miniState=!0)})])])),_:1},8,["modelValue","mini"])):(0,i.Q3)("",!0)}var E=s(94124);const x={class:"user-item-initials"},Q={class:"user-profile-name"},$={class:""},O={class:"q-ml-sm"};function D(t,e,s,a,n,r){const o=(0,i.g2)("q-avatar"),l=(0,i.g2)("q-item-section"),d=(0,i.g2)("q-icon"),u=(0,i.g2)("q-item"),c=(0,i.g2)("q-list"),h=(0,i.g2)("q-menu"),g=(0,i.g2)("q-separator"),_=(0,i.g2)("LanguageDropdown"),b=(0,i.g2)("DarkMode"),m=(0,i.g2)("EditProfile"),k=(0,i.g2)("q-dialog"),f=(0,i.g2)("q-card-section"),v=(0,i.g2)("f-btn"),y=(0,i.g2)("q-card-actions"),w=(0,i.g2)("q-card"),A=(0,i.gN)("ripple"),L=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(c,{bordered:"",class:(0,p.C4)(t.isSupplierUser()?"user-fixed-height":t.is_sub_org?"user-max-height":"user-fixed-height")},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.organizations,((e,s)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:s},[(0,i.bF)(u,{clickable:e.sub_organisations.length>0},{default:(0,i.k6)((()=>[(0,i.bF)(l,{avatar:""},{default:(0,i.k6)((()=>[(0,i.bF)(o,{size:"32px",class:"user-avatar-background"},{default:(0,i.k6)((()=>[(0,i.Lk)("span",x,(0,p.v_)(t.getInitials(this.userFullName)),1)])),_:1})])),_:1}),(0,i.bF)(l,{class:"text-capitalize"},{default:(0,i.k6)((()=>[(0,i.Lk)("span",Q,(0,p.v_)(this.userFullName),1),(0,i.Lk)("span",$,(0,p.v_)(e.name.toLowerCase()),1)])),_:2},1024),e.sub_organisations.length>0?((0,i.uX)(),(0,i.Wv)(l,{key:0,side:""},{default:(0,i.k6)((()=>[(0,i.bF)(d,{name:"keyboard_arrow_right"})])),_:1})):(0,i.Q3)("",!0),e.sub_organisations.length>0?((0,i.uX)(),(0,i.Wv)(h,{key:1,anchor:"top end",self:"top start",offset:[1,0],style:{"border-radius":"10px"},class:"no-shadow gray-border"},{default:(0,i.k6)((()=>[(0,i.bF)(c,{bordered:""},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.sub_organisations,((e,s)=>(0,i.bo)(((0,i.uX)(),(0,i.Wv)(u,{key:s,clickable:"",onClick:s=>t.setSubOrg(e),active:e.id===t.sub_org_id},{default:(0,i.k6)((()=>[(0,i.bF)(l,{avatar:""},{default:(0,i.k6)((()=>[e.id===t.sub_org_id?((0,i.uX)(),(0,i.Wv)(d,{key:0,name:"check"})):(0,i.Q3)("",!0)])),_:2},1024),(0,i.bF)(l,{class:"text-capitalize"},{default:(0,i.k6)((()=>[(0,i.eW)((0,p.v_)(e.name.toLowerCase()),1)])),_:2},1024)])),_:2},1032,["onClick","active"])),[[A]]))),128))])),_:2},1024)])),_:2},1024)):(0,i.Q3)("",!0)])),_:2},1032,["clickable"]),(0,i.bF)(g),e.sub_organisations.length>0?((0,i.uX)(),(0,i.Wv)(u,{key:0,class:"highlighted-back"},{default:(0,i.k6)((()=>[(0,i.bF)(l,{avatar:""},{default:(0,i.k6)((()=>[(0,i.bF)(d,{class:"icon-grey",name:"img:settings/firmeninformation.svg"})])),_:1}),(0,i.bF)(l,{class:"text-capitalize"},{default:(0,i.k6)((()=>[(0,i.eW)((0,p.v_)(t.getSubOrgName(e.sub_organisations)),1)])),_:2},1024)])),_:2},1024)):(0,i.Q3)("",!0),(0,i.bF)(g),(0,i.bF)(_),(0,i.bF)(b)],64)))),128)),(0,i.bo)(((0,i.uX)(),(0,i.Wv)(u,{clickable:"",onClick:e[0]||(e[0]=e=>t.profileDialog=!0)},{default:(0,i.k6)((()=>[(0,i.bF)(l,{avatar:""},{default:(0,i.k6)((()=>[(0,i.bF)(d,{class:"icon-grey",name:"settings"})])),_:1}),(0,i.bF)(l,{class:"text-capitalize"},{default:(0,i.k6)((()=>[(0,i.eW)((0,p.v_)(t.$t("pages.user.settings").toLowerCase()),1)])),_:1})])),_:1})),[[A]]),(0,i.bF)(g),(0,i.bo)(((0,i.uX)(),(0,i.Wv)(u,{clickable:"",onClick:e[1]||(e[1]=t=>this.logout())},{default:(0,i.k6)((()=>[(0,i.bF)(l,{avatar:""},{default:(0,i.k6)((()=>[(0,i.bF)(d,{class:"icon-grey",name:"power_settings_new"})])),_:1}),(0,i.bF)(l,{class:"text-capitalize"},{default:(0,i.k6)((()=>[(0,i.eW)((0,p.v_)(t.$t("layout.logout")),1)])),_:1})])),_:1})),[[A]])])),_:1},8,["class"]),(0,i.bF)(k,{modelValue:t.profileDialog,"onUpdate:modelValue":e[2]||(e[2]=e=>t.profileDialog=e),persistent:""},{default:(0,i.k6)((()=>[(0,i.bF)(m)])),_:1},8,["modelValue"]),(0,i.bF)(k,{modelValue:t.refresh_warning,"onUpdate:modelValue":e[5]||(e[5]=e=>t.refresh_warning=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,i.k6)((()=>[(0,i.bF)(w,null,{default:(0,i.k6)((()=>[(0,i.bF)(f,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,i.k6)((()=>[(0,i.bF)(o,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,i.bF)(f,{class:"row items-center"},{default:(0,i.k6)((()=>[(0,i.Lk)("span",O,(0,p.v_)(t.$t("change_lost_warning")),1)])),_:1}),(0,i.bF)(y,{align:"right"},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.bF)(v,{appearance:"cancel",label:t.$t("cancel"),onClick:e[3]||(e[3]=e=>t.refresh_warning=!1)},null,8,["label"]),[[L]]),(0,i.bF)(v,{"data-cy":"done",label:t.$t("proceed"),onClick:e[4]||(e[4]=e=>t.refreshSettings(!0))},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var M=s(6044),T=s(45938),K=s(68130),P=s(84943),X=s(73937),z=s(34001),W=s(71016),R=function(t,e,s,i){function a(t){return t instanceof s?t:new s((function(e){e(t)}))}return new(s||(s=Promise))((function(s,n){function r(t){try{l(i.next(t))}catch(e){n(e)}}function o(t){try{l(i["throw"](t))}catch(e){n(e)}}function l(t){t.done?s(t.value):a(t.value).then(r,o)}l((i=i.apply(t,e||[])).next())}))};const U=(0,i.pM)({el:"#app",mixins:[M.A,h.A,d.A],props:{},components:{EditProfile:P.A,DarkMode:W.A,LanguageDropdown:z.A},data(){return{is_sub_org:(0,u.KR)(!1)}},mounted:function(){this.init(),window.addEventListener("storage",this.storageChangeEvent)},unmounted:function(){window.removeEventListener("storage",this.storageChangeEvent)},methods:{getInitials(t){var e=t.split(" "),s=e[0].substring(0,1).toUpperCase();return e.length>1&&(s+=e[e.length-1].substring(0,1).toUpperCase()),s},init(){return R(this,void 0,void 0,(function*(){try{this.loading=!0,yield this.refreshSettings(),yield this.getSubOrgId(),this.refreshUserInfo(),this.getLanguageIfEmpty(),this.getDatePatterns(),this.getSubInfo()}catch(t){}finally{this.loading=!1}}))},storageChangeEvent(t){this.handleSessionStorageChange(t)},getSubOrgName(t){let e;return t.map((t=>{t.id===this.sub_org_id&&(e=t.name)})),e},getSubInfo(){this.organizations&&this.organizations.length>0?this.organizations.map((t=>{t.sub_organisations.length>0?this.is_sub_org=!0:this.is_sub_org=!1})):this.is_sub_org=!1},handleSessionStorageChange(t){return R(this,void 0,void 0,(function*(){try{this.handleStorageEvent(t),yield this.refreshAndGetSubOrgId()}catch(e){}}))},getDatePatterns(){return R(this,void 0,void 0,(function*(){this.date_pattern_loaded||(yield this.getDatePatternOptions())}))},setSubOrg(t){return R(this,void 0,void 0,(function*(){try{this.showLoading();const e=String(t.id);if(!e)return void this.showErrorToast("no organization selected");yield K.E.setSubOrgId(e),yield this.refreshAndGetSubOrgId(),this.$router.go(0)}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}))},refreshUserInfo(){this.profileDialog=!1;const t=(0,X.Ky)("id");this.isUserAdmin=(0,X.Ky)("is_organisation_admin"),t?this.updateUserName():this.logout()},refreshSettings(t=!1){return R(this,void 0,void 0,(function*(){if(yield this.startSettingsFetch(),this.refresh_warning=!1,!t)return;this.clearStorageForRefresh(),yield T.tH.fetch(),yield this.refreshUserOrganizations();const e=(0,E.q3)();e.resetDocStore(this.$route.fullPath),this.$router.go(0)}))},refreshClicked(){const t=this.$route.path,e=["/dashboard","/setting"];e.includes(t)?this.refreshSettings(!0):this.refresh_warning=!0},hasSubOrganizations(){return!!(this.organizations[0]&&this.organizations[0].hasOwnProperty("sub_organisations")&&this.organizations[0].sub_organisations.length>0)}},setup(){const t=(0,E.kH)(),{updateUserName:e,getUserOrganizations:s,getSubOrgId:i,refreshAndGetSubOrgId:a,refreshUserOrganizations:n}=t,{userFullName:r,organizations:l,sub_org_id:d,main_orgainzation:c}=(0,o.bP)(t),h=(0,E.Bu)(),{setOrgSettings:g,handleStorageEvent:p,getOrgSettings:_,startSettingsFetch:b}=h,m=(0,E.QJ)(),{getLanguageIfEmpty:k}=m,f=(0,E.Sq)(),{getDatePatternOptions:v}=f,{date_pattern_loaded:y}=(0,o.bP)(f);return{startSettingsFetch:b,refreshUserOrganizations:n,refreshAndGetSubOrgId:a,getOrgSettings:_,handleStorageEvent:p,date_pattern_loaded:y,getDatePatternOptions:v,getLanguageIfEmpty:k,getUserOrganizations:s,setOrgSettings:g,updateUserName:e,getSubOrgId:i,settings_store:h,main_orgainzation:c,sub_org_id:d,userFullName:r,organizations:l,refresh_warning:(0,u.KR)(!1),profileDialog:(0,u.KR)(!1),isUserAdmin:(0,u.KR)(""),link:(0,u.KR)("inbox"),loading:(0,u.KR)(!1),isSupplierUser:X.cq}}});var N=s(12807),B=s(53999),H=s(90124),G=s(25173),V=s(3952),J=s(50492),j=s(84436),Y=s(10386),Z=s(97410),tt=s(82156),et=s(23316),st=s(44189),it=s(62669),at=s(56384),nt=s(65265),rt=s(88672),ot=s(98582),lt=s.n(ot);const dt=(0,N.A)(U,[["render",D],["__scopeId","data-v-66f4ec8b"]]),ut=dt;lt()(U,"components",{QList:B.A,QItem:H.A,QItemSection:G.A,QAvatar:V.A,QIcon:J.A,QMenu:j.A,QSeparator:Y.A,QTooltip:Z.A,QDialog:tt.A,QCard:et.A,QCardSection:st.A,QCardActions:it.A,QBtn:at.A}),lt()(U,"directives",{Ripple:nt.A,ClosePopup:rt.A});var ct=s(11470);const ht={id:"clip-path"},gt={id:"clip-path-2"},pt={id:"Gruppe_838","data-name":"Gruppe 838",transform:"translate(0.025 0.041)"},_t={id:"Gruppe_837","data-name":"Gruppe 837",transform:"translate(0 0)","clip-path":"url(#clip-path)"},bt={id:"Gruppe_840","data-name":"Gruppe 840"},mt={id:"Gruppe_839","data-name":"Gruppe 839","clip-path":"url(#clip-path-2)"};function kt(t,e,s,a,n,r){return(0,i.uX)(),(0,i.CE)("svg",{id:"Gruppe_841","data-name":"Gruppe 841",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"20",height:"23",viewBox:"0 0 24 31.491",class:(0,p.C4)(t.isActive?"color-primary":t.$q.dark.isActive?"color-dark-grey":"color-light-grey")},[(0,i.Lk)("defs",null,[(0,i.Lk)("clipPath",ht,[(0,i.Lk)("rect",{id:"Rechteck_493","data-name":"Rechteck 493",width:"23.972",height:"31.435",class:(0,p.C4)(t.isActive?"color-primary":t.$q.dark.isActive?"color-dark-grey":"color-light-grey")},null,2)]),(0,i.Lk)("clipPath",gt,[(0,i.Lk)("rect",{id:"Rechteck_494","data-name":"Rechteck 494",width:"24",height:"31.491",class:(0,p.C4)(t.isActive?"color-primary":t.$q.dark.isActive?"color-dark-grey":"color-light-grey")},null,2)])]),(0,i.Lk)("g",pt,[(0,i.Lk)("g",_t,[(0,i.Lk)("path",{id:"Pfad_710","data-name":"Pfad 710",d:"M126.644,3.134c.246.2.509.371.737.586q2.888,2.713,5.753,5.441c.276.263.505.574.756.863l-.05.081h-6.773c-.443,0-.511-.069-.511-.518V3.18l.084-.048",transform:"translate(-110.332 -2.736)",class:(0,p.C4)(t.isActive?"color-primary":t.$q.dark.isActive?"color-dark-grey":"color-light-grey")},null,2)])]),(0,i.Lk)("g",bt,[(0,i.Lk)("g",mt,[(0,i.Lk)("path",{id:"Pfad_711","data-name":"Pfad 711",d:"M24,27.285V9.228H16.71A2.16,2.16,0,0,1,14.4,6.922V.005H3.6A3.389,3.389,0,0,0,.011,3.583C.01,11.7.023,19.814,0,27.929a3.437,3.437,0,0,0,2.884,3.515c.027,0,.052.029.078.044H21.045l0,0c.175-.047.353-.09.527-.14a3.4,3.4,0,0,0,2.419-3.113C24,27.92,24,27.6,24,27.285M8.485,9.15C8.14,9.076,7.778,9.077,7.436,9a2.97,2.97,0,0,1-.388-5.654.508.508,0,0,0,.4-.577c-.017-.516.253-.8.678-.791s.674.285.667.81a.488.488,0,0,0,.379.547,2.873,2.873,0,0,1,1.919,2.578.707.707,0,0,1-.577.853.667.667,0,0,1-.767-.709,1.626,1.626,0,1,0-3.2.467,1.613,1.613,0,0,0,1.485,1.2,2.993,2.993,0,0,1,2.961,2.238,5.808,5.808,0,0,1,.109.634,3,3,0,0,1-1.9,2.895c-.3.111-.421.233-.411.563.015.5-.268.812-.67.815s-.692-.3-.673-.8c.012-.328-.109-.45-.4-.57a2.875,2.875,0,0,1-1.9-2.594c-.041-.5.2-.824.618-.856.388-.03.663.239.734.718A1.623,1.623,0,1,0,8.485,9.15m1.962,14a.926.926,0,0,1-1.013.831H5.129a.924.924,0,1,1,0-1.843H9.434a.926.926,0,0,1,1.013,1.013m8.981-4.641a.937.937,0,0,1-.941.559h-6.7l0,0q-3.334.007-6.668,0a.917.917,0,0,1-.886-1.327.908.908,0,0,1,.873-.517H18.5a.921.921,0,0,1,.923,1.286",transform:"translate(0 0.001)",class:(0,p.C4)(t.isActive?"color-primary":t.$q.dark.isActive?"color-dark-grey":"color-light-grey")},null,2)])])],2)}const ft=(0,i.pM)({name:"InvoiceIcon",props:{isActive:{type:Boolean,required:!0}}}),vt=(0,N.A)(ft,[["render",kt],["__scopeId","data-v-1f438770"]]),yt=vt;var wt=function(t,e,s,i){function a(t){return t instanceof s?t:new s((function(e){e(t)}))}return new(s||(s=Promise))((function(s,n){function r(t){try{l(i.next(t))}catch(e){n(e)}}function o(t){try{l(i["throw"](t))}catch(e){n(e)}}function l(t){t.done?s(t.value):a(t.value).then(r,o)}l((i=i.apply(t,e||[])).next())}))};const At=(0,i.pM)({name:"MainLayout",props:{is_supplier:{type:Boolean,default:!1}},components:{UserDropDown:ut,InvoiceIcon:yt},watch:{user_settings:{deep:!0,handler:function(t,e){this.handleSettingDependantMenu(),this.handleAsnDashbaordMenu(),this.handleTaskAndNotification()}}},mounted:function(){this.init(),this.startSettingsFetch().then((()=>{this.setOrgColor(),this.prepareMenuItems()})),this.getUserDetailByKey(),this.handleTasks(),document.addEventListener("keydown",this.keyDownEvent),document.addEventListener("refresh_view",this.getTaskCountListener),this.drawer=!this.isMobile()},unmounted(){document.removeEventListener("keydown",this.keyDownEvent),document.removeEventListener("refresh_view",this.getTaskCountListener)},methods:{init(){return wt(this,void 0,void 0,(function*(){(yield this.isModuleOn())&&(yield this.getNotifications())}))},isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isActive(t){return t==this.$route.fullPath},getUserDetailByKey(){let t=(0,X.Ky)("organisations"),e=t[0];e&&("pending_ap_approval"===e.status?this.supplier_approval_status="pending_approval":this.supplier_approval_status=e.status)},prepareMenuItems(){this.menuList=[{label:"pages.screen2a.dashboard",name:"document_dashboard",icon:"description",separator:!1,to:"/dashboard"}],this.bottomItems=[{label:"layout.support",name:"support",icon:"support_agent",separator:!1,to:"/support"},{label:"user",name:"user",icon:"person",separator:!1,to:""}];const t=(0,X.Ky)("organisations")[0];(0,X.cq)()?"approved"===t.status&&this.bottomItems.splice(0,0,{label:"layout.settings",name:"settings",icon:"settings",separator:!0,to:"/setting"}):this.bottomItems.splice(0,0,{label:"layout.settings",name:"settings",icon:"settings",separator:!0,to:"/setting"}),this.handleSettingDependantMenu(),this.handleAsnDashbaordMenu(),this.handleTaskAndNotification(),this.is_supplier||this.menuAccessibleCheck()},handleAsnDashbaordMenu(){this.user_settings[this.asn_dashboard_setting]||(this.user_settings[this.asn_dashboard_setting]=!1);const t=this.user_settings[this.asn_dashboard_setting],e=this.menuList.findIndex((t=>"asn_dashboard"===t.name));-1===e&&t?(0,X.cq)()||this.menuList.splice(1,0,{label:"advance_shipment_dashboard",name:"asn_dashboard",icon:"receipt_long",separator:!1,to:"/asn_shipment/dashboard"}):t||-1===e||this.menuList.splice(e,1)},handleTaskAndNotification(){this.user_settings[this.tasks_notification_setting]||(this.user_settings[this.tasks_notification_setting]=!1);const t=this.user_settings[this.tasks_notification_setting],e=this.menuList.findIndex((t=>"tasks"===t.name));-1===e&&t?(0,X.cq)()||this.menuList.splice(1,0,{label:"tasks",name:"tasks",icon:"task_alt",separator:!1,to:"/tasks"}):t||-1===e||this.menuList.splice(e,1)},handleSettingDependantMenu(){(0,X.sE)();this.user_settings[this.supplier_dashboard_setting]||(this.user_settings[this.supplier_dashboard_setting]=!1);let t=this.menuList.findIndex((t=>"supplier_dashboard"===t.name));const e=this.user_settings[this.supplier_dashboard_setting];e&&-1===t?(0,X.cq)()||this.menuList.splice(1,0,{label:"supplier_management",name:"supplier_dashboard",icon:"people",separator:!1,to:"/supplier/dashboard"}):e||-1===t||this.menuList.splice(t,1),this.user_settings[this.workflow_builder_setting]?(0,X.cq)()&&(this.user_settings[this.workflow_builder_setting]=!1):this.user_settings[this.workflow_builder_setting]=!1,this.user_settings[this.po_dashboard]||(this.user_settings[this.po_dashboard]=!1);const s=this.user_settings[this.po_dashboard];t=this.menuList.findIndex((t=>"purchase_order"===t.label)),-1===t&&s?(0,X.cq)()||(0,X.s5)()?"approved"==this.supplier_approval_status&&this.menuList.push({label:"purchase_order",name:"purchase_orders_and_invoices",icon:"shopping_cart",separator:!1,to:"/purchase-order"}):this.menuList.push({label:"purchase_order",name:"purchase_orders_and_invoices",icon:"shopping_cart",separator:!1,to:"/purchase-order"}):-1===t||s||this.menuList.splice(t,1),t=this.menuList.findIndex((t=>"workflow"===t.name));const i=this.user_settings[this.workflow_builder_setting];i&&-1===t?this.menuList.splice(1,0,{label:"workflow",name:"workflow",icon:"account_tree",separator:!1,to:"/workflows"}):i||-1===t||this.menuList.splice(t,1),this.user_settings[this.report_setting]||(this.user_settings[this.report_setting]=!1),t=this.menuList.findIndex((t=>"report"===t.name));const a=this.user_settings[this.report_setting];a&&-1===t?this.menuList.splice(1,0,{label:"layout.report",name:"report",icon:"query_stats",separator:!1,to:"/report"}):a||-1===t||this.menuList.splice(t,1),this.user_settings[this.invoice_dashboard_setting]||(this.user_settings[this.invoice_dashboard_setting]=!1);const n=this.user_settings[this.invoice_dashboard_setting],r=this.menuList.findIndex((t=>"invoice_dashboard"===t.name));-1===r&&n?(0,X.cq)()||(0,X.s5)()?"approved"==this.supplier_approval_status&&this.menuList.push({label:"invoice_dashboard",name:"invoice_dashboard",icon:"img:images/invoice.svg",separator:!1,to:"/invoice/dashboard"}):this.menuList.push({label:"invoice_dashboard",name:"invoice_dashboard",icon:"img:images/invoice.svg",separator:!1,to:"/invoice/dashboard"}):n||-1===r||this.menuList.splice(r,1),this.user_settings[g.aH.shipment_order_dashboard]||(this.user_settings[g.aH.shipment_order_dashboard]=!1);const o=this.user_settings[g.aH.shipment_order_dashboard];t=this.menuList.findIndex((t=>"shipment_order"===t.label)),-1===t&&o?(0,X.cq)()||this.menuList.push({label:"shipment_order",name:"shipment_order",icon:"add_shopping_cart",separator:!1,to:"/shipment-order"}):-1===t||o||this.menuList.splice(t,1)},isDashboardRoute(){return"/dashboard"==this.$route.fullPath||"/supplier/dashboard"==this.$route.fullPath},keyDownEvent(t){"d"===t.key&&t.ctrlKey&&(this.miniState=!this.miniState)},navigateTo(t){t&&("/tasks"===t&&this.handleTasksFilters(),this.$router.push(t))},menuAccessibleCheck(){if((0,X.cq)()){const t=["workflow","report","supplier_dashboard","asn_dashboard"],e=(0,X.Ky)("organisations")[0];"approved"!==e.status&&t.push("purchase_orders_and_invoices");const s=this.menuList.filter((e=>-1==t.indexOf(e.name)));this.menuList=s}},handleTasks(){document.addEventListener("refreshTasks",this.getTaskCountListener),this.getTaskCount(),setInterval((()=>{this.getTaskCount()}),5e4)},getTaskCount(){return wt(this,void 0,void 0,(function*(){try{const{CACHE_TN:t}=this.user_settings,e={cache:!1,ttl:0};if(t){let s=JSON.parse(t);e["cache"]=s.enabled,e["ttl"]=s.ttl}const s=yield ct.Hg.getTotalTaskCount(e);s&&s.hasOwnProperty("success")&&s.success&&(this.task_count=s.data)}catch(t){}}))},getTaskCountListener(){this.getTaskCount()},handleTasksFilters(){const t=(0,E.OP)();t.getSavedListSettings(),t.deleteItemInFiltersMap("keyword"),t.deleteItemInFiltersMap("status");const e=new CustomEvent("refresh_view",{});document.dispatchEvent(e)},logout(){M.A.methods.logout()}},data(){return{showIcons:!1,supportURL:c.cK,dark_mode_setting:g.up,menuList:(0,u.KR)([]),bottomItems:(0,u.KR)([]),supplier_dashboard_setting:g.t2,asn_dashboard_setting:g.fJ,tasks_notification_setting:g.so,workflow_builder_setting:g.$w,report_setting:g.EF,po_dashboard:g.aH.po_dashboard,invoice_dashboard_setting:g.wp}},setup(){const t=(0,E.Bu)(),{user_settings:e,drawer:s}=(0,o.bP)(t),{startSettingsFetch:i,setOrgColor:a}=t,n=(0,E.iU)(),{total_unread_notifications:r}=(0,o.bP)(n),{getNotifications:l}=(0,E.iU)(),d=(0,E.OP)(),{total_records:c,is_module_on:h}=(0,o.bP)(d),{getTasks:g,isModuleOn:p}=d,_=(0,u.KR)("");return{total_unread_notifications:r,supplier_approval_status:_,startSettingsFetch:i,getNotifications:l,isModuleOn:p,user_settings:e,drawer:s,is_module_on:h,setOrgColor:a,getTasks:g,total_records:c,miniState:(0,u.KR)(!0),task_count:(0,u.KR)(0),app_version:(0,u.KR)("0.0.0")}}});var Lt=s(76056),Ft=s(23954);const Ct=(0,N.A)(At,[["render",q],["__scopeId","data-v-f62aed7e"]]),St=Ct;lt()(At,"components",{QDrawer:Lt.A,QAvatar:V.A,QList:B.A,QItem:H.A,QItemSection:G.A,QBadge:Ft.A,QIcon:J.A,QTooltip:Z.A,QSeparator:Y.A,QMenu:j.A,QBtn:at.A}),lt()(At,"directives",{Ripple:nt.A});var It=s(34594),qt=function(t,e,s,i){function a(t){return t instanceof s?t:new s((function(e){e(t)}))}return new(s||(s=Promise))((function(s,n){function r(t){try{l(i.next(t))}catch(e){n(e)}}function o(t){try{l(i["throw"](t))}catch(e){n(e)}}function l(t){t.done?s(t.value):a(t.value).then(r,o)}l((i=i.apply(t,e||[])).next())}))};const Et=(0,i.pM)({name:"MainLayout",watch:{loading_settings:{handler:function(t,e){!1===t&&this.setDarkMode()}}},unmounted(){document.removeEventListener("keydown",this.sendBack)},mounted:function(){document.addEventListener("keydown",this.sendBack),this.fillDocTypeAndSubTypesListIfEmpty(),this.initFontSize(),this.init()},methods:{isDashboardRoute(){return"/dashboard"==this.$route.fullPath||"/supplier/dashboard"==this.$route.fullPath},navigateTo(t){t&&this.$router.push(t)},init(){this.setDarkMode(),l.A.has("selected_language")&&(this.locale=l.A.getItem("selected_language"))},sendBack(t){"Escape"!==t.key||document.querySelector(".q-dialog")||"/dashboard"!=this.$route.path&&this.$router.go(-1)},setDarkMode(){return qt(this,void 0,void 0,(function*(){if(this.loading_settings)return;const t=yield this.getUserSettingWithExpiry(this.dark_mode_setting,!1);"true"!=t&&1!=t||this.$q.dark.set(!0),n.A.set(Boolean(t))}))},goHome(){this.$router.push("/dashboard")},supportIntegration(){this.$router.push("/support")},gotoSettings(){this.$router.push("/settings")},gotoReport(){this.$router.push("/report")},gotoCloud(){this.$router.push("/dashboard")},gotoWorkflow(){this.$router.push("/workflows")}},data(){return{showIcons:!1,supportURL:c.cK,dark_mode_setting:g.up}},components:{SideMenu:St,newUpdateError:It.A},mixins:[h.A,d.A],setup(){let{locale:t}=(0,r.s9)({useScope:"global"});const e=(0,E.cY)(),{fillDocTypeAndSubTypesListIfEmpty:s}=e,i=(0,E.Bu)(),{user_settings:a,loading_settings:n}=(0,o.bP)(i),{getUserSettingWithExpiry:l,setOrgColor:d}=i,c=(0,E.Ml)(),{initFontSize:h}=c;return{loading_settings:n,getUserSettingWithExpiry:l,fillDocTypeAndSubTypesListIfEmpty:s,setOrgColor:d,initFontSize:h,user_settings:a,settings_store:i,report:(0,u.KR)(!0),app_version:(0,u.KR)("0.0.0"),locale:(0,u.KR)(t),drawer:(0,u.KR)(!0),miniState:(0,u.KR)(!1),mode:(0,u.KR)("dashboard")}}});var xt=s(62008),Qt=s(8416),$t=s(36914),Ot=s(45205);const Dt=(0,N.A)(Et,[["render",a],["__scopeId","data-v-7a238df0"]]),Mt=Dt;lt()(Et,"components",{QLayout:xt.A,QHeader:Qt.A,QToolbar:$t.A,QIcon:J.A,QPageContainer:Ot.A,QDialog:tt.A,QBtn:at.A})}}]);