"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[6811],{46811:(e,l,t)=>{t.r(l),t.d(l,{default:()=>nt});var o=t(61758),i=t(58790);const a=e=>((0,o.Qi)("data-v-e8ae3154"),e=e(),(0,o.jt)(),e),s={class:"row q-pl-md q-pr-md highlighted-back"},d={class:"col-4 secondary-c-text text-h6"},r={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},n={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},m={class:"col-8 q-pa-xs"},c={class:"float-right"},u=["innerHTML"],p=a((()=>(0,o.Lk)("img",{width:"20",src:"images/globe.svg",class:"black_to_white"},null,-1))),f={class:"row q-pl-md q-pr-md q-pb-md"},g={class:"col-xs-12 col-sm-2 col-md-2 col-lg-2 q-pt-sm full-height"},h={class:"full-width scroll-area-height scrolle-y"},_={class:"full-width",style:{position:"relative"}},b={class:"col-xs-12 col-sm-10 col-md-10 col-lg-10 padding-8-0-8-8"},v={class:"full-width"},y={class:"full-width"},F={class:"p-t-b-6 highlighted-back image_control_panel"},k={class:"row"},L={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},T={class:"row form-builder-image-container",id:"image_scrolle"},C={class:"image_container overflow-scroll",id:"image_container"},M=["width"],B=a((()=>(0,o.Lk)("div",{class:"max-width-80 q-pl-sm q-pr-sm"},[(0,o.Lk)("div",{class:"justify-center form-builder-image-container"},[(0,o.Lk)("img",{src:"images/Banana_invoice.svg",width:"50",class:"active cursor-pointer q-ma-sm shadow-2 solid-border-1px bg-white",draggable:"false"})])],-1))),N={class:"row"},w={class:"col-sm-12 col-md-12 col-lg-12"},A={class:"row"},V={class:"col-sm-12 col-md-12 col-lg-12"},E={class:"col-sm-12 col-md-12 col-lg-12"},x=a((()=>(0,o.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},null,-1))),q={class:"col-sm-12 col-md-12 col-lg-12"};function I(e,l,t,a,I,O){const S=(0,o.g2)("q-icon"),D=(0,o.g2)("q-btn"),P=(0,o.g2)("helpLayoutbuilder"),$=(0,o.g2)("f-btn"),R=(0,o.g2)("q-item-label"),U=(0,o.g2)("q-tooltip"),Q=(0,o.g2)("q-item-section"),W=(0,o.g2)("q-item"),X=(0,o.g2)("q-select"),J=(0,o.g2)("q-tab"),K=(0,o.g2)("q-tabs"),H=(0,o.g2)("q-separator"),z=(0,o.g2)("DefaultElements"),j=(0,o.g2)("q-expansion-item"),Z=(0,o.g2)("Elements"),G=(0,o.g2)("q-tab-panel"),Y=(0,o.g2)("Properties"),ee=(0,o.g2)("q-tab-panels"),le=(0,o.g2)("FieldsDesigner"),te=(0,o.g2)("q-splitter"),oe=(0,o.g2)("q-toolbar-title"),ie=(0,o.g2)("q-toolbar"),ae=(0,o.g2)("q-input"),se=(0,o.g2)("q-form"),de=(0,o.g2)("q-card-section"),re=(0,o.g2)("q-card"),ne=(0,o.g2)("q-dialog"),me=(0,o.g2)("Loader"),ce=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",s,[(0,o.Lk)("div",d,[e.docType&&!e.subDocType?((0,o.uX)(),(0,o.Wv)(D,{key:0,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/settings/doc_type_settings/"+e.docType},{default:(0,o.k6)((()=>[(0,o.bF)(S,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,o.Lk)("label",r,(0,i.v_)(e.$t("pages.settings.document_types")),1)])),_:1},8,["to"])):(0,o.Q3)("",!0),e.docType&&e.subDocType?((0,o.uX)(),(0,o.Wv)(D,{key:1,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/settings/sub_doc_type/"+e.docType},{default:(0,o.k6)((()=>[(0,o.bF)(S,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,o.Lk)("label",n,(0,i.v_)(e.$t("sub_doc_type")),1)])),_:1},8,["to"])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",m,[(0,o.Lk)("div",c,[(0,o.bF)(P)]),(0,o.bF)($,{label:e.$t("copy_json"),class:"float-right",icon:"content_copy",onClick:l[0]||(l[0]=l=>e.copyTemplate())},null,8,["label"]),(0,o.bF)($,{label:e.$t("edit_json"),class:"float-right q-mr-md",icon:"visibility",onClick:l[1]||(l[1]=l=>e.openJsonForm())},null,8,["label"]),(0,o.bF)($,{label:e.$t("use_default_template"),class:"float-right q-mr-md",onClick:l[2]||(l[2]=l=>e.restoreDefaults())},null,8,["label"]),(0,o.bF)(X,{outlined:"",dense:"",class:"language-select float-right q-mr-md width-200",modelValue:e.language_origin,"onUpdate:modelValue":[l[3]||(l[3]=l=>e.language_origin=l),l[4]||(l[4]=l=>e.createTemplateAccordingToOrigin())],options:e.language_origin_list,"emit-value":"","map-options":""},{option:(0,o.k6)((e=>[(0,o.bF)(W,(0,i._B)((0,o.Ng)(e.itemProps)),{default:(0,o.k6)((()=>[(0,o.bF)(Q,null,{default:(0,o.k6)((()=>[(0,o.bF)(R,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.opt.label),1)])),_:2},1024),e.opt.description?((0,o.uX)(),(0,o.Wv)(U,{key:0},{default:(0,o.k6)((()=>[(0,o.Lk)("span",{innerHTML:e.opt.description},null,8,u)])),_:2},1024)):(0,o.Q3)("",!0)])),_:2},1024)])),_:2},1040)])),prepend:(0,o.k6)((()=>[(0,o.bF)(S,{flat:"",dense:"",color:"primary"},{default:(0,o.k6)((()=>[p])),_:1})])),_:1},8,["modelValue","options"])])]),(0,o.Lk)("div",f,[(0,o.Lk)("div",g,[(0,o.Lk)("div",h,[(0,o.Lk)("div",_,[(0,o.bF)(K,{modelValue:e.activeTab,"onUpdate:modelValue":l[5]||(l[5]=l=>e.activeTab=l),dense:"","active-class":"highlighted-back","indicator-color":"primary","active-color":"primary",align:"justify"},{default:(0,o.k6)((()=>[(0,o.bF)(J,{name:"form_elements",label:e.$t("form_builder.elements")},null,8,["label"]),(0,o.bF)(J,{name:"element_properties",label:e.$t("form_builder.properties")},null,8,["label"])])),_:1},8,["modelValue"]),(0,o.bF)(H),(0,o.bF)(ee,{modelValue:e.activeTab,"onUpdate:modelValue":l[6]||(l[6]=l=>e.activeTab=l),animated:""},{default:(0,o.k6)((()=>[(0,o.bF)(G,{name:"form_elements"},{default:(0,o.k6)((()=>[(0,o.bF)(j,{"expand-separator":"","default-opened":"",label:e.$t("fields"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px q-mt-sm",class:"q-mb-sm"},{default:(0,o.k6)((()=>[(0,o.bF)(z)])),_:1},8,["label"]),(0,o.bF)(j,{"expand-separator":"",label:e.$t("form_builder.form_elements"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px"},{default:(0,o.k6)((()=>[e.renderComponent?((0,o.uX)(),(0,o.Wv)(Z,{key:e.keyToUpdateComponnets})):(0,o.Q3)("",!0)])),_:1},8,["label"]),(0,o.bF)(H)])),_:1}),(0,o.bF)(G,{name:"element_properties"},{default:(0,o.k6)((()=>[e.renderComponent?((0,o.uX)(),(0,o.Wv)(Y,{key:e.keyToUpdateComponnets})):(0,o.Q3)("",!0)])),_:1})])),_:1},8,["modelValue"])])])]),(0,o.Lk)("div",b,[(0,o.bF)(te,{limits:[30,95],modelValue:e.formSplitterModel,"onUpdate:modelValue":l[7]||(l[7]=l=>e.formSplitterModel=l),class:"scroll-area-height"},{before:(0,o.k6)((()=>[(0,o.Lk)("div",v,[(0,o.bF)(le,{onSaveTemplate:e.saveTemplate},null,8,["onSaveTemplate"])])])),after:(0,o.k6)((()=>[(0,o.Lk)("div",y,[(0,o.Lk)("div",F,[(0,o.Lk)("div",k,[(0,o.Lk)("div",L,[(0,o.bF)(S,{name:"img:images/zoom_in.svg",size:"24px",class:"q-mr-sm cursor-pointer",onClick:e.zoomIn},{default:(0,o.k6)((()=>[(0,o.bF)(U,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("zoom_in")),1)])),_:1})])),_:1},8,["onClick"]),(0,o.bF)(S,{name:"img:images/zoom_out.svg",size:"24px",class:"q-mr-sm cursor-pointer",onClick:e.zoomOut},{default:(0,o.k6)((()=>[(0,o.bF)(U,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("zoom_out")),1)])),_:1})])),_:1},8,["onClick"])])])]),(0,o.Lk)("div",T,[(0,o.Lk)("div",C,[(0,o.Lk)("img",{src:"images/Banana_invoice.svg",width:e.imageWidth,draggable:"false",class:"bg-white"},null,8,M)]),B])])])),_:1},8,["modelValue"])])]),(0,o.bF)(ne,{modelValue:e.showJsonForm,"onUpdate:modelValue":l[11]||(l[11]=l=>e.showJsonForm=l)},{default:(0,o.k6)((()=>[(0,o.bF)(re,null,{default:(0,o.k6)((()=>[(0,o.bF)(ie,{class:"secondary-toolbar"},{default:(0,o.k6)((()=>[(0,o.bF)(oe,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("edit_json")),1)])),_:1}),(0,o.bo)((0,o.bF)(D,{flat:"",round:"",dense:"",icon:"close"},null,512),[[ce]])])),_:1}),(0,o.bF)(de,{class:"width-500"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",N,[(0,o.Lk)("div",w,[(0,o.Lk)("div",A,[(0,o.bF)(se,{class:"full-width"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",V,(0,i.v_)(e.$t("pages.fields_settings.formula")),1),(0,o.Lk)("div",E,[(0,o.bF)(ae,{outlined:"",modelValue:this.strFormLayout,"onUpdate:modelValue":l[8]||(l[8]=e=>this.strFormLayout=e),type:"textarea"},null,8,["modelValue"])]),x,(0,o.Lk)("div",q,[(0,o.bo)((0,o.bF)(D,{label:e.$t("pages.user.save"),onClick:l[9]||(l[9]=l=>e.savePastedJson()),color:"primary",icon:"done"},null,8,["label"]),[[ce]]),(0,o.bF)(D,{outline:"",color:"primary",label:"Copy Json",class:"float-right",icon:"content_copy",onClick:l[10]||(l[10]=l=>e.copyTemplate())})])])),_:1})])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(me)],64)}var O=t(92162),S=t(1659),D=t(24622),P=t(38734),$=t(46162),R=t(96056),U=t(8420),Q=t(64233);const W={class:"p-t-b-6 image_control_panel highlighted-back"},X={class:"row"},J={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},K={id:"field_scrolle"},H={class:"section-block dashed-border q-mb-md q-pa-sm display-inline-block full-width"},z={key:0,class:"row meta"},j=["onClick"],Z={key:1,class:"full-width q-pa-xs height-24"};function G(e,l,t,a,s,d){const r=(0,o.g2)("q-tooltip"),n=(0,o.g2)("q-icon"),m=(0,o.g2)("q-btn"),c=(0,o.g2)("draggable");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",W,[(0,o.Lk)("div",X,[(0,o.Lk)("div",J,[(0,o.bF)(n,{name:"img:images/save.svg",size:"24px",class:"float-right q-mr-sm cursor-pointer",onClick:l[0]||(l[0]=l=>e.$emit("saveTemplate",!0))},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("save")),1)])),_:1})])),_:1})])])]),(0,o.Lk)("div",K,[(0,o.Lk)("div",H,[e.isDefaultFieldLoaded?((0,o.uX)(),(0,o.CE)("div",z,[(0,o.bF)(c,{modelValue:e.formLayout,"onUpdate:modelValue":l[1]||(l[1]=l=>e.formLayout=l),class:"dragArea","item-key":"name",group:{name:"formbuilder",pull:!1,put:!0},sort:!0,"ghost-class":"sortable__ghost",onChange:e.itemAdded},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.formLayout,((l,t)=>((0,o.uX)(),(0,o.CE)("div",(0,o.v6)({key:t,ref_for:!0},l,{onClick:t=>e.inputClicked(l.name),class:["element_parent q-pa-sm cursor-move",(l.name==e.activeFieldName?"is--active  dashed-border":" ")+" display-block "+(l.tr_ocr_model_id?" text-primary ":" ")],style:"width:"+e.getElementWidth(l)+"%"}),[e.renderComponent?((0,o.uX)(),(0,o.Wv)((0,o.$y)(l.fieldType),{key:0,currentField:l,isReadOnly:!1,fieldName:l.name,groupIndex:t,onInputClicked:e.inputClicked,onInputValueChanges:e.inputValueChanges,onUpdateModel:e.updateModel,class:"form__field"},null,40,["currentField","fieldName","groupIndex","onInputClicked","onInputValueChanges","onUpdateModel"])):(0,o.Q3)("",!0),l.name===e.activeFieldName?((0,o.uX)(),(0,o.CE)("div",Z,[(0,o.bF)(m,{round:"",color:"primary",icon:"delete",size:"xs",class:"float-right delete-ele",onClick:l=>e.removeField(l,t)},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])):(0,o.Q3)("",!0)],16,j)))),128))])),_:1},8,["modelValue","onChange"])])):(0,o.Q3)("",!0)])])],64)}var Y=t(18505),ee=t(94124),le=t(39231),te=t(1133),oe=t(41162),ie=t(41902),ae=t(87709),se=t(8325),de=t(31986),re=t(41812);const ne=(0,o.pM)({el:"fields_designer",mixins:[Y.A,D.A],emits:["showConnectionFromField","saveTemplate","markTableColumns"],props:{},data(){return{}},components:{Label:te.A,Button:oe.A,TextInput:ie.A,SecondApprover:ae.A,DocumentApprover:se.A,HorizontalSeparator:de.A,ExtractedTableTabPanels:re.A,draggable:le.H},mounted:function(){document.addEventListener("add_field_to_designer",this.addFieldToDesigner),document.addEventListener("element_click",this.triggerFieldFocus)},unmounted:function(){document.removeEventListener("add_field_to_designer",this.addFieldToDesigner),document.removeEventListener("element_click",this.triggerFieldFocus)},methods:{itemAdded(e){if(!e.added)return;let l=e.added.element;this.keyToUpdateComponnets++,this.formBuilderConfigModel[l.name]||this.updateModel(l)},calculateRowColSize(e){return e>1?100/e:100},removeField(e,l){if(e.stopPropagation(),this.formBuilderConfigModel[this.activeFieldName]&&this.formBuilderConfigModel[this.activeFieldName].isDefaultField)for(let t of this.defaultFields)if(t.name===this.activeFieldName){t.isAlreadyAdded=!1;break}this.formLayout.splice(l,1),delete this.formBuilderConfigModel[this.activeFieldName],delete this.formBuilderModel[this.activeFieldName],this.activeFieldName="",this.activeTab="form_elements"},triggerFieldFocus(e){this.inputClicked(e.detail)},inputClicked(e){this.activeTab="element_properties",this.activeFieldName=e,this.setTrOcrModeld(e)},setTrOcrModeld(e){this.formBuilderConfigModel[e].hasOwnProperty("tr_ocr_model_id")||(this.formBuilderConfigModel[e].tr_ocr_model_id="")},inputValueChanges(e,l){"checkbox"===l&&this.inputClicked(e),setTimeout((()=>{this.formBuilderModel[e].formatted_value=!1}),50)},updateModel(e,l=!1){if(this.formBuilderConfigModel[e.name]=JSON.parse(JSON.stringify(e)),e.hasOwnProperty("is_readonly")||(this.formBuilderConfigModel[e.name].is_readonly=!1),this.formBuilderModel[e.name]=[],this.formBuilderModel[e.name].page="",this.formBuilderModel[e.name].color="",this.formBuilderModel[e.name].score="",this.formBuilderModel[e.name].coords=[],this.formBuilderModel[e.name].confidence="",this.formBuilderModel[e.name].value="",this.formBuilderModel[e.name].formatted_value="",e.isDefaultField)for(let t of this.defaultFields)if(t.name===e.name){t.isAlreadyAdded=!0;break}l||(this.renderChildElements(e.name),this.activeFieldName=e.name)}},setup(){const e=(0,ee.uL)(),{docType:l,activeTab:t,formLayout:o,defaultFields:i,formBuilderModel:a,formBuilderConfigModel:s,activeFieldName:d,keyToUpdateComponnets:r,renderComponent:n,isDefaultFieldLoaded:m}=(0,S.bP)(e),{getElementWidth:c,renderChildElements:u}=e;return{renderChildElements:u,docType:l,activeTab:t,formLayout:o,defaultFields:i,activeFieldName:d,renderComponent:n,formBuilderModel:a,isDefaultFieldLoaded:m,keyToUpdateComponnets:r,formBuilderConfigModel:s,getElementWidth:c}}});var me=t(12807),ce=t(50492),ue=t(97410),pe=t(56384),fe=t(67156),ge=t(98582),he=t.n(ge);const _e=(0,me.A)(ne,[["render",G],["__scopeId","data-v-f1d32cbe"]]),be=_e;he()(ne,"components",{QIcon:ce.A,QTooltip:ue.A,QBtn:pe.A,QField:fe.A});var ve=t(14907),ye=t(78652);const Fe={key:0,class:"full-width"},ke={class:"row"},Le=["src"],Te={class:""};function Ce(e,l,t,a,s,d){const r=(0,o.g2)("draggable");return e.filteredFields.length>0?((0,o.uX)(),(0,o.CE)("div",Fe,[(0,o.bF)(r,{list:e.filteredFields,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.filteredFields,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l,class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm cursor-pointer mt-5 border-radius-5px"},[(0,o.Lk)("div",ke,[(0,o.Lk)("img",{src:e.icon,width:"14",class:"q-mr-sm"},null,8,Le),(0,o.Lk)("div",Te,(0,i.v_)(e.text),1)])])))),128))])),_:1},8,["list"])])):(0,o.Q3)("",!0)}var Me=t(85192),Be=t(76956),Ne=t(86366);const we={components:{},data(){return{fields:[{fieldType:Ne.VV.TEXT_INPUT,icon:"images/text_icon.svg",label:"Label",name:"input_"+(0,Me.A)(),text:"Text",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:33,isDisabled:!1,clearable:!1,hideLabel:!1,translation_key:"Label",is_textarea:!1,run_script_on_change:!1,run_workflow_on_change:!1,tr_ocr_model_id:"",tabIndex:0,classes:""},{fieldType:Ne.VV.LABEL,icon:"images/text_icon.svg",label:"Label",name:"input_"+(0,Me.A)(),text:"Label",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:30,isDisabled:!1,clearable:!1,hideLabel:!1,translation_key:"Label",classes:""},{fieldType:Ne.VV.HORIZONTAL_SEPARATOR,icon:"images/horizontal_line.svg",name:"input_"+(0,Me.A)(),text:"Horizontal Separator",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:100,isDisabled:!1,clearable:!1,hideLabel:!1,space_from_top:"q-mt-lg",space_from_bottom:"",translation_key:"",classes:""},{fieldType:Ne.VV.EXTRACTED_TABLE_TAB_PANELS,icon:"images/table.svg",name:"tab_panel_tables_"+(0,Me.A)(),label:"Label",text:"PO Tables",isDefaultField:!1,elementWidth:100,translation_key:"po_panel_tables"},{fieldType:Ne.VV.DOCUMENT_APPROVER,icon:"settings/user.svg",name:"first_approver",text:"Document Approver",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:100,isDisabled:!1,clearable:!1,hideLabel:!1,space_from_top:"q-mt-lg",space_from_bottom:"",translation_key:"approver",classes:""},{fieldType:Ne.VV.SECOND_APPROVER,icon:"settings/user.svg",name:"assigned_to",text:"Second Approver",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:100,isDisabled:!1,clearable:!1,hideLabel:!1,space_from_top:"q-mt-lg",space_from_bottom:"",translation_key:"releases_person",classes:""},{fieldType:Ne.VV.BUTTON,icon:"images/button.svg",name:"button_"+(0,Me.A)(),label:"Button",text:"Button",type:Be.aH.save,isDefaultField:!1,elementWidth:50,translation_key:"BUTTON",appearance:"",classes:""}],sortElementOptions:{group:{name:"formbuilder",pull:!1,put:!0},sort:!0},dropElementOptions:{group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,filter:".is-disabled"}}},methods:{}},Ae=(0,o.pM)({name:"Elements",components:{draggable:le.H},data(){return{fields:(0,P.KR)(we.data().fields),dropElementOptions:we.data().dropElementOptions}},mounted(){this.init()},methods:{init(){this.filteredFields=this.fields.filter((e=>0==e.hide_in_panel_list||void 0==e.hide_in_panel_list))},checkStopDragCondition(e){}},setup(){const e=(0,ee.uL)(),{documentTables:l,documentTableNames:t}=(0,S.bP)(e),{getDocumentTables:o}=e;return{documentTables:l,documentTableNames:t,getDocumentTables:o,filteredFields:(0,P.KR)([])}}}),Ve=(0,me.A)(Ae,[["render",Ce],["__scopeId","data-v-f38e50fa"]]),Ee=Ve;he()(Ae,"components",{QBtn:pe.A});var xe=t(11470),qe=t(64775);const Ie={class:"full-width"},Oe={class:"full-width"},Se={class:"row"},De={class:"width-20px"},Pe=["src"],$e={class:"width-100-10px"},Re={class:"full-width"},Ue={class:"full-width text-grey-6"};function Qe(e,l,t,a,s,d){const r=(0,o.g2)("q-input"),n=(0,o.g2)("draggable");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",Ie,[(0,o.bF)(r,{modelValue:e.searchInput,"onUpdate:modelValue":l[0]||(l[0]=l=>e.searchInput=l),class:"q-pt-md q-pb-md",dense:"",autofocus:"",label:e.$t("pages.user.search"),outlined:""},null,8,["modelValue","label"])]),(0,o.Lk)("div",Oe,[(0,o.bF)(n,{list:e.filteredFields,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.filteredFields,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l,class:"col-sm-12 col-md-12 col-lg-12 cursor-pointer q-pa-sm mt-5 border-radius-5px"},[(0,o.Lk)("div",Se,[(0,o.Lk)("div",De,[(0,o.Lk)("img",{src:e.icon,width:"14"},null,8,Pe)]),(0,o.Lk)("div",$e,[(0,o.Lk)("div",Re,(0,i.v_)(e.label),1),(0,o.Lk)("div",Ue,(0,i.v_)(" ("+e.field_name+")"),1)])])])))),128))])),_:1},8,["list"])])],64)}var We=t(25891),Xe=function(e,l,t,o){function i(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,a){function s(e){try{r(o.next(e))}catch(l){a(l)}}function d(e){try{r(o["throw"](e))}catch(l){a(l)}}function r(e){e.done?t(e.value):i(e.value).then(s,d)}r((o=o.apply(e,l||[])).next())}))};const Je=(0,o.pM)({name:"DefaultElements",mixins:[Y.A,D.A,We.A],components:{draggable:le.H},data(){return{searchInput:"",componentsForApproval:Ne.pj}},watch:{searchInput(e){for(let l of this.defaultFields)l.isSearched=""===e||null==e||l.label.toLowerCase().includes(e.toLowerCase())}},computed:{filteredFields(){return this.defaultFields.filter((e=>!e.isHidden&&e.isSearched&&!e.isAlreadyAdded))}},mounted(){this.init()},methods:{init(){return Xe(this,void 0,void 0,(function*(){this.hideLoading();try{yield this.loadDocumentDefaultFields(this.$route.params.doc_type),this.isDefaultFieldLoaded=!0}catch(e){return void this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}))}},setup(){const e=(0,ee.uL)(),{defaultFields:l,isDefaultFieldLoaded:t}=(0,S.bP)(e),{loadDocumentDefaultFields:o}=e;return{defaultFields:l,isDefaultFieldLoaded:t,loadDocumentDefaultFields:o}}});var Ke=t(67837);const He=(0,me.A)(Je,[["render",Qe],["__scopeId","data-v-f899d704"]]),ze=He;he()(Je,"components",{QInput:Ke.A,QBtn:pe.A});const je=e=>((0,o.Qi)("data-v-74c72f72"),e=e(),(0,o.jt)(),e),Ze={key:0,class:"row"},Ge={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Ye={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},el={key:1,class:"col-sm-12 col-md-12 col-lg-12"},ll={class:"row"},tl={class:"row"},ol={key:2,class:"col-sm-12 col-md-12 col-lg-12"},il={class:"row"},al={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},sl={class:"col-sm-12 col-md-12 col-lg-12"},dl={class:"col-sm-12 col-md-12 col-lg-12"},rl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},nl={class:"col-sm-12 col-md-12 col-lg-12"},ml={class:"col-sm-12 col-md-12 col-lg-12"},cl={key:3,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},ul={class:"col-sm-12 col-md-12 col-lg-12"},pl={class:"col-sm-12 col-md-12 col-lg-12"},fl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},gl={class:"col-sm-12 col-md-12 col-lg-12"},hl={class:"col-sm-12 col-md-12 col-lg-12"},_l={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},bl={class:"col-sm-12 col-md-12 col-lg-12"},vl={class:"col-sm-12 col-md-12 col-lg-12"},yl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Fl={class:"col-sm-12 col-md-12 col-lg-12"},kl={class:"col-sm-12 col-md-12 col-lg-12"},Ll={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Tl={class:"col-sm-12 col-md-12 col-lg-12"},Cl={class:"col-sm-12 col-md-12 col-lg-12"},Ml={key:5,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Bl=je((()=>(0,o.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Tab Index ",-1))),Nl={class:"col-sm-12 col-md-12 col-lg-12"},wl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Al={class:"col-sm-12 col-md-12 col-lg-12"},Vl={class:"col-sm-12 col-md-12 col-lg-12"},El={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},xl={class:"col-sm-12 col-md-12 col-lg-12"},ql={class:"col-sm-12 col-md-12 col-lg-12"};function Il(e,l,t,a,s,d){const r=(0,o.g2)("q-select"),n=(0,o.g2)("q-checkbox"),m=(0,o.g2)("q-input");return(0,o.uX)(),(0,o.CE)(o.FK,null,[e.activeFieldName?((0,o.uX)(),(0,o.CE)("div",Ze,[e.isButtonType()?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("div",Ge,[(0,o.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].type,"onUpdate:modelValue":l[0]||(l[0]=l=>e.formBuilderConfigModel[e.activeFieldName].type=l),options:e.buttonTypes,label:"Select Button Type",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])]),(0,o.Lk)("div",Ye,[(0,o.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].appearance,"onUpdate:modelValue":l[1]||(l[1]=l=>e.formBuilderConfigModel[e.activeFieldName].appearance=l),options:e.appearanceList,label:"Select Button Appearance",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])],64)):(0,o.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT?((0,o.uX)(),(0,o.CE)("div",el,[(0,o.Lk)("div",ll,[(0,o.bF)(n,{modelValue:e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft,"onUpdate:modelValue":l[2]||(l[2]=l=>e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft=l),label:e.$t("display_label_left")},null,8,["modelValue","label"])]),(0,o.Lk)("div",tl,[(0,o.bF)(n,{modelValue:e.formBuilderConfigModel[e.activeFieldName].is_textarea,"onUpdate:modelValue":l[3]||(l[3]=l=>e.formBuilderConfigModel[e.activeFieldName].is_textarea=l),label:e.$t("is_textarea")},null,8,["modelValue","label"])])])):(0,o.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT||e.formBuilderConfigModel[e.activeFieldName].fieldType===e.DOCUMENT_APPROVER||e.formBuilderConfigModel[e.activeFieldName].fieldType===e.SECOND_APPROVER?((0,o.uX)(),(0,o.CE)("div",ol,[(0,o.Lk)("div",il,[(0,o.bF)(n,{modelValue:e.formBuilderConfigModel[e.activeFieldName].is_readonly,"onUpdate:modelValue":l[4]||(l[4]=l=>e.formBuilderConfigModel[e.activeFieldName].is_readonly=l),label:e.$t("is_readonly")},null,8,["modelValue","label"])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",al,[(0,o.Lk)("div",sl,(0,i.v_)(e.$t("label")),1),(0,o.Lk)("div",dl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].label,"onUpdate:modelValue":l[5]||(l[5]=l=>e.formBuilderConfigModel[e.activeFieldName].label=l),disable:e.formBuilderConfigModel[e.activeFieldName].isDefaultField,onBlur:l[6]||(l[6]=l=>e.updateFieldName(e.activeFieldName))},null,8,["modelValue","disable"])])]),(0,o.Lk)("div",rl,[(0,o.Lk)("div",nl,(0,i.v_)(e.$t("field_name")),1),(0,o.Lk)("div",ml,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].name,"onUpdate:modelValue":l[7]||(l[7]=l=>e.formBuilderConfigModel[e.activeFieldName].name=l),disable:e.formBuilderConfigModel[e.activeFieldName].isDefaultField,onBlur:l[8]||(l[8]=l=>e.onFieldNameFocusLose(e.activeFieldName))},null,8,["modelValue","disable"])])]),e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft?((0,o.uX)(),(0,o.CE)("div",cl,[(0,o.Lk)("div",ul,(0,i.v_)(e.$t("label_width_percentage")),1),(0,o.Lk)("div",pl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].labelWidth,"onUpdate:modelValue":l[9]||(l[9]=l=>e.formBuilderConfigModel[e.activeFieldName].labelWidth=l),type:"number",rules:[l=>l>=3&&l<=100||e.$t("label_length_between_3_100")]},null,8,["modelValue","rules"])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",fl,[(0,o.Lk)("div",gl,(0,i.v_)(e.$t("element_width_percentage")),1),(0,o.Lk)("div",hl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].elementWidth,"onUpdate:modelValue":[l[10]||(l[10]=l=>e.formBuilderConfigModel[e.activeFieldName].elementWidth=l),l[11]||(l[11]=l=>{e.handleElementWidth(l)})],disable:e.formBuilderConfigModel[e.activeFieldName].fieldType===e.HORIZONTAL_SEPARATOR,type:"number",rules:[l=>l>=3&&l<=100||e.$t("field_length_between_3_100")]},null,8,["modelValue","disable","rules"])])]),(0,o.Lk)("div",_l,[(0,o.Lk)("div",bl,(0,i.v_)(e.$t("element_width_percentage")),1),(0,o.Lk)("div",vl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].classes,"onUpdate:modelValue":l[12]||(l[12]=l=>e.formBuilderConfigModel[e.activeFieldName].classes=l),label:"Enter style classes with space"},null,8,["modelValue"])])]),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.HORIZONTAL_SEPARATOR?((0,o.uX)(),(0,o.CE)(o.FK,{key:4},[(0,o.Lk)("div",yl,[(0,o.Lk)("div",Fl,(0,i.v_)(e.$t("space_from_top")),1),(0,o.Lk)("div",kl,[(0,o.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].space_from_top,"onUpdate:modelValue":l[13]||(l[13]=l=>e.formBuilderConfigModel[e.activeFieldName].space_from_top=l),options:e.spaceFromTopList,label:e.$t("space_from_top"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])]),(0,o.Lk)("div",Ll,[(0,o.Lk)("div",Tl,(0,i.v_)(e.$t("space_from_bottom")),1),(0,o.Lk)("div",Cl,[(0,o.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].space_from_bottom,"onUpdate:modelValue":l[14]||(l[14]=l=>e.formBuilderConfigModel[e.activeFieldName].space_from_bottom=l),options:e.spaceFromBottomList,label:e.$t("space_from_bottom"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])])],64)):(0,o.Q3)("",!0),e.renderTabIndexField()?((0,o.uX)(),(0,o.CE)("div",Ml,[Bl,(0,o.Lk)("div",Nl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tabIndex,"onUpdate:modelValue":l[15]||(l[15]=l=>e.formBuilderConfigModel[e.activeFieldName].tabIndex=l),type:"number"},null,8,["modelValue"])])])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("div",wl,[(0,o.Lk)("div",Al,(0,i.v_)(e.$t("field_length")),1),(0,o.Lk)("div",Vl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].length,"onUpdate:modelValue":l[16]||(l[16]=l=>e.formBuilderConfigModel[e.activeFieldName].length=l),type:"number"},null,8,["modelValue"])])]),(0,o.Lk)("div",El,[(0,o.Lk)("div",xl,(0,i.v_)(e.$t("banned_keywords")),1),(0,o.Lk)("div",ql,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].banned_keywords,"onUpdate:modelValue":l[17]||(l[17]=l=>e.formBuilderConfigModel[e.activeFieldName].banned_keywords=l),label:e.$t("comma_seperated_keywords")},null,8,["modelValue","label"])])])],64)):(0,o.Q3)("",!0)],64)}const Ol=(0,o.pM)({name:"Properties",mixins:[R.A,D.A],components:{},data(){return{rowIndex:(0,P.KR)(0),columnIndex:(0,P.KR)(0),isColumnMode:(0,P.KR)(!0),selectedInput:(0,P.KR)(""),BUTTON:Ne.VV.BUTTON,TEXT_INPUT:Ne.VV.TEXT_INPUT,HORIZONTAL_SEPARATOR:Ne.VV.HORIZONTAL_SEPARATOR,DOCUMENT_APPROVER:Ne.VV.DOCUMENT_APPROVER,SECOND_APPROVER:Ne.VV.SECOND_APPROVER}},watch:{activeFieldName(e,l){e!=l&&(this.rowIndex=0,this.columnIndex=0,this.isColumnMode=!1)}},mounted:function(){this.getModelList(),this.prepareButtonTypes(),document.addEventListener("load_settings",this.loadSettings),document.addEventListener("load_settings_for_series",this.loadSettingsForSeries)},unmounted:function(){document.removeEventListener("load_settings",this.loadSettings),document.removeEventListener("load_settings_for_series",this.loadSettingsForSeries)},methods:{addOption(){const e={label:"Option",value:"op"};this.formBuilderConfigModel[this.activeFieldName].options.push(e)},removeOption(e){this.formBuilderConfigModel[this.activeFieldName].options.splice(e,1)},setOptionValue(e){this.formBuilderConfigModel[this.activeFieldName].options[e].value=this.stringReplaceWithString(this.formBuilderConfigModel[this.activeFieldName].options[e].label," ","")},loadSettings(e){this.rowIndex=e.detail.rowIndex,this.columnIndex=e.detail.columnIndex,this.isColumnMode=e.detail.isColumnMode},loadSettingsForSeries(e){const l=e.detail;if(l)for(const[t,o]of Object.entries(this.formBuilderConfigModel[this.activeFieldName].columns)){const e=o;if(e.col_id===l){this.columnIndex=+t;break}}},onFieldNameFocusLose(e){const l=this.formBuilderConfigModel[e].name;if(l!==e)if(this.validateField(l)){for(const t of this.formLayout)if(t.name===e){t.name=l;for(const[l,o]of Object.entries(this.formBuilderConfigModel[e]))"name"!==l&&(t[l]=o);break}this.formBuilderConfigModel[l]={},this.formBuilderConfigModel[l]=JSON.parse(JSON.stringify(this.formBuilderConfigModel[e])),this.formBuilderModel[l]={},this.formBuilderModel[l]=JSON.parse(JSON.stringify(this.formBuilderModel[e])),this.activeFieldName=l,delete this.formBuilderModel[e],delete this.formBuilderConfigModel[e]}else this.formBuilderConfigModel[e].name=e},validateField(e){let l=!0;return""===e||null===e?(l=!1,this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY"))):this.hasWhiteSpace(e)?(l=!1,this.showErrorToast(this.$t("pages.messages.SPACES_NOT_ALLOWED"))):this.checkFirstLetterIsSpecialOrNumber(e)&&(l=!1,this.showErrorToast(this.$t("errors.special_letter_number_not_allowed"))),l},updateFieldName(e){const l=this.stringReplaceWithString(this.formBuilderConfigModel[e].label," ","_");l!==e&&(this.formBuilderConfigModel[e].name=l,this.onFieldNameFocusLose(e))},handleElementWidth(e){e>100?(this.formBuilderConfigModel[this.activeFieldName].elementWidth=100,this.showErrorToast(this.$t("field_length_between_3_100"))):e<3&&(this.formBuilderConfigModel[this.activeFieldName].elementWidth=3,this.showErrorToast(this.$t("field_length_between_3_100")))},renderModelDropdown(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.TEXT_INPUT},onUpdateTROCRModel(){var e;const l=(0,O.$)("#"+this.activeFieldName);l&&(null===(e=l.closest(".element_parent"))||void 0===e||e.classList.toggle("text-primary"))},onColumnUpdateTROCRModel(e,l){const t=(0,O.$)("#col_"+e);t&&(l?t.classList.add("text-primary"):t.classList.remove("text-primary"))},renderTabIndexField(){return this.TEXT_INPUT===this.formBuilderConfigModel[this.activeFieldName].fieldType},onListOfValueSelect(e){e||(this.formBuilderConfigModel[this.activeFieldName].enforce_list_of_values=!1)},isRunScriptEnabled(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.TEXT_INPUT},isButtonType(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.BUTTON},prepareButtonTypes(){this.buttonTypes=[{label:this.$t("save"),value:Be.aH.save},{label:this.$t("request_release"),value:Be.aH.request_release},{label:this.$t("reject"),value:Be.aH.reject},{label:this.$t("in_review"),value:Be.aH.in_review},{label:this.$t("restart_workflow"),value:Be.aH.restart_workflow}]}},setup(){const e=(0,ee.uL)(),{activeFieldName:l,formBuilderModel:t,formBuilderConfigModel:o,formLayout:i}=(0,S.bP)(e),a=(0,ee.cY)(),{getModelList:s}=a,{model_list:d}=(0,S.bP)(a);return{model_list:d,formLayout:i,activeFieldName:l,formBuilderModel:t,formBuilderConfigModel:o,buttonTypes:(0,P.KR)([]),appearanceList:[{label:"Filled Button",value:""},{label:"Outline",value:"secondary"},{label:"Danger",value:"negative-tertiary"}],shortCutKeyList:[{label:"Shift",value:"shift"},{label:"Alt",value:"alt"}],spaceFromTopList:[{label:"None",value:""},{label:"Extra Small",value:"q-mt-xs"},{label:"Small",value:"q-mt-sm"},{label:"Medium",value:"q-mt-md"},{label:"Large",value:"q-mt-lg"},{label:"Extra Large",value:"q-mt-xl"}],spaceFromBottomList:[{label:"None",value:""},{label:"Extra Small",value:"q-mb-xs"},{label:"Small",value:"q-mb-sm"},{label:"Medium",value:"q-mb-md"},{label:"Large",value:"q-mb-lg"},{label:"Extra Large",value:"q-mb-xl"}],getModelList:s}}});var Sl=t(94940),Dl=t(80460);const Pl=(0,me.A)(Ol,[["render",Il],["__scopeId","data-v-74c72f72"]]),$l=Pl;he()(Ol,"components",{QSelect:Sl.A,QCheckbox:Dl.A,QInput:Ke.A});var Rl=t(16779);const Ul={getDetailViewRoute(e){let l="";try{l="/manage_approval_layout_builder/"+e.doc_type_key,e.layout_type&&(l+="/"+e.layout_type),e.layout_template_id&&(l+="/"+e.layout_template_id),e.sub_doc_type_key&&(l+="?sub_doc_type="+e.sub_doc_type_key)}catch(t){}return l}};var Ql=function(e,l,t,o){function i(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,a){function s(e){try{r(o.next(e))}catch(l){a(l)}}function d(e){try{r(o["throw"](e))}catch(l){a(l)}}function r(e){e.done?t(e.value):i(e.value).then(s,d)}r((o=o.apply(e,l||[])).next())}))};const Wl=(0,o.pM)({el:"#main",mixins:[Y.A,D.A,Q.A,R.A],components:{helpLayoutbuilder:Rl.A,DefaultElements:ze,FieldsDesigner:be,Properties:$l,Elements:Ee,Loader:U.A},watch:{$route(e,l){this.renderComponent=!1,this.isFormBuilderMode=!1,this.defaultFields=[],this.formBuilderModel=[],this.formBuilderConfigModel=[],this.activeTab="form_elements",this.activeFieldName=""}},data(){return{imageIndex:0,templateId:(0,P.KR)(""),subDocType:(0,P.KR)(""),baseUrl:"",page:(0,P.KR)(1),imageHeight:0,imageWidth:200,connectionId:"",componentType:"input",keyImageChange:(0,P.KR)(0),formSplitterModel:(0,P.KR)(50),showJsonForm:(0,P.KR)(!1),strFormLayout:(0,P.KR)(""),markedAreasStr:"",allowMultiSelection:!1,language_origin:(0,P.KR)("")}},mounted:function(){this.keyToUpdateComponnets=0,this.renderComponent=!0,this.isFormBuilderMode=!0,this.formBuilderModel=[],this.formBuilderConfigModel=[],this.docType=this.$route.params.doc_type,this.templateId=this.$route.params.id,this.setSubDocType(),this.baseUrl=$.VA,this.prepareLanguageOriginList(),this.formLayout=[],this.templateId?this.init():(this.formLayoutImages=[],this.saveTemplate(!0))},methods:{init(){return Ql(this,void 0,void 0,(function*(){this.templateId=this.$route.params.id,this.templateId&&(yield this.loadLayoutTemplateById(),this.initImage())}))},loadLayoutTemplateById(){return Ql(this,void 0,void 0,(function*(){let e;try{this.showLoading(),e=yield xe.H7.getDocumentLayoutTemplateById(this.templateId),this.language_origin=e.doc_origin;let l=JSON.parse(e.layout_json);l&&(this.formLayout=l.hasOwnProperty("layout")?l.layout:[],l.hasOwnProperty("images")&&l.images.length>0&&(this.formLayoutImages=l.images),this.proximityTokens=l.proximity_tokens)}catch(l){return void this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}))},initImage(){let e=(0,O.$)("#image_container");this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight},setSubDocType(){this.$route.query&&this.$route.query.sub_doc_type&&(this.subDocType=String(this.$route.query.sub_doc_type||""))},zoomOut(){this.imageWidth>200&&(this.imageWidth=this.imageWidth-100)},zoomIn(){this.imageWidth=this.imageWidth+100},prepareFormBuilderJson(){for(let[e,l]of this.formLayout.entries())Object.assign(l,this.formBuilderConfigModel[l.name]);this.$forceUpdate()},getLayoutJsonStr(){const e={layout:this.formLayout,images:this.formLayoutImages,proximity_tokens:this.proximityTokens};return JSON.stringify(e)},copyTemplate(){(0,ye.A)(this.getLayoutJsonStr()).then((()=>{this.showSuccessToast("Copied!")}))},openJsonForm(){this.strFormLayout=this.getLayoutJsonStr(),this.showJsonForm=!0},savePastedJson(){if(this.strFormLayout){let e=JSON.parse(this.strFormLayout);this.formLayout=e.hasOwnProperty("layout")?e.layout:[],e.hasOwnProperty("images")&&e.images.length>0&&(this.formLayoutImages=e.images),this.proximityTokens=e.proximity_tokens}this.saveTemplate(!1)},createTemplateAccordingToOrigin(){this.templateId="",this.saveTemplate(!0)},saveTemplate(e,l=!0){return Ql(this,void 0,void 0,(function*(){let t;e&&this.prepareFormBuilderJson();try{this.showLoading();const e=this.$route.params.layout_type;let o={doc_type_key:this.docType,sub_doc_type_key:this.subDocType||"",title:"form builder",layout_json:this.getLayoutJsonStr(),layout_type:e};this.templateId?t=yield xe.H7.updateDocumentLayoutTemplateById(o,this.templateId):(o.doc_origin=this.language_origin,t=yield xe.H7.createDocumentLayoutTemplate(o)),t&&l&&this.showSuccessToast("Template Sucessfully saved"),this.templateId=t.id,this.$forceUpdate(),this.refreshView(e)}catch(o){return void this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}))},refreshView(e){const l=Ul.getDetailViewRoute({doc_type_key:this.docType||"",layout_template_id:this.templateId||"",sub_doc_type_key:this.subDocType||"",layout_type:e});this.$router.push(l)},restoreDefaults(){return Ql(this,void 0,void 0,(function*(){try{if(!this.templateId)return;this.showLoading();const e=yield xe.H7.deleteDocumentLayoutTemplate(this.templateId);if(!1===e.success)throw{message:e.message};this.showSuccessToast(this.$t("pages.messages.operation_sucessfull")),this.templateId="",this.saveTemplate(!0,!1)}catch(e){const l=qe.t.getErrorMessage(e);this.showErrorToast(l)}finally{this.hideLoading()}}))},prepareLanguageOriginList(){return Ql(this,void 0,void 0,(function*(){yield this.getLanguageIfEmpty(),this.language_origin_list=JSON.parse(JSON.stringify(this.language_origins)),this.language_origin_list[0].label=this.$t("default")}))}},setup(){const e=(0,ve.A)(),l=(0,ee.uL)(),{activeTab:t,isFormBuilderMode:o,keyToUpdateComponnets:i,renderComponent:a,defaultFields:s,formLayout:d,formLayoutImages:r,formBuilderModel:n,formBuilderConfigModel:m,activeFieldName:c,proximityTokens:u,docType:p}=(0,S.bP)(l),f=(0,ee.QJ)(),{language_origins:g}=(0,S.bP)(f),{getLanguageIfEmpty:h}=f,_=(0,ee._6)(),{tokenQueryParam:b}=(0,S.bP)(_);return _.getTokenQueryParam(),{getLanguageIfEmpty:h,docType:p,activeTab:t,formLayout:d,defaultFields:s,activeFieldName:c,renderComponent:a,formLayoutImages:r,formBuilderModel:n,isFormBuilderMode:o,keyToUpdateComponnets:i,formBuilderConfigModel:m,proximityTokens:u,language_origins:g,language_origin_list:(0,P.KR)([]),tokenQueryParam:b,showNotification(l){e.notify({message:l,color:"primary",position:"top"})}}}});var Xl=t(90124),Jl=t(25173),Kl=t(13796),Hl=t(42980),zl=t(10327),jl=t(10386),Zl=t(39041),Gl=t(71746),Yl=t(88841),et=t(98072),lt=t(82156),tt=t(23316),ot=t(36914),it=t(39150),at=t(44189),st=t(49200),dt=t(88672);const rt=(0,me.A)(Wl,[["render",I],["__scopeId","data-v-e8ae3154"]]),nt=rt;he()(Wl,"components",{QBtn:pe.A,QIcon:ce.A,QSelect:Sl.A,QItem:Xl.A,QItemSection:Jl.A,QItemLabel:Kl.A,QTooltip:ue.A,QTabs:Hl.A,QTab:zl.A,QSeparator:jl.A,QTabPanels:Zl.A,QTabPanel:Gl.A,QExpansionItem:Yl.A,QSplitter:et.A,QDialog:lt.A,QCard:tt.A,QToolbar:ot.A,QToolbarTitle:it.A,QCardSection:at.A,QForm:st.A,QInput:Ke.A,QField:fe.A}),he()(Wl,"directives",{ClosePopup:dt.A})}}]);