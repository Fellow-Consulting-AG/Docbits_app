"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[8317],{58317:(e,t,l)=>{l.r(t),l.d(t,{default:()=>z});var o=l(61758);const i={id:"services",class:"services section-bg"},a={class:"row"},s={class:"col-11",style:{padding:"20px","margin-left":"50px"}};function n(e,t,l,n,d,c){const r=(0,o.g2)("Tags_Middle");return(0,o.uX)(),(0,o.CE)("section",i,[(0,o.Lk)("div",a,[(0,o.Lk)("div",s,[(0,o.bF)(r)])])])}var d=l(24622),c=l(38734),r=l(18505),h=l(36246),u=l(58790),p=l(29104);const g={class:"row text-weight-bolder top-row"},b={class:"full-width",style:{"margin-top":"10px"}},_={style:{"text-align":"left",color:"white"}},f={style:{width:"100px"}},k={style:{"max-height":"50vh",overflow:"scroll"}},m=["onClick"],w=["onClick"],v=["onClick"],y=["onClick"];function C(e,t,l,i,a,s){const n=(0,o.g2)("q-input"),d=(0,o.g2)("q-space"),c=(0,o.g2)("DefaultBtn"),r=(0,o.g2)("q-checkbox"),h=(0,o.g2)("DeleteQfab"),C=(0,o.g2)("q-fab"),A=(0,o.g2)("q-chip"),x=(0,o.g2)("q-markup-table"),F=(0,o.g2)("EditCreatePopup"),L=(0,o.g2)("q-dialog");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",g,[(0,o.bF)(n,{style:{width:"40%"},outlined:"",dense:"",debounce:"500",modelValue:e.filter,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.filter=t),e.applyFilter],label:e.$t("name")},null,8,["modelValue","label","onUpdate:modelValue"]),(0,o.bF)(d),(0,o.bF)(c,{label:e.$t("doc2light.pages.add"),onClick:t[1]||(t[1]=t=>e.show_tag_popup=!0)},null,8,["label"])]),(0,o.Lk)("div",b,[(0,o.bF)(x,{class:"sticky-column-for-table q-table-seperator white-back",style:{"max-height":"70vh","overflow-y":"auto"},dense:"",flat:""},{default:(0,o.k6)((()=>[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",_,[(0,o.Lk)("th",f,[(0,o.bF)(r,{dark:"",modelValue:e.headerCheckbox,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.headerCheckbox=t),t[3]||(t[3]=t=>e.changeAction())]},null,8,["modelValue"]),(0,o.bF)(C,{flat:"",modelValue:e.headerFabIcon,"onUpdate:modelValue":t[4]||(t[4]=t=>e.headerFabIcon=t),disable:e.selection.length<1,"label-position":"top","data-cy":"actions","external-label":"",icon:"more_vert",direction:"down",padding:"xs"},{default:(0,o.k6)((()=>[(0,o.bF)(h,{info:e.$t("doc2light.pages.tags"),tooltip:e.$t("delete"),function:e.deleteMarked,argument:e.selection},null,8,["info","tooltip","function","argument"])])),_:1},8,["modelValue","disable"])]),(0,o.Lk)("th",null,(0,u.v_)(e.$t("doc2light.table.name")),1),(0,o.Lk)("th",null,(0,u.v_)(e.$t("doc2light.table.color")),1),(0,o.Lk)("th",null,(0,u.v_)(e.$t("doc2light.table.regex_rythm")),1),(0,o.Lk)("th",null,(0,u.v_)(e.$t("doc2light.table.regex")),1)])]),(0,o.Lk)("tbody",k,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.tag_list,(t=>((0,o.uX)(),(0,o.CE)("tr",{key:t["id"]},[(0,o.Lk)("td",null,[(0,o.bF)(r,{modelValue:t.rowSelection,"onUpdate:modelValue":[e=>t.rowSelection=e,l=>e.selectionList(t)]},null,8,["modelValue","onUpdate:modelValue"])]),(0,o.Lk)("td",{onClick:l=>e.onEditClick(t.id)},(0,u.v_)(e.replaceEmpty(t["name"])),9,m),(0,o.Lk)("td",{onClick:l=>e.onEditClick(t.id)},[(0,o.bF)(A,{style:(0,u.Tr)({"background-color":t.color,color:e.color_check(t.color)})},{default:(0,o.k6)((()=>[(0,o.eW)((0,u.v_)(e.replaceEmpty(t["color"])),1)])),_:2},1032,["style"])],8,w),(0,o.Lk)("td",{onClick:l=>e.onEditClick(t.id)},(0,u.v_)(e.replaceEmpty(t["method"])),9,v),(0,o.Lk)("td",{onClick:l=>e.onEditClick(t.id)},(0,u.v_)(e.replaceEmpty(t["regex"])),9,y)])))),128))])])),_:1})]),(0,o.bF)(L,{modelValue:e.show_tag_popup,"onUpdate:modelValue":t[5]||(t[5]=t=>e.show_tag_popup=t),onKeydown:t[6]||(t[6]=(0,p.jR)((t=>e.setter()),["esc"]))},{default:(0,o.k6)((()=>[(0,o.bF)(F,{mode:"create"})])),_:1},8,["modelValue"]),(0,o.bF)(L,{modelValue:e.show_edit_popup,"onUpdate:modelValue":t[7]||(t[7]=t=>e.show_edit_popup=t),onKeydown:t[8]||(t[8]=(0,p.jR)((t=>e.setter()),["esc"]))},{default:(0,o.k6)((()=>[(0,o.bF)(F,{mode:"edit",id:e.tag_id},null,8,["id"])])),_:1},8,["modelValue"])],64)}var A=l(63008),x=l(1659),F=l(46162),L=l(65471),R=l(31123),V=l(93760),K=function(e,t,l,o){function i(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,a){function s(e){try{d(o.next(e))}catch(t){a(t)}}function n(e){try{d(o["throw"](e))}catch(t){a(t)}}function d(e){e.done?l(e.value):i(e.value).then(s,n)}d((o=o.apply(e,t||[])).next())}))};const E=(0,o.pM)({data(){return{showIcons:!1,supportURL:F.cK}},components:{DefaultBtn:R.A,EditCreatePopup:L.A,DeleteQfab:V.A},mixins:[r.A],mounted(){this.initView(),this.resetAllSelectedRows()},methods:{setter(){this.show_edit_popup=!1,this.tag_list=this.apidata.tagData.data},replaceEmpty(e){return null!=e&&"undefined"!=e||(e="-"),e},initView(){return K(this,void 0,void 0,(function*(){yield this.setTagsFromServer(),this.tag_list=this.apidata.tagData.data}))},onTrashbinClick(e){return K(this,void 0,void 0,(function*(){yield this.delete_tag(e)}))},onEditClick(e){this.tag_id=e,this.show_edit_popup=!0},selectionList(e){this.selection.indexOf(e.id)>=0?this.selection.splice(this.selection.indexOf(e.id),1):this.selection.push(e.id)},handleActions(e){this.tag_list[e].fabaction,this.tag_list[e].fabaction},selectAllRows(){this.selection=[];for(const[e,t]of Object.entries(this.tag_list))this.tag_list[e].rowSelection=!0,this.selection.push(this.tag_list[e].id)},resetAllSelectedRows(){this.selection=[],this.headerCheckbox=!1;for(const[e,t]of Object.entries(this.tag_list))this.tag_list[e].rowSelection=!1},changeAction(){!0===this.headerCheckbox?this.selectAllRows():this.resetAllSelectedRows()},applyFilter(){if(""==this.filter)this.tag_list=this.apidata.tagData.data;else{this.tag_list={};for(const[e,t]of Object.entries(this.apidata.tagData.data))t.name.toLowerCase().includes(this.filter.toLowerCase())&&(this.tag_list[e]=this.apidata.tagData.data[e])}},deleteMarked(e){this.showLoading(),e.forEach((e=>K(this,void 0,void 0,(function*(){yield this.delete_tag(e)})))),this.tag_skip=0,this.hideLoading()},formateDate(e,t){return h.Ay.formatDate(e,t)},color_check(e){if(null==e)return"black";var t=e.substring(1),l=parseInt(t,16),o=l>>16&255,i=l>>8&255,a=255&l,s=.2126*o+.7152*i+.0722*a;return s<40?"white":"black"}},setup(){const e=(0,A.GX)(),t=(0,x.bP)(e),{setTagsFromServer:l,delete_tag:o}=e;return{apidata:(0,c.KR)(t),filter:(0,c.KR)(""),tag_list:(0,c.KR)({}),view:(0,c.KR)("list"),show_tag_popup:(0,c.KR)(!1),headerCheckbox:(0,c.KR)(!1),headerFabIcon:(0,c.KR)(!1),selection:(0,c.KR)([]),show_edit_popup:(0,c.KR)(!1),tag_id:(0,c.KR)(),tag_skip:(0,c.KR)(1),delete_tag:o,setTagsFromServer:l}}});var D=l(12807),Q=l(67837),S=l(93676),T=l(857),I=l(42315),U=l(80460),q=l(54782),M=l(66760),$=l(82156),j=l(98582),O=l.n(j);const X=(0,D.A)(E,[["render",C]]),P=X;O()(E,"components",{QInput:Q.A,QSpace:S.A,QMarkupTable:T.A,QTable:I.A,QCheckbox:U.A,QFab:q.A,QChip:M.A,QDialog:$.A});const B=(0,o.pM)({data(){return{}},components:{Tags_Middle:P},mixins:[r.A,d.A],methods:{formateDate(e,t){return h.Ay.formatDate(e,t)}},setup(){return{showMenu:(0,c.KR)(!1),showIcons:(0,c.KR)(!0),filter:(0,c.KR)(""),view:(0,c.KR)("list")}}});var G=l(56384);const W=(0,D.A)(B,[["render",n],["__scopeId","data-v-fc5bd3a4"]]),z=W;O()(B,"components",{QBtn:G.A})}}]);