"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[1487],{31487:(t,e,i)=>{i.r(e),i.d(e,{default:()=>Wt});var a=i(61758),n=i(58790);const l={class:"container page-height-limit"},s={style:{width:"100%"}},o={style:{"margin-top":"3px"}},d={key:0},r={style:{"margin-top":"3px"}},c={style:{"margin-top":"3px"}};function u(t,e,i,u,g,p){const _=(0,a.g2)("SubHeader"),h=(0,a.g2)("BackToSettings"),f=(0,a.g2)("q-icon"),m=(0,a.g2)("q-space"),k=(0,a.g2)("q-separator"),v=(0,a.g2)("API"),y=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card"),L=(0,a.g2)("q-expansion-item"),F=(0,a.g2)("SSOProvider"),w=(0,a.g2)("IdentityProvider"),A=(0,a.g2)("q-list");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(_,{name:"integration",label:t.$t("pages.settings.integration")},null,8,["label"]),(0,a.bF)(h),(0,a.Lk)("div",l,[(0,a.Lk)("div",s,[(0,a.Lk)("div",null,[(0,a.bF)(A,{bordered:"",class:"rounded-borders"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,a.k6)((()=>[(0,a.bF)(f,{size:"25px",style:{"margin-top":"3px"},class:"q-mr-lg icon-grey",name:"api"}),(0,a.Lk)("span",o,(0,n.v_)(t.$t("pages.settings.api_key")),1),(0,a.bF)(m)])),default:(0,a.k6)((()=>[(0,a.bF)(k),(0,a.bF)(b,{class:"page-background"},{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(v)])),_:1})])),_:1})])),_:1}),t.isAdmin?((0,a.uX)(),(0,a.CE)("div",d,[(0,a.bF)(L,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,a.k6)((()=>[(0,a.bF)(f,{size:"25px",class:"q-mr-lg icon-grey-svg",name:"img:settings/key.svg"}),(0,a.Lk)("span",r,(0,n.v_)(t.$t("pages.integration_settings.general")),1),(0,a.bF)(m)])),default:(0,a.k6)((()=>[(0,a.bF)(k),(0,a.bF)(b,{class:"page-background"},{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(F)])),_:1})])),_:1})])),_:1}),(0,a.bF)(L,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,a.k6)((()=>[(0,a.bF)(f,{size:"25px",class:"q-mr-lg icon-grey",name:"fingerprint"}),(0,a.Lk)("span",c,(0,n.v_)(t.$t("pages.integration_settings.saml_metadata")),1),(0,a.bF)(m)])),default:(0,a.k6)((()=>[(0,a.bF)(k),(0,a.bF)(b,{class:"page-background"},{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(w)])),_:1})])),_:1})])),_:1})])):(0,a.Q3)("",!0)])),_:1})])])])],64)}var g=i(38734),p=i(95488),_=i(60894);const h={class:"container q-pa-xl"},f={style:{width:"100%"}},m={class:"row mt-30"},k=(0,a.Lk)("div",{class:"col-2"},null,-1),v={class:"col-9"},y={class:"col-1"};function b(t,e,i,l,s,o){const d=(0,a.g2)("q-input"),r=(0,a.g2)("q-tooltip"),c=(0,a.g2)("f-btn"),u=(0,a.g2)("q-form");return(0,a.uX)(),(0,a.CE)("div",h,[(0,a.Lk)("div",f,[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",m,[k,(0,a.Lk)("div",v,[(0,a.bF)(d,{class:"api",id:"apiKey",outlined:"",modelValue:t.api_key,"onUpdate:modelValue":e[0]||(e[0]=e=>t.api_key=e),readonly:"",label:"Key","error-message":t.$t("pages.api_settings.invalid_key"),rules:[t=>t&&t.length>0]},null,8,["modelValue","error-message","rules"])]),(0,a.Lk)("div",y,[(0,a.bF)(c,{class:"q-ml-sm q-mt-sm",icon:"fas fa-copy",onClick:e[1]||(e[1]=e=>t.copyText(t.api_key))},{default:(0,a.k6)((()=>[(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(t.$t("pages.api_settings.api_key_tooltip")),1)])),_:1})])),_:1})])])])),_:1})])])}var L=i(18505),F=i(24622),w=i(11470),A=i(72281),x=function(t,e,i,a){function n(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,l){function s(t){try{d(a.next(t))}catch(e){l(e)}}function o(t){try{d(a["throw"](t))}catch(e){l(e)}}function d(t){t.done?i(t.value):n(t.value).then(s,o)}d((a=a.apply(t,e||[])).next())}))};const q=(0,a.pM)({el:"#app",mixins:[L.A,F.A,A.A],props:["showSpinner"],data(){return{api_key:""}},mounted:function(){this.getAppKey()},methods:{getAppKey(){return x(this,void 0,void 0,(function*(){try{this.showLoading();const t={app_key:"FELLOW_DOC2"},e=yield w.jD.getAppSubscription(t);this.api_key=e[0].token}catch(t){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}))}}});var E=i(12807),C=i(49200),T=i(67837),S=i(97410),V=i(67156),$=i(98582),I=i.n($);const Q=(0,E.A)(q,[["render",b]]),M=Q;I()(q,"components",{QForm:C.A,QInput:T.A,QTooltip:S.A,QField:V.A});const D={class:"container q-pa-xl"},K={style:{width:"100%"}},R={class:"row"},U={class:"col-2"},O={class:"col-9"},P={class:"col-1"},W={class:"row mt-30"},X={class:"col-2"},z={class:"col-9"},B={class:"col-1"},H={class:"row mt-30"},N={class:"col-2"},j={class:"col-9"},Y={class:"col-1"},G={class:"row mt-30"},J=(0,a.Lk)("div",{class:"col-2"},null,-1),Z={class:"col-9"};function tt(t,e,i,l,s,o){const d=(0,a.g2)("q-input"),r=(0,a.g2)("q-tooltip"),c=(0,a.g2)("f-btn");return(0,a.uX)(),(0,a.CE)("div",D,[(0,a.Lk)("div",K,[(0,a.Lk)("div",R,[(0,a.Lk)("div",U,(0,n.v_)(t.$t("pages.integration_settings.entity_id")),1),(0,a.Lk)("div",O,[(0,a.bF)(d,{class:"api",id:"entity_id",outlined:"",modelValue:t.entity_id,"onUpdate:modelValue":e[0]||(e[0]=e=>t.entity_id=e),readonly:""},null,8,["modelValue"])]),(0,a.Lk)("div",P,[(0,a.bF)(c,{class:"q-ml-sm q-mt-sm",icon:"fas fa-copy",onClick:e[1]||(e[1]=e=>t.copyText(t.entity_id))},{default:(0,a.k6)((()=>[(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(t.$t("copy")),1)])),_:1})])),_:1})])]),(0,a.Lk)("div",W,[(0,a.Lk)("div",X,(0,n.v_)(t.$t("pages.integration_settings.slo_url")),1),(0,a.Lk)("div",z,[(0,a.bF)(d,{class:"api",id:"slo_url",outlined:"",modelValue:t.slo_url,"onUpdate:modelValue":e[2]||(e[2]=e=>t.slo_url=e),readonly:""},null,8,["modelValue"])]),(0,a.Lk)("div",B,[(0,a.bF)(c,{class:"q-ml-sm q-mt-sm",icon:"fas fa-copy",onClick:e[3]||(e[3]=e=>t.copyText(t.slo_url))},{default:(0,a.k6)((()=>[(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(t.$t("copy")),1)])),_:1})])),_:1})])]),(0,a.Lk)("div",H,[(0,a.Lk)("div",N,(0,n.v_)(t.$t("pages.integration_settings.sso_url")),1),(0,a.Lk)("div",j,[(0,a.bF)(d,{class:"api",id:"sso_url",outlined:"",modelValue:t.sso_url,"onUpdate:modelValue":e[4]||(e[4]=e=>t.sso_url=e),readonly:""},null,8,["modelValue"])]),(0,a.Lk)("div",Y,[(0,a.bF)(c,{class:"q-ml-sm q-mt-sm",icon:"fas fa-copy",onClick:e[5]||(e[5]=e=>t.copyText(t.sso_url))},{default:(0,a.k6)((()=>[(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(t.$t("copy")),1)])),_:1})])),_:1})])])]),(0,a.Lk)("div",G,[J,(0,a.Lk)("div",Z,[(0,a.bF)(c,{onClick:e[6]||(e[6]=e=>t.downloadInstaller(t.certificate_url)),label:t.$t("pages.integration_settings.download_certificate")},null,8,["label"]),(0,a.bF)(c,{style:{"margin-left":"10px"},onClick:e[7]||(e[7]=e=>t.downloadInstaller(t.metadata_url)),label:t.$t("pages.integration_settings.metadata_url")},null,8,["label"])])])])}var et=i(82303),it=i(46162),at=i(85487),nt=function(t,e,i,a){function n(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,l){function s(t){try{d(a.next(t))}catch(e){l(e)}}function o(t){try{d(a["throw"](t))}catch(e){l(e)}}function d(t){t.done?i(t.value):n(t.value).then(s,o)}d((a=a.apply(t,e||[])).next())}))};const lt=(0,a.pM)({el:"#app",mixins:[L.A,F.A,A.A],props:["showSpinner"],data(){return{api_key:"",entity_id:"",slo_url:"",sso_url:"",certificate_url:"",metadata_url:"",file:null}},mounted:function(){this.getSAMLInfo()},setup(){return{}},methods:{downloadInstaller(t){window.open(t,"_self")},getSAMLInfo(){return nt(this,void 0,void 0,(function*(){this.showLoading();try{let t=yield(0,it.L3)();this.fetchConfiguration(t),this.hideLoading()}catch(t){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}}))},fetchConfiguration(t){return nt(this,void 0,void 0,(function*(){let e=yield et.A.get((0,at.MV)(it.FH.fetch_saml_configurations),{headers:{Authorization:t}});this.entity_id=e.data.ENTITY_ID,this.sso_url=e.data.SSO,this.slo_url=e.data.SLO,this.certificate_url=e.data.CERTIFICATE,this.metadata_url=e.data.METADATA_URL}))}}});var st=i(56384);const ot=(0,E.A)(lt,[["render",tt]]),dt=ot;I()(lt,"components",{QInput:T.A,QTooltip:S.A,QBtn:st.A});const rt={class:"container q-pa-xl"},ct={style:{width:"100%"}},ut={class:"row"},gt={class:"col-2"},pt={class:"col-9"},_t={class:"row mt-30"},ht={class:"col-2"},ft={class:"col-9"},mt={key:0,class:"row mt-30",style:{position:"relative"}},kt={class:"col-2"},vt={class:"col-9"},yt={class:"col-1"},bt={class:"row mt-30"},Lt=(0,a.Lk)("div",{class:"col-2"},null,-1),Ft={class:"col-9"},wt=(0,a.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function At(t,e,i,l,s,o){const d=(0,a.g2)("q-input"),r=(0,a.g2)("q-icon"),c=(0,a.g2)("q-file"),u=(0,a.g2)("q-tooltip"),g=(0,a.g2)("f-btn"),p=(0,a.g2)("q-inner-loading");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",rt,[(0,a.Lk)("div",ct,[(0,a.Lk)("div",ut,[(0,a.Lk)("div",gt,(0,n.v_)(t.$t("pages.integration_settings.infor_tenant_id")),1),(0,a.Lk)("div",pt,[(0,a.bF)(d,{class:"api",id:"infor_tenant_id",outlined:"",modelValue:t.infor_tenant_id,"onUpdate:modelValue":e[0]||(e[0]=e=>t.infor_tenant_id=e)},null,8,["modelValue"])])]),(0,a.Lk)("div",_t,[(0,a.Lk)("div",ht,(0,n.v_)(t.$t("pages.integration_settings.upload_file")),1),(0,a.Lk)("div",ft,[(0,a.bF)(c,{style:{width:"20% !important","white-space":"nowrap"},class:"select-field",outlined:"",counter:"",multiple:"",modelValue:t.file,"onUpdate:modelValue":e[1]||(e[1]=e=>t.file=e),label:t.$t("pages.integration_settings.upload_button")},{prepend:(0,a.k6)((()=>[(0,a.bF)(r,{name:"attach_file"})])),_:1},8,["modelValue","label"])])]),t.exiting_metadate_url?((0,a.uX)(),(0,a.CE)("div",mt,[(0,a.Lk)("div",kt,(0,n.v_)(t.$t("pages.integration_settings.existing_upload_file")),1),(0,a.Lk)("div",vt,[(0,a.bF)(d,{class:"api",outlined:"",modelValue:t.existing_tenant_id,"onUpdate:modelValue":e[2]||(e[2]=e=>t.existing_tenant_id=e),readonly:""},null,8,["modelValue"])]),(0,a.Lk)("div",yt,[(0,a.bF)(g,{color:"primary",class:"q-ml-sm q-mt-sm",icon:"fas fa-download",onClick:t.downloadMetadata},{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(t.$t("pages.integration_settings.export")),1)])),_:1})])),_:1},8,["onClick"])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",bt,[Lt,(0,a.Lk)("div",Ft,[(0,a.bF)(g,{label:t.$t("pages.integration_settings.configure_save_button"),class:"q-mr-lg",onClick:t.saveConfiguration},null,8,["label","onClick"]),t.exiting_metadate_url?((0,a.uX)(),(0,a.Wv)(g,{key:0,label:t.$t("delete"),onClick:t.deleteConfig},null,8,["label","onClick"])):(0,a.Q3)("",!0)])])])]),(0,a.bF)(p,{showing:t.loading},{default:(0,a.k6)((()=>[wt])),_:1},8,["showing"])],64)}var xt=i(64775),qt=function(t,e,i,a){function n(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,l){function s(t){try{d(a.next(t))}catch(e){l(e)}}function o(t){try{d(a["throw"](t))}catch(e){l(e)}}function d(t){t.done?i(t.value):n(t.value).then(s,o)}d((a=a.apply(t,e||[])).next())}))};const Et=(0,a.pM)({el:"#app",mixins:[L.A,F.A],data(){return{}},mounted:function(){this.init()},methods:{init(){return qt(this,void 0,void 0,(function*(){try{this.loading=!0;let t=yield(0,it.L3)();this.fetchMetaDataInfo(t)}catch(t){const e=xt.t.getErrorMessage(t);this.showErrorToast(e)}finally{this.loading=!1}}))},fetchMetaDataInfo(t){return qt(this,void 0,void 0,(function*(){let e=yield et.A.get((0,at.MV)(it.FH.fetch_saml_meta),{headers:{Authorization:t}});const i=e.data.tennant_id;i&&"undefined"!==i&&(this.existing_tenant_id=i);const a=e.data.saml_download_path;a&&"undefined"!==a&&(this.exiting_metadate_url=a||"")}))},openFileExplorer(){const t=document.getElementById("uploadfile");t&&t.click()},saveConfiguration(){this.file?this.uploadFile(this.file[0]):this.showErrorToast(this.$t("pages.messages.NO_FILE_SELECTED"))},downloadMetadata(){return qt(this,void 0,void 0,(function*(){try{this.loading=!0;let t=yield(0,it.L3)(),e=yield et.A.get((0,at.MV)(this.exiting_metadate_url),{headers:{Authorization:t}});this.decodeRequest(e.data)}catch(t){const e=xt.t.getErrorMessage(t);this.showErrorToast(e)}finally{this.loading=!1}}))},uploadFile(t){return qt(this,void 0,void 0,(function*(){try{if("text/xml"!==t.type)return void this.showErrorToast(this.$t("pages.messages.ONLY_XML_ALLOWED"));this.loading=!0;let e=new FormData;e.append("file",t),e.append("tenant_id",this.infor_tenant_id),e.append("org_id",(0,at.I)());let i=yield(0,it.L3)();yield et.A.post(it.FH.save_saml_configurations,e,{headers:{"Content-Type":"multipart/form-data",Authorization:i}}),yield this.init(),this.file=null,this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(e){const t=xt.t.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}}))},decodeRequest(t){var e="configured_metadata.xml",i=document.createElement("a"),a=new Blob([t],{type:"text/xml"});i.setAttribute("href",window.URL.createObjectURL(a)),i.setAttribute("download",e),i.dataset.downloadurl=["text/xml",i.download,i.href].join(":"),i.draggable=!0,i.classList.add("dragout"),i.click()},deleteConfig(){return qt(this,void 0,void 0,(function*(){try{this.loading=!0,yield w.tq.delete(),this.resetViewData(),this.showSuccessToast(this.$t("pages.messages.DELETED_SUCCESSFULLY"))}catch(t){const e=xt.t.getErrorMessage(t);this.showErrorToast(e)}finally{this.loading=!1}}))},resetViewData(){this.infor_tenant_id="",this.exiting_metadate_url="",this.existing_tenant_id="",this.file=null}},setup(){return{loading:(0,g.KR)(!1),infor_tenant_id:(0,g.KR)(""),existing_tenant_id:(0,g.KR)(""),exiting_metadate_url:(0,g.KR)(""),file:(0,g.KR)(null)}}});var Ct=i(99980),Tt=i(50492),St=i(39035);const Vt=(0,E.A)(Et,[["render",At]]),$t=Vt;I()(Et,"components",{QInput:T.A,QFile:Ct.A,QIcon:Tt.A,QTooltip:S.A,QInnerLoading:St.A});var It=i(73937);const Qt=(0,a.pM)({el:"#app",components:{SubHeader:p.A,BackToSettings:_.A,API:M,SSOProvider:dt,IdentityProvider:$t},data(){return{isAdmin:(0,g.KR)(!1)}},mounted(){this.isAdmin=Boolean(JSON.parse((0,It.Ky)("is_organisation_admin")))}});var Mt=i(53999),Dt=i(88841),Kt=i(93676),Rt=i(10386),Ut=i(23316),Ot=i(44189);const Pt=(0,E.A)(Qt,[["render",u]]),Wt=Pt;I()(Qt,"components",{QList:Mt.A,QExpansionItem:Dt.A,QIcon:Tt.A,QSpace:Kt.A,QSeparator:Rt.A,QCard:Ut.A,QCardSection:Ot.A})}}]);