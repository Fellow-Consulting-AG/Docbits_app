"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[6968],{6968:(e,t,l)=>{l.r(t),l.d(t,{default:()=>he});var a=l(61758),i=l(58790);const s=e=>((0,a.Qi)("data-v-47849ca9"),e=e(),(0,a.jt)(),e),o={key:0,class:"container-wrapper q-pa-lg settings",id:"access_control_detail"},d={class:"row full-width items-center"},n={class:"col-6"},c={class:"q-ma-xs text-lg"},r={class:"col-6"},u={class:"full-width q-my-md"},p={class:"highlighted-back"},_=s((()=>(0,a.Lk)("th",{class:"text-h4 text-center"},null,-1))),h={class:"text-h4 text-center"},m={class:"text-h4 text-center"},v={class:"text-h4 text-center"},b={class:"text-h4 text-center"},f={class:"text-h4 text-center"},k={class:"text-h4 text-center"},g={class:"text-h4 text-center"},y={class:"text-h4 text-center"},x={class:"text-h4 text-center"},F={class:"text-h4 text-center"},L={key:0,class:"text-h4 text-center"},w={key:1,class:"text-h4 text-center"},$={class:"full-width"},A={class:"q-ma-md"},q={class:"relative"},D={class:"row",style:{width:"1200px"}},T={class:"row items-center q-ma-xs"},C={class:"q-mx-xs"},V={class:"q-mx-xs font-size-12 field_color"},X={class:"q-mx-xs"},E={class:"row",style:{width:"1200px"}},Q={class:"row items-center q-ma-xs"},K={class:"q-mx-xs"},S={class:"q-mx-xs font-size-12 field_color"},I={class:"q-mx-xs"};function P(e,t,l,s,P,O){const U=(0,a.g2)("SubHeader"),W=(0,a.g2)("BackToSettings"),B=(0,a.g2)("f-btn"),R=(0,a.g2)("q-icon"),H=(0,a.g2)("q-item-label"),j=(0,a.g2)("q-item-section"),z=(0,a.g2)("q-item"),M=(0,a.g2)("q-select"),J=(0,a.g2)("q-markup-table"),N=(0,a.g2)("q-tab"),G=(0,a.g2)("q-tabs"),Y=(0,a.g2)("q-separator"),Z=(0,a.g2)("q-tab-panel"),ee=(0,a.g2)("q-tab-panels"),te=(0,a.g2)("Loader");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(U,{label:e.$t("access_control"),onSearch:!1,show_expiry_alert:!0,name:"access_control",display_help_link:!1},null,8,["label"]),(0,a.bF)(W,{back_to_rotue:`/settings/access_control/${e.group_name}/${e.group_id}`,label:e.$t("back")},null,8,["back_to_rotue","label"]),e.renderComponent?((0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",d,[(0,a.Lk)("div",n,[(0,a.Lk)("span",c,(0,i.v_)(e.group_name)+" - "+(0,i.v_)(e.doc_id),1)]),(0,a.Lk)("div",r,[(0,a.bF)(B,{label:e.$t("save"),class:"q-ma-xs float-right",onClick:t[0]||(t[0]=t=>e.save())},null,8,["label"])])]),(0,a.Lk)("div",u,[(0,a.bF)(J,{dense:"",flat:"",bordered:"",separator:"cell",class:"dashboard-table-style fields-table-height back-white dashboard-table-header-sticky"},{default:(0,a.k6)((()=>[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",p,[_,(0,a.Lk)("th",h,(0,i.v_)(e.$t("access")),1),(0,a.Lk)("th",m,(0,i.v_)(e.$t("list")),1),(0,a.Lk)("th",v,(0,i.v_)(e.$t("view")),1),(0,a.Lk)("th",b,(0,i.v_)(e.$t("edit")),1),(0,a.Lk)("th",f,(0,i.v_)(e.$t("delete")),1),(0,a.Lk)("th",k,(0,i.v_)(e.$t("mass_update")),1),(0,a.Lk)("th",g,(0,i.v_)(e.$t("first_approval")),1),(0,a.Lk)("th",y,(0,i.v_)(e.$t("second_approval")),1),(0,a.Lk)("th",x,(0,i.v_)(e.$t("unlock_document")),1)])]),(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",F,(0,i.v_)(e.doc_id),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.fields,(t=>((0,a.uX)(),(0,a.CE)(a.FK,{key:t},["access"===t?((0,a.uX)(),(0,a.CE)("th",L,[(0,a.bF)(M,{borderless:"",modelValue:e.apiData[e.group_id][e.doc_id][t],"onUpdate:modelValue":l=>e.apiData[e.group_id][e.doc_id][t]=l,options:e.accessOptionList,dense:"","emit-value":"","map-options":"","hide-dropdown-icon":""},{option:(0,a.k6)((l=>[(0,a.bF)(z,(0,a.v6)({ref_for:!0},l.itemProps),{default:(0,a.k6)((()=>[(0,a.bF)(j,null,{default:(0,a.k6)((()=>[(0,a.bF)(H,null,{default:(0,a.k6)((()=>[l.opt.value===e.apiData[e.group_id][e.doc_id][t]?((0,a.uX)(),(0,a.Wv)(R,{key:0,name:"check",class:"q-ml-xs",color:"primary"})):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,i.v_)(l.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["modelValue","onUpdate:modelValue","options"])])):((0,a.uX)(),(0,a.CE)("th",w,[(0,a.bF)(M,{borderless:"",modelValue:e.apiData[e.group_id][e.doc_id][t],"onUpdate:modelValue":l=>e.apiData[e.group_id][e.doc_id][t]=l,options:e.listOption,dense:"","emit-value":"","map-options":"","hide-dropdown-icon":""},{option:(0,a.k6)((l=>[(0,a.bF)(z,(0,a.v6)({ref_for:!0},l.itemProps),{default:(0,a.k6)((()=>[(0,a.bF)(j,null,{default:(0,a.k6)((()=>[(0,a.bF)(H,null,{default:(0,a.k6)((()=>[l.opt.value===e.apiData[e.group_id][e.doc_id][t]?((0,a.uX)(),(0,a.Wv)(R,{key:0,name:"check",class:"q-ml-xs",color:"primary"})):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,i.v_)(l.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["modelValue","onUpdate:modelValue","options"])]))],64)))),128))])])])),_:1})]),(0,a.Lk)("div",$,[(0,a.Lk)("span",A,(0,i.v_)(e.$t("field_permission")),1),(0,a.Lk)("div",q,[(0,a.bF)(G,{modelValue:e.activeTab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.activeTab=t),dense:"","active-class":"highlighted-back","indicator-color":"primary","active-color":"primary",align:"justify"},{default:(0,a.k6)((()=>[(0,a.bF)(N,{name:"table_columns",label:e.$t("table_columns")},null,8,["label"]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.field_setting,(t=>((0,a.uX)(),(0,a.Wv)(N,{key:t.name,name:t.name,label:e.$t(`${t.name}`)},null,8,["name","label"])))),128))])),_:1},8,["modelValue"]),(0,a.bF)(Y),(0,a.bF)(ee,{modelValue:e.activeTab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.activeTab=t),animated:""},{default:(0,a.k6)((()=>[(0,a.bF)(Z,{name:"table_columns"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",D,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.table_columns,(t=>((0,a.uX)(),(0,a.CE)("div",{class:"width-500 text-right",key:t.column_name},[(0,a.Lk)("div",T,[(0,a.Lk)("div",C,(0,i.v_)(null===t||void 0===t?void 0:t.column_name),1),(0,a.Lk)("div",V,(0,i.v_)(`[${null===t||void 0===t?void 0:t.column_name}]`),1),(0,a.Lk)("div",X,[(0,a.bF)(M,{modelValue:e.apiData[e.group_id][e.doc_id]["fields"][t.id],"onUpdate:modelValue":l=>e.apiData[e.group_id][e.doc_id]["fields"][t.id]=l,filled:"",options:e.fieldPropertiesOptions,dense:"","emit-value":"","map-options":"","hide-dropdown-icon":""},{option:(0,a.k6)((t=>[(0,a.bF)(z,(0,a.v6)({ref_for:!0},t.itemProps),{default:(0,a.k6)((()=>[(0,a.bF)(j,null,{default:(0,a.k6)((()=>[(0,a.bF)(H,null,{default:(0,a.k6)((()=>[t.opt.value===e.option?((0,a.uX)(),(0,a.Wv)(R,{key:0,name:"check",class:"q-ml-xs",color:"primary"})):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,i.v_)(t.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["modelValue","onUpdate:modelValue","options"])])])])))),128))])])),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.field_setting,(t=>((0,a.uX)(),(0,a.Wv)(Z,{key:t.name,name:t.name},{default:(0,a.k6)((()=>[(0,a.Lk)("div",E,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(null===t||void 0===t?void 0:t.rows,((t,l)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:l},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t,(t=>((0,a.uX)(),(0,a.CE)("div",{class:"width-500 text-right",key:t.id},[(0,a.Lk)("div",Q,[(0,a.Lk)("div",K,(0,i.v_)(t.title),1),(0,a.Lk)("div",S,(0,i.v_)(`[${null===t||void 0===t?void 0:t.field_name}]`),1),(0,a.Lk)("div",I,[(0,a.bF)(M,{modelValue:e.apiData[e.group_id][e.doc_id]["fields"][t.id],"onUpdate:modelValue":l=>e.apiData[e.group_id][e.doc_id]["fields"][t.id]=l,filled:"",options:e.fieldPropertiesOptions,dense:"","emit-value":"","map-options":"","hide-dropdown-icon":""},{option:(0,a.k6)((t=>[(0,a.bF)(z,(0,a.v6)({ref_for:!0},t.itemProps),{default:(0,a.k6)((()=>[(0,a.bF)(j,null,{default:(0,a.k6)((()=>[(0,a.bF)(H,null,{default:(0,a.k6)((()=>[t.opt.value===e.option?((0,a.uX)(),(0,a.Wv)(R,{key:0,name:"check",class:"q-ml-xs",color:"primary"})):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,i.v_)(t.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["modelValue","onUpdate:modelValue","options"])])])])))),128))],64)))),128))])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])])])):(0,a.Q3)("",!0),(0,a.bF)(te)],64)}var O=l(38734),U=l(95488),W=l(60894),B=l(11470),R=l(8420),H=l(24622),j=l(96056),z=l(18505),M=l(94124),J=l(1659),N=function(e,t,l,a){function i(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function o(e){try{n(a.next(e))}catch(t){s(t)}}function d(e){try{n(a["throw"](e))}catch(t){s(t)}}function n(e){e.done?l(e.value):i(e.value).then(o,d)}n((a=a.apply(e,t||[])).next())}))};const G=(0,a.pM)({el:"#app",mixins:[H.A,j.A,z.A],mounted(){return N(this,void 0,void 0,(function*(){yield this.init()}))},components:{SubHeader:U.A,BackToSettings:W.A,Loader:R.A},methods:{init(){return N(this,void 0,void 0,(function*(){this.showLoading();try{yield this.getTableColumns(),yield this.getFields(),yield this.accessDetail()}catch(e){}finally{this.renderComponent=!0,this.hideLoading()}}))},updateDocTyleFields(e){return N(this,void 0,void 0,(function*(){try{const t=new FormData;t.append("data",e);const l=yield B.lr.updateAllDocTypeSettings(t);if(!1===l.success)throw{message:l.message}}catch(t){throw t}}))},save(){return N(this,void 0,void 0,(function*(){this.showLoading();const e=JSON.stringify(this.apiData);try{yield this.updateDocTyleFields(e),yield this.accessDetail(),this.showSuccessToast(this.$t("save_successfully"))}catch(t){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}))},accessDetail(){return N(this,void 0,void 0,(function*(){yield this.getAllDocTypeFieldsForAccessControl(this.group_id),this.mappingValueForDetailFields()}))},mappingValueForDetailFields(){this.apiData[this.group_id][this.doc_id]||(this.apiData[this.group_id][this.doc_id]={});const e=this.apiData[this.group_id][this.doc_id];e&&(this.fields.map((t=>{void 0===e[t]&&(e[t]=0)})),void 0===e["fields"]&&(e["fields"]={}),Array.from(this.field_setting).forEach((t=>{Array.from(t.rows).forEach((t=>{Array.from(t).forEach((t=>{void 0===e["fields"][t.id]&&(e["fields"][t.id]=2)}))}))})),this.table_columns.map((t=>{void 0===e["fields"][t.id]&&(e["fields"][t.id]=2)})))},getFields(){return N(this,void 0,void 0,(function*(){this.field_setting=[];const e={doc_type:this.doc_id};try{const t=yield B.bg.getFieldSettingsByType(e);if(!1===t.success)throw t;this.field_setting=t.field_setting}catch(t){throw t}}))},getTableColumns(){var e;return N(this,void 0,void 0,(function*(){this.table_columns=[];try{const t=yield B.p5.getTableColumns(this.doc_id);if(!1===t.success)throw{message:t.data.message};this.table_columns=null===(e=null===t||void 0===t?void 0:t.data)||void 0===e?void 0:e[this.doc_id+"_TABLE"]}catch(t){}}))}},data(){return{activeTab:(0,O.KR)("table_columns"),table_columns:(0,O.KR)([]),field_setting:(0,O.KR)([]),renderComponent:(0,O.KR)(!1),group_id:this.$route.params.group_id,doc_id:this.$route.params.doc_type,group_name:this.$route.params.group_name,fieldPropertiesOptions:[{label:this.$t("read_write"),value:2},{label:this.$t("read_owner_write"),value:4},{label:this.$t("readonly"),value:1},{label:this.$t("owner_read_owner_write"),value:8},{label:this.$t("approval"),value:16},{label:this.$t("none"),value:0}]}},setup(){const e=(0,M.H4)(),{accessOptionList:t,listOption:l,processing:a,apiData:i,fields:s}=(0,J.bP)(e),{getAllDocTypeFieldsForAccessControl:o}=e;return{accessOptionList:t,listOption:l,processing:a,apiData:i,fields:s,getAllDocTypeFieldsForAccessControl:o}}});var Y=l(12807),Z=l(857),ee=l(94940),te=l(90124),le=l(25173),ae=l(13796),ie=l(50492),se=l(42980),oe=l(10327),de=l(10386),ne=l(39041),ce=l(71746),re=l(67156),ue=l(98582),pe=l.n(ue);const _e=(0,Y.A)(G,[["render",P],["__scopeId","data-v-47849ca9"]]),he=_e;pe()(G,"components",{QMarkupTable:Z.A,QSelect:ee.A,QItem:te.A,QItemSection:le.A,QItemLabel:ae.A,QIcon:ie.A,QTabs:se.A,QTab:oe.A,QSeparator:de.A,QTabPanels:ne.A,QTabPanel:ce.A,QField:re.A})}}]);