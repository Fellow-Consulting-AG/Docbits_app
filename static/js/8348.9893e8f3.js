"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[8348],{68348:(e,t,o)=>{o.r(t),o.d(t,{default:()=>qt});var a=o(61758),n=o(58790),i=o(29104);const l=e=>((0,a.Qi)("data-v-6f2032c7"),e=e(),(0,a.jt)(),e),d={id:"services",class:"services section-bg"},s={class:"row"},r={class:"col-12",style:{"margin-top":"10px"}},c={style:{"font-size":"20px","margin-left":"80px"}},u={class:"row",style:{float:"right","margin-right":"43px",height:"30px"}},p={class:"row",style:{border:"1px solid","margin-right":"20px","min-width":"130px"}},m={style:{margin:"auto 5px auto 5px",width:"40px"},align:"center"},h={style:{margin:"auto 10px auto 5px","min-width":"30px"},align:"center"},g=l((()=>(0,a.Lk)("hr",{style:{"margin-top":"20px","margin-bottom":"15px"}},null,-1))),f={class:"row",style:{"margin-bottom":"50px","margin-left":"50px"}},_={class:"col-4"},b={class:"col-8"},v={style:{border:"2px solid","margin-left":"20px","margin-right":"48px"}},w={key:0,class:"image"},y={key:1},k=l((()=>(0,a.Lk)("img",{src:"images/loader.gif",alt:"Loading...",class:"inner",style:{"margin-left":"auto","margin-right":"30%"}},null,-1))),F=[k],A={key:2},x=l((()=>(0,a.Lk)("div",null,"No doc",-1))),V={class:"q-ml-sm"};function C(e,t,o,l,k,C){const R=(0,a.g2)("q-separator"),L=(0,a.g2)("q-input"),K=(0,a.g2)("q-btn"),Q=(0,a.g2)("q-tooltip"),q=(0,a.g2)("q-icon"),D=(0,a.g2)("q-item-section"),$=(0,a.g2)("q-item"),T=(0,a.g2)("q-list"),S=(0,a.g2)("q-menu"),E=(0,a.g2)("Document_View_Left"),U=(0,a.g2)("vue-pdf-embed"),I=(0,a.g2)("q-avatar"),P=(0,a.g2)("DocSplit"),B=(0,a.g2)("q-dialog"),X=(0,a.g2)("q-card-section"),W=(0,a.g2)("CancelBtn"),j=(0,a.g2)("SaveBtn"),M=(0,a.g2)("q-card-actions"),z=(0,a.g2)("q-card"),O=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)("section",d,[(0,a.Lk)("div",s,[(0,a.Lk)("div",r,[(0,a.Lk)("span",c,(0,n.v_)(e.doc["name"]),1),(0,a.Lk)("span",u,[(0,a.Lk)("div",p,[(0,a.Lk)("span",m,(0,n.v_)(e.$t("doc2light.pages.page")),1),(0,a.bF)(R,{vertical:""}),(0,a.bF)(L,{dense:"",borderless:"",modelValue:e.inputPage,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.inputPage=t),t[1]||(t[1]=e=>{this.changePage(e)})],style:{width:"30px","margin-left":"5px"}},null,8,["modelValue"]),(0,a.bF)(R,{vertical:""}),(0,a.Lk)("span",h,(0,n.v_)(e.$t("doc2light.pages.of")+" "+e.pageCount),1),(0,a.bF)(R,{vertical:""}),(0,a.bF)(K,{flat:"",icon:"navigate_before",style:{width:"20px"},onClick:t[2]||(t[2]=t=>this.changePage(e.inputPage-1))}),(0,a.bF)(R,{vertical:""}),(0,a.bF)(K,{flat:"",icon:"navigate_next",style:{width:"20px"},onClick:t[3]||(t[3]=t=>this.changePage(e.inputPage+1))})]),(0,a.bF)(K,{icon:"settings",class:"default-btn-alfred",style:{"margin-right":"5px"},flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(S,{align:"center"},{default:(0,a.k6)((()=>[(0,a.bF)(T,{bordered:"",separator:""},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)($,{clickable:"",onClick:t[4]||(t[4]=t=>e.confirm=!0)},{default:(0,a.k6)((()=>[(0,a.bF)(Q,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("doc2light.pages.delete")),1)])),_:1}),(0,a.bF)(D,null,{default:(0,a.k6)((()=>[(0,a.bF)(q,{color:"red",name:"delete_outline",size:"1.8em"})])),_:1})])),_:1})),[[O]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)($,{clickable:"",onClick:t[5]||(t[5]=t=>e.onDownloadClick())},{default:(0,a.k6)((()=>[(0,a.bF)(Q,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("doc2light.pages.download")),1)])),_:1}),(0,a.bF)(q,{name:"download",size:"1.8em"})])),_:1})),[[O]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)($,{clickable:"",onClick:t[6]||(t[6]=t=>e.show_popup=!0)},{default:(0,a.k6)((()=>[(0,a.bF)(Q,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("doc2light.pages.split")),1)])),_:1}),(0,a.bF)(q,{name:"insert_page_break",size:"1.8em"})])),_:1})),[[O]])])),_:1})])),_:1})])),_:1})])])]),g,(0,a.Lk)("div",f,[(0,a.Lk)("div",_,[(0,a.bF)(E)]),(0,a.Lk)("div",b,[(0,a.Lk)("div",v,[e.image?((0,a.uX)(),(0,a.CE)("div",w,[(0,a.bF)(U,{ref:"pdfRef",source:e.image,style:{"max-height":"72vh"},page:e.page,onRendered:t[7]||(t[7]=t=>e.getRef())},null,8,["source","page"])])):e.loading?((0,a.uX)(),(0,a.CE)("div",y,F)):((0,a.uX)(),(0,a.CE)("div",A,[(0,a.bF)(I,{color:"red",size:"250px","font-size":"50px","text-color":"white"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.bF)(q,{name:"warning"})]),x])),_:1})]))]),(0,a.bF)(B,{modelValue:e.show_popup,"onUpdate:modelValue":t[8]||(t[8]=t=>e.show_popup=t),onKeydown:t[9]||(t[9]=(0,i.jR)((t=>e.show_popup=!1),["esc"]))},{default:(0,a.k6)((()=>[(0,a.bF)(P,{doc:e.image,pageCount:e.pageCount,filedata:e.filedata,mode:"split_only"},null,8,["doc","pageCount","filedata"])])),_:1},8,["modelValue"]),(0,a.bF)(B,{modelValue:e.confirm,"onUpdate:modelValue":t[10]||(t[10]=t=>e.confirm=t),onKeydown:t[11]||(t[11]=(0,i.jR)((t=>e.confirm=!1),["esc"])),style:{width:"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(z,{style:{width:"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(X,{class:"row items-center"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{icon:"delete",color:"red","text-color":"white"}),(0,a.Lk)("span",V,(0,n.v_)(e.$t("doc2light.descriptions.confirm_delete")+" ("+e.$t("doc2light.pages.document")+")"),1)])),_:1}),(0,a.bF)(M,{align:"right"},{default:(0,a.k6)((()=>[(0,a.bF)(W),(0,a.bF)(j,{label:e.$t("doc2light.popups.accept"),onClick:e.deleteDoc},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])}var R=o(24622),L=o(38734),K=o(18505),Q=o(36246),q=o(63008),D=o(1659),$=o(46162);const T={align:"center"},S={class:"text-left"},E={class:"text-left",style:{height:"49vh"}},U={class:"text-left"},I={class:"text-left",style:{"margin-left":"5%"}};function P(e,t,o,n,i,l){const d=(0,a.g2)("q-btn-toggle"),s=(0,a.g2)("Details"),r=(0,a.g2)("q-carousel-slide"),c=(0,a.g2)("Content"),u=(0,a.g2)("MetaData"),p=(0,a.g2)("TimeLine"),m=(0,a.g2)("q-carousel");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",T,[(0,a.bF)(d,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),unelevated:"",style:{"margin-bottom":"10px"},options:[{label:e.$t("doc2light.pages.details"),value:"details"},{label:e.$t("doc2light.pages.content"),value:"content"},{label:e.$t("doc2light.pages.metadata"),value:"metadata"},{label:e.$t("doc2light.pages.timeline"),value:"timeline"}]},null,8,["modelValue","options"])]),(0,a.bF)(m,{animated:"",modelValue:e.show,"onUpdate:modelValue":t[1]||(t[1]=t=>e.show=t),infinite:"",id:"view-left",style:{height:"95%"},"transition-prev":"jump-right","transition-next":"jump-left"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{name:"details"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",S,[(0,a.bF)(s)])])),_:1}),(0,a.bF)(r,{name:"content"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",E,[(0,a.bF)(c)])])),_:1}),(0,a.bF)(r,{name:"metadata"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",U,[(0,a.bF)(u)])])),_:1}),(0,a.bF)(r,{name:"timeline"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",I,[(0,a.bF)(p)])])),_:1})])),_:1},8,["modelValue"])],64)}const B={class:"text-left",style:{"margin-left":"2%"}},X={style:{"margin-top":"10px"}},W={style:{"margin-top":"10px"}},j={style:{"margin-top":"10px"}},M={style:{"margin-top":"10px"}},z={style:{"margin-top":"10px"}},O={style:{"margin-top":"10px"}},H={style:{"margin-top":"10px"}},N={style:{"margin-top":"2vh"},align:"center"};function Y(e,t,o,l,d,s){const r=(0,a.g2)("q-input"),c=(0,a.g2)("q-icon"),u=(0,a.g2)("q-select"),p=(0,a.g2)("q-chip"),m=(0,a.g2)("q-item-label"),h=(0,a.g2)("q-item-section"),g=(0,a.g2)("q-item"),f=(0,a.g2)("CancelBtn"),_=(0,a.g2)("SaveBtn"),b=(0,a.g2)("EditCreatePopup"),v=(0,a.g2)("q-dialog"),w=(0,a.g2)("TagsEditCreate");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",B,[(0,a.Lk)("div",X,[(0,a.eW)((0,n.v_)(e.$t("doc2light.table.title"))+" ",1),(0,a.bF)(r,{outlined:"",style:{width:"97%"},dense:"",modelValue:e.doc_information["name"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.doc_information["name"]=t)},null,8,["modelValue"])]),(0,a.Lk)("div",W,[(0,a.eW)((0,n.v_)(e.$t("doc2light.table.asn"))+" ",1),(0,a.bF)(r,{outlined:"",style:{width:"97%"},dense:"",modelValue:e.doc_information["asi"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.doc_information["asi"]=t)},null,8,["modelValue"])]),(0,a.Lk)("div",j,[(0,a.eW)((0,n.v_)(e.$t("doc2light.table.created_on"))+" ",1),(0,a.bF)(r,{outlined:"",style:{width:"97%"},dense:"",readonly:"",modelValue:e.doc_information["created_on"],"onUpdate:modelValue":t[2]||(t[2]=t=>e.doc_information["created_on"]=t)},null,8,["modelValue"])]),(0,a.Lk)("div",M,[(0,a.eW)((0,n.v_)(e.$t("doc2light.pages.assignee"))+" ",1),(0,a.bF)(u,{"virtual-scroll-item-size":"10",outlined:"",style:{width:"97%"},dense:"",modelValue:e.doc_information["correspondent"],"onUpdate:modelValue":t[6]||(t[6]=t=>e.doc_information["correspondent"]=t),options:e.correspondents},{after:(0,a.k6)((()=>[(0,a.bF)(c,{name:"add_box",size:"2vh",onClick:t[3]||(t[3]=t=>e.show_popup["corresp"]=!0),style:{cursor:"pointer"}})])),append:(0,a.k6)((()=>[(0,a.bF)(c,{onClick:[t[4]||(t[4]=(0,i.D$)((()=>{}),["stop","prevent"])),t[5]||(t[5]=t=>e.doc_information["correspondent"]="")],name:"delete",size:"2vh",style:{cursor:"pointer"}})])),_:1},8,["modelValue","options"])]),(0,a.Lk)("div",z,[(0,a.eW)((0,n.v_)(e.$t("doc2light.pages.doc_type"))+" ",1),(0,a.bF)(u,{outlined:"",style:{width:"97%"},dense:"",modelValue:e.doc_information["doc_type"],"onUpdate:modelValue":t[10]||(t[10]=t=>e.doc_information["doc_type"]=t),options:e.doc_types},{after:(0,a.k6)((()=>[(0,a.bF)(c,{name:"add_box",size:"2vh",onClick:t[7]||(t[7]=t=>e.show_popup["doctype"]=!0),style:{cursor:"pointer"}})])),append:(0,a.k6)((()=>[(0,a.bF)(c,{onClick:[t[8]||(t[8]=(0,i.D$)((()=>{}),["stop","prevent"])),t[9]||(t[9]=t=>e.doc_information["doc_type"]="")],name:"delete",size:"2vh",style:{cursor:"pointer"}})])),_:1},8,["modelValue","options"])]),(0,a.Lk)("div",O,[(0,a.eW)((0,n.v_)(e.$t("doc2light.pages.tags"))+" ",1),(0,a.bF)(u,{outlined:"",multiple:!0,style:{width:"97%"},"use-chips":"",dense:"",modelValue:e.doc_information["tags"],"onUpdate:modelValue":t[12]||(t[12]=t=>e.doc_information["tags"]=t),options:e.tags},{option:(0,a.k6)((t=>[(0,a.bF)(g,(0,n._B)((0,a.Ng)(t.itemProps)),{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:(0,n.Tr)({"background-color":t.opt.color,color:e.color_check(t.opt.color)})},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(t.opt.label),1)])),_:2},1032,["style"])])),_:2},1024)])),_:2},1024)])),_:2},1040)])),after:(0,a.k6)((()=>[(0,a.bF)(c,{name:"add_box",size:"2vh",onClick:t[11]||(t[11]=t=>e.show_popup["tags"]=!0),style:{cursor:"pointer"}})])),_:1},8,["modelValue","options"])]),(0,a.Lk)("div",H,[(0,a.eW)((0,n.v_)(e.$t("doc2light.popups.save_location"))+" ",1),(0,a.bF)(r,{outlined:"",style:{width:"97%"},dense:"",readonly:"",placeholder:e.$t("doc2light.popups.save_location")},null,8,["placeholder"])]),(0,a.Lk)("div",N,[(0,a.bF)(f,{style:{"margin-right":"2vw"},onClick:t[13]||(t[13]=t=>e.$router.push("/alfred/dashboard"))}),(0,a.bF)(_,{onClick:t[14]||(t[14]=t=>e.saveAndNext()),style:{"margin-right":"2vw"},label:e.$t("doc2light.pages.save_continue")},null,8,["label"]),(0,a.bF)(_,{onClick:t[15]||(t[15]=t=>e.saveAndBack())})])]),(0,a.bF)(v,{modelValue:e.show_popup["corresp"],"onUpdate:modelValue":t[16]||(t[16]=t=>e.show_popup["corresp"]=t),onKeydown:t[17]||(t[17]=(0,i.jR)((t=>(e.show_popup["corresp"]=!1,e.initView())),["esc"]))},{default:(0,a.k6)((()=>[(0,a.bF)(b,{show:"corresp",mode:"create"})])),_:1},8,["modelValue"]),(0,a.bF)(v,{modelValue:e.show_popup["doctype"],"onUpdate:modelValue":t[18]||(t[18]=t=>e.show_popup["doctype"]=t),onKeydown:t[19]||(t[19]=(0,i.jR)((t=>(e.show_popup["doctype"]=!1,e.initView())),["esc"]))},{default:(0,a.k6)((()=>[(0,a.bF)(b,{show:"doctype",mode:"create"})])),_:1},8,["modelValue"]),(0,a.bF)(v,{modelValue:e.show_popup["tags"],"onUpdate:modelValue":t[20]||(t[20]=t=>e.show_popup["tags"]=t),onKeydown:t[21]||(t[21]=(0,i.jR)((t=>(e.show_popup["tags"]=!1,e.initView())),["esc"]))},{default:(0,a.k6)((()=>[(0,a.bF)(w,{mode:"create"})])),_:1},8,["modelValue"])],64)}var G=o(5255),J=o(99976),Z=o(77670),ee=o(65471),te=o(34300),oe=function(e,t,o,a){function n(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function l(e){try{s(a.next(e))}catch(t){i(t)}}function d(e){try{s(a["throw"](e))}catch(t){i(t)}}function s(e){e.done?o(e.value):n(e.value).then(l,d)}s((a=a.apply(e,t||[])).next())}))};const ae=(0,a.pM)({data(){return{showIcons:!1,supportURL:$.cK}},components:{EditCreatePopup:Z.A,TagsEditCreate:ee.A,SaveBtn:G.A,CancelBtn:J.A},mixins:[K.A,R.A],mounted(){this.initView()},methods:{color_check(e){if(null==e)return"black";var t=e.substring(1),o=parseInt(t,16),a=o>>16&255,n=o>>8&255,i=255&o,l=.2126*a+.7152*n+.0722*i;return l<40?"white":"black"},initView(){this.setupDropdowns(),this.taglist=[];var e=this.$route.params.id;if(this.doc_information=this.apidata.documentData.documents[e],this.doc_information["created_on"]=this.formateDate(this.doc_information["created_on"],"YY-MM-DD HH:mm:ss"),this.doc_index=Object.keys(this.apidata.documentData.documents).indexOf(e),this.doc_information["correspondent"])for(const[t,o]of Object.entries(this.apidata.correspondentData.data))o.id==this.doc_information["correspondent"].id&&(this.doc_information["correspondent"]=o,this.doc_information["correspondent"]["label"]=o.name);else this.doc_information["correspondent"]="";if(this.doc_information["doc_type"])for(const[t,o]of Object.entries(this.apidata.docTypeData.data))o.id==this.doc_information["doc_type"].id&&(this.doc_information["doc_type"]=o,this.doc_information["doc_type"]["label"]=o.name);else this.doc_information["doc_type"]="";this.doc_information["tags"].length>0?(this.doc_information["tags"].forEach((e=>{let t=this.apidata.tagData.data[e.value];t.value=t.id,t.label=t.name,this.taglist.push(t)})),this.doc_information["tags"]=this.taglist):this.doc_information["tags"]=[]},setupDropdowns(){for(const[e,t]of Object.entries(this.apidata.correspondentData.data))this.correspondents.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.docTypeData.data))this.doc_types.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.tagData.data))this.tags.push({value:t.id,label:t.name,color:t.color})},saveAndBack(){return oe(this,void 0,void 0,(function*(){yield this.saveDoc(),this.$router.push("/alfred/dashboard")}))},saveDoc(){return oe(this,void 0,void 0,(function*(){let e="";this.doc_information["tags"].forEach((t=>{e+=t.value+","})),yield te.QR.update_doc(this.doc_information.id,this.doc_information.name,this.doc_information.asi,this.doc_information["correspondent"].value,this.doc_information["doc_type"].value,e)}))},saveAndNext(){return oe(this,void 0,void 0,(function*(){yield this.saveDoc(),Object.entries(this.apidata.documentData.documents).forEach(((e,t)=>{t==this.doc_index+1&&this.$router.push("/alfred/document/"+e[0])}))}))},formateDate(e,t){return Q.Ay.formatDate(e,t)}},setup(){const e=(0,q.GX)(),t=(0,D.bP)(e),{setDocTypesfromServer:o,setCorrespondentsFromServer:a,setTagsFromServer:n,loadFromServer:i}=e;return{loadFromServer:i,apidata:(0,L.KR)(t),setDocTypesfromServer:o,setCorrespondentsFromServer:a,setTagsFromServer:n,show_popup:(0,L.KR)({}),doc_information:(0,L.KR)({}),doc:(0,L.KR)(),taglist:(0,L.KR)([]),doc_index:(0,L.KR)(),correspondents:(0,L.KR)([]),doc_types:(0,L.KR)([]),tags:(0,L.KR)([])}}});var ne=o(12807),ie=o(67837),le=o(94940),de=o(50492),se=o(90124),re=o(25173),ce=o(13796),ue=o(66760),pe=o(82156),me=o(98582),he=o.n(me);const ge=(0,ne.A)(ae,[["render",Y],["__scopeId","data-v-22c3930a"]]),fe=ge;function _e(e,t,o,l,d,s){const r=(0,a.g2)("q-space"),c=(0,a.g2)("q-icon"),u=(0,a.g2)("q-input"),p=(0,a.g2)("q-td"),m=(0,a.g2)("q-tr"),h=(0,a.g2)("q-table"),g=(0,a.g2)("AddRow"),f=(0,a.g2)("q-dialog"),_=(0,a.g2)("EditRow");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(h,{dense:"",id:"metadata-table",class:(0,n.C4)("main-table"),rows:e.document_metadata,columns:e.column,"no-data-label":e.$t("pages.messages.no_record_found"),"rows-per-page-options":[0],"row-key":"name",filter:e.filter,flat:""},{top:(0,a.k6)((()=>[(0,a.bF)(r),(0,a.bF)(u,{class:"width-500",dense:"",outlined:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),label:e.$t("search_by_column")},{append:(0,a.k6)((()=>[(0,a.bF)(c,{name:"search"})])),_:1},8,["modelValue","label"])])),body:(0,a.k6)((e=>[(0,a.bF)(m,{props:e,id:e.key},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.cols,(t=>((0,a.uX)(),(0,a.Wv)(p,{key:t.name},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row[t.name]),1)])),_:2},1024)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","no-data-label","filter"]),(0,a.bF)(f,{modelValue:e.show_create_dialog,"onUpdate:modelValue":t[1]||(t[1]=t=>e.show_create_dialog=t),onKeydown:t[2]||(t[2]=(0,i.jR)((t=>e.show_create_dialog=!1),["esc"]))},{default:(0,a.k6)((()=>[(0,a.bF)(g)])),_:1},8,["modelValue"]),(0,a.bF)(f,{modelValue:e.show_edit_dialog,"onUpdate:modelValue":t[3]||(t[3]=t=>e.show_edit_dialog=t),onKeydown:t[4]||(t[4]=(0,i.jR)((t=>e.show_edit_dialog=!1),["esc"]))},{default:(0,a.k6)((()=>[(0,a.bF)(_)])),_:1},8,["modelValue"])],64)}he()(ae,"components",{QInput:ie.A,QSelect:le.A,QIcon:de.A,QItem:se.A,QItemSection:re.A,QItemLabel:ce.A,QChip:ue.A,QDialog:pe.A});const be={class:"text-weight-bold"},ve={class:"row full-width mb-10 mt-8"},we={class:"full-width"},ye={class:"create-edit-card-row-element"},ke=(0,a.Lk)("div",{class:"create-edit-card-row-key-element"},"Key",-1),Fe={class:"create-edit-card-row-element"},Ae=(0,a.Lk)("div",{class:"create-edit-card-row-key-element"},"Value",-1);function xe(e,t,o,i,l,d){const s=(0,a.g2)("q-toolbar-title"),r=(0,a.g2)("q-btn"),c=(0,a.g2)("q-toolbar"),u=(0,a.g2)("q-input"),p=(0,a.g2)("q-card-section"),m=(0,a.g2)("SaveBtn"),h=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-card"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{class:"create-edit-card"},{default:(0,a.k6)((()=>[(0,a.Lk)("form",null,[(0,a.bF)(c,{class:"text-white secondary-toolbar"},{default:(0,a.k6)((()=>[(0,a.bF)(s,null,{default:(0,a.k6)((()=>[(0,a.Lk)("span",be,(0,n.v_)(e.$t("pages.settings.master_data_lookup.add_row")),1)])),_:1}),(0,a.bo)((0,a.bF)(r,{flat:"",round:"",dense:"",icon:"close"},null,512),[[f]])])),_:1}),(0,a.bF)(p,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ve,[(0,a.Lk)("div",we,[(0,a.Lk)("div",ye,[ke,(0,a.bF)(u,{type:"text",outlined:"",modelValue:e.add_row["key"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.add_row["key"]=t),filled:"",key:""},null,8,["modelValue"])]),(0,a.Lk)("div",Fe,[Ae,(0,a.bF)(u,{type:"text",outlined:"",modelValue:e.add_row["value"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.add_row["value"]=t),filled:""},null,8,["modelValue"])])])])])),_:1}),(0,a.bF)(h,{align:"right"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{class:"bg-grey-3",label:e.$t("cancel")},null,8,["label"]),[[f]]),(0,a.bF)(m)])),_:1})])])),_:1})}const Ve=(0,a.pM)({el:"#app",mixins:[K.A,R.A],props:{},components:{SaveBtn:G.A},data(){return{}},setup(){return{add_row:(0,L.KR)({})}},methods:{initEditCreate(){}}});var Ce=o(23316),Re=o(36914),Le=o(39150),Ke=o(56384),Qe=o(44189),qe=o(62669),De=o(88672);const $e=(0,ne.A)(Ve,[["render",xe]]),Te=$e;he()(Ve,"components",{QCard:Ce.A,QToolbar:Re.A,QToolbarTitle:Le.A,QBtn:Ke.A,QCardSection:Qe.A,QInput:ie.A,QCardActions:qe.A}),he()(Ve,"directives",{ClosePopup:De.A});const Se={class:"text-weight-bold"},Ee={class:"row full-width mb-10 mt-8"},Ue={class:"full-width"},Ie={class:"create-edit-card-row-element"},Pe=(0,a.Lk)("div",{class:"create-edit-card-row-key-element"},"Key",-1),Be={class:"create-edit-card-row-element"},Xe=(0,a.Lk)("div",{class:"create-edit-card-row-key-element"},"Value",-1);function We(e,t,o,i,l,d){const s=(0,a.g2)("q-toolbar-title"),r=(0,a.g2)("q-toolbar"),c=(0,a.g2)("q-input"),u=(0,a.g2)("q-card-section"),p=(0,a.g2)("q-btn"),m=(0,a.g2)("SaveBtn"),h=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-card"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{class:"create-edit-card"},{default:(0,a.k6)((()=>[(0,a.Lk)("form",null,[(0,a.bF)(r,{class:"text-white secondary-toolbar"},{default:(0,a.k6)((()=>[(0,a.bF)(s,null,{default:(0,a.k6)((()=>[(0,a.Lk)("span",Se,(0,n.v_)(e.$t("pages.settings.master_data_lookup.edit_row")),1)])),_:1})])),_:1}),(0,a.bF)(u,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ee,[(0,a.Lk)("div",Ue,[(0,a.Lk)("div",Ie,[Pe,(0,a.bF)(c,{type:"text",outlined:"",modelValue:e.edit_row["key"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.edit_row["key"]=t),filled:""},null,8,["modelValue"])]),(0,a.Lk)("div",Be,[Xe,(0,a.bF)(c,{type:"text",outlined:"",modelValue:e.edit_row["value"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.edit_row["value"]=t),filled:""},null,8,["modelValue"])])])])])),_:1}),(0,a.bF)(h,{align:"right"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(p,{class:"bg-grey-3",label:e.$t("cancel")},null,8,["label"]),[[f]]),(0,a.bF)(m)])),_:1})])])),_:1})}const je=(0,a.pM)({el:"#app",mixins:[K.A,R.A],props:{},components:{SaveBtn:G.A},data(){return{}},setup(){return{edit_row:(0,L.KR)({})}},methods:{}}),Me=(0,ne.A)(je,[["render",We]]),ze=Me;he()(je,"components",{QCard:Ce.A,QToolbar:Re.A,QToolbarTitle:Le.A,QCardSection:Qe.A,QInput:ie.A,QCardActions:qe.A,QBtn:Ke.A}),he()(je,"directives",{ClosePopup:De.A});const Oe=(0,a.pM)({el:"#app",mixins:[K.A,R.A],props:["showSpinner"],components:{AddRow:Te,EditRow:ze},data(){return{}},mounted(){const e=this.$route.params.id;let t=this.apidata.documentData.documents[e];Object.keys(t.metadata).forEach((e=>{"created-on"==e||"modified-on"==e?this.document_metadata.push({key:e,value:this.formateDate(t.metadata[e],"YYYY-MM-DD HH:mm:ss")}):this.document_metadata.push({key:e,value:t.metadata[e]})}))},methods:{openAddDialog(){this.show_create_dialog=!0},openEditDialog(){this.show_edit_dialog=!0},formateDate(e,t){return Q.Ay.formatDate(e,t)},deleteRowLocal(e){alert(e)}},setup(){let e=[];e.push({name:"key",label:"Key",field:"key",align:"left"}),e.push({name:"value",label:"Value",field:"value",align:"left"});let t=[];const o=(0,q.GX)(),a=(0,D.bP)(o);return{document_metadata:(0,L.KR)(t),apidata:(0,L.KR)(a),column:(0,L.KR)(e),filter:(0,L.KR)(""),show_create_dialog:(0,L.KR)(!1),show_edit_dialog:(0,L.KR)(!1)}}});var He=o(42315),Ne=o(93676),Ye=o(44488),Ge=o(45262),Je=o(97410);const Ze=(0,ne.A)(Oe,[["render",_e],["__scopeId","data-v-29b0b486"]]),et=Ze;he()(Oe,"components",{QTable:He.A,QBtn:Ke.A,QSpace:Ne.A,QInput:ie.A,QIcon:de.A,QTr:Ye.A,QTd:Ge.A,QTooltip:Je.A,QDialog:pe.A});const tt={class:"q-px-lg q-pb-md"};function ot(e,t,o,n,i,l){const d=(0,a.g2)("q-timeline-entry"),s=(0,a.g2)("q-timeline");return(0,a.uX)(),(0,a.CE)("div",tt,[(0,a.bF)(s,{color:"secondary",style:{"overflow-y":"auto",height:"55vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{heading:"",body:e.$t("doc2light.pages.timeline")},null,8,["body"]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.data,((t,o)=>((0,a.uX)(),(0,a.Wv)(d,{key:o,style:{"white-space":"pre-line"},title:t.data,subtitle:t.user+"\n"+e.formateDate(this.modified_at,"HH:mm:ss")},null,8,["title","subtitle"])))),128))])),_:1})])}var at=function(e,t,o,a){function n(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function l(e){try{s(a.next(e))}catch(t){i(t)}}function d(e){try{s(a["throw"](e))}catch(t){i(t)}}function s(e){e.done?o(e.value):n(e.value).then(l,d)}s((a=a.apply(e,t||[])).next())}))};const nt=(0,a.pM)({data(){return{}},components:{},mixins:[K.A,R.A],mounted(){this.getTimeLineData()},methods:{getTimeLineData(){return at(this,void 0,void 0,(function*(){const e=this.$route.params.id,t=yield this.get_by_id(e),o=t;this.data=o.doc.timeline,this.modified_at=o.doc.last_modified}))},formateDate(e,t){return Q.Ay.formatDate(e,t)}},setup(){const e=(0,q.IO)(),{get_by_id:t}=((0,D.bP)(e),e);return{get_by_id:t,data:(0,L.KR)({}),modified_at:(0,L.KR)()}}});var it=o(96364),lt=o(28354);const dt=(0,ne.A)(nt,[["render",ot]]),st=dt;he()(nt,"components",{QTimeline:it.A,QTimelineEntry:lt.A});const rt={class:"text-left",style:{"margin-left":"2%"}};function ct(e,t,o,n,i,l){const d=(0,a.g2)("q-input");return(0,a.uX)(),(0,a.CE)("div",rt,[(0,a.bF)(d,{class:"highlighted-back",style:{"overflow-y":"auto",width:"97%"},readonly:"",outlined:"",dense:"",autogrow:"",modelValue:e.doc_content[0],"onUpdate:modelValue":t[0]||(t[0]=t=>e.doc_content[0]=t)},null,8,["modelValue"])])}var ut=function(e,t,o,a){function n(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function l(e){try{s(a.next(e))}catch(t){i(t)}}function d(e){try{s(a["throw"](e))}catch(t){i(t)}}function s(e){e.done?o(e.value):n(e.value).then(l,d)}s((a=a.apply(e,t||[])).next())}))};const pt=(0,a.pM)({data(){return{}},components:{},mixins:[K.A,R.A],methods:{getOcrText(){return ut(this,void 0,void 0,(function*(){var e=this.$route.params.id;const t=yield te.QR.get_doc_text(e);this.doc_content.push(t.data.text)}))}},mounted(){this.getOcrText()},setup(){return{doc_content:(0,L.KR)([])}}}),mt=(0,ne.A)(pt,[["render",ct]]),ht=mt;he()(pt,"components",{QInput:ie.A});const gt=(0,a.pM)({data(){return{showIcons:!1,supportURL:$.cK}},components:{Details:fe,MetaData:et,TimeLine:st,Content:ht},mixins:[K.A,R.A],methods:{},setup(){return{show:(0,L.KR)("details"),show_popup:(0,L.KR)({})}}});var ft=o(28975),_t=o(49652),bt=o(8951);const vt=(0,ne.A)(gt,[["render",P]]),wt=vt;he()(gt,"components",{QBtnToggle:ft.A,QCarousel:_t.A,QCarouselSlide:bt.A});var yt=o(97912),kt=o(82303),Ft=o(39822),At=o(85487),xt=function(e,t,o,a){function n(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function l(e){try{s(a.next(e))}catch(t){i(t)}}function d(e){try{s(a["throw"](e))}catch(t){i(t)}}function s(e){e.done?o(e.value):n(e.value).then(l,d)}s((a=a.apply(e,t||[])).next())}))};const Vt=(0,a.pM)({data(){return{}},components:{CancelBtn:J.A,SaveBtn:G.A,Document_View_Left:wt,VuePdfEmbed:yt.A,DocSplit:Ft.A},mixins:[K.A,R.A],mounted(){const e=this.$route.params.id;this.doc=this.apidata.documentData.documents[e],this.imageHandler()},methods:{changePage(e){Number(e)<=this.pageCount?(this.inputPage=e,this.page=Number(e)):this.showErrorToast("Select a valid page")},imageHandler(){return xt(this,void 0,void 0,(function*(){var e=this.$route.params.id;const t=yield(0,$.L3)();this.loading=!0;try{const o=yield kt.A.get((0,At.MV)($.FH.download_doc+"/"+e),{responseType:"blob",headers:{Authorization:t}});this.filedata=o.data,this.image=URL.createObjectURL(new Blob([o.data,e+".pdf",o.headers["content-type"]]))}catch(o){this.showErrorToast("There was an issue getting the pdf")}this.loading=!1}))},getRef(){this.pageCount=this.$refs["pdfRef"].pageCount},formateDate(e,t){return Q.Ay.formatDate(e,t)},deleteDoc(){var e=this.$route.params.id;this.delete_doc(e),this.$router.push("/alfred/dashboard")},onDownloadClick(){return xt(this,void 0,void 0,(function*(){const e=this.$route.params.id;yield te.QR.download_doc(e).then((e=>{var t=document.createElement("a");this.doc["name"].endsWith(".pdf")?t.download=this.doc["name"]:t.download=this.doc["name"]+".pdf",t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}))}))}},setup(){const e=(0,q.GX)(),t=(0,D.bP)(e),{delete_doc:o,loadFromServer:a}=e;return{loadFromServer:a,docId:(0,L.KR)(""),apidata:(0,L.KR)(t),delete_doc:o,filter:(0,L.KR)(""),view:(0,L.KR)("list"),doc:(0,L.KR)({}),showMenu:(0,L.KR)(!1),showIcons:(0,L.KR)(!0),confirm:(0,L.KR)(!1),loading:(0,L.KR)(!1),show:(0,L.KR)("details"),show_popup:(0,L.KR)({}),image:(0,L.KR)(""),page:(0,L.KR)(1),pageCount:(0,L.KR)(1),inputPage:(0,L.KR)(1),filedata:(0,L.KR)()}}});var Ct=o(10386),Rt=o(84436),Lt=o(53999),Kt=o(3952);const Qt=(0,ne.A)(Vt,[["render",C],["__scopeId","data-v-6f2032c7"]]),qt=Qt;he()(Vt,"components",{QSeparator:Ct.A,QInput:ie.A,QBtn:Ke.A,QMenu:Rt.A,QList:Lt.A,QItem:se.A,QTooltip:Je.A,QItemSection:re.A,QIcon:de.A,QAvatar:Kt.A,QDialog:pe.A,QCard:Ce.A,QCardSection:Qe.A,QCardActions:qe.A}),he()(Vt,"directives",{ClosePopup:De.A})}}]);