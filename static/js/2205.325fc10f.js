"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[2205],{42205:(e,t,o)=>{o.r(t),o.d(t,{default:()=>le});var s=o(61758),i=o(58790),l=o(29104);const a=e=>((0,s.Qi)("data-v-5984d6bc"),e=e(),(0,s.jt)(),e),n={class:"main-buttons"},d={class:"col-12 q-pb-md workflow-height-limit"},r={class:"table-header-text"},c={class:"text-fields header-row"},u={class:"text-fields header-row"},h={class:"text-fields header-row",style:{"text-align":"right"}},m=["onClick"],p={key:0,class:"text-fields"},b={key:1,class:"text-fields"},g={key:2,class:"text-fields",style:{"text-align":"right"}},f={class:"text-red"},y={class:"text-weight-bold",style:{"text-align":"center","font-size":"large"}},k={class:"text-weight-bold"},_={class:"input-fields",style:{"margin-bottom":"10px"}},T=a((()=>(0,s.Lk)("img",{src:"settings/export.svg",width:"100","aria-hidden":"true"},null,-1))),w={style:{"margin-top":"10px"}},F={class:"text-white"};function v(e,t,o,a,v,D){const E=(0,s.g2)("SubHeader"),L=(0,s.g2)("q-icon"),x=(0,s.g2)("q-input"),A=(0,s.g2)("f-btn"),C=(0,s.g2)("BackToSettings"),K=(0,s.g2)("Loader"),Q=(0,s.g2)("q-item-section"),q=(0,s.g2)("q-item"),V=(0,s.g2)("q-separator"),$=(0,s.g2)("q-list"),N=(0,s.g2)("q-menu"),R=(0,s.g2)("q-btn"),S=(0,s.g2)("q-markup-table"),I=(0,s.g2)("q-toolbar-title"),M=(0,s.g2)("q-toolbar"),B=(0,s.g2)("q-select"),P=(0,s.g2)("q-card-section"),U=(0,s.g2)("q-card-actions"),X=(0,s.g2)("q-card"),j=(0,s.g2)("q-dialog"),z=(0,s.g2)("q-tooltip"),H=(0,s.g2)("q-file"),O=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(E,{name:"dashboard",label:e.$t("decision_trees"),show_expiry_alert:!0,display_help_link:!1,onSearch:!1},null,8,["label"]),(0,s.bF)(C,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",n,[(0,s.bF)(x,{modelValue:e.searchBy,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.searchBy=t),t[1]||(t[1]=t=>e.inputValueChanges(e.searchBy))],dense:"",class:(0,i.C4)(0===e.searchBy.length?"search-in-active":"search-active"),autofocus:"",placeholder:e.$t("search_decision_tree"),outlined:""},{append:(0,s.k6)((()=>[(0,s.bF)(L,{flat:"",dense:"",name:"search",size:"24px",color:"primary"})])),_:1},8,["modelValue","class","placeholder"]),(0,s.bF)(A,{icon:"add",label:e.$t("add_decision_tree"),class:"main-button",onClick:t[2]||(t[2]=t=>e.dialog=!0)},null,8,["label"]),(0,s.bF)(A,{icon:"file_upload",label:e.$t("import_decision_tree"),class:"main-button",onClick:t[3]||(t[3]=t=>e.uploadDialog=!0)},null,8,["label"])])])),_:1}),(0,s.bF)(K),(0,s.Lk)("div",d,[(0,s.bF)(S,{flat:"",class:"workflow-table-style",style:{margin:"20px","margin-top":"10px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",r,[(0,s.Lk)("th",c,(0,i.v_)(e.$t("name")),1),(0,s.Lk)("th",u,(0,i.v_)(e.$t("document_type")),1),(0,s.Lk)("th",h,(0,i.v_)(e.$t("actions")),1)])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.tableData,((o,a)=>((0,s.uX)(),(0,s.CE)("tr",{class:"cursor-pointer workflow-name",key:a,onClick:t=>e.openTreeDesigner(o)},[o.name.includes(e.decisionTableName)?((0,s.uX)(),(0,s.CE)("td",p,[(0,s.Lk)("span",{style:{"font-size":"16px"},class:(0,i.C4)(1==o.enabled?"disabled-name":"enabled-name")},(0,i.v_)(o.name),3)])):(0,s.Q3)("",!0),o.name.includes(e.decisionTableName)?((0,s.uX)(),(0,s.CE)("td",b,[(0,s.Lk)("span",{style:{"font-size":"16px"},class:(0,i.C4)(1==o.enabled?"disabled-name":"enabled-name")},(0,i.v_)(o.doc_type),3)])):(0,s.Q3)("",!0),o.name.includes(e.decisionTableName)?((0,s.uX)(),(0,s.CE)("td",g,[(0,s.bF)(R,{flat:"",dense:"",round:"",onClick:t[4]||(t[4]=(0,l.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,s.k6)((()=>[(0,s.bF)(N,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,s.k6)((()=>[(0,s.bF)($,{dense:"",style:{"min-width":"100px"}},{default:(0,s.k6)((()=>[(0,s.bF)(q,{clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(Q,{onClick:t=>e.openEditTreeDialog(o)},{default:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,i.v_)(e.$t("edit")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,s.bF)(V,{inset:""}),(0,s.bF)(q,{clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(Q,{onClick:t=>{e.confirmDelete=!0,e.selectedRecordIndex=a,e.deleteTable(o.id)}},{default:(0,s.k6)((()=>[(0,s.Lk)("span",f,(0,i.v_)(e.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])):(0,s.Q3)("",!0)],8,m)))),128))])])),_:1}),(0,s.bF)(j,{modelValue:e.dialog,"onUpdate:modelValue":t[7]||(t[7]=t=>e.dialog=t),onHide:e.resetFields,onEscapeKey:e.closeDialog},{default:(0,s.k6)((()=>[(0,s.bF)(X,{class:"card"},{default:(0,s.k6)((()=>[(0,s.bF)(M,{class:"bg-primary"},{default:(0,s.k6)((()=>[(0,s.bF)(I,{class:"text-white"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",y,(0,i.v_)(e.isEditMode?e.$t("edit_tree"):e.$t("create_new_tree")),1)])),_:1}),(0,s.bo)((0,s.bF)(A,{icon:"close",onClick:e.closeDialog},null,8,["onClick"]),[[O]])])),_:1}),(0,s.bF)(P,{class:"row"},{default:(0,s.k6)((()=>[(0,s.bF)(x,{modelValue:e.decisionTableName,"onUpdate:modelValue":t[5]||(t[5]=t=>e.decisionTableName=t),placeholder:"Decision Tree Name",dense:"",outlined:"",error:e.decisionTableNameError,"error-message":e.$t("field_required"),class:"col-12 card-padding"},null,8,["modelValue","error","error-message"]),(0,s.bF)(B,{modelValue:e.selectedDocumentKey,"onUpdate:modelValue":t[6]||(t[6]=t=>e.selectedDocumentKey=t),options:e.documentList,label:"Document Type",dense:"",outlined:"",class:"col-12 card-padding",error:e.documentKeyError,"error-message":e.$t("field_required"),"menu-anchor":"bottom left","menu-self":"top left","transition-show":"jump-down","transition-hide":"jump-up"},null,8,["modelValue","options","error","error-message"])])),_:1}),(0,s.bF)(U,{align:"right"},{default:(0,s.k6)((()=>[(0,s.bF)(A,{flat:"",label:e.$t("cancel"),onClick:e.closeDialog,appearance:"cancel"},null,8,["label","onClick"]),(0,s.bF)(A,{flat:"",label:e.$t("save"),onClick:e.validateAndSubmit,class:"q-mr-sm"},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onHide","onEscapeKey"]),(0,s.bF)(j,{modelValue:e.uploadDialog,"onUpdate:modelValue":t[9]||(t[9]=t=>e.uploadDialog=t)},{default:(0,s.k6)((()=>[(0,s.bF)(X,{style:{width:"20vw",height:"30vh"}},{default:(0,s.k6)((()=>[(0,s.bF)(M,{class:"text-white secondary-toolbar"},{default:(0,s.k6)((()=>[(0,s.bF)(I,null,{default:(0,s.k6)((()=>[(0,s.Lk)("span",k,(0,i.v_)(e.$t("import_decision_tree")),1)])),_:1}),(0,s.bo)((0,s.bF)(R,{flat:"",round:"",dense:"",icon:"close"},null,512),[[O]])])),_:1}),(0,s.bF)(P,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",_,[T,(0,s.Lk)("div",w,(0,i.v_)(e.$t("import_field_decision_tree")),1)]),(0,s.bF)(H,{color:"white","data-cy":"upload-multiple-docs","label-color":"white",outlined:"","onUpdate:modelValue":[e.uploadFile,t[8]||(t[8]=t=>e.uploadedFile=t)],modelValue:e.uploadedFile,label:e.$t("import_decision_tree"),flat:"",dense:"",round:""},{prepend:(0,s.k6)((()=>[(0,s.bF)(L,{name:"attachment"})])),file:(0,s.k6)((({index:e,file:t})=>[(0,s.Lk)("div",F,(0,i.v_)(t.name),1),(0,s.bF)(z,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.name),1)])),_:2},1024),(0,s.Q3)("",!0)])),_:1},8,["onUpdate:modelValue","modelValue","label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}var D=o(38734),E=o(11470),L=o(24622),x=o(18505),A=o(64775),C=o(95488),K=o(8420),Q=o(60894),q=function(e,t,o,s){function i(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function a(e){try{d(s.next(e))}catch(t){l(t)}}function n(e){try{d(s["throw"](e))}catch(t){l(t)}}function d(e){e.done?o(e.value):i(e.value).then(a,n)}d((s=s.apply(e,t||[])).next())}))};const V=(0,s.pM)({name:"decisionTree",components:{SubHeader:C.A,Loader:K.A,BackToSettings:Q.A},mixins:[L.A,x.A],data(){return{workflowId:(0,D.KR)(""),searchBy:(0,D.KR)(""),tableData:{},confirmDelete:(0,D.KR)(!1),selectedRecordIndex:(0,D.KR)(),version:(0,D.KR)(""),dialog:(0,D.KR)(!1),decisionTableNameError:!1,documentKeyError:!1}},methods:{inputValueChanges(e){this.decisionTableName=e},addDecisionTable(){return q(this,void 0,void 0,(function*(){try{let e=new FormData;e.append("name",this.decisionTableName),e.append("doc_type",this.selectedDocumentKey),e.append("data",this.treeData),e.append("tree_id",this.selectedTreeId),this.showLoading();const t=yield E.oZ.saveDecisionTreeRecord(e);if(t.hasOwnProperty("success")&&!1===t.success)throw t;this.init(),this.showSuccessToast(t.message)}catch(e){const t=A.t.getErrorMessage(e);this.showErrorToast(t)}finally{this.hideLoading()}}))},uploadFile(e){return q(this,void 0,void 0,(function*(){try{this.showLoading(),this.uploadDialog=!1;let t=new FormData;t.append("file",e);const o=yield E.oZ.importDecisionTree(t);if(o.hasOwnProperty("success")&&!1===o.success)throw o;this.showSuccessToast(o.message),this.init()}catch(t){const e=A.t.getErrorMessage(t);this.showErrorToast(e)}finally{this.hideLoading()}}))},deleteTable(e){return q(this,void 0,void 0,(function*(){try{this.showLoading();const t=yield E.oZ.deleteTable(e);if(t.hasOwnProperty("success")&&!1===t.success)throw t;this.showSuccessToast(t.message),this.init()}catch(t){const e=A.t.getErrorMessage(t);this.showErrorToast(e)}finally{this.hideLoading()}}))},init(){return q(this,void 0,void 0,(function*(){try{this.showLoading();const e=yield E.oZ.getAllDecisionTrees();if(!e.hasOwnProperty("success")||!1===e.success)throw e;this.tableData=e.data}catch(e){const t=A.t.getErrorMessage(e);this.showErrorToast(t)}finally{this.hideLoading()}}))},openTreeDesigner(e){this.$router.push("/settings/decisionTree_designer/"+e.id)},loadDocTypes(){return q(this,void 0,void 0,(function*(){try{this.showLoading();const e=yield E.p5.fetchDocTypes();if(this.documentTypes=e.data,!Array.isArray(this.documentTypes))throw new Error("documentTypes is not an array");let t=[];for(let o of this.documentTypes)o&&o.document_key&&t.push(o.document_key);this.documentList=t}catch(e){this.showErrorToast(e)}finally{this.hideLoading()}}))},selectDocument(e){this.selectedDocumentKey=e},validateAndSubmit(){this.decisionTableNameError=!this.decisionTableName,this.documentKeyError=!this.selectedDocumentKey,this.decisionTableNameError||this.documentKeyError||(this.addDecisionTable(),this.closeDialog())},resetFields(){this.decisionTableName="",this.selectedDocumentKey="",this.decisionTableNameError=!1,this.documentKeyError=!1,this.isEditMode=!1,this.selectedTreeId=""},openEditTreeDialog(e){this.isEditMode=!0,this.selectedTreeId=e.id,this.decisionTableName=e.name,this.selectedDocumentKey=e.doc_type,this.dialog=!0},closeDialog(){this.dialog=!1,this.resetFields()}},mounted(){this.init(),this.loadDocTypes()},setup(){const e=(0,D.KR)(""),t=Promise;return{decisionTableName:e,documentTypes:t,documentList:[],selectedDocumentKey:(0,D.KR)(""),selectedDocumentTypeFields:{},uploadedFile:(0,D.KR)(),uploadDialog:(0,D.KR)(!1),isEditMode:(0,D.KR)(!1),selectedTreeId:(0,D.KR)("")}}});var $=o(12807),N=o(67837),R=o(50492),S=o(857),I=o(56384),M=o(84436),B=o(53999),P=o(90124),U=o(25173),X=o(10386),j=o(82156),z=o(23316),H=o(36914),O=o(39150),Z=o(44189),W=o(94940),G=o(62669),J=o(99980),Y=o(97410),ee=o(67156),te=o(88672),oe=o(98582),se=o.n(oe);const ie=(0,$.A)(V,[["render",v],["__scopeId","data-v-5984d6bc"]]),le=ie;se()(V,"components",{QInput:N.A,QIcon:R.A,QMarkupTable:S.A,QBtn:I.A,QMenu:M.A,QList:B.A,QItem:P.A,QItemSection:U.A,QSeparator:X.A,QDialog:j.A,QCard:z.A,QToolbar:H.A,QToolbarTitle:O.A,QCardSection:Z.A,QSelect:W.A,QCardActions:G.A,QFile:J.A,QTooltip:Y.A,QField:ee.A}),se()(V,"directives",{ClosePopup:te.A})}}]);