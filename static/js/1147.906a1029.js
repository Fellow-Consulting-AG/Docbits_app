"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[1147],{11147:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Ce});var s=t(61758),a=t(58790),i=t(29104);const o=e=>((0,s.Qi)("data-v-54360440"),e=e(),(0,s.jt)(),e),d={class:"container q-pa-xl settings"},n={class:"row mt-5"},u={style:{width:"100%"}},r={class:"q-mt-md"},c={class:"full-width"},h={class:"highlighted-back"},m={class:"text-h4 text-uppercase"},p={class:"text-h4 text-uppercase"},f={class:"text-h4 text-uppercase text-center"},g={class:"text-h4 text-uppercase text-center"},_={class:"text-h4 text-uppercase text-center"},b={class:"text-h4 text-uppercase text-center"},y=o((()=>(0,s.Lk)("th",null,null,-1))),F={class:"text-h4"},k={class:"text-h4"},v={class:"text-h4"},L={class:"text-h4 text-center"},T={class:"text-h4 text-center"},E={class:"text-h4 text-center"},V={class:"text-h4"},w=o((()=>(0,s.Lk)("img",{class:"",width:"20",height:"20",src:"images/Trash-Block.svg",alt:""},null,-1))),A=o((()=>(0,s.Lk)("img",{class:"",width:"20",height:"20",src:"images/trash-bin-default.svg",alt:""},null,-1))),C={key:0},$={class:"text-weight-bold"},D={class:"col-sm-12 col-md-12 col-lg-12"},S={class:"col-sm-12 col-md-12 col-lg-12"},O={class:"col-sm-12 col-md-12 col-lg-12"},R={class:"col-sm-12 col-md-12 col-lg-12"},x={key:0,class:"col-sm-12 col-md-12 col-lg-12"},q={class:"col-sm-12 col-md-12 col-lg-12"},U={class:"col-sm-12 col-md-12 col-lg-12 text-align-center"},I={class:"row"},N={class:"col-sm-12 col-md-12 col-lg-12"},P={class:"row"},M={class:"col-sm-12 col-md-12 col-lg-12"},Q={class:"col-sm-12 col-md-12 col-lg-12"},K=o((()=>(0,s.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},null,-1))),W={class:"col-sm-12 col-md-12 col-lg-12"},X={class:"row q-pt-md"},H={class:"col-sm-12 col-md-12 col-lg-12 q-pl-md q-pr-md"};function Y(e,l,t,o,Y,B){const G=(0,s.g2)("SubHeader"),j=(0,s.g2)("BackToSettings"),z=(0,s.g2)("f-btn"),J=(0,s.g2)("q-input"),Z=(0,s.g2)("q-select"),ee=(0,s.g2)("q-checkbox"),le=(0,s.g2)("q-tooltip"),te=(0,s.g2)("q-btn"),se=(0,s.g2)("q-icon"),ae=(0,s.g2)("q-markup-table"),ie=(0,s.g2)("q-tab-panel"),oe=(0,s.g2)("q-tab-panels"),de=(0,s.g2)("q-toolbar-title"),ne=(0,s.g2)("q-toolbar"),ue=(0,s.g2)("q-card-section"),re=(0,s.g2)("q-card"),ce=(0,s.g2)("q-dialog"),he=(0,s.g2)("q-form"),me=(0,s.g2)("Loader"),pe=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(G,{name:"email_templates",label:e.$t("fields")},null,8,["label"]),(0,s.bF)(j,{back_to_rotue:"/settings/supplier/layouts_builder",label:e.$t("supplier_layout")},null,8,["label"]),(0,s.Lk)("div",d,[(0,s.bF)(oe,{modelValue:e.tab,"onUpdate:modelValue":l[4]||(l[4]=l=>e.tab=l),animated:"",class:"page-background"},{default:(0,s.k6)((()=>[(0,s.bF)(ie,{name:"fields"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",n,[(0,s.Lk)("div",u,[(0,s.bF)(z,{label:e.$t("create_field"),class:"q-ml-md right",onClick:l[0]||(l[0]=()=>{e.showFieldDetailsForm=!0})},null,8,["label"]),(0,s.bF)(z,{label:e.$t("save_settings"),class:"right q-ml-md",onClick:l[1]||(l[1]=l=>e.save())},null,8,["label"]),(0,s.bF)(z,{label:e.$t("restore_default"),class:"q-ml-md right",onClick:l[2]||(l[2]=l=>e.restoreDefaultField())},null,8,["label"]),(0,s.bF)(J,{class:"width-500",dense:"",modelValue:e.searchInput,"onUpdate:modelValue":l[3]||(l[3]=l=>e.searchInput=l),autofocus:"",placeholder:e.$t("pages.user.search"),outlined:""},null,8,["modelValue","placeholder"])])]),(0,s.Lk)("div",r,[(0,s.Lk)("div",c,[(0,s.bF)(ae,{dense:"",flat:"",class:"dashboard-table-style fields-table-height back-white dashboard-table-header-sticky"},{default:(0,s.k6)((()=>[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",h,[(0,s.Lk)("th",m,(0,a.v_)(e.$t("pages.fields_settings.fields")),1),(0,s.Lk)("th",p,(0,a.v_)(e.$t("erp_field_name")),1),(0,s.Lk)("th",f,(0,a.v_)(e.$t("list_of_values")),1),(0,s.Lk)("th",g,(0,a.v_)(e.$t("pages.fields_settings.requierd")),1),(0,s.Lk)("th",_,(0,a.v_)(e.$t("pages.fields_settings.read_only")),1),(0,s.Lk)("th",b,(0,a.v_)(e.$t("pages.fields_settings.hidden")),1),y])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.filteredColumns,(l=>((0,s.uX)(),(0,s.CE)("tr",{key:l.field_name,class:"row-header"},[(0,s.Lk)("td",F,[(0,s.bF)(J,{dense:"",filled:"",style:{background:"transparent"},modelValue:l.title,"onUpdate:modelValue":e=>l.title=e,label:l.field_name},null,8,["modelValue","onUpdate:modelValue","label"])]),(0,s.Lk)("td",k,[(0,s.bF)(J,{dense:"",filled:"",style:{background:"transparent"},modelValue:l.erp_field_name,"onUpdate:modelValue":e=>l.erp_field_name=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",v,[l.field_type==e.SELECT||l.field_type==e.SEARCH||l.field_type==e.RADIO?((0,s.uX)(),(0,s.Wv)(Z,{key:0,class:"option-list",dense:"",filled:"",modelValue:l.list_of_values,"onUpdate:modelValue":e=>l.list_of_values=e,style:{background:"transparent"},rules:[e=>null!==e],readonly:"DEFAULT"==l.field_org_id,options:e.listOfValues,"emit-value":"","map-options":"",label:e.$t("list_of_values")},null,8,["modelValue","onUpdate:modelValue","rules","readonly","options","label"])):(0,s.Q3)("",!0)]),(0,s.Lk)("td",L,[(0,s.bF)(ee,{modelValue:l.is_required,"onUpdate:modelValue":e=>l.is_required=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",T,[(0,s.bF)(ee,{modelValue:l.is_readonly,"onUpdate:modelValue":e=>l.is_readonly=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",E,[(0,s.bF)(ee,{modelValue:l.is_hidden,"onUpdate:modelValue":e=>l.is_hidden=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",V,[(0,s.bF)(te,{round:"",size:"sm",color:l.calculation_formula?"primary":"grey",icon:"add",onClick:t=>e.openCalcDialog(l)},{default:(0,s.k6)((()=>[(0,s.bF)(le,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(e.$t("show_metadata")),1)])),_:1})])),_:2},1032,["color","onClick"]),"DEFAULT"===l.field_org_id?((0,s.uX)(),(0,s.Wv)(te,{key:0,flat:"",color:"black",class:"pl-6 pr-6",style:{cursor:"default"}},{default:(0,s.k6)((()=>[w,(0,s.bF)(le,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(e.$t("not_trash")),1)])),_:1})])),_:1})):((0,s.uX)(),(0,s.Wv)(te,{key:1,flat:"",color:"primary",class:"pl-6 pr-6",onClick:t=>e.deleteField(l)},{default:(0,s.k6)((()=>[A])),_:2},1032,["onClick"])),(0,s.bF)(se,{name:"info",size:"sm"},{default:(0,s.k6)((()=>[(0,s.bF)(le,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,(0,a.v_)(e.$t("name"))+" : "+(0,a.v_)(l.field_name),1),(0,s.Lk)("div",null,(0,a.v_)(e.$t("type"))+" : "+(0,a.v_)(l.field_type),1),l.input_type?((0,s.uX)(),(0,s.CE)("div",C,(0,a.v_)(e.$t("document_type"))+" : "+(0,a.v_)(l.input_type),1)):(0,s.Q3)("",!0)])),_:2},1024)])),_:2},1024)])])))),128))])])),_:1})])])])),_:1})])),_:1},8,["modelValue"])]),(0,s.bF)(ce,{modelValue:e.showFieldDetailsForm,"onUpdate:modelValue":l[14]||(l[14]=l=>e.showFieldDetailsForm=l),persistent:"","transition-show":"scale","transition-hide":"scale",onKeydown:l[15]||(l[15]=(0,i.jR)((l=>e.showFieldDetailsForm=!1),["esc"]))},{default:(0,s.k6)((()=>[(0,s.bF)(re,{style:{width:"50%"}},{default:(0,s.k6)((()=>[(0,s.bF)(ne,{class:"secondary-toolbar text-white"},{default:(0,s.k6)((()=>[(0,s.bF)(de,null,{default:(0,s.k6)((()=>[(0,s.Lk)("span",$,(0,a.v_)(e.$t("field_details")),1)])),_:1}),(0,s.bo)((0,s.bF)(te,{flat:"",round:"",dense:"",icon:"close",onClick:l[5]||(l[5]=l=>e.closeFieldDlg())},null,512),[[pe]])])),_:1}),(0,s.bF)(ue,{class:"row items-center q-pb-none"}),(0,s.bF)(ue,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",D,[(0,s.bF)(J,{outlined:"",modelValue:e.fieldName,"onUpdate:modelValue":l[6]||(l[6]=l=>e.fieldName=l),required:"",label:e.$t("name"),rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])]),(0,s.Lk)("div",S,[(0,s.bF)(J,{outlined:"",required:"",modelValue:e.fieldTitle,"onUpdate:modelValue":l[7]||(l[7]=l=>e.fieldTitle=l),rules:[e=>e&&e.length>0],label:e.$t("title")},null,8,["modelValue","rules","label"])]),(0,s.Lk)("div",O,[(0,s.bF)(Z,{outlined:"",required:"",modelValue:e.fieldType,"onUpdate:modelValue":l[8]||(l[8]=l=>e.fieldType=l),rules:[e=>null!==e],options:e.field_type_option,"emit-value":"","map-options":"",label:e.$t("select_field_type")},null,8,["modelValue","rules","options","label"])]),(0,s.Lk)("div",R,[e.fieldType==e.SELECT||e.fieldType==e.SEARCH||e.fieldType==e.RADIO?((0,s.uX)(),(0,s.Wv)(Z,{key:0,outlined:"",required:"",modelValue:e.fieldListOfValue,"onUpdate:modelValue":l[9]||(l[9]=l=>e.fieldListOfValue=l),rules:[e=>null!==e],options:e.listOfValues,"emit-value":"","map-options":"",label:"List of value"},null,8,["modelValue","rules","options"])):(0,s.Q3)("",!0)]),e.fieldType!=e.FILE?((0,s.uX)(),(0,s.CE)("div",x,[(0,s.bF)(J,{outlined:"",required:"",modelValue:e.ERPFieldName,"onUpdate:modelValue":l[10]||(l[10]=l=>e.ERPFieldName=l),rules:[e=>e&&e.length>0],label:e.$t("erp_field_name")},null,8,["modelValue","rules","label"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",q,[e.fieldType==e.FILE?((0,s.uX)(),(0,s.Wv)(J,{key:0,outlined:"",required:"",modelValue:e.documentType,"onUpdate:modelValue":l[11]||(l[11]=l=>e.documentType=l),rules:[e=>e&&e.length>0],label:e.$t("document_type")},null,8,["modelValue","rules","label"])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",U,[(0,s.bF)(te,{color:"primary",label:e.$t("back"),"data-cy":"back",class:"q-mr-sm",onClick:l[12]||(l[12]=l=>e.closeFieldDlg())},null,8,["label"]),(0,s.bF)(te,{color:"primary",type:"submit",onClick:l[13]||(l[13]=l=>e.createFieldInGroup()),label:e.$t("pages.user.save"),"data-cy":"save"},null,8,["label"])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(ce,{modelValue:e.showFormulaDlg,"onUpdate:modelValue":l[18]||(l[18]=l=>e.showFormulaDlg=l)},{default:(0,s.k6)((()=>[(0,s.bF)(re,null,{default:(0,s.k6)((()=>[(0,s.bF)(ne,{class:"secondary-toolbar"},{default:(0,s.k6)((()=>[(0,s.bF)(de),(0,s.bo)((0,s.bF)(te,{flat:"",round:"",dense:"",icon:"close"},null,512),[[pe]])])),_:1}),(0,s.bF)(ue,{class:"width-500"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",I,[(0,s.Lk)("div",N,[(0,s.Lk)("div",P,[(0,s.bF)(he,{class:"full-width"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",M,(0,a.v_)(e.$t("metadata")),1),(0,s.Lk)("div",Q,[(0,s.bF)(J,{outlined:"",modelValue:e.field_model["calculation_formula"],"onUpdate:modelValue":l[16]||(l[16]=l=>e.field_model["calculation_formula"]=l),type:"textarea"},null,8,["modelValue"])]),K,(0,s.Lk)("div",W,[(0,s.Lk)("div",X,[(0,s.Lk)("div",H,[(0,s.bF)(te,{label:e.$t("pages.user.save"),onClick:l[17]||(l[17]=l=>e.submitFormular()),color:"primary",class:"full-width",icon:"done"},null,8,["label"])])])])])),_:1})])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(me)],64)}var B=t(38734),G=t(95488),j=t(60894),z=t(94124),J=t(1659),Z=t(24622),ee=t(18505),le=t(53474),te=t(11470),se=t(64775),ae=t(8420),ie=t(96056),oe=function(e,l,t,s){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,i){function o(e){try{n(s.next(e))}catch(l){i(l)}}function d(e){try{n(s["throw"](e))}catch(l){i(l)}}function n(e){e.done?t(e.value):a(e.value).then(o,d)}n((s=s.apply(e,l||[])).next())}))};const de=(0,s.pM)({el:"#app",mixins:[ee.A,Z.A,ie.A],components:{SubHeader:G.A,BackToSettings:j.A,Loader:ae.A},mounted(){this.init()},computed:{filteredColumns(){var e;if(""===this.searchInput){let l=null===(e=this.field_setting[0])||void 0===e?void 0:e.rows.flat();return l}const l=this.searchInput.toLowerCase();let t=this.field_setting[0].rows.map((e=>e.filter((e=>{const t=e.title&&"string"===typeof e.title&&e.title.toLowerCase().includes(l),s=e.erp_field_name&&"string"===typeof e.erp_field_name&&e.erp_field_name.toLowerCase().includes(l);return t||s})))).flat();return t}},data(){return{searchInput:"",tab:(0,B.KR)("fields"),showFieldDetailsForm:(0,B.KR)(!1),fieldName:(0,B.KR)(""),fieldTitle:(0,B.KR)(""),fieldType:(0,B.KR)(""),documentType:(0,B.KR)(""),fieldListOfValue:(0,B.KR)(""),listOfValues:(0,B.KR)([]),ERPFieldName:(0,B.KR)(""),checkedFields:(0,B.KR)(!1),SELECT:le.O.SELECT,SEARCH:le.O.SEARCH,RADIO:le.O.RADIO,FILE:le.O.FILE,field_setting:(0,B.KR)([]),showFormulaDlg:(0,B.KR)(!1),field_type_option:[{value:le.O.STRING,label:this.$t("string")},{value:le.O.TEXTAREA,label:this.$t("textarea")},{value:le.O.NUMBER,label:this.$t("number")},{value:le.O.SELECT,label:this.$t("select")},{value:le.O.SEARCH,label:this.$t("select_with_search")},{value:le.O.FILE,label:this.$t("file")},{value:le.O.BOOLEAN,label:this.$t("boolean")},{value:le.O.RADIO,label:this.$t("radio")}]}},setup(){const e=(0,z.M1)(),{loading:l}=(0,J.bP)(e);let t={};return{loading:l,field_model:(0,B.KR)(t)}},methods:{init(){return oe(this,void 0,void 0,(function*(){this.showLoading();try{yield this.getDefaultFields(),yield this.fetchListOfValues()}catch(e){}finally{this.hideLoading()}}))},fetchListOfValues(){return oe(this,void 0,void 0,(function*(){try{const e=yield te.tA.getLists();if(e.success){const l=e.data.map((e=>({value:e.value,label:e.label?e.label:e.value})));this.listOfValues=l}}catch(e){}}))},openCalcDialog(e){this.field_model=e,this.showFormulaDlg=!0},submitFormular(){this.save(),this.showFormulaDlg=!1},getDefaultFields(){return oe(this,void 0,void 0,(function*(){try{const e={doc_type:"SUPPLIER_M3"},l=yield te.bg.getFieldSettingsByType(e);this.field_setting=l.field_setting}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}}))},save(){return oe(this,void 0,void 0,(function*(){this.showLoading();try{const e={data:JSON.stringify(this.field_setting)};yield te.bg.update(e,{doc_type:"SUPPLIER_M3",is_sub_doc_type:!1}),yield this.getDefaultFields(),this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(e){const l=se.t.getErrorMessage(e);this.showErrorToast(l)}finally{this.hideLoading()}}))},closeFieldDlg(){this.fieldName="",this.fieldTitle="",this.fieldType="",this.ERPFieldName="",this.fieldListOfValue="",this.documentType="",this.showFieldDetailsForm=!1},validateFieldCreate(){let e=!0;return""===this.fieldName||null===this.fieldName?(e=!1,this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY"))):""===this.fieldTitle||null===this.fieldTitle?(e=!1,this.showErrorToast(this.$t("pages.messages.TITLE_MANDATORY"))):""===this.fieldType||null===this.fieldType?(e=!1,this.showErrorToast(this.$t("pages.messages.FIELD_TYPE_MANDATORY"))):this.hasWhiteSpace(this.fieldName)?(e=!1,this.showErrorToast(this.$t("pages.messages.SPACES_NOT_ALLOWED"))):this.checkFirstLetterIsSpecialOrNumber(this.fieldName)?(e=!1,this.showErrorToast(this.$t("errors.special_letter_number_not_allowed"))):this.fieldType!==this.FILE||""!==this.documentType&&null!==this.documentType?this.fieldType===this.FILE&&this.hasWhiteSpace(this.documentType)&&(e=!1,this.showErrorToast(this.$t("pages.messages.SPACES_NOT_ALLOWED_IN_DOCUMENT_TYPE"))):(e=!1,this.showErrorToast(this.$t("pages.messages.DOCUMENT_TYPE_MANDATORY"))),e},createFieldInGroup(){return oe(this,void 0,void 0,(function*(){if(this.validateFieldCreate()){this.showLoading();try{const e={title:this.fieldTitle,field_name:this.fieldName,field_type:this.fieldType,doc_type_name:"SUPPLIER_M3",group_name:"SUPPLIER_M3"};this.fieldType!==this.SELECT&&this.fieldType!==this.SEARCH&&this.fieldType!==this.RADIO||(e["list_of_values"]=this.fieldListOfValue),this.fieldType===this.FILE?e["input_type"]=this.documentType:e["erp_field_name"]=this.ERPFieldName;const l=yield te.bg.createField(e);if(!1===l.success)throw{message:l.message};yield this.getDefaultFields(),this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(e){const l=se.t.getErrorMessage(e);this.showErrorToast(l)}finally{this.closeFieldDlg(),this.hideLoading()}}}))},restoreDefaultField(){return oe(this,void 0,void 0,(function*(){this.showLoading();const e={profile:"DEFAULT"};try{const l=yield te.bg.restoreSupplierField(e);if(!1===l.success){const e=se.t.getErrorMessage(l);return void this.showErrorToast(e)}this.getDefaultFields(),this.showSuccessToast(l.message)}catch(l){const e=se.t.getErrorMessage(l);this.showErrorToast(e)}finally{this.hideLoading()}}))},deleteField(e){return oe(this,void 0,void 0,(function*(){this.showLoading();try{const l=yield te.bg.deleteField(e["id"]);if(!1===l.success)throw{message:l.message};this.getDefaultFields(),this.showSuccessToast(this.$t("pages.messages.DELETED_SUCCESSFULLY"))}catch(l){const e=se.t.getErrorMessage(l);this.showErrorToast(e)}finally{this.hideLoading()}}))}}});var ne=t(12807),ue=t(39041),re=t(71746),ce=t(67837),he=t(857),me=t(94940),pe=t(80460),fe=t(56384),ge=t(97410),_e=t(50492),be=t(82156),ye=t(23316),Fe=t(36914),ke=t(39150),ve=t(44189),Le=t(49200),Te=t(42315),Ee=t(88672),Ve=t(98582),we=t.n(Ve);const Ae=(0,ne.A)(de,[["render",Y],["__scopeId","data-v-54360440"]]),Ce=Ae;we()(de,"components",{QTabPanels:ue.A,QTabPanel:re.A,QInput:ce.A,QMarkupTable:he.A,QSelect:me.A,QCheckbox:pe.A,QBtn:fe.A,QTooltip:ge.A,QIcon:_e.A,QDialog:be.A,QCard:ye.A,QToolbar:Fe.A,QToolbarTitle:ke.A,QCardSection:ve.A,QForm:Le.A,QTable:Te.A}),we()(de,"directives",{ClosePopup:Ee.A})}}]);