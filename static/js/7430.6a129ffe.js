"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[7430],{27430:(e,o,t)=>{t.r(o),t.d(o,{default:()=>Zi});var l=t(61758),i=t(58790);const s=e=>((0,l.Qi)("data-v-176d0133"),e=e(),(0,l.jt)(),e),a={class:"row q-pl-md q-pr-md highlighted-back"},r={class:"col-4 secondary-c-text text-h6"},d={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},n={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},m={class:"col-8 q-pa-xs"},c={class:"float-right"},u=["innerHTML"],h=s((()=>(0,l.Lk)("img",{width:"20",src:"images/globe.svg",class:"black_to_white"},null,-1))),p={class:"row q-pl-md q-pr-md"},f={class:"col-xs-12 col-sm-2 col-md-2 col-lg-2 q-pt-sm full-height"},g={class:"full-width scroll-area-height scrolle-y"},_={class:"full-width",style:{position:"relative"}},v={class:"col-xs-12 col-sm-10 col-md-10 col-lg-10 padding-8-0-8-8"},b={class:"full-width"},y={class:"full-width"},C={class:"p-t-b-6 highlighted-back image_control_panel"},k={class:"row"},T={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},w={key:0,class:"row form-builder-image-container",id:"image_scrolle"},F={class:"image_container overflow-scroll",id:"image_container",style:{position:"relative"}},B={class:"max-width-80 q-pl-sm q-pr-sm"},L={class:"justify-center form-builder-image-container"},M=["data-id","onClick","src"],x={key:1,class:"full-width full-height"},I={key:0,class:"p-t-b-6 image_control_panel highlighted-back"},E={class:"row"},A={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},N={class:"row"},O={class:"col-sm-12 col-md-12 col-lg-12"},S={class:"row"},V={class:"col-sm-12 col-md-12 col-lg-12"},P={class:"col-sm-12 col-md-12 col-lg-12"},X=s((()=>(0,l.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},null,-1))),U={class:"col-sm-12 col-md-12 col-lg-12"};function R(e,o,t,s,R,q){const D=(0,l.g2)("q-icon"),$=(0,l.g2)("q-btn"),Q=(0,l.g2)("helpLayoutbuilder"),z=(0,l.g2)("f-btn"),W=(0,l.g2)("AutoGenerateDefaultLayout"),H=(0,l.g2)("q-item-label"),K=(0,l.g2)("q-tooltip"),Y=(0,l.g2)("q-item-section"),G=(0,l.g2)("q-item"),J=(0,l.g2)("q-select"),j=(0,l.g2)("q-tab"),Z=(0,l.g2)("q-tabs"),ee=(0,l.g2)("q-separator"),oe=(0,l.g2)("DefaultGroups"),te=(0,l.g2)("q-expansion-item"),le=(0,l.g2)("DefaultElements"),ie=(0,l.g2)("Elements"),se=(0,l.g2)("q-tab-panel"),ae=(0,l.g2)("Properties"),re=(0,l.g2)("GeneralSettings"),de=(0,l.g2)("q-tab-panels"),ne=(0,l.g2)("FieldsDesigner"),me=(0,l.g2)("ImageComponent"),ce=(0,l.g2)("import-pdf"),ue=(0,l.g2)("q-toggle"),he=(0,l.g2)("q-splitter"),pe=(0,l.g2)("q-toolbar-title"),fe=(0,l.g2)("q-toolbar"),ge=(0,l.g2)("q-input"),_e=(0,l.g2)("q-form"),ve=(0,l.g2)("q-card-section"),be=(0,l.g2)("q-card"),ye=(0,l.g2)("q-dialog"),Ce=(0,l.g2)("Loader"),ke=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",a,[(0,l.Lk)("div",r,[e.docType&&!e.subDocType?((0,l.uX)(),(0,l.Wv)($,{key:0,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/settings/document"},{default:(0,l.k6)((()=>[(0,l.bF)(D,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,l.Lk)("label",d,(0,i.v_)(e.$t("pages.settings.document_types")),1)])),_:1})):(0,l.Q3)("",!0),e.docType&&e.subDocType?((0,l.uX)(),(0,l.Wv)($,{key:1,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/settings/sub_doc_type/"+e.docType},{default:(0,l.k6)((()=>[(0,l.bF)(D,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,l.Lk)("label",n,(0,i.v_)(e.$t("sub_doc_type")),1)])),_:1},8,["to"])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",m,[(0,l.Lk)("div",c,[(0,l.bF)(Q)]),(0,l.bF)(z,{label:e.$t("copy_json"),class:"float-right",icon:"content_copy",onClick:o[0]||(o[0]=o=>e.copyTemplate())},null,8,["label"]),(0,l.bF)(z,{label:e.$t("edit_json"),class:"float-right q-mr-md",icon:"visibility",onClick:o[1]||(o[1]=o=>e.openJsonForm())},null,8,["label"]),(0,l.bF)(z,{label:e.$t("use_default_template"),class:"float-right q-mr-md",onClick:o[2]||(o[2]=o=>e.restoreDefaults())},null,8,["label"]),(0,l.bF)(W),(0,l.bF)(J,{outlined:"",dense:"",class:"language-select float-right q-mr-md width-200",modelValue:e.language_origin,"onUpdate:modelValue":[o[3]||(o[3]=o=>e.language_origin=o),o[4]||(o[4]=o=>e.createTemplateAccordingToOrigin())],options:e.language_origin_list,"emit-value":"","map-options":""},{option:(0,l.k6)((e=>[(0,l.bF)(G,(0,i._B)((0,l.Ng)(e.itemProps)),{default:(0,l.k6)((()=>[(0,l.bF)(Y,null,{default:(0,l.k6)((()=>[(0,l.bF)(H,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.opt.label),1)])),_:2},1024),e.opt.description?((0,l.uX)(),(0,l.Wv)(K,{key:0},{default:(0,l.k6)((()=>[(0,l.Lk)("span",{innerHTML:e.opt.description},null,8,u)])),_:2},1024)):(0,l.Q3)("",!0)])),_:2},1024)])),_:2},1040)])),prepend:(0,l.k6)((()=>[(0,l.bF)(D,{flat:"",dense:"",color:"primary"},{default:(0,l.k6)((()=>[h])),_:1})])),_:1},8,["modelValue","options"])])]),(0,l.Lk)("div",p,[(0,l.Lk)("div",f,[(0,l.Lk)("div",g,[(0,l.Lk)("div",_,[(0,l.bF)(Z,{modelValue:e.activeTab,"onUpdate:modelValue":o[5]||(o[5]=o=>e.activeTab=o),dense:"","active-class":"highlighted-back","indicator-color":"primary","active-color":"primary",align:"justify"},{default:(0,l.k6)((()=>[(0,l.bF)(j,{name:"general_settings",class:"no-padding-left-right",icon:"settings"}),(0,l.bF)(j,{name:"form_elements",label:e.$t("form_builder.elements")},null,8,["label"]),(0,l.bF)(j,{name:"element_properties",label:e.$t("form_builder.properties")},null,8,["label"])])),_:1},8,["modelValue"]),(0,l.bF)(ee),(0,l.bF)(de,{modelValue:e.activeTab,"onUpdate:modelValue":o[6]||(o[6]=o=>e.activeTab=o),animated:""},{default:(0,l.k6)((()=>[(0,l.bF)(se,{name:"form_elements"},{default:(0,l.k6)((()=>[(0,l.bF)(te,{"expand-separator":"","default-opened":"",label:e.$t("groups"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px q-mt-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(oe)])),_:1},8,["label"]),(0,l.bF)(te,{"expand-separator":"",label:e.$t("fields"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px q-mt-sm",class:"q-mb-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(le)])),_:1},8,["label"]),(0,l.bF)(te,{"expand-separator":"",label:e.$t("form_builder.form_elements"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px"},{default:(0,l.k6)((()=>[e.renderComponent?((0,l.uX)(),(0,l.Wv)(ie,{key:e.keyToUpdateComponnets})):(0,l.Q3)("",!0)])),_:1},8,["label"]),(0,l.bF)(ee)])),_:1}),(0,l.bF)(se,{name:"element_properties"},{default:(0,l.k6)((()=>[e.renderComponent?((0,l.uX)(),(0,l.Wv)(ae,{key:e.keyToUpdateComponnets})):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(se,{name:"general_settings"},{default:(0,l.k6)((()=>[(0,l.bF)(re)])),_:1})])),_:1},8,["modelValue"])])])]),(0,l.Lk)("div",v,[(0,l.bF)(he,{limits:[30,95],modelValue:e.formSplitterModel,"onUpdate:modelValue":[o[10]||(o[10]=o=>e.formSplitterModel=o),e.loadImageDetails],class:"scroll-area-height"},{before:(0,l.k6)((()=>[(0,l.Lk)("div",b,[(0,l.bF)(ne,{isPanelSection:!1,onSaveTemplate:e.saveTemplate,onShowConnectionFromField:e.showConnectionFromField,onMarkTableColumns:e.markTableColumns},null,8,["onSaveTemplate","onShowConnectionFromField","onMarkTableColumns"])])])),after:(0,l.k6)((()=>[(0,l.Lk)("div",y,[(0,l.bF)(he,{limits:[30,94],disable:!e.isExtenedPanel,modelValue:e.splitterModel,"onUpdate:modelValue":o[9]||(o[9]=o=>e.splitterModel=o),horizontal:"","separator-class":"bg-black",class:"scroll-area-height","before-class":"handle-scroll"},{before:(0,l.k6)((()=>[(0,l.Lk)("div",C,[(0,l.Lk)("div",k,[(0,l.Lk)("div",T,[(0,l.bF)(D,{name:"img:images/zoom_in.svg",size:"24px",class:"q-mr-sm cursor-pointer",onClick:e.zoomIn},{default:(0,l.k6)((()=>[(0,l.bF)(K,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("zoom_in")),1)])),_:1})])),_:1},8,["onClick"]),(0,l.bF)(D,{name:"img:images/zoom_out.svg",size:"24px",class:"q-mr-sm cursor-pointer",onClick:e.zoomOut},{default:(0,l.k6)((()=>[(0,l.bF)(K,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("zoom_out")),1)])),_:1})])),_:1},8,["onClick"]),(0,l.bF)(D,{name:"img:settings/export.svg",size:"24px",class:"q-mr-sm cursor-pointer right",onClick:o[7]||(o[7]=o=>e.showImages=!1)},{default:(0,l.k6)((()=>[(0,l.bF)(K,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("upload")),1)])),_:1})])),_:1})])])]),e.showImages?((0,l.uX)(),(0,l.CE)("div",w,[(0,l.Lk)("div",F,[e.formLayoutImages?((0,l.uX)(),(0,l.Wv)(me,{key:0,"pos-correction":!1,width:e.imageWidth,cropUrl:e.baseUrl+"/"+e.formLayoutImages[e.imageIndex].path+"?"+e.keyImageChange+"&"+e.tokenQueryParam,markedAreasStr:e.markedAreasStr,connectionId:e.connectionId,allowMultiSelection:e.allowMultiSelection,onRestrictDrawing:e.restrictDrawing},null,8,["width","cropUrl","markedAreasStr","connectionId","allowMultiSelection","onRestrictDrawing"])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",B,[(0,l.Lk)("div",L,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.formLayoutImages,((o,t)=>((0,l.uX)(),(0,l.CE)("img",{"data-id":t,onClick:o=>e.loadImage(t,!1),class:(0,i.C4)([t===e.imageIndex?"active":"","cursor-pointer q-ma-sm shadow-2 solid-border-1px"]),key:t,src:e.baseUrl+"/"+o.path+"?"+e.keyImageChange+"&"+e.tokenQueryParam,width:"50",draggable:"false"},null,10,M)))),128))])])])):(0,l.Q3)("",!0),e.showImages?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",x,[(0,l.bF)(ce,{onSaveTemplate:e.saveTemplate,onLoadImage:e.loadImage},null,8,["onSaveTemplate","onLoadImage"])]))])),after:(0,l.k6)((()=>[e.isExtenedPanel?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",I,[(0,l.Lk)("div",E,[(0,l.Lk)("div",A,[(0,l.bF)(ue,{size:"24px",modelValue:e.isExtenedPanel,"onUpdate:modelValue":o[8]||(o[8]=o=>e.isExtenedPanel=o),class:"float-right"},{default:(0,l.k6)((()=>[(0,l.bF)(K,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("activate")),1)])),_:1})])),_:1},8,["modelValue"])])])])),e.isExtenedPanel&&e.showPanel?((0,l.uX)(),(0,l.Wv)(ne,{key:1,isPanelSection:!0,onSaveTemplate:e.saveTemplate,onShowConnectionFromField:e.showConnectionFromField,onMarkTableColumns:e.markTableColumns},null,8,["onSaveTemplate","onShowConnectionFromField","onMarkTableColumns"])):(0,l.Q3)("",!0)])),_:1},8,["disable","modelValue"])])])),_:1},8,["modelValue","onUpdate:modelValue"])])]),(0,l.bF)(ye,{modelValue:e.showJsonForm,"onUpdate:modelValue":o[14]||(o[14]=o=>e.showJsonForm=o)},{default:(0,l.k6)((()=>[(0,l.bF)(be,null,{default:(0,l.k6)((()=>[(0,l.bF)(fe,{class:"secondary-toolbar"},{default:(0,l.k6)((()=>[(0,l.bF)(pe,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("edit_json")),1)])),_:1}),(0,l.bo)((0,l.bF)($,{flat:"",round:"",dense:"",icon:"close"},null,512),[[ke]])])),_:1}),(0,l.bF)(ve,{class:"width-500"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",N,[(0,l.Lk)("div",O,[(0,l.Lk)("div",S,[(0,l.bF)(_e,{class:"full-width"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",V,(0,i.v_)(e.$t("pages.fields_settings.formula")),1),(0,l.Lk)("div",P,[(0,l.bF)(ge,{outlined:"",modelValue:this.strFormLayout,"onUpdate:modelValue":o[11]||(o[11]=e=>this.strFormLayout=e),type:"textarea"},null,8,["modelValue"])]),X,(0,l.Lk)("div",U,[(0,l.bo)((0,l.bF)($,{label:e.$t("pages.user.save"),onClick:o[12]||(o[12]=o=>e.savePastedJson()),color:"primary",icon:"done"},null,8,["label"]),[[ke]]),(0,l.bF)($,{outline:"",color:"primary",label:"Copy Json",class:"float-right",icon:"content_copy",onClick:o[13]||(o[13]=o=>e.copyTemplate())})])])),_:1})])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(Ce)],64)}var q=t(92162),D=t(1659),$=t(24622);const Q={class:"full-width full-height q-pa-lg"},z={class:""},W=(0,l.Lk)("img",{src:"settings/export.svg",width:"100","aria-hidden":"true"},null,-1),H={style:{padding:"20px"}},K={class:"text-white"};function Y(e,o,t,s,a,r){const d=(0,l.g2)("q-icon"),n=(0,l.g2)("q-tooltip"),m=(0,l.g2)("q-file");return(0,l.uX)(),(0,l.CE)("div",Q,[(0,l.Lk)("div",{class:"drag-area text-center full-width full-height dashed-border-2px",style:{padding:"20px"},onDrop:o[1]||(o[1]=(...o)=>e.drop&&e.drop(...o)),onDragover:o[2]||(o[2]=(...o)=>e.allowDrop&&e.allowDrop(...o)),onDragleave:o[3]||(o[3]=(...o)=>e.dragLeave&&e.dragLeave(...o))},[(0,l.Lk)("div",z,[W,(0,l.Lk)("div",H,(0,i.v_)(e.$t("pages.land.dragndrop")),1),(0,l.bF)(m,{style:{width:"200px !important",margin:"auto","white-space":"nowrap"},color:"white","data-cy":"upload-multiple-docs","label-color":"white","bg-color":"primary",filled:"","onUpdate:modelValue":[e.uploadFile,o[0]||(o[0]=o=>e.uploadedFiles=o)],modelValue:e.uploadedFiles,label:e.$t("pages.land.upload")},{prepend:(0,l.k6)((()=>[(0,l.bF)(d,{name:"attachment",color:"white"})])),file:(0,l.k6)((({index:e,file:o})=>[(0,l.Lk)("div",K,(0,i.v_)(o.name),1),(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(o.name),1)])),_:2},1024),(0,l.Q3)("",!0)])),_:1},8,["onUpdate:modelValue","modelValue","label"])])],32)])}var G=t(82303),J=t(38734),j=t(18505),Z=t(94124),ee=t(46162),oe=t(85487),te=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{d(l.next(e))}catch(o){s(o)}}function r(e){try{d(l["throw"](e))}catch(o){s(o)}}function d(e){e.done?t(e.value):i(e.value).then(a,r)}d((l=l.apply(e,o||[])).next())}))};const le=(0,l.pM)({el:"#app",mixins:[j.A,$.A],emits:["saveTemplate","loadImage"],props:["showSpinner"],data(){return{}},methods:{uploadFile(e){this.uploadedFiles=e;let o=this.uploadedFiles;o||this.showErrorToast(this.$t("pages.messages.NO_FILE_SELECTED")),this.uploadFilee(o)},allowDrop(e){e.preventDefault(),e.currentTarget.classList.add("bg-grey-5"),e.currentTarget.classList.add("bd-shadow")},drop(e){e.preventDefault(),e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow"),this.uploadFilee(e.dataTransfer.files[0])},dragLeave(e){e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow")},uploadFilee(e){return te(this,void 0,void 0,(function*(){if(this.uploadedFiles=null,"application/pdf"!==e.type)return void this.showErrorToast(this.$t("pages.messages.ONLY_PDF_ALLOWED"));this.showLoading();let o=this.$route.params.id;o||this.showErrorToast("Template Id is mandatory");let t,l=new FormData;l.append("id",o),l.append("file",e),l.append("org_id",(0,oe.I)());try{let e=yield(0,ee.L3)();t=yield G.A.post(ee.FH.upload_template_sample,l,{headers:{"Content-Type":"multipart/form-data",Authorization:e}})}catch(i){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}this.formLayoutImages=[],this.formLayoutImages=t.data.images,this.proximityTokens=t.data.proximity_tokens,this.showImages=!0,this.$emit("loadImage",0,!0),this.$emit("saveTemplate",!0)}))}},setup(){const e=(0,Z.uL)(),{showImages:o,formLayoutImages:t,proximityTokens:l}=(0,D.bP)(e);return{showImages:o,proximityTokens:l,formLayoutImages:t,uploadedFiles:(0,J.KR)(null)}}});var ie=t(12807),se=t(56384),ae=t(99980),re=t(50492),de=t(97410),ne=t(98582),me=t.n(ne);const ce=(0,ie.A)(le,[["render",Y]]),ue=ce;me()(le,"components",{QBtn:se.A,QFile:ae.A,QIcon:re.A,QTooltip:de.A});const he={class:"p-t-b-6 image_control_panel highlighted-back"},pe={class:"row"},fe={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},ge=["id"],_e={class:"full-width"},ve=["id"],be={class:"q-pt-sm q-pb-sm"},ye={key:0,class:"row cursor-move"},Ce={class:"col-sm-8 col-md-8 col-lg-8 q-pr-sm"},ke={class:"col-sm-4 col-md-4 col-lg-4"},Te={key:1,class:"row float-right display-contents"},we={key:0,class:"full-width meta"},Fe=["onClick"],Be={key:1,class:"full-width q-pa-xs height-24"};function Le(e,o,t,s,a,r){const d=(0,l.g2)("q-tooltip"),n=(0,l.g2)("q-icon"),m=(0,l.g2)("q-toggle"),c=(0,l.g2)("q-input"),u=(0,l.g2)("q-btn"),h=(0,l.g2)("draggable");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",he,[(0,l.Lk)("div",pe,[(0,l.Lk)("div",fe,[(0,l.bF)(n,{name:"add_to_queue",size:"24px",class:"float-left q-mr-sm cursor-pointer",onClick:o[0]||(o[0]=o=>e.addGroup())},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("create_group")),1)])),_:1})])),_:1}),e.isPanelSection?((0,l.uX)(),(0,l.Wv)(m,{key:0,size:"24px",modelValue:e.isExtenedPanel,"onUpdate:modelValue":o[1]||(o[1]=o=>e.isExtenedPanel=o),class:"float-right"},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("deactivate")),1)])),_:1})])),_:1},8,["modelValue"])):(0,l.Q3)("",!0),(0,l.bF)(n,{name:"img:images/save.svg",size:"24px",class:"float-right q-mr-sm cursor-pointer",onClick:o[2]||(o[2]=o=>e.$emit("saveTemplate",!0))},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("save")),1)])),_:1})])),_:1})])])]),((0,l.uX)(),(0,l.CE)("div",{key:e.reRenderGroupForm,class:(0,i.C4)(e.isPanelSection?"":"right-content-height scrolle-y"),id:e.isPanelSection?"field_scrolle_2":"field_scrolle"},[(0,l.Lk)("div",_e,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.formLayout,((o,t)=>((0,l.uX)(),(0,l.CE)(l.FK,{key:`div-${t}`},[o.is_panel_section_group===e.isPanelSection?((0,l.uX)(),(0,l.CE)("div",{key:0,id:`div-${t}`,class:(0,i.C4)(["section-block dashed-border q-mb-md q-pa-sm display-inline-block",e.getElementBorder(o)]),style:(0,i.Tr)("width:"+e.getElementWidth(o)+"%")},[(0,l.Lk)("div",be,[e.isPanelSection?((0,l.uX)(),(0,l.CE)("div",Te,[(0,l.bF)(u,{outline:"",round:"",size:"sm",color:"primary",icon:"settings",class:"h-m-5",onClick:t=>e.inputClicked(o.name)},null,8,["onClick"]),(0,l.bF)(u,{outline:"",round:"",size:"sm",color:"red-5",icon:"delete",class:"h-m-5 float-right",onClick:o=>e.deleteSection(t)},null,8,["onClick"])])):((0,l.uX)(),(0,l.CE)("div",ye,[(0,l.Lk)("div",Ce,[(0,l.bF)(c,{outlined:"",dense:"",modelValue:o.title,"onUpdate:modelValue":e=>o.title=e,label:e.$t("group_title"),onClick:t=>e.inputClicked(o.name)},null,8,["modelValue","onUpdate:modelValue","label","onClick"])]),(0,l.Lk)("div",ke,[(0,l.bF)(u,{outline:"",round:"",size:"sm",color:"red-5",icon:"delete",class:"h-m-5 float-right",onClick:o=>e.deleteSection(t)},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("delete_group")),1)])),_:1})])),_:2},1032,["onClick"]),(0,l.bF)(u,{outline:"",round:"",size:"sm",color:"primary",icon:"move_up",class:"h-m-5 float-right",onClick:o=>e.moveGroupUp(o,t)},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("move_up")),1)])),_:1})])),_:2},1032,["onClick"]),(0,l.bF)(u,{outline:"",round:"",size:"sm",color:"primary",icon:"move_down",class:"h-m-5 float-right",onClick:o=>e.moveGroupDown(o,t)},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("move_down")),1)])),_:1})])),_:2},1032,["onClick"])])]))]),e.isDefaultFieldLoaded?((0,l.uX)(),(0,l.CE)("div",we,[(0,l.bF)(h,{modelValue:o.rows,"onUpdate:modelValue":e=>o.rows=e,class:"dragArea","item-key":"name",group:{name:"formbuilder",pull:!1,put:!0},sort:!0,"ghost-class":"sortable__ghost",onChange:e.itemAdded},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.rows,((o,s)=>((0,l.uX)(),(0,l.CE)("div",(0,l.v6)({key:s,ref_for:!0},o,{onClick:t=>e.inputClicked(o.name),class:["element_parent q-pa-sm cursor-move",(o.name==e.activeFieldName?"is--active  dashed-border":" ")+(e.isPanelSection?" ":" display-block")+(e.isPanelSection?" ":" display-block ")+(o.tr_ocr_model_id?" text-primary ":" ")],style:"width:"+e.getElementWidth(o)+"%"}),[e.renderComponent?((0,l.uX)(),(0,l.Wv)((0,l.$y)(o.fieldType),{key:0,currentField:o,isReadOnly:!1,fieldName:o.name,groupIndex:t,onInputClicked:e.inputClicked,onInputValueChanges:e.inputValueChanges,onUpdateModel:e.updateModel,onApplyFuzzySearch:e.applyFuzzySearch,onMarkTableColumns:e.markTableColumns,class:"form__field"},null,40,["currentField","fieldName","groupIndex","onInputClicked","onInputValueChanges","onUpdateModel","onApplyFuzzySearch","onMarkTableColumns"])):(0,l.Q3)("",!0),o.name===e.activeFieldName?((0,l.uX)(),(0,l.CE)("div",Be,[o.fieldType===e.TABLE_OF_CHECKBOXES?((0,l.uX)(),(0,l.Wv)(u,{key:0,round:"",color:"primary",icon:"table_rows",size:"xs",class:"h-m-5",onClick:t=>e.addTableRow(o.name)},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("add_row")),1)])),_:1})])),_:2},1032,["onClick"])):(0,l.Q3)("",!0),(o.fieldType,e.TABLE_OF_CHECKBOXES,(0,l.Q3)("",!0)),(0,l.bF)(u,{round:"",color:"primary",icon:"delete",size:"xs",class:"float-right delete-ele",onClick:o=>e.removeField(o,t)},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])):(0,l.Q3)("",!0)],16,Fe)))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):(0,l.Q3)("",!0)],14,ve)):(0,l.Q3)("",!0)],64)))),128))])],10,ge))],64)}var Me=t(85192),xe=t(39231),Ie=t(18783),Ee=t(7538),Ae=t(76956),Ne=t(37673),Oe=t(9e4),Se=t(85304),Ve=t(21529),Pe=t(52544),Xe=t(73855),Ue=t(80747),Re=t(1050),qe=t(7649),De=t(80661),$e=t(12397),Qe=t(15268),ze=t(35519),We=t(40260),He=t(18233),Ke=t(32759),Ye=t(34631),Ge=t(33722),Je=t(4225);const je=(0,l.pM)({el:"fields_designer",mixins:[j.A,$.A],emits:["showConnectionFromField","saveTemplate","markTableColumns"],props:{isPanelSection:{type:Boolean,default:!1}},data(){return{TABLE_OF_CHECKBOXES:Je.VV.TABLE_OF_CHECKBOXES}},components:{Label:Ie.A,CheckBox:Ee.A,TextInput:Oe.A,EnumInput:Se.A,ExportButton:Ne.A,MultiCheckBox:Ve.A,LineItemTable:Qe.A,TableOfCheckboxes:ze.A,AmountButtonsPanel:Ue.A,HorizontalSeparator:We.A,AditionalAmountButtonsPanel:Ye.A,ExtractedTableTabPanels:Ge.A,PoMatchButton:Pe.A,SaveRulesButton:Re.A,ExportWithoutValidation:$e.A,AutoAccountingButton:De.A,InvoiceButtons:He.A,QRCodeExtractedFields:Ke.A,RejectDocument:qe.A,draggable:xe.H},mounted:function(){document.addEventListener("add_field_to_designer",this.addFieldToDesigner),document.addEventListener("element_click",this.triggerFieldFocus)},unmounted:function(){document.removeEventListener("add_field_to_designer",this.addFieldToDesigner),document.removeEventListener("element_click",this.triggerFieldFocus)},methods:{itemAdded(e){if(!e.added)return;let o=e.added.element;if(this.keyToUpdateComponnets++,!o.hasOwnProperty("rows"))return void(this.formBuilderConfigModel[o.name]||this.updateModel(o));o.elementWidth=100,o.is_stcky_group=!1,o.right_border=!!this.isPanelSection,o.bottom_border=!!this.isPanelSection,o.is_panel_section_group=this.isPanelSection;let t=[];o.rows.forEach(((e,l)=>{e.forEach(((l,i)=>{l.elementWidth=o.name==Ae.P.charges?50:this.calculateRowColSize(e.length),t.push(l)}))})),o.rows=[],o.rows=t,this.formLayout.pop(),(0,Ae.UN)(this.docType)&&o.name==Ae.P.tax_details&&(this.filterFieldsForInvoices(o),this.adjustFieldsForInvoices(o)),this.formLayout.push(o)},filterFieldsForInvoices(e){for(let[o,t]of e.rows.entries())if(Je.fN.amountGroup1.includes(t.field_name)){e.rows.splice(o,0,Xe.o.data().AMOUNT_BUTTONS_PANEL);break}for(let[o,t]of e.rows.entries())if(Je.fN.aditionalAmountFields.includes(t.field_name)){e.rows.splice(o,0,Xe.o.data().ADITIONAL_AMOUNT_BUTTONS_PANEL);break}},adjustFieldsForInvoices(e){for(let[o,t]of e.rows.entries())Je.fN.amountPanelField.includes(t.field_name)?t.elementWidth=Math.round(this.calculateRowColSize(Je.fN.amountGroup1.length)):Je.fN.aditionalAmountFields.includes(t.field_name)&&(t.elementWidth=Math.round(this.calculateRowColSize(Je.fN.additionalAmountInRow)))},calculateRowColSize(e){return e>1?100/e:100},addGroup(){const e={fieldType:Je.VV.GROUP,name:"group_"+(0,Me.A)(),title:"",group_key:"",is_panel_section_group:this.isPanelSection,elementWidth:100,right_border:!!this.isPanelSection,bottom_border:!!this.isPanelSection,is_stcky_group:!1,short_cut_key_1:"",short_cut_key_2:"",rows:[]};this.formLayout.push(e),this.formBuilderConfigModel[e.name]=e},deleteSection(e){this.activeTab="form_elements",this.activeFieldName="",this.$nextTick((function(){this.formLayout.splice(e,1),this.reRenderGroupForm++}))},moveGroupUp(e,o){if(0==o)return;const t=o-1,l=JSON.parse(JSON.stringify(this.formLayout[o]));this.formLayout.splice(o,1),this.formLayout.splice(t,0,l),this.reRenderGroupForm++,this.$nextTick((function(){let e="div-"+t;document.getElementById(e).scrollIntoView()}))},moveGroupDown(e,o){if(this.formLayout.length==o)return;const t=o+1,l=JSON.parse(JSON.stringify(this.formLayout[o]));this.formLayout.splice(o,1),this.formLayout.splice(o+1,0,l),this.reRenderGroupForm++,this.$nextTick((function(){let e="div-"+t;document.getElementById(e).scrollIntoView()}))},removeField(e,o){if(e.stopPropagation(),this.formBuilderConfigModel[this.activeFieldName]&&this.formBuilderConfigModel[this.activeFieldName].isDefaultField)for(let t of this.defaultFields)if(t.name===this.activeFieldName){t.isAlreadyAdded=!1;break}this.formLayout[o].rows=this.formLayout[o].rows.filter((e=>e.name!==this.activeFieldName)),this.removeChildElements(this.formBuilderConfigModel[this.activeFieldName]),delete this.formBuilderConfigModel[this.activeFieldName],delete this.formBuilderModel[this.activeFieldName],this.activeFieldName="",this.activeTab="form_elements"},removeChildElements(e){try{if(!e.hasOwnProperty("child_elements")||!Array.isArray(e.child_elements))return;for(let[o,t]of Object.entries(e.child_elements)){const e=t;delete this.formBuilderConfigModel[e.name],delete this.formBuilderModel[e.name]}}catch(o){}},getElementBorder(e){let o="";return this.formBuilderConfigModel.hasOwnProperty(e.name)?(o=this.formBuilderConfigModel[e.name].right_border?" border-right":"",o+=this.formBuilderConfigModel[e.name].bottom_border?" border-bottom":"",o):(o=e.right_border?" border-right":"",o+=e.bottom_border?" border-bottom":"",o)},triggerFieldFocus(e){this.inputClicked(e.detail)},inputClicked(e){this.activeTab="element_properties",this.activeFieldName=e,Je.VV.TABLE_OF_CHECKBOXES!==this.formBuilderConfigModel[e].fieldType&&Je.VV.EXPORT_BUTTON!==this.formBuilderConfigModel[e].fieldType&&(this.setTrOcrModeld(e),this.allowAreaSelection&&this.showConnectionFromField(e))},setTrOcrModeld(e){this.formBuilderConfigModel[e].hasOwnProperty("tr_ocr_model_id")||(this.formBuilderConfigModel[e].tr_ocr_model_id="")},inputValueChanges(e,o){Je.VV.TABLE_OF_CHECKBOXES===o?this.$emit("showConnectionFromField",e):"checkbox"===o&&this.inputClicked(e),setTimeout((()=>{this.formBuilderModel[e].formatted_value=!1}),50)},updateModel(e,o=!1){if(this.formBuilderConfigModel[e.name]=JSON.parse(JSON.stringify(e)),e.fieldType===Je.VV.HORIZONTAL_SEPARATOR&&(e.hasOwnProperty("space_from_top")||e.hasOwnProperty("space_from_bottom")||(this.formBuilderConfigModel[e.name].space_from_top="q-mt-lg",this.formBuilderConfigModel[e.name].space_from_bottom="")),e.fieldType===Je.VV.EXTRACTED_TABLE&&(this.formBuilderModel[e.name]=JSON.parse(JSON.stringify(e))),e.fieldType===Je.VV.AI_EXTRACTED_TABLE&&(this.formBuilderModel[e.name]=JSON.parse(JSON.stringify(e))),e.fieldType!==Je.VV.TABLE_OF_CHECKBOXES){if(this.formBuilderModel[e.name]=[],this.formBuilderModel[e.name].page="",this.formBuilderModel[e.name].color="",this.formBuilderModel[e.name].score="",this.formBuilderModel[e.name].coords=[],this.formBuilderModel[e.name].confidence="",e.fieldType===Je.VV.MULTI_CHECK_BOX?(this.formBuilderModel[e.name].groupList=[],this.formBuilderModel[e.name].value="",this.formBuilderModel[e.name].formatted_value=""):e.fieldType===Je.VV.CHECK_BOX?(this.formBuilderModel[e.name].value=!1,this.formBuilderModel[e.name].formatted_value=!1,this.formBuilderConfigModel[e.name].hasOwnProperty("field_group")||(this.formBuilderConfigModel[e.name]["field_group"]=""),this.formBuilderConfigModel[e.name].hasOwnProperty("field_threshold")||(this.formBuilderConfigModel[e.name]["field_threshold"]=""),this.formBuilderConfigModel[e.name].hasOwnProperty("run_script_on_change")||(this.formBuilderConfigModel[e.name]["run_script_on_change"]=!1),this.formBuilderConfigModel[e.name].hasOwnProperty("tabIndex")||(this.formBuilderConfigModel[e.name]["tabIndex"]=0)):(this.formBuilderModel[e.name].value="",this.formBuilderModel[e.name].formatted_value="",this.formBuilderConfigModel[e.name].is_textarea=!!this.formBuilderConfigModel[e.name].is_textarea,this.formBuilderConfigModel[e.name].run_script_on_change=!!this.formBuilderConfigModel[e.name].run_script_on_change,this.formBuilderConfigModel[e.name].run_workflow_on_change=!!this.formBuilderConfigModel[e.name].run_workflow_on_change),this.formBuilderConfigModel[e.name].hasOwnProperty("tabIndex")||(this.formBuilderConfigModel[e.name].tabIndex=0),e.isDefaultField)for(let o of this.defaultFields)if(o.name===e.name){o.isAlreadyAdded=!0;break}o||(this.renderChildElements(e.name),this.activeFieldName=e.name)}else this.formBuilderConfigModel[e.name].tableBodyRows.forEach(((e,o)=>{e.forEach(((e,o)=>{e.hasOwnProperty("field_group")||(e["field_group"]=""),e.hasOwnProperty("field_threshold")||(e["field_threshold"]=""),e.hasOwnProperty("run_script_on_change")||(e["run_script_on_change"]=!1),e.hasOwnProperty("tabIndex")||(e["tabIndex"]=0),this.formBuilderModel[e.name]=JSON.parse(JSON.stringify(e)),this.formBuilderConfigModel[e.name]=JSON.parse(JSON.stringify(e))}))}))},applyFuzzySearch(e){return null},markTableColumns(e){this.$emit("markTableColumns",e)},showConnectionFromField(e){Je.iS.includes(this.formBuilderConfigModel[e].fieldType)&&this.$emit("showConnectionFromField",e)},addTableRow(e){let o=JSON.parse(JSON.stringify(Je.S$));for(let t of o)t.name="checkbox_"+(0,Me.A)(),t.formatted_value=!1,t.value=!1,t.fieldType=Je.VV.CHECK_BOX,this.formBuilderConfigModel[t.name]=[],this.formBuilderConfigModel[t.name]=JSON.parse(JSON.stringify(t)),this.formBuilderModel[t.name]=[],this.formBuilderModel[t.name].page="",this.formBuilderModel[t.name].color="",this.formBuilderModel[t.name].score="",this.formBuilderModel[t.name].coords=[],this.formBuilderModel[t.name].value=!1,this.formBuilderModel[t.name].confidence="",this.formBuilderModel[t.name].formatted_value=!1;this.formBuilderConfigModel[e].tableBodyRows.push(o)},addTableColumn(e){for(let o of this.formBuilderConfigModel[e].tableBodyRows){let e={isLabelArea:!1,isDisabled:!1,name:(0,Me.A)()};o.push(e)}for(let o of this.formBuilderConfigModel[e].tableHeaderRows)o.push("C")}},setup(){const e=(0,Z.uL)(),{docType:o,showImages:t,activeTab:l,formLayout:i,defaultFields:s,formBuilderModel:a,formBuilderConfigModel:r,activeFieldName:d,keyToUpdateComponnets:n,renderComponent:m,formLayoutImages:c,isExtenedPanel:u,allowAreaSelection:h,isDefaultFieldLoaded:p,reRenderGroupForm:f}=(0,D.bP)(e),{getElementWidth:g,renderChildElements:_}=e;return{renderChildElements:_,docType:o,activeTab:l,showImages:t,formLayout:i,defaultFields:s,activeFieldName:d,renderComponent:m,formBuilderModel:a,formLayoutImages:c,reRenderGroupForm:f,isDefaultFieldLoaded:p,keyToUpdateComponnets:n,formBuilderConfigModel:r,allowAreaSelection:h,isExtenedPanel:u,getElementWidth:g}}});var Ze=t(66908),eo=t(67837),oo=t(67156);const to=(0,ie.A)(je,[["render",Le],["__scopeId","data-v-d7c829de"]]),lo=to;me()(je,"components",{QIcon:re.A,QTooltip:de.A,QToggle:Ze.A,QInput:eo.A,QBtn:se.A,QField:oo.A});const io={key:0,class:"full-width"},so={class:"row"},ao=["src"],ro={class:""};function no(e,o,t,s,a,r){const d=(0,l.g2)("draggable");return e.filteredFields.length>0?((0,l.uX)(),(0,l.CE)("div",io,[(0,l.bF)(d,{list:e.filteredFields,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.filteredFields,((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm cursor-pointer mt-5 border-radius-5px"},[(0,l.Lk)("div",so,[(0,l.Lk)("img",{src:e.icon,width:"14",class:"q-mr-sm"},null,8,ao),(0,l.Lk)("div",ro,(0,i.v_)(e.text),1)])])))),128))])),_:1},8,["list"])])):(0,l.Q3)("",!0)}var mo=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{d(l.next(e))}catch(o){s(o)}}function r(e){try{d(l["throw"](e))}catch(o){s(o)}}function d(e){e.done?t(e.value):i(e.value).then(a,r)}d((l=l.apply(e,o||[])).next())}))};const co=(0,l.pM)({name:"Elements",components:{draggable:xe.H},data(){return{tables:(0,J.KR)(Xe.o.data().tables),fields:(0,J.KR)(Xe.o.data().fields),dropElementOptions:Xe.o.data().dropElementOptions}},mounted(){this.init()},methods:{init(){this.prepareTables(),this.filteredFields=this.fields.filter((e=>0==e.hide_in_panel_list||void 0==e.hide_in_panel_list))},prepareTables(){return mo(this,void 0,void 0,(function*(){const e=this.$route.params.doc_type;yield this.getDocumentTables(String(this.$route.params.doc_type));for(let[o,t]of Object.entries(this.documentTables))this.tables[0].name=o,this.tables[0].text="Table ("+o+")","INVOICE"==e&&(this.tables[0].fieldType=Je.VV.LINE_ITEM_TABLE),this.documentTableNames.push(o)}))},checkStopDragCondition(e){}},setup(){const e=(0,Z.uL)(),{documentTables:o,documentTableNames:t}=(0,D.bP)(e),{getDocumentTables:l}=e;return{documentTables:o,documentTableNames:t,getDocumentTables:l,filteredFields:(0,J.KR)([])}}}),uo=(0,ie.A)(co,[["render",no],["__scopeId","data-v-b2ba847a"]]),ho=uo;me()(co,"components",{QBtn:se.A});var po=t(11470);const fo={class:"full-width"},go={class:"row"},_o={class:""};function vo(e,o,t,s,a,r){const d=(0,l.g2)("q-icon"),n=(0,l.g2)("draggable");return(0,l.uX)(),(0,l.CE)("div",fo,[(0,l.bF)(n,{list:e.defaultGroups,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.defaultGroups,((o,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm cursor-pointer mt-5 border-radius-5px"},[(0,l.Lk)("div",go,[(0,l.bF)(d,{name:"workspaces",size:"sm",class:"q-mr-sm"}),(0,l.Lk)("div",_o,(0,i.v_)(e.getLabelForFormBuilder(o,"pages.screen2a.")),1)])])))),128))])),_:1},8,["list"])])}var bo=t(25891);const yo=(0,l.pM)({name:"GroupElements",mixins:[j.A,$.A,bo.A],components:{draggable:xe.H},data(){return{}},setup(){const e=(0,Z.uL)(),{defaultGroups:o}=(0,D.bP)(e);return{defaultGroups:o}}}),Co=(0,ie.A)(yo,[["render",vo],["__scopeId","data-v-6cb3b572"]]),ko=Co;me()(yo,"components",{QIcon:re.A,QBtn:se.A});const To={class:"full-width"},wo={class:"full-width"},Fo={class:"row"},Bo={class:"width-20px"},Lo=["src"],Mo={class:"width-100-10px"},xo={class:"full-width"},Io={class:"full-width text-grey-6"};function Eo(e,o,t,s,a,r){const d=(0,l.g2)("q-input"),n=(0,l.g2)("draggable");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",To,[(0,l.bF)(d,{modelValue:e.searchInput,"onUpdate:modelValue":o[0]||(o[0]=o=>e.searchInput=o),class:"q-pt-md q-pb-md",dense:"",autofocus:"",label:e.$t("pages.user.search"),outlined:""},null,8,["modelValue","label"])]),(0,l.Lk)("div",wo,[(0,l.bF)(n,{list:e.filteredFields,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.filteredFields,((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:"col-sm-12 col-md-12 col-lg-12 cursor-pointer q-pa-sm mt-5 border-radius-5px"},[(0,l.Lk)("div",Fo,[(0,l.Lk)("div",Bo,[(0,l.Lk)("img",{src:e.icon,width:"14"},null,8,Lo)]),(0,l.Lk)("div",Mo,[(0,l.Lk)("div",xo,(0,i.v_)(e.label),1),(0,l.Lk)("div",Io,(0,i.v_)(" ("+e.field_name+")"),1)])])])))),128))])),_:1},8,["list"])])],64)}var Ao=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{d(l.next(e))}catch(o){s(o)}}function r(e){try{d(l["throw"](e))}catch(o){s(o)}}function d(e){e.done?t(e.value):i(e.value).then(a,r)}d((l=l.apply(e,o||[])).next())}))};const No=(0,l.pM)({name:"DefaultElements",mixins:[j.A,$.A,bo.A],components:{draggable:xe.H},data(){return{searchInput:""}},watch:{searchInput(e){for(let o of this.defaultFields)o.isSearched=""===e||null==e||o.label.toLowerCase().includes(e.toLowerCase())}},computed:{filteredFields(){return this.defaultFields.filter((e=>!e.isHidden&&e.isSearched&&!e.isAlreadyAdded))}},mounted(){this.init()},methods:{init(){return Ao(this,void 0,void 0,(function*(){this.hideLoading();try{yield this.loadDocumentDefaultFields(this.$route.params.doc_type),this.isDefaultFieldLoaded=!0}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}))}},setup(){const e=(0,Z.uL)(),{defaultFields:o,isDefaultFieldLoaded:t}=(0,D.bP)(e),{loadDocumentDefaultFields:l}=e;return{defaultFields:o,isDefaultFieldLoaded:t,loadDocumentDefaultFields:l}}}),Oo=(0,ie.A)(No,[["render",Eo],["__scopeId","data-v-87f00666"]]),So=Oo;me()(No,"components",{QInput:eo.A,QBtn:se.A});const Vo=e=>((0,l.Qi)("data-v-637a632a"),e=e(),(0,l.jt)(),e),Po={key:0,class:"row"},Xo={class:"row col-12"},Uo={class:"col-7 q-ml-md q-pt-sm"},Ro={key:0,class:"row col-12"},qo={class:"col-4 q-ml-md q-pt-sm"},Do={key:1,class:"row col-12"},$o={class:"col-7 q-ml-md q-pt-sm"},Qo={key:2,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},zo={key:3,class:"full-width"},Wo={class:"col-sm-12 col-md-12 col-lg-12"},Ho=Vo((()=>(0,l.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12"},null,-1))),Ko={class:"row"},Yo={class:"q-pt-sm q-ml-md col-7"},Go={class:"col-sm-12 col-md-12 col-lg-12"},Jo=Vo((()=>(0,l.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12"},null,-1))),jo={class:"row"},Zo={class:"q-ml-md col-7 q-pt-sm"},et={class:"col-sm-12 col-md-12 col-lg-12"},ot=Vo((()=>(0,l.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12"},null,-1))),tt={class:"row"},lt={class:"q-ml-md col-7 q-pt-sm"},it={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},st=Vo((()=>(0,l.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Pleae Define ShotCut For group ",-1))),at={class:"row"},rt={class:"col-5 q-pr-sm"},dt={class:"col-5 q-pl-sm"},nt={class:"col-2 q-pl-sm"},mt={key:4,class:"full-width"},ct={key:0,class:"col-sm-12 col-md-12 col-lg-12"},ut={class:"row"},ht={class:"col-7 q-ml-md q-pt-sm"},pt={class:"row"},ft={class:"col-7 q-ml-md q-pt-sm"},gt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},_t={class:"col-sm-12 col-md-12 col-lg-12"},vt={class:"col-sm-12 col-md-12 col-lg-12"},bt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},yt={class:"col-sm-12 col-md-12 col-lg-12"},Ct={class:"col-sm-12 col-md-12 col-lg-12"},kt={key:1,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Tt={class:"col-sm-12 col-md-12 col-lg-12"},wt={class:"col-sm-12 col-md-12 col-lg-12"},Ft={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Bt={class:"col-sm-12 col-md-12 col-lg-12"},Lt={class:"col-sm-12 col-md-12 col-lg-12"},Mt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},xt={class:"col-sm-12 col-md-12 col-lg-12"},It={class:"col-sm-12 col-md-12 col-lg-12"},Et={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},At={class:"col-sm-12 col-md-12 col-lg-12"},Nt={class:"col-sm-12 col-md-12 col-lg-12"},Ot={key:6,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},St=Vo((()=>(0,l.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Tab Index ",-1))),Vt={class:"col-sm-12 col-md-12 col-lg-12"},Pt={key:7,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Xt=Vo((()=>(0,l.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Field Group ",-1))),Ut={class:"col-sm-12 col-md-12 col-lg-12"},Rt={key:8,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},qt=Vo((()=>(0,l.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Field Threshold ",-1))),Dt={class:"col-sm-12 col-md-12 col-lg-12"},$t={key:9,class:"row q-pt-md"},Qt={class:"col-sm-5 col-md-5 col-lg-5 q-pa-sm"},zt={class:"col-sm-5 col-md-5 col-lg-5 q-pa-sm"},Wt=Vo((()=>(0,l.Lk)("div",{class:"col-sm-2 col-md-2 col-lg-2"},null,-1))),Ht={class:"col-sm-5 col-md-5 col-lg-5 q-pa-sm"},Kt={class:"col-sm-5 col-md-5 col-lg-5 q-pa-sm"},Yt={class:"col-sm-2 col-md-2 col-lg-2"},Gt={class:"col-sm-12 col-md-12 col-lg-12"},Jt={key:10,class:"full-width"},jt={key:1,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Zt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},el={key:0,class:"col-sm-12 col-md-12 col-lg-12"},ol={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},tl={class:"col-sm-12 col-md-12 col-lg-12"},ll={class:"col-sm-12 col-md-12 col-lg-12"},il={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},sl={class:"col-sm-12 col-md-12 col-lg-12"},al={class:"col-sm-12 col-md-12 col-lg-12"},rl={key:3,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"};function dl(e,o,t,s,a,r){const d=(0,l.g2)("q-toggle"),n=(0,l.g2)("q-select"),m=(0,l.g2)("q-tooltip"),c=(0,l.g2)("q-icon"),u=(0,l.g2)("q-input"),h=(0,l.g2)("keyboardShortcutInfoBtn"),p=(0,l.g2)("q-btn"),f=(0,l.g2)("PropertiesOfTableOfCheckboxes"),g=(0,l.g2)("q-checkbox"),_=(0,l.g2)("PropertiesOfExtractedTable");return(0,l.uX)(),(0,l.CE)(l.FK,null,[e.activeFieldName?((0,l.uX)(),(0,l.CE)("div",Po,[(0,l.Lk)("div",Xo,[(0,l.Lk)("span",Uo,(0,i.v_)(e.$t("run_workflow_on_change")),1),(0,l.bF)(d,{class:"col-4",size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].run_workflow_on_change,"onUpdate:modelValue":o[0]||(o[0]=o=>e.formBuilderConfigModel[e.activeFieldName].run_workflow_on_change=o),val:"md"},null,8,["modelValue"])]),e.formBuilderConfigModel[e.activeFieldName].run_workflow_on_change?((0,l.uX)(),(0,l.CE)("div",Ro,[(0,l.Lk)("span",qo,(0,i.v_)(e.$t("workflow")),1),(0,l.bF)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].workflow_id_on_change,"onUpdate:modelValue":o[1]||(o[1]=o=>e.formBuilderConfigModel[e.activeFieldName].workflow_id_on_change=o),options:e.filter_workflow_list,onFilter:e.filterWorkflowlistEvent,label:e.$t("select_workflow"),class:"q-ml-md col-10",loading:e.workflow_loading,dense:"","emit-value":"","map-options":"",clearable:"","use-input":""},null,8,["modelValue","options","onFilter","label","loading"])])):(0,l.Q3)("",!0),e.isRunScriptEnabled()?((0,l.uX)(),(0,l.CE)("div",Do,[(0,l.Lk)("span",$o,(0,i.v_)(e.$t("run_script_on_change")),1),(0,l.bF)(d,{class:"col-4",size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].run_script_on_change,"onUpdate:modelValue":o[2]||(o[2]=o=>e.formBuilderConfigModel[e.activeFieldName].run_script_on_change=o),val:"md"},null,8,["modelValue"])])):(0,l.Q3)("",!0),e.isButtonType()?((0,l.uX)(),(0,l.CE)("div",Qo,[(0,l.bF)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].exportType,"onUpdate:modelValue":[o[3]||(o[3]=o=>e.formBuilderConfigModel[e.activeFieldName].exportType=o),o[4]||(o[4]=o=>{e.buttonTypeUpdated(o)})],options:e.options,label:"Select Button Type",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])):(0,l.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.GROUP?((0,l.uX)(),(0,l.CE)("div",zo,[(0,l.Lk)("div",Wo,[Ho,(0,l.Lk)("div",Ko,[(0,l.Lk)("span",Yo,(0,i.v_)(e.$t("is_stcky_group")),1),(0,l.bF)(d,{class:"col-4",size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].is_stcky_group,"onUpdate:modelValue":o[5]||(o[5]=o=>e.formBuilderConfigModel[e.activeFieldName].is_stcky_group=o),val:"md"},null,8,["modelValue"])])]),(0,l.Lk)("div",Go,[Jo,(0,l.Lk)("div",jo,[(0,l.Lk)("span",Zo,(0,i.v_)(e.$t("active_right_border")),1),(0,l.bF)(d,{class:"col-4",size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].right_border,"onUpdate:modelValue":o[6]||(o[6]=o=>e.formBuilderConfigModel[e.activeFieldName].right_border=o),val:"md"},null,8,["modelValue"])])]),(0,l.Lk)("div",et,[ot,(0,l.Lk)("div",tt,[(0,l.Lk)("span",lt,(0,i.v_)(e.$t("active_bottom_border")),1),(0,l.bF)(d,{class:"col-4",size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].bottom_border,"onUpdate:modelValue":o[7]||(o[7]=o=>e.formBuilderConfigModel[e.activeFieldName].bottom_border=o),val:"md"},null,8,["modelValue"])])]),(0,l.Lk)("div",it,[st,(0,l.Lk)("div",at,[(0,l.Lk)("div",rt,[(0,l.bF)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].short_cut_key_1,"onUpdate:modelValue":[o[8]||(o[8]=o=>e.formBuilderConfigModel[e.activeFieldName].short_cut_key_1=o),o[9]||(o[9]=o=>{e.onShortCutKeyUpdate(e.formBuilderConfigModel[e.activeFieldName].short_cut_key_2)})],options:e.shortCutKeyList,label:"Key 1",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])]),(0,l.Lk)("div",dt,[(0,l.bF)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].short_cut_key_2,"onUpdate:modelValue":[o[10]||(o[10]=o=>e.formBuilderConfigModel[e.activeFieldName].short_cut_key_2=o),o[11]||(o[11]=o=>{e.onShortCutKeyUpdate(o)})],class:(0,i.C4)(e.formBuilderConfigModel[e.activeFieldName].error?"column-error-border":"")},{append:(0,l.k6)((()=>[e.formBuilderConfigModel[e.activeFieldName].error?((0,l.uX)(),(0,l.Wv)(c,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{class:"bg-red line-error-tooltip"},{default:(0,l.k6)((()=>[e.formBuilderConfigModel[e.activeFieldName].error?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)(" Shortcut already in use. Press shift + k to check existing list. ")],64)):(0,l.Q3)("",!0)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["modelValue","class"])]),(0,l.Lk)("div",nt,[(0,l.bF)(h)])])])])):(0,l.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType!=e.GROUP&&e.formBuilderConfigModel[e.activeFieldName].fieldType!=e.TABLE_OF_CHECKBOXES?((0,l.uX)(),(0,l.CE)("div",mt,[e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT?((0,l.uX)(),(0,l.CE)("div",ct,[(0,l.Lk)("div",ut,[(0,l.Lk)("span",ht,(0,i.v_)(e.$t("display_label_left")),1),(0,l.bF)(d,{class:"col-4",size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft,"onUpdate:modelValue":o[12]||(o[12]=o=>e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft=o),val:"md"},null,8,["modelValue"])]),(0,l.Lk)("div",pt,[(0,l.Lk)("span",ft,(0,i.v_)(e.$t("is_textarea")),1),(0,l.bF)(d,{class:"col-4",size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].is_textarea,"onUpdate:modelValue":o[13]||(o[13]=o=>e.formBuilderConfigModel[e.activeFieldName].is_textarea=o),val:"md"},null,8,["modelValue"])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",gt,[(0,l.Lk)("div",_t,(0,i.v_)(e.$t("label")),1),(0,l.Lk)("div",vt,[(0,l.bF)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].label,"onUpdate:modelValue":o[14]||(o[14]=o=>e.formBuilderConfigModel[e.activeFieldName].label=o),disable:e.formBuilderConfigModel[e.activeFieldName].isDefaultField,onBlur:o[15]||(o[15]=o=>e.updateFieldName(e.activeFieldName))},null,8,["modelValue","disable"])])]),(0,l.Lk)("div",bt,[(0,l.Lk)("div",yt,(0,i.v_)(e.$t("field_name")),1),(0,l.Lk)("div",Ct,[(0,l.bF)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].name,"onUpdate:modelValue":o[17]||(o[17]=o=>e.formBuilderConfigModel[e.activeFieldName].name=o),disable:e.formBuilderConfigModel[e.activeFieldName].isDefaultField,onBlur:o[18]||(o[18]=o=>e.onFieldNameFocusLose(e.activeFieldName))},{after:(0,l.k6)((()=>[(0,l.bF)(c,{flat:"",dense:"",name:"fas fa-copy",size:"24px",class:"cursor-pointer",tabindex:"0",onClick:o[16]||(o[16]=o=>e.copyText(e.formBuilderConfigModel[e.activeFieldName].name))})])),_:1},8,["modelValue","disable"])])]),e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft?((0,l.uX)(),(0,l.CE)("div",kt,[(0,l.Lk)("div",Tt,(0,i.v_)(e.$t("label_width_percentage")),1),(0,l.Lk)("div",wt,[(0,l.bF)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].labelWidth,"onUpdate:modelValue":o[19]||(o[19]=o=>e.formBuilderConfigModel[e.activeFieldName].labelWidth=o),type:"number",rules:[o=>o>=3&&o<=100||e.$t("label_length_between_3_100")]},null,8,["modelValue","rules"])])])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0),(0,l.Lk)("div",Ft,[(0,l.Lk)("div",Bt,(0,i.v_)(e.$t("element_width_percentage")),1),(0,l.Lk)("div",Lt,[(0,l.bF)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].elementWidth,"onUpdate:modelValue":[o[20]||(o[20]=o=>e.formBuilderConfigModel[e.activeFieldName].elementWidth=o),o[21]||(o[21]=o=>{e.handleElementWidth(o)})],disable:e.formBuilderConfigModel[e.activeFieldName].fieldType===e.HORIZONTAL_SEPARATOR,type:"number",rules:[o=>o>=3&&o<=100||e.$t("field_length_between_3_100")]},null,8,["modelValue","disable","rules"])])]),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.HORIZONTAL_SEPARATOR?((0,l.uX)(),(0,l.CE)(l.FK,{key:5},[(0,l.Lk)("div",Mt,[(0,l.Lk)("div",xt,(0,i.v_)(e.$t("space_from_top")),1),(0,l.Lk)("div",It,[(0,l.bF)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].space_from_top,"onUpdate:modelValue":o[22]||(o[22]=o=>e.formBuilderConfigModel[e.activeFieldName].space_from_top=o),options:e.spaceFromTopList,label:e.$t("space_from_top"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])]),(0,l.Lk)("div",Et,[(0,l.Lk)("div",At,(0,i.v_)(e.$t("space_from_bottom")),1),(0,l.Lk)("div",Nt,[(0,l.bF)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].space_from_bottom,"onUpdate:modelValue":o[23]||(o[23]=o=>e.formBuilderConfigModel[e.activeFieldName].space_from_bottom=o),options:e.spaceFromBottomList,label:e.$t("space_from_bottom"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])])],64)):(0,l.Q3)("",!0),e.renderTabIndexField()?((0,l.uX)(),(0,l.CE)("div",Ot,[St,(0,l.Lk)("div",Vt,[(0,l.bF)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tabIndex,"onUpdate:modelValue":o[24]||(o[24]=o=>e.formBuilderConfigModel[e.activeFieldName].tabIndex=o),type:"number"},null,8,["modelValue"])])])):(0,l.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.CHECK_BOX?((0,l.uX)(),(0,l.CE)("div",Pt,[Xt,(0,l.Lk)("div",Ut,[(0,l.bF)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].field_group,"onUpdate:modelValue":o[25]||(o[25]=o=>e.formBuilderConfigModel[e.activeFieldName].field_group=o)},null,8,["modelValue"])])])):(0,l.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.CHECK_BOX?((0,l.uX)(),(0,l.CE)("div",Rt,[qt,(0,l.Lk)("div",Dt,[(0,l.bF)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].field_threshold,"onUpdate:modelValue":o[26]||(o[26]=o=>e.formBuilderConfigModel[e.activeFieldName].field_threshold=o)},null,8,["modelValue"])])])):(0,l.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.MULTI_CHECK_BOX?((0,l.uX)(),(0,l.CE)("div",$t,[(0,l.Lk)("div",Qt,(0,i.v_)(e.$t("label")),1),(0,l.Lk)("div",zt,(0,i.v_)(e.$t("value")),1),Wt,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.formBuilderConfigModel[e.activeFieldName].options,((o,t)=>((0,l.uX)(),(0,l.CE)(l.FK,{key:t},[(0,l.Lk)("div",Ht,[(0,l.bF)(u,{outlined:"",dense:"",modelValue:o.label,"onUpdate:modelValue":e=>o.label=e,onChange:o=>e.setOptionValue(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),(0,l.Lk)("div",Kt,[(0,l.bF)(u,{outlined:"",dense:"",modelValue:o.value,"onUpdate:modelValue":e=>o.value=e,disable:""},null,8,["modelValue","onUpdate:modelValue"])]),(0,l.Lk)("div",Yt,[e.formBuilderConfigModel[e.activeFieldName].options.length>2?((0,l.uX)(),(0,l.Wv)(p,{key:0,flat:"",size:"md",color:"primary",icon:"delete",onClick:o=>e.removeOption(t)},null,8,["onClick"])):(0,l.Q3)("",!0)])],64)))),128)),(0,l.Lk)("div",Gt,[(0,l.bF)(p,{flat:"",color:"primary",label:"Add More",icon:"add",onClick:o[27]||(o[27]=o=>e.addOption())})])])):(0,l.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TABLE_OF_CHECKBOXES?((0,l.uX)(),(0,l.CE)("div",Jt,[(0,l.bF)(f,{isColumnMode:e.isColumnMode,rowIndex:e.rowIndex,columnIndex:e.columnIndex},null,8,["isColumnMode","rowIndex","columnIndex"])])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0),e.renderModelDropdown()?((0,l.uX)(),(0,l.CE)("div",jt,[(0,l.bF)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tr_ocr_model_id,"onUpdate:modelValue":[o[28]||(o[28]=o=>e.formBuilderConfigModel[e.activeFieldName].tr_ocr_model_id=o),o[29]||(o[29]=o=>e.onUpdateTROCRModel())],options:e.model_list,label:e.$t("select_ai_type"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])):(0,l.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.Lk)("div",Zt,[(0,l.bF)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].list_of_values,"onUpdate:modelValue":[o[30]||(o[30]=o=>e.formBuilderConfigModel[e.activeFieldName].list_of_values=o),o[31]||(o[31]=o=>{e.onListOfValueSelect(o)})],options:e.lov_list,label:e.$t("select_list_of_values"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])]),e.formBuilderConfigModel[e.activeFieldName].list_of_values?((0,l.uX)(),(0,l.CE)("div",el,[(0,l.bF)(g,{label:e.$t("enforce_list_of_values"),modelValue:e.formBuilderConfigModel[e.activeFieldName].enforce_list_of_values,"onUpdate:modelValue":o[32]||(o[32]=o=>e.formBuilderConfigModel[e.activeFieldName].enforce_list_of_values=o),size:"30px",color:"grey-6"},null,8,["label","modelValue"])])):(0,l.Q3)("",!0),(0,l.Lk)("div",ol,[(0,l.Lk)("div",tl,(0,i.v_)(e.$t("field_length")),1),(0,l.Lk)("div",ll,[(0,l.bF)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].length,"onUpdate:modelValue":o[33]||(o[33]=o=>e.formBuilderConfigModel[e.activeFieldName].length=o),type:"number"},null,8,["modelValue"])])]),(0,l.Lk)("div",il,[(0,l.Lk)("div",sl,(0,i.v_)(e.$t("banned_keywords")),1),(0,l.Lk)("div",al,[(0,l.bF)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].banned_keywords,"onUpdate:modelValue":o[34]||(o[34]=o=>e.formBuilderConfigModel[e.activeFieldName].banned_keywords=o),label:e.$t("comma_seperated_keywords")},null,8,["modelValue","label"])])])],64)):(0,l.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.EXTRACTED_TABLE&&e.formBuilderConfigModel[e.activeFieldName].columns?((0,l.uX)(),(0,l.CE)("div",rl,[(0,l.bF)(_,{columnIndex:e.columnIndex},null,8,["columnIndex"])])):(0,l.Q3)("",!0)],64)}var nl=t(72281),ml=t(96056);const cl=(0,l.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12 q-pt-md text-primary"}," Columns Settings ",-1),ul={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},hl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},pl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"};function fl(e,o,t,i,s,a){const r=(0,l.g2)("q-select"),d=(0,l.g2)("q-toggle");return(0,l.uX)(),(0,l.CE)(l.FK,null,[cl,(0,l.Lk)("div",ul,[(0,l.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].tr_ocr_model_id,"onUpdate:modelValue":[o[0]||(o[0]=o=>e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].tr_ocr_model_id=o),o[1]||(o[1]=o=>e.onColumnUpdateTROCRModel(e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].col_id,e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].tr_ocr_model_id))],options:e.model_list,label:"KI Model ("+e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].name+")",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])]),(0,l.Lk)("div",hl,[(0,l.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].list_of_values,"onUpdate:modelValue":o[2]||(o[2]=o=>e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].list_of_values=o),options:e.lov_list,label:"list Of values ("+e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].name+")",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])]),(0,l.Lk)("div",pl,[(0,l.bF)(d,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].run_script_on_change,"onUpdate:modelValue":o[3]||(o[3]=o=>e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].run_script_on_change=o),val:"md",label:e.$t("run_script_on_change")+" ("+e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].name+")",class:"q-mt-sm"},null,8,["modelValue","label"])])],64)}const gl=(0,l.pM)({name:"PropertiesOfTableOfCheckboxes",props:{columnIndex:{type:Number,default:0}},data(){return{}},methods:{onColumnUpdateTROCRModel(e,o){const t=(0,q.$)("#col_"+e);t&&(o?t.classList.add("text-primary"):t.classList.remove("text-primary"))}},setup(){const e=(0,Z.uL)(),{formLayout:o,activeFieldName:t,formBuilderModel:l,formBuilderConfigModel:i}=(0,D.bP)(e),s=(0,Z.cY)(),{model_list:a}=(0,D.bP)(s),r=(0,Z.yM)(),{lov_list:d}=(0,D.bP)(r);return{lov_list:d,model_list:a,formLayout:o,activeFieldName:t,formBuilderModel:l,formBuilderConfigModel:i}}});var _l=t(94940);const vl=(0,ie.A)(gl,[["render",fl]]),bl=vl;me()(gl,"components",{QSelect:_l.A,QToggle:Ze.A});const yl={class:"col-sm-8 col-md-8 col-lg-8"},Cl={class:"col-sm-4 col-md-4 col-lg-4"},kl={key:1,class:"row q-pt-md"},Tl={class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm mt-5"},wl={key:0,class:"row"},Fl={key:1,class:"row"},Bl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Ll={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Ml=(0,l.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"}," Tab Index ",-1),xl={class:"col-sm-12 col-md-12 col-lg-12"},Il=(0,l.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"}," Field Group ",-1),El={class:"col-sm-12 col-md-12 col-lg-12"},Al=(0,l.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"}," Field Threshold ",-1),Nl={class:"col-sm-12 col-md-12 col-lg-12"},Ol={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Sl={class:"col-sm-12 col-md-12 col-lg-12"};function Vl(e,o,t,s,a,r){const d=(0,l.g2)("q-input"),n=(0,l.g2)("q-tooltip"),m=(0,l.g2)("q-btn"),c=(0,l.g2)("q-toggle"),u=(0,l.g2)("q-checkbox");return(0,l.uX)(),(0,l.CE)(l.FK,null,[e.isColumnMode?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(e.formBuilderConfigModel[e.activeFieldName].tableHeaderRows[e.rowIndex],((o,t)=>((0,l.uX)(),(0,l.CE)("div",{class:"row q-pt-md",key:t},[(0,l.Lk)("div",yl,[(0,l.bF)(d,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableHeaderRows[e.rowIndex][t],"onUpdate:modelValue":o=>e.formBuilderConfigModel[e.activeFieldName].tableHeaderRows[e.rowIndex][t]=o},null,8,["modelValue","onUpdate:modelValue"])]),(0,l.Lk)("div",Cl,[(0,l.bF)(m,{round:"",color:"primary",icon:"delete",size:"xs",class:"float-right",onClick:o=>e.deleteColumn(t)},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])])))),128)):(0,l.Q3)("",!0),e.isColumnMode?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",kl,[(0,l.Lk)("div",Tl,[e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].isLabelArea?((0,l.uX)(),(0,l.CE)("div",wl,[(0,l.bF)(d,{class:"full-width",outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].label,"onUpdate:modelValue":o[0]||(o[0]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].label=o)},null,8,["modelValue"])])):((0,l.uX)(),(0,l.CE)("div",Fl,[(0,l.Lk)("div",Bl,[(0,l.bF)(c,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].run_script_on_change,"onUpdate:modelValue":o[1]||(o[1]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].run_script_on_change=o),val:"md",label:e.$t("run_script_on_change")},null,8,["modelValue","label"])]),(0,l.Lk)("div",Ll,[(0,l.bF)(u,{modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].isDisabled,"onUpdate:modelValue":o[2]||(o[2]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].isDisabled=o),label:"is Disabled ?"},null,8,["modelValue"])]),Ml,(0,l.Lk)("div",xl,[(0,l.bF)(d,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].tabIndex,"onUpdate:modelValue":o[3]||(o[3]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].tabIndex=o),type:"number"},null,8,["modelValue"])]),Il,(0,l.Lk)("div",El,[(0,l.bF)(d,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].field_group,"onUpdate:modelValue":o[4]||(o[4]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].field_group=o)},null,8,["modelValue"])]),Al,(0,l.Lk)("div",Nl,[(0,l.bF)(d,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].field_threshold,"onUpdate:modelValue":o[5]||(o[5]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].field_threshold=o)},null,8,["modelValue"])]),(0,l.Lk)("div",Ol,(0,i.v_)(e.$t("name")),1),(0,l.Lk)("div",Sl,[(0,l.bF)(d,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].name].name,"onUpdate:modelValue":o[6]||(o[6]=o=>e.formBuilderConfigModel[e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].name].name=o),onBlur:o[7]||(o[7]=o=>e.onInputFocusLose(e.rowIndex,e.columnIndex))},null,8,["modelValue"])])]))])]))],64)}const Pl=(0,l.pM)({name:"PropertiesOfTableOfCheckboxes",props:{rowIndex:{type:Number,default:0},columnIndex:{type:Number,default:0},isColumnMode:{type:Boolean,default:!1}},data(){return{}},methods:{onInputFocusLose(e,o){const t=this.formBuilderConfigModel[this.activeFieldName].tableBodyRows[this.rowIndex][this.columnIndex].name,l=this.formBuilderConfigModel[t].name;t!==l&&(this.formBuilderConfigModel[l]=[],this.formBuilderConfigModel[l]=this.formBuilderConfigModel[t],this.formBuilderModel[l]=[],this.formBuilderModel[l]=this.formBuilderModel[t],delete this.formBuilderModel[t],delete this.formBuilderConfigModel[t],this.formBuilderConfigModel[this.activeFieldName].tableBodyRows[e][o].name=l)},deleteColumn(e){this.formBuilderConfigModel[this.activeFieldName].tableHeaderRows[this.rowIndex].tableBodyRows.splice(e,1);for(let o of this.formBuilderConfigModel[this.activeFieldName].tableBodyRows)o.splice(e,1)}},setup(){const e=(0,Z.uL)(),{activeFieldName:o,formBuilderModel:t,formBuilderConfigModel:l,formLayout:i}=(0,D.bP)(e);return{formLayout:i,activeFieldName:o,formBuilderModel:t,formBuilderConfigModel:l}}});var Xl=t(80460);const Ul=(0,ie.A)(Pl,[["render",Vl]]),Rl=Ul;me()(Pl,"components",{QInput:eo.A,QBtn:se.A,QTooltip:de.A,QToggle:Ze.A,QCheckbox:Xl.A});var ql=t(84050),Dl=t(91990);const $l=(0,l.pM)({name:"Properties",mixins:[ml.A,$.A,ql.A,nl.A],components:{keyboardShortcutInfoBtn:Dl.A,PropertiesOfExtractedTable:bl,PropertiesOfTableOfCheckboxes:Rl},data(){return{rowIndex:(0,J.KR)(0),columnIndex:(0,J.KR)(0),isColumnMode:(0,J.KR)(!0),selectedInput:(0,J.KR)(""),GROUP:Je.VV.GROUP,CHECK_BOX:Je.VV.CHECK_BOX,ENUM_INPUT:Je.VV.ENUM_INPUT,TEXT_INPUT:Je.VV.TEXT_INPUT,EXPORT_BUTTON:Je.VV.EXPORT_BUTTON,PO_MATCH_BUTTON:Je.VV.PO_MATCH_BUTTON,SAVE_RULES_BUTTON:Je.VV.SAVE_RULES_BUTTON,EXPORT_WITHOUT_VALIDATION_BUTTON:Je.VV.EXPORT_WITHOUT_VALIDATION_BUTTON,REJECT_DOCUMENT_BUTTON:Je.VV.REJECT_DOCUMENT_BUTTON,AUTO_ACCOUNTING_BUTTON:Je.VV.AUTO_ACCOUNTING_BUTTON,EXTRACTED_TABLE:Je.VV.EXTRACTED_TABLE,AI_EXTRACTED_TABLE:Je.VV.AI_EXTRACTED_TABLE,EXTRACTED_TABLE_TAB_PANELS:Je.VV.EXTRACTED_TABLE_TAB_PANELS,INVOICE_BUTTONS:Je.VV.INVOICE_BUTTONS,MULTI_CHECK_BOX:Je.VV.MULTI_CHECK_BOX,TABLE_OF_CHECKBOXES:Je.VV.TABLE_OF_CHECKBOXES,HORIZONTAL_SEPARATOR:Je.VV.HORIZONTAL_SEPARATOR,exiting_shortcut_keys:[]}},watch:{activeFieldName(e,o){e!=o&&(this.rowIndex=0,this.columnIndex=0,this.isColumnMode=!1)},workflow_loading(e,o){e!=o&&this.loadWorkflowFilteredList()}},mounted:function(){this.getModelList(),this.getLovList(),this.initDefaults(),this.exiting_shortcut_keys=this.fixedShortCutKeyList(),document.addEventListener("load_settings",this.loadSettings),document.addEventListener("load_settings_for_series",this.loadSettingsForSeries)},unmounted:function(){document.removeEventListener("load_settings",this.loadSettings),document.removeEventListener("load_settings_for_series",this.loadSettingsForSeries)},methods:{addOption(){const e={label:"Option",value:"op"};this.formBuilderConfigModel[this.activeFieldName].options.push(e)},removeOption(e){this.formBuilderConfigModel[this.activeFieldName].options.splice(e,1)},setOptionValue(e){this.formBuilderConfigModel[this.activeFieldName].options[e].value=this.stringReplaceWithString(this.formBuilderConfigModel[this.activeFieldName].options[e].label," ","")},loadSettings(e){this.rowIndex=e.detail.rowIndex,this.columnIndex=e.detail.columnIndex,this.isColumnMode=e.detail.isColumnMode},loadSettingsForSeries(e){const o=e.detail;if(o)for(const[t,l]of Object.entries(this.formBuilderConfigModel[this.activeFieldName].columns)){const e=l;if(e.col_id===o){this.columnIndex=+t;break}}},onFieldNameFocusLose(e){const o=this.formBuilderConfigModel[e].name;if(o!==e)if(this.validateField(o)){e:for(const t of this.formLayout)for(let l of t.rows)if(l.name===e){l.name=o;for(const[o,t]of Object.entries(this.formBuilderConfigModel[e]))"name"!==o&&(l[o]=t);break e}this.formBuilderConfigModel[o]={},this.formBuilderConfigModel[o]=JSON.parse(JSON.stringify(this.formBuilderConfigModel[e])),this.formBuilderModel[o]={},this.formBuilderModel[o]=JSON.parse(JSON.stringify(this.formBuilderModel[e])),this.activeFieldName=o,delete this.formBuilderModel[e],delete this.formBuilderConfigModel[e]}else this.formBuilderConfigModel[e].name=e},validateField(e){let o=!0;return""===e||null===e?(o=!1,this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY"))):this.hasWhiteSpace(e)?(o=!1,this.showErrorToast(this.$t("pages.messages.SPACES_NOT_ALLOWED"))):this.checkFirstLetterIsSpecialOrNumber(e)&&(o=!1,this.showErrorToast(this.$t("errors.special_letter_number_not_allowed"))),o},updateFieldName(e){const o=this.stringReplaceWithString(this.formBuilderConfigModel[e].label," ","_");o!==e&&(this.formBuilderConfigModel[e].name=o,this.onFieldNameFocusLose(e))},handleElementWidth(e){e>100?(this.formBuilderConfigModel[this.activeFieldName].elementWidth=100,this.showErrorToast(this.$t("field_length_between_3_100"))):e<3&&(this.formBuilderConfigModel[this.activeFieldName].elementWidth=3,this.showErrorToast(this.$t("field_length_between_3_100")))},renderModelDropdown(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.TEXT_INPUT||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.CHECK_BOX},onUpdateTROCRModel(){var e;const o=(0,q.$)("#"+this.activeFieldName);o&&(null===(e=o.closest(".element_parent"))||void 0===e||e.classList.toggle("text-primary"))},onColumnUpdateTROCRModel(e,o){const t=(0,q.$)("#col_"+e);t&&(o?t.classList.add("text-primary"):t.classList.remove("text-primary"))},renderTabIndexField(){return this.TEXT_INPUT===this.formBuilderConfigModel[this.activeFieldName].fieldType||this.CHECK_BOX===this.formBuilderConfigModel[this.activeFieldName].fieldType||this.MULTI_CHECK_BOX===this.formBuilderConfigModel[this.activeFieldName].fieldType},onShortCutKeyUpdate(e){e&&(e=e.toUpperCase());const o=this.formBuilderConfigModel[this.activeFieldName].short_cut_key_1,t=o.toUpperCase()+e;if(this.formBuilderConfigModel[this.activeFieldName].error=!1,!this.vaidateShortCutKey(t))return this.formBuilderConfigModel[this.activeFieldName].error=!0,void(this.formBuilderConfigModel[this.activeFieldName].short_cut_key_2="");this.formBuilderConfigModel[this.activeFieldName].short_cut_key_2=e.charAt(e.length-1)},vaidateShortCutKey(e){if(!e)return!0;const o=this.isUsedByOther(e);return!0!==o&&-1===this.exiting_shortcut_keys.indexOf(e)},isUsedByOther(e){let o=!1;for(const[t,l]of Object.entries(this.formBuilderConfigModel))"Group"===l.fieldType&&this.activeFieldName!=t&&e===l.short_cut_key_2.toUpperCase()&&(o=!0);return o},initDefaults(){const e=this.formBuilderConfigModel[this.activeFieldName].enforce_list_of_values;e||(this.formBuilderConfigModel[this.activeFieldName].enforce_list_of_values=!1)},onListOfValueSelect(e){e||(this.formBuilderConfigModel[this.activeFieldName].enforce_list_of_values=!1)},isRunScriptEnabled(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.TEXT_INPUT||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.ENUM_INPUT||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.CHECK_BOX},isButtonType(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.EXPORT_BUTTON||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.PO_MATCH_BUTTON||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.SAVE_RULES_BUTTON||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.COA_BUTTON||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.EXPORT_WITHOUT_VALIDATION_BUTTON||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.REJECT_DOCUMENT_BUTTON},buttonTypeUpdated(e){"po_match"===e&&(this.formBuilderConfigModel[this.activeFieldName].fieldType=Je.VV.PO_MATCH_BUTTON),"save_rules"===e&&(this.formBuilderConfigModel[this.activeFieldName].fieldType=Je.VV.SAVE_RULES_BUTTON),"export_without_validation"===e&&(this.formBuilderConfigModel[this.activeFieldName].fieldType=Je.VV.EXPORT_WITHOUT_VALIDATION_BUTTON),"reject"===e&&(this.formBuilderConfigModel[this.activeFieldName].fieldType=Je.VV.REJECT_DOCUMENT_BUTTON)},loadWorkflowFilteredList(){this.filter_workflow_list=this.workflow_list},filterWorkflowlistEvent(e,o,t){o(e?()=>{const o=e.toLowerCase();this.filter_workflow_list=this.workflow_list.filter((e=>e.label.toLowerCase().startsWith(o)))}:()=>{this.filter_workflow_list=this.workflow_list})}},setup(){const e=(0,Z.uL)(),{activeFieldName:o,formBuilderModel:t,formBuilderConfigModel:l,formLayout:i}=(0,D.bP)(e),s=(0,Z.cY)(),{getModelList:a}=s,{model_list:r}=(0,D.bP)(s),d=(0,Z.yM)(),{getLovList:n}=d,{lov_list:m}=(0,D.bP)(d),c=(0,Z.Tm)(),{workflow_loading:u,workflow_list:h}=(0,D.bP)(c);return{workflow_loading:u,workflow_list:h,filter_workflow_list:(0,J.KR)([]),lov_list:m,getLovList:n,model_list:r,formLayout:i,activeFieldName:o,formBuilderModel:t,formBuilderConfigModel:l,options:[{label:"Export",value:Ae.aH.export},{label:"Export mit Sonderwunsch",value:Ae.aH.export_with_sonderwunsche},{label:"Export Without Validation",value:Ae.aH.export_without_validation},{label:"PO Match",value:Ae.aH.po_match},{label:"Save Rules",value:Ae.aH.save_rules},{label:"Save",value:Ae.aH.save},{label:"Reject",value:Ae.aH.reject},{label:"Zurückgeben",value:Ae.aH.reject},{label:"Quotes Detail",value:Ae.aH.quotes_detail},{label:"Certificate of Analysis",value:Ae.aH.coa}],shortCutKeyList:[{label:"Shift",value:"shift"},{label:"Alt",value:"alt"}],spaceFromTopList:[{label:"None",value:""},{label:"Extra Small",value:"q-mt-xs"},{label:"Small",value:"q-mt-sm"},{label:"Medium",value:"q-mt-md"},{label:"Large",value:"q-mt-lg"},{label:"Extra Large",value:"q-mt-xl"}],spaceFromBottomList:[{label:"None",value:""},{label:"Extra Small",value:"q-mb-xs"},{label:"Small",value:"q-mb-sm"},{label:"Medium",value:"q-mb-md"},{label:"Large",value:"q-mb-lg"},{label:"Extra Large",value:"q-mb-xl"}],getModelList:a}}}),Ql=(0,ie.A)($l,[["render",dl],["__scopeId","data-v-637a632a"]]),zl=Ql;me()($l,"components",{QToggle:Ze.A,QSelect:_l.A,QInput:eo.A,QIcon:re.A,QTooltip:de.A,QBtn:se.A,QCheckbox:Xl.A});const Wl={class:"form-builder-settings"},Hl={class:"col-12"};function Kl(e,o,t,s,a,r){const d=(0,l.g2)("q-tooltip"),n=(0,l.g2)("q-icon"),m=(0,l.g2)("q-checkbox");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.eW)((0,i.v_)(e.$t("show_tab_index"))+" ",1),(0,l.bF)(n,{name:"help_outline",class:"help-sign cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,(0,i.v_)(e.$t("show_tab_index")),1)])),_:1})])),_:1}),(0,l.bF)(m,{modelValue:e.showTabIndex,"onUpdate:modelValue":o[0]||(o[0]=o=>e.showTabIndex=o)},null,8,["modelValue"]),(0,l.Lk)("div",Wl,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.fields,((o,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"row"},[(0,l.Lk)("div",Hl,[(0,l.eW)((0,i.v_)(e.$t(o.translation_key))+" ",1),o.has_help?((0,l.uX)(),(0,l.Wv)(n,{key:0,name:"help_outline",onClick:t=>e.scrollToHelpSection(o.help_id),class:"help-sign cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,(0,i.v_)(e.$t(o.help_tooltip_translation_key)),1)])),_:2},1024)])),_:2},1032,["onClick"])):(0,l.Q3)("",!0),((0,l.uX)(),(0,l.Wv)((0,l.$y)(o.type),{outlined:"","field-name":o.name,modelValue:e.settings[o.name],"onUpdate:modelValue":t=>e.settings[o.name]=t},null,8,["field-name","modelValue","onUpdate:modelValue"]))])])))),128))])],64)}var Yl=t(16774),Gl=t(64307);const Jl=(0,l.pM)({name:"Properties",mixins:[ml.A,$.A,Gl.A],components:{QCheckbox:Xl.A,QInput:eo.A},data(){return{fields:Yl.O}},methods:{},setup(){const e=(0,Z.XB)(),{settings:o}=(0,D.bP)(e),{setGeneralSettings:t}=e,l=(0,Z.uL)(),{showTabIndex:i}=(0,D.bP)(l);return{showTabIndex:i,settings:o,setGeneralSettings:t}}}),jl=(0,ie.A)(Jl,[["render",Kl]]),Zl=jl;function ei(e,o,t,i,s,a){const r=(0,l.g2)("f-btn");return(0,l.uX)(),(0,l.Wv)(r,{label:e.$t("auto_generate_template"),class:"float-right q-mr-md",onClick:o[0]||(o[0]=o=>e.autoGenerateTemplate())},null,8,["label"])}me()(Jl,"components",{QIcon:re.A,QTooltip:de.A,QCheckbox:Xl.A,QField:oo.A});const oi=(0,l.pM)({name:"auto-generate-default-layout",mixins:[],components:{},data(){return{buttonObj:(0,J.KR)(Xe.o.data().buttonObj)}},methods:{autoGenerateTemplate(){this.formLayout=[],this.formBuilderModel=[],this.formBuilderConfigModel=[];let e=JSON.parse(JSON.stringify(this.defaultGroups));for(let l of e){l.elementWidth=100,l.is_stcky_group=!1,l.right_border=!1,l.bottom_border=!1,l.is_panel_section_group=!1;let e=[];l.rows.forEach(((o,t)=>{o.forEach(((o,t)=>{o.elementWidth=50,e.push(o)}))})),l.rows=[],l.rows=e,e&&e.length>0&&this.formLayout.push(l)}const o=this.formLayout.length-1;let t=this.formLayout[o];t.rows||(t.rows=[]),t.rows.push(this.prepareExportButton()),t.rows.push(this.prepareSaveRulesButton());for(let l of this.defaultFields)l.isAlreadyAdded=!1;this.reRenderGroupForm++},prepareExportButton(){const e=JSON.parse(JSON.stringify(this.buttonObj));return e.name="export",e.label="Export",e.text="Export",e.exportType="export",e.translation_key="export_btn",e.fieldType=Je.VV.EXPORT_BUTTON,e},prepareSaveRulesButton(){const e=JSON.parse(JSON.stringify(this.buttonObj));return e.name="save_rules",e.label="Save Rules",e.text="Save Rules",e.exportType="save_rules",e.translation_key="save_rules_btn",e.fieldType=Je.VV.SAVE_RULES_BUTTON,e}},setup(){const e=(0,Z.uL)(),{defaultGroups:o,formLayout:t,formBuilderModel:l,formBuilderConfigModel:i,reRenderGroupForm:s,defaultFields:a}=(0,D.bP)(e);return{formLayout:t,defaultFields:a,defaultGroups:o,formBuilderModel:l,reRenderGroupForm:s,formBuilderConfigModel:i}}}),ti=(0,ie.A)(oi,[["render",ei]]),li=ti;var ii=t(72608),si=t(29104);const ai=e=>((0,l.Qi)("data-v-829518a4"),e=e(),(0,l.jt)(),e),ri={class:"image-decorator",ref:"image-area",id:"image_area"},di={id:"screenshot_container"},ni=["src","width"],mi=["onMousedown","onMousemove"],ci=["id"],ui=["onClick"],hi=["onClick"],pi=ai((()=>(0,l.Lk)("div",{class:"select-areas--delete_area"},null,-1))),fi=[pi],gi={class:"c-crop--hide_main"},_i=["src","width"];function vi(e,o,t,s,a,r){const d=(0,l.g2)("Resizable");return(0,l.uX)(),(0,l.CE)("div",ri,[(0,l.Lk)("div",di,[e.url?((0,l.uX)(),(0,l.CE)("img",{key:0,onLoad:o[0]||(o[0]=(...o)=>e.prepareImageData&&e.prepareImageData(...o)),id:"screenshot",class:"original-image",src:e.url,alt:"Original Image",width:e.width},null,40,ni)):(0,l.Q3)("",!0),(0,l.Lk)("div",{class:"select-areas--overlay",style:(0,i.Tr)({opacity:e.opacityOverlay,position:"absolute",width:e.originImgSize.w+"px",height:e.originImgSize.h+"px",display:"block"})},null,4),(0,l.Lk)("div",{class:"pointer-events-none",id:"draw",style:(0,i.Tr)({"background-color":"rgb(0, 0, 0)",opacity:0,position:"absolute",width:e.originImgSize.w+"px",height:e.originImgSize.h+"px"}),onMousedown:o[1]||(o[1]=(...o)=>e.mouseDown&&e.mouseDown(...o)),onMousemove:o[2]||(o[2]=(...o)=>e.mouseMove&&e.mouseMove(...o))},null,36),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.areas,(o=>((0,l.uX)(),(0,l.CE)("div",{key:o.id},[(0,l.Lk)("div",{onMousedown:(0,si.D$)((t=>e.startMove(o,t)),["stop","prevent"]),onMousemove:t=>e.doMove(o,t)},[(0,l.Lk)("div",{id:"table"==o.areaType?o.connectionId+"_"+o.id+"_rect":o.connectionId+"_rect",class:"select-areas--outline",style:(0,i.Tr)({opacity:e.opacityOutline,position:"absolute",cursor:"default",width:o.width+4+"px",height:o.height+4+"px",left:e.areaDisplayPosX(o)-2+"px",top:e.areaDisplayPosY(o)-2+"px","z-index":o.z})},null,12,ci),(0,l.Lk)("div",{class:"select-areas--background_area",style:(0,i.Tr)({background:`#fff url('${e.url}') -${o.x}px -${o.y}px / ${e.originImgSize.w}px ${e.originImgSize.h}px no-repeat`,position:"absolute",cursor:o.connectionId==e.connectionId?"move":"pointer",width:o.width+"px",height:o.height+"px",left:e.areaDisplayPosX(o)+"px",top:e.areaDisplayPosY(o)+"px","z-index":o.z+2}),onClick:t=>e.changeResizable(o.id)},null,12,ui),"table"==o.areaType&&o.resizable&&o.connectionId==e.connectionId?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"delete-area",style:(0,i.Tr)({display:"block",left:e.areaDisplayPosX(o)+o.width+"px",top:e.areaDisplayPosY(o)-25+"px","z-index":o.z+2}),onClick:t=>e.deleteSelected(o.id)},fi,12,hi)):(0,l.Q3)("",!0),o.connectionId==e.connectionId?((0,l.uX)(),(0,l.Wv)(d,{key:1,item:o,posImg:e.posImg,"pos-correction":e.posCorrection,onStartDrag:e.startDrag,onDoDrag:e.doDrag},null,8,["item","posImg","pos-correction","onStartDrag","onDoDrag"])):(0,l.Q3)("",!0)],40,mi)])))),128))]),(0,l.Lk)("div",gi,[(0,l.Lk)("img",{id:"c-crop--hide_img",src:e.url,alt:"",width:e.width},null,8,_i)])],512)}var bi=t(57034),yi=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{d(l.next(e))}catch(o){s(o)}}function r(e){try{d(l["throw"](e))}catch(o){s(o)}}function d(e){e.done?t(e.value):i(e.value).then(a,r)}d((l=l.apply(e,o||[])).next())}))};let Ci,ki,Ti;const wi=(0,l.pM)({data(){return{mousedown:!1,originImgSize:{w:0,h:0,r:0},url:this.cropUrl,posImg:{top:0,left:0},areas:[{id:1,x:10,y:10,startX:10,startY:10,width:10,height:10,z:0,connectionId:"",areaType:"input",resizable:!1}],latestAreaItem:{startX:0,startY:0,endX:0,endY:0},scrollLeft:0,scrollTop:0,moveTempX:0,moveTempY:0,moveCurrentX:0,moveCurrentY:0,temp:0,dragdown:!1,move:!1,imageHeight:0,imageWidth:0}},props:{cropUrl:{type:String,default:"https://dev.doc2api.cloudintegration.eu/resource/image/1b90b6d5-63b5-446b-92a4-a60d57dc0edd/1.png"},width:{type:Number,default:1500},opacityOutline:{type:Number,default:.2},opacityOverlay:{type:Number,default:.2},posCorrection:{type:Boolean,default:!0},markedAreasStr:{type:String,default:""},connectionId:{type:String,default:""},allowMultiSelection:{type:Boolean,default:!1}},components:{Resizable:bi.A},mixins:[$.A],emits:["restrictDrawing"],watch:{cropUrl(e){this.url=e,setTimeout((()=>{this.setSize()}),200)},markedAreasStr(e){this.prepareDataForAreas()},width(e){return yi(this,void 0,void 0,(function*(){yield this.setSize(),this.prepareImageData()}))}},methods:{areaDisplayPosX(e){return e.x+(this.posCorrection?this.posImg.left:0)},areaDisplayPosY(e){return e.y+(this.posCorrection?this.posImg.top:0)},mousePosX(e){return e.pageX-this.posImg.left},mousePosY(e){return e.pageY-this.posImg.top},setSize(){return yi(this,void 0,void 0,(function*(){if(!this.url)return;let e=yield this.getSize(this.url);this.originImgSize=e}))},getSize(e){let o=this.$el.querySelector("#c-crop--hide_img");return new Promise((t=>{e&&o?(o.onload=function(){const e=Ci.getSizeImg(o);t(e)},o.src=e):t({w:0,h:0,r:0})}))},getSizeImg(e){let o=e.width,t=e.height,l=0===o&&0===t?0:o/t;return{w:o,h:t,r:l}},calcPosOfBox(){let e=this.$refs["image-area"];this.scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,this.scrollTop=window.pageYOffset||document.documentElement.scrollTop;let o=e.getBoundingClientRect().top,t=e.getBoundingClientRect().left;this.posImg.top=o+this.scrollTop,this.posImg.left=t+this.scrollLeft},mouseDown(e){this.mousedown=!0;let o=null;if(o=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,0!=this.latestAreaItem.startX&&0!=this.latestAreaItem.startY){let t=this.latestAreaItem.startX,l=this.latestAreaItem.startY,i=e.layerX,s=e.layerY,a=i-t,r=s-l;(a<0||r<0)&&(i=t,s=l,t=e.layerX,l=e.layerY,a=i-t,r=s-l);let d={id:o,x:t,y:l,startX:t,startY:l,width:a,height:r,z:0,connectionId:this.connectionId,areaType:this.allowMultiSelection?"table":"input",resizable:!1};return this.areas.push(d),this.temp=d.id,void(this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})}if(o){let t={id:o,x:this.mousePosX(e),y:this.mousePosY(e),startX:this.mousePosX(e),startY:this.mousePosY(e),width:0,height:0,z:0,connectionId:this.connectionId,areaType:this.allowMultiSelection?"table":"input",resizable:!1};this.areas.push(t),this.temp=t.id,this.latestAreaItem.startX=this.mousePosX(e),this.latestAreaItem.startY=this.mousePosY(e),this.latestAreaItem.endX=0,this.latestAreaItem.endY=0}},mouseMove(e){this.mousedown&&(this.areas.filter((e=>e.id===this.temp)).map((o=>{let t=e.pageX-this.posImg.left,l=e.pageY-this.posImg.top,i=o.startX-t,s=o.startY-l;i<0&&(i*=-1,t-=i),s<0&&(s*=-1,l-=s),o.x=t,o.y=l,o.width=i,o.height=s})),this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})},mouseUp(){this.mousedown=!1,this.areas=this.areas.filter((e=>e.width>=3&&e.height>=3)),this.endMove(),this.endDrag(),this.prepareMarkedAreasList(),this.allowMultiSelection||this.$emit("restrictDrawing")},changeResizable(e){this.areas.filter((o=>o.id===e)).map((e=>{e.resizable=!0,e.z=100})),this.areas.filter((o=>o.id!==e)).map((e=>{e.resizable=!1,e.z=0}))},deleteSelected(e){this.areas=this.areas.filter((o=>o.id!==e)),this.prepareMarkedAreasList()},startDrag(){this.dragdown=!0},doDrag(e,o,t){if(this.dragdown)switch(o){case"w":t.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-t.pageX+this.posImg.left,e.x=t.pageX-this.posImg.left),e.width<10&&(e.x=e.x-10,e.width=e.width+10);break;case"sw":t.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-t.pageX+this.posImg.left,e.x=t.pageX-this.posImg.left),t.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=t.pageY-this.posImg.top-e.y),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=10);break;case"s":t.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=t.pageY-this.posImg.top-e.y),e.height<10&&(e.height=10);break;case"se":t.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=t.pageX-this.posImg.left-e.x),t.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=t.pageY-this.posImg.top-e.y),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=10);break;case"e":t.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=t.pageX-this.posImg.left-e.x),e.width<10&&(e.x=e.x-10,e.width=e.width+10);break;case"ne":t.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=t.pageX-this.posImg.left-e.x),t.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-t.pageY),e.y=t.pageY-this.posImg.top),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"n":t.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-t.pageY),e.y=t.pageY-this.posImg.top),e.height<10&&(e.height=e.height+10);break;case"nw":t.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-t.pageY),e.y=t.pageY-this.posImg.top),t.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-t.pageX+this.posImg.left,e.x=t.pageX-this.posImg.left),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;default:break}},endDrag(){this.dragdown=!1},startMove(e,o){this.move=!0,e.connectionId==this.connectionId&&(this.moveTempX=o.clientX,this.moveTempY=o.clientY,this.moveCurrentX=e.x,this.moveCurrentY=e.y)},doMove(e,o){if(e.connectionId==this.connectionId&&this.move){let t=this.moveCurrentX+(o.clientX-this.moveTempX),l=this.moveCurrentY+(o.clientY-this.moveTempY),i=this.originImgSize.w-e.width,s=this.originImgSize.h-e.height;t>0&&l>0&&t<i&&l<s&&(e.x=t,e.y=l)}},endMove(){this.move=!1},creatReactangle(e,o,t,l,i,s){let a=null;if(a=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,a){let r={id:a,x:e,y:o,startX:e,startY:o,width:t,height:l,z:0,connectionId:i,areaType:s,resizable:!1};this.areas.push(r),this.temp=r.id}},prepareImageData(){Ti=(0,q.$)("#screenshot"),Ti&&(this.imageWidth=Ti.offsetWidth,this.imageHeight=Ti.offsetHeight,this.prepareDataForAreas())},prepareDataForAreas(){this.areas=[];let e=[];this.markedAreasList&&this.markedAreasList.length>0&&Array.from(this.markedAreasList).forEach((o=>{e=o.markedArea.split(",");let t=Math.round(this.imageWidth*e[0]),l=Math.round(this.imageHeight*e[1]),i=Math.round(this.imageWidth*e[2]),s=Math.round(this.imageHeight*e[3]),a=i-t,r=s-l;a<0&&(a*=-1,t-=a),r<0&&(r*=-1,l-=r),this.creatReactangle(t,l,a,r,o.connectionId,o.areaType)}))},getTableAreaAsString(e,o,t,l){let i=e/this.imageWidth,s=o/this.imageHeight,a=t/this.imageWidth,r=l/this.imageHeight;return i.toString()+","+s.toString()+","+a.toString()+","+r.toString()},prepareMarkedAreasList(){this.markedAreasList=[],Array.from(this.areas).forEach((e=>{let o=e.width+e.x,t=e.height+e.y;this.markedAreasList.push(Object.assign({},{markedArea:this.getTableAreaAsString(e.x,e.y,o,t),connectionId:e.connectionId,areaType:e.areaType}))}))},calculateLeftPosition(e){let o=this.areaDisplayPosX(e)+e.width;return o+50>=this.imageWidth&&(o=this.areaDisplayPosX(e)-60),o+"px"},calculatePositionFromTop(e){let o=this.areaDisplayPosY(e)-25;return o<0&&(o=this.areaDisplayPosY(e)),o+"px"}},mounted(){Ci=this,this.setSize(),ki=(0,q.$)("#image_area"),this.calcPosOfBox(),ki.addEventListener("mousemove",this.calcPosOfBox),ki.addEventListener("scroll",this.calcPosOfBox),ki.addEventListener("mouseup",this.mouseUp)},unmounted:function(){ki.removeEventListener("mousemove",this.calcPosOfBox),ki.removeEventListener("scroll",this.calcPosOfBox),ki.removeEventListener("mouseup",this.mouseUp)},setup(){const e=(0,Z.uL)(),{markedAreasList:o}=(0,D.bP)(e);return{markedAreasList:o}}}),Fi=(0,ie.A)(wi,[["render",vi],["__scopeId","data-v-829518a4"]]),Bi=Fi;var Li=t(64775),Mi=t(64233),xi=t(14907),Ii=t(78652),Ei=t(16779),Ai=t(8420),Ni=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{d(l.next(e))}catch(o){s(o)}}function r(e){try{d(l["throw"](e))}catch(o){s(o)}}function d(e){e.done?t(e.value):i(e.value).then(a,r)}d((l=l.apply(e,o||[])).next())}))};const Oi=(0,l.pM)({el:"#main",mixins:[j.A,$.A,Mi.A,ml.A],components:{AutoGenerateDefaultLayout:li,DefaultElements:So,FieldsDesigner:lo,DefaultGroups:ko,Properties:zl,Elements:ho,ImportPdf:ue,ImageComponent:Bi,GeneralSettings:Zl,helpLayoutbuilder:Ei.A,Loader:Ai.A},watch:{$route(e,o){this.renderComponent=!1,this.isFormBuilderMode=!1,this.defaultFields=[],this.formBuilderModel=[],this.formBuilderConfigModel=[],this.handleScroll(),this.showImages=!1,this.activeTab="form_elements",this.activeFieldName=""},isExtenedPanel(e){this.disableEnablePanel()}},data(){return{imageIndex:0,templateId:(0,J.KR)(""),subDocType:(0,J.KR)(""),baseUrl:"",page:(0,J.KR)(1),imageHeight:0,imageWidth:200,connectionId:"",componentType:"input",keyImageChange:(0,J.KR)(0),splitterModel:(0,J.KR)(60),formSplitterModel:(0,J.KR)(50),showJsonForm:(0,J.KR)(!1),strFormLayout:(0,J.KR)(""),showPanel:(0,J.KR)(!1),markedAreasStr:"",allowMultiSelection:!1,language_origin:(0,J.KR)("")}},mounted:function(){this.renderComponent=!0,this.isFormBuilderMode=!0,this.formBuilderModel=[],this.formBuilderConfigModel=[],this.docType=this.$route.params.doc_type,this.templateId=this.$route.params.id,this.setSubDocType(),this.baseUrl=ee.VA,this.prepareLanguageOriginList(),this.templateId?this.init():(this.formLayout=[],this.formLayoutImages=[],this.saveTemplate(!0)),this.getWorkflows(!0),window.addEventListener("keydown",(e=>{"Escape"===e.key&&(this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing())})),setTimeout((()=>{const e=(0,q.$)(".handle-scroll");e&&e.addEventListener("scroll",this.handleScroll);const o=(0,q.$)("#field_scrolle");o&&o.addEventListener("scroll",this.handleScroll)}),1e3)},unmounted:function(){const e=(0,q.$)(".handle-scroll");e&&e.removeEventListener("scroll",this.handleScroll);const o=(0,q.$)("#field_scrolle");o&&o.removeEventListener("scroll",this.handleScroll)},methods:{init(){return Ni(this,void 0,void 0,(function*(){this.formLayout=[],this.templateId=this.$route.params.id,this.templateId&&(yield this.loadLayoutTemplateById(),setTimeout((()=>{this.initImage(),this.prepareRectangles()}),500))}))},loadLayoutTemplateById(){return Ni(this,void 0,void 0,(function*(){let e;try{this.showLoading(),e=yield po.H7.getDocumentLayoutTemplateById(this.templateId),this.language_origin=e.doc_origin;let o=JSON.parse(e.layout_json);this.showImages=!1,o&&(this.formLayout=o.hasOwnProperty("layout")?o.layout:[],o.hasOwnProperty("images")&&o.images.length>0&&(this.formLayoutImages=o.images,this.showImages=!0),this.proximityTokens=o.proximity_tokens,this.isExtenedPanel=!!o.isExtenedPanelEnabled,this.allowAreaSelection=!e.extraction_type||"FLEX_COORDINATES"!==e.extraction_type,this.setGeneralSettings(o),this.disableEnablePanel())}catch(o){return void this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}this.formLayout&&this.prepareLayoutModel()}))},prepareLayoutModel(){for(const e of this.formLayout)e.fieldType||(e.fieldType=Je.VV.GROUP),this.formBuilderConfigModel[e.name]=JSON.parse(JSON.stringify(e)),this.formBuilderConfigModel[e.name].rows=[],this.formBuilderConfigModel[e.name].hasOwnProperty("short_cut_key_1")||(this.formBuilderConfigModel[e.name]["short_cut_key_1"]="",this.formBuilderConfigModel[e.name]["short_cut_key_2"]=""),this.formBuilderConfigModel[e.name].hasOwnProperty("is_stcky_group")||(this.formBuilderConfigModel[e.name]["is_stcky_group"]=!1)},initImage(){if(!this.showImages)return;let e=(0,q.$)("#image_container");this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight},setSubDocType(){this.$route.query&&this.$route.query.sub_doc_type&&(this.subDocType=String(this.$route.query.sub_doc_type||""))},zoomOut(){this.imageWidth>200&&(this.imageWidth=this.imageWidth-100)},zoomIn(){this.imageWidth=this.imageWidth+100},loadImageDetails(){this.initImage(),this.showPanel=!0,setTimeout((()=>{this.prepareRectangles()}),100)},loadImage(e,o){o&&this.keyImageChange++,this.saveMarkedAreasOfCurrentPage(),this.imageIndex=e,this.page=e+1,this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.prepareRectangles()},prepareFormBuilderJson(){let e=[];for(let[o,t]of this.formLayout.entries()){this.formBuilderConfigModel.hasOwnProperty(t.name)&&(t.elementWidth=this.formBuilderConfigModel[t.name].elementWidth,t.right_border=this.formBuilderConfigModel[t.name].right_border,t.bottom_border=this.formBuilderConfigModel[t.name].bottom_border,t.is_stcky_group=this.formBuilderConfigModel[t.name].is_stcky_group,t.short_cut_key_1=this.formBuilderConfigModel[t.name].short_cut_key_1,t.short_cut_key_2=this.formBuilderConfigModel[t.name].short_cut_key_2,t.is_panel_section_group=this.formBuilderConfigModel[t.name].is_panel_section_group,t.is_stcky_group&&e.push(o));for(let e of t.rows)Object.assign(e,this.formBuilderConfigModel[e.name])}for(const o of e){const e=this.formLayout[o];this.formLayout.splice(o,1),this.formLayout.unshift(e)}this.$forceUpdate()},getLayoutJsonStr(){const e={layout:this.formLayout,images:this.formLayoutImages,proximity_tokens:this.proximityTokens,isExtenedPanelEnabled:this.isExtenedPanel};return Object.assign(e,this.getGeneralSettingsToSave()),JSON.stringify(e)},copyTemplate(){(0,Ii.A)(this.getLayoutJsonStr()).then((()=>{this.showSuccessToast("Copied!")}))},openJsonForm(){this.strFormLayout=this.getLayoutJsonStr(),this.showJsonForm=!0},savePastedJson(){if(this.strFormLayout){let e=JSON.parse(this.strFormLayout);this.formLayout=e.hasOwnProperty("layout")?e.layout:[],e.hasOwnProperty("images")&&e.images.length>0&&(this.formLayoutImages=e.images,this.showImages=!0),this.proximityTokens=e.proximity_tokens,this.isExtenedPanel=!!e.isExtenedPanelEnabled,this.setGeneralSettings(e)}this.saveTemplate(!1)},createTemplateAccordingToOrigin(){this.templateId="",this.saveTemplate(!0)},saveTemplate(e,o=!0){return Ni(this,void 0,void 0,(function*(){let t;e&&(this.saveMarkedAreasOfCurrentPage(),this.prepareFormBuilderJson());try{this.showLoading();let e={doc_type_key:this.docType,sub_doc_type_key:this.subDocType||"",title:"form builder",layout_json:this.getLayoutJsonStr()};this.templateId?t=yield po.H7.updateDocumentLayoutTemplateById(e,this.templateId):(e.doc_origin=this.language_origin,t=yield po.H7.createDocumentLayoutTemplate(e)),t&&o&&this.showSuccessToast("Template Sucessfully saved"),this.templateId=t.id,this.$forceUpdate(),this.refreshView()}catch(l){return void this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}))},refreshView(){const e=ii.Z.getDetailViewRoute({doc_type_key:this.docType||"",layout_template_id:this.templateId||"",sub_doc_type_key:this.subDocType||""});this.$router.push(e)},removeBordersFromRectangles(){let e=document.body.getElementsByTagName("rect");for(let o of e)o.classList.remove("border")},removeAllConnectionLines(){const e=(0,q.$)("#connection_line");e&&e.remove()},saveMarkedAreasOfCurrentPage(){for(const e of this.documentTableNames)if(this.formBuilderConfigModel.hasOwnProperty(e))for(const o of this.formBuilderConfigModel[e].columns)o.coords=[];for(const e of this.markedAreasList)this.saveMarkedAreas(e.connectionId,e.markedArea,e.areaType)},saveMarkedAreas(e,o,t){let l;e:for(const i of this.formLayout)for(let s of i.rows){if(s.fieldType===Je.VV.EXTRACTED_TABLE&&"table"===t&&(l=e.split("__"),s.name=l[1])){for(const e of this.formBuilderConfigModel[l[1]].columns)e.col_id==l[0]&&e.coords.push({coord:o,page:this.page});break e}if(Je.iS.includes(s.fieldType)&&"table"!==t&&(s.fieldType===Je.VV.TABLE_OF_CHECKBOXES&&this.formBuilderConfigModel[s.name].tableBodyRows.forEach(((t,l)=>{t.forEach(((t,l)=>{if(t.name===e)return t.coords=[],t.page=this.page,void t.coords.push(o)}))})),s.name===e)){this.formBuilderConfigModel[e].page=this.page,this.formBuilderConfigModel[e].coords=[],this.formBuilderConfigModel[e].coords.push(o),s.page=this.page,s.coords=[],s.coords.push(o);break e}}},connect(e,o,t,l){const i=this.getOffset(e),s=this.getOffset(o),a=i.left,r=i.top+i.height/2;let d=s.left+s.width;"checkbox"===this.componentType&&(d+=s.left/2);const n=s.top+s.height/2,m=Math.sqrt((d-a)*(d-a)+(n-r)*(n-r)),c=(a+d)/2-m/2,u=(r+n)/2-l/2,h=Math.atan2(r-n,a-d)*(180/Math.PI);this.removeAllConnectionLines();const p=document.createElement("div");p.setAttribute("id","connection_line"),p.style.cssText="z-index: 102;padding:0px; margin:0px; height:"+l+"px; background-color:"+t+"; line-height:1px; position:absolute; left:"+c+"px; top:"+u+"px; width:"+m+"px; -moz-transform:rotate("+h+"deg); -webkit-transform:rotate("+h+"deg); -o-transform:rotate("+h+"deg); -ms-transform:rotate("+h+"deg); transform:rotate("+h+"deg);",document.body.appendChild(p)},getOffset(e){const o=e.getBoundingClientRect();return{left:o.left+window.pageXOffset,right:o.right+window.pageXOffset,top:o.top+window.pageYOffset,width:o.width||e.offsetWidth,height:o.height||e.offsetHeight}},refreshCanvas(){this.$forceUpdate(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.prepareRectangles()},getElementToConnect(e){return this.componentType=e.getAttribute("child_type"),"checkbox"===this.componentType?e.querySelector(".q-checkbox__bg"):e},markTableColumns(e){this.allowMultiSelection=!0,this.connectionId=e,this.enableDrawing(),this.showNotification("Please Mark Areas against this column")},showConnectionFromField(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.allowMultiSelection=!1,this.connectionId=e;let o=this.getElementToConnect((0,q.$)("#"+e)),t=o.getAttribute("pageno"),l=!1;t&&+t!==this.page&&(l=!0,this.page=+t,this.imageIndex=this.page-1,this.loadImageDetails(),this.$forceUpdate()),o.setAttribute("pageno",this.page.toString()),setTimeout((()=>{let t=(0,q.$)("#"+e+"_rect");t&&(this.scrollInToViewCenter(t),document.documentElement.scrollTop=0),setTimeout((()=>{if(!t){this.componentType=o.getAttribute("child_type");let e="";if("checkbox"===this.componentType)e=o.getAttribute("aria-checked")?"true":"";else{let t=o.querySelector(this.componentType);t&&(e=t.value)}return""!=e?this.showNotification(this.$t("pages.messages.SELECT_AREA_NO_COORDINATES")):this.showNotification(this.$t("pages.messages.SELECT_AREA")),void this.enableDrawing()}this.showConnection(e,t,o)}),50)}),l?400:100)},showConnection(e,o,t){o&&t?(this.drawOverlay(e,o),o.setAttribute("class","border"),this.connect(o,t,"#26a69a",2)):alert(this.$t("pages.messages.NO_MAPPING_AVAILABLE"))},drawOverlay(e,o){var t,l;this.connectionId=e,this.removeExistingConfirmationOverlays();const i=(0,q.$)("#"+e);if(!i)return;let s;this.componentType=i.getAttribute("child_type");let a="";if("checkbox"===this.componentType)a=i.getAttribute("aria-label"),s="Un-Checked","true"===i.getAttribute("aria-checked")&&(s="Checked");else{const o=(0,q.$)("."+e);a=o.innerHTML;const t=i.querySelector(this.componentType);s=t.value}const r=this.getOffset(o),d=document.createElement("div");d.setAttribute("id","confirmation_overlay"),d.style.position="absolute",d.style.zIndex="99999",d.style.left=r.left+"px",d.style.top=(+r.top+ +r.height+6).toString()+"px",d.style.background="#e2e2e2",d.style.color="#898989",d.style.minHeight="80px",d.style.minWidth="100px",d.style.maxWidth="50%",d.style.textAlign="center",d.style.padding="5px 10px 5px 10px",d.style.letterSpacing="1px",d.style.borderRadius="7px",d.style.boxShadow="0 1px 2px rgba(0,0,0,0.07),\n      0 2px 4px rgba(0,0,0,0.07),\n      0 4px 8px rgba(0,0,0,0.07),\n      0 8px 16px rgba(0,0,0,0.07),\n      0 16px 32px rgba(0,0,0,0.07),\n      0 32px 64px rgba(0,0,0,0.07);",d.innerHTML=`<div><b>${s}</b></div><div><b style='font-size: 9px'>${a}</b></div>\n                  <div>\n\n                  <span class='divOverlayWrong'>\n                    <i connectionId='${e}' style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.6em;' class='fa fa-times cursor-pointer'></i>\n                  </span>\n                  <span id='divOverlayCorrect'>\n                    <i style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.5em;' class='fas fa-check cursor-pointer'></i>\n                  </span></div>`,document.body.appendChild(d),null===(t=(0,q.$)("#divOverlayCorrect"))||void 0===t||t.addEventListener("click",(e=>{this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines()}));let n=document.getElementsByClassName("divOverlayWrong");Array.from(n).forEach((e=>{null===e||void 0===e||e.addEventListener("click",(e=>{this.connectionId=e.target.getAttribute("connectionId"),this.connectionId&&(this.initTempFieldDelete(),this.markedAreasStr=JSON.stringify(this.markedAreasList),this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.$forceUpdate(),this.enableDrawing())}))}));try{const e=(0,q.$)("#confirmation_overlay"),o=null===(l=(0,q.$)("#confirmation_overlay"))||void 0===l?void 0:l.clientWidth,t=r.width,i=(+o-+t)/2;e.style.left=+r.left-+i+"px"}catch(m){}},initTempFieldDelete(){this.formBuilderConfigModel[this.connectionId].coords=[],this.markedAreasList=this.markedAreasList.filter((e=>e.connectionId!==this.connectionId))},prepareRectangles(){this.markedAreasList=[];for(const e of this.formLayout)for(let o of e.rows)this.formBuilderConfigModel.hasOwnProperty(o.name)&&(o.fieldType!==Je.VV.EXTRACTED_TABLE?Je.iS.includes(o.fieldType)&&(o.fieldType!==Je.VV.TABLE_OF_CHECKBOXES?!o.coords||o.coords.length<1||this.formBuilderConfigModel.hasOwnProperty(o.name)&&o.page&&o.page==this.page&&this.addMarkedAreaToList(o):this.prepareMarkedAreasForTableOfCheckboxes(o)):this.prepareMarkedAreasForSerieTable(o));this.markedAreasStr=JSON.stringify(this.markedAreasList)},prepareMarkedAreasForTableOfCheckboxes(e){for(let o of this.formBuilderConfigModel[e.name].tableBodyRows)for(let e of o)!e.coords||e.coords.length<1||this.formBuilderConfigModel.hasOwnProperty(e.name)&&e.page&&e.page==this.page&&this.addMarkedAreaToList(e)},prepareMarkedAreasForSerieTable(e){for(const o of this.formBuilderConfigModel[e.name].columns)if(o.coords&&!(o.coords.length<1))for(const t of o.coords)t.page&&t.page==this.page&&this.markedAreasList.push(Object.assign({},{markedArea:t.coord,connectionId:o.col_id+"__"+e.name,areaType:"table"}))},addMarkedAreaToList(e){const o=(0,q.$)("#"+e.name);o&&(o.setAttribute("pageno",e.page),this.markedAreasList.push(Object.assign({},{markedArea:e.coords[0],connectionId:e.name,areaType:"input"})))},handleScroll(){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays()},disableEnablePanel(){this.isExtenedPanel?(this.splitterModel=60,this.showPanel=!0):this.splitterModel=94},enableDrawing(){const e=(0,q.$)("#draw");null===e||void 0===e||e.classList.add("cursor-crosshair"),null===e||void 0===e||e.classList.remove("pointer-events-none")},restrictDrawing(){const e=(0,q.$)("#draw");null===e||void 0===e||e.classList.add("pointer-events-none"),null===e||void 0===e||e.classList.remove("cursor-crosshair")},restoreDefaults(){return Ni(this,void 0,void 0,(function*(){try{if(!this.templateId)return;this.showLoading();const e=yield po.H7.deleteDocumentLayoutTemplate(this.templateId);if(!1===e.success)throw{message:e.message};this.showSuccessToast(this.$t("pages.messages.operation_sucessfull")),this.templateId="",this.saveTemplate(!0,!1)}catch(e){const o=Li.t.getErrorMessage(e);this.showErrorToast(o)}finally{this.hideLoading()}}))},prepareLanguageOriginList(){return Ni(this,void 0,void 0,(function*(){yield this.getLanguageIfEmpty(),this.language_origin_list=JSON.parse(JSON.stringify(this.language_origins)),this.language_origin_list[0].label=this.$t("default")}))}},setup(){const e=(0,xi.A)(),o=(0,Z.uL)(),{showImages:t,activeTab:l,isFormBuilderMode:i,keyToUpdateComponnets:s,renderComponent:a,defaultFields:r,formLayout:d,documentTableNames:n,formLayoutImages:m,formBuilderModel:c,formBuilderConfigModel:u,activeFieldName:h,isExtenedPanel:p,proximityTokens:f,docType:g,markedAreasList:_,allowAreaSelection:v}=(0,D.bP)(o),b=(0,Z.XB)(),{setGeneralSettings:y,getGeneralSettingsToSave:C}=b,k=(0,Z.QJ)(),{language_origins:T}=(0,D.bP)(k),{getLanguageIfEmpty:w}=k,F=(0,Z._6)(),{tokenQueryParam:B}=(0,D.bP)(F);F.getTokenQueryParam();const L=(0,Z.Tm)(),{getWorkflows:M}=L;return{getWorkflows:M,getLanguageIfEmpty:w,setGeneralSettings:y,getGeneralSettingsToSave:C,docType:g,activeTab:l,showImages:t,formLayout:d,defaultFields:r,activeFieldName:h,renderComponent:a,formLayoutImages:m,formBuilderModel:c,isFormBuilderMode:i,documentTableNames:n,keyToUpdateComponnets:s,formBuilderConfigModel:u,allowAreaSelection:v,isExtenedPanel:p,proximityTokens:f,markedAreasList:_,language_origins:T,language_origin_list:(0,J.KR)([]),tokenQueryParam:B,showNotification(o){e.notify({message:o,color:"primary",position:"top"})}}}});var Si=t(90124),Vi=t(25173),Pi=t(13796),Xi=t(42980),Ui=t(10327),Ri=t(10386),qi=t(39041),Di=t(71746),$i=t(88841),Qi=t(98072),zi=t(82156),Wi=t(23316),Hi=t(36914),Ki=t(39150),Yi=t(44189),Gi=t(49200),Ji=t(88672);const ji=(0,ie.A)(Oi,[["render",R],["__scopeId","data-v-176d0133"]]),Zi=ji;me()(Oi,"components",{QBtn:se.A,QIcon:re.A,QSelect:_l.A,QItem:Si.A,QItemSection:Vi.A,QItemLabel:Pi.A,QTooltip:de.A,QTabs:Xi.A,QTab:Ui.A,QSeparator:Ri.A,QTabPanels:qi.A,QTabPanel:Di.A,QExpansionItem:$i.A,QSplitter:Qi.A,QToggle:Ze.A,QDialog:zi.A,QCard:Wi.A,QToolbar:Hi.A,QToolbarTitle:Ki.A,QCardSection:Yi.A,QForm:Gi.A,QInput:eo.A,QCheckbox:Xl.A}),me()(Oi,"directives",{ClosePopup:Ji.A})}}]);