"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[2933],{42933:(e,t,i)=>{i.r(t),i.d(t,{default:()=>qo});var o=i(61758),s=i(58790),a=i(29104);const n=e=>((0,o.Qi)("data-v-05c701a7"),e=e(),(0,o.jt)(),e),l={class:"row highlighted-back q-pl-md top-back-button-bar"},r={class:"row full-width"},d={key:2,class:"row q-pl-md",id:"validation_view"},c={class:"full-width",id:"right_section",ref:"right_section"},h={class:"q-pr-sm q-pa-sm"},u={class:"full-width medi-fields-content-height"},g={class:"scroll-area-height-validation"},m={id:"image_container"},p={class:"full-width",id:"image_scrolle",style:{position:"relative"}},_=n((()=>(0,o.Lk)("div",{class:"img-magnifier-glass"},null,-1))),f={id:"validate-container",class:""},v=["src","width"],b=["width","height","viewBox"],k={id:"marquee",ref:"marquee",x:"450",y:"420",width:"150",height:"150"},w={id:"boxes",ref:"boxes"},y={key:0,class:"full-width",id:"afterSlot"},C={key:0,class:"row q-pl-sm q-pr-sm"},x={class:"col-sm-12 col-md-12 col-lg-12 secondary-c-text text-h6 q-pb-md text-weight-bold"},F={class:"full-width"},L={class:"column absolute-right q-ml-auto justify-between right-action-bar back-white"},E={class:"action-bar-items",id:"validation_bar_content"},A=n((()=>(0,o.Lk)("br",null,null,-1))),D=n((()=>(0,o.Lk)("img",{width:"24",height:"24",src:"images/planning.svg"},null,-1))),I=["src"],S=["src"],T={class:"action-bar-bottom"},R={class:"q-my-auto"},O={class:"validation-view-button q-pt-md"},M={class:"hidden",id:"left_section",ref:"left_section"},P={key:0,class:"scroll-area-height-validation max-width-240 scrolle-y"},q={class:"row justify-center q-pl-md q-pr-md q-pt-md"},B={class:"secondary-c-text text-h6 text-weight-bold"},W={class:"row"},V={class:"page-numbers center-inner"},$={class:"full-width scroll-area-height-validation scrolle-y pages-section-padding row justify-center"},N=["data-id","src"],Q={key:1},K={key:2,class:"scroll-area-height-validation scrolle-y max-width-240 relative-position"},z={key:3,class:"scroll-area-height-validation scrolle-y max-width-240 relative-position"},X={key:3,class:"row bg-grey-2 q-pl-md q-pr-md q-pb-md"},U=n((()=>(0,o.Lk)("div",{class:"text-h6 text-bold"},"Need help deciding?",-1))),H={class:"row"},j={class:"text-weight-bold"},G={class:""},J={class:"text-weight-bold"},Y={class:"row",style:{"border-radius":"5px"}},Z={class:"full-width"},ee=n((()=>(0,o.Lk)("div",{class:"full-width"}," MONITOR 1 ",-1))),te={class:"full-width"},ie=n((()=>(0,o.Lk)("div",{class:"full-width"}," MONITOR 2 ",-1))),oe={class:"footer-filename"},se={class:"footer-status-message"},ae={class:"next-prev-buttons float-right q-ml-auto"},ne=n((()=>(0,o.Lk)("img",{width:"24",src:"images/back_new_2.svg"},null,-1))),le=n((()=>(0,o.Lk)("img",{width:"24",src:"images/forward_new.svg"},null,-1))),re={class:"footer-status-message"},de={key:3},ce={key:4,class:"q-ml-auto"},he={key:6,class:"footer-status-message q-px-md"};function ue(e,t,i,n,ue,ge){const me=(0,o.g2)("DocumentLock"),pe=(0,o.g2)("InvoiceDuplicateLock"),_e=(0,o.g2)("MessageBanner"),fe=(0,o.g2)("SubHeader"),ve=(0,o.g2)("timeSpentTimer"),be=((0,o.g2)("AISeverityLevel"),(0,o.g2)("FieldsView")),ke=(0,o.g2)("q-resize-observer"),we=(0,o.g2)("AnnotationView"),ye=(0,o.g2)("q-btn"),Ce=(0,o.g2)("q-splitter"),xe=(0,o.g2)("q-tooltip"),Fe=(0,o.g2)("keyboardShortcutInfoBtn"),Le=(0,o.g2)("q-separator"),Ee=(0,o.g2)("TaskBtn"),Ae=(0,o.g2)("import-multi-invoice"),De=(0,o.g2)("autoTesting"),Ie=(0,o.g2)("q-badge"),Se=(0,o.g2)("q-icon"),Te=(0,o.g2)("q-item-section"),Re=(0,o.g2)("q-item"),Oe=(0,o.g2)("TfidfPreferenceControl"),Me=(0,o.g2)("q-list"),Pe=(0,o.g2)("q-menu"),qe=(0,o.g2)("q-input"),Be=(0,o.g2)("supportForm"),We=(0,o.g2)("TaskList"),Ve=(0,o.g2)("ApprovalHistory"),$e=(0,o.g2)("ErrorDocumentView"),Ne=(0,o.g2)("Loader"),Qe=(0,o.g2)("q-space"),Ke=(0,o.g2)("q-card-section"),ze=(0,o.g2)("q-card"),Xe=(0,o.g2)("q-dialog"),Ue=(0,o.g2)("SplitDocument"),He=(0,o.g2)("q-toolbar-title"),je=(0,o.g2)("q-toolbar"),Ge=(0,o.g2)("ScriptLogs"),Je=(0,o.g2)("q-card-actions"),Ye=(0,o.g2)("q-select"),Ze=(0,o.g2)("f-btn"),et=(0,o.g2)("NonMappedColumnsBtn"),tt=(0,o.g2)("BlockSupplier"),it=(0,o.g2)("IgnoreTableValidation"),ot=(0,o.g2)("UnBlockSupplier"),st=(0,o.g2)("q-slider"),at=(0,o.g2)("q-footer"),nt=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(me,{document_version:e.document_version,trigger_document_lock:e.trigger_document_lock,doc_id:e.docId,onSetTriggerDocumentLock:e.setTriggerDocumentLock},null,8,["document_version","trigger_document_lock","doc_id","onSetTriggerDocumentLock"]),!e.trigger_document_lock&&e.isInvoiceDuplicate?((0,o.uX)(),(0,o.Wv)(pe,{key:0,doc_id:e.docId,doc_type:e.docType,doc_status:e.docStatus,onSetInvoiceDuplicateStatus:e.setInvoiceDuplicateStatus},null,8,["doc_id","doc_type","doc_status","onSetInvoiceDuplicateStatus"])):(0,o.Q3)("",!0),!e.isReadOnly||e.trigger_document_lock||e.isInvoiceDuplicate?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(_e,{key:1,message:e.error_message,messageCategoryClass:"error-banner"},null,8,["message"])),(0,o.bF)(fe,{name:"field_validation",onSearch:!1,label:e.$t("field_validation"),show_expiry_alert:!0},null,8,["label"]),(0,o.Lk)("div",l,[(0,o.Lk)("div",r,[(0,o.Lk)("div",{class:"q-pt-sm q-pl-md filename-container",style:(0,s.Tr)("width:"+(100-e.imageFieldSplitter)+"%")},[(0,o.bF)(ve)],4)]),(0,o.Q3)("",!0)]),e.doc_fetch_error?((0,o.uX)(),(0,o.CE)("div",X,[(0,o.bF)($e)])):((0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("div",c,[(0,o.bF)(Ce,{limits:[30,80],modelValue:e.imageFieldSplitter,"onUpdate:modelValue":[t[17]||(t[17]=t=>e.imageFieldSplitter=t),t[18]||(t[18]=t=>e.splitterChanged())],class:"scroll-area-height-validation"},{before:(0,o.k6)((()=>[(0,o.Lk)("div",h,[(0,o.Lk)("div",u,[e.hasApiData()?((0,o.uX)(),(0,o.Wv)(be,{key:0,ref:"fieldsView",page:e.page,isPanelSection:!1,renderOpenWindoIcon:!0,onGetImageDetails:e.getImageDetails,onSetSplitterModel:e.setSplitterModel,onHandleScroll:e.removeOverlayandLines,onShowConnectionFromField:e.showConnectionFromField,onRefreshCanvasAfterSelection:e.refreshCanvasAfterSelection,onRemoveOldMapiingsAndDrawNew:e.removeOldMapiingsAndDrawNew,onEnableOrDisableExportButton:e.enableOrDisableExportButton,onCheckFieldInvalid:e.checkFieldInvalid},null,8,["page","onGetImageDetails","onSetSplitterModel","onHandleScroll","onShowConnectionFromField","onRefreshCanvasAfterSelection","onRemoveOldMapiingsAndDrawNew","onEnableOrDisableExportButton","onCheckFieldInvalid"])):(0,o.Q3)("",!0)])])])),after:(0,o.k6)((()=>[(0,o.bF)(ke,{onResize:e.onResize,debounce:0},null,8,["onResize"]),(0,o.Lk)("div",g,[(0,o.Lk)("div",m,[(0,o.Lk)("div",p,[(0,o.bF)(Ce,{horizontal:"",limits:[0,100],disable:!e.isExtenedPanel,modelValue:e.splitterModel,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.splitterModel=t),e.removeOverlayandLines],class:"scroll-area-height-img","after-class":e.isExtenedPanel?"q-pa-xs":"q-px-sm","before-class":"q-pa-sm img-magnifier-container","separator-class":(e.isExtenedPanel,"q-ma-sm")},{before:(0,o.k6)((()=>[_,"annotate"==e.field_view_mode?((0,o.uX)(),(0,o.Wv)(we,{key:0,ref:"child_comp",enableEditing:e.enable_editing,cropUrl:e.image+"?"+e.tokenQueryParam,width:e.imageWidth,selectFont:e.selectFont,selectFontSize:e.selectFontSize,selectColor:e.selectColor,screenmode:"annotate"},null,8,["enableEditing","cropUrl","width","selectFont","selectFontSize","selectColor"])):(0,o.Q3)("",!0),(0,o.Lk)("div",f,[(0,o.Lk)("img",{class:"screenshot",src:e.image+"?"+e.tokenQueryParam,width:e.imageWidth,id:"screenshot",ref:"screenshot",draggable:"false",onLoad:t[0]||(t[0]=t=>{e.imageLoaded=!0,e.getImageDetails()})},null,40,v),((0,o.uX)(),(0,o.CE)("svg",{width:e.imageWidth,height:e.imageHeight,viewBox:e.viewBox,id:"draw",ref:"draw",xmlns:"http://www.w3.org/2000/svg",style:{height:"auto","border-bottom":"5px dotted"}},[(0,o.Lk)("rect",k,null,512),(0,o.Lk)("g",w,null,512)],8,b))])])),separator:(0,o.k6)((()=>[e.isExtenedPanel?((0,o.uX)(),(0,o.Wv)(ye,{key:0,disable:!e.isExtenedPanel,round:"",unelevated:"",size:"xs",icon:"swap_vert",class:"panel-expand-button highlighted-back z-index-1",onClick:t[1]||(t[1]=t=>e.toggleSplitter())},null,8,["disable"])):(0,o.Q3)("",!0)])),after:(0,o.k6)((()=>[e.renderComponent&&e.hasApiData()?((0,o.uX)(),(0,o.CE)("div",y,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.formLayout,((t,i)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:`div-${i}`},[!0===t.is_panel_section_group?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"display-inline-block",style:(0,s.Tr)("width:"+e.getElementWidth(t)+"%")},[t.title?((0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("div",x,(0,s.v_)(t.title),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",F,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.rows,((t,a)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:`div-${a}`},[e.isFieldHidden(t)?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:0,class:"",style:(0,s.Tr)("width:"+e.getElementWidth(t)+"%")},[((0,o.uX)(),(0,o.Wv)((0,o.$y)(t.fieldType),{currentField:t,isReadOnly:e.isReadOnly,fieldName:t.name,groupIndex:i,onUpdateModel:e.$refs["fieldsView"].updateModel,onInputClicked:e.$refs["fieldsView"].showConnectionFromField,onInputValueChanges:e.$refs["fieldsView"].onInputValueChanges,onApplyFuzzySearch:e.$refs["fieldsView"].applyFuzzySearchWrapper},null,40,["currentField","isReadOnly","fieldName","groupIndex","onUpdateModel","onInputClicked","onInputValueChanges","onApplyFuzzySearch"]))],4))],64)))),128))])],4)):(0,o.Q3)("",!0)],64)))),128))])):(0,o.Q3)("",!0)])),_:1},8,["disable","modelValue","after-class","separator-class","onUpdate:modelValue"])])]),(0,o.Lk)("div",L,[e.showScrollUpButton?((0,o.uX)(),(0,o.Wv)(ye,{key:0,icon:"keyboard_arrow_up",flat:"",class:"validation-view-scroll-down icon-grey",onClick:e.onScrollUp},null,8,["onClick"])):(0,o.Q3)("",!0),(0,o.Lk)("div",E,[(0,o.bF)(ye,{disable:"annotate"===e.field_view_mode,icon:"img:images/loupe.svg",dense:"",flat:"",class:"validation-view-button",onClick:e.initiateMagnifyGlass},{default:(0,o.k6)((()=>[(0,o.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("pages.screen2a.magnify")),1)])),_:1})])),_:1},8,["disable","onClick"]),(0,o.bF)(ye,{icon:"img:images/dual-monitor.svg",flat:"",class:"validation-view-button",onClick:e.selectBetweenMonitor},{default:(0,o.k6)((()=>[(0,o.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("open_image"))+" ",1),A,(0,o.eW)(" "+(0,s.v_)(e.$t("pages.messages.CHROME_ONLY")),1)])),_:1})])),_:1},8,["onClick"]),(0,o.bF)(Fe),(0,o.bF)(Le,{class:"separator-space"}),(0,o.bF)(Ee,{onBtnClicked:t[3]||(t[3]=t=>e.toggleSideBar("tasks"))}),e.model[e.approval_history]?((0,o.uX)(),(0,o.Wv)(ye,{key:0,flat:"",class:"validation-view-button",onClick:t[4]||(t[4]=t=>e.toggleSideBar("approval_history"))},{default:(0,o.k6)((()=>[D,(0,o.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("approval_history")),1)])),_:1})])),_:1})):(0,o.Q3)("",!0),e.user_settings["ANNOTATION_MODE"]&&"annotate"==e.field_view_mode?((0,o.uX)(),(0,o.Wv)(ye,{key:1,flat:"",class:"validation-view-button",onClick:t[5]||(t[5]=t=>e.changeScreenMode())},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{width:"24",height:"24",src:0==e.doc_annotations.length?"annotation/annotation_icon.svg":"annotation/annotation_icon_mark.svg"},null,8,I),(0,o.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("annotation.deactivate_mode")),1)])),_:1})])),_:1})):(0,o.Q3)("",!0),e.user_settings["ANNOTATION_MODE"]&&"validate"==e.field_view_mode?((0,o.uX)(),(0,o.Wv)(ye,{key:2,flat:"",class:"validation-view-button",onClick:t[6]||(t[6]=t=>e.changeScreenMode())},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{width:"24",height:"24",src:0==e.doc_annotations.length?"annotation/annotation_icon.svg":"annotation/annotation_icon_mark.svg"},null,8,S),(0,o.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("annotation.activate_mode")),1)])),_:1})])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(Ae,{isDashboard:!1,docId:e.docId,onSetImages:e.setImage},null,8,["docId","onSetImages"]),!0===e.is_admin?((0,o.uX)(),(0,o.Wv)(ye,{key:3,disabled:"ELECTRONIC_DOCUMENT"===e.record.extraction_method,icon:"img:images/ocr_icon.svg",flat:"",class:"validation-view-button",onClick:e.viewOCRDocument},{default:(0,o.k6)((()=>[(0,o.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("ocr_view")),1)])),_:1})])),_:1},8,["disabled","onClick"])):(0,o.Q3)("",!0),(0,o.bF)(Le,{class:"separator-space"}),!0===e.is_debug?((0,o.uX)(),(0,o.Wv)(ye,{key:4,icon:"adb",flat:"",class:"validation-view-button icon-grey",onClick:t[7]||(t[7]=t=>e.enableOrDisableExportButton(!0))},{default:(0,o.k6)((()=>[(0,o.bF)(xe,null,{default:(0,o.k6)((()=>[(0,o.eW)("Debug Field Validations. Results will be displayed in the console after clicking it")])),_:1})])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(De,{onSetApiData:e.setApiData},null,8,["onSetApiData"]),(0,o.bF)(ye,{icon:"img:images/costumer_care.svg",flat:"",class:"validation-view-button",onClick:t[8]||(t[8]=t=>e.toggleSideBar("support"))},{default:(0,o.k6)((()=>[(0,o.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("pages.support.create_ticket")),1)])),_:1})])),_:1}),e.DOC_SCRIPT_MODULE?((0,o.uX)(),(0,o.Wv)(ye,{key:5,icon:"img:images/doc_script_logs.svg",flat:"",size:"20px",class:"validation-view-button v-p-0",onClick:t[9]||(t[9]=t=>e.display_doc_script_logs=!0)},{default:(0,o.k6)((()=>[e.script_error_count>0?((0,o.uX)(),(0,o.Wv)(Ie,{key:0,color:"red",rounded:"",floating:""},{default:(0,o.k6)((()=>[(0,o.eW)("!")])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("doc_script_logs")),1)])),_:1})])),_:1})):(0,o.Q3)("",!0),e.user_settings["BARCODE_ASSIGNMENT_SETTING"]?((0,o.uX)(),(0,o.Wv)(ye,{key:6,icon:"img:images/barcode.svg",flat:"",size:"20px",class:"validation-view-button v-p-0",onClick:t[10]||(t[10]=t=>e.prepareBarcodeData())},{default:(0,o.k6)((()=>[(0,o.bF)(xe,{style:{"white-space":"nowrap"}},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("barcode_assignment")),1)])),_:1})])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(ye,{flat:"",dense:"",size:"10px",class:"validation-view-button more_button",style:{background:"#707070",color:"white"},round:"",onClick:t[13]||(t[13]=(0,a.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,o.k6)((()=>[(0,o.bF)(Pe,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"top left",self:"top right"},{default:(0,o.k6)((()=>[(0,o.bF)(Me,{dense:"",style:{"min-width":"100px"}},{default:(0,o.k6)((()=>[e.images.length>1?((0,o.uX)(),(0,o.Wv)(Re,{key:0,clickable:"",onClick:e.displaySplitDocumentView},{default:(0,o.k6)((()=>[(0,o.bF)(Te,{avatar:"",class:"list-avatar"},{default:(0,o.k6)((()=>[(0,o.bF)(Se,{name:"img:images/split.svg",size:"xs",class:"invert",style:{"font-size":"22px"}})])),_:1}),(0,o.bF)(Te,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("split_document_btn_tooltip")),1)])),_:1})])),_:1},8,["onClick"])):(0,o.Q3)("",!0),"INVOICE"==e.docType?((0,o.uX)(),(0,o.Wv)(Re,{key:1,clickable:"",onClick:t[11]||(t[11]=t=>e.toFlowScreen(this.$route.params.id))},{default:(0,o.k6)((()=>[(0,o.bF)(Te,{avatar:"",class:"list-avatar"},{default:(0,o.k6)((()=>[(0,o.bF)(Se,{name:"img:images/flow.svg",size:"xs",class:"invert",style:{"font-size":"22px"}})])),_:1}),(0,o.bF)(Te,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("document_flow")),1)])),_:1})])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(Le,{inset:""}),(0,o.bF)(Re,{clickable:"",onClick:t[12]||(t[12]=t=>e.goToLayoutTemplate())},{default:(0,o.k6)((()=>[(0,o.bF)(Te,{avatar:"",class:"list-avatar"},{default:(0,o.k6)((()=>[(0,o.bF)(Se,{name:"img:images/layout.svg",size:"xs",class:"invert",style:{"font-size":"22px"}})])),_:1}),(0,o.bF)(Te,null,{default:(0,o.k6)((()=>[(0,o.eW)("Go to Layout Template")])),_:1})])),_:1}),(0,o.bF)(Le,{inset:""}),e.record.tfidf_id?((0,o.uX)(),(0,o.Wv)(Re,{key:2},{default:(0,o.k6)((()=>[(0,o.bF)(Te,null,{default:(0,o.k6)((()=>[(0,o.bF)(Oe,{tfidf_id:e.record.tfidf_id,onRestartDocument:e.restartDocument,docId:e.docId},null,8,["tfidf_id","onRestartDocument","docId"])])),_:1})])),_:1})):(0,o.Q3)("",!0)])),_:1})])),_:1})])),_:1})]),(0,o.Lk)("div",T,[e.showScrollDownButton?((0,o.uX)(),(0,o.Wv)(ye,{key:0,icon:"keyboard_arrow_down",flat:"",class:"validation-view-scroll-down icon-grey",onClick:e.onScrollDown},null,8,["onClick"])):(0,o.Q3)("",!0),(0,o.bF)(Le,{class:"q-mb-sm"}),(0,o.Lk)("div",R,[(0,o.bF)(ye,{icon:"img:images/pages.svg",flat:"",class:"validation-view-button",onClick:t[14]||(t[14]=t=>e.toggleSideBar("pages"))},{default:(0,o.k6)((()=>[(0,o.bF)(xe,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.currentPage())+" / "+(0,s.v_)(e.images.length),1)])),_:1})])),_:1})]),(0,o.bF)(qe,{outlined:"",dense:"",modelValue:e.page,"onUpdate:modelValue":[t[15]||(t[15]=t=>e.page=t),t[16]||(t[16]=t=>{e.quickActionClicked(t)})],class:"validation-view-input",onBlur:e.validatePageNumber},null,8,["modelValue","onBlur"]),(0,o.Lk)("span",O,(0,s.v_)(e.lastPageItem),1),(0,o.Lk)("div",null,[(0,o.bF)(ye,{disable:1==e.page,icon:"keyboard_arrow_up",flat:"",class:"validation-view-page-button icon-grey",onClick:e.movePageDown},null,8,["disable","onClick"]),(0,o.bF)(ye,{disable:e.page==e.lastPageItem,icon:"keyboard_arrow_down",flat:"",class:"validation-view-page-button icon-grey",onClick:e.movePageUp},null,8,["disable","onClick"])])])])])])),_:1},8,["modelValue"])],512),(0,o.Lk)("div",M,["pages"==e.current_sidebar?((0,o.uX)(),(0,o.CE)("div",P,[(0,o.Lk)("div",q,[(0,o.Lk)("span",B,(0,s.v_)(e.$t("pages.screen2a.pages")),1)]),(0,o.Lk)("div",W,[(0,o.Lk)("div",V,(0,s.v_)(e.currentPage())+"/"+(0,s.v_)(e.images.length),1)]),(0,o.Lk)("div",$,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.images,((i,a)=>((0,o.uX)(),(0,o.CE)("img",{"data-id":a,key:a,src:e.baseUrl+"/"+i.path+"?"+e.tokenQueryParam,class:(0,s.C4)(["q-pa-xs shadow-5 max-width-120 q-ma-sm cursor-pointer",a===e.page-1?"active":""]),style:{height:"160px"},onClick:t[19]||(t[19]=(...t)=>e.imageclicked&&e.imageclicked(...t))},null,10,N)))),128))])])):(0,o.Q3)("",!0),"support"==e.current_sidebar?((0,o.uX)(),(0,o.CE)("div",Q,[(0,o.bF)(Be)])):(0,o.Q3)("",!0),"tasks"==e.current_sidebar?((0,o.uX)(),(0,o.CE)("div",K,[(0,o.bF)(We,{onBtnClicked:t[20]||(t[20]=t=>e.toggleSideBar("tasks"))})])):(0,o.Q3)("",!0),"approval_history"==e.current_sidebar?((0,o.uX)(),(0,o.CE)("div",z,[(0,o.bF)(Ve)])):(0,o.Q3)("",!0)],512)])),(0,o.bF)(Ne),(0,o.bF)(Xe,{modelValue:e.showDialog,"onUpdate:modelValue":t[22]||(t[22]=t=>e.showDialog=t)},{default:(0,o.k6)((()=>[(0,o.bF)(ze,null,{default:(0,o.k6)((()=>[(0,o.bF)(Ke,{class:"row items-center q-pb-none"},{default:(0,o.k6)((()=>[U,(0,o.bF)(Qe),(0,o.bo)((0,o.bF)(ye,{icon:"close",flat:"",round:"",dense:""},null,512),[[nt]])])),_:1}),(0,o.bF)(Ke,null,{default:(0,o.k6)((()=>[(0,o.eW)(" Don't think too much and just contact us to learn more about the application! ")])),_:1}),(0,o.Lk)("div",H,[(0,o.bF)(Qe),(0,o.bF)(ye,{flat:"",color:"primary",label:"Contact us",onClick:t[21]||(t[21]=t=>e.goFormular())})])])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(Xe,{modelValue:e.split_document,"onUpdate:modelValue":t[23]||(t[23]=t=>e.split_document=t),persistent:""},{default:(0,o.k6)((()=>[(0,o.bF)(Ue)])),_:1},8,["modelValue"]),(0,o.bF)(Xe,{modelValue:e.display_doc_script_logs,"onUpdate:modelValue":t[24]||(t[24]=t=>e.display_doc_script_logs=t)},{default:(0,o.k6)((()=>[(0,o.bF)(ze,{class:"standard-popup-size"},{default:(0,o.k6)((()=>[(0,o.bF)(je,{class:"text-white secondary-toolbar"},{default:(0,o.k6)((()=>[(0,o.bF)(He,null,{default:(0,o.k6)((()=>[(0,o.Lk)("span",j,(0,s.v_)(e.$t("doc_script_logs")),1)])),_:1}),(0,o.bo)((0,o.bF)(ye,{flat:"",round:"",dense:"",icon:"close"},null,512),[[nt]])])),_:1}),(0,o.bF)(Ke,null,{default:(0,o.k6)((()=>[(0,o.bF)(Ge)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Lk)("div",G,[(0,o.bF)(Xe,{modelValue:e.textConfirmation,"onUpdate:modelValue":t[29]||(t[29]=t=>e.textConfirmation=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(ze,{style:{width:"440px"}},{default:(0,o.k6)((()=>[(0,o.bF)(je,{class:"secondary-toolbar"},{default:(0,o.k6)((()=>[(0,o.bF)(He,null,{default:(0,o.k6)((()=>[(0,o.Lk)("span",J,(0,s.v_)(e.$t("confirmation")),1)])),_:1}),(0,o.bo)((0,o.bF)(ye,{flat:"",round:"",dense:"",icon:"close"},null,512),[[nt]])])),_:1}),(0,o.bF)(Ke,{class:"q-pt-none"},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.textConfirmationMsg),1)])),_:1}),(0,o.bF)(Je,{align:"right",class:"text-teal"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(ye,{color:"grey",label:e.$t("pages.screen2a.cancel"),"data-cy":"cancel",onClick:t[25]||(t[25]=t=>e.cancelOverlayDiv())},null,8,["label"]),[[nt]]),(0,o.bo)((0,o.bF)(ye,{color:"grey","data-cy":"no",label:"Don't ask again",onClick:t[26]||(t[26]=t=>e.askLater())},null,512),[[nt]]),(0,o.bo)((0,o.bF)(ye,{color:"grey","data-cy":"no",label:e.$t("re_select"),onClick:t[27]||(t[27]=t=>e.enableDrawing(!0))},null,8,["label"]),[[nt]]),(0,o.bo)((0,o.bF)(ye,{color:"primary","data-cy":"yes",label:e.$t("pages.screen2a.yes"),onClick:t[28]||(t[28]=t=>e.updateFieldData())},null,8,["label"]),[[nt]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(Xe,{modelValue:e.saveInstant,"onUpdate:modelValue":t[30]||(t[30]=t=>e.saveInstant=t)},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.updateFieldData()),1)])),_:1},8,["modelValue"])]),(0,o.bF)(Xe,{modelValue:e.selectMonitor,"onUpdate:modelValue":t[33]||(t[33]=t=>e.selectMonitor=t),position:"top"},{default:(0,o.k6)((()=>[(0,o.bF)(ze,{style:{width:"600px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Y,[(0,o.Lk)("div",{style:{padding:"10px","text-align":"center"},class:"col-sm-6 col-md-6 col-lg-6 cursor-pointer",onClick:t[31]||(t[31]=t=>e.openComponentInSeparateWindow(0))},[(0,o.bF)(Ke,{class:"screenhover",style:{border:"1px solid #d8d8d8","border-radius":"5px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Z,[(0,o.bF)(Se,{name:"desktop_windows",size:"xl",style:{"font-size":"150px"}})]),ee])),_:1})]),(0,o.Lk)("div",{style:{padding:"10px","text-align":"center"},class:"col-sm-6 col-md-6 col-lg-6 cursor-pointer",onClick:t[32]||(t[32]=t=>e.openComponentInSeparateWindow(1))},[(0,o.bF)(Ke,{class:"screenhover",style:{border:"1px solid #d8d8d8","border-radius":"5px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("div",te,[(0,o.bF)(Se,{name:"desktop_windows",size:"xl",style:{"font-size":"150px"}})]),ie])),_:1})])])])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(Xe,{modelValue:e.display_barcode_assignment,"onUpdate:modelValue":t[34]||(t[34]=t=>e.display_barcode_assignment=t),onKeydown:t[35]||(t[35]=(0,a.jR)((t=>e.display_barcode_assignment=!1),["esc"]))},{default:(0,o.k6)((()=>[(0,o.bF)(ze,{style:{"min-width":"320px","max-width":"1000px"}},{default:(0,o.k6)((()=>[(0,o.bF)(Ke,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("Barcode Mapping (currently reverse order)")),1)])),_:1}),e.barcode_amount>0?((0,o.uX)(),(0,o.Wv)(Ke,{key:0},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.barcode_data,((t,i)=>((0,o.uX)(),(0,o.CE)("div",{style:{"margin-top":"15px"},key:t},[(0,o.eW)(" Barcode "+(0,s.v_)(i)+" : "+(0,s.v_)(t)+" ",1),(0,o.bF)(Ye,{outlined:"",dense:"",clearable:"",modelValue:e.barcode_field_set[i],"onUpdate:modelValue":[t=>e.barcode_field_set[i]=t,o=>e.setFieldData(t,e.barcode_field_set[i],i)],options:e.doc_fields},null,8,["modelValue","onUpdate:modelValue","options"])])))),128))])),_:1})):((0,o.uX)(),(0,o.Wv)(Ke,{key:1},{default:(0,o.k6)((()=>[(0,o.Lk)("div",null,(0,s.v_)(e.$t("No Barcodes extracted/found")),1)])),_:1}))])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(at,{class:"validation-status-bar back-white"},{default:(0,o.k6)((()=>[(0,o.bF)(je,{class:(0,s.C4)(["row justify-start",""==e.current_sidebar?"":"opened-right-padding"])},{default:(0,o.k6)((()=>[(0,o.Lk)("span",oe,(0,s.v_)(e.record.filename),1),(0,o.bF)(ye,{size:"md",flat:"",dense:"",class:"q-ml-xs",onClick:t[36]||(t[36]=t=>e.downloadFile())},{default:(0,o.k6)((()=>[(0,o.bF)(Se,{name:"download",style:{color:"#8a8a8a"}})])),_:1}),(0,o.bF)(Le,{vertical:"",class:"q-mx-md"}),(0,o.Lk)("span",se,(0,s.v_)(e.currentDisplayedMessage),1),e.currentDisplayedMessage?((0,o.uX)(),(0,o.Wv)(Le,{key:0,vertical:"",class:"q-mx-md"})):(0,o.Q3)("",!0),e.script_error_count>0?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[e.DOC_SCRIPT_MODULE?((0,o.uX)(),(0,o.CE)("span",{key:0,class:"footer-status-message text-red cursor-pointer",onClick:t[37]||(t[37]=t=>e.display_doc_script_logs=!0)},[(0,o.eW)((0,s.v_)(e.$t("error_in_document_script"))+" ",1),(0,o.bF)(Ie,{align:"top",rounded:"",color:"red"},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.script_error_count),1)])),_:1})])):(0,o.Q3)("",!0),(0,o.bF)(Le,{vertical:"",class:"q-mx-md"})],64)):(0,o.Q3)("",!0),(0,o.Lk)("div",ae,[(0,o.bF)(Ze,{appearance:"tertiary","data-cy":"previous",onClick:t[38]||(t[38]=t=>e.routeToNextDoc("prev"))},{default:(0,o.k6)((()=>[(0,o.bF)(Se,{class:"text-red-13",size:"sm"},{default:(0,o.k6)((()=>[ne])),_:1}),(0,o.bF)(xe,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("Previous_Document")),1)])),_:1})])),_:1}),(0,o.bF)(Ze,{appearance:"tertiary","data-cy":"next",onClick:t[39]||(t[39]=t=>e.routeToNextDoc("next"))},{default:(0,o.k6)((()=>[(0,o.bF)(xe,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("Next_Document")),1)])),_:1}),(0,o.bF)(Se,{class:"text-red-13",size:"sm",style:{"margin-left":"7px"}},{default:(0,o.k6)((()=>[le])),_:1})])),_:1})]),(0,o.bF)(Qe),e.record.table_blocked?((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[(0,o.bF)(Le,{vertical:"",class:"q-mx-md"}),(0,o.bF)(Se,{class:"text-blue",style:{"font-size":"22px"},name:"info"}),(0,o.Lk)("span",re,(0,s.v_)(e.$t("block_supplier_warning")),1)],64)):(0,o.Q3)("",!0),(0,o.bF)(Le,{vertical:"",class:"q-mx-xs"}),e.record.table_blocked?((0,o.uX)(),(0,o.CE)("div",ce,[(0,o.bF)(ot,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])])):((0,o.uX)(),(0,o.CE)("div",de,[(0,o.bF)(ye,{flat:"",dense:"",icon:"img:images/table_extraction.svg",class:"icon-grey validation-footer-table-button",onClick:e.goToTableExtraction},{default:(0,o.k6)((()=>[(0,o.bF)(xe,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("go_to_table_extraction_view")),1)])),_:1})])),_:1},8,["onClick"]),e.has_ai_table?((0,o.uX)(),(0,o.Wv)(ye,{key:0,flat:"",dense:"",icon:"img:images/Add_column.svg",class:"icon-grey-svg validation-footer-table-button",onClick:t[40]||(t[40]=t=>e.showNonMappedColumnsDialog())},{default:(0,o.k6)((()=>[(0,o.bF)(xe,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("add_empty_mapped_columns")),1)])),_:1})])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(et),(0,o.bF)(tt),e.has_ai_table?((0,o.uX)(),(0,o.Wv)(ye,{key:1,flat:"",dense:"",icon:"img:images/table_delete.svg",class:"icon-grey validation-footer-table-button",onClick:e.deleteTable},{default:(0,o.k6)((()=>[(0,o.bF)(xe,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("delete_table")),1)])),_:1})])),_:1},8,["onClick"])):(0,o.Q3)("",!0),e.has_ai_table?((0,o.uX)(),(0,o.Wv)(ye,{key:2,flat:"",dense:"",icon:"img:images/column.svg",class:"icon-grey validation-footer-table-button",onClick:t[41]||(t[41]=t=>e.addColumnInLineItems())},{default:(0,o.k6)((()=>[(0,o.bF)(xe,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("add_new_table_column")),1)])),_:1})])),_:1})):(0,o.Q3)("",!0),e.has_ai_table?((0,o.uX)(),(0,o.Wv)(ye,{key:3,flat:"",dense:"",icon:"img:images/row.svg",class:"icon-grey validation-footer-table-button",onClick:t[42]||(t[42]=t=>e.addRowInLineItems())},{default:(0,o.k6)((()=>[(0,o.bF)(xe,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("add_new_table_row")),1)])),_:1})])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(it,{class:"q-mx-xs"}),e.has_ai_table?((0,o.uX)(),(0,o.Wv)(ye,{key:4,flat:"",dense:"",icon:"repartition",class:"icon-grey validation-footer-table-button",onClick:t[43]||(t[43]=t=>e.restoreDeleteColumn())},{default:(0,o.k6)((()=>[(0,o.bF)(xe,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("restore_table_column")),1)])),_:1})])),_:1})):(0,o.Q3)("",!0)])),e.images.length?((0,o.uX)(),(0,o.Wv)(Le,{key:5,vertical:"",class:"q-mx-xs"})):(0,o.Q3)("",!0),e.images.length?((0,o.uX)(),(0,o.CE)("span",he,(0,s.v_)(e.currentPage())+" / "+(0,s.v_)(e.images.length),1)):(0,o.Q3)("",!0),"annotate"!==e.field_view_mode?((0,o.uX)(),(0,o.CE)(o.FK,{key:7},[(0,o.bF)(Le,{vertical:"",class:"q-mx-xs"}),(0,o.bF)(ye,{flat:"",dense:"",icon:"remove",class:"icon-grey validation-footer-button",onClick:e.ZoomOut},null,8,["onClick"]),(0,o.bF)(st,{class:"zoom-slider",dense:"",modelValue:e.zoom_value,"onUpdate:modelValue":[t[44]||(t[44]=t=>e.zoom_value=t),t[45]||(t[45]=t=>{e.zoom(t)})],min:.3,max:.8,step:.005},null,8,["modelValue"]),(0,o.bF)(ye,{flat:"",dense:"",icon:"add",class:"icon-grey validation-footer-plus-button",onClick:e.ZoomIn},null,8,["onClick"])],64)):(0,o.Q3)("",!0)])),_:1},8,["class"])])),_:1})],64)}var ge=i(1659),me=i(6044),pe=i(24622),_e=i(45938),fe=i(68450),ve=i(38734),be=i(46162),ke=i(11470),we=i(96056),ye=i(89156),Ce=i(64233),xe=i(18505),Fe=i(57366),Le=i(64775),Ee=i(28684),Ae=i(42300),De=i(51476),Ie=i(96075),Se=i(53665),Te=i(81589),Re=i(25891),Oe=i(93970),Me=i(39281),Pe=i(93829),qe=i(7080),Be=i(76445),We=i(93865),Ve=i(77362),$e=i(86124),Ne=i(68987),Qe=i(82080),Ke=i(12566),ze=i(14907),Xe=i(41903),Ue=i(54885),He=i(45022),je=i(13322),Ge=i(46687),Je=i(82600),Ye=i(17604),Ze=i(72608),et=i(64500),tt=i(31191);const it=(0,o.Lk)("span",{class:"q-ml-sm"},"For this change to take effect, document must be restarted. Do you want to restart now?",-1);function ot(e,t,i,s,a,n){const l=(0,o.g2)("q-toggle"),r=(0,o.g2)("q-avatar"),d=(0,o.g2)("q-card-section"),c=(0,o.g2)("f-btn"),h=(0,o.g2)("q-card-actions"),u=(0,o.g2)("q-card"),g=(0,o.g2)("q-dialog"),m=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l,{modelValue:e.eTextModel,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.eTextModel=t),t[1]||(t[1]=t=>e.showConfirmDialog())],label:e.$t("ocr_setting_etext")},null,8,["modelValue","label"]),(0,o.bF)(g,{modelValue:e.confirmRestart,"onUpdate:modelValue":t[4]||(t[4]=t=>e.confirmRestart=t),persistent:""},{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.k6)((()=>[(0,o.bF)(r,{icon:"warning",color:"primary"})])),_:1}),(0,o.bF)(d,{class:"row items-center"},{default:(0,o.k6)((()=>[it])),_:1}),(0,o.bF)(h,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(c,{appearance:"cancel","data-cy":"cancel",label:e.$t("cancel"),onClick:t[2]||(t[2]=t=>e.cancel())},null,8,["label"]),[[m]]),(0,o.bo)((0,o.bF)(c,{label:e.$t("confirm"),"data-cy":"delete-popup",onClick:t[3]||(t[3]=t=>e.saveSettingsAndRestart())},null,8,["label"]),[[m]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var st=i(76956),at=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function n(e){try{r(o.next(e))}catch(t){a(t)}}function l(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(n,l)}r((o=o.apply(e,t||[])).next())}))};const nt=(0,o.pM)({name:"TfidPreference",mixins:[pe.A],emits:["restartDocument"],props:{tfidf_id:{type:String,default:""},docId:{type:String,default:""}},data(){return{eTextModel:(0,ve.KR)(!1),confirmRestart:(0,ve.KR)(!1),use_etext_if_available:st.aH.use_etext_if_available}},mounted:function(){this.getTfidfPreference()},methods:{getTfidfPreference(){return at(this,void 0,void 0,(function*(){try{let e=yield ke.jD.getTfidfPreference(this.use_etext_if_available,this.tfidf_id);"true"===e&&(this.eTextModel=!0)}catch(e){return this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(e)}}))},saveSettings(){return at(this,void 0,void 0,(function*(){try{const e=new FormData;e.append("key",this.use_etext_if_available),e.append("value",this.eTextModel.toString()),e.append("tfidf_id",this.tfidf_id);yield ke.jD.setTfidfPreference(e);this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(e)}}))},saveSettingsAndRestart(){return at(this,void 0,void 0,(function*(){this.confirmRestart=!1,yield this.saveSettings(),this.$emit("restartDocument",this.docId)}))},cancel(){this.confirmRestart=!1,this.eTextModel=!this.eTextModel},showConfirmDialog(){this.confirmRestart=!0}}});var lt=i(12807),rt=i(66908),dt=i(82156),ct=i(23316),ht=i(44189),ut=i(3952),gt=i(62669),mt=i(88672),pt=i(98582),_t=i.n(pt);const ft=(0,lt.A)(nt,[["render",ot]]),vt=ft;_t()(nt,"components",{QToggle:rt.A,QDialog:dt.A,QCard:ct.A,QCardSection:ht.A,QAvatar:ut.A,QCardActions:gt.A}),_t()(nt,"directives",{ClosePopup:mt.A});var bt=i(4924),kt=i(12682),wt=i(41843),yt=i(42517),Ct=i(26471),xt=i(83319),Ft=i(18783),Lt=i(13912),Et=i(46032),At=i(68220),Dt=i(21529),It=i(35519),St=i(92867),Tt=i(14291),Rt=i(82161),Ot=i(34835),Mt=i(32438),Pt=i(89977),qt=i(85203),Bt=i(46186),Wt=i(4995);const Vt=e=>((0,o.Qi)("data-v-4cdd5356"),e=e(),(0,o.jt)(),e),$t=Vt((()=>(0,o.Lk)("img",{width:"24",height:"24",src:"images/keyboard_dark_2.svg"},null,-1)));function Nt(e,t,i,n,l,r){const d=(0,o.g2)("q-tooltip"),c=(0,o.g2)("q-icon"),h=(0,o.g2)("q-btn"),u=(0,o.g2)("q-item-section"),g=(0,o.g2)("q-item-label"),m=(0,o.g2)("q-item"),p=(0,o.g2)("keyboardShortcutInfo"),_=(0,o.g2)("q-card-actions"),f=(0,o.g2)("q-card"),v=(0,o.g2)("q-dialog"),b=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.CE)(o.FK,null,[e.show_all_menu_btns?((0,o.uX)(),(0,o.Wv)(h,{key:0,flat:"",class:"validation-view-button"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{name:"keyboard",width:"22",class:"keyboard-icon cursor-pointer",onClick:e.buttonClick},{default:(0,o.k6)((()=>[(0,o.bF)(d,{style:{"white-space":"nowrap"}},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("keyboard_shortcut")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})):(0,o.bo)(((0,o.uX)(),(0,o.Wv)(m,{key:1,clickable:"",onClick:e.buttonClick},{default:(0,o.k6)((()=>[(0,o.bF)(u,{avatar:""},{default:(0,o.k6)((()=>[$t])),_:1}),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.$t("keyboard_shortcut")),1)])),_:1})])),_:1})])),_:1},8,["onClick"])),[[b]]),(0,o.bF)(v,{modelValue:e.showKeyboardShortcuts,"onUpdate:modelValue":t[1]||(t[1]=t=>e.showKeyboardShortcuts=t),onKeydown:t[2]||(t[2]=(0,a.jR)((t=>e.showKeyboardShortcuts=!1),["esc"]))},{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.bF)(p),(0,o.bF)(_,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bF)(h,{flat:"",color:"primary",label:e.$t("close"),class:"float-right",style:{"font-weight":"900"},onClick:t[0]||(t[0]=t=>e.showKeyboardShortcuts=!1)},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}const Qt={class:"text-weight-medium text-h6"},Kt={class:"highlighted-back"},zt={class:"text-left",style:{"font-weight":"bold"}},Xt={class:"text-left",style:{"font-weight":"900"}},Ut=(0,o.Lk)("tr",null,[(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Moves to next fields "),(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,o.Lk)("span",{class:"shortcut-Key-box"}," Enter ")])],-1),Ht=(0,o.Lk)("tr",null,[(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Validate & jump to next red-marked field "),(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,o.Lk)("span",{class:"shortcut-Key-box q-mr-sm"}," TAB ")])],-1),jt={class:"text-left",style:{"font-weight":"bold"}},Gt={class:"text-left",style:{"font-weight":"900"}},Jt=["src"],Yt=(0,o.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," k ",-1),Zt=(0,o.Lk)("tr",null,[(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Checkbox check/uncheck "),(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,o.Lk)("span",{class:"shortcut-Key-box"}," Space ")])],-1),ei=(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Moves to next group of fields ",-1),ti={class:"text-left",style:{"font-weight":"900"}},ii=["src"],oi=(0,o.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," G ",-1),si=(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Move To first field of first group ",-1),ai={class:"text-left",style:{"font-weight":"900"}},ni=["src"],li=(0,o.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," F ",-1),ri=(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Save document ",-1),di={class:"text-left",style:{"font-weight":"900"}},ci=["src"],hi=(0,o.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," S ",-1),ui=(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Reject document ",-1),gi={class:"text-left",style:{"font-weight":"900"}},mi=["src"],pi=(0,o.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," R ",-1),_i=(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Export without Sonderwunsch ",-1),fi={class:"text-left",style:{"font-weight":"900"}},vi=["src"],bi=(0,o.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," E ",-1),ki=(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Export with Sonderwunsch ",-1),wi={class:"text-left",style:{"font-weight":"900"}},yi=["src"],Ci=(0,o.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," W ",-1),xi=(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," Jump to Table Section ",-1),Fi={class:"text-left",style:{"font-weight":"900"}},Li=["src"],Ei=(0,o.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," T ",-1),Ai=(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Create new line ",-1),Di={class:"text-left",style:{"font-weight":"900"}},Ii=["src"],Si=(0,o.Lk)("span",{class:"shortcut-Key-box q-ml-sm"}," plus (+) ",-1),Ti=(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to Next Column ",-1),Ri={class:"text-left"},Oi=(0,o.Lk)("img",{src:"images/keyboard-left-arrow.svg"},null,-1),Mi=(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to previous Column ",-1),Pi={class:"text-left"},qi={class:"q-mr-sm"},Bi=(0,o.Lk)("img",{src:"images/keyboard-right-arrow.svg"},null,-1),Wi=(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to above Row ",-1),Vi={class:"text-left"},$i=(0,o.Lk)("img",{src:"images/keyboard-up-arrow.svg"},null,-1),Ni=(0,o.Lk)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to below Row ",-1),Qi={class:"text-left"},Ki=(0,o.Lk)("img",{src:"images/keyboard-down-arrow.svg"},null,-1),zi={key:0},Xi={class:"text-left",style:{"font-weight":"bold"}},Ui={class:"text-left",style:{"font-weight":"900"}},Hi={class:"shortcut-Key-box q-mr-sm"},ji={class:"shortcut-Key-box q-ml-sm"};function Gi(e,t,i,a,n,l){const r=(0,o.g2)("q-card-section"),d=(0,o.g2)("q-icon"),c=(0,o.g2)("q-markup-table");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",Qt,(0,s.v_)(e.$t("keyboard_shortcuts")),1)])),_:1}),(0,o.bF)(r,{class:"v-p-0"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"full-width",style:{overflow:"scroll","max-height":"60vh"},"virtual-scroll":""},{default:(0,o.k6)((()=>[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",Kt,[(0,o.Lk)("th",zt,(0,s.v_)(e.$t("action")),1),(0,o.Lk)("th",Xt,(0,s.v_)(e.$t("keyboard_shortcut")),1)])]),(0,o.Lk)("tbody",null,[Ut,Ht,(0,o.Lk)("tr",null,[(0,o.Lk)("td",jt,(0,s.v_)(e.$t("doc2light.descriptions.check_keyboard_shortcut")),1),(0,o.Lk)("td",Gt,[(0,o.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,Jt)])),_:1}),(0,o.eW)(" + "),Yt])]),Zt,(0,o.Lk)("tr",null,[ei,(0,o.Lk)("td",ti,[(0,o.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,ii)])),_:1}),(0,o.eW)(" + "),oi])]),(0,o.Lk)("tr",null,[si,(0,o.Lk)("td",ai,[(0,o.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,ni)])),_:1}),(0,o.eW)(" + "),li])]),(0,o.Lk)("tr",null,[ri,(0,o.Lk)("td",di,[(0,o.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,ci)])),_:1}),(0,o.eW)(" + "),hi])]),(0,o.Lk)("tr",null,[ui,(0,o.Lk)("td",gi,[(0,o.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,mi)])),_:1}),(0,o.eW)(" + "),pi])]),(0,o.Lk)("tr",null,[_i,(0,o.Lk)("td",fi,[(0,o.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,vi)])),_:1}),(0,o.eW)(" + "),bi])]),(0,o.Lk)("tr",null,[ki,(0,o.Lk)("td",wi,[(0,o.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,yi)])),_:1}),(0,o.eW)(" + "),Ci])]),(0,o.Lk)("tr",null,[xi,(0,o.Lk)("td",Fi,[(0,o.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,Li)])),_:1}),(0,o.eW)(" + "),Ei])]),(0,o.Lk)("tr",null,[Ai,(0,o.Lk)("td",Di,[(0,o.bF)(d,{size:"40px",class:"black_to_white"},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{src:"images/"+e.combination_key+".svg"},null,8,Ii)])),_:1}),(0,o.eW)(" + "),Si])]),(0,o.Lk)("tr",null,[Ti,(0,o.Lk)("td",Ri,[(0,o.bF)(d,{size:"36px",class:"black_to_white"},{default:(0,o.k6)((()=>[Oi])),_:1})])]),(0,o.Lk)("tr",null,[Mi,(0,o.Lk)("td",Pi,[(0,o.Lk)("span",qi,[(0,o.bF)(d,{size:"36px",class:"black_to_white"},{default:(0,o.k6)((()=>[Bi])),_:1})])])]),(0,o.Lk)("tr",null,[Wi,(0,o.Lk)("td",Vi,[(0,o.bF)(d,{size:"36px",class:"black_to_white"},{default:(0,o.k6)((()=>[$i])),_:1})])]),(0,o.Lk)("tr",null,[Ni,(0,o.Lk)("td",Qi,[(0,o.bF)(d,{size:"36px",class:"black_to_white"},{default:(0,o.k6)((()=>[Ki])),_:1})])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.formLayout,((e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:t},[""!==e.short_cut_key_2&&""!==e.short_cut_key_1?((0,o.uX)(),(0,o.CE)("tr",zi,[(0,o.Lk)("td",Xi," Move to Group "+(0,s.v_)(e.title),1),(0,o.Lk)("td",Ui,[(0,o.Lk)("span",Hi,(0,s.v_)(e.short_cut_key_1),1),(0,o.eW)(" + "),(0,o.Lk)("span",ji,(0,s.v_)(e.short_cut_key_2),1)])])):(0,o.Q3)("",!0)],64)))),128))])])),_:1})])),_:1})],64)}var Ji=i(18453);const Yi=(0,o.pM)({el:"#app",mixins:[Ji.A],props:{},components:{},data(){return{combination_key:""}},mounted:function(){this.combination_key=this.getCombinationKey(null)},setup(){const e=(0,xt.uL)(),{formLayout:t}=(0,ge.bP)(e);return{formLayout:t}}});var Zi=i(857),eo=i(50492);const to=(0,lt.A)(Yi,[["render",Gi]]),io=to;_t()(Yi,"components",{QCardSection:ht.A,QMarkupTable:Zi.A,QIcon:eo.A});const oo=(0,o.pM)({el:"#app",mixins:[Ji.A],props:{},components:{keyboardShortcutInfo:io},mounted:function(){window.addEventListener("keydown",this.keyboardKeyDownEvent)},unmounted:function(){window.removeEventListener("keydown",this.keyboardKeyDownEvent)},methods:{keyboardKeyDownEvent(e){const t=this.isCombinationKey(e);75===e.keyCode&&!0===t&&(e.preventDefault(),this.showKeyboardShortcuts=!0)},buttonClick(){this.showKeyboardShortcuts=!0}},data(){return{}},setup(){const e=(0,xt.q3)(),{show_all_menu_btns:t}=(0,ge.bP)(e);return{show_all_menu_btns:t,showKeyboardShortcuts:(0,ve.KR)(!1)}}});var so=i(56384),ao=i(97410),no=i(90124),lo=i(25173),ro=i(13796);const co=(0,lt.A)(oo,[["render",Nt],["__scopeId","data-v-4cdd5356"]]),ho=co;_t()(oo,"components",{QBtn:so.A,QIcon:eo.A,QTooltip:ao.A,QItem:no.A,QItemSection:lo.A,QItemLabel:ro.A,QDialog:dt.A,QCard:ct.A,QCardActions:gt.A}),_t()(oo,"directives",{ClosePopup:mt.A});var uo=i(86224),go=i(73937),mo=i(96756),po=i(15369),_o=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function n(e){try{r(o.next(e))}catch(t){a(t)}}function l(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(n,l)}r((o=o.apply(e,t||[])).next())}))};const fo=document.querySelector.bind(document),vo=(0,o.pM)({el:"#app",mixins:[pe.A,we.A,xe.A,Ce.A,Fe.A,Ae.A,Re.A,et.A,bt.A,Qe.A,Ge.A,tt.A,uo.A,Ee.A,me.A],components:{Loader:ye.A,scriptBtn:$e.A,SubHeader:Ve.A,ScriptLogs:po.A,supportForm:je.A,autoTesting:Se.A,DocumentLock:Te.A,BlockSupplier:Tt.A,MessageBanner:Oe.A,SelectionPopup:Me.A,Classification:Pe.A,AISeverityLevel:qe.A,ImportMultiInvoice:We.A,IgnoreTableValidation:St.A,FieldsView:Be["default"],SplitDocument:Ne.A,ApprovalHistory:Je.A,ErrorDocumentView:Ke.A,InvoiceDuplicateLock:Ye.A,TfidfPreferenceControl:vt,restartClassificationPopup:Ct.A,Label:Ft.A,CheckBox:Lt.A,TextInput:Et.A,LineItemTable:At.A,MultiCheckBox:Dt.A,TableOfCheckboxes:It.A,HorizontalSeparator:Ot.A,ExtractedTableTabPanels:Pt.A,timeSpentTimer:Wt.A,keyboardShortcutInfoBtn:ho,autoAccountingBtn:Mt.A,InvoiceButtons:qt.A,AnnotationView:mo.A,QRCodeExtractedFields:Bt.A,TaskBtn:kt.A,TaskList:wt.A,UnBlockSupplier:Rt.A,NonMappedColumnsBtn:yt.A},watch:{$route(e,t){if(!e.hasOwnProperty("path")||!t.hasOwnProperty("path"))return;const i=e.path.split("/"),o=t.path.split("/");i.length>2&&o.length>2&&i[1]===o[1]&&this.get_cached_data_id!=this.docId&&window.location.reload()}},data(){return{skipDocTypes:["restart_in_progress","restarted"],docId:"",docStatus:"",contact:this.$t("confirm"),showDialog:!1,showExportDialog:!1,zoom_value:(0,ve.KR)(.6),showArticlePage:!1,disableSelectionButton:!0,loading:!1,isTableRow:(0,ve.KR)(!1),shownButtonsLength:0,showExpandButton:!1,saveInstant:!1,magnifyGlass:{},allowedDoctypes:st.Gk,format_warning_dismiss:{},excluded_fields:["fields_group"],account_block:"",error_message:"",currentDisplayedMessage:(0,ve.KR)(""),trigger_document_lock:(0,ve.KR)(!1),isInvoiceDuplicate:(0,ve.KR)(!1),split_document:(0,ve.KR)(!1),headerFabIcon:(0,ve.KR)(!1),dropdownModel:(0,ve.KR)(!1),imageLoaded:(0,ve.KR)(!1),textConfirmation:!1,selectMonitor:(0,ve.KR)(!1),doc_script_module_setting:st.$B,approval_history:st.Nm,barcode_amount:(0,ve.KR)(0),barcode_data:(0,ve.KR)({}),display_barcode_assignment:(0,ve.KR)(!1),barcode_field_set:(0,ve.KR)({}),doc_fields:(0,ve.KR)([])}},beforeRouteLeave:function(e,t,i){return _o(this,void 0,void 0,(function*(){this.setDataToCache(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.removeMagnifier(),this.removeAllNotifications(),this.page=1,this.external_window&&this.external_window.close(),"function"===typeof this.format_warning_dismiss&&this.format_warning_dismiss(),e.params.id!==t.params.id&&(yield this.releaseDocLock({doc_id:this.record.doc_id})),this.resetDocStore(e.fullPath),this.resetStoreOnRouteChange(),i()}))},showDialog1:function(){setTimeout((()=>{this.showDialog=!0}),2e3)},beforeMount:function(){this.renderComponent=!1,this.isExtenedPanel=!1},mounted:function(){this.showLoading(),this.connectWebSocket(),this.init(),this.show_all_menu_btns=!0,this.isDebugFlagHandler(),this.is_admin=(0,go.N6)();let e=this.$route.params.id;this.getDocAnnotations(e),window.addEventListener("resize",this.windowResize),document.body.addEventListener("click",this.mouseClicked,!0);const t=fo(".img-magnifier-container");t&&t.addEventListener("scroll",this.removeOverlayandLines);const i=fo(".q-splitter__after");i&&i.addEventListener("scroll",this.removeOverlayandLines),document.addEventListener("dispatch_status_bar_message",this.dispatchTaskbarMessage),document.addEventListener("highlight_table_row",this.highlightTableRowArea),document.addEventListener("refresh_canvas",this.refreshCanvas),document.addEventListener("set_splitter_model",this.setSplitterModelWrapper),window.FieldValidationView=this},unmounted:function(){window.removeEventListener("resize",this.windowResize),window.removeEventListener("keydown",this.keydownEvent),document.removeEventListener("dispatch_status_bar_message",this.dispatchTaskbarMessage),document.removeEventListener("highlight_table_row",this.highlightTableRowArea),document.removeEventListener("removeSelectedAreaOnImage",this.removeSelectedAreaOnImage);const e=fo(".img-magnifier-container");e&&e.removeEventListener("scroll",this.removeOverlayandLines);const t=fo(".q-splitter__after");t&&t.removeEventListener("scroll",this.removeOverlayandLines);try{this.screenshot=fo(".screenshot"),this.screenshot&&(this.screenshot.removeEventListener("dblclick",this.dblClickToSelect),this.screenshot.removeEventListener("pointerdown",this.startDrag))}catch(i){logError("something went wrong while unmount",i)}document.removeEventListener("refresh_canvas",this.refreshCanvas),document.removeEventListener("set_splitter_model",this.setSplitterModelWrapper)},methods:{prepareBarcodeData(){this.record.hasOwnProperty("barcode_mapping")||(this.record.barcode_mapping={}),this.barcode_field_set=JSON.parse(JSON.stringify(this.record.barcode_mapping)),this.doc_fields=[],this.barcode_amount=Object.keys(JSON.parse(JSON.stringify(this.record.barcode_data))).length;let e=JSON.parse(JSON.stringify(this.record.barcode_data)),t=1;for(const[i,o]of Object.entries(e))o.forEach((e=>{this.barcode_data[t]=e,t+=1}));for(let i in this.formBuilderConfigModel){let e=this.formBuilderConfigModel[i];"TextInput"!=e.fieldType&&"AmountFields"!=e.fieldType||e.hasOwnProperty("id")&&(e["value"]=e["field_id"],e["label"]=this.$t(e["field_name"]),this.doc_fields.push(e))}this.display_barcode_assignment=!0},setFieldData(e,t,i){if(null!=this.record.barcode_mapping[i]&&void 0!=this.record.barcode_mapping[i]){let e=this.record.barcode_mapping[i].field_name;this.formBuilderModel[e].formatted_value="",this.$refs.fieldsView.inputValueChanges(e)}null!=t&&void 0!=t&&(this.record.barcode_mapping[i]=t,this.formBuilderModel[t.field_name].formatted_value=e,this.$refs.fieldsView.inputValueChanges(t.field_name))},dispatchTaskbarMessage(e){e.detail.message&&(this.currentDisplayedMessage=e.detail.message)},showNonMappedColumnsDialog(){if(this.isFormBuilderMode||this.isReadOnly)return;const e=new CustomEvent("show_non_mapped_columns_dialog",{});document.dispatchEvent(e)},deleteTable(){if(this.isFormBuilderMode||this.isReadOnly)return;this.record.tables=[];const e=new CustomEvent("delete_table",{});document.dispatchEvent(e)},addColumnInLineItems(){if(this.isFormBuilderMode||this.isReadOnly)return;const e=new CustomEvent("add_ai_new_column",{});document.dispatchEvent(e)},addRowInLineItems(){const e=new CustomEvent("add_new_empty_row",{});document.dispatchEvent(e)},ZoomIn(){this.zoom_value>=.79||(this.zoom_value=this.zoom_value+.1,this.zoom(this.zoom_value))},ZoomOut(){this.zoom_value<=.3||(this.zoom_value=this.zoom_value-.1,this.zoom(this.zoom_value))},toggleSideBar(e){if(this.current_sidebar==e)return this.toggleMenu(),void(this.current_sidebar="");""==this.current_sidebar&&this.toggleMenu(),this.current_sidebar=e},improveDocuments(){return _o(this,void 0,void 0,(function*(){try{if(this.isReadOnly)return;yield ke.M8.improve_document_quality(this.docId)}catch(e){return this.hideLoading(),void this.showErrorToast("There was an error improving the document")}}))},init(){return _o(this,void 0,void 0,(function*(){try{if(this.docId=this.$route.params.id,this.setAppType(),yield this.startSettingsFetch(),yield this.getInvoiceDataByDocId(this.docId),!this.record||0===Object.keys(this.record).length||!1===this.record.success||this.doc_fetch_error)return void this.hideLoading();this.handleReadOnly(),this.handleDocLockSubscribe(),this.getSplitterValueFromStorage(),this.handleDiplicateInvoiceSettings(),this.fetchAttributes(this.record.doc_type),this.isReadOnly?(this.error_message=this.$t("pages.messages.READ_ONLY_MSG"),this.trigger_document_lock=!1):this.trigger_document_lock=!0,this.initPage()}catch(e){logError(e)}finally{this.hideLoading()}}))},handleDiplicateInvoiceSettings(){return _o(this,void 0,void 0,(function*(){yield this.fetchAttributes(),this.isInvoiceDuplicate=this.model[st.aH.DUPLICATE_DETECTION],this.isInvoiceDuplicate||(this.isInvoiceDuplicate=this.model[st.aH.DUPLICATE_INVOICE_DETECTION])}))},setInvoiceDuplicateStatus(e){this.isInvoiceDuplicate=e},setTriggerDocumentLock(e){this.trigger_document_lock=e},setCurrentPage(){this.lastPageItem=this.record.images.length},setAppType(){this.$route.params.id||this.goToDashboard(),setTimeout((()=>{this.showDialog=!1}),1e4)},handleDocLockSubscribe(){const e=(0,xt.oI)();e.$subscribe(((e,t)=>{this.isReadOnly=!this.doc_lock.success,this.handleReadOnly()}))},handleReadOnly(){if(st.B2.includes(this.record.status))return void(this.isReadOnly=!0);const e=_e.tH.hasAccess("update");e||(this.isReadOnly=!0)},getInvoiceDataByDocId(e){return _o(this,void 0,void 0,(function*(){try{if((yield this.setRecordFromCache())&&this.record.doc_id===e)return;this.record=[],this.clearSelectedSessionStorage(),yield this.getDocumentById(e)}catch(t){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(t)}}))},getConfidence(e){return e?e<1?(100*+e.toFixed(2)).toFixed(0):+e.toFixed(2):""},initPage(){this.handleFormatWarning(),this.docType=this.record.doc_type,this.docStatus=this.record.status,this.setImage(),this.initImageArea(),window.addEventListener("keydown",this.keydownEvent),document.addEventListener("removeSelectedAreaOnImage",this.removeSelectedAreaOnImage),this.getAI_IndicatorData(),this.enableOrDisableExportButton(),setTimeout((()=>{this.setCurrentPage()}),200),this.DOC_SCRIPT_MODULE=this.user_settings[this.doc_script_module_setting]},changeContentScroll(e){const t=document.querySelector("#validation_bar_content");var i=t.scrollTop;t.scrollTop=i+e},onScrollUp(){this.changeContentScroll(-110);const e=document.querySelector("#validation_bar_content"),t=e.scrollHeight-e.clientHeight;var i=e.scrollTop;this.showScrollDownButton=i!=t,this.showScrollUpButton=0!=i},onScrollDown(){this.changeContentScroll(110);const e=document.querySelector("#validation_bar_content"),t=e.scrollHeight-e.clientHeight;var i=e.scrollTop;this.showScrollDownButton=i!=t,this.showScrollUpButton=0!=i},openPDfWindoByDefault(){this.user_settings["DUAL_MONITOR_MODE_SETTING"]&&this.isMultiScreen()&&0==this.pdf_in_window&&this.selectBetweenMonitor()},isElementLoaded(e){return _o(this,void 0,void 0,(function*(){while(null===document.querySelector(e))yield new Promise((e=>requestAnimationFrame(e)));return document.querySelector(e)}))},selectBetweenMonitor(){return _o(this,void 0,void 0,(function*(){if(0!=this.pdf_in_window)this.closeExternalWindow();else if(this.isMultiScreen()){const e=yield ke.jD.getUserPreference({key:"MONITOR_PREFERENCE"});if(e){let t=e.slice(-1),i=isNaN(t)?0:+t-1;this.openComponentInSeparateWindow(i)}else this.selectMonitor=!0}else this.showErrorToast(this.$t("pages.messages.MULTI_SCREENS_NOT_FOUND"))}))},closeExternalWindow(){this.external_window.close(),this.pdf_in_window=!1,this.splitterModel=80,this.prepareRectangles()},openComponentInSeparateWindow(e){this.pdf_in_window=!0,this.selectMonitor=!1,this.splitterModel=0,this.setDataToCache(),this.removeOverlayandLines();let t=this.$router.resolve({path:"/show_pdf/"+this.docId});this.openWindowOnSelectedMonitor(e,t.href)},getPreviousDocId(e){return _o(this,void 0,void 0,(function*(){try{let{currentDocIndex:t,paginationCount:i,userPagination:o,documents:s,skip:a,query:n}=e,l="";if(t>=0&&i>=1){let e=i,r=t-1,d=!1;while(!d)if(r>=0){if(this.skipDocTypes.includes(s[r].status)){r--;continue}l=s[r].id,d=!0}else{if(a<=0)break;e--,a=(e-1)*o;const t=yield ke.z6.getList(`?&skip=${a}&limit=`+o+n);s=t.documents,r=t.documents.length-1}}else s.length>0&&(l=s[0].id);return{nextId:l,skip:a}}catch(t){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(t)}}))},getNextDocId(e){return _o(this,void 0,void 0,(function*(){let{currentDocIndex:t,paginationCount:i,userPagination:o,totalRecord:s,totalPage:a,response:n,skip:l,query:r}=e,d="";if(t>=0&&i!==a){let e=n.documents,a=i,c=t+1,h=!1;while(!h)if(c<e.length){if(this.skipDocTypes.includes(e[c].status)){c++;continue}d=e[c].id,h=!0}else{if(l>=s)break;a++,l=(a-1)*o;const t=yield ke.z6.getList(`?&skip=${l}&limit=`+o+r);e=t.documents,c=0}}else n.documents.length>0&&(d=n.documents[0].id);return{nextId:d,skip:l}}))},routeToNextDoc(e){var t;return _o(this,void 0,void 0,(function*(){this.showLoading();try{let i=yield this.makeQueryParamFromFilters(!1);const o=yield ke.jD.getUserAllPreferences();let s=null!==(t=o.PAGINATION_SIZE)&&void 0!==t?t:10,a=this.getPaginationCount();a||(a=1);let n=(a-1)*s;const l=yield ke.z6.getList(`?&skip=${n}&limit=`+s+i);let r=l.documents.findIndex((e=>e.id===this.docId)),d=l.overview["results-count"];const c=Math.ceil(l.total/s);let h="",u={nextId:"",skip:n};if("next"===e?u=yield this.getNextDocId({currentDocIndex:r,paginationCount:a,userPagination:s,totalRecord:d,totalPage:c,response:l,skip:n,query:i}):"prev"===e&&(u=yield this.getPreviousDocId({currentDocIndex:r,paginationCount:a,userPagination:s,documents:l.documents,skip:n,query:i})),h=u.nextId,n=u.skip,""!==h&&null!==h){this.showSuccessToast(this.$t("pages.messages.NEXT_DOC_LOADED")),this.unLockDoc(),window.removeEventListener("beforeunload",this.onTabClose),this.resetAllStoreData();const e=Math.ceil(n/parseInt(s))+1;He.A.set((0,De.un)(st.me),{paginationCount:e,pagination_size:s}),this.$router.push("/field_validation_v1/"+h)}else this.showErrorToast(this.$t("pages.messages.NO_NEXT_DOC"))}catch(i){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(i)}finally{this.hideLoading()}}))},onTabClose(e){let t=Xe.A.has("event_name")?Xe.A.getItem("event_name"):null;t&&"language_change"===t||(e.preventDefault(),e.returnValue="",this.clearSelectedSessionStorage())},keydownEvent(e){try{"Escape"===e.key?(this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.removeMagnifier(),this.isInvoiceDuplicate=!1):"Enter"===e.key?(this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.connectionId=""):"ArrowDown"===e.key&&(this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.$refs["fieldsView"].selectNextField(this.connectionId),setTimeout((()=>{this.enableOrDisableExportButton()}),5),this.connectionId="")}catch(e){logInfo(e)}},getAI_IndicatorData(){return _o(this,void 0,void 0,(function*(){try{let e;if(this.ai_fields=this.record&&this.record.fields&&Array.isArray(this.record.fields)?this.record.fields.length:0,!this.record.filter_values||!(this.record.filter_values.length>0)||!Array.isArray(this.record.filter_values))throw"getAI_IndicatorData () no filter_values or doc_type to proceed";let t="?doc_type="+this.record.doc_type+"&filter_values="+this.record.filter_values.join();if(e=yield ke.M8.get_ai_score(t),!1===e.success)throw e.message;if(!0===e.success){this.ai_rules=e.rules,this.mean_effective_weight=e.mean_effective_weight;const t=new CustomEvent("FV_gauge_calculation",{detail:e});document.dispatchEvent(t)}}catch(e){logError(e)}}))},imageclicked(e){this.image=this.baseUrl+"/"+(0,Ie.v)(this.record.images[e.target.dataset.id].path),this.page=parseInt(e.target.dataset.id)+1,this.pdf_in_window?this.pdfInChildPage():this.pdfInSamePage()},movePageUp(){this.page!=this.lastPageItem?(this.page++,this.quickActionClicked(this.page)):this.showErrorToast(this.$t("pages.screen2a.page_limit_reached"))},movePageDown(){1!=this.page&&(this.page--,this.quickActionClicked(this.page))},downloadFile(){try{let e=be.VA+"/resource/document/"+this.docId+"/"+this.docId+".pdf?"+this.tokenQueryParam;if(!e)return;fetch(e).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=this.record.filename,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)})).catch((e=>{logError("Error downloading file:",e)}))}catch(e){logError(e)}},validatePageNumber(){this.page?(this.page>this.lastPageItem&&(this.page=this.lastPageItem),this.quickActionClicked(this.page)):this.page=1},quickActionClicked(e){!e||0==e||e>this.lastPageItem||(this.image=this.baseUrl+"/"+(0,Ie.v)(this.record.images[e-1].path),this.pdf_in_window?this.pdfInChildPage():this.pdfInSamePage())},pdfInSamePage(){this.removeOverlayandLines(),this.getImageDetails()},pdfInChildPage(){this.external_window.PdfView.image=this.image,this.external_window.PdfView.removeOverlayandLines(),this.$nextTick((()=>{this.external_window.PdfView.prepareRectangles()}))},getImageDetails(){if(0==this.renderComponent||0==this.imageLoaded)return;let e=this.screenshot;if(0==this.screenshot.offsetWidth&&(e=fo("#screenshot2")),this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight,this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight),this.$nextTick((()=>{this.prepareRectangles()})),this.hideLoading(),this.enableOrDisableExportButton(),this.connectionId){let e=this.getElementToConnect(fo("#"+this.connectionId));if(!e)return;this.handleHighlightReact(this.connectionId,e)}},assignImageDimenions(){let e=fo("#image_container");if(e){e.querySelector(".q-splitter__before");this.imageWidth=e.offsetWidth-90,this.imageHeight=e.offsetHeight-32}this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight)},showConnectionFromRect(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing();const t=e.target.getAttribute("connectionId"),i=e.target,o=this.getElementToConnect(fo("#"+t));this.scrollInToViewCenter(o),this.scrollInToViewCenter(i),document.documentElement.scrollTop=0,setTimeout((()=>{if(t.startsWith(st.Al))return i.classList.add("border"),void this.dsiplayFieldInToView(t);this.showConnection(t,i,o)}),50)},highlightTableRowArea(e){this.showConnectionFromField(e.detail,!0)},showConnectionFromField(e,t=!1){if(this.isTableRow=t,"annotate"===this.field_view_mode)return void this.showNotification(this.$t("annotation_mode_is_on_warning"));this.pdf_in_window?(this.external_window.PdfView.removeOverlayandLines(),this.external_window.PdfView.restrictDrawing()):(this.removeOverlayandLines(),this.restrictDrawing());let i=this.getElementToConnect(fo("#"+e));if(!i)return;let o=Number(i.getAttribute("pageno"));o=isNaN(o)?this.page:o;const s=o&&o!==this.page;if(this.connectionId=e,s)return this.page=o,this.image=this.baseUrl+"/"+(0,Ie.v)(this.record.images[this.page-1].path),void(this.pdf_in_window&&this.sendMessegeToChildWindow("image",this.image,!0));this.handleHighlightReact(e,i)},handleHighlightReact(e,t){this.$nextTick((()=>{this.pdf_in_window?this.external_window.PdfView.proceedForReactFinding(e,t,this.isTableRow):this.proceedForReactFinding(e,t,this.isTableRow)}))},proceedForReactFinding(e,t,i){let o=fo("#"+e+"_rect");o&&(this.scrollInToViewCenter(o),document.documentElement.scrollTop=0),setTimeout((()=>{i?this.highlightRow(o):o?this.showConnection(e,o,t):this.proceedIfReactNotFound(t)}),50)},proceedIfReactNotFound(e){if("ELECTRONIC_DOCUMENT"===this.record.extraction_method)return;this.componentType=e.getAttribute("child_type");let t="";if("checkbox"===this.componentType)t=e.getAttribute("aria-checked")?"true":"";else{let i=e.querySelector(this.componentType);i&&(t=i.value)}if(""!=t){this.showNotification(this.$t("pages.messages.SELECT_AREA_NO_COORDINATES"));const e=new CustomEvent("dispatch_status_bar_message",{detail:{message:this.$t("pages.messages.SELECT_AREA")}});document.dispatchEvent(e)}else{this.showNotification(this.$t("pages.messages.SELECT_AREA"));const e=new CustomEvent("dispatch_status_bar_message",{detail:{message:this.$t("pages.messages.SELECT_AREA")}});document.dispatchEvent(e)}this.pdf_in_window?(this.external_window.PdfView.enableDrawing(),this.external_window.PdfView.connectionId=this.connectionId):this.enableDrawing()},showConnection(e,t,i){this.pdf_in_window?this.external_window.PdfView.proceedForReactFinding(e,i,!1):t&&i?(this.drawOverlay(e,t),t.classList.add("border"),this.connect(t,i,"#26a69a",2)):alert(this.$t("pages.messages.NO_MAPPING_AVAILABLE"))},saveOverlayResult(){this.cleanRectangles(),this.pdf_in_window?this.external_window.PdfView.redraw():this.redraw(),this.getTextByCoordinates(this.rectCordinate)},connect(e,t,i,o){const s=this.getOffset(e),a=this.getOffset(t),n=s.left,l=s.top+s.height/2,r=a.right,d=a.top+a.height/2,c=Math.sqrt((r-n)*(r-n)+(d-l)*(d-l)),h=(n+r)/2-c/2,u=(l+d)/2-o/2,g=Math.atan2(l-d,n-r)*(180/Math.PI);this.removeAllConnectionLines();const m=document.createElement("div");m.setAttribute("id","connection_line"),m.style.cssText="z-index: 102;padding:0px; margin:0px; height:"+o+"px; background-color:"+i+"; line-height:1px; position:absolute; left:"+h+"px; top:"+u+"px; width:"+c+"px; -moz-transform:rotate("+g+"deg); -webkit-transform:rotate("+g+"deg); -o-transform:rotate("+g+"deg); -ms-transform:rotate("+g+"deg); transform:rotate("+g+"deg);",document.body.appendChild(m)},getTextByCoordinates(e){return _o(this,void 0,void 0,(function*(){const t=this.record;let i,o=new FormData,s=e.startX/this.imageWidth,a=e.startY/this.imageHeight,n=e.endX/this.imageWidth,l=e.endY/this.imageHeight;o.append("x0",s.toString()),o.append("y0",a.toString()),o.append("x1",n.toString()),o.append("y1",l.toString()),o.append("doc_id",t.doc_id),o.append("page",this.page.toString()),o.append("field_name",this.connectionId),this.formBuilderConfigModel[this.connectionId].hasOwnProperty("parent_field_name")&&o.append("parent_field_name",this.formBuilderConfigModel[this.connectionId].parent_field_name),this.showLoading();try{i=yield ke.M8.get_field_value(o)}catch(d){return this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(d)}finally{this.hideLoading()}this.textApiResponse=i;const r=i.coords;if(!r||0===r[0].x&&0===r[0].y&&""===i.formatted_value)return this.showErrorToast(this.$t("pages.messages.EMPTY_MAPPING_NOT_ALLOWED")),void(this.pdf_in_window?(this.external_window.PdfView.prepareRectangles(),this.external_window.PdfView.enableDrawing()):(this.prepareRectangles(),this.enableDrawing()));"INVOICE"==this.record.doc_type?this.dontAsk?(this.textApiResponse.multi_line?this.textConfirmationMsg=this.$t("is_multi_line_confirm"):this.textConfirmationMsg=this.$t("is_draw_correct"),this.textConfirmation=!0):this.saveInstant=!0:this.updateFieldData()}))},updateFieldData(){this.$refs["fieldsView"].updateFieldData(this.textApiResponse),this.saveInstant=!1,this.textApiResponse=null},enableOrDisableExportButton(e){this.enableExportButton=!0,this.fieldErrors={},this.record.fields.forEach(((e,t)=>{this.checkFieldInvalid(e,!1)})),e&&this.printFieldsNeedToBeValidated(this.fieldErrors)},checkFieldInvalid(e,t=!0){if(!1===e.is_valid&&!this.isFieldCalcualtedFromLayout(e.name)&&this.isfieldsNotDisplayed(e.name))return this.enableExportButton=!1,void(this.fieldErrors[e.name]=this.getLabelForFormBuilder(this.formBuilderConfigModel[e.name],"form_builder."));this.fieldErrors.hasOwnProperty(e.name)&&delete this.fieldErrors[e.name],t&&0===(0,fe.Ns)(this.fieldErrors)&&(this.enableExportButton=!0)},printFieldsNeedToBeValidated(e){e?(logInfo("======================================="),logInfo("Following fields need to be validated"),logInfo(JSON.parse(JSON.stringify(e))),logInfo("=======================================")):logInfo("All fields are validated")},isFieldCalcualtedFromLayout(e){let t=!1;for(const i of this.formLayout)for(const o of i.rows)o.field_name==e&&o.calculation_formula&&(t=!0);return t},isfieldsNotDisplayed(e){let t=!0;return this.fieldsNotDisplayed.hasOwnProperty(e)&&(t=!1),t},setApiData(e){this.record=e,this.$forceUpdate()},windowResize(){this.assignImageDimenions(),this.connectionId="",setTimeout((()=>{this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.getImageDetails(),this.removeMagnifier()}),20)},refreshCanvas(){this.prepareRectangles(),this.$forceUpdate(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.getImageDetails(),this.redraw()},refreshCanvasAfterSelection(e){this.refreshCanvas(),this.showConnectionFromField(e)},removeSelectedAreaOnImage(e){this.rectangles.pop(),this.refreshCanvas(),this.restrictDrawing()},handleFormatWarning(){"XML_INVOICE"!=this.record.doc_type&&(this.format_warning_dismiss=this.showRulesNotFoundToast(this.record,window.location.href))},isDebugFlagHandler(){this.is_debug=!1,this.$route.query&&"true"===this.$route.query.is_debug&&(this.is_debug=!0)},viewOCRDocument(){let e=this.$router.resolve({path:"/ocr-document/"+this.docId+"/"+this.page});window.open(e.href,"_blank","location=yes,toolbar=yes,scrollbars=yes,resizable=yes,left=500,width=1500,height=1000")},fieldValidationError(e){let t="REQUIRED";return e&&(t=e),t},hasApiData(){return 0!==(0,fe.Ns)(this.record)&&!this.doc_fetch_error},removeOldMapiingsAndDrawNew(e){if(this.pdf_in_window)return this.external_window.PdfView.restrictDrawing(),this.external_window.PdfView.record=this.record,void this.external_window.PdfView.prepareRectangles();this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.prepareRectangles();let t=this.getElementToConnect(fo("#"+e)),i=fo("#"+e+"_rect");i&&t&&this.showConnection(e,i,t)},getElementToConnect(e){return this.componentType=e.getAttribute("child_type"),"checkbox"===this.componentType?e.querySelector(".q-checkbox__bg"):e},toggleSplitter(){this.splitterModel>=95?(this.splitterModel=60,this.setAfterPanelHeight(!0)):this.splitterModel=115},setSplitterModelWrapper(e){this.setSplitterModel(e.detail.data)},setSplitterModel(e){this.splitterModel=100,this.setAfterPanelHeight(e)},setAfterPanelHeight(e){e&&this.isElementLoaded("#afterSlot").then((e=>{const t=fo("#afterSlot"),i=fo("#image_scrolle");if(t&&i){let e=t.offsetHeight/i.offsetHeight*100;this.splitterModel=100-e-5,this.openPDfWindoByDefault()}}))},displaySplitDocumentView(){this.isReadOnly||(this.split_document=!0)},onResize(e){this.windowResize()},goToLayoutTemplate(){try{if(!this.doc_loaded)return;const e=Ze.Z.getDetailViewRoute({doc_type_key:this.record.doc_type||"",layout_template_id:this.layout_template_id||"",sub_doc_type_key:this.record.sub_doc_type||""});e||logInfo("missing params for url"),window.open(e,"_blank").focus()}catch(e){logError(e)}},toFlowScreen(e){this.$router.push("/doc_flow/"+e)},askLater(){Ue.A.set("dontAsk","neverAsk"),Ue.A.get("dontAsk")},restartDocument(e){try{return ke.z6.restartDocument(e),this.goToDashboard(),!0}catch(t){const e=Le.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}},getSupplier(){let e="supplier_name",t="";for(let i of this.record.fields)if(i.name===e&&i.formatted_value){t=i.formatted_value;break}return t},goToDashboard(){this.$router.push("/dashboard")},splitterChanged(){this.saveSplitterValueInStorage();const e=new CustomEvent("splitter_changed",{detail:this.splitterModel});document.dispatchEvent(e)},getOverlayHeadings(){const e=fo("#"+this.connectionId);if(!e)return"";const t=e.getAttribute("child_type");if(!t)return"";this.componentType=t;let i="",o="";if("checkbox"===this.componentType)o=e.getAttribute("aria-label"),i="Un-Checked","true"===e.getAttribute("aria-checked")&&(i="Checked");else{const t=fo("."+this.connectionId);o=t.innerHTML;const s=e.querySelector(this.componentType);i=s.value}return i+st.Tr+o},selectNextField(e){this.$refs["fieldsView"].selectNextField(e),setTimeout((()=>{this.enableOrDisableExportButton()}),5)},initTempFieldDelete(){this.$refs["fieldsView"].initTempFieldDelete()},getFieldByIndex(e){return this.formBuilderModel[e]},getHTMLField(e){const t=fo("#"+e.name);return t&&e.page&&null!=e.page&&e.coords&&t.setAttribute("pageno",e.page),t},initiateMagnifyGlass(){this.pdf_in_window?this.external_window.PdfView.initMagnifyGlass():this.initMagnifyGlass()},sendMessegeToChildWindow(e,t,i){this.external_window.PdfView.getDataFromParent({key:e,value:t,redraw:i})},changeScreenMode(){if(!this.isReadOnly){if("validate"==this.field_view_mode){this.field_view_mode="annotate",fo("#validate-container").classList.add("hidden"),this.screenshot.classList.remove("cursor-crosshair"),this.removeOverlayandLines(),this.screenshot.removeEventListener("dblclick",this.dblClickToSelect),this.screenshot.removeEventListener("pointerdown",this.startDrag),this.screenshot.removeEventListener("pointerdown",this.startDrag),document.body.removeEventListener("click",this.mouseClicked,!0);const e=fo(".img-magnifier-container");e&&e.removeEventListener("scroll",this.removeOverlayandLines);const t=fo(".q-splitter__after");t&&t.removeEventListener("scroll",this.removeOverlayandLines),this.enable_editing=!0}else{fo("#validate-container").classList.remove("hidden"),this.field_view_mode="validate",this.screenshot.addEventListener("dblclick",this.dblClickToSelect),this.screenshot.addEventListener("pointerdown",this.startDrag),this.screenshot.addEventListener("pointerdown",this.startDrag),document.body.addEventListener("click",this.mouseClicked,!0);const e=fo(".img-magnifier-container");e&&e.addEventListener("scroll",this.removeOverlayandLines);const t=fo(".q-splitter__after");t&&t.addEventListener("scroll",this.removeOverlayandLines),this.enable_editing=!1,this.getImageDetails()}this.screenshot.classList.remove("cursor-crosshair")}},enableEditing(){this.enable_editing,this.screenshot.classList.add("cursor-crosshair")},unLockDoc(e){this.releaseDocLock({doc_id:this.record.doc_id})},goToTableExtraction(){this.$router.push("/tbl_ext_v3/"+this.$route.params.id)},restoreDeleteColumn(){if(this.isFormBuilderMode||this.isReadOnly)return;const e=new CustomEvent("restore_delete_column",{});document.dispatchEvent(e)}},setup(){const e=(0,ze.A)(),t=(Ue.A.set("dontAsk",""),Ue.A.get("dontAsk"),(0,xt.q3)());t.$reset();const{record:i,get_cached_data_id:o,doc_loaded:s,confirmationForPoConnectionReset:a,error:n,notifications:l,layout_template_id:r,show_all_menu_btns:d,has_ai_table:c,fieldErrors:h,enableExportButton:u,page:g,document_version:m,doc_annotations:p,fieldsNotDisplayed:_,script_error_count:f}=(0,ge.bP)(t),{getDocumentById:v,resetDocStore:b,resetAllStoreData:k,setRecordFromCache:w,setDataToCache:y,removeCache:C,getDocAnnotations:x}=t,F=(0,xt.uL)(),{formLayout:L,isExtenedPanel:E,formBuilderModel:A,formBuilderConfigModel:D,renderComponent:I,docType:S}=(0,ge.bP)(F),{getElementWidth:T,isFieldHidden:R}=F;let O=[],M=[],P=(0,ve.KR)(!1),q=(0,ve.KR)(!1),B=(0,ve.KR)(!1);const W=(0,xt.oI)(),{releaseDocLock:V}=W,{doc_lock:$}=(0,ge.bP)(W),N=(0,xt.XB)(),{isConfirmationBoxDisable:Q}=(0,ge.bP)(N),{resetStoreOnRouteChange:K}=N,z=(0,xt.fX)(),{makeQueryParamFromFilters:X,getPaginationCount:U}=z,H=(0,xt.Bu)(),{user_settings:j}=(0,ge.bP)(H),{startSettingsFetch:G}=H,J=(0,xt._6)(),{tokenQueryParam:Y}=(0,ge.bP)(J);J.getTokenQueryParam();const Z=(0,xt.G6)(),{connect:ee}=Z,te=(0,xt.wt)(),{model:ie}=(0,ge.bP)(te),{fetchAttributes:oe}=te;let se=[],ae={startX:0,startY:0,endX:0,endY:0};const ne={x:0,y:0,width:0,height:0,connectionId:""};let le=0,re=0,de=fo(".screenshot"),ce=fo("#marquee"),he=(fo("#foreignObject"),fo("#boxes")),ue=fo(".areas");return{getPaginationCount:U,fetchAttributes:oe,resetAllStoreData:k,resetDocStore:b,isFieldHidden:R,doc_annotations:p,connectWebSocket:ee,show_all_menu_btns:d,get_cached_data_id:o,has_ai_table:c,doc_loaded:s,removeCache:C,setDataToCache:y,releaseDocLock:V,getDocumentById:v,setRecordFromCache:w,resetStoreOnRouteChange:K,isConfirmationBoxDisable:Q,fields_pending_load_count:(0,ve.KR)(0),fields_loaded_count:(0,ve.KR)(0),notifications:l,record:i,docType:S,confirmationForPoConnectionReset:a,doc_fetch_error:(0,ve.KR)(n),doc_lock:$,page:g,showTooltip:P,showTooltipWithHide:q,showTooltipWithClose:B,tableRows:O,fieldsNotDisplayed:_,image:(0,ve.KR)(""),current_sidebar:(0,ve.KR)(""),layout:M,images:(0,ve.KR)({}),baseUrl:be.VA,isReadOnly:(0,ve.KR)(!1),componentType:"input",lastPageItem:(0,ve.KR)(0),lineitem_count:0,lineitem_error:(0,ve.KR)(!1),is_debug:(0,ve.KR)(!1),tb_version:"default",document_version:m,showScrollDownButton:(0,ve.KR)(!1),showScrollUpButton:(0,ve.KR)(!1),splitterModel:(0,ve.KR)(60),imageFieldSplitter:(0,ve.KR)(76),showNotification(t){e.notify({message:t,color:"primary",position:"top"})},doc_type_list:M,ai_rules:(0,ve.KR)(0),ai_fields:(0,ve.KR)(0),mean_effective_weight:(0,ve.KR)(0),textConfirmationMsg:(0,ve.KR)(""),formLayout:L,isExtenedPanel:E,renderComponent:I,enableExportButton:u,getElementWidth:T,imageHeight:(0,ve.KR)(0),imageWidth:(0,ve.KR)(0),viewBox:(0,ve.KR)("0 0 0 0"),textApiResponse:(0,ve.KR)(),connectionId:(0,ve.KR)(""),is_admin:(0,ve.KR)(!1),layout_template_id:r,pdf_in_window:!1,external_window:(0,ve.KR)(),makeQueryParamFromFilters:X,rectangles:se,rectCordinate:ae,marqueeRect:ne,startX:le,startY:re,screenshot:de,marquee:ce,boxes:he,areas:ue,formBuilderModel:A,formBuilderConfigModel:D,user_settings:j,startSettingsFetch:G,getDocAnnotations:x,tokenQueryParam:Y,screen_mode:(0,ve.KR)(!1),field_view_mode:(0,ve.KR)("validate"),enable_editing:(0,ve.KR)(!1),fieldErrors:h,selectFont:(0,ve.KR)("Helvetica"),selectFontSize:(0,ve.KR)(12),selectColor:(0,ve.KR)("#000000"),DOC_SCRIPT_MODULE:(0,ve.KR)(!1),display_doc_script_logs:(0,ve.KR)(!1),script_error_count:f,model:ie}}});var bo=i(98072),ko=i(1096),wo=i(10386),yo=i(23954),Co=i(84436),xo=i(53999),Fo=i(67837),Lo=i(76056),Eo=i(93676),Ao=i(36914),Do=i(39150),Io=i(94940),So=i(57092),To=i(1444),Ro=i(80460),Oo=i(67156),Mo=i(42315);const Po=(0,lt.A)(vo,[["render",ue],["__scopeId","data-v-05c701a7"]]),qo=Po;_t()(vo,"components",{QIcon:eo.A,QSplitter:bo.A,QResizeObserver:ko.A,QBtn:so.A,QTooltip:ao.A,QSeparator:wo.A,QBadge:yo.A,QMenu:Co.A,QList:xo.A,QItem:no.A,QItemSection:lo.A,QInput:Fo.A,QDrawer:Lo.A,QDialog:dt.A,QCard:ct.A,QCardSection:ht.A,QSpace:Eo.A,QToolbar:Ao.A,QToolbarTitle:Do.A,QCardActions:gt.A,QSelect:Io.A,QFooter:So.A,QSlider:To.A,QCheckbox:Ro.A,QField:Oo.A,QTable:Mo.A}),_t()(vo,"directives",{ClosePopup:mt.A})}}]);