"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[7162],{77162:(e,t,s)=>{s.r(t),s.d(t,{default:()=>xe});var o=s(61758),a=s(29104),l=s(58790);const i=e=>((0,o.Qi)("data-v-10bd9449"),e=e(),(0,o.jt)(),e),d={class:"container"},n={class:"full-width"},r={class:"table-header-text"},_=["data-index","draggable","dropzone","onDragstart","onDrop","onDragover"],u={key:0,class:"q-pr-md text-center cursor-default"},m={key:1,class:"q-pr-md"},c=["onClick"],p={key:0,class:"text-h4"},h={key:1,class:"text-h4"},g={key:2,class:"text-h4"},b={key:3,class:"text-h4"},y={key:4,class:"text-h4"},w={key:5,class:"text-h4"},k={key:6},f={class:"text-red-14"},v={class:"q-ml-sm"},E=i((()=>(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1)));function F(e,t,s,i,F,A){const C=(0,o.g2)("SubHeader"),L=(0,o.g2)("f-btn"),S=(0,o.g2)("BackToSettings"),D=(0,o.g2)("q-item-section"),Q=(0,o.g2)("q-item"),$=(0,o.g2)("q-separator"),T=(0,o.g2)("q-list"),x=(0,o.g2)("q-menu"),q=(0,o.g2)("q-btn"),O=(0,o.g2)("q-markup-table"),R=(0,o.g2)("q-avatar"),I=(0,o.g2)("q-card-section"),V=(0,o.g2)("q-card-actions"),X=(0,o.g2)("q-card"),U=(0,o.g2)("q-dialog"),j=(0,o.g2)("Create"),K=(0,o.g2)("q-inner-loading"),N=(0,o.g2)("Loader"),W=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(C,{name:"doc_status_notifications",label:e.$t("doc_status_notifications")},null,8,["label"]),(0,o.bF)(S,null,{default:(0,o.k6)((()=>[(0,o.bF)(L,{class:"float-right",icon:"add",label:e.$t("new"),onClick:t[0]||(t[0]=t=>{e.display_create_dialog=!0,this.documentStatusAlertObj={}})},null,8,["label"])])),_:1}),(0,o.Lk)("div",d,[(0,o.Lk)("div",n,[(0,o.bF)(O,{flat:"",class:"dashboard-table-style dashboard-table-height back-white",id:"email_notification_table"},{default:(0,o.k6)((()=>[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",r,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.table_columns,((s,i)=>((0,o.uX)(),(0,o.CE)("th",{key:s.name,"data-index":i,draggable:e.canDragDropColumn(s),dropzone:e.canDragDropColumn(s),direction:"horizontal",onDragstart:t=>e.onDragStart(t,e.table_columns,i),onDrop:(0,a.D$)((t=>e.handleDrop(t,i)),["prevent"]),onDragover:(0,a.D$)((t=>e.onDragOver(t,i)),["prevent"]),onDragenter:t[1]||(t[1]=(0,a.D$)(((...t)=>e.onDragEnter&&e.onDragEnter(...t)),["prevent"])),onDragleave:t[2]||(t[2]=(0,a.D$)(((...t)=>e.onDragLeave&&e.onDragLeave(...t)),["prevent"])),style:(0,l.Tr)({cursor:e.getIsDragging?"pointer":"move"})},["actions"==s.name?((0,o.uX)(),(0,o.CE)("span",u,(0,l.v_)(e.$t(s.label)),1)):((0,o.uX)(),(0,o.CE)("span",m,(0,l.v_)(e.$t(s.label)),1))],44,_)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.rows,((s,i)=>((0,o.uX)(),(0,o.CE)("tr",{key:i,onClick:t=>e.openEditForm(s)},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.table_columns,(i=>((0,o.uX)(),(0,o.CE)(o.FK,{key:i.name},["name"==i.name?((0,o.uX)(),(0,o.CE)("td",p,(0,l.v_)(s["name"]),1)):"doctype"==i.name?((0,o.uX)(),(0,o.CE)("td",h,(0,l.v_)(e.getDocTypeLabel(s)),1)):"doc_status"==i.name?((0,o.uX)(),(0,o.CE)("td",g,(0,l.v_)(e.getLabelTranslation(s["doc_status"])),1)):"priority"==i.name?((0,o.uX)(),(0,o.CE)("td",b,(0,l.v_)(e.getLabelTranslation(s["priority"])),1)):"time_delay"==i.name?((0,o.uX)(),(0,o.CE)("td",y,(0,l.v_)(s["delay_delta"]+" "+e.getLabelTranslation(s["delay_delta_type"])),1)):"email_to"==i.name?((0,o.uX)(),(0,o.CE)("td",w,(0,l.v_)(e.getAssignedUser(s["email_address"])),1)):((0,o.uX)(),(0,o.CE)("td",k,[(0,o.bF)(q,{flat:"",dense:"",round:"",onClick:t[3]||(t[3]=(0,a.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,o.k6)((()=>[(0,o.bF)(x,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{dense:"",style:{"min-width":"100px"}},{default:(0,o.k6)((()=>[(0,o.bF)(Q,{clickable:""},{default:(0,o.k6)((()=>[(0,o.bF)(D,{onClick:t=>e.openEditForm(s)},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(e.$t("edit")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,o.bF)($,{inset:""}),(0,o.bF)(Q,{clickable:""},{default:(0,o.k6)((()=>[(0,o.bF)(D,{onClick:t=>e.activeDocumentStatusAlert(s),style:(0,l.Tr)({color:s["is_active"]?"":"red"})},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(s["is_active"]?e.$t("active"):e.$t("inactive")),1)])),_:2},1032,["onClick","style"])])),_:2},1024),(0,o.bF)($,{inset:""}),(0,o.bF)(Q,{clickable:""},{default:(0,o.k6)((()=>[(0,o.bF)(D,{onClick:t=>{e.delete_id=s.id,e.delete_confirm=!0}},{default:(0,o.k6)((()=>[(0,o.Lk)("span",f,(0,l.v_)(e.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)]))],64)))),128))],8,c)))),128))])])),_:1})])]),(0,o.bF)(U,{modelValue:e.delete_confirm,"onUpdate:modelValue":t[5]||(t[5]=t=>e.delete_confirm=t),persistent:""},{default:(0,o.k6)((()=>[(0,o.bF)(X,null,{default:(0,o.k6)((()=>[(0,o.bF)(I,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.k6)((()=>[(0,o.bF)(R,{icon:"warning",color:"primary"})])),_:1}),(0,o.bF)(I,{class:"row items-center"},{default:(0,o.k6)((()=>[(0,o.Lk)("span",v,(0,l.v_)(e.$t("pages.messages.msg_delete")),1)])),_:1}),(0,o.bF)(V,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(L,{appearance:"cancel",label:e.$t("pages.user.cancel")},null,8,["label"]),[[W]]),(0,o.bo)((0,o.bF)(L,{appearance:"negative",label:e.$t("pages.user.done"),onClick:t[4]||(t[4]=t=>e.deleteRow())},null,8,["label"]),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(U,{modelValue:e.display_create_dialog,"onUpdate:modelValue":t[6]||(t[6]=t=>e.display_create_dialog=t),persistent:"",onKeydown:t[7]||(t[7]=(0,a.jR)((t=>e.display_create_dialog=!1),["esc"]))},{default:(0,o.k6)((()=>[(0,o.bF)(j,{doc_type_list:e.doc_type_list,documentStatusAlertObj:e.documentStatusAlertObj},null,8,["doc_type_list","documentStatusAlertObj"])])),_:1},8,["modelValue"]),(0,o.bF)(K,{showing:e.processing,class:"index"},{default:(0,o.k6)((()=>[E])),_:1},8,["showing"]),(0,o.bF)(N)],64)}const A={class:"text-weight-bold"},C={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},L={class:"full-width"},S={class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},D={class:"full-width"},Q={class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},$={class:"full-width"},T={class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},x={class:"full-width"},q={class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},O={class:"col-sm-6 col-md-6 col-lg-6"},R={class:"col-sm-6 col-md-6 col-lg-6"},I={key:0,class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},V={class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},X={class:"full-width"},U=(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function j(e,t,s,i,d,n){const r=(0,o.g2)("q-toolbar-title"),_=(0,o.g2)("q-btn"),u=(0,o.g2)("q-toolbar"),m=(0,o.g2)("q-tooltip"),c=(0,o.g2)("q-icon"),p=(0,o.g2)("q-input"),h=(0,o.g2)("q-select"),g=(0,o.g2)("q-checkbox"),b=(0,o.g2)("q-card-section"),y=(0,o.g2)("f-btn"),w=(0,o.g2)("q-card-actions"),k=(0,o.g2)("q-inner-loading"),f=(0,o.g2)("q-card"),v=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.Wv)(f,{style:{width:"600px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("form",{onSubmit:t[8]||(t[8]=(0,a.D$)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.bF)(u,{class:"text-white secondary-toolbar"},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.Lk)("span",A,(0,l.v_)(e.$t("doc_status_notifications_desc")),1)])),_:1}),(0,o.bo)((0,o.bF)(_,{flat:"",round:"",dense:"",icon:"close"},null,512),[[v]])])),_:1}),(0,o.bF)(b,{class:"q-pt-none"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",C,[(0,o.Lk)("div",L,[(0,o.bF)(p,{outlined:"",tabindex:"0",class:(0,l.C4)("full-width "+(e.new_model["validate_error"]||e.new_model["required_error"]?"column-error-border":"")),modelValue:e.new_model["name"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["name"]=t),label:e.$t("name"),hint:e.message},{append:(0,o.k6)((()=>[e.new_model["validate_error"]||e.new_model["required_error"]?((0,o.uX)(),(0,o.Wv)(c,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{class:"bg-red line-error-tooltip"},{default:(0,o.k6)((()=>[e.new_model["validate_error"]?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,l.v_)(e.message),1)],64)):(0,o.Q3)("",!0),e.new_model["required_error"]?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)],64)):(0,o.Q3)("",!0)])),_:1})])),_:1})):(0,o.Q3)("",!0)])),_:1},8,["class","modelValue","label","hint"])])]),(0,o.Lk)("div",S,[(0,o.Lk)("div",D,[(0,o.bF)(h,{outlined:"",modelValue:e.new_model["doc_type_key"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.new_model["doc_type_key"]=t),options:e.doc_type_list,"emit-value":"","map-options":"",label:e.$t("document_type")},{append:(0,o.k6)((()=>[e.new_model["doc_type_key_error"]?((0,o.uX)(),(0,o.Wv)(c,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{class:"bg-red line-error-tooltip"},{default:(0,o.k6)((()=>[e.new_model["required_error"]?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)],64)):(0,o.Q3)("",!0)])),_:1})])),_:1})):(0,o.Q3)("",!0)])),_:1},8,["modelValue","options","label"])])]),(0,o.Lk)("div",Q,[(0,o.Lk)("div",$,[(0,o.bF)(h,{outlined:"",modelValue:e.new_model["doc_status"],"onUpdate:modelValue":t[2]||(t[2]=t=>e.new_model["doc_status"]=t),options:e.doc_status_list,"emit-value":"","map-options":"",label:e.$t("doc_status")},{append:(0,o.k6)((()=>[e.new_model["doc_status_error"]?((0,o.uX)(),(0,o.Wv)(c,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{class:"bg-red line-error-tooltip"},{default:(0,o.k6)((()=>[e.new_model["doc_status_error"]?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)(" Field is Required ")],64)):(0,o.Q3)("",!0)])),_:1})])),_:1})):(0,o.Q3)("",!0)])),_:1},8,["modelValue","options","label"])])]),(0,o.Lk)("div",T,[(0,o.Lk)("div",x,[(0,o.bF)(h,{outlined:"",modelValue:e.new_model["priority"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.new_model["priority"]=t),options:e.priority_list,"emit-value":"","map-options":"",label:e.$t("priority")},{append:(0,o.k6)((()=>[e.new_model["doc_status_error"]?((0,o.uX)(),(0,o.Wv)(c,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{class:"bg-red line-error-tooltip"},{default:(0,o.k6)((()=>[e.new_model["doc_status_error"]?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)(" Field is Required ")],64)):(0,o.Q3)("",!0)])),_:1})])),_:1})):(0,o.Q3)("",!0)])),_:1},8,["modelValue","options","label"])])]),(0,o.Lk)("div",q,[(0,o.Lk)("div",O,[(0,o.bF)(h,{outlined:"",modelValue:e.new_model["time_type"],"onUpdate:modelValue":t[4]||(t[4]=t=>e.new_model["time_type"]=t),options:e.time_list,"emit-value":"","map-options":"",label:e.$t("time_unit"),class:"column"},{append:(0,o.k6)((()=>[e.new_model["time_error"]?((0,o.uX)(),(0,o.Wv)(c,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{class:"bg-red line-error-tooltip"},{default:(0,o.k6)((()=>[e.new_model["time_error"]?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)],64)):(0,o.Q3)("",!0)])),_:1})])),_:1})):(0,o.Q3)("",!0)])),_:1},8,["modelValue","options","label"])]),(0,o.Lk)("div",R,[(0,o.bF)(p,{outlined:"",tabindex:"0",class:(0,l.C4)("column q-ml-md "+(e.new_model["time_delay_error"]?"column-error-border":"")),modelValue:e.new_model["time_delay"],"onUpdate:modelValue":t[5]||(t[5]=t=>e.new_model["time_delay"]=t),type:"number",label:e.$t("time_delay"),hint:e.$t("minimum_5_minutes")},{append:(0,o.k6)((()=>[e.new_model["time_delay_error"]?((0,o.uX)(),(0,o.Wv)(c,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{class:"bg-red line-error-tooltip"},{default:(0,o.k6)((()=>[e.new_model["time_delay_error"]?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)],64)):(0,o.Q3)("",!0)])),_:1})])),_:1})):(0,o.Q3)("",!0)])),default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(e.$t("minimum_email_send_time")),1)])),_:1})])),_:1},8,["class","modelValue","label","hint"])])]),e.new_model["send_to_assigned_user"]?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",I,[(0,o.bF)(p,{outlined:"",tabindex:"0",class:(0,l.C4)("full-width "+(e.new_model["email_address_error"]?"column-error-border":"")),modelValue:e.new_model["email_address"],"onUpdate:modelValue":t[6]||(t[6]=t=>e.new_model["email_address"]=t),label:"Email Address"},{append:(0,o.k6)((()=>[e.new_model["email_address_error"]?((0,o.uX)(),(0,o.Wv)(c,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{class:"bg-red line-error-tooltip"},{default:(0,o.k6)((()=>[e.new_model["email_address_error"]?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)],64)):(0,o.Q3)("",!0)])),_:1})])),_:1})):(0,o.Q3)("",!0)])),_:1},8,["class","modelValue"])])),(0,o.Lk)("div",V,[(0,o.Lk)("div",X,[(0,o.bF)(g,{modelValue:e.new_model["send_to_assigned_user"],"onUpdate:modelValue":t[7]||(t[7]=t=>e.new_model["send_to_assigned_user"]=t),label:e.$t("send_to_assigned_user")},null,8,["modelValue","label"])])])])),_:1}),(0,o.bF)(w,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(y,{label:e.$t("cancel"),appearance:"cancel"},null,8,["label"]),[[v]]),(0,o.bF)(y,{type:"submit",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,o.bF)(k,{showing:e.loading},{default:(0,o.k6)((()=>[U])),_:1},8,["showing"])])),_:1})}var K=s(1659),N=s(24622),W=s(38734),z=s(94124),M=s(18505),P=s(68450),B=s(11470),H=s(96056),G=function(e,t,s,o){function a(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function i(e){try{n(o.next(e))}catch(t){l(t)}}function d(e){try{n(o["throw"](e))}catch(t){l(t)}}function n(e){e.done?s(e.value):a(e.value).then(i,d)}n((o=o.apply(e,t||[])).next())}))};const J=(0,o.pM)({el:"#app",mixins:[N.A,M.A,H.A],props:{doc_type_list:{type:[]},documentStatusAlertObj:{type:Object}},components:{},data(){return{message:this.$t("only_characters_spaces")}},setup(){let e={};const t=(0,z.cY)(),{prepareDocStatusesList:s,prepareTimeList:o,preparePriorityList:a}=t,{doc_status_list:l,time_list:i,priority_list:d}=(0,K.bP)(t);return{prepareTimeList:o,time_list:i,doc_status_list:l,priority_list:d,preparePriorityList:a,prepareDocStatusesList:s,new_model:(0,W.KR)(e),loading:(0,W.KR)(!1)}},watch:{},mounted(){this.setNewModel(),this.prepareDocStatusesList(),this.prepareTimeList(),this.preparePriorityList()},methods:{setNewModel(){this.documentStatusAlertObj?(this.new_model["id"]=this.documentStatusAlertObj.id,this.new_model["name"]=this.documentStatusAlertObj.name,this.new_model["doc_status"]=this.documentStatusAlertObj.doc_status,this.new_model["priority"]=this.documentStatusAlertObj.priority,this.new_model["time_delay"]=this.documentStatusAlertObj.delay_delta,this.new_model["doc_type_key"]=this.documentStatusAlertObj.doc_type_key,this.new_model["time_type"]=this.documentStatusAlertObj.delay_delta_type,this.new_model["email_address"]=this.documentStatusAlertObj.email_address,this.new_model["send_to_assigned_user"]=!!this.documentStatusAlertObj.send_to_assigned_user):(this.new_model["id"]="",this.new_model["name"]="",this.new_model["time_type"]="",this.new_model["doc_status"]="",this.new_model["priority"]="",this.new_model["time_delay"]="",this.new_model["doc_type_key"]="",this.new_model["email_address"]="",this.new_model["send_to_assigned_user"]=!1),this.resetErrors()},resetErrors(){this.new_model["doc_status_error"]=!1,this.new_model["doc_type_key_error"]=!1,this.new_model["validate_error"]=!1,this.new_model["required_error"]=!1,this.new_model["time_error"]=!1,this.new_model["time_delay_error"]=!1,this.new_model["email_address_error"]=!1},submitNewColumFrom(){return G(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):void this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.loading=!1}}))},saveNewRow(){return G(this,void 0,void 0,(function*(){let e=!1;if("minutes"===this.new_model["time_type"]&&this.new_model["time_delay"]<1)return void this.showErrorToast(this.$t("pages.messages.SHOULD_BE_GREATER_THEN_5"));if(this.new_model["time_delay"]<5)return void this.showErrorToast(this.$t("pages.messages.SHOULD_BE_GREATER_THEN_5"));if(!this.validateEmail(this.new_model["email_address"]))return void this.showErrorToast(this.$t("invalid_email"));this.new_model["doc_type_key"]||(this.new_model["doc_type_key"]="");const t={name:this.new_model["name"],doc_type_key:this.new_model["doc_type_key"],doc_status:this.new_model["doc_status"],priority:this.new_model["priority"],delta_type:this.new_model["time_type"],delay_delta_value:String(this.new_model["time_delay"]),send_to_assigned_user:String(this.new_model["send_to_assigned_user"]),email_address:!1===this.new_model["send_to_assigned_user"]?this.new_model["email_address"]:""};let s;""!=this.new_model["id"]&&null!=this.new_model["id"]&&(t.id=this.new_model["id"],e=!0);try{this.showLoading(),s=yield B.s4.createOrUpdate(t)}catch(a){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}if(!s.id)throw new Error("Failed to create new record");this.setNewModel();const o=new CustomEvent("row_added_update",{detail:{data:s,isUpdateMode:e}});document.dispatchEvent(o),e?this.showSuccessToast(this.$t("email_notification_updated_success")):this.showSuccessToast(this.$t("email_notification_created_success"))}))},validateRow(e){let t=!0;return this.resetErrors(),e["name"]&&0!=e["name"].length||(e.required_error=!0,t=!1),(0,P.Ss)(e["name"])||(e.validate_error=!0,t=!1),e["doc_status"]&&0!=e["doc_status"].length||(this.new_model["doc_status_error"]=!0,t=!1),e["time_type"]&&0!=e["time_type"].length||(this.new_model["time_error"]=!0,t=!1),e["time_delay"]&&0!=e["time_delay"].length||(e.time_delay_error=!0,t=!1),e["send_to_assigned_user"]||e["email_address"]&&0!=e["email_address"].length||(e.email_address_error=!0,t=!1),t}}});var Y=s(12807),Z=s(23316),ee=s(36914),te=s(39150),se=s(56384),oe=s(44189),ae=s(67837),le=s(50492),ie=s(97410),de=s(94940),ne=s(80460),re=s(62669),_e=s(39035),ue=s(88672),me=s(98582),ce=s.n(me);const pe=(0,Y.A)(J,[["render",j]]),he=pe;ce()(J,"components",{QCard:Z.A,QToolbar:ee.A,QToolbarTitle:te.A,QBtn:se.A,QCardSection:oe.A,QInput:ae.A,QIcon:le.A,QTooltip:ie.A,QSelect:de.A,QCheckbox:ne.A,QCardActions:re.A,QInnerLoading:_e.A}),ce()(J,"directives",{ClosePopup:ue.A});var ge=s(10739),be=s(8420),ye=s(64233),we=s(91236),ke=s(60894),fe=s(45022),ve=function(e,t,s,o){function a(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function i(e){try{n(o.next(e))}catch(t){l(t)}}function d(e){try{n(o["throw"](e))}catch(t){l(t)}}function n(e){e.done?s(e.value):a(e.value).then(i,d)}n((o=o.apply(e,t||[])).next())}))};const Ee=(0,o.pM)({el:"#app",mixins:[N.A,ye.A,ge.A],components:{SubHeader:we.A,Create:he,Loader:be.A,BackToSettings:ke.A},data(){return{dialog:!1,documentStatusAlertObj:(0,W.KR)({}),table_columns:[{label:"name",name:"name"},{label:"document_type",name:"doctype"},{label:"doc_status",name:"doc_status"},{label:"priority",name:"priority"},{label:"time_delay",name:"time_delay"},{label:"email_to",name:"email_to"},{label:"actions",name:"actions",style:{width:"100%"}}]}},mounted(){this.initView(),this.prepareTableColumn(),this.initDragDropColumns("email_notification_table","label",["actions"]),document.addEventListener("email_notification_table-column-drop",this.onDropColumns),document.addEventListener("row_added_update",this.rowAddOrUpdate),document.addEventListener("update_current_user_orgs",this.updateCurrentUserOrganizations)},unmounted(){this.initView(),document.removeEventListener("row_added_update",this.rowAddOrUpdate),document.removeEventListener("update_current_user_orgs",this.updateCurrentUserOrganizations),document.removeEventListener("email_notification_table-column-drop",this.onDropColumns)},methods:{sendBack(e){"Escape"===e.key&&this.$router.go(-1)},initView(){return ve(this,void 0,void 0,(function*(){try{this.processing=!0,yield this.getList()}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.processing=!1}}))},prepareTableColumn(){const e=fe.A.getItem("EMAIL_NOTIFICATION_SETTING_COLUMNS");this.table_columns=e&&""!=e?JSON.parse(e):this.table_columns},onDropColumns(){fe.A.set("EMAIL_NOTIFICATION_SETTING_COLUMNS",JSON.stringify(this.table_columns))},rowAddOrUpdate(e){e&&e.detail&&e.detail.data&&(this.display_create_dialog=!1,this.documentStatusAlertObj={},e.detail.isUpdateMode?this.updateRow(e.detail.data):this.addNewRow(e.detail.data))},deleteRow(){return ve(this,void 0,void 0,(function*(){try{if(!this.delete_id)return;this.processing=!0,yield B.s4.delete(this.delete_id);let e=-1;this.rows.forEach(((t,s)=>{t["id"]===this.delete_id&&(e=s)})),-1!==e&&this.rows.splice(e,1),this.delete_id="",this.showSuccessToast(this.$t("email_notification_deleted_success"))}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.processing=!1}}))},openEditForm(e){this.documentStatusAlertObj=Object.assign({},e),this.display_create_dialog=!0},getList(){return ve(this,void 0,void 0,(function*(){const e=yield B.s4.getAll();e&&(this.rows=[],this.rows=e)}))},addNewRow(e){let t=Object.assign({},e);return t["document_title"]=t["doc_type_key"],t["document_translation_key"]=t["doc_type_key"],this.rows.push(t),this.rows.length.toString()},updateRow(e){this.rows.filter((t=>t.id===e.id)).map((t=>{t.name=e.name,t.doc_status=e.doc_status,t.priority=e.priority,t.doc_type_key=e.doc_type_key,t.email_address=e.email_address,t.document_title=e.document_title?e.document_title:e.doc_type_key,t.delay_delta_type=e.delay_delta_type,t.document_translation_key=e.document_translation_key?e.document_translation_key:e.doc_type_key,t.send_to_assigned_user=e.send_to_assigned_user,t.send_to_assigned_user=e.send_to_assigned_user}))},getAssignedUser(e){return e||this.$t("assigned_user")},getDocTypeLabel(e){let t=e["document_title"]||"";return e["doc_type_key"]?(this.doc_type_list.forEach((s=>{s.value===e["doc_type_key"]&&(t=s.label)})),String(t)):String(t)},activeDocumentStatusAlert(e){return ve(this,void 0,void 0,(function*(){try{this.processing=!0;const t=new FormData;t.append("id",String(e.id)),t.append("status",String(!e.is_active)),yield B.s4.activeDocumentAlertStatus(t),this.showSuccessToast(this.$t("email_notification_updated_success"))}catch(t){}finally{this.initView(),this.processing=!1}}))}},setup(){const e=(0,z.cY)(),{doc_type_list:t}=(0,K.bP)(e);return{doc_type_list:t,display_users_dialog:(0,W.KR)(!1),display_create_dialog:(0,W.KR)(!1),selectedId:(0,W.KR)(""),selectedName:(0,W.KR)(""),columns:(0,W.KR)([]),rows:(0,W.KR)([]),delete_confirm:(0,W.KR)(!1),delete_id:(0,W.KR)(""),processing:(0,W.KR)(!1)}}});var Fe=s(857),Ae=s(84436),Ce=s(53999),Le=s(90124),Se=s(25173),De=s(10386),Qe=s(82156),$e=s(3952);const Te=(0,Y.A)(Ee,[["render",F],["__scopeId","data-v-10bd9449"]]),xe=Te;ce()(Ee,"components",{QBtn:se.A,QIcon:le.A,QMarkupTable:Fe.A,QMenu:Ae.A,QList:Ce.A,QItem:Le.A,QItemSection:Se.A,QSeparator:De.A,QDialog:Qe.A,QCard:Z.A,QCardSection:oe.A,QAvatar:$e.A,QCardActions:re.A,QInnerLoading:_e.A}),ce()(Ee,"directives",{ClosePopup:ue.A})}}]);