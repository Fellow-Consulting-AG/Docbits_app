"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[5518],{25518:(e,t,i)=>{i.r(t),i.d(t,{default:()=>qt});var o=i(83673),s=i(62323);const n=e=>((0,o.dD)("data-v-41aa0b39"),e=e(),(0,o.Cn)(),e),a={class:"row q-pl-md q-pr-md highlighted-back field_validation"},l={class:"col-sm-5 col-md-5 col-lg-5"},r={class:"col secondary-c-text text-h6"},d=n((()=>(0,o._)("img",{width:"24",src:"back_new.svg"},null,-1))),c={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},h={class:"col-sm-2 col-md-2 col-lg-2 q-ml-auto"},m={key:1,class:"row q-pl-md q-pr-md"},g={class:"max-width-120 q-mt-sm back-white",id:"left_section",ref:"left_section"},u={class:"full-width scroll-area-height-medi"},p={class:"row justify-center q-pl-md q-pr-md q-pt-md"},f={class:"secondary-c-text text-h6 text-weight-bold"},w={class:"row"},_={class:"page-numbers center-inner"},y={class:"full-width left-scroll-area-height scrolle-y q-pa-sm"},v=["data-id","src"],b={class:"right_section q-pl-sm scroll-area-height-medi",id:"right_section",ref:"right_section"},x={class:"q-pt-sm scroll-area-height-medi"},k={class:"image_control_panel p-t-4"},C={class:"row"},D={class:"panel-left col-sm-4 col-md-4 col-lg-4"},S={class:"row ellipsify"},E={class:"col-sm-8 col-md-8 col-lg-8",id:"buttonArea"},L={class:"right"},I=(0,o.Uk)("Zoom in"),A=(0,o.Uk)("Zoom out"),O=n((()=>(0,o._)("img",{width:"24",src:"loupe.svg"},null,-1))),W={key:0},R=n((()=>(0,o._)("img",{width:"24",src:"layout.svg"},null,-1))),T=(0,o.Uk)("Go to Layout Template"),F=n((()=>(0,o._)("img",{width:"24",src:"ocr_icon.svg"},null,-1))),q=(0,o.Uk)("Debug Field Validations. Results will be displayed in the console after clicking it"),H=n((()=>(0,o._)("img",{width:"24",src:"layout.svg"},null,-1))),B=(0,o.Uk)("Go to Layout Template"),M=n((()=>(0,o._)("img",{width:"24",src:"ocr_icon.svg"},null,-1))),V=(0,o.Uk)("Debug Field Validations."),z=(0,o.Uk)("Results will be displayed in the console after clicking it"),Z={class:"full-width right-content-height",id:"image_container"},$={class:"full-width right-content-height",id:"image_scrolle",style:{position:"relative"}},N=n((()=>(0,o._)("div",{class:"img-magnifier-glass"},null,-1))),P=["src","width"],U=["width","height","viewBox"],j={id:"marquee",ref:"marquee",x:"450",y:"420",width:"150",height:"150"},G={id:"boxes",ref:"boxes"},Y={key:0,class:"full-width"},Q={class:"row q-pl-sm q-pr-sm"},X={class:"col-sm-12 col-md-12 col-lg-12 secondary-c-text text-h6 q-pb-md text-weight-bold"},J={class:"full-width"},K={class:"q-pa-sm"},ee={class:"full-width medi-fields-content-height"},te={key:2,class:"row q-pl-md q-pr-md q-pb-md"},ie=n((()=>(0,o._)("div",{class:"text-h6 text-bold"},"Need help deciding?",-1))),oe=(0,o.Uk)(" Don't think too much and just contact us to learn more about the application! "),se={class:"row"},ne={class:"q-ml-sm"},ae={class:"q-ml-sm"};function le(e,t,i,n,le,re){const de=(0,o.up)("DocumentLock"),ce=(0,o.up)("MessageBanner"),he=(0,o.up)("q-icon"),me=(0,o.up)("q-btn"),ge=(0,o.up)("timeSpentTimer"),ue=(0,o.up)("q-resize-observer"),pe=(0,o.up)("q-tooltip"),fe=(0,o.up)("keyboardShortcutInfoBtn"),we=(0,o.up)("autoTesting"),_e=(0,o.up)("q-item-section"),ye=(0,o.up)("q-item-label"),ve=(0,o.up)("q-item"),be=(0,o.up)("q-list"),xe=(0,o.up)("q-btn-dropdown"),ke=(0,o.up)("q-splitter"),Ce=(0,o.up)("MediFieldsView"),De=(0,o.up)("ErrorDocumentView"),Se=(0,o.up)("Loader"),Ee=(0,o.up)("q-space"),Le=(0,o.up)("q-card-section"),Ie=(0,o.up)("q-card"),Ae=(0,o.up)("q-dialog"),Oe=(0,o.up)("selection-popup"),We=(0,o.up)("q-avatar"),Re=(0,o.up)("q-card-actions"),Te=(0,o.up)("SplitDocument"),Fe=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(de,{document_version:e.document_version,trigger_document_lock:e.trigger_document_lock,doc_id:this.docId},null,8,["document_version","trigger_document_lock","doc_id"]),e.isReadOnly?((0,o.wg)(),(0,o.j4)(ce,{key:0,message:e.error_message,messageCategoryClass:"error-banner"},null,8,["message"])):(0,o.kq)("",!0),(0,o._)("div",a,[(0,o._)("div",l,[(0,o._)("div",r,[e.doc2AppMode?((0,o.wg)(),(0,o.j4)(me,{key:0,flat:"",rounded:"","data-cy":"dashboard",color:"primary",onClick:e.goToDashboard},{default:(0,o.w5)((()=>[(0,o.Wm)(he,{class:"text-red-13",size:"sm"},{default:(0,o.w5)((()=>[d])),_:1}),(0,o._)("label",c,(0,s.zw)(e.$t("pages.screen2a.dashboard")),1)])),_:1},8,["onClick"])):(0,o.kq)("",!0)])]),(0,o._)("div",h,[(0,o.Wm)(ge)])]),e.doc_fetch_error?((0,o.wg)(),(0,o.iD)("div",te,[(0,o.Wm)(De)])):((0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("div",g,[(0,o._)("div",u,[(0,o._)("div",p,[(0,o._)("span",f,(0,s.zw)(e.$t("pages.screen2a.pages")),1)]),(0,o._)("div",w,[(0,o._)("div",_,(0,s.zw)(e.currentPage())+"/"+(0,s.zw)(e.images.length),1)]),(0,o._)("div",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.images,((i,n)=>((0,o.wg)(),(0,o.iD)("img",{"data-id":n,key:n,src:e.baseUrl+"/"+i.path,class:(0,s.C_)(["q-pa-xs shadow-5 full-width q-ma-sm cursor-pointer",n===e.page-1?"active":""]),style:{height:"auto"},onClick:t[0]||(t[0]=(...t)=>e.imageclicked&&e.imageclicked(...t))},null,10,v)))),128))])])],512),(0,o._)("div",b,[(0,o.Wm)(ke,{limits:[26,60],modelValue:e.imageFieldSplitter,"onUpdate:modelValue":[t[9]||(t[9]=t=>e.imageFieldSplitter=t),t[10]||(t[10]=t=>e.splitterChanged())],class:"medi-right-content-height"},{before:(0,o.w5)((()=>[(0,o.Wm)(ue,{onResize:e.onResize,debounce:0},null,8,["onResize"]),(0,o._)("div",x,[(0,o._)("div",k,[(0,o._)("div",C,[(0,o._)("div",D,[(0,o._)("div",S,[(0,o.Wm)(me,{id:"menu_btn",round:"",icon:"chevron_left",size:"xs",class:"text-grey-6 toggler-right p-t-40",onClick:t[1]||(t[1]=t=>e.toggleMenu())}),(0,o.Uk)(" "+(0,s.zw)(e.record.filename),1)])]),(0,o._)("div",E,[(0,o._)("div",L,[(0,o.Wm)(me,{flat:"",class:"p-4",onClick:e.zoomIn,icon:"img:zoom_in.svg",size:"14px"},{default:(0,o.w5)((()=>[(0,o.Wm)(pe,null,{default:(0,o.w5)((()=>[I])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(me,{flat:"",class:"p-4",onClick:e.zoomOut,icon:"img:zoom_out.svg",size:"14px"},{default:(0,o.w5)((()=>[(0,o.Wm)(pe,null,{default:(0,o.w5)((()=>[A])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(me,{flat:"",id:"glassBtn",class:"p-4",size:"14px",onClick:e.initMagnifyGlass},{default:(0,o.w5)((()=>[O,(0,o.Wm)(pe,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.screen2a.magnify")),1)])),_:1})])),_:1},8,["onClick"]),(0,o._)("span",null,[(0,o.Wm)(fe)]),e.showAllButtons?((0,o.wg)(),(0,o.iD)("span",W,[!0===this.is_admin?((0,o.wg)(),(0,o.j4)(me,{key:0,flat:"",id:"split_document",class:"float-right pr-6 pl-6",onClick:e.displaySplitDocumentView,icon:"img:split.svg",size:"14px"},{default:(0,o.w5)((()=>[(0,o.Wm)(pe,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("split_document_btn_tooltip")),1)])),_:1})])),_:1},8,["onClick"])):(0,o.kq)("",!0),!0===this.is_admin?((0,o.wg)(),(0,o.j4)(me,{key:1,flat:"",class:"float-right pr-6 pl-6",size:"14px",onClick:t[2]||(t[2]=t=>e.goToLayoutTemplate())},{default:(0,o.w5)((()=>[R,(0,o.Wm)(pe,null,{default:(0,o.w5)((()=>[T])),_:1})])),_:1})):(0,o.kq)("",!0),!0===this.is_admin?((0,o.wg)(),(0,o.j4)(me,{key:2,flat:"",class:"float-right pr-6 pl-6",size:"14px",onClick:e.viewOCRDocument},{default:(0,o.w5)((()=>[F,(0,o.Wm)(pe,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("ocr_view")),1)])),_:1})])),_:1},8,["onClick"])):(0,o.kq)("",!0),!0===this.is_debug?((0,o.wg)(),(0,o.j4)(me,{key:3,flat:"",icon:"adb",class:"p-4",size:"14px",onClick:t[3]||(t[3]=t=>e.enableOrDisableExportButton(!0))},{default:(0,o.w5)((()=>[(0,o.Wm)(pe,null,{default:(0,o.w5)((()=>[q])),_:1})])),_:1})):(0,o.kq)("",!0)])):(0,o.kq)("",!0),(0,o._)("span",null,[(0,o.Wm)(we,{onSetApiData:e.setApiData},null,8,["onSetApiData"])]),e.showAllButtons?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(xe,{key:1,modelValue:e.dropdownModel,"onUpdate:modelValue":t[5]||(t[5]=t=>e.dropdownModel=t),"dropdown-icon":e.dropdownModel?"close":"more_vert",rounded:"",fab:!0,padding:"xs",class:"text-black q-mr-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(be,null,{default:(0,o.w5)((()=>[!0===e.is_admin?(0,o.wy)(((0,o.wg)(),(0,o.j4)(ve,{key:0,clickable:"",onClick:t[4]||(t[4]=t=>e.goToLayoutTemplate())},{default:(0,o.w5)((()=>[(0,o.Wm)(_e,{avatar:""},{default:(0,o.w5)((()=>[H])),_:1}),(0,o.Wm)(_e,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[B])),_:1})])),_:1})])),_:1})),[[Fe]]):(0,o.kq)("",!0),!0===e.is_admin?(0,o.wy)(((0,o.wg)(),(0,o.j4)(ve,{key:1,clickable:"",onClick:e.viewOCRDocument},{default:(0,o.w5)((()=>[(0,o.Wm)(_e,{avatar:""},{default:(0,o.w5)((()=>[M])),_:1}),(0,o.Wm)(_e,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("ocr_view")),1)])),_:1})])),_:1})])),_:1},8,["onClick"])),[[Fe]]):(0,o.kq)("",!0),!0===e.is_admin?(0,o.wy)(((0,o.wg)(),(0,o.j4)(ve,{key:2,clickable:"",onClick:e.displaySplitDocumentView},{default:(0,o.w5)((()=>[(0,o.Wm)(_e,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(he,{name:"splitscreen"})])),_:1}),(0,o.Wm)(_e,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("split_document_btn_tooltip")),1)])),_:1})])),_:1})])),_:1},8,["onClick"])),[[Fe]]):(0,o.kq)("",!0),!0===e.is_debug?(0,o.wy)(((0,o.wg)(),(0,o.j4)(ve,{key:3,clickable:"",onClick:e.enableOrDisableExportButton},{default:(0,o.w5)((()=>[(0,o.Wm)(_e,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(he,{name:"adb"})])),_:1}),(0,o.Wm)(_e,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[V])),_:1}),(0,o.Wm)(ye,{caption:""},{default:(0,o.w5)((()=>[z])),_:1})])),_:1})])),_:1},8,["onClick"])),[[Fe]]):(0,o.kq)("",!0)])),_:1})])),_:1},8,["modelValue","dropdown-icon"]))])])])]),(0,o._)("div",Z,[(0,o._)("div",$,[(0,o.Wm)(ke,{horizontal:"",limits:[30,100],disable:!e.isExtenedPanel,modelValue:e.splitterModel,"onUpdate:modelValue":[t[8]||(t[8]=t=>e.splitterModel=t),e.handleScroll],class:"scroll-area-height-img","after-class":(e.isExtenedPanel," q-pa-sm"),"before-class":" q-pa-sm img-magnifier-container","separator-class":(e.isExtenedPanel,"bg-black q-ma-sm")},{before:(0,o.w5)((()=>[N,(0,o._)("img",{class:"screenshot",src:e.image,width:e.imageWidth,id:"screenshot",ref:"screenshot",draggable:"false",onLoad:t[6]||(t[6]=t=>{e.imageLoaded=!0,e.getImageDetails()})},null,40,P),((0,o.wg)(),(0,o.iD)("svg",{width:e.imageWidth,height:e.imageHeight,viewBox:e.viewBox,id:"draw",ref:"draw",xmlns:"http://www.w3.org/2000/svg",style:{height:"auto","border-bottom":"5px dotted"}},[(0,o._)("rect",j,null,512),(0,o._)("g",G,null,512)],8,U))])),separator:(0,o.w5)((()=>[(0,o.Wm)(me,{disable:!e.isExtenedPanel,round:"",size:"xs",icon:"swap_vert",class:"text-grey-6 z-index-1",onClick:t[7]||(t[7]=t=>e.toggleSplitter())},null,8,["disable"])])),after:(0,o.w5)((()=>[e.renderComponent&&e.hasApiData()?((0,o.wg)(),(0,o.iD)("div",Y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.formLayout,((t,i)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:`div-${i}`},[!0===t.is_panel_section_group?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,s.C_)(["display-inline-block",e.$refs["mediFieldsView"].getElementBorder(t)]),style:(0,s.j5)("width:"+e.getElementWidth(t)+"%")},[(0,o._)("div",Q,[(0,o._)("div",X,(0,s.zw)(t.title),1)]),(0,o._)("div",J,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.rows,((t,n)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:`div-${n}`},[e.isFieldHidden(t)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:0,class:"q-pa-sm",style:(0,s.j5)("width:"+e.getElementWidth(t)+"%")},[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.fieldType),{currentField:t,isReadOnly:!1,fieldName:t.name,groupIndex:i,onUpdateModel:e.$refs["mediFieldsView"].updateModel,onInputClicked:e.$refs["mediFieldsView"].showConnectionFromField,onInputValueChanges:e.$refs["mediFieldsView"].onInputValueChanges,onApplyFuzzySearch:e.$refs["mediFieldsView"].applyFuzzySearchWrapper},null,8,["currentField","fieldName","groupIndex","onUpdateModel","onInputClicked","onInputValueChanges","onApplyFuzzySearch"]))],4))],64)))),128))])],6)):(0,o.kq)("",!0)],64)))),128))])):(0,o.kq)("",!0)])),_:1},8,["disable","modelValue","after-class","separator-class","onUpdate:modelValue"])])])])])),after:(0,o.w5)((()=>[(0,o._)("div",K,[(0,o._)("div",ee,[e.hasApiData()?((0,o.wg)(),(0,o.j4)(Ce,{key:0,ref:"mediFieldsView",isPanelSection:!1,renderOpenWindoIcon:!0,onHandleScroll:e.handleScroll,onSetDocVersion:e.setDocVersion,onGetImageDetails:e.getImageDetails,onShowConnectionFromField:e.showConnectionFromField,onRemoveOldMapiingsAndDrawNew:e.removeOldMapiingsAndDrawNew,onSetSplitterModel:e.setSplitterModel},null,8,["onHandleScroll","onSetDocVersion","onGetImageDetails","onShowConnectionFromField","onRemoveOldMapiingsAndDrawNew","onSetSplitterModel"])):(0,o.kq)("",!0)])])])),_:1},8,["modelValue"])],512)])),(0,o.Wm)(Se),(0,o.Wm)(Ae,{modelValue:e.showDialog,"onUpdate:modelValue":t[12]||(t[12]=t=>e.showDialog=t)},{default:(0,o.w5)((()=>[(0,o.Wm)(Ie,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Le,{class:"row items-center q-pb-none"},{default:(0,o.w5)((()=>[ie,(0,o.Wm)(Ee),(0,o.wy)((0,o.Wm)(me,{icon:"close",flat:"",round:"",dense:""},null,512),[[Fe]])])),_:1}),(0,o.Wm)(Le,null,{default:(0,o.w5)((()=>[oe])),_:1}),(0,o._)("div",se,[(0,o.Wm)(Ee),(0,o.Wm)(me,{flat:"",color:"primary",label:"Contact us",onClick:t[11]||(t[11]=t=>e.goFormular())})])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Ae,{modelValue:e.showSelectionPopupDialog,"onUpdate:modelValue":t[13]||(t[13]=t=>e.showSelectionPopupDialog=t),position:"top",persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Oe,{data:e.selection_popup_data},null,8,["data"])])),_:1},8,["modelValue"]),(0,o.Wm)(Ae,{modelValue:e.confirm_supplier_unblock,"onUpdate:modelValue":t[14]||(t[14]=t=>e.confirm_supplier_unblock=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Ie,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Le,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(We,{icon:"block",color:"primary","text-color":"white"}),(0,o._)("span",ne,(0,s.zw)(e.$t("unblock_supplier_confirmation")),1)])),_:1}),(0,o.Wm)(Re,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(me,{class:"",label:e.$t("cancel")},null,8,["label"]),[[Fe]]),(0,o.Wm)(me,{color:"primary",class:"q-mr-sm","data-cy":"setvatfield",label:e.$t("confirm"),onClick:e.enableBlockedSupplier},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Ae,{modelValue:e.deleteConfirmationDlg,"onUpdate:modelValue":t[16]||(t[16]=t=>e.deleteConfirmationDlg=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Ie,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Le,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(We,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(Le,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",ae,(0,s.zw)(e.$t("pages.messages.MSG_DELETE")),1)])),_:1}),(0,o.Wm)(Re,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(me,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[Fe]]),(0,o.wy)((0,o.Wm)(me,{flat:"",label:e.$t("delete"),color:"primary",onClick:t[15]||(t[15]=t=>e.deleteRule(e.selectedInputObj))},null,8,["label"]),[[Fe]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Ae,{modelValue:e.split_document,"onUpdate:modelValue":t[17]||(t[17]=t=>e.split_document=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Te)])),_:1},8,["modelValue"])],64)}var re=i(30052),de=i.n(re),ce=i(10321),he=i(28741),me=i(77378),ge=i(98303),ue=i(61959),pe=i(78564),fe=i(72113),we=i(30872),_e=i(85985),ye=i(48825),ve=i(45401),be=i(37295),xe=i(55276),ke=i(63307),Ce=i(5029),De=i(97570),Se=i(54268),Ee=i(91777),Le=i(88469),Ie=i(35352),Ae=i(88432),Oe=i(16839),We=i(93426),Re=i(41891),Te=i(24877),Fe=i(65864),qe=i(49566),He=i(84474),Be=i(84815),Me=i(29938),Ve=i(43432),ze=i(22879),Ze=i(60727),$e=i(9062),Ne=i(40386),Pe=i(39180),Ue=i(71814),je=i(83678),Ge=i(49836),Ye=i(56040),Qe=i(34030),Xe=i(42051),Je=i(3227),Ke=i(91949),et=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,n){function a(e){try{r(o.next(e))}catch(t){n(t)}}function l(e){try{r(o["throw"](e))}catch(t){n(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((o=o.apply(e,t||[])).next())}))};let tt=[],it={startX:0,startY:0,endX:0,endY:0};const ot={x:0,y:0,width:0,height:0,connectionId:""};let st=0,nt=0;const at=document.querySelector.bind(document);let lt,rt,dt,ct;const ht=(0,o.aZ)({el:"#app",mixins:[me.Z,pe.Z,ve.Z,we.Z,_e.Z,be.Z,xe.Z,ke.Z,he.Z,Ee.Z,We.Z,He.Z,Ve.Z,Je.Z],components:{Loader:fe.Z,autoTesting:Ce.Z,DocumentLock:De.Z,MessageBanner:Le.Z,SelectionPopup:Ie.Z,Classification:Ae.Z,MediFieldsView:Te["default"],SplitDocument:Oe.Z,ErrorDocumentView:Fe.Z,restartClassificationPopup:ze.Z,Label:$e.Z,CheckBox:Ne.Z,TextInput:Pe.Z,MultiCheckBox:Ue.Z,ExtractedTable:je.Z,TableOfCheckboxes:Ge.Z,HorizontalSeparator:Ye.Z,timeSpentTimer:Qe.Z,keyboardShortcutInfoBtn:Xe.Z},watch:{$route(e,t){if(!e.hasOwnProperty("path")||!t.hasOwnProperty("path"))return;const i=e.path.split("/"),o=t.path.split("/");i.length>2&&o.length>2&&i[1]===o[1]&&this.get_cached_data_id!=this.docId&&window.location.reload()}},data(){return{docId:"",contact:this.$t("pages.screen2a.confirm"),showDialog:!1,showExportDialog:!1,showArticlePage:!1,disableSelectionButton:!0,loading:!1,magnifyGlass:{},allowedDoctypes:Re.rf,format_warning_dismiss:{},origin_warning_alert:{},selection_popup_data:{},showSelectionPopupDialog:!1,amount_fields_confidence_count:0,excluded_fields:["fields_group"],account_block:"",error_message:"",trigger_document_lock:(0,ue.iH)(!1),split_document:(0,ue.iH)(!1),showAllButtons:(0,ue.iH)(!1),headerFabIcon:(0,ue.iH)(!1),dropdownModel:(0,ue.iH)(!1),imageLoaded:(0,ue.iH)(!1)}},beforeRouteLeave:function(e,t,i){return et(this,void 0,void 0,(function*(){this.setDataToCache(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.removeMagnifier(),this.removeAllNotifications(),"function"===typeof this.format_warning_dismiss&&this.format_warning_dismiss(),"function"===typeof this.origin_warning_alert&&this.origin_warning_alert(),yield this.releaseDocLock({doc_id:this.record.doc_id}),this.record={},this.page=1,this.resetStoreOnRouteChange(),i()}))},showDialog1:function(){setTimeout((()=>{this.showDialog=!0}),2e3)},beforeMount:function(){this.renderComponent=!1,this.isExtenedPanel=!1},mounted:function(){ct=this,this.showLoading(),this.init(),this.isDebugFlagHandler(),this.is_admin=(0,Ke.i5)(),window.addEventListener("resize",this.windowResize),document.body.addEventListener("click",this.mouseClicked,!0);const e=at(".img-magnifier-container");e&&e.addEventListener("scroll",this.handleScroll);const t=at(".q-splitter__after");t&&t.addEventListener("scroll",this.handleScroll),document.addEventListener("selection_popup_closed",this.selectionPopupClosed),window.aa=this},unmounted:function(){window.removeEventListener("resize",this.windowResize),document.removeEventListener("selection_popup_closed",this.selectionPopupClosed),window.removeEventListener("keydown",this.keydownEvent),document.removeEventListener("removeSelectedAreaOnImage",this.removeSelectedAreaOnImage);const e=at(".img-magnifier-container");e&&e.removeEventListener("scroll",this.handleScroll);const t=at(".q-splitter__after");t&&t.removeEventListener("scroll",this.handleScroll);try{lt=at(".screenshot"),lt&&(lt.removeEventListener("dblclick",this.dblClickToSelect),lt.removeEventListener("pointerdown",this.startDrag))}catch(i){}},methods:{init(){return et(this,void 0,void 0,(function*(){this.docId=this.$route.params.id,this.setAppType(),yield this.getInvoiceDataByDocId(this.docId),this.record&&0!==Object.keys(this.record).length&&!1!==this.record.success?(this.handleReadOnly(),this.handleDocLockSubscribe(),this.getSplitterValueFromStorage(),this.isReadOnly?(this.error_message=this.$t("pages.messages.READ_ONLY_MSG"),this.trigger_document_lock=!1):this.trigger_document_lock=!0,this.initPage()):this.hideLoading()}))},setAppType(){const e=(!0).toString();"true"===e.toLowerCase()?(this.$route.params.id||this.goToDashboard(),this.doc2AppMode=!0,setTimeout((()=>{this.showDialog=!1}),1e4)):setTimeout((()=>{this.showDialog=!0}),1e4)},handleDocLockSubscribe(){const e=(0,Ze.TB)();e.$subscribe(((e,t)=>{this.isReadOnly=!this.doc_lock.success,this.handleReadOnly()}))},handleReadOnly(){if(Re.at.includes(this.record.status))return void(this.isReadOnly=!0);const e=ge.W1.hasAccess("update");e||(this.isReadOnly=!0)},getInvoiceDataByDocId(e){return et(this,void 0,void 0,(function*(){try{if(this.get_cached_data_id===e&&(yield this.setRecordFromCache()))return;this.record=[],this.clearSelectedSessionStorage(),yield this.getDocumentById(e)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},getConfidence(e){return e?e<1?(100*+e.toFixed(2)).toFixed(0):+e.toFixed(2):""},getLowerConfidence(e){if(e.confidence&&e.score){let t=e.confidence<1?(100*e.confidence.toFixed(2)).toFixed(0):e.confidence.toFixed(2),i=e.score<=1?(100*e.score.toFixed(2)).toFixed(0):e.score.toFixed(2);return t=Number(t),i=Math.floor(Number(i)),t<i?t:i}return e.confidence?e.confidence<1?(100*e.confidence.toFixed(2)).toFixed(0):e.confidence.toFixed(2):null},initPage(){this.handleFormatWarning(),this.docType=this.record.doc_type;let e=this.handleImageBaseURL(this.record.images);""!==e&&(this.baseUrl=e),this.setImage(),this.images=(0,qe.PN)(this.record.images),this.setDocVersion(),rt=at("#marquee"),lt=at(".screenshot"),dt=at("#boxes"),rt.classList.add("hide");let t=at("#image_container");this.imageWidth=t.offsetWidth,this.imageHeight=t.offsetHeight,this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight),lt.addEventListener("dblclick",this.dblClickToSelect),lt.addEventListener("pointerdown",this.startDrag),window.addEventListener("keydown",this.keydownEvent),document.addEventListener("removeSelectedAreaOnImage",this.removeSelectedAreaOnImage),this.getAI_IndicatorData(),this.setShowAllButtonsPanel()},setShowAllButtonsPanel(){const e=at("#buttonArea");e.clientWidth>=300?this.showAllButtons=!0:this.showAllButtons=!1},setImage(){this.record.hasOwnProperty("classification")&&this.record.classification.hasOwnProperty("classification_page")&&(this.page=this.record.classification.classification_page),this.image=this.baseUrl+"/"+(0,qe.Rl)(this.record.images[this.page-1].path)},isElementLoaded(e){return et(this,void 0,void 0,(function*(){while(null===document.querySelector(e))yield new Promise((e=>requestAnimationFrame(e)));return document.querySelector(e)}))},handleRectsElementsLoading(){const e=this.record;this.fields_pending_load_count=0,this.fields_loaded_count=0,Array.from(e.fields).forEach((e=>{this.page==e.page&&e.coords&&(this.fields_pending_load_count++,this.isElementLoaded("#"+e.name).then((e=>{this.fields_loaded_count++,this.fields_loaded_count==this.fields_pending_load_count&&this.prepareRectangles()})))}))},keydownEvent(e){if(!this.open_editor)try{"Escape"===e.key?(this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.removeMagnifier()):"Enter"===e.key?(this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.connectionId=""):"ArrowDown"===e.key&&(this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.$refs["mediFieldsView"].selectNextField(this.connectionId),this.connectionId="")}catch(e){}},getAI_IndicatorData(){return et(this,void 0,void 0,(function*(){try{let e;if(this.ai_fields=this.record&&this.record.fields&&Array.isArray(this.record.fields)?this.record.fields.length:0,!this.record.filter_values||!(this.record.filter_values.length>0)||!Array.isArray(this.record.filter_values))throw"getAI_IndicatorData () no filter_values or doc_type to proceed";let t="?doc_type="+this.record.doc_type+"&filter_values="+this.record.filter_values.join(),i=yield(0,Se.O_)();if(e=yield de().post(Se.hi.get_ai_score+t,new FormData,{headers:{Authorization:i}}),!1===e.data.success)throw e.data.message;if(!0===e.data.success){this.ai_rules=e.data.rules;const t=new CustomEvent("FV_gauge_calculation",{detail:e.data});document.dispatchEvent(t)}}catch(e){}}))},imageclicked(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.image=this.baseUrl+"/"+(0,qe.Rl)(this.record.images[e.target.dataset.id].path),this.getImageDetails(),this.page=parseInt(e.target.dataset.id)+1},setPoMatchingData(){let e=this.isPoSettingActivate()&&this.isPoIconAllowed(this.record.doc_type,this.record.status,this.tb_version);const t=new CustomEvent("po_info",{detail:{tb_version:this.tb_version,po_enable:e}});document.dispatchEvent(t)},goToLineItems(){this.setDataToCache(),this.$router.push("/tbl_ext_v3/"+this.$route.params.id)},landing(){this.removeCache(),this.$router.push("/land")},startDrag(e){let t=0,i=0;if(1===e.button){const t=this.hitTest(e.layerX,e.layerY);return void(t&&(tt.splice(tt.indexOf(t),1),this.redraw()))}window.addEventListener("pointerup",this.stopDrag),lt.addEventListener("pointermove",this.moveDrag),rt.classList.remove("hide"),st=e.layerX,nt=e.layerY;let o="";Object.assign(ot,{startX:st,startY:nt,width:i,height:t,connectionId:o}),this.drawRect(rt,ot)},stopDrag(e){rt.classList.add("hide"),window.removeEventListener("pointerup",this.stopDrag),lt.removeEventListener("pointermove",this.moveDrag),e.target===lt&&ot.width&&ot.height&&(this.connectionId&&(ot.connectionId=this.connectionId),tt.push(Object.assign({},ot)),this.redraw(),this.restrictDrawing(),this.saveOverlayResult())},moveDrag(e){let t=e.layerX,i=e.layerY,o=e.layerX,s=e.layerY,n=st-t,a=nt-i;n<0&&(n*=-1,t-=n),a<0&&(a*=-1,i-=a);let l="";Object.assign(it,{startX:st,startY:nt,endX:o,endY:s}),Object.assign(ot,{x:t,y:i,width:n,height:a,connectionId:l}),this.drawRect(rt,ot)},hitTest(e,t){return tt.find((i=>e>=i.x&&t>=i.y&&e<=i.x+i.width&&t<=i.y+i.height))},redraw(){dt.innerHTML="",tt.forEach((e=>{dt.appendChild(this.drawRect(document.createElementNS("http://www.w3.org/2000/svg","rect"),e))}))},drawRect(e,t){if("object"==typeof t){let i="cursor-pointer";const{x:o,y:s,width:n,height:a,connectionId:l}=t;if(e.setAttributeNS(null,"width",n),e.setAttributeNS(null,"height",a),e.setAttributeNS(null,"x",o),e.setAttributeNS(null,"y",s),e.setAttributeNS(null,"connectionId",l),l){e.setAttributeNS(null,"id",l+"_rect");let t=this.record.fields.filter((e=>l==e.name));const o=t.length>0?t.pop():{};o.hasOwnProperty("trocr_processor")&&""!=o.trocr_processor&&(i+=" extract_by_tcocr ")}e.setAttributeNS(null,"class",i),!1===this.isReadOnly&&e.addEventListener("click",this.showConnectionFromRect)}return e},getImageDetails(){0!=this.renderComponent&&0!=this.imageLoaded&&(this.imageWidth=lt.offsetWidth,this.imageHeight=lt.offsetHeight,this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight),setTimeout((()=>{this.prepareRectangles()}),100),this.hideLoading())},assignImageDimenions(){let e=at("#image_container");if(e){e.querySelector(".q-splitter__before");this.imageWidth=e.offsetWidth-12,this.imageHeight=e.offsetHeight-32}this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight)},prepareRectangles(){const e=this.record;tt=[],Array.from(e.fields).forEach((e=>{const t=at("#"+e.name);if(t){if(this.page==e.page&&e.coords&&e.coords[0]&&e.coords[0].hasOwnProperty("x")&&e.coords[0].hasOwnProperty("y")){let t=Math.round(this.imageWidth*e.coords[0].x),i=Math.round(this.imageHeight*e.coords[0].y),o=Math.round(this.imageWidth*e.coords[2].x),s=Math.round(this.imageHeight*e.coords[2].y),n=o-t||20,a=s-i||20;n<0&&(n*=-1,t-=n),a<0&&(a*=-1,i-=a),ot.x=t,ot.y=i,ot.width=n,ot.height=a,ot.connectionId=e.name,tt.push(Object.assign({},ot))}e.page&&null!=e.page&&t.setAttribute("pageno",e.page)}})),this.redraw()},showConnectionFromRect(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing();const t=e.target.getAttribute("connectionId"),i=e.target,o=this.getElementToConnect(at("#"+t));this.scrollInToViewCenter(o),this.scrollInToViewCenter(i),document.documentElement.scrollTop=0,setTimeout((()=>{this.showConnection(t,i,o)}),50)},showConnectionFromField(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing();let t=this.getElementToConnect(at("#"+e));if(!t)return;let i=Number(t.getAttribute("pageno"));i=isNaN(i)?this.page:i;let o=!1;i&&i!==this.page&&(o=!0,this.page=i,this.image=this.baseUrl+"/"+(0,qe.Rl)(this.record.images[this.page-1].path),this.getImageDetails(),this.$forceUpdate()),setTimeout((()=>{let i=at("#"+e+"_rect");i&&(this.scrollInToViewCenter(i),document.documentElement.scrollTop=0),setTimeout((()=>{if(!i){this.connectionId=e,this.componentType=t.getAttribute("child_type");let i="";if("checkbox"===this.componentType)i=t.getAttribute("aria-checked")?"true":"";else{let e=t.querySelector(this.componentType);e&&(i=e.value)}return""!=i?this.showNotification(this.$t("pages.messages.SELECT_AREA_NO_COORDINATES")):this.showNotification(this.$t("pages.messages.SELECT_AREA")),void this.enableDrawing()}this.showConnection(e,i,t)}),50)}),o?400:100)},showConnection(e,t,i){t&&i?(this.drawOverlay(e,t),t.classList.add("border"),this.connect(t,i,"#26a69a",2)):alert(this.$t("pages.messages.NO_MAPPING_AVAILABLE"))},drawOverlay(e,t){var i,o,s;if(this.isConfirmationBoxDisable)return;this.connectionId=e,this.removeExistingConfirmationOverlays();const n=at("#"+e);if(!n)return;let a;this.componentType=n.getAttribute("child_type");let l="";if("checkbox"===this.componentType)l=n.getAttribute("aria-label"),a="Un-Checked","true"===n.getAttribute("aria-checked")&&(a="Checked");else{const t=at("."+e);l=t.innerHTML;const i=n.querySelector(this.componentType);a=i.value}const r=this.getOffset(t),d=document.createElement("div");d.setAttribute("id","confirmation_overlay"),d.style.position="absolute",d.style.zIndex="99999",d.style.left=r.left+"px",d.style.top=(+r.top+ +r.height+6).toString()+"px",d.style.background="#e2e2e2",d.style.color="#898989",d.style.minHeight="80px",d.style.minWidth="100px",d.style.maxWidth="50%",d.style.textAlign="center",d.style.padding="5px 10px 5px 10px",d.style.letterSpacing="1px",d.style.borderRadius="7px",d.style.boxShadow="0 1px 2px rgba(0,0,0,0.07),\n      0 2px 4px rgba(0,0,0,0.07),\n      0 4px 8px rgba(0,0,0,0.07),\n      0 8px 16px rgba(0,0,0,0.07),\n      0 16px 32px rgba(0,0,0,0.07),\n      0 32px 64px rgba(0,0,0,0.07);";let c=this.getTrashIcon(e);d.innerHTML=`<div><b>${a}</b></div><div><b style='font-size: 9px'>${l}</b></div>\n                  <div>\n                  ${c}\n                  <span class='divOverlayWrong'>\n                    <i connectionId='${e}' style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.6em;' class='fa fa-times cursor-pointer'></i>\n                  </span>\n                  <span id='divOverlayCorrect'>\n                    <i style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.5em;' class='fas fa-check cursor-pointer'></i>\n                  </span></div>`,document.body.appendChild(d),null===(i=at("#divOverlayCorrect"))||void 0===i||i.addEventListener("click",(t=>{this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.$refs["mediFieldsView"].selectNextField(e)}));let h=document.getElementsByClassName("divOverlayWrong");Array.from(h).forEach((e=>{null===e||void 0===e||e.addEventListener("click",(e=>{this.connectionId=e.target.getAttribute("connectionId"),this.connectionId&&(this.$refs["mediFieldsView"].initTempFieldDelete(),this.refreshCanvas(),this.$forceUpdate(),this.enableDrawing())}))})),null===(o=at("#deleteRuleFromConnection"))||void 0===o||o.addEventListener("click",(e=>{this.connectionId=e.target.getAttribute("connectionId"),this.connectionId&&(this.deleteRuleFromConnection(),this.enableDrawing())}));try{const i=at("#confirmation_overlay"),o=null===(s=at("#confirmation_overlay"))||void 0===s?void 0:s.clientWidth,n=r.width,a=(+o-+n)/2;i.style.left=+r.left-+a+"px";let l=+t.getAttribute("width")+ +t.getAttribute("y")+i.offsetHeight;l>=lt.offsetHeight&&(d.style.top=(+r.top-6-+i.offsetHeight).toString()+"px");let c=null,h=this.getScoreDescription(this.fields[e]);null!=h&&""!==h&&(c={score:String(h),background:this.getColor(Number(h))}),c&&setTimeout((()=>{this.overlayForScore(i,c)}),10)}catch(m){}},overlayForScore(e,t){let i=t.score,o=t.background;const s=this.getOffset(e),n=document.createElement("div");n.setAttribute("id","score_overlay"),n.style.position="absolute",n.style.zIndex="99999",n.style.left=(+s.left+s.width-10).toString()+"px",n.style.top=(+s.top-20).toString()+"px",n.style.background=o,n.style.color="#898989",n.style.fontSize="14px",n.style.fontWeight="bold",n.style.letterSpacing="2px",n.style.cursor="pointer",n.style.padding="0.1em 0.6em",n.style.border="1px solid #f5f5f5",n.style.borderRadius="50px",n.innerHTML=`<div> <span  class='column-score-test' > ${i} </span> </div>`,document.body.appendChild(n)},getScoreDescription(e){let t="";return e&&e.hasOwnProperty("score_description")&&""!==e.score_description&&null!=e.score_description&&(t=e.score_description),String(t)},removeBordersFromRectangles(){let e=document.body.getElementsByTagName("rect");for(let t of e)t.classList.remove("border")},removeAllConnectionLines(){const e=at("#connection_line");e&&e.remove()},enableDrawing(e=!1){e&&(tt.pop(),this.redraw());const t=at("#draw");null===t||void 0===t||t.classList.add("enableDrawingRectangle");const i=at(".screenshot");null===i||void 0===i||i.classList.add("cursor-crosshair")},restrictDrawing(){const e=at("#draw");null===e||void 0===e||e.classList.remove("enableDrawingRectangle");const t=at(".screenshot");null===t||void 0===t||t.classList.remove("cursor-crosshair")},cancelOverlayDiv(){tt.pop(),this.redraw()},saveOverlayResult(){const e=tt[tt.length-1],t=tt.filter((function(t,i,o){return t.connectionId!==e.connectionId}));tt=[],tt=JSON.parse(JSON.stringify(t)),tt.push(e),this.redraw(),this.getTextByCoordinates(it)},connect(e,t,i,o){const s=this.getOffset(e),n=this.getOffset(t),a=s.left+s.width,l=s.top+s.height/2,r=n.left,d=n.top,c=Math.sqrt((r-a)*(r-a)+(d-l)*(d-l)),h=(a+r)/2-c/2,m=(l+d)/2-o/2,g=Math.atan2(l-d,a-r)*(180/Math.PI);this.removeAllConnectionLines();const u=document.createElement("div");u.setAttribute("id","connection_line"),u.style.cssText="z-index: 102;padding:0px; margin:0px; height:"+o+"px; background-color:"+i+"; line-height:1px; position:absolute; left:"+h+"px; top:"+m+"px; width:"+c+"px; -moz-transform:rotate("+g+"deg); -webkit-transform:rotate("+g+"deg); -o-transform:rotate("+g+"deg); -ms-transform:rotate("+g+"deg); transform:rotate("+g+"deg);",document.body.appendChild(u)},getOffset(e){const t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,width:t.width||e.offsetWidth,height:t.height||e.offsetHeight}},getTextByCoordinates(e){return et(this,void 0,void 0,(function*(){const t=this.record;let i,o=new FormData,s=e.startX/this.imageWidth,n=e.startY/this.imageHeight,a=e.endX/this.imageWidth,l=e.endY/this.imageHeight;o.append("x0",s.toString()),o.append("y0",n.toString()),o.append("x1",a.toString()),o.append("y1",l.toString()),o.append("doc_id",t.doc_id),o.append("page",this.page.toString()),o.append("field_name",this.connectionId),this.showLoading();try{let e=yield(0,Se.O_)();i=yield de().post(Se.hi.get_field_value,o,{headers:{Authorization:e}})}catch(d){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}const r=i.data.coords;if(!r||0===r[0].x&&0===r[0].y&&""===i.data.formatted_value)return this.showErrorToast(this.$t("pages.messages.EMPTY_MAPPING_NOT_ALLOWED")),this.prepareRectangles(),void this.enableDrawing();this.$refs["mediFieldsView"].updateFieldData(i.data)}))},enableOrDisableExportButton(e){let t=[];this.record.fields.forEach(((i,o)=>{if(!1===i.is_valid&&!this.isFieldCalcualtedFromLayout(i.name)&&this.isfieldsNotDisplayed(i.name)){if(!e)return;t.push(this.$t("pages.screen2a."+i.name))}})),e&&this.printFieldsNeedToBeValidated(t)},printFieldsNeedToBeValidated(e){},isFieldCalcualtedFromLayout(e){let t=!1;for(const i of this.formLayout)for(const o of i.rows)o.field_name==e&&o.calculation_formula&&(t=!0);return t},isfieldsNotDisplayed(e){let t=!0;return this.fieldsNotDisplayed.hasOwnProperty(e)&&(t=!1),t},setApiData(e){this.record=e,this.$forceUpdate()},setDocVersion(){this.document_version=this.record.document_version?this.record.document_version:1},windowResize(){at("#image_container");this.assignImageDimenions(),setTimeout((()=>{this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.getImageDetails(),this.removeMagnifier()}),20)},handleScroll(){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays()},isButtonToggleDisable(){return!!Re.at.includes(this.record.status)},deleteRuleConfirmation(e){this.deleteConfirmationDlg=!0,this.selectedInputObj=e},deleteRule(e){this.record.hasOwnProperty("clear_rules_fields_for_user")||(this.record.clear_rules_fields_for_user=[]),this.record.fields.forEach(((t,i)=>{t.name===e.field_name&&(this.record.clear_rules_fields_for_user.push(e.field_name),this.fields[e.field_name]=Object.assign(this.fields[e.field_name],{deleted:!0,color:null,value:"",confidence:0,formatted_value:"",content:null,validation_code:null,coords:null}),this.record.fields.splice(i,1))})),this.refreshCanvas()},refreshCanvas(){this.prepareRectangles(),this.$forceUpdate(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.getImageDetails(),this.redraw()},removeSelectedAreaOnImage(e){tt.pop(),this.refreshCanvas(),this.restrictDrawing()},getCursorPos(e){var t,i=0,o=0;e=e||window.event;let s=at(".screenshot");return t=s.getBoundingClientRect(),i=e.pageX-t.left,o=e.pageY-t.top,i-=window.pageXOffset,o-=window.pageYOffset,{x:i,y:o}},removeMagnifier(){const e=at("#glassBtn");e&&e.classList.remove("glass-active");let t=document.querySelector(".img-magnifier-glass");t&&(t.style.display="none",t.classList.remove("enable-glass"),t.removeEventListener("pointermove",this.moveMagnifier));const i=at("#draw");i&&i.removeEventListener("pointermove",this.moveMagnifier),document.body.classList.remove("active"),this.magnifyGlass=null},mouseClicked(e){this.removeMagnifier()},currentPage(){return this.page},dblClickToSelect(e){it={startX:e.layerX,startY:e.layerY,endX:e.layerX,endY:e.layerY},this.getTextByCoordinates(it)},deleteRuleFromConnection(){let e={};e.field_name=this.connectionId,this.deleteRule(e)},getTrashIcon(e){let t=this.fields[e],i="";return t?(i=!t.deleted&&t.rule?`<span id='deleteRuleFromConnection'>\n          <i connectionId='${e}' style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.6em;' class='fa fa-trash'></i>\n          </span>`:`<span class='divOverlayWrong'>\n                    <i connectionId='${e}' style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.6em;' class='fa fa-trash'></i>\n                  </span>`,i):i},handleFormatWarning(){this.doc2AppMode&&"XML_INVOICE"!=this.record.doc_type&&(this.format_warning_dismiss=this.showRulesNotFoundToast(this.record,window.location.href))},isDebugFlagHandler(){this.is_debug=!1,this.$route.query&&"true"===this.$route.query.is_debug&&(this.is_debug=!0)},viewOCRDocument(){let e=this.$router.resolve({path:"/ocr-document/"+this.docId+"/"+this.page});window.open(e.href,"_blank","location=yes,toolbar=yes,scrollbars=yes,resizable=yes,left=500,width=1500,height=1000")},displayConfidenceAndDeleteButton(e){return!this.fields[e.field_name].deleted&&this.fields[e.field_name].rule||this.getLowerConfidence(this.fields[e.field_name])},fieldValidationError(e){let t="REQUIRED";return e&&(t=e),t},renderTooltip(e){return!this.isReadOnly&&(!!this.fields[e].validation_code||!(!this.fields[e].is_required||""!=this.fields[e].formatted_value&&null!=this.fields[e].formatted_value))},hasApiData(){return 0!==(0,Me.v7)(this.record)},removeOldMapiingsAndDrawNew(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.prepareRectangles();let t=this.getElementToConnect(at("#"+e)),i=at("#"+e+"_rect");i&&t&&this.showConnection(e,i,t)},getElementToConnect(e){return this.componentType=e.getAttribute("child_type"),"checkbox"===this.componentType?e.querySelector(".q-checkbox__bg"):e},toggleSplitter(){this.splitterModel>=95?this.splitterModel=60:this.splitterModel=95},setSplitterModel(e){this.splitterModel=e},displaySplitDocumentView(){this.isReadOnly||(this.split_document=!0)},onResize(e){this.windowResize()},initMagnifyGlass(){let e=at(".screenshot"),t=document.querySelector(".img-magnifier-glass");if(!t)return;const i=3;t.style.display="block",t.style.backgroundImage="url('"+e.src+"')",t.style.backgroundRepeat="no-repeat",t.style.backgroundSize=e.width*i+"px "+e.height*i+"px";const o=3,s=t.offsetWidth/2,n=t.offsetHeight/2;this.magnifyGlass={Ix:e.offsetLeft,Iy:e.offsetTop,Zw:t.offsetWidth,Zh:t.offsetHeight,w:s,h:n,bw:o,ratio:e.naturalWidth/e.width};const a=at("#draw");a.removeEventListener("pointermove",this.moveMagnifier),t.removeEventListener("pointermove",this.moveMagnifier),a.addEventListener("pointermove",this.moveMagnifier),t.addEventListener("pointermove",this.moveMagnifier)},moveMagnifier(e){const t=3;var i,o,s;let n=document.querySelector(".img-magnifier-glass"),a=at(".screenshot");e.preventDefault(),i=this.getCursorPos(e),o=i.x,s=i.y,o>a.width-this.magnifyGlass.w/t&&(o=a.width-this.magnifyGlass.w/t),o<this.magnifyGlass.w/t&&(o=this.magnifyGlass.w/t),s>a.height-this.magnifyGlass.h/t&&(s=a.height-this.magnifyGlass.h/t),s<this.magnifyGlass.h/t&&(s=this.magnifyGlass.h/t),n.style.left=o-this.magnifyGlass.w+"px",n.style.top=s-this.magnifyGlass.h+"px",n.style.backgroundPosition="-"+(o*t-this.magnifyGlass.w+this.magnifyGlass.bw)+"px -"+(s*t-this.magnifyGlass.h+this.magnifyGlass.bw)+"px"},goToLayoutTemplate(){try{if(!this.doc_loaded)return;const e=Be.V.getDetailViewRoute({doc_type_key:this.record.doc_type||"",layout_template_id:this.layout_template_id||"",sub_doc_type_key:this.record.sub_doc_type||""});window.open(e,"_blank").focus()}catch(e){}},goToDashboard(){this.$router.push("/dashboard")},splitterChanged(){this.saveSplitterValueInStorage(),this.setShowAllButtonsPanel()}},setup(){const e=(0,ye.Z)(),t=(0,Ze.H_)();t.$reset();const{record:i,get_cached_data_id:o,doc_loaded:s,confirmationForPoConnectionReset:n,error:a,notifications:l,layout_template_id:r}=(0,ce.Jk)(t),{getDocumentById:d,setRecordFromCache:c,setDataToCache:h,removeCache:m}=t,g=(0,Ze.nc)(),{formLayout:u,isExtenedPanel:p,renderComponent:f,docType:w}=(0,ce.Jk)(g),{getElementWidth:_,isFieldHidden:y}=g;let v={},b=[],x=[],k=(0,ue.iH)(!1),C=(0,ue.iH)(!1),D=(0,ue.iH)(!1);const S=(0,Ze.TB)(),{releaseDocLock:E}=S,{doc_lock:L}=(0,ce.Jk)(S),I=(0,Ze.e0)(),{isConfirmationBoxDisable:A}=(0,ce.Jk)(I),{resetStoreOnRouteChange:O}=I,W=(0,Ze.Eu)(),{open_editor:R}=(0,ce.Jk)(W);return{isFieldHidden:y,setDataToCache:h,removeCache:m,get_cached_data_id:o,doc_loaded:s,resetStoreOnRouteChange:O,isConfirmationBoxDisable:A,setRecordFromCache:c,fields_pending_load_count:(0,ue.iH)(0),fields_loaded_count:(0,ue.iH)(0),notifications:l,getDocumentById:d,record:i,docType:w,confirmationForPoConnectionReset:n,doc_fetch_error:(0,ue.iH)(a),doc_lock:L,releaseDocLock:E,page:(0,ue.iH)(1),showTooltip:k,showTooltipWithHide:C,showTooltipWithClose:D,tableRows:b,fields:v,fieldsNotDisplayed:x,image:(0,ue.iH)(""),layout:x,images:x,baseUrl:"https://api.docbits.com",isReadOnly:(0,ue.iH)(!1),componentType:"input",lineitem_count:0,lineitem_error:(0,ue.iH)(!1),doc2AppMode:(0,ue.iH)(!1),is_debug:(0,ue.iH)(!1),tb_version:"default",document_version:(0,ue.iH)(0),splitterModel:(0,ue.iH)(60),imageFieldSplitter:(0,ue.iH)(26),showNotification(t){e.notify({message:t,color:"primary",position:"top"})},doc_type_list:x,confirm_supplier_unblock:(0,ue.iH)(!1),ai_rules:(0,ue.iH)(0),ai_fields:(0,ue.iH)(0),deleteConfirmationDlg:(0,ue.iH)(!1),selectedInputObj:(0,ue.iH)(x),textConfirmationMsg:(0,ue.iH)(""),formLayout:u,isExtenedPanel:p,renderComponent:f,getElementWidth:_,imageHeight:(0,ue.iH)(0),imageWidth:(0,ue.iH)(0),viewBox:(0,ue.iH)("0 0 0 0"),connectionId:(0,ue.iH)(""),is_admin:(0,ue.iH)(!1),layout_template_id:r,open_editor:R}}});var mt=i(74260),gt=i(2165),ut=i(24554),pt=i(80218),ft=i(15151),wt=i(5363),_t=i(82226),yt=i(27011),vt=i(83414),bt=i(52035),xt=i(2350),kt=i(46778),Ct=i(10151),Dt=i(25589),St=i(62025),Et=i(75096),Lt=i(99367),It=i(65735),At=i(86115),Ot=i(17132),Wt=i(60677),Rt=i(7518),Tt=i.n(Rt);const Ft=(0,mt.Z)(ht,[["render",le],["__scopeId","data-v-41aa0b39"]]),qt=Ft;Tt()(ht,"components",{QBtn:gt.Z,QIcon:ut.Z,QSplitter:pt.Z,QResizeObserver:ft.Z,QTooltip:wt.Z,QBtnDropdown:_t.Z,QList:yt.Z,QItem:vt.Z,QItemSection:bt.Z,QItemLabel:xt.Z,QDialog:kt.Z,QCard:Ct.Z,QCardSection:Dt.Z,QSpace:St.Z,QAvatar:Et.Z,QCardActions:Lt.Z,QCheckbox:It.Z,QField:At.Z,QTable:Ot.Z}),Tt()(ht,"directives",{ClosePopup:Wt.Z})}}]);