"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[6217],{56217:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ze});var i=s(59835),r=s(86970),o=s(61957);const a=e=>((0,i.dD)("data-v-4b5196a5"),e=e(),(0,i.Cn)(),e),l={class:"page-holder"},n={class:"container login"},d={key:0,class:"row login-box"},c={class:"upper-section"},u={class:"text-primary text-heading text-weight-bold"},m=a((()=>(0,i._)("br",null,null,-1))),p={class:"q-pt-xl text-muted text-sm"},_=a((()=>(0,i._)("div",{class:"col-2"},null,-1))),h={class:"col-8",id:"email"},g={class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},b={class:"col-8",id:"password"},w={class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},f={class:"text-center"},v={class:"text-center"},y={class:"absolute-bottom"},x={class:"mainLine"},S=a((()=>(0,i._)("div",{class:"signupLines"},null,-1))),k={class:"q-px-sm text-primary"},C=a((()=>(0,i._)("div",{class:"signupLines"},null,-1))),q={class:"row justify-center"},L={class:"btnG"},D=a((()=>(0,i._)("br",null,null,-1))),T={class:"btnM"},E=a((()=>(0,i._)("br",null,null,-1))),$={class:"btnL"},A={style:{"border-top":"1px solid lightgrey"}},W={class:"text-sm text-muted q-pt-md"},Z=(0,i.Uk)(". "),I=a((()=>(0,i._)("div",{class:"col-xs-0 col-sm-0 col-md-2 col-lg-2 text-center mobile-hide"},null,-1))),V={class:"col-xs-0 col-sm-0 col-md-4 col-lg-4 text-center mobile-hide"},H={style:{top:"20%",bottom:"50%",position:"relative"}},U=a((()=>(0,i._)("img",{class:"vertical-middle",height:"300",width:"300",src:"fellowpro_white.png",alt:""},null,-1))),P={class:"mb-14 text-white"},M=a((()=>(0,i._)("br",{class:"d-none d-lg-inline"},null,-1))),O=a((()=>(0,i._)("div",{class:"col-xs-0 col-sm-0 col-md-1 col-lg-1 mobile-hide"},null,-1))),R={href:"https://en.docs.fellowpro.com/docbits/settings-users/#adding-a-user",class:"text-primary"},z={class:"row",style:{"flex-direction":"column",width:"100%"}},F={key:0,class:"row",style:{width:"100%",display:"flex","flex-direction":"column","align-items":"flex-start"}},Q=a((()=>(0,i._)("img",{class:"loader",src:"loader.gif",alt:"Loading..."},null,-1)));function N(e,t,s,a,N,K){const B=(0,i.up)("q-img"),j=(0,i.up)("q-select"),G=(0,i.up)("q-card-section"),Y=(0,i.up)("q-input"),X=(0,i.up)("q-icon"),J=(0,i.up)("q-btn"),ee=(0,i.up)("PasswordDisableCounter"),te=(0,i.up)("GoogleLogin"),se=(0,i.up)("MicrosoftLogin"),ie=(0,i.up)("LinkedinLogin"),re=(0,i.up)("q-card"),oe=(0,i.up)("ResendVerifyEmail"),ae=(0,i.up)("q-card-actions"),le=(0,i.up)("q-dialog"),ne=(0,i.up)("q-inner-loading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",l,[(0,i._)("div",n,[e.userlogin?((0,i.wg)(),(0,i.iD)("div",d,[(0,i.Wm)(re,{class:"col-xs-12 col-sm-12 col-md-5 col-lg-5"},{default:(0,i.w5)((()=>[(0,i.Wm)(G,{class:"absolute-top"},{default:(0,i.w5)((()=>[(0,i.Wm)(B,{src:"docbits.svg",style:{"max-width":"120px"}}),(0,i.Wm)(j,{modelValue:e.locale,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.locale=t),e.languageChanged],options:e.localeOptions,dense:"",borderless:"","emit-value":"","map-options":"","options-dense":"",class:"float-right q-ml-auto text-grey-7 text-uppercase q-mr-md"},null,8,["modelValue","options","onUpdate:modelValue"])])),_:1}),(0,i._)("div",c,[(0,i.Wm)(G,{class:"text-center"},{default:(0,i.w5)((()=>[(0,i._)("span",u,(0,r.zw)(e.$t("pages.login.welcome_to")),1),m,(0,i.Wm)(B,{src:"docbits.svg",class:"q-mt-md",style:{"max-width":"235px"}}),(0,i._)("p",p,[(0,i.Uk)((0,r.zw)(e.$t("pages.login.login_sub_header"))+" ",1),(0,i._)("a",{class:"text-primary cursor-pointer",style:{"text-decoration":"underline"},onClick:t[1]||(t[1]=t=>e.contactPage())},(0,r.zw)(e.$t("pages.login.here")),1)])])),_:1}),(0,i.Wm)(G,{class:""},{default:(0,i.w5)((()=>[_,(0,i._)("div",h,[(0,i.Wm)(Y,{onKeyup:(0,o.D2)(e.enterS,["enter"]),modelValue:e.email,"onUpdate:modelValue":t[2]||(t[2]=t=>e.email=t),dense:"","data-cy":"email",label:e.$t("pages.login.email"),outlined:""},null,8,["onKeyup","modelValue","label"])]),(0,i._)("div",g,(0,r.zw)(e.emailError),1),(0,i._)("div",b,[(0,i.Wm)(Y,{onKeyup:(0,o.D2)(e.enterS,["enter"]),type:e.showPassword?"text":"password",modelValue:e.password,"onUpdate:modelValue":t[3]||(t[3]=t=>e.password=t),"data-cy":"password",label:e.$t("pages.login.password"),outlined:"",dense:""},{append:(0,i.w5)((()=>[(0,i.Wm)(X,{onClick:e.toggleShow,flat:"",dense:"",name:e.showPassword?"visibility_off":"visibility",size:"24px",class:"cursor-pointer"},null,8,["onClick","name"])])),_:1},8,["onKeyup","type","modelValue","label"])]),(0,i._)("div",w,(0,r.zw)(e.passwordError),1),(0,i._)("div",f,[(0,i._)("p",null,[(0,i._)("a",{class:"cursor-pointer text-primary text-subtitle1",style:{"text-decoration":"underline"},onClick:t[4]||(t[4]=t=>e.onResetPW())},(0,r.zw)(e.$t("pages.login.forgot_password")),1)])]),(0,i._)("div",v,[(0,i.Wm)(J,{unelevated:"",disable:e.processing||e.start_disable_submit_timer,onKeyup:(0,o.D2)(e.enterS,["enter"]),label:e.$t("pages.login.login_button"),color:"primary","text-color":"white",onClick:t[5]||(t[5]=t=>e.onSubmit())},null,8,["disable","onKeyup","label"]),(0,i.Wm)(ee,{start_timer:e.start_disable_submit_timer,counter_end_time:e.disable_submit_time,onDisableTimerDone:e.disableTimerDone},null,8,["start_timer","counter_end_time","onDisableTimerDone"])])])),_:1})]),(0,i._)("div",y,[(0,i.Wm)(G,null,{default:(0,i.w5)((()=>[(0,i._)("div",x,[S,(0,i._)("div",k,(0,r.zw)(e.$t("pages.login.social_media")),1),C]),(0,i._)("div",q,[(0,i._)("div",L,[(0,i.Wm)(te)]),D,(0,i._)("div",T,[(0,i.Wm)(se)]),E,(0,i._)("div",$,[(0,i.Wm)(ie)])])])),_:1}),(0,i.Wm)(G,{class:"text-center"},{default:(0,i.w5)((()=>[(0,i._)("div",A,[(0,i._)("div",W,[(0,i.Uk)((0,r.zw)(e.$t("pages.login.no_account"))+" ",1),(0,i._)("a",{class:"text-primary cursor-pointer",style:{"text-decoration":"underline"},onClick:t[6]||(t[6]=t=>e.user_register())},(0,r.zw)(e.$t("pages.login.register")),1),Z])])])),_:1})])])),_:1}),I,(0,i._)("div",V,[(0,i._)("div",H,[U,(0,i._)("h1",P,[(0,i.Uk)((0,r.zw)(e.$t("pages.login.learn_polydocs"))+" ",1),M,(0,i.Uk)((0,r.zw)(e.$t("pages.login.visit_site")),1)]),(0,i.Wm)(J,{unelevated:"",color:"primary","text-color":"white",onClick:t[7]||(t[7]=t=>e.goCloud()),label:e.$t("pages.login.visit_site_btn")},null,8,["label"])])]),O])):(0,i.kq)("",!0)])]),(0,i.Wm)(le,{modelValue:e.display_error,"onUpdate:modelValue":t[9]||(t[9]=t=>e.display_error=t),persistent:"",class:"login-error-dialog"},{default:(0,i.w5)((()=>[(0,i.Wm)(re,{style:{width:"500px","max-width":"40vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(G,{class:"row items-center login-error-background p-4"},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{color:"white",size:"xl",class:"q-ml-auto q-mr-auto",name:"warning"})])),_:1}),(0,i.Wm)(G,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.error_message)+" ",1),(0,i._)("a",R,(0,r.zw)(e.$t("help_center")),1)])),_:1}),(0,i.Wm)(ae,null,{default:(0,i.w5)((()=>[(0,i._)("div",z,[(0,i.Wm)(J,{label:e.$t("Close"),class:"q-mr-sm login-error-background",color:"primary",onClick:t[8]||(t[8]=t=>e.display_error=!1)},null,8,["label"])]),e.show_verif_email_btn?((0,i.wg)(),(0,i.iD)("div",F,[(0,i.Wm)(oe,{email:e.email},null,8,["email"])])):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(ne,{showing:e.processing},{default:(0,i.w5)((()=>[Q])),_:1},8,["showing"])],64)}var K=s(39981),B=s.n(K),j=s(9991),G=s(44173),Y=s(49990),X=s(60499),J=s(50655),ee=s(26033),te=s(63458),se=s(49341),ie=s(77997),re=s(19302),oe=s(3833),ae=s(38126),le=s(53500),ne=s(67865),de=s(75134),ce=s(93439),ue=s(46624);const me=e=>((0,i.dD)("data-v-2491afc4"),e=e(),(0,i.Cn)(),e),pe={key:0,class:"login_time_out_message"},_e=me((()=>(0,i._)("div",{class:"col-4 secondary-c-text login_timout_time",style:{width:"150px"}},null,-1)));function he(e,t,s,o,a,l){return(0,i.wg)(),(0,i.iD)(i.HY,null,[e.start_timer?((0,i.wg)(),(0,i.iD)("div",pe,(0,r.zw)(e.$t("failed_login_attempts_warning")),1)):(0,i.kq)("",!0),_e],64)}function ge(e,t){var s=document.createElement("span");s.className="flip-clock__piece",s.innerHTML='<b class="flip-clock__card card"><b class="card__top"></b><b class="card__bottom"></b><b class="card__back"><b class="card__bottom"></b></b></b>',this.el=s;var i=s.querySelector(".card__top"),r=s.querySelector(".card__bottom"),o=s.querySelector(".card__back"),a=s.querySelector(".card__back .card__bottom");this.update=function(e){e=("0"+e).slice(-2),e!==this.currentValue&&(this.currentValue>=0&&(o.setAttribute("data-value",this.currentValue),r.setAttribute("data-value",this.currentValue)),this.currentValue=e,i.innerText=this.currentValue,a.setAttribute("data-value",this.currentValue),this.el.classList.remove("flip"),this.el.offsetWidth,this.el.classList.add("flip"))},this.update(t)}function be(e){var t=Date.parse(e)-Date.parse(new Date);return{Total:t,Hours:Math.floor(t/36e5%24),Minutes:Math.floor(t/1e3/60%60),Seconds:Math.floor(t/1e3%60)}}function we(){var e=new Date;return{Total:e,Hours:e.getHours()%12,Minutes:e.getMinutes(),Seconds:e.getSeconds()}}function fe(e,t){e=!!e&&new Date(Date.parse(e)),t=t||function(){};var s=e?be:we;this.el=document.createElement("div"),this.el.className="flip-clock";var i,r,o={},a=s(e);for(i in a)a[i]<0&&(a[i]=0),"Total"!==i&&(o[i]=new ge(i,a[i]),this.el.appendChild(o[i].el));var l=0;function n(){if(r=requestAnimationFrame(n),!(l++%10)){var a=s(e);if(a.Total<0){for(i in cancelAnimationFrame(r),o)o[i].update(0);t()}else for(i in o)o[i].update(a[i])}}setTimeout(n,500)}const ve=(0,i.aZ)({el:"#app",props:{start_timer:{type:Boolean,default:!1},counter_end_time:{type:String,default:""}},watch:{start_timer:{handler:function(e,t){e?this.setCounter():this.hideCounter()}}},emits:["disableTimerDone"],mounted(){this.initView()},methods:{initView(){this.setCounter()},makeCounter(){let e=document.querySelector(".login_timout_time");e.innerHTML="";var t=new Date(this.counter_dateTime),s=new fe(t,this.timeCompleted);e.appendChild(s.el)},timeCompleted(){this.$emit("disableTimerDone")},hideCounter(){let e=document.querySelector(".login_timout_time");e.innerHTML=""},getDistance(){const e=(new Date).getTime(),t=this.counter_time-e;return t},setCounter(){try{if(!1===this.start_timer)return;this.counter_dateTime=new Date(this.counter_end_time),this.counter_time=this.counter_dateTime.getTime();const e=this.getDistance();e<0&&this.expired_tries++,this.makeCounter()}catch(e){}}},setup(){return{counter_value:(0,X.iH)(""),counter_time:(0,X.iH)(0),counter_dateTime:(0,X.iH)({}),counter_interval:(0,X.iH)(0),expired_tries:(0,X.iH)(0)}}});var ye=s(7683);const xe=(0,ye.Z)(ve,[["render",he],["__scopeId","data-v-2491afc4"]]),Se=xe;var ke=s(37744),Ce=s(92603),qe=s(63225),Le=function(e,t,s,i){function r(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,o){function a(e){try{n(i.next(e))}catch(t){o(t)}}function l(e){try{n(i["throw"](e))}catch(t){o(t)}}function n(e){e.done?s(e.value):r(e.value).then(a,l)}n((i=i.apply(e,t||[])).next())}))};const De=(0,i.aZ)({el:"#app",mixins:[Y.Z,te.Z,ee.Z,J.Z,Ce.Z,qe.Z],components:{GoogleLogin:ne.Z,MicrosoftLogin:ce.Z,LinkedinLogin:de.Z,ResendVerifyEmail:le.Z,PasswordDisableCounter:Se},data(){return{email:"",password:"",emailError:"",passwordError:"",forgotPW:"https://dev.auth.docbits.com/oauth2/reset_password_request_doc2app",userlogin:!0,userregister:!1,disable_submit_difference:60}},watch:{display_error(e,t){}},mounted(){this.isUserAlreadyLoggedIn(),document.addEventListener("social_media_login_after",this.socialMediaLoginAfter)},unmounted:function(){document.removeEventListener("social_media_login_after",this.socialMediaLoginAfter)},methods:{isUserAlreadyLoggedIn(){return Le(this,void 0,void 0,(function*(){const e=(0,ue.wX)(),t=yield e.isLoggedIn();t?this.afterLoginRedirect(this):this.clearStorageForLogout()}))},enterS(){this.onSubmit()},socialMediaLoginAfter(e){this.handleSocialMediaRedirect(e.detail)},toggleShow(){this.showPassword=!this.showPassword},goCloud(){ie.Az&&window.open(ie.Az)},goHelp(){ie.ny&&window.open(ie.ny)},contactPage(){window.open("https://dev.cloudintegration.eu/doc2_support")},user_register(){this.$router.push("/register")},onResetPW(){this.$router.push("/forget-password")},onSubmit(){this.email=this.removeSpaces(this.email);let e=this.validateEmail(this.email);e?(this.removeClass((0,G.$)("#email").querySelector("label"),"error-border-left"),this.addClass((0,G.$)("#email").querySelector("label"),"success-border-left"),this.emailError=""):(this.removeClass((0,G.$)("#email").querySelector("label"),"success-border-left"),this.addClass((0,G.$)("#email").querySelector("label"),"error-border-left"),this.emailError=this.$t("pages.messages.INVALID_EMAIL")),this.password&&""!=this.password?(this.removeClass((0,G.$)("#password").querySelector("label"),"error-border-left"),this.addClass((0,G.$)("#password").querySelector("label"),"success-border-left"),this.passwordError=""):(this.removeClass((0,G.$)("#password").querySelector("label"),"success-border-left"),this.addClass((0,G.$)("#password").querySelector("label"),"error-border-left"),this.passwordError=this.$t("pages.messages.PASSWORD_MANDATORY")),this.emailError||this.passwordError||this.authenticateUser()},authenticateUser(){return Le(this,void 0,void 0,(function*(){try{this.processing=!0;let e={username:this.email,password:this.removeSpaces(this.password)};const t=yield se.FT.login(e);t&&this.afterLoginEvent(t)}catch(e){this.handleLoginFailed(),this.handleErrorFromApi(e),this.processing=!1}}))},handleLoginFailed(){this.start_disable_submit_timer=!1;let e=oe.Z.getItem("login_attempts")||0;if(oe.Z.set("login_attempts",++e),e>3){const t=(e-3)*this.disable_submit_difference;this.disableSubmit(t)}},disableSubmit(e=60){e<0&&(e=this.disable_submit_difference),this.start_disable_submit_timer=!0,this.disable_submit_time=new Date,this.disable_submit_time.setSeconds(this.disable_submit_time.getSeconds()+e)},disableTimerDone(){this.start_disable_submit_timer=!1,this.disable_submit_time=null},handleSpecificErrors(e){e.hasOwnProperty("error")&&"email_not_verified"===e.error&&(this.show_verif_email_btn=!0)},afterLoginEvent(e){return Le(this,void 0,void 0,(function*(){try{this.processing=!0,this.setTokenInLocalStorage(e),yield this.setAuthToken("Bearer "+e.access_token),yield se.PK.setUserSession(),this.getUniqueLockId(),yield this.fetchUserSettings(),this.afterLoginRedirect(this)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.processing=!1}}))},onReset(){this.email="",this.password="",this.emailError="",this.passwordError="",this.removeClass((0,G.$)("#email").querySelector("label"),"error-border-left"),this.removeClass((0,G.$)("#password").querySelector("label"),"error-border-left")},handleSocialMediaRedirect(e){return Le(this,void 0,void 0,(function*(){try{if(!e.access_type||!e.access_token)return;this.processing=!0;let t=new FormData;t.append("type",e.access_type),t.append("access_token",e.access_token);let s=yield this.getSocialToken(t);this.afterLoginEvent(s)}catch(t){this.handleErrorFromApi(t),this.processing=!1}}))},getSocialToken(e){return Le(this,void 0,void 0,(function*(){let t;t=yield B().post(ke.hi.social_token,e,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:(0,ke.jd)()},timeout:1e4,timeoutErrorMessage:"Request timed out"});const s=!(!t.data||!t.data.hasOwnProperty("success")||!0!==t.data.success);if(!s&&t.data.hasOwnProperty("message_code")&&"INVALID_AUTHORIZATION_CODE"==t.data.message_code)throw{message:this.$t("errors.INVALID_AUTHORIZATION_CODE")};if(!s&&t.data.hasOwnProperty("message"))throw{message:t.data.message};if(s){let e=t.data.token;return e}return""}))},displayError(e){this.display_error=!0;let t="";t='Invalid "username" or "password" in request.'==e?this.$t("invalid_user_password"):e,t||(t=this.$t("general_login_error")),this.error_message=t},handleErrorFromApi(e){let t="";e.response&&400===e.response.status&&(t=this.$t("pages.messages.INVALID_EMAIL_PASSWORD")),null!=e&&"object"==typeof e&&e.hasOwnProperty("message")&&(t=e.message),e&&e.response&&e.response.data&&(e.response.data.hasOwnProperty("message")&&(t=e.response.data.message),e.response.data.hasOwnProperty("error_description")&&(t=e.response.data.error_description,this.handleSpecificErrors(e.response.data))),t&&""!==t&&this.displayError(t)},languageChanged(){oe.Z.set("selected_language",this.locale),ae.Z.set("event_name","language_change"),oe.Z.remove("doc_types")}},setup(){(0,re.Z)();let{locale:e}=(0,j.QT)({useScope:"global"});const t=(0,ue.TB)(),{getUniqueLockId:s}=t,i=(0,ue.wX)(),{setAuthToken:r}=i,o=(0,ue.LM)(),{fetchUserSettings:a}=o;return{fetchUserSettings:a,setAuthToken:r,locale:(0,X.iH)(e),access_token:(0,X.iH)(""),access_type:(0,X.iH)("google"),display_error:(0,X.iH)(!1),error_message:(0,X.iH)(""),show_verif_email_btn:(0,X.iH)(!1),processing:(0,X.iH)(!1),showPassword:(0,X.iH)(!1),start_disable_submit_timer:(0,X.iH)(!1),disable_submit_time:(0,X.iH)(null),getUniqueLockId:s,localeOptions:[{value:"en-us",label:"English"},{value:"de",label:"Deutsch"},{value:"es-es",label:"Español"},{value:"fr",label:"Français"},{value:"nl",label:"Dutch"}]}}});var Te=s(44458),Ee=s(63190),$e=s(70335),Ae=s(32259),We=s(68879),Ze=s(8326),Ie=s(13119),Ve=s(22857),He=s(32074),Ue=s(11821),Pe=s(60854),Me=s(69984),Oe=s.n(Me);const Re=(0,ye.Z)(De,[["render",N],["__scopeId","data-v-4b5196a5"]]),ze=Re;Oe()(De,"components",{QCard:Te.Z,QCardSection:Ee.Z,QImg:$e.Z,QSelect:Ae.Z,QBtn:We.Z,QForm:Ze.Z,QInput:Ie.Z,QIcon:Ve.Z,QDialog:He.Z,QCardActions:Ue.Z,QInnerLoading:Pe.Z})}}]);