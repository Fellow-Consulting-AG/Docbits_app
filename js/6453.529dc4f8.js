"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[6453],{26453:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Lt});var o=t(61758),i=t(58790);const a=e=>((0,o.Qi)("data-v-04f8d176"),e=e(),(0,o.jt)(),e),s={class:"row q-pl-md q-pr-md highlighted-back"},d={class:"col-4 secondary-c-text text-h6"},r={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},n={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},m={class:"col-8 q-pa-xs"},u={class:"float-right"},c=["innerHTML"],p=a((()=>(0,o.Lk)("img",{width:"20",src:"images/globe.svg",class:"black_to_white"},null,-1))),f={class:"row q-pl-md q-pr-md q-pb-md"},h={class:"col-xs-12 col-sm-2 col-md-2 col-lg-2 q-pt-sm full-height"},g={class:"full-width scroll-area-height scrolle-y"},_={class:"full-width",style:{position:"relative"}},b={class:"col-xs-12 col-sm-10 col-md-10 col-lg-10 padding-8-0-8-8"},v={class:"full-width"},y={class:"full-width"},k={class:"p-t-b-6 highlighted-back image_control_panel"},F={class:"row"},L={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},C={class:"row form-builder-image-container",id:"image_scrolle"},T={class:"image_container overflow-scroll",id:"image_container"},B=["width"],M=a((()=>(0,o.Lk)("div",{class:"max-width-80 q-pl-sm q-pr-sm"},[(0,o.Lk)("div",{class:"justify-center form-builder-image-container"},[(0,o.Lk)("img",{src:"images/Banana_invoice.svg",width:"50",class:"active cursor-pointer q-ma-sm shadow-2 solid-border-1px bg-white",draggable:"false"})])],-1))),w={class:"row"},N={class:"col-sm-12 col-md-12 col-lg-12"},A={class:"row"},V={class:"col-sm-12 col-md-12 col-lg-12"},E={class:"col-sm-12 col-md-12 col-lg-12"},O=a((()=>(0,o.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},null,-1))),x={class:"col-sm-12 col-md-12 col-lg-12"};function I(e,l,t,a,I,q){const S=(0,o.g2)("q-icon"),R=(0,o.g2)("q-btn"),$=(0,o.g2)("helpLayoutbuilder"),P=(0,o.g2)("f-btn"),D=(0,o.g2)("q-item-label"),U=(0,o.g2)("q-tooltip"),W=(0,o.g2)("q-item-section"),Q=(0,o.g2)("q-item"),X=(0,o.g2)("q-select"),J=(0,o.g2)("q-tab"),K=(0,o.g2)("q-tabs"),H=(0,o.g2)("q-separator"),z=(0,o.g2)("DefaultGroups"),G=(0,o.g2)("q-expansion-item"),j=(0,o.g2)("DefaultElements"),Z=(0,o.g2)("Elements"),Y=(0,o.g2)("q-tab-panel"),ee=(0,o.g2)("Properties"),le=(0,o.g2)("q-tab-panels"),te=(0,o.g2)("FieldsDesigner"),oe=(0,o.g2)("q-splitter"),ie=(0,o.g2)("q-toolbar-title"),ae=(0,o.g2)("q-toolbar"),se=(0,o.g2)("q-input"),de=(0,o.g2)("q-form"),re=(0,o.g2)("q-card-section"),ne=(0,o.g2)("q-card"),me=(0,o.g2)("q-dialog"),ue=(0,o.g2)("Loader"),ce=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",s,[(0,o.Lk)("div",d,[e.docType&&!e.subDocType?((0,o.uX)(),(0,o.Wv)(R,{key:0,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/settings/doc_type_settings/"+e.docType},{default:(0,o.k6)((()=>[(0,o.bF)(S,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,o.Lk)("label",r,(0,i.v_)(e.$t("pages.settings.document_types")),1)])),_:1},8,["to"])):(0,o.Q3)("",!0),e.docType&&e.subDocType?((0,o.uX)(),(0,o.Wv)(R,{key:1,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/settings/sub_doc_type/"+e.docType},{default:(0,o.k6)((()=>[(0,o.bF)(S,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,o.Lk)("label",n,(0,i.v_)(e.$t("sub_doc_type")),1)])),_:1},8,["to"])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",m,[(0,o.Lk)("div",u,[(0,o.bF)($)]),(0,o.bF)(P,{label:e.$t("copy_json"),class:"float-right",icon:"content_copy",onClick:l[0]||(l[0]=l=>e.copyTemplate())},null,8,["label"]),(0,o.bF)(P,{label:e.$t("edit_json"),class:"float-right q-mr-md",icon:"visibility",onClick:l[1]||(l[1]=l=>e.openJsonForm())},null,8,["label"]),(0,o.bF)(P,{label:e.$t("use_default_template"),class:"float-right q-mr-md",onClick:l[2]||(l[2]=l=>e.restoreDefaults())},null,8,["label"]),(0,o.bF)(X,{outlined:"",dense:"",class:"language-select float-right q-mr-md width-200",modelValue:e.language_origin,"onUpdate:modelValue":[l[3]||(l[3]=l=>e.language_origin=l),l[4]||(l[4]=l=>e.createTemplateAccordingToOrigin())],options:e.language_origin_list,"emit-value":"","map-options":""},{option:(0,o.k6)((e=>[(0,o.bF)(Q,(0,i._B)((0,o.Ng)(e.itemProps)),{default:(0,o.k6)((()=>[(0,o.bF)(W,null,{default:(0,o.k6)((()=>[(0,o.bF)(D,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.opt.label),1)])),_:2},1024),e.opt.description?((0,o.uX)(),(0,o.Wv)(U,{key:0},{default:(0,o.k6)((()=>[(0,o.Lk)("span",{innerHTML:e.opt.description},null,8,c)])),_:2},1024)):(0,o.Q3)("",!0)])),_:2},1024)])),_:2},1040)])),prepend:(0,o.k6)((()=>[(0,o.bF)(S,{flat:"",dense:"",color:"primary"},{default:(0,o.k6)((()=>[p])),_:1})])),_:1},8,["modelValue","options"])])]),(0,o.Lk)("div",f,[(0,o.Lk)("div",h,[(0,o.Lk)("div",g,[(0,o.Lk)("div",_,[(0,o.bF)(K,{modelValue:e.activeTab,"onUpdate:modelValue":l[5]||(l[5]=l=>e.activeTab=l),dense:"","active-class":"highlighted-back","indicator-color":"primary","active-color":"primary",align:"justify"},{default:(0,o.k6)((()=>[(0,o.bF)(J,{name:"form_elements",label:e.$t("form_builder.elements")},null,8,["label"]),(0,o.bF)(J,{name:"element_properties",label:e.$t("form_builder.properties")},null,8,["label"])])),_:1},8,["modelValue"]),(0,o.bF)(H),(0,o.bF)(le,{modelValue:e.activeTab,"onUpdate:modelValue":l[6]||(l[6]=l=>e.activeTab=l),animated:""},{default:(0,o.k6)((()=>[(0,o.bF)(Y,{name:"form_elements"},{default:(0,o.k6)((()=>[(0,o.bF)(G,{"expand-separator":"","default-opened":"",label:e.$t("groups"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px q-mt-sm"},{default:(0,o.k6)((()=>[(0,o.bF)(z)])),_:1},8,["label"]),(0,o.bF)(G,{"expand-separator":"",label:e.$t("fields"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px q-mt-sm",class:"q-mb-sm"},{default:(0,o.k6)((()=>[(0,o.bF)(j)])),_:1},8,["label"]),(0,o.bF)(G,{"expand-separator":"",label:e.$t("form_builder.form_elements"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px"},{default:(0,o.k6)((()=>[e.renderComponent?((0,o.uX)(),(0,o.Wv)(Z,{key:e.keyToUpdateComponnets})):(0,o.Q3)("",!0)])),_:1},8,["label"]),(0,o.bF)(H)])),_:1}),(0,o.bF)(Y,{name:"element_properties"},{default:(0,o.k6)((()=>[e.renderComponent?((0,o.uX)(),(0,o.Wv)(ee,{key:e.keyToUpdateComponnets})):(0,o.Q3)("",!0)])),_:1})])),_:1},8,["modelValue"])])])]),(0,o.Lk)("div",b,[(0,o.bF)(oe,{limits:[30,95],modelValue:e.formSplitterModel,"onUpdate:modelValue":l[7]||(l[7]=l=>e.formSplitterModel=l),class:"scroll-area-height"},{before:(0,o.k6)((()=>[(0,o.Lk)("div",v,[(0,o.bF)(te,{onSaveTemplate:e.saveTemplate},null,8,["onSaveTemplate"])])])),after:(0,o.k6)((()=>[(0,o.Lk)("div",y,[(0,o.Lk)("div",k,[(0,o.Lk)("div",F,[(0,o.Lk)("div",L,[(0,o.bF)(S,{name:"img:images/zoom_in.svg",size:"24px",class:"q-mr-sm cursor-pointer",onClick:e.zoomIn},{default:(0,o.k6)((()=>[(0,o.bF)(U,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("zoom_in")),1)])),_:1})])),_:1},8,["onClick"]),(0,o.bF)(S,{name:"img:images/zoom_out.svg",size:"24px",class:"q-mr-sm cursor-pointer",onClick:e.zoomOut},{default:(0,o.k6)((()=>[(0,o.bF)(U,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("zoom_out")),1)])),_:1})])),_:1},8,["onClick"])])])]),(0,o.Lk)("div",C,[(0,o.Lk)("div",T,[(0,o.Lk)("img",{src:"images/Banana_invoice.svg",width:e.imageWidth,draggable:"false",class:"bg-white"},null,8,B)]),M])])])),_:1},8,["modelValue"])])]),(0,o.bF)(me,{modelValue:e.showJsonForm,"onUpdate:modelValue":l[11]||(l[11]=l=>e.showJsonForm=l)},{default:(0,o.k6)((()=>[(0,o.bF)(ne,null,{default:(0,o.k6)((()=>[(0,o.bF)(ae,{class:"secondary-toolbar"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("edit_json")),1)])),_:1}),(0,o.bo)((0,o.bF)(R,{flat:"",round:"",dense:"",icon:"close"},null,512),[[ce]])])),_:1}),(0,o.bF)(re,{class:"width-500"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",w,[(0,o.Lk)("div",N,[(0,o.Lk)("div",A,[(0,o.bF)(de,{class:"full-width"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",V,(0,i.v_)(e.$t("pages.fields_settings.formula")),1),(0,o.Lk)("div",E,[(0,o.bF)(se,{outlined:"",modelValue:this.strFormLayout,"onUpdate:modelValue":l[8]||(l[8]=e=>this.strFormLayout=e),type:"textarea"},null,8,["modelValue"])]),O,(0,o.Lk)("div",x,[(0,o.bo)((0,o.bF)(R,{label:e.$t("pages.user.save"),onClick:l[9]||(l[9]=l=>e.savePastedJson()),color:"primary",icon:"done"},null,8,["label"]),[[ce]]),(0,o.bF)(R,{outline:"",color:"primary",label:"Copy Json",class:"float-right",icon:"content_copy",onClick:l[10]||(l[10]=l=>e.copyTemplate())})])])),_:1})])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(ue)],64)}var q=t(92162),S=t(1659),R=t(24622),$=t(38734),P=t(46162),D=t(96056),U=t(8420),W=t(64233);const Q={class:"p-t-b-6 image_control_panel highlighted-back"},X={class:"row"},J={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},K={id:"field_scrolle"},H={class:"full-width"},z=["id"],G={class:"q-pt-sm q-pb-sm"},j={class:"row cursor-move"},Z={class:"col-sm-8 col-md-8 col-lg-8 q-pr-sm"},Y={class:"col-sm-4 col-md-4 col-lg-4"},ee={key:0,class:"full-width meta"},le=["onClick"],te={key:1,class:"full-width q-pa-xs height-24"};function oe(e,l,t,a,s,d){const r=(0,o.g2)("q-tooltip"),n=(0,o.g2)("q-icon"),m=(0,o.g2)("q-input"),u=(0,o.g2)("q-btn"),c=(0,o.g2)("draggable");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",Q,[(0,o.Lk)("div",X,[(0,o.Lk)("div",J,[(0,o.bF)(n,{name:"add_to_queue",size:"24px",class:"float-left q-mr-sm cursor-pointer",onClick:l[0]||(l[0]=l=>e.addGroup())},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("create_group")),1)])),_:1})])),_:1}),(0,o.bF)(n,{name:"img:images/save.svg",size:"24px",class:"float-right q-mr-sm cursor-pointer",onClick:l[1]||(l[1]=l=>e.$emit("saveTemplate",!0))},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("save")),1)])),_:1})])),_:1})])])]),(0,o.Lk)("div",K,[(0,o.Lk)("div",H,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.formLayout,((l,t)=>((0,o.uX)(),(0,o.CE)("div",{key:`div-${t}`,id:`div-${t}`,class:(0,i.C4)(["section-block dashed-border q-mb-md q-pa-sm display-inline-block",e.getElementBorder(l)]),style:(0,i.Tr)("width:"+e.getElementWidth(l)+"%")},[(0,o.Lk)("div",G,[(0,o.Lk)("div",j,[(0,o.Lk)("div",Z,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:l.title,"onUpdate:modelValue":e=>l.title=e,label:e.$t("group_title"),onClick:t=>e.inputClicked(l.name)},null,8,["modelValue","onUpdate:modelValue","label","onClick"])]),(0,o.Lk)("div",Y,[(0,o.bF)(u,{outline:"",round:"",size:"sm",color:"red-5",icon:"delete",class:"h-m-5 float-right",onClick:l=>e.deleteSection(t)},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("delete_group")),1)])),_:1})])),_:2},1032,["onClick"]),(0,o.bF)(u,{outline:"",round:"",size:"sm",color:"primary",icon:"move_up",class:"h-m-5 float-right",onClick:l=>e.moveGroupUp(l,t)},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("move_up")),1)])),_:1})])),_:2},1032,["onClick"]),(0,o.bF)(u,{outline:"",round:"",size:"sm",color:"primary",icon:"move_down",class:"h-m-5 float-right",onClick:l=>e.moveGroupDown(l,t)},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("move_down")),1)])),_:1})])),_:2},1032,["onClick"])])])]),e.isDefaultFieldLoaded?((0,o.uX)(),(0,o.CE)("div",ee,[(0,o.bF)(c,{modelValue:l.rows,"onUpdate:modelValue":e=>l.rows=e,class:"dragArea","item-key":"name",group:{name:"formbuilder",pull:!1,put:!0},sort:!0,"ghost-class":"sortable__ghost",onChange:e.itemAdded},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.rows,((l,a)=>((0,o.uX)(),(0,o.CE)("div",(0,o.v6)({key:a,ref_for:!0},l,{onClick:t=>e.inputClicked(l.name),class:["element_parent q-pa-sm cursor-move",(l.name==e.activeFieldName?"is--active  dashed-border":" ")+" display-block "+(l.tr_ocr_model_id?" text-primary ":" ")],style:"width:"+e.getElementWidth(l)+"%"}),[e.renderComponent?((0,o.uX)(),(0,o.Wv)((0,o.$y)(l.fieldType),{key:0,currentField:l,isReadOnly:!1,fieldName:l.name,groupIndex:t,elementIndex:"0",onInputClicked:e.inputClicked,onInputValueChanges:e.inputValueChanges,onUpdateModel:e.updateModel,class:"form__field"},null,40,["currentField","fieldName","groupIndex","onInputClicked","onInputValueChanges","onUpdateModel"])):(0,o.Q3)("",!0),l.name===e.activeFieldName?((0,o.uX)(),(0,o.CE)("div",te,[(0,o.bF)(u,{round:"",color:"primary",icon:"delete",size:"xs",class:"float-right delete-ele",onClick:l=>e.removeField(l,t)},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])):(0,o.Q3)("",!0)],16,le)))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):(0,o.Q3)("",!0)],14,z)))),128))])])],64)}var ie=t(85192),ae=t(76956),se=t(18505),de=t(94124),re=t(39231),ne=t(62409),me=t(99869),ue=t(66933);const ce={components:{},data(){return{fields:[{fieldType:ue.VV.TEXT_INPUT,icon:"images/text_icon.svg",label:"Label",name:"input_"+(0,ie.A)(),text:"Text",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:33,isDisabled:!1,clearable:!1,hideLabel:!1,translation_key:"Label",is_textarea:!1,run_script_on_change:!1,run_workflow_on_change:!1,tr_ocr_model_id:"",tabIndex:0,classes:""},{fieldType:ue.VV.LABEL,icon:"images/text_icon.svg",label:"Label",name:"input_"+(0,ie.A)(),text:"Label",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:30,isDisabled:!1,clearable:!1,hideLabel:!1,translation_key:"Label",classes:""},{fieldType:ue.VV.HORIZONTAL_SEPARATOR,icon:"images/horizontal_line.svg",name:"input_"+(0,ie.A)(),text:"Horizontal Separator",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:100,isDisabled:!1,clearable:!1,hideLabel:!1,space_from_top:"q-mt-lg",space_from_bottom:"",translation_key:"",classes:""},{fieldType:ue.VV.EXTRACTED_TABLE_TAB_PANELS,icon:"images/table.svg",name:"tab_panel_tables_"+(0,ie.A)(),label:"Label",text:"PO Tables",isDefaultField:!1,elementWidth:100,translation_key:"po_panel_tables"},{fieldType:ue.VV.DOCUMENT_APPROVER,icon:"settings/user.svg",name:"first_approver",text:"Document Approver",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:100,isDisabled:!1,clearable:!1,hideLabel:!1,space_from_top:"q-mt-lg",space_from_bottom:"",translation_key:"approver",classes:""},{fieldType:ue.VV.SECOND_APPROVER,icon:"settings/user.svg",name:"assigned_to",text:"Second Approver",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:100,isDisabled:!1,clearable:!1,hideLabel:!1,space_from_top:"q-mt-lg",space_from_bottom:"",translation_key:"releases_person",classes:""},{fieldType:ue.VV.BUTTON,icon:"images/button.svg",name:"button_"+(0,ie.A)(),label:"Button",text:"Button",type:ae.aH.save,isDefaultField:!1,elementWidth:50,translation_key:"BUTTON",appearance:"",classes:""}],CORRECTION_BUTTONS:{fieldType:ue.VV.CORRECTION_BUTTONS,icon:"images/button.svg",name:"button_"+(0,ie.A)(),label:"Button",text:"Button",type:ae.aH.save,isDefaultField:!1,elementWidth:50,translation_key:"BUTTON",appearance:"",classes:""},sortElementOptions:{group:{name:"formbuilder",pull:!1,put:!0},sort:!0},dropElementOptions:{group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,filter:".is-disabled"}}},methods:{}};var pe=t(33865),fe=t(88432),he=t(4225),ge=t(55133),_e=t(15995),be=t(23852),ve=t(72099);const ye=(0,o.pM)({el:"fields_designer",mixins:[se.A,R.A],emits:["showConnectionFromField","saveTemplate","markTableColumns"],props:{},data(){return{reRenderOnGroupChange:(0,$.KR)(0),CORRECTION_BUTTONS:(0,$.KR)(ce.data().CORRECTION_BUTTONS)}},components:{Label:ne.A,Button:me.A,TextInput:pe.A,SecondApprover:fe.A,DocumentApprover:_e.A,CorrectionButtons:ge.A,HorizontalSeparator:be.A,ExtractedTableTabPanels:ve.A,draggable:re.H},mounted:function(){document.addEventListener("add_field_to_designer",this.addFieldToDesigner),document.addEventListener("element_click",this.triggerFieldFocus)},unmounted:function(){document.removeEventListener("add_field_to_designer",this.addFieldToDesigner),document.removeEventListener("element_click",this.triggerFieldFocus)},methods:{itemAdded(e){if(!e.added)return;let l=e.added.element;if(this.keyToUpdateComponnets++,!l.hasOwnProperty("rows"))return void(this.formBuilderConfigModel[l.name]||this.updateModel(l));l.elementWidth=100,l.is_stcky_group=!1,l.right_border=!1,l.bottom_border=!1;let t=[];l.rows.forEach(((e,o)=>{e.forEach(((i,a)=>{l.name==ae.P.charges?i.elementWidth=43:i.elementWidth=this.calculateRowColSize(e.length),t.push(i),l.name==ae.P.charges&&(o+1)%2==0&&this.addCorrectionButtons(t)}))})),l.name==ae.P.charges&&l.rows.length%2!=0&&this.addCorrectionButtons(t),l.rows=[],l.rows=t,this.formLayout.pop(),this.formLayout.push(l)},addCorrectionButtons(e){let l=JSON.parse(JSON.stringify(this.CORRECTION_BUTTONS));l.elementWidth=14,l.name="button_"+(0,ie.A)(),e.push(l)},calculateRowColSize(e){return e>1?100/e:100},removeField(e,l){if(e.stopPropagation(),this.formBuilderConfigModel[this.activeFieldName]&&this.formBuilderConfigModel[this.activeFieldName].isDefaultField)for(let t of this.defaultFields)if(t.name===this.activeFieldName){t.isAlreadyAdded=!1;break}this.formLayout[l].rows=this.formLayout[l].rows.filter((e=>e.name!==this.activeFieldName)),this.removeChildElements(this.formBuilderConfigModel[this.activeFieldName]),delete this.formBuilderConfigModel[this.activeFieldName],delete this.formBuilderModel[this.activeFieldName],this.activeFieldName=""},removeChildElements(e){try{if(!e.hasOwnProperty("child_elements")||!Array.isArray(e.child_elements))return;for(let[l,t]of Object.entries(e.child_elements)){const e=t;delete this.formBuilderConfigModel[e.name],delete this.formBuilderModel[e.name]}}catch(l){}},triggerFieldFocus(e){this.inputClicked(e.detail)},inputClicked(e){this.activeTab="element_properties",this.activeFieldName=e,this.setTrOcrModeld(e)},setTrOcrModeld(e){this.formBuilderConfigModel[e].hasOwnProperty("tr_ocr_model_id")||(this.formBuilderConfigModel[e].tr_ocr_model_id="")},inputValueChanges(e,l){"checkbox"===l&&this.inputClicked(e),setTimeout((()=>{this.formBuilderModel[e].formatted_value=!1}),50)},updateModel(e,l=!1){if(this.formBuilderConfigModel[e.name]=JSON.parse(JSON.stringify(e)),e.hasOwnProperty("is_readonly")||(this.formBuilderConfigModel[e.name].is_readonly=!1),this.formBuilderModel[e.name]=[],this.formBuilderModel[e.name].page="",this.formBuilderModel[e.name].color="",this.formBuilderModel[e.name].score="",this.formBuilderModel[e.name].coords=[],this.formBuilderModel[e.name].confidence="",this.formBuilderModel[e.name].value="",this.formBuilderModel[e.name].formatted_value="",e.isDefaultField)for(let t of this.defaultFields)if(t.name===e.name){t.isAlreadyAdded=!0;break}l||(this.renderChildElements(e.name),this.activeFieldName=e.name)},addGroup(){const e={fieldType:he.VV.GROUP,name:"group_"+(0,ie.A)(),title:"",group_key:"",elementWidth:100,right_border:!1,bottom_border:!1,is_stcky_group:!1,short_cut_key_1:"",short_cut_key_2:"",rows:[]};this.formLayout.push(e),this.formBuilderConfigModel[e.name]=e},deleteSection(e){this.activeTab="form_elements",this.activeFieldName="",this.$nextTick((function(){this.formLayout.splice(e,1),this.reRenderOnGroupChange++}))},moveGroupUp(e,l){if(0==l)return;const t=l-1,o=JSON.parse(JSON.stringify(this.formLayout[l]));this.formLayout.splice(l,1),this.formLayout.splice(t,0,o),this.reRenderOnGroupChange++,this.$nextTick((function(){let e="div-"+t;document.getElementById(e).scrollIntoView()}))},moveGroupDown(e,l){if(this.formLayout.length==l)return;const t=l+1,o=JSON.parse(JSON.stringify(this.formLayout[l]));this.formLayout.splice(l,1),this.formLayout.splice(l+1,0,o),this.reRenderOnGroupChange++,this.$nextTick((function(){let e="div-"+t;document.getElementById(e).scrollIntoView()}))},getElementBorder(e){let l="";return this.formBuilderConfigModel.hasOwnProperty(e.name)?(l=this.formBuilderConfigModel[e.name].right_border?" border-right":"",l+=this.formBuilderConfigModel[e.name].bottom_border?" border-bottom":"",l):(l=e.right_border?" border-right":"",l+=e.bottom_border?" border-bottom":"",l)}},setup(){const e=(0,de.uL)(),{docType:l,activeTab:t,formLayout:o,defaultFields:i,formBuilderModel:a,formBuilderConfigModel:s,activeFieldName:d,keyToUpdateComponnets:r,renderComponent:n,isDefaultFieldLoaded:m}=(0,S.bP)(e),{getElementWidth:u,renderChildElements:c}=e;return{renderChildElements:c,docType:l,activeTab:t,formLayout:o,defaultFields:i,activeFieldName:d,renderComponent:n,formBuilderModel:a,isDefaultFieldLoaded:m,keyToUpdateComponnets:r,formBuilderConfigModel:s,getElementWidth:u}}});var ke=t(12807),Fe=t(50492),Le=t(97410),Ce=t(67837),Te=t(56384),Be=t(67156),Me=t(98582),we=t.n(Me);const Ne=(0,ke.A)(ye,[["render",oe],["__scopeId","data-v-36eedff2"]]),Ae=Ne;we()(ye,"components",{QIcon:Fe.A,QTooltip:Le.A,QInput:Ce.A,QBtn:Te.A,QField:Be.A});var Ve=t(14907),Ee=t(78652);const Oe={key:0,class:"full-width"},xe={class:"row"},Ie=["src"],qe={class:""};function Se(e,l,t,a,s,d){const r=(0,o.g2)("draggable");return e.filteredFields.length>0?((0,o.uX)(),(0,o.CE)("div",Oe,[(0,o.bF)(r,{list:e.filteredFields,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.filteredFields,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l,class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm cursor-pointer mt-5 border-radius-5px"},[(0,o.Lk)("div",xe,[(0,o.Lk)("img",{src:e.icon,width:"14",class:"q-mr-sm"},null,8,Ie),(0,o.Lk)("div",qe,(0,i.v_)(e.text),1)])])))),128))])),_:1},8,["list"])])):(0,o.Q3)("",!0)}const Re=(0,o.pM)({name:"Elements",components:{draggable:re.H},data(){return{fields:(0,$.KR)(ce.data().fields),dropElementOptions:ce.data().dropElementOptions}},mounted(){this.init()},methods:{init(){this.filteredFields=this.fields.filter((e=>0==e.hide_in_panel_list||void 0==e.hide_in_panel_list))},checkStopDragCondition(e){}},setup(){const e=(0,de.uL)(),{documentTables:l,documentTableNames:t}=(0,S.bP)(e),{getDocumentTables:o}=e;return{documentTables:l,documentTableNames:t,getDocumentTables:o,filteredFields:(0,$.KR)([])}}}),$e=(0,ke.A)(Re,[["render",Se],["__scopeId","data-v-c9ebda3c"]]),Pe=$e;we()(Re,"components",{QBtn:Te.A});var De=t(11470),Ue=t(64775);const We={class:"full-width"},Qe={class:"row"},Xe={class:""};function Je(e,l,t,a,s,d){const r=(0,o.g2)("q-icon"),n=(0,o.g2)("draggable");return(0,o.uX)(),(0,o.CE)("div",We,[(0,o.bF)(n,{list:e.defaultGroups,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.defaultGroups,((l,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm cursor-pointer mt-5 border-radius-5px"},[(0,o.Lk)("div",Qe,[(0,o.bF)(r,{name:"workspaces",size:"sm",class:"q-mr-sm"}),(0,o.Lk)("div",Xe,(0,i.v_)(e.getLabelForFormBuilder(l,"pages.screen2a.")),1)])])))),128))])),_:1},8,["list"])])}var Ke=t(25891);const He=(0,o.pM)({name:"GroupElements",mixins:[se.A,R.A,Ke.A],components:{draggable:re.H},data(){return{}},setup(){const e=(0,de.uL)(),{defaultGroups:l}=(0,S.bP)(e);return{defaultGroups:l}}}),ze=(0,ke.A)(He,[["render",Je],["__scopeId","data-v-f61a2cae"]]),Ge=ze;we()(He,"components",{QIcon:Fe.A,QBtn:Te.A});const je={class:"full-width"},Ze={class:"full-width"},Ye={class:"row"},el={class:"width-20px"},ll=["src"],tl={class:"width-100-10px"},ol={class:"full-width"},il={class:"full-width text-grey-6"};function al(e,l,t,a,s,d){const r=(0,o.g2)("q-input"),n=(0,o.g2)("draggable");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",je,[(0,o.bF)(r,{modelValue:e.searchInput,"onUpdate:modelValue":l[0]||(l[0]=l=>e.searchInput=l),class:"q-pt-md q-pb-md",dense:"",autofocus:"",label:e.$t("pages.user.search"),outlined:""},null,8,["modelValue","label"])]),(0,o.Lk)("div",Ze,[(0,o.bF)(n,{list:e.filteredFields,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.filteredFields,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l,class:"col-sm-12 col-md-12 col-lg-12 cursor-pointer q-pa-sm mt-5 border-radius-5px"},[(0,o.Lk)("div",Ye,[(0,o.Lk)("div",el,[(0,o.Lk)("img",{src:e.icon,width:"14"},null,8,ll)]),(0,o.Lk)("div",tl,[(0,o.Lk)("div",ol,(0,i.v_)(e.label),1),(0,o.Lk)("div",il,(0,i.v_)(" ("+e.field_name+")"),1)])])])))),128))])),_:1},8,["list"])])],64)}var sl=function(e,l,t,o){function i(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,a){function s(e){try{r(o.next(e))}catch(l){a(l)}}function d(e){try{r(o["throw"](e))}catch(l){a(l)}}function r(e){e.done?t(e.value):i(e.value).then(s,d)}r((o=o.apply(e,l||[])).next())}))};const dl=(0,o.pM)({name:"DefaultElements",mixins:[se.A,R.A,Ke.A],components:{draggable:re.H},data(){return{searchInput:""}},watch:{searchInput(e){for(let l of this.defaultFields)l.isSearched=""===e||null==e||l.label.toLowerCase().includes(e.toLowerCase())}},computed:{filteredFields(){return this.defaultFields.filter((e=>!e.isHidden&&e.isSearched&&!e.isAlreadyAdded))}},mounted(){this.init()},methods:{init(){return sl(this,void 0,void 0,(function*(){this.hideLoading();try{yield this.loadDocumentDefaultFields(this.$route.params.doc_type),this.isDefaultFieldLoaded=!0}catch(e){return void this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}))}},setup(){const e=(0,de.uL)(),{defaultFields:l,isDefaultFieldLoaded:t}=(0,S.bP)(e),{loadDocumentDefaultFields:o}=e;return{defaultFields:l,isDefaultFieldLoaded:t,loadDocumentDefaultFields:o}}}),rl=(0,ke.A)(dl,[["render",al],["__scopeId","data-v-40182137"]]),nl=rl;we()(dl,"components",{QInput:Ce.A,QBtn:Te.A});const ml=e=>((0,o.Qi)("data-v-3eac54b8"),e=e(),(0,o.jt)(),e),ul={key:0,class:"row"},cl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},pl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},fl={key:1,class:"col-sm-12 col-md-12 col-lg-12"},hl={class:"row"},gl={class:"row"},_l={key:2,class:"col-sm-12 col-md-12 col-lg-12"},bl={class:"row"},vl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},yl={class:"col-sm-12 col-md-12 col-lg-12"},kl={class:"col-sm-12 col-md-12 col-lg-12"},Fl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Ll={class:"col-sm-12 col-md-12 col-lg-12"},Cl={class:"col-sm-12 col-md-12 col-lg-12"},Tl={key:3,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Bl={class:"col-sm-12 col-md-12 col-lg-12"},Ml={class:"col-sm-12 col-md-12 col-lg-12"},wl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Nl={class:"col-sm-12 col-md-12 col-lg-12"},Al={class:"col-sm-12 col-md-12 col-lg-12"},Vl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},El={class:"col-sm-12 col-md-12 col-lg-12"},Ol={class:"col-sm-12 col-md-12 col-lg-12"},xl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Il={class:"col-sm-12 col-md-12 col-lg-12"},ql={class:"col-sm-12 col-md-12 col-lg-12"},Sl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Rl={class:"col-sm-12 col-md-12 col-lg-12"},$l={class:"col-sm-12 col-md-12 col-lg-12"},Pl={key:5,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Dl=ml((()=>(0,o.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Tab Index ",-1))),Ul={class:"col-sm-12 col-md-12 col-lg-12"},Wl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Ql={class:"col-sm-12 col-md-12 col-lg-12"},Xl={class:"col-sm-12 col-md-12 col-lg-12"},Jl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Kl={class:"col-sm-12 col-md-12 col-lg-12"},Hl={class:"col-sm-12 col-md-12 col-lg-12"};function zl(e,l,t,a,s,d){const r=(0,o.g2)("q-select"),n=(0,o.g2)("q-checkbox"),m=(0,o.g2)("q-input");return e.activeFieldName?((0,o.uX)(),(0,o.CE)("div",ul,[e.isButtonType()?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("div",cl,[(0,o.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].type,"onUpdate:modelValue":l[0]||(l[0]=l=>e.formBuilderConfigModel[e.activeFieldName].type=l),options:e.buttonTypes,label:"Select Button Type",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])]),(0,o.Lk)("div",pl,[(0,o.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].appearance,"onUpdate:modelValue":l[1]||(l[1]=l=>e.formBuilderConfigModel[e.activeFieldName].appearance=l),options:e.appearanceList,label:"Select Button Appearance",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])],64)):(0,o.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT?((0,o.uX)(),(0,o.CE)("div",fl,[(0,o.Lk)("div",hl,[(0,o.bF)(n,{modelValue:e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft,"onUpdate:modelValue":l[2]||(l[2]=l=>e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft=l),label:e.$t("display_label_left")},null,8,["modelValue","label"])]),(0,o.Lk)("div",gl,[(0,o.bF)(n,{modelValue:e.formBuilderConfigModel[e.activeFieldName].is_textarea,"onUpdate:modelValue":l[3]||(l[3]=l=>e.formBuilderConfigModel[e.activeFieldName].is_textarea=l),label:e.$t("is_textarea")},null,8,["modelValue","label"])])])):(0,o.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT||e.formBuilderConfigModel[e.activeFieldName].fieldType===e.DOCUMENT_APPROVER||e.formBuilderConfigModel[e.activeFieldName].fieldType===e.SECOND_APPROVER?((0,o.uX)(),(0,o.CE)("div",_l,[(0,o.Lk)("div",bl,[(0,o.bF)(n,{modelValue:e.formBuilderConfigModel[e.activeFieldName].is_readonly,"onUpdate:modelValue":l[4]||(l[4]=l=>e.formBuilderConfigModel[e.activeFieldName].is_readonly=l),label:e.$t("is_readonly")},null,8,["modelValue","label"])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",vl,[(0,o.Lk)("div",yl,(0,i.v_)(e.$t("label")),1),(0,o.Lk)("div",kl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].label,"onUpdate:modelValue":l[5]||(l[5]=l=>e.formBuilderConfigModel[e.activeFieldName].label=l),disable:e.formBuilderConfigModel[e.activeFieldName].isDefaultField,onBlur:l[6]||(l[6]=l=>e.updateFieldName(e.activeFieldName))},null,8,["modelValue","disable"])])]),(0,o.Lk)("div",Fl,[(0,o.Lk)("div",Ll,(0,i.v_)(e.$t("field_name")),1),(0,o.Lk)("div",Cl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].name,"onUpdate:modelValue":l[7]||(l[7]=l=>e.formBuilderConfigModel[e.activeFieldName].name=l),disable:e.formBuilderConfigModel[e.activeFieldName].isDefaultField,onBlur:l[8]||(l[8]=l=>e.onFieldNameFocusLose(e.activeFieldName))},null,8,["modelValue","disable"])])]),e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft?((0,o.uX)(),(0,o.CE)("div",Tl,[(0,o.Lk)("div",Bl,(0,i.v_)(e.$t("label_width_percentage")),1),(0,o.Lk)("div",Ml,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].labelWidth,"onUpdate:modelValue":l[9]||(l[9]=l=>e.formBuilderConfigModel[e.activeFieldName].labelWidth=l),type:"number",rules:[l=>l>=3&&l<=100||e.$t("label_length_between_3_100")]},null,8,["modelValue","rules"])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",wl,[(0,o.Lk)("div",Nl,(0,i.v_)(e.$t("element_width_percentage")),1),(0,o.Lk)("div",Al,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].elementWidth,"onUpdate:modelValue":[l[10]||(l[10]=l=>e.formBuilderConfigModel[e.activeFieldName].elementWidth=l),l[11]||(l[11]=l=>{e.handleElementWidth(l)})],disable:e.formBuilderConfigModel[e.activeFieldName].fieldType===e.HORIZONTAL_SEPARATOR,type:"number",rules:[l=>l>=3&&l<=100||e.$t("field_length_between_3_100")]},null,8,["modelValue","disable","rules"])])]),(0,o.Lk)("div",Vl,[(0,o.Lk)("div",El,(0,i.v_)(e.$t("element_width_percentage")),1),(0,o.Lk)("div",Ol,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].classes,"onUpdate:modelValue":l[12]||(l[12]=l=>e.formBuilderConfigModel[e.activeFieldName].classes=l),label:"Enter style classes with space"},null,8,["modelValue"])])]),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.HORIZONTAL_SEPARATOR?((0,o.uX)(),(0,o.CE)(o.FK,{key:4},[(0,o.Lk)("div",xl,[(0,o.Lk)("div",Il,(0,i.v_)(e.$t("space_from_top")),1),(0,o.Lk)("div",ql,[(0,o.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].space_from_top,"onUpdate:modelValue":l[13]||(l[13]=l=>e.formBuilderConfigModel[e.activeFieldName].space_from_top=l),options:e.spaceFromTopList,label:e.$t("space_from_top"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])]),(0,o.Lk)("div",Sl,[(0,o.Lk)("div",Rl,(0,i.v_)(e.$t("space_from_bottom")),1),(0,o.Lk)("div",$l,[(0,o.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].space_from_bottom,"onUpdate:modelValue":l[14]||(l[14]=l=>e.formBuilderConfigModel[e.activeFieldName].space_from_bottom=l),options:e.spaceFromBottomList,label:e.$t("space_from_bottom"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])])],64)):(0,o.Q3)("",!0),e.renderTabIndexField()?((0,o.uX)(),(0,o.CE)("div",Pl,[Dl,(0,o.Lk)("div",Ul,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tabIndex,"onUpdate:modelValue":l[15]||(l[15]=l=>e.formBuilderConfigModel[e.activeFieldName].tabIndex=l),type:"number"},null,8,["modelValue"])])])):(0,o.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT?((0,o.uX)(),(0,o.CE)(o.FK,{key:6},[(0,o.Lk)("div",Wl,[(0,o.Lk)("div",Ql,(0,i.v_)(e.$t("field_length")),1),(0,o.Lk)("div",Xl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].length,"onUpdate:modelValue":l[16]||(l[16]=l=>e.formBuilderConfigModel[e.activeFieldName].length=l),type:"number"},null,8,["modelValue"])])]),(0,o.Lk)("div",Jl,[(0,o.Lk)("div",Kl,(0,i.v_)(e.$t("banned_keywords")),1),(0,o.Lk)("div",Hl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].banned_keywords,"onUpdate:modelValue":l[17]||(l[17]=l=>e.formBuilderConfigModel[e.activeFieldName].banned_keywords=l),label:e.$t("comma_seperated_keywords")},null,8,["modelValue","label"])])])],64)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)}const Gl=(0,o.pM)({name:"Properties",mixins:[D.A,R.A],components:{},data(){return{rowIndex:(0,$.KR)(0),columnIndex:(0,$.KR)(0),isColumnMode:(0,$.KR)(!0),selectedInput:(0,$.KR)(""),BUTTON:ue.VV.BUTTON,TEXT_INPUT:ue.VV.TEXT_INPUT,HORIZONTAL_SEPARATOR:ue.VV.HORIZONTAL_SEPARATOR,DOCUMENT_APPROVER:ue.VV.DOCUMENT_APPROVER,SECOND_APPROVER:ue.VV.SECOND_APPROVER}},watch:{activeFieldName(e,l){e!=l&&(this.rowIndex=0,this.columnIndex=0,this.isColumnMode=!1)}},mounted:function(){this.getModelList(),this.prepareButtonTypes(),document.addEventListener("load_settings",this.loadSettings),document.addEventListener("load_settings_for_series",this.loadSettingsForSeries)},unmounted:function(){document.removeEventListener("load_settings",this.loadSettings),document.removeEventListener("load_settings_for_series",this.loadSettingsForSeries)},methods:{addOption(){const e={label:"Option",value:"op"};this.formBuilderConfigModel[this.activeFieldName].options.push(e)},removeOption(e){this.formBuilderConfigModel[this.activeFieldName].options.splice(e,1)},setOptionValue(e){this.formBuilderConfigModel[this.activeFieldName].options[e].value=this.stringReplaceWithString(this.formBuilderConfigModel[this.activeFieldName].options[e].label," ","")},loadSettings(e){this.rowIndex=e.detail.rowIndex,this.columnIndex=e.detail.columnIndex,this.isColumnMode=e.detail.isColumnMode},loadSettingsForSeries(e){const l=e.detail;if(l)for(const[t,o]of Object.entries(this.formBuilderConfigModel[this.activeFieldName].columns)){const e=o;if(e.col_id===l){this.columnIndex=+t;break}}},onFieldNameFocusLose(e){const l=this.formBuilderConfigModel[e].name;if(l!==e)if(this.validateField(l)){e:for(const t of this.formLayout)for(let o of t.rows)if(o.name===e){o.name=l;for(const[l,t]of Object.entries(this.formBuilderConfigModel[e]))"name"!==l&&(o[l]=t);break e}this.formBuilderConfigModel[l]={},this.formBuilderConfigModel[l]=JSON.parse(JSON.stringify(this.formBuilderConfigModel[e])),this.formBuilderModel[l]={},this.formBuilderModel[l]=JSON.parse(JSON.stringify(this.formBuilderModel[e])),this.activeFieldName=l,delete this.formBuilderModel[e],delete this.formBuilderConfigModel[e]}else this.formBuilderConfigModel[e].name=e},validateField(e){let l=!0;return""===e||null===e?(l=!1,this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY"))):this.hasWhiteSpace(e)?(l=!1,this.showErrorToast(this.$t("pages.messages.SPACES_NOT_ALLOWED"))):this.checkFirstLetterIsSpecialOrNumber(e)&&(l=!1,this.showErrorToast(this.$t("errors.special_letter_number_not_allowed"))),l},updateFieldName(e){const l=this.stringReplaceWithString(this.formBuilderConfigModel[e].label," ","_");l!==e&&(this.formBuilderConfigModel[e].name=l,this.onFieldNameFocusLose(e))},handleElementWidth(e){e>100?(this.formBuilderConfigModel[this.activeFieldName].elementWidth=100,this.showErrorToast(this.$t("field_length_between_3_100"))):e<3&&(this.formBuilderConfigModel[this.activeFieldName].elementWidth=3,this.showErrorToast(this.$t("field_length_between_3_100")))},renderModelDropdown(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.TEXT_INPUT},onUpdateTROCRModel(){var e;const l=(0,q.$)("#"+this.activeFieldName);l&&(null===(e=l.closest(".element_parent"))||void 0===e||e.classList.toggle("text-primary"))},onColumnUpdateTROCRModel(e,l){const t=(0,q.$)("#col_"+e);t&&(l?t.classList.add("text-primary"):t.classList.remove("text-primary"))},renderTabIndexField(){return this.TEXT_INPUT===this.formBuilderConfigModel[this.activeFieldName].fieldType},onListOfValueSelect(e){e||(this.formBuilderConfigModel[this.activeFieldName].enforce_list_of_values=!1)},isRunScriptEnabled(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.TEXT_INPUT},isButtonType(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.BUTTON},prepareButtonTypes(){this.buttonTypes=[{label:this.$t("save"),value:ae.aH.save},{label:this.$t("request_release"),value:ae.aH.request_release},{label:this.$t("reject"),value:ae.aH.reject},{label:this.$t("in_review"),value:ae.aH.in_review},{label:this.$t("restart_workflow"),value:ae.aH.restart_workflow},{label:this.$t("view_summery"),value:ae.aH.view_summery}]}},setup(){const e=(0,de.uL)(),{activeFieldName:l,formBuilderModel:t,formBuilderConfigModel:o,formLayout:i}=(0,S.bP)(e),a=(0,de.cY)(),{getModelList:s}=a,{model_list:d}=(0,S.bP)(a);return{model_list:d,formLayout:i,activeFieldName:l,formBuilderModel:t,formBuilderConfigModel:o,buttonTypes:(0,$.KR)([]),appearanceList:[{label:"Filled Button",value:""},{label:"Outline",value:"secondary"},{label:"Danger",value:"negative-tertiary"}],shortCutKeyList:[{label:"Shift",value:"shift"},{label:"Alt",value:"alt"}],spaceFromTopList:[{label:"None",value:""},{label:"Extra Small",value:"q-mt-xs"},{label:"Small",value:"q-mt-sm"},{label:"Medium",value:"q-mt-md"},{label:"Large",value:"q-mt-lg"},{label:"Extra Large",value:"q-mt-xl"}],spaceFromBottomList:[{label:"None",value:""},{label:"Extra Small",value:"q-mb-xs"},{label:"Small",value:"q-mb-sm"},{label:"Medium",value:"q-mb-md"},{label:"Large",value:"q-mb-lg"},{label:"Extra Large",value:"q-mb-xl"}],getModelList:s}}});var jl=t(94940),Zl=t(80460);const Yl=(0,ke.A)(Gl,[["render",zl],["__scopeId","data-v-3eac54b8"]]),et=Yl;we()(Gl,"components",{QSelect:jl.A,QCheckbox:Zl.A,QInput:Ce.A});var lt=t(26652);const tt={getDetailViewRoute(e){let l="";try{l="/manage_approval_layout_builder_v2/"+e.doc_type_key,e.layout_type&&(l+="/"+e.layout_type),e.layout_template_id&&(l+="/"+e.layout_template_id),e.sub_doc_type_key&&(l+="?sub_doc_type="+e.sub_doc_type_key)}catch(t){}return l}};var ot=function(e,l,t,o){function i(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,a){function s(e){try{r(o.next(e))}catch(l){a(l)}}function d(e){try{r(o["throw"](e))}catch(l){a(l)}}function r(e){e.done?t(e.value):i(e.value).then(s,d)}r((o=o.apply(e,l||[])).next())}))};const it=(0,o.pM)({el:"#main",mixins:[se.A,R.A,W.A,D.A],components:{helpLayoutbuilder:lt.A,DefaultElements:nl,FieldsDesigner:Ae,DefaultGroups:Ge,Properties:et,Elements:Pe,Loader:U.A},watch:{$route(e,l){this.renderComponent=!1,this.isFormBuilderMode=!1,this.defaultFields=[],this.formBuilderModel=[],this.formBuilderConfigModel=[],this.activeTab="form_elements",this.activeFieldName=""}},data(){return{imageIndex:0,templateId:(0,$.KR)(""),subDocType:(0,$.KR)(""),baseUrl:"",page:(0,$.KR)(1),imageHeight:0,imageWidth:200,connectionId:"",componentType:"input",keyImageChange:(0,$.KR)(0),formSplitterModel:(0,$.KR)(50),showJsonForm:(0,$.KR)(!1),strFormLayout:(0,$.KR)(""),markedAreasStr:"",allowMultiSelection:!1,language_origin:(0,$.KR)("")}},mounted:function(){this.keyToUpdateComponnets=0,this.renderComponent=!0,this.isFormBuilderMode=!0,this.formBuilderModel=[],this.formBuilderConfigModel=[],this.docType=this.$route.params.doc_type,this.templateId=this.$route.params.id,this.setSubDocType(),this.baseUrl=P.VA,this.prepareLanguageOriginList(),this.formLayout=[],this.templateId?this.init():(this.formLayoutImages=[],this.saveTemplate(!0))},methods:{init(){return ot(this,void 0,void 0,(function*(){this.templateId=this.$route.params.id,this.templateId&&(yield this.loadLayoutTemplateById(),this.initImage())}))},loadLayoutTemplateById(){return ot(this,void 0,void 0,(function*(){let e;try{this.showLoading(),e=yield De.H7.getDocumentLayoutTemplateById(this.templateId),this.language_origin=e.doc_origin;let l=JSON.parse(e.layout_json);l&&(this.formLayout=l.hasOwnProperty("layout")?l.layout:[],l.hasOwnProperty("images")&&l.images.length>0&&(this.formLayoutImages=l.images),this.proximityTokens=l.proximity_tokens)}catch(l){return void this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}))},initImage(){let e=(0,q.$)("#image_container");this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight},setSubDocType(){this.$route.query&&this.$route.query.sub_doc_type&&(this.subDocType=String(this.$route.query.sub_doc_type||""))},zoomOut(){this.imageWidth>200&&(this.imageWidth=this.imageWidth-100)},zoomIn(){this.imageWidth=this.imageWidth+100},prepareFormBuilderJson(){for(let[e,l]of this.formLayout.entries()){this.formBuilderConfigModel.hasOwnProperty(l.name)&&(l.elementWidth=this.formBuilderConfigModel[l.name].elementWidth,l.right_border=this.formBuilderConfigModel[l.name].right_border,l.bottom_border=this.formBuilderConfigModel[l.name].bottom_border,l.is_stcky_group=this.formBuilderConfigModel[l.name].is_stcky_group,l.short_cut_key_1=this.formBuilderConfigModel[l.name].short_cut_key_1,l.short_cut_key_2=this.formBuilderConfigModel[l.name].short_cut_key_2,l.is_panel_section_group=this.formBuilderConfigModel[l.name].is_panel_section_group);for(let e of l.rows)Object.assign(e,this.formBuilderConfigModel[e.name])}this.$forceUpdate()},getLayoutJsonStr(){const e={layout:this.formLayout,images:this.formLayoutImages,proximity_tokens:this.proximityTokens};return JSON.stringify(e)},copyTemplate(){(0,Ee.A)(this.getLayoutJsonStr()).then((()=>{this.showSuccessToast("Copied!")}))},openJsonForm(){this.strFormLayout=this.getLayoutJsonStr(),this.showJsonForm=!0},savePastedJson(){if(this.strFormLayout){let e=JSON.parse(this.strFormLayout);this.formLayout=e.hasOwnProperty("layout")?e.layout:[],e.hasOwnProperty("images")&&e.images.length>0&&(this.formLayoutImages=e.images),this.proximityTokens=e.proximity_tokens}this.saveTemplate(!1)},createTemplateAccordingToOrigin(){this.templateId="",this.saveTemplate(!0)},saveTemplate(e,l=!0){return ot(this,void 0,void 0,(function*(){let t;e&&this.prepareFormBuilderJson();try{this.showLoading();const e=this.$route.params.layout_type;let o={doc_type_key:this.docType,sub_doc_type_key:this.subDocType||"",title:"form builder",layout_json:this.getLayoutJsonStr(),layout_type:e};this.templateId?t=yield De.H7.updateDocumentLayoutTemplateById(o,this.templateId):(o.doc_origin=this.language_origin,t=yield De.H7.createDocumentLayoutTemplate(o)),t&&l&&this.showSuccessToast("Template Sucessfully saved"),this.templateId=t.id,this.$forceUpdate(),this.refreshView(e)}catch(o){return void this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}))},refreshView(e){const l=tt.getDetailViewRoute({doc_type_key:this.docType||"",layout_template_id:this.templateId||"",sub_doc_type_key:this.subDocType||"",layout_type:e});this.$router.push(l)},restoreDefaults(){return ot(this,void 0,void 0,(function*(){try{if(!this.templateId)return;this.showLoading();const e=yield De.H7.deleteDocumentLayoutTemplate(this.templateId);if(!1===e.success)throw{message:e.message};this.showSuccessToast(this.$t("pages.messages.operation_sucessfull")),this.templateId="",this.saveTemplate(!0,!1)}catch(e){const l=Ue.t.getErrorMessage(e);this.showErrorToast(l)}finally{this.hideLoading()}}))},prepareLanguageOriginList(){return ot(this,void 0,void 0,(function*(){yield this.getLanguageIfEmpty(),this.language_origin_list=JSON.parse(JSON.stringify(this.language_origins)),this.language_origin_list[0].label=this.$t("default")}))}},setup(){const e=(0,Ve.A)(),l=(0,de.uL)(),{activeTab:t,isFormBuilderMode:o,keyToUpdateComponnets:i,renderComponent:a,defaultFields:s,formLayout:d,formLayoutImages:r,formBuilderModel:n,formBuilderConfigModel:m,activeFieldName:u,proximityTokens:c,docType:p}=(0,S.bP)(l),f=(0,de.QJ)(),{language_origins:h}=(0,S.bP)(f),{getLanguageIfEmpty:g}=f,_=(0,de._6)(),{tokenQueryParam:b}=(0,S.bP)(_);return _.getTokenQueryParam(),{getLanguageIfEmpty:g,docType:p,activeTab:t,formLayout:d,defaultFields:s,activeFieldName:u,renderComponent:a,formLayoutImages:r,formBuilderModel:n,isFormBuilderMode:o,keyToUpdateComponnets:i,formBuilderConfigModel:m,proximityTokens:c,language_origins:h,language_origin_list:(0,$.KR)([]),tokenQueryParam:b,showNotification(l){e.notify({message:l,color:"primary",position:"top"})}}}});var at=t(90124),st=t(25173),dt=t(13796),rt=t(42980),nt=t(10327),mt=t(10386),ut=t(39041),ct=t(71746),pt=t(88841),ft=t(98072),ht=t(82156),gt=t(23316),_t=t(36914),bt=t(39150),vt=t(44189),yt=t(49200),kt=t(88672);const Ft=(0,ke.A)(it,[["render",I],["__scopeId","data-v-04f8d176"]]),Lt=Ft;we()(it,"components",{QBtn:Te.A,QIcon:Fe.A,QSelect:jl.A,QItem:at.A,QItemSection:st.A,QItemLabel:dt.A,QTooltip:Le.A,QTabs:rt.A,QTab:nt.A,QSeparator:mt.A,QTabPanels:ut.A,QTabPanel:ct.A,QExpansionItem:pt.A,QSplitter:ft.A,QDialog:ht.A,QCard:gt.A,QToolbar:_t.A,QToolbarTitle:bt.A,QCardSection:vt.A,QForm:yt.A,QInput:Ce.A,QField:Be.A}),we()(it,"directives",{ClosePopup:kt.A})}}]);