"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[842],{90842:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ea});var r=a(61758),i=a(58790),s=a(29104);const l=e=>((0,r.Qi)("data-v-114eaa64"),e=e(),(0,r.jt)(),e),n={class:"dashboard-container dashboard-text-color dashboard-main"},o={class:"full-width dashboard-list-area q-my-lg"},p={class:"text-item",style:{"text-transform":"capitalize"}},d={class:"text-item",style:{"text-transform":"capitalize"}},u={class:"dashboard-status-text pa-2"},c={key:1},_={key:2},g={key:3,class:"text-item"},m=l((()=>(0,r.Lk)("div",{class:"box loading-shimmer"},null,-1))),h=["data-index","onDragstart","onDrop","onDragover"],f=["colspan"],v={class:"back-white flex justify-end"},b={class:"row",style:{"margin-right":"0"}},y={class:"text-weight-bold"},k=l((()=>(0,r.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1)));function F(e,t,a,l,F,S){const E=(0,r.g2)("SubHeader"),C=(0,r.g2)("DashboardHeader"),L=(0,r.g2)("q-separator"),q=(0,r.g2)("ColumnOrderBy"),x=(0,r.g2)("q-th"),A=(0,r.g2)("q-tr"),D=(0,r.g2)("q-badge"),w=(0,r.g2)("q-tooltip"),V=(0,r.g2)("q-td"),$=(0,r.g2)("q-item-section"),P=(0,r.g2)("q-item"),N=(0,r.g2)("q-list"),R=(0,r.g2)("q-menu"),Q=(0,r.g2)("q-btn"),O=(0,r.g2)("q-table"),M=(0,r.g2)("q-markup-table"),K=(0,r.g2)("PaginationSettings"),I=(0,r.g2)("q-pagination"),X=(0,r.g2)("q-toolbar-title"),T=(0,r.g2)("q-toolbar"),W=(0,r.g2)("q-icon"),B=(0,r.g2)("q-select"),U=(0,r.g2)("q-input"),G=(0,r.g2)("q-card-section"),z=(0,r.g2)("f-btn"),j=(0,r.g2)("q-card-actions"),J=(0,r.g2)("q-card"),H=(0,r.g2)("q-dialog"),Y=(0,r.g2)("q-inner-loading"),Z=(0,r.gN)("ripple"),ee=(0,r.gN)("close-popup");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(E,{name:"supplier_dashboard",label:e.$t("supplier_management"),show_expiry_alert:!0,onSearch:!1},null,8,["label"]),(0,r.Lk)("div",n,[(0,r.bF)(C),(0,r.bF)(L,{class:"seperator"}),(0,r.Lk)("div",o,[e.display_data.length>0?((0,r.uX)(),(0,r.Wv)(O,{key:0,class:(0,i.C4)("main-table dashboard-table-style dashboard-table-height back-white"),rows:Object.values(e.display_data),"rows-per-page-options":[0],columns:e.tableColumns,"row-key":"id",flat:"","hide-bottom":"","no-data-label":e.$t("pages.messages.no_record_found"),id:"supplier_table"},{header:(0,r.k6)((t=>[(0,r.bF)(A,{props:t},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.cols,((a,l)=>((0,r.uX)(),(0,r.Wv)(x,{key:a.name,props:t,"data-index":l,draggable:"true",dropzone:"true",direction:"horizontal",onDragstart:t=>e.onDragStart(t,e.tableColumns,l),onDrop:(0,s.D$)((t=>e.handleDrop(t,l)),["prevent"]),onDragover:(0,s.D$)((t=>e.onDragOver(t,l)),["prevent"]),onDragenter:(0,s.D$)(e.onDragEnter,["prevent"]),onDragleave:(0,s.D$)(e.onDragLeave,["prevent"]),style:(0,i.Tr)([{cursor:e.getIsDragging?"pointer":"move"},{"text-align":"left"}])},{default:(0,r.k6)((()=>[(0,r.Lk)("span",p,(0,i.v_)(e.$t(a.label)),1),a.actions?((0,r.uX)(),(0,r.Wv)(q,{key:0,type_name:e.type_name,column_name:a.field},null,8,["type_name","column_name"])):(0,r.Q3)("",!0)])),_:2},1032,["props","data-index","onDragstart","onDrop","onDragover","onDragenter","onDragleave","style"])))),128)),(0,r.bF)(x,null,{default:(0,r.k6)((()=>[(0,r.Lk)("span",d,(0,i.v_)(e.$t("action")),1)])),_:1})])),_:2},1032,["props"])])),body:(0,r.k6)((a=>[e.show_table_loader?((0,r.uX)(),(0,r.Wv)(A,{key:1},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.tableColumns.length+5,(e=>((0,r.uX)(),(0,r.Wv)(V,{key:e},{default:(0,r.k6)((()=>[m])),_:1})))),128))])),_:1})):((0,r.uX)(),(0,r.Wv)(A,{key:0,props:a},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.cols,(t=>((0,r.uX)(),(0,r.Wv)(V,{key:t.name,props:a,class:(0,i.C4)(e.setRowStyle(a.row)+" cursor-pointer"),style:{"text-align":"left"},onClick:t=>e.navigate(a.row)},{default:(0,r.k6)((()=>["status"==t.field?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.Lk)("span",null,[(0,r.bF)(D,{align:"middle",class:(0,i.C4)(e.getStatusClass(t.value))},{default:(0,r.k6)((()=>[(0,r.Lk)("span",u,(0,i.v_)(e.getStatusByValue(t.value)),1)])),_:2},1032,["class"])]),(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.getStatusByValue(t.value)),1)])),_:2},1024)],64)):"supplier_type"==t.field?((0,r.uX)(),(0,r.CE)("div",c,(0,i.v_)(e.getSupplierGroupLabelByValue(t.value)),1)):"last_modified_on"==t.field?((0,r.uX)(),(0,r.CE)("div",_,(0,i.v_)(e.formatDateAccordingToPreference(t.value)),1)):((0,r.uX)(),(0,r.CE)("div",g,(0,i.v_)(t.value),1))])),_:2},1032,["props","class","onClick"])))),128)),(0,r.bF)(V,null,{default:(0,r.k6)((()=>[(0,r.bF)(Q,{flat:"",dense:"",round:"",onClick:t[0]||(t[0]=(0,s.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,r.k6)((()=>[(0,r.bF)(R,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,r.k6)((()=>[(0,r.bF)(N,{dense:"",style:{"min-width":"100px"}},{default:(0,r.k6)((()=>[(0,r.bo)(((0,r.uX)(),(0,r.Wv)(P,{clickable:""},{default:(0,r.k6)((()=>[(0,r.bF)($,{onClick:t=>e.openMagicLink(a.row)},{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.$t("magic_link")),1)])),_:2},1032,["onClick"])])),_:2},1024)),[[Z]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"]))])),_:1},8,["rows","columns","no-data-label"])):(0,r.Q3)("",!0),0==e.display_data.length?((0,r.uX)(),(0,r.Wv)(M,{key:1,class:(0,i.C4)("main-table dashboard-table-style back-white"),flat:"","hide-bottom":"",actions:!0,id:"supplier_table"},{default:(0,r.k6)((()=>[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.tableColumns,((a,l)=>((0,r.uX)(),(0,r.CE)("th",{key:a.name,"data-index":l,draggable:"true",dropzone:"true",direction:"horizontal",onDragstart:t=>e.onDragStart(t,e.tableColumns,l),onDrop:(0,s.D$)((t=>e.handleDrop(t,l)),["prevent"]),onDragover:(0,s.D$)((t=>e.onDragOver(t,l)),["prevent"]),onDragenter:t[1]||(t[1]=(0,s.D$)(((...t)=>e.onDragEnter&&e.onDragEnter(...t)),["prevent"])),onDragleave:t[2]||(t[2]=(0,s.D$)(((...t)=>e.onDragLeave&&e.onDragLeave(...t)),["prevent"])),style:(0,i.Tr)([{cursor:e.getIsDragging?"pointer":"move"},{"text-align":"left"}])},(0,i.v_)(e.$t(a.label)),45,h)))),128))]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",{class:"text-center",colspan:e.tableColumns.length},(0,i.v_)(e.$t("pages.messages.no_record_found")),9,f)])])])),_:1})):(0,r.Q3)("",!0),(0,r.Lk)("div",v,[(0,r.Lk)("div",b,[(0,r.bF)(K,{class:"q-py-xs q-mr-md"}),(0,r.bF)(I,{modelValue:e.pagination.current_page,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.pagination.current_page=t),t[4]||(t[4]=t=>e.paginationItemClicked())],color:"primary",max:e.pagination.total_pages,class:"q-py-xs q-mx-md","max-pages":6,input:"","boundary-links":""},null,8,["modelValue","max"])])])])]),(0,r.bF)(H,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[10]||(t[10]=t=>e.dialogVisible=t),onBeforeHide:e.hideMagicLinkDialog},{default:(0,r.k6)((()=>[(0,r.bF)(J,{class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(T,{class:"text-white secondary-toolbar"},{default:(0,r.k6)((()=>[(0,r.bF)(X,null,{default:(0,r.k6)((()=>[(0,r.Lk)("span",y,(0,i.v_)(e.$t("magic_link")),1)])),_:1}),(0,r.bo)((0,r.bF)(Q,{flat:"",round:"",dense:"",icon:"close"},null,512),[[ee]])])),_:1}),(0,r.bF)(G,{class:"row"},{default:(0,r.k6)((()=>[(0,r.bF)(B,{modelValue:e.sppGroup,"onUpdate:modelValue":t[5]||(t[5]=t=>e.sppGroup=t),label:e.$t("supplier_register_form.field.supplier_group"),outlined:"",dense:"",class:"col-12 card-padding",options:e.supplierOptionList,"map-options":"","emit-value":""},{append:(0,r.k6)((()=>[e.sppGroupError?((0,r.uX)(),(0,r.Wv)(W,{key:0,color:"red",name:"error"},{default:(0,r.k6)((()=>[(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.sppGroupError),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1},8,["modelValue","label","options"]),(0,r.bF)(U,{modelValue:e.sppOrgName,"onUpdate:modelValue":t[6]||(t[6]=t=>e.sppOrgName=t),label:e.$t("supplier_register_form.field.supplier_name"),outlined:"",dense:"",class:"col-12 card-padding"},{append:(0,r.k6)((()=>[e.sppNameError?((0,r.uX)(),(0,r.Wv)(W,{key:0,color:"red",name:"error"},{default:(0,r.k6)((()=>[(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.sppNameError),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1},8,["modelValue","label"]),(0,r.bF)(U,{modelValue:e.responderFirstName,"onUpdate:modelValue":t[7]||(t[7]=t=>e.responderFirstName=t),label:e.$t("supplier_responder_first_name"),outlined:"",dense:"",class:"col-12 card-padding"},{append:(0,r.k6)((()=>[e.responderFirstNameError?((0,r.uX)(),(0,r.Wv)(W,{key:0,color:"red",name:"error"},{default:(0,r.k6)((()=>[(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.responderFirstNameError),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1},8,["modelValue","label"]),(0,r.bF)(U,{modelValue:e.responderName,"onUpdate:modelValue":t[8]||(t[8]=t=>e.responderName=t),label:e.$t("supplier_responder_last_name"),outlined:"",dense:"",class:"col-12 card-padding"},{append:(0,r.k6)((()=>[e.responderNameError?((0,r.uX)(),(0,r.Wv)(W,{key:0,color:"red",name:"error"},{default:(0,r.k6)((()=>[(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.responderNameError),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1},8,["modelValue","label"]),(0,r.bF)(U,{modelValue:e.responderEmail,"onUpdate:modelValue":t[9]||(t[9]=t=>e.responderEmail=t),label:e.$t("supplier_responder_email"),outlined:"",dense:"",class:"col-12 card-padding"},{append:(0,r.k6)((()=>[e.responderEmailError?((0,r.uX)(),(0,r.Wv)(W,{key:0,color:"red",name:"error"},{default:(0,r.k6)((()=>[(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.responderEmailError),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1},8,["modelValue","label"])])),_:1}),(0,r.bF)(j,{align:"right"},{default:(0,r.k6)((()=>[(0,r.bo)((0,r.bF)(z,{label:e.$t("cancel"),appearance:"cancel"},null,8,["label"]),[[ee]]),(0,r.bF)(z,{onClick:e.sendMagicLink,class:"q-mr-sm",label:e.$t("pages.report.send")},null,8,["onClick","label"])])),_:1})])),_:1})])),_:1},8,["modelValue","onBeforeHide"]),(0,r.bF)(Y,{showing:e.loading,style:{"z-index":"10000"}},{default:(0,r.k6)((()=>[k])),_:1},8,["showing"])],64)}var S=a(23537),E=a(1659),C=a(24622),L=a(10739),q=a(64775),x=a(11470),A=a(38734),D=a(76651),w=a(18698),V=a(76956),$=a(66693),P=a(1595);const N=e=>((0,r.Qi)("data-v-fa17f35a"),e=e(),(0,r.jt)(),e),R={class:"row q-mb-md"},Q={style:{"margin-top":"39px"},class:"row items-start example-container dashboard-title dark-readable"},O={class:"col q-ml-xl"},M={class:"row justify-start"},K={class:"dashboard-search-box q-ml-md mt-20 white-inputs"},I={class:"mt-20"},X=N((()=>(0,r.Lk)("div",{class:"q-mb-md"},null,-1)));function T(e,t,a,s,l,n){const o=(0,r.g2)("quickSearch"),p=(0,r.g2)("q-space"),d=(0,r.g2)("q-tooltip"),u=(0,r.g2)("f-btn"),c=(0,r.g2)("ColumnOrganization"),_=(0,r.g2)("SupplierCreate"),g=(0,r.g2)("q-dialog"),m=(0,r.g2)("q-separator"),h=(0,r.g2)("analytics");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",R,[(0,r.Lk)("div",Q,[(0,r.Lk)("div",{class:"example-cell cursor-pointer",tabindex:"0",onClick:t[0]||(t[0]=(...t)=>e.getAllSupplier&&e.getAllSupplier(...t))},(0,i.v_)(e.$t("all_suppliers"))+" ("+(0,i.v_)(e.total_supplier_count)+") ",1),(0,r.Lk)("div",{class:"example-cell q-ml-lg cursor-pointer",tabindex:"0",onClick:t[1]||(t[1]=(...t)=>e.getPendingSupplier&&e.getPendingSupplier(...t))},(0,i.v_)(e.$t("pending_approval"))+" ("+(0,i.v_)(e.pending_approval_supplier)+") ",1),(0,r.Lk)("div",{class:"example-cell q-ml-lg cursor-pointer",tabindex:"0",onClick:t[2]||(t[2]=(...t)=>e.getPendingRegitationSupplier&&e.getPendingRegitationSupplier(...t))},(0,i.v_)(e.$t("pending_registration"))+" ("+(0,i.v_)(e.pending_registration_supplier)+") ",1)]),(0,r.Lk)("div",O,[(0,r.Lk)("div",M,[(0,r.Lk)("div",K,[(0,r.bF)(o)]),(0,r.bF)(p),(0,r.bF)(u,{square:"",class:"q-mr-sm mt-20",icon:"img:images/refresh.svg",onClick:e.refreshFilters},{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.$t("refresh_list")),1)])),_:1})])),_:1},8,["onClick"]),(0,r.Lk)("span",I,[(0,r.bF)(c,{columns_key:e.supplier_dashboard_columns,table_columns:e.table_columns,unique_column_key:"field"},null,8,["columns_key","table_columns"])]),(0,r.bF)(u,{square:"",class:"q-mr-sm mt-20",icon:"img:images/statistik.svg",onClick:t[3]||(t[3]=t=>e.show_analytics=!e.show_analytics)},{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.$t("analytics")),1)])),_:1})])),_:1}),(0,r.bF)(u,{square:"",color:"primary",class:"q-mr-sm mt-20 add-icon",icon:"add",onClick:e.toggleCreatedDialog},{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.$t("create_supplier")),1)])),_:1})])),_:1},8,["onClick"]),(0,r.bF)(g,{modelValue:e.created_dialog,"onUpdate:modelValue":t[4]||(t[4]=t=>e.created_dialog=t)},{default:(0,r.k6)((()=>[(0,r.bF)(_)])),_:1},8,["modelValue"])])])]),e.show_analytics?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.bF)(m,{class:"q-mb-md"}),(0,r.bF)(h),X],64)):(0,r.Q3)("",!0)],64)}const W={class:"q-pa-md"},B={class:"row q-my-sm"},U={style:{"margin-top":"5px"}},G={class:"row q-my-sm"},z={style:{"margin-top":"5px"}},j={class:"row q-my-sm"},J={style:{"margin-top":"5px"}},H={class:"row q-my-sm"},Y={style:{"margin-top":"5px"}},Z={class:"row q-my-sm"},ee={style:{"margin-top":"5px"}},te={class:"float-right q-ml-auto"};function ae(e,t,a,s,l,n){const o=(0,r.g2)("q-space"),p=(0,r.g2)("GroupFilter"),d=(0,r.g2)("StatusFilter"),u=(0,r.g2)("DateAdded"),c=(0,r.g2)("ZipCode"),_=(0,r.g2)("q-select"),g=(0,r.g2)("f-btn"),m=(0,r.g2)("q-menu"),h=(0,r.g2)("q-input");return(0,r.uX)(),(0,r.Wv)(h,{class:"width-500",dense:"",modelValue:e.filter.search,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.filter.search=t),e.fetchData],autofocus:"",debounce:1e3,placeholder:e.$t("search_by_name_number"),outlined:"",onKeyup:e.onKeyup},{append:(0,r.k6)((()=>[(0,r.bF)(g,{icon:"tune",appearance:"flat"},{default:(0,r.k6)((()=>[(0,r.bF)(m,{style:{width:"500px","min-height":"250px"},anchor:"bottom start",self:"top left",offset:[453,10]},{default:(0,r.k6)((()=>[(0,r.Lk)("div",W,[(0,r.Lk)("div",B,[(0,r.Lk)("span",U,(0,i.v_)(e.$t("supplier_groups")),1),(0,r.bF)(o),(0,r.bF)(p)]),(0,r.Lk)("div",G,[(0,r.Lk)("span",z,(0,i.v_)(e.$t("status")),1),(0,r.bF)(o),(0,r.bF)(d)]),(0,r.Lk)("div",j,[(0,r.Lk)("span",J,(0,i.v_)(e.$t("date_added")),1),(0,r.bF)(o),(0,r.bF)(u)]),(0,r.Lk)("div",H,[(0,r.Lk)("span",Y,(0,i.v_)(e.$t("zip_code")),1),(0,r.bF)(o),(0,r.bF)(c)]),(0,r.Lk)("div",Z,[(0,r.Lk)("span",ee,(0,i.v_)(e.$t("pagination_size")),1),(0,r.bF)(o),(0,r.bF)(_,{outlined:"",dense:"",class:"q-mr-sm user-select",modelValue:e.pagination.page_size,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.pagination.page_size=t),e.getSupplierData],options:e.pagination_options,label:e.$t("pagination_size")},null,8,["modelValue","options","onUpdate:modelValue","label"])]),(0,r.Lk)("div",te,[(0,r.bF)(g,{appearance:"secondary",class:"q-mr-sm mt-20 q-mb-md",label:e.$t("clear_filters"),onClick:t[1]||(t[1]=t=>e.resetFilters())},null,8,["label"])])])])),_:1})])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue","placeholder","onKeyup"])}var re=a(82204);function ie(e,t,a,s,l,n){const o=(0,r.g2)("q-select");return(0,r.uX)(),(0,r.Wv)(o,{outlined:"",class:"q-mr-sm",style:{width:"227px",height:"40px"},clearable:"",dense:"",modelValue:e.filter.status,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.filter.status=t),e.fetchData],options:e.supplierStatusList,label:e.$t("status")},{"selected-item":(0,r.k6)((e=>[(0,r.Lk)("div",null,(0,i.v_)(e.opt.label),1)])),_:1},8,["modelValue","options","label","onUpdate:modelValue"])}const se=(0,r.pM)({mixins:[],props:{},mounted(){},unmounted:function(){},methods:{fetchData(){this.resetPagination(),this.getSupplierData()}},setup(){const e=(0,A.KR)(),t=(0,E.bP)((0,D.bp)()),{getSupplierData:a,resetPagination:r}=(0,D.bp)(),{filter:i,supplierStatusList:s}=t;return{selected_status:e,filter:i,getSupplierData:a,resetPagination:r,supplierStatusList:s}}});var le=a(12807),ne=a(94940),oe=a(98582),pe=a.n(oe);const de=(0,le.A)(se,[["render",ie]]),ue=de;pe()(se,"components",{QSelect:ne.A});const ce={class:"row items-center justify-end"};function _e(e,t,a,i,s,l){const n=(0,r.g2)("q-btn"),o=(0,r.g2)("q-date"),p=(0,r.g2)("q-popup-proxy"),d=(0,r.g2)("q-icon"),u=(0,r.g2)("q-input"),c=(0,r.gN)("close-popup");return(0,r.uX)(),(0,r.Wv)(u,{outlined:"",dense:"",modelValue:e.filter.date_added,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter.date_added=t),clearable:!0,class:"q-mr-sm",style:{width:"227px",height:"40px"}},{append:(0,r.k6)((()=>[(0,r.bF)(d,{name:"event",class:"cursor-pointer"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{"onUpdate:modelValue":[e.fetchData,t[0]||(t[0]=t=>e.filter.date_added=t)],modelValue:e.filter.date_added,mask:"YYYY-MM-DD"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",ce,[(0,r.bo)((0,r.bF)(n,{label:"Close",color:"primary",flat:""},null,512),[[c]])])])),_:1},8,["onUpdate:modelValue","modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}const ge=(0,r.pM)({mixins:[],props:{},mounted(){},unmounted:function(){},methods:{fetchData(e){this.filter.date_added=e,this.resetPagination(),this.getSupplierData()}},setup(){const e=(0,A.KR)(),t=(0,E.bP)((0,D.bp)()),{getSupplierData:a,resetPagination:r}=(0,D.bp)(),{filter:i}=t;return{resetPagination:r,getSupplierData:a,filter:i,date:e}}});var me=a(67837),he=a(50492),fe=a(48975),ve=a(93692),be=a(56384),ye=a(88672);const ke=(0,le.A)(ge,[["render",_e]]),Fe=ke;function Se(e,t,a,i,s,l){const n=(0,r.g2)("q-input");return(0,r.uX)(),(0,r.Wv)(n,{outlined:"",dense:"",modelValue:e.filter.zip_code,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.filter.zip_code=t),e.fetchData],clearable:!0,debounce:1e3,class:"q-mr-sm",style:{width:"227px",height:"40px"}},null,8,["modelValue","onUpdate:modelValue"])}pe()(ge,"components",{QInput:me.A,QIcon:he.A,QPopupProxy:fe.A,QDate:ve.A,QBtn:be.A}),pe()(ge,"directives",{ClosePopup:ye.A});const Ee=(0,r.pM)({mixins:[],props:{},mounted(){},unmounted:function(){},methods:{fetchData(){this.resetPagination(),this.getSupplierData()}},setup(){const e=(0,A.KR)(),t=(0,E.bP)((0,D.bp)()),{getSupplierData:a,resetPagination:r}=(0,D.bp)(),{filter:i}=t;return{resetPagination:r,getSupplierData:a,filter:i,date:e}}}),Ce=(0,le.A)(Ee,[["render",Se]]),Le=Ce;function qe(e,t,a,s,l,n){const o=(0,r.g2)("q-select");return(0,r.uX)(),(0,r.Wv)(o,{outlined:"",class:"q-mr-sm",style:{width:"227px",height:"40px"},clearable:"",dense:"",modelValue:e.filter.supplier_group,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.filter.supplier_group=t),e.fetchData],options:e.supplierOptionList,label:e.$t("supplier_groups")},{"selected-item":(0,r.k6)((e=>[(0,r.Lk)("div",null,(0,i.v_)(e.opt.label),1)])),_:1},8,["modelValue","options","label","onUpdate:modelValue"])}pe()(Ee,"components",{QInput:me.A});const xe=(0,r.pM)({mixins:[],props:{},mounted(){},unmounted:function(){},methods:{fetchData(){this.resetPagination(),this.getSupplierData()}},setup(){const e=w.supplierGroupOptions,t=(0,A.KR)(),a=(0,E.bP)((0,D.bp)()),{getSupplierData:r,resetPagination:i}=(0,D.bp)(),{filter:s,supplierOptionList:l}=a;return{groups:e,selected_group:t,filter:s,getSupplierData:r,resetPagination:i,supplierOptionList:l}}}),Ae=(0,le.A)(xe,[["render",qe]]),De=Ae;pe()(xe,"components",{QSelect:ne.A});var we=function(e,t,a,r){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function l(e){try{o(r.next(e))}catch(t){s(t)}}function n(e){try{o(r["throw"](e))}catch(t){s(t)}}function o(e){e.done?a(e.value):i(e.value).then(l,n)}o((r=r.apply(e,t||[])).next())}))};const Ve=(0,r.pM)({mixins:[],props:{},components:{StatusFilter:ue,GroupFilter:De,DateAdded:Fe,ZipCode:Le},methods:{resetFilters(){logInfo("reset filter akjbsdnas"),this.removeSortOrderFromStorage("supplier"),this.resetFilter(),this.getSupplierData()},loadSavedFiler(){const e=this.quickFilterMap.get("keyword");e&&(this.searchInput=e)},onKeyup(e){"Enter"==e.key&&this.fetchData()},fetchData(){return we(this,void 0,void 0,(function*(){this.resetPagination(),yield this.getSupplierData()}))},handleEmptyStatus(){return(!this.searchInput||null===this.searchInput||""===this.searchInput.trim())&&(this.resetFilters(),!0)},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)},validatePaginationSize(){this.pagination.page_size<=50||(this.pagination.page_size=50)}},mounted(){this.validatePaginationSize()},setup(){const e=(0,D.bp)(),t=["10","20","25","50"],{quickFilterMap:a,loading:r,pagination:i,filter:s}=(0,E.bP)(e),{getSupplierData:l,resetPagination:n,resetFilter:o}=e;return{getSupplierData:l,resetFilter:o,pagination:i,filter:s,loading:r,searchInput:(0,A.KR)(""),oldSearchInput:(0,A.KR)(""),quickFilterMap:a,showing:(0,A.KR)(!1),debounceSearchInputFunc:{},request_params:{},filter_data_json_str:"",pagination_options:t,removeSortOrderFromStorage:re.oX,resetPagination:n}}});var $e=a(84436),Pe=a(93676);const Ne=(0,le.A)(Ve,[["render",ae]]),Re=Ne;pe()(Ve,"components",{QInput:me.A,QMenu:$e.A,QSpace:Pe.A,QSelect:ne.A});var Qe=a(14907),Oe=a(54899),Me=a(73745),Ke=a(74960),Ie=a(78279),Xe=a(28936),Te=a(94088),We=a(40732);const Be={class:"row full-width"},Ue={class:"col"},Ge=(0,r.pM)({__name:"MagicLinkField",props:{meta_field:{},modelValue:{},isError:{type:Boolean},errorMessage:{},readonly:{type:Boolean},disabled:{type:Boolean},translationKey:{default:"supplier_register_form"},afterClick:{},innerHtml:{}},emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,P.M1)(),{formLayout:i,formConfigure:s}=(0,E.bP)(a),l=e,n=t,{meta_field:o,afterClick:p,innerHtml:d}=l,u=((0,A.KR)([]),e=>{n("update:modelValue",e,o.field_name)}),c=(0,r.EW)((()=>l.meta_field.is_required?"*":"")),_=(0,r.EW)((()=>["STRING","NUMBER","TEXTAREA","text","number","password","email","tel","textarea"].includes(o.field_type)?Ke.A:["radio","group-checkbox","toggle"].includes(o.field_type)?Ie.A:["SELECT","SEARCH","select","search"].includes(o.field_type)?Xe.A:["FILE","file"].includes(o.field_type)?We.A:["checkbox","BOOLEAN"].includes(o.field_type)?Te.A:null));return(e,t)=>{var a;return(0,r.uX)(),(0,r.CE)("div",Be,[(0,r.Lk)("div",Ue,[((0,r.uX)(),(0,r.Wv)((0,r.$y)(_.value),{meta_field:(0,A.R1)(o),name:l.meta_field.field_name,type:"group-checkbox"===(0,A.R1)(o).field_type?"checkbox":(0,A.R1)(o).field_type,translationKey:l.translationKey,disable:!1,readonly:!1,"model-value":e.modelValue,"stack-label":!1,label:(0,A.R1)(o).label?e.$t((0,A.R1)(o).label):e.$t((0,A.R1)(o).translation_key),"onUpdate:modelValue":t[0]||(t[0]=e=>u(e)),class:"col-12 card-padding",dense:"",outlined:"","hide-bottom-space":"","reactive-rules":"","label-slot":!1,asterisk:c.value,rules:[...(0,A.R1)(o).is_required?[t=>!!t||e.$t((0,A.R1)(o).requiredMessageKey?e.$t(`${l.translationKey}.error.${(0,A.R1)(o).requiredMessageKey}`):"field_required")]:[],..."email"===(0,A.R1)(o).field_type?[t=>(0,A.R1)(Me.pA)(t)||e.$t(`${l.translationKey}.error.email_err`)]:[],...(null===(a=(0,A.R1)(o).rules)||void 0===a?void 0:a.map((t=>a=>t.rule(a)||e.$t(`${l.translationKey}.error.${t.messageKey}`))))||[]]},null,8,["meta_field","name","type","translationKey","model-value","label","asterisk","rules"]))])])}}});var ze=a(97410),je=a(67156);const Je=(0,le.A)(Ge,[["__scopeId","data-v-2f79c5da"]]),He=Je;pe()(Ge,"components",{QIcon:he.A,QTooltip:ze.A,QSpace:Pe.A,QField:je.A});const Ye={class:"text-weight-bold"},Ze={__name:"SupplierCreate",setup(e){const{showSuccessToast:t,showErrorToast:a}=(0,Oe.A)(),{t:s}=((0,Qe.A)(),(0,S.s9)()),l=(0,A.KR)(),n=(0,A.KR)({group:"",orgName:"",firstName:"",name:"",email:"",sppGroupError:"",sppNameError:"",responderFirstNameError:"",responderNameError:"",responderEmailError:""}),o=(0,A.KR)({}),p=(0,D.bp)(),{toggleCreatedDialog:d}=p,{loading:u,additionalFields:c,supplierOptionList:_}=(0,E.bP)(p),g=e=>{const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)},m=async()=>{let e=!1;return n.value.sppGroupError="",n.value.sppNameError="",n.value.responderFirstNameError="",n.value.responderNameError="",n.value.responderEmailError="",""===n.value.group&&(n.value.sppGroupError="Supplier group is required",e=!0),""===n.value.orgName&&(n.value.sppNameError="Supplier name is required",e=!0),n.value.firstName||(n.value.responderFirstNameError="Responder first name is required",e=!0),""===n.value.name&&(n.value.responderNameError="Responder last name is required",e=!0),""===n.value.email&&(n.value.responderEmailError="Responder email is required",e=!0),g(n.value.email)||(n.value.responderEmailError="Responder email is invalid",e=!0),0==e?e=!await l.value.validate():await l.value.validate(),e},h=async()=>{let e=await m();if(e)return;u.value=!0;const r={supplier_type:n.value.group,org_name:n.value.orgName,responder_first_name:n.value.firstName,responder_name:n.value.name,responder_email:n.value.email,additional_data:o.value};await x.Nf.sendMagicLink(r).then((e=>{e.success?(t(s("send_success")),d()):a(e?.message)})).catch((e=>{const t=q.t.getErrorMessage(e);a(t)})).finally((()=>{p.getSupplierData().finally((()=>{u.value=!1}))}))};return(e,t)=>{const a=(0,r.g2)("q-toolbar-title"),s=(0,r.g2)("q-btn"),p=(0,r.g2)("q-toolbar"),u=(0,r.g2)("q-tooltip"),g=(0,r.g2)("q-icon"),m=(0,r.g2)("q-input"),f=(0,r.g2)("q-card-section"),v=(0,r.g2)("q-form"),b=(0,r.g2)("f-btn"),y=(0,r.g2)("q-card-actions"),k=(0,r.g2)("q-card"),F=(0,r.gN)("close-popup");return(0,r.uX)(),(0,r.Wv)(k,{class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"text-white secondary-toolbar"},{default:(0,r.k6)((()=>[(0,r.bF)(a,null,{default:(0,r.k6)((()=>[(0,r.Lk)("span",Ye,(0,i.v_)(e.$t("add_supplier")),1)])),_:1}),(0,r.bo)((0,r.bF)(s,{flat:"",round:"",dense:"",icon:"close",onClick:(0,A.R1)(d)},null,8,["onClick"]),[[F]])])),_:1}),(0,r.bF)(v,{ref_key:"formEl",ref:l},{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"row"},{default:(0,r.k6)((()=>[(0,r.bF)((0,A.R1)(ne.A),{modelValue:n.value.group,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value.group=e),label:e.$t("supplier_register_form.field.supplier_group"),outlined:"",dense:"",class:"col-12 card-padding",options:(0,A.R1)(_),"map-options":"","emit-value":""},{append:(0,r.k6)((()=>[n.value.sppGroupError?((0,r.uX)(),(0,r.Wv)(g,{key:0,color:"red",name:"error"},{default:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(n.value.sppGroupError),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1},8,["modelValue","label","options"]),(0,r.bF)(m,{modelValue:n.value.orgName,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.orgName=e),label:e.$t("supplier_register_form.field.supplier_name"),outlined:"",dense:"",class:"col-12 card-padding",required:!0},{append:(0,r.k6)((()=>[n.value.sppNameError?((0,r.uX)(),(0,r.Wv)(g,{key:0,color:"red",name:"error"},{default:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(n.value.sppNameError),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1},8,["modelValue","label"]),(0,r.bF)(m,{modelValue:n.value.firstName,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value.firstName=e),label:e.$t("supplier_responder_first_name"),outlined:"",dense:"",class:"col-12 card-padding"},{append:(0,r.k6)((()=>[n.value.responderFirstNameError?((0,r.uX)(),(0,r.Wv)(g,{key:0,color:"red",name:"error"},{default:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(n.value.responderFirstNameError),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1},8,["modelValue","label"]),(0,r.bF)(m,{modelValue:n.value.name,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value.name=e),label:e.$t("supplier_responder_last_name"),outlined:"",dense:"",class:"col-12 card-padding"},{append:(0,r.k6)((()=>[n.value.responderNameError?((0,r.uX)(),(0,r.Wv)(g,{key:0,color:"red",name:"error"},{default:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(n.value.responderNameError),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1},8,["modelValue","label"]),(0,r.bF)(m,{modelValue:n.value.email,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value.email=e),label:e.$t("supplier_responder_email"),outlined:"",dense:"",class:"col-12 card-padding"},{append:(0,r.k6)((()=>[n.value.responderEmailError?((0,r.uX)(),(0,r.Wv)(g,{key:0,color:"red",name:"error"},{default:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(n.value.responderEmailError),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1},8,["modelValue","label"]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)((0,A.R1)(c),((e,t)=>((0,r.uX)(),(0,r.Wv)(He,{key:t,class:(0,i.C4)(["create_supplier_page"]),meta_field:e,readonly:e.readonly,modelValue:o.value[t],"onUpdate:modelValue":e=>o.value[t]=e},null,8,["meta_field","readonly","modelValue","onUpdate:modelValue"])))),128))])),_:1})])),_:1},512),(0,r.bF)(y,{align:"right"},{default:(0,r.k6)((()=>[(0,r.bo)((0,r.bF)(b,{label:e.$t("cancel"),appearance:"cancel",onClick:(0,A.R1)(d)},null,8,["label","onClick"]),[[F]]),(0,r.bF)(b,{onClick:h,class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})])),_:1})}}};var et=a(23316),tt=a(36914),at=a(39150),rt=a(49200),it=a(44189),st=a(62669);const lt=(0,le.A)(Ze,[["__scopeId","data-v-b180c5be"]]),nt=lt;pe()(Ze,"components",{QCard:et.A,QToolbar:tt.A,QToolbarTitle:at.A,QBtn:be.A,QForm:rt.A,QCardSection:it.A,QSelect:ne.A,QIcon:he.A,QTooltip:ze.A,QInput:me.A,QCardActions:st.A,QField:je.A}),pe()(Ze,"directives",{ClosePopup:ye.A});const ot={class:"row items-stretch justify-start"},pt={class:"text-h6"},dt={class:"text-subtitle2"};function ut(e,t,a,s,l,n){const o=(0,r.g2)("q-card-section"),p=(0,r.g2)("q-tooltip"),d=(0,r.g2)("q-card");return(0,r.uX)(),(0,r.CE)("div",ot,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.ExpireStatus,((t,a)=>((0,r.uX)(),(0,r.Wv)(d,{key:a,class:(0,i.C4)(["analytic-card cursor-pointer clickable",e.selected_filter_status===t.ref?"selected-card":""]),onClick:a=>e.filterTabSelected(t.ref,t.title,t.insurance_expired),style:(0,i.Tr)({borderLeftColor:t.color})},{default:(0,r.k6)((()=>[(0,r.bF)(o,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",pt,(0,i.v_)(t.title)+" ("+(0,i.v_)(e.expiredCount[t.ref]?e.expiredCount[t.ref]:0)+")",1),(0,r.Lk)("div",dt,(0,i.v_)(t.desc),1)])),_:2},1024),(0,r.bF)(p,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(t.tip),1)])),_:2},1024)])),_:2},1032,["onClick","style","class"])))),128))])}var ct=function(e,t,a,r){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function l(e){try{o(r.next(e))}catch(t){s(t)}}function n(e){try{o(r["throw"](e))}catch(t){s(t)}}function o(e){e.done?a(e.value):i(e.value).then(l,n)}o((r=r.apply(e,t||[])).next())}))};const _t=(0,r.pM)({mixins:[],props:{},watch:{quickFilterMap:{deep:!0,handler:function(e,t){this.loadFilters()}}},components:{},methods:{loadFilters(){const e=this.quickFilterMap.get("tab_status");e||(this.selected_filter_status="expires_in_1_months")},filterTabSelected(e,t,a){this.selected_filter_status=e;const r=new CustomEvent("quick_filter_remove",{detail:"status"});document.dispatchEvent(r),this.quickFilterMap.set("tab_status",{value:e,label:t}),this.triggerApplyFilters(),this.getExpiredSupplier(a)},triggerApplyFilters(){logInfo("triggerApplyFilters",this.quickFilterMap);const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)},getExpiredSupplier(e){return ct(this,void 0,void 0,(function*(){this.resetPagination(),logInfo(e);const t=Object.assign({count:this.current_supplier});this.filter={insurance_expired:Number(e)},yield this.getSupplierData(),this.current_supplier=t.count}))}},setup(){const{t:e}=(0,S.s9)(),t=(0,A.KR)([{id:1,title:e("expired"),desc:"",tip:`${e("expired")}`,ref:"expired",color:"#FF0000",insurance_expired:-1},{id:2,title:e("expires_in"),desc:`1 ${e("month")}`,tip:`${e("expires_in")} 1${e("month")}`,ref:"expired_in_1_month",color:"#2388ae",insurance_expired:1},{id:3,title:e("expires_in"),desc:`2 ${e("month")}`,tip:`${e("expires_in")} 2${e("month")}`,ref:"expired_in_2_months",color:"#409fff",insurance_expired:2},{id:4,title:e("expires_in"),desc:`3 ${e("month")}`,tip:`${e("expires_in")} 3${e("month")}`,ref:"expired_in_3_months",color:"#ffe240",insurance_expired:3},{id:5,title:e("expires_in"),desc:`6 ${e("month")}`,tip:`${e("expires_in")} 6${e("month")}`,ref:"expired_in_6_months",color:"#41b2bb",insurance_expired:6},{id:6,title:e("expires_in"),desc:`1 ${e("year")}`,tip:`${e("expires_in")} 1${e("year")}`,ref:"expired_in_1_year",color:"#80bb41",insurance_expired:12}]),a=(0,D.bp)(),{current_supplier:r,pending_approval_supplier:i,display_data:s,loading:l,paginationCount:n,quickFilterMap:o,table_columns:p,supplier_status:d,sortby_data_types:u,created_dialog:c,pagination:_,expiredCount:g,filter:m}=(0,E.bP)(a),{resetFilter:h,getSupplierData:f,getColumnPreference:v,toggleCreatedDialog:b,resetPagination:y}=a;return{show_analytics:(0,A.KR)(!1),selected_filter_status:(0,A.KR)(""),current_supplier:r,pending_approval_supplier:i,display_data:s,loading:l,paginationCount:n,quickFilterMap:o,table_columns:p,supplier_status:d,sortby_data_types:u,created_dialog:c,pagination:_,ExpireStatus:t,expiredCount:g,filter:m,resetFilter:h,getSupplierData:f,getColumnPreference:v,toggleCreatedDialog:b,resetPagination:y,t:e}}}),gt=(0,le.A)(_t,[["render",ut],["__scopeId","data-v-53b45bc2"]]),mt=gt;pe()(_t,"components",{QCard:et.A,QCardSection:it.A,QTooltip:ze.A});var ht=a(41268),ft=function(e,t,a,r){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function l(e){try{o(r.next(e))}catch(t){s(t)}}function n(e){try{o(r["throw"](e))}catch(t){s(t)}}function o(e){e.done?a(e.value):i(e.value).then(l,n)}o((r=r.apply(e,t||[])).next())}))};const vt=(0,r.pM)({props:{type_name:{type:String,reqired:!0,default:"supplier"},additionalFields:{type:Array,required:!1,default:()=>[]}},components:{SupplierCreate:nt,quickSearch:Re,analytics:mt,ColumnOrganization:ht.A},mounted(){document.addEventListener("delete_input_text",this.clearSearchInput)},methods:{clearSearchInput(){this.searchInput=""},refreshFilters(){this.filter.insurance_expired=0,this.getSupplierData()},resetFilters(){const e=new CustomEvent("reset_filters",{});document.dispatchEvent(e)},getAllSupplier(){this.resetFilter(),this.getSupplierData()},getPendingSupplier(){return ft(this,void 0,void 0,(function*(){this.resetPagination();const e=Object.assign({count:this.current_supplier});this.filter.status={label:"Pending Approval",value:"pending_approval"},yield this.getSupplierData(),this.current_supplier=e.count}))},getPendingRegitationSupplier(){return ft(this,void 0,void 0,(function*(){this.resetPagination();const e=Object.assign({count:this.current_supplier});this.filter.status={label:"Pending Registration",value:"pending_registration"},yield this.getSupplierData(),this.current_supplier=e.count}))},inputValueChanges(){logInfo(this.searchInput)},triggerApplyFilters(){const e=new CustomEvent("sup_pending",{detail:{data_type:this.type_name}});document.dispatchEvent(e)}},setup(){const e=(0,D.bp)(),{current_supplier:t,pending_supplier:a,loading:r,display_data:i,pending_approval_supplier:s,pending_registration_supplier:l,supplier_status:n,created_dialog:o,total_supplier_count:p,filter:d,pagination:u,table_columns:c}=(0,E.bP)(e),{resetFilter:_,getSupplierData:g,getColumnPreference:m,toggleCreatedDialog:h,resetPagination:f}=e;return{getSupplierData:g,searchInput:(0,A.KR)(""),pending_supplier:a,display_data:i,current_supplier:t,pending_approval_supplier:s,pending_registration_supplier:l,total_supplier_count:p,supplier_status:n,loading:r,created_dialog:o,toggleCreatedDialog:h,filter:d,resetFilter:_,pagination:u,resetPagination:f,show_analytics:(0,A.KR)(!1),table_columns:c,supplier_dashboard_columns:V.kY}}});var bt=a(82156),yt=a(10386);const kt=(0,le.A)(vt,[["render",T],["__scopeId","data-v-fa17f35a"]]),Ft=kt;pe()(vt,"components",{QSpace:Pe.A,QTooltip:ze.A,QDialog:bt.A,QSeparator:yt.A});const St={class:"orderByParentSpan arrow-color"},Et=["data-name"],Ct=["data-name"];function Lt(e,t,a,s,l,n){return(0,r.uX)(),(0,r.CE)("span",St,[(0,r.Lk)("span",{class:(0,i.C4)(["up-arrow orderBy absolute",e.is_order_by_selected("asc")?"selected":""]),"data-name":e.column_name,"data-direction":"asc",onClick:t[0]||(t[0]=t=>e.OrderBy("asc"))},null,10,Et),(0,r.Lk)("span",{class:(0,i.C4)(["down-arrow orderBy absolute",e.is_order_by_selected("desc")?"selected":""]),"data-name":e.column_name,"data-direction":"desc",onClick:t[1]||(t[1]=t=>e.OrderBy("desc"))},null,10,Ct)])}const qt=(0,r.pM)({mixins:[],props:{column_name:{type:String,required:!0},type_name:{type:String,required:!0}},components:{},methods:{is_order_by_selected(e){return Boolean(this.sortby_data_types[this.type_name]["orderByMap"].has(this.column_name)&&this.sortby_data_types[this.type_name]["orderByMap"].get(this.column_name)==e)},OrderBy(e){this.sortby_data_types[this.type_name]["orderByMap"].has(this.column_name)&&this.sortby_data_types[this.type_name]["orderByMap"].get(this.column_name)==e?this.sortby_data_types[this.type_name]["orderByMap"].delete(this.column_name):this.sortby_data_types[this.type_name]["orderByMap"].set(this.column_name,e),(0,re.eT)(this.type_name,this.sortby_data_types[this.type_name]["orderByMap"]),this.triggerApplyFilters()},triggerApplyFilters(){const e=new CustomEvent("sup_search",{detail:{data_type:this.type_name}});document.dispatchEvent(e)}},setup(){const e=(0,D.bp)(),{sortby_data_types:t,paginationCount:a}=(0,E.bP)(e);return{paginationCount:a,sortby_data_types:t,order_by_field:(0,A.KR)(""),order_by_direction:(0,A.KR)("")}}}),xt=(0,le.A)(qt,[["render",Lt],["__scopeId","data-v-29d0d158"]]),At=xt,Dt={class:"row"},wt={class:"q-py-xs q-mt-md q-mr-sm"};function Vt(e,t,a,s,l,n){const o=(0,r.g2)("q-select");return(0,r.uX)(),(0,r.CE)("div",Dt,[(0,r.Lk)("span",wt,(0,i.v_)(e.$t("pagination_size"))+":",1),(0,r.bF)(o,{borderless:"",dense:"",modelValue:e.pagination.page_size,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.pagination.page_size=t),e.getSupplierData],options:e.pagination_options},null,8,["modelValue","options","onUpdate:modelValue"])])}var $t=a(13720);const Pt=(0,r.pM)({mixins:[],props:{},watch:{},methods:{triggerApplyFilters(){const e=new CustomEvent("apply_filters",{});document.dispatchEvent(e)},validatePaginationSize(){this.pagination.page_size<=50||(this.pagination.page_size=50)}},mounted(){this.validatePaginationSize()},setup(){const e=(0,$t.b)(),{pagination:t}=(0,E.bP)(e),{getSupplierData:a}=e;return{pagination:t,getSupplierData:a,pagination_options:(0,A.KR)(["10","20","25","50"])}}}),Nt=(0,le.A)(Pt,[["render",Vt]]),Rt=Nt;pe()(Pt,"components",{QSelect:ne.A});var Qt=a(87033),Ot=a(46736),Mt=function(e,t,a,r){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function l(e){try{o(r.next(e))}catch(t){s(t)}}function n(e){try{o(r["throw"](e))}catch(t){s(t)}}function o(e){e.done?a(e.value):i(e.value).then(l,n)}o((r=r.apply(e,t||[])).next())}))};const Kt=(0,r.pM)({mixins:[C.A,L.A,Qt.A,Ot.A],props:{type_name:{type:String,reqired:!0,default:"supplier"}},watch:{loading_settings:{handler:function(e,t){1==e&&0==t||this.loadAdditionalFields()}}},mounted(){this.removeSortOrderFromStorage("supplier"),this.init(),this.prepareTableColumns(),this.initFontSize(),this.initDragDropColumns("supplier_table","label"),document.addEventListener("supplier_table-column-drop",this.onDropColumns),document.addEventListener("sup_search",this.searchEvent),document.addEventListener("supplier_refresh_data",this.refreshFilters),document.addEventListener("sup_pending",(()=>{this.getDataServer(!0)})),document.addEventListener("columnsUpdated",this.refreshColumns),this.loadAdditionalFields(),this.loadSupplierStatusOptions()},unmounted(){document.removeEventListener("sup_search",this.searchEvent),document.removeEventListener("supplier_refresh_data",this.refreshFilters),document.removeEventListener("columnsUpdated",this.refreshColumns),document.addEventListener("sup_pending",(()=>{this.getDataServer(!0)})),document.removeEventListener("supplier_table-column-drop",this.onDropColumns)},components:{SubHeader:$.A,DashboardHeader:Ft,ColumnOrderBy:At,PaginationSettings:Rt},methods:{refreshColumns(e){e.detail&&(this.tableColumns=e.detail.visible_columns)},openMagicLink(e){return Mt(this,void 0,void 0,(function*(){try{this.dialogLoading=!0,this.dialogVisible=!0,this.sppGroup=e.supplier_type,this.sppOrgName=e.supplier_name,this.responderFirstName=e.responder_first_name,this.responderName=e.responder_name,this.responderEmail=e.responder_email,this.magic_link_selected_row=e,this.sppGroupError="",this.sppNameError="",this.responderFirstNameError="",this.responderNameError="",this.responderEmailError="";const t=yield x.MI.getOrgSupplierDetails(e.supplier_lookup_record_id,e.supplier_as_org_id);t.success&&Object.values(this.additionalFields).forEach((e=>{t.data[e.field_name]&&(this.existMagicLinkData[e.field_name]=t.data[e.field_name])})),this.dialogLoading=!1}catch(t){logInfo(t,"error")}}))},hideMagicLinkDialog(){this.sppGroup="",this.sppOrgName="",this.responderFirstName="",this.responderName="",this.responderEmail="",this.existMagicLinkData={}},isValidEmail(e){const t=/\S+@\S+\.\S+/;return t.test(e)},getStatusClass(e){let t="bg-grey";const a=this.statusList.hasOwnProperty(e);return a&&(t=this.statusList[e]["class"]),t+=" dashboard-status-badge",t},prepareStatusList(){this.statusList["pending_registration"]=[],this.statusList["pending_registration"]["value"]="pending_registration",this.statusList["pending_registration"]["class"]="bg-amber-7",this.statusList["pending_approval"]=[],this.statusList["pending_approval"]["value"]="pending_approval",this.statusList["pending_approval"]["class"]="bg-blue-6",this.statusList["pending_ap_approval"]=[],this.statusList["pending_ap_approval"]["value"]="pending_ap_approval",this.statusList["pending_ap_approval"]["class"]="bg-teal-5",this.statusList["pending_supplier_input"]=[],this.statusList["pending_supplier_input"]["value"]="pending_supplier_input",this.statusList["pending_supplier_input"]["class"]="bg-lime-6",this.statusList["approved"]=[],this.statusList["approved"]["value"]="approved",this.statusList["approved"]["class"]="bg-light-green-6",this.statusList["rejected"]=[],this.statusList["rejected"]["value"]="rejected",this.statusList["rejected"]["class"]="bg-red-13"},validateFiled(){let e=!1;return this.sppGroup||(this.sppGroupError="Supplier group is required",e=!0),this.sppOrgName||(this.sppNameError="Supplier name is required",e=!0),this.responderFirstName||(this.responderFirstNameError="Responder first name is required",e=!0),this.responderName||(this.responderNameError="Responder last name is required",e=!0),this.responderEmail||(this.responderEmailError="Responder email is required",e=!0),this.isValidEmail(this.responderEmail)||(this.responderEmailError="Responder email is invalid",e=!0),e},loadAdditionalFields(){return Mt(this,void 0,void 0,(function*(){const e=this.user_settings[this.supplier_portal_additional_fields_preference];logInfo(e,"preference"),e?yield this.getAdditionalFields():0==this.loading_settings&&(yield this.loadSupplierGroupOptions())}))},loadSupplierGroupOptions(){return Mt(this,void 0,void 0,(function*(){try{const e={doc_type:"SUPPLIER_M3"};let t=[];const a=yield x.bg.getFieldSettingsByType(e);a.field_setting.length>0&&(t=a.field_setting[0].rows.map((e=>e[0])));const r=t.find((e=>"supplier_group"===e.field_name));r&&(this.supplierGroupLOVKey=r.list_of_values,yield this.mapListOfValue([r.list_of_values]))}catch(e){logError(e)}}))},getAdditionalFields(){return Mt(this,void 0,void 0,(function*(){try{const e={doc_type:"SUPPLIER_M3"};let t=this.user_settings[this.supplier_portal_additional_fields];logInfo(this.user_settings[this.supplier_portal_additional_fields],"user settings");let a=[];if(!t)return;t=JSON.parse(t);const r=yield x.bg.getFieldSettingsByType(e);r.field_setting.length>0&&(a=r.field_setting[0].rows.map((e=>e[0])));const i=[],s=a.find((e=>"supplier_group"===e.field_name));let l=t.map((e=>{const t=a.find((t=>t.field_name===e));t&&t.list_of_values&&i.push(t.list_of_values);const r=null===t||void 0===t?void 0:t.field_name;return{[r]:t}}));l=Object.assign({},...l),this.additionalFields=l,i.length>0&&(s?(this.supplierGroupLOVKey=s.list_of_values,yield this.mapListOfValue([...i,s.list_of_values])):yield this.mapListOfValue(i))}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(e)}}))},mapListOfValue(e){return Mt(this,void 0,void 0,(function*(){try{const t=yield x.tA.getMultipleListOfValues(e.join(","));if(t.success){const e=t.data;for(const[t,r]of Object.entries(e)){const e=Object.values(this.additionalFields).find((e=>e.list_of_values===t));e&&(e.options=r.map((e=>({label:e.label?e.label:e.value,value:e.value}))))}const a=e[this.supplierGroupLOVKey];a&&(this.supplierOptionList=a.map((e=>({label:e.label?e.label:e.value,value:e.value}))))}}catch(t){logInfo(t)}}))},sendMagicLink(){return Mt(this,void 0,void 0,(function*(){try{const e=this.validateFiled();if(!e){this.dialogVisible=!1,this.loading=!0;const e={org_name:this.sppOrgName,supplier_type:this.sppGroup,responder_first_name:this.responderFirstName,responder_name:this.responderName,responder_email:this.responderEmail,erp_supplier_id:this.magic_link_selected_row.erp_supplier_id,supplier_lookup_record_id:this.magic_link_selected_row.supplier_lookup_record_id,existing_id:this.magic_link_selected_row.existing_id,additional_data:this.existMagicLinkData};yield x.Nf.sendMagicLink(e).then((e=>Mt(this,void 0,void 0,(function*(){e.success?(this.dialogVisible=!1,yield this.getDataServer(!0),this.showSuccessToast(this.$t("send_success"))):this.showErrorToast(null===e||void 0===e?void 0:e.message)})))).catch((e=>{logInfo(e,"error");const t=q.t.getErrorMessage(e);this.showErrorToast(t)}))}}catch(e){const t=q.t.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}}))},refreshFilters(e){this.init(),this.resetPagination(),this.resetFilter(),this.supplier_status=""},searchEvent(e){e.detail.data_type==this.type_name&&this.sortTable()},sortTable(){return Mt(this,void 0,void 0,(function*(){try{this.loading=!0,this.filter_data_json_str=this.getSearchJson(),yield this.getDataServer(!0)}catch(e){logInfo(e)}finally{this.loading=!1}}))},getSearchJson(){let e="",t={},a=[];return this.supplier_status&&(a.push({field:"status",operator:"smart",value:this.supplier_status}),t["filters"]=a,t["match_all"]=!1,e=JSON.stringify(t)),e},setRowStyle(e){if(e.hasOwnProperty("export_data_fetched")&&!0===e["export_data_fetched"])return"exported-row"},prepareFiltersForApiCall(){let e={filter_data_json:""};return e},init(){return Mt(this,void 0,void 0,(function*(){try{this.loading=!0,yield this.startSettingsFetch();this.user_settings[this.supplier_dashboard_setting];this.getOrderByColumns(),yield this.getDataServer(!0),this.prepareStatusList()}catch(e){logInfo(e)}finally{this.loading=!1}}))},getDataServer(e){return Mt(this,void 0,void 0,(function*(){try{this.loading=!0,e&&(this.show_table_loader=!0),yield this.getSupplierData()}catch(t){logError(t)}finally{this.loading=!1,this.show_table_loader=!1}}))},paginationItemClicked(){return Mt(this,void 0,void 0,(function*(){try{yield this.getDataServer(!0)}catch(e){logInfo(e)}finally{this.loading=!1}}))},prepareTableColumns(){return Mt(this,void 0,void 0,(function*(){this.tableColumns=yield this.getSavedColumns()}))},onDropColumns(){this.saveSortedColumns(this.tableColumns)},saveSortedColumns(e){return Mt(this,void 0,void 0,(function*(){let t=JSON.parse(JSON.stringify(e)),a={};t.forEach(((e,t)=>{a[e.field]={name:e.name,label:e.label,order:t,sortable:e.sortable,selected:!1,translation_key:e.translation_key,field:e.field},e.doc_type_key&&(a[e.name].doc_type_key=e.doc_type_key)})),yield this.updateSetting(this.supplier_dashboard_columns,JSON.stringify(a))}))},setCurrentPage(){return this.current_page>this.total_pages&&(this.current_page--,this.setCurrentPage()),this.current_page},calculateOffset(){this.offset=this.page_size*(this.current_page-1)},makeOrderByForCall(){const e=(0,re.nM)(this.sortby_data_types[this.type_name]["orderByMap"]);e&&0!=e.length&&(this.request_params["sort_order_json"]=JSON.stringify(e))},getOrderByColumns(){this.sortby_data_types[this.type_name]={},this.sortby_data_types[this.type_name]["orderByMap"]=(0,re.Q)(this.type_name)},navigate(e){const t=e.supplier_lookup_record_id?e.supplier_lookup_record_id:"supplier_lookup_record_id",a=e.supplier_as_org_id?e.supplier_as_org_id:"supplier_as_org_id";this.user_settings[this.supplier_portal_with_layout_setting];this.$router.push(`/supplier/details/${t}/${a}`)},getSupplierFields(){return Mt(this,void 0,void 0,(function*(){try{const e={doc_type:"SUPPLIER_M3"};let t=[];const a=yield x.bg.getFieldSettingsByType(e);return a.field_setting.length>0&&(t=a.field_setting[0].rows.map((e=>e[0]))),t}catch(e){logError(e);const t=q.t.getErrorMessage(e);return this.showErrorToast(t),[]}}))},getMultipleLOV(e){return Mt(this,void 0,void 0,(function*(){try{const t=yield x.tA.getMultipleListOfValues(e.join(","));return t.success?t.data:(this.showErrorToast(t.message),null)}catch(t){logError(t);const e=q.t.getErrorMessage(t);return this.showErrorToast(e),null}}))},loadSupplierStatusOptions(){return Mt(this,void 0,void 0,(function*(){try{const e=yield this.getSupplierFields(),t=e.find((e=>"status"===e.field_name));if(t){const e=t.list_of_values?yield this.getMultipleLOV([t.list_of_values]):[],a=e&&t.list_of_values?e[t.list_of_values]:null;a&&(this.supplierStatusList=a.map((e=>({label:e.label?e.label:e.value,value:e.value}))))}}catch(e){logError(e);const t=q.t.getErrorMessage(e);this.showErrorToast(t)}}))}},data(){return{selectedIndex:(0,A.KR)(0),columnListPreferenc:[],enableSaveColumnOrderBtn:(0,A.KR)(!1),supplier_dashboard_setting:V.t2,dialogVisible:!1,sppGroupError:"",sppNameError:"",responderFirstNameError:"",responderNameError:"",responderEmailError:"",show_table_loader:(0,A.KR)(!1),supplier_dashboard_columns:V.kY,getStatusByValue:w.getStatusByValue,dialogLoading:(0,A.KR)(!1),getSupplierGroupLabelByValue:w.getSupplierGroupLabelByValue,supplierGroupLOVKey:""}},setup(){const e=(0,D.bp)(),{current_supplier:t,pending_approval_supplier:a,display_data:r,loading:i,paginationCount:s,quickFilterMap:l,table_columns:n,supplier_status:o,sortby_data_types:p,created_dialog:d,pagination:u,additionalFields:c,supplierOptionList:_,supplierStatusList:g}=(0,E.bP)(e),{t:m}=(0,S.s9)(),{getSupplierData:h,toggleCreatedDialog:f,resetPagination:v,resetFilter:b,getSavedColumnPreference:y,getSavedColumns:k}=e,F=(0,P.Ml)(),{initFontSize:C}=F,L=(0,A.KR)();L.value=Object.values(JSON.parse(JSON.stringify(n.value))).map((e=>({name:e.name,required:!0,label:e.translation_key,field:e.field,actions:e.actions})));const q=(0,P.Bu)(),{user_settings:x,loading_settings:$}=(0,E.bP)(q),{startSettingsFetch:N,updateSetting:R,datePattern:Q}=q;return{getSavedColumns:k,user_settings:x,startSettingsFetch:N,getSupplierData:h,additionalFields:c,supplierOptionList:_,supplierStatusList:g,data_type:(0,A.KR)("supplier"),sortby_data_types:p,removeSortOrderFromStorage:re.oX,resetFilter:b,quickFilterMap:l,current_supplier:t,dashboard_supplier_store:e,display_data:r,filter_data:(0,A.KR)({}),pending_approval_supplier:a,loading:i,table_columns:n,loading_settings:$,paginationCount:s,resetPagination:v,update_columns:(0,A.KR)([]),request_params:(0,A.KR)({}),existMagicLinkData:(0,A.KR)({}),startfrom:(0,A.KR)(0),tableColumns:L,total_records:(0,A.KR)(0),offset:(0,A.KR)(0),filter_data_json_str:(0,A.KR)(""),supplier_status:o,supplierGroupOptions:w.supplierGroupOptions,sppGroup:(0,A.KR)(""),sppOrgName:(0,A.KR)(""),responderFirstName:(0,A.KR)(""),responderName:(0,A.KR)(""),responderEmail:(0,A.KR)(""),pagination:u,magic_link_selected_row:(0,A.KR)({}),initFontSize:C,supplier_portal_with_layout_setting:V.DG,supplier_portal_additional_fields_preference:V.ac,supplier_portal_additional_fields:V.Ut,updateSetting:R,getSavedColumnPreference:y,datePattern:Q,statusList:(0,A.KR)([])}}});var It=a(42315),Xt=a(44488),Tt=a(57722),Wt=a(45262),Bt=a(23954),Ut=a(53999),Gt=a(90124),zt=a(25173),jt=a(857),Jt=a(54700),Ht=a(39035),Yt=a(65265);const Zt=(0,le.A)(Kt,[["render",F],["__scopeId","data-v-114eaa64"]]),ea=Zt;pe()(Kt,"components",{QSeparator:yt.A,QTable:It.A,QTr:Xt.A,QTh:Tt.A,QTd:Wt.A,QBadge:Bt.A,QTooltip:ze.A,QBtn:be.A,QMenu:$e.A,QList:Ut.A,QItem:Gt.A,QItemSection:zt.A,QMarkupTable:jt.A,QPagination:Jt.A,QDialog:bt.A,QCard:et.A,QToolbar:tt.A,QToolbarTitle:at.A,QCardSection:it.A,QSelect:ne.A,QIcon:he.A,QInput:me.A,QCardActions:st.A,QInnerLoading:Ht.A,QField:je.A}),pe()(Kt,"directives",{Ripple:Yt.A,ClosePopup:ye.A})}}]);