"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[2933],{62933:(e,t,o)=>{o.r(t),o.d(t,{default:()=>$e});var l=o(61758);function s(e,t,o,s,i,n){const r=(0,l.g2)("SubHeaderWithoutHelp"),a=(0,l.g2)("SubDocTypesList");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(r,{name:"sub_doc_type",label:e.$t("sub_doc_type")},null,8,["label"]),(0,l.bF)(a)],64)}var i=o(58790),n=o(29104);const r={class:"container"},a={class:"full-width"},d=["onClick"],c=(0,l.Lk)("span",{class:"q-ml-sm q-mr-sm vertical-line"},null,-1),_=(0,l.Lk)("span",{class:"q-ml-sm q-mr-sm vertical-line"},null,-1),u=["onClick"],p=(0,l.Lk)("span",{class:"q-ml-sm q-mr-sm vertical-line"},null,-1),m=["onClick"],y=["src","onClick"],h=["src","onClick"],b={class:"q-ml-sm"},g=(0,l.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function w(e,t,o,s,w,f){const k=(0,l.g2)("SubHeader"),v=(0,l.g2)("f-btn"),F=(0,l.g2)("BackToSettings"),C=(0,l.g2)("q-td"),A=(0,l.g2)("LayoutBuilderBtn"),L=(0,l.g2)("q-btn"),q=(0,l.g2)("q-table"),T=(0,l.g2)("q-avatar"),E=(0,l.g2)("q-card-section"),Q=(0,l.g2)("q-card-actions"),R=(0,l.g2)("q-card"),$=(0,l.g2)("q-dialog"),x=(0,l.g2)("Create"),S=(0,l.g2)("CreateCopy"),K=(0,l.g2)("Edit"),D=(0,l.g2)("q-inner-loading"),N=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(k,{name:"sub_doc_type",label:e.$t("sub_doc_type"),onSearch:!1},null,8,["label"]),e.doc_type_key?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.bF)(F,{back_to_rotue:"/settings/document"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{class:"float-right",icon:"add",label:e.$t("new"),onClick:t[0]||(t[0]=t=>e.display_create_dialog=!0)},null,8,["label"])])),_:1}),(0,l.Lk)("div",r,[(0,l.Lk)("div",a,[(0,l.bF)(q,{class:"",rows:e.rows,columns:e.columns,"row-key":"name","no-data-label":e.$t("pages.messages.no_record_found"),flat:"",bordered:"","table-header-class":"highlighted-back text-uppercase","rows-per-page-options":[0]},{"body-cell-name":(0,l.k6)((e=>[(0,l.bF)(C,{props:e},{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.row.name),1)])),_:2},1032,["props"])])),"body-cell-action":(0,l.k6)((t=>[(0,l.bF)(C,{props:t},{default:(0,l.k6)((()=>[(0,l.Lk)("span",{class:"action-link no-border",onClick:o=>e.manageSettings("/settings/fields/"+t.row.doc_type_key+"/"+t.row.sub_doc_type_key)},(0,i.v_)(e.$t("fields")),9,d),e.LAYOUT_BUILDER_MODULE?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[c,(0,l.bF)(A,{doc_type_key:e.doc_type_key,sub_doc_type_key:t.row.sub_doc_type_key,extraction_type:t.row.extraction_type},null,8,["doc_type_key","sub_doc_type_key","extraction_type"])],64)):(0,l.Q3)("",!0),_,(0,l.Lk)("span",{class:"action-link no-border",onClick:o=>e.manageSettings("/settings/manage_scripts/"+t.row.doc_type_key+"/"+t.row.sub_doc_type_key)},(0,i.v_)(e.$t("scripts")),9,u),p,(0,l.Lk)("span",{class:"action-link no-border",onClick:o=>e.copy(t.row)},(0,i.v_)(e.$t("copy")),9,m),(0,l.bF)(L,{flat:"",color:"primary",class:""},{default:(0,l.k6)((()=>[(0,l.Lk)("img",{class:"img-fluid mb-14",width:"20",height:"20",src:e.$q.dark.isActive?"images/edit-dark.svg":"images/edit.svg",alt:"",onClick:o=>e.edit(t.row)},null,8,y)])),_:2},1024),(0,l.bF)(L,{flat:"",color:"primary",class:""},{default:(0,l.k6)((()=>[(0,l.Lk)("img",{class:"img-fluid mb-14",width:"20",height:"20",src:e.$q.dark.isActive?"images/trash-bin-default-dark.svg":"images/trash-bin-default.svg",alt:"",onClick:o=>{e.delete_id=t.row.id,e.delete_confirm=!0}},null,8,h)])),_:2},1024)])),_:2},1032,["props"])])),bottom:(0,l.k6)((()=>[])),_:1},8,["rows","columns","no-data-label"])])]),(0,l.bF)($,{modelValue:e.delete_confirm,"onUpdate:modelValue":t[2]||(t[2]=t=>e.delete_confirm=t),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(R,null,{default:(0,l.k6)((()=>[(0,l.bF)(E,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,l.k6)((()=>[(0,l.bF)(T,{icon:"warning",color:"primary"})])),_:1}),(0,l.bF)(E,{class:"row items-center"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",b,(0,i.v_)(e.$t("pages.messages.msg_delete")),1)])),_:1}),(0,l.bF)(Q,{align:"right"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(v,{appearance:"cancel",label:e.$t("pages.user.cancel")},null,8,["label"]),[[N]]),(0,l.bo)((0,l.bF)(v,{label:e.$t("pages.user.done"),onClick:t[1]||(t[1]=t=>e.deleteRow())},null,8,["label"]),[[N]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)($,{modelValue:e.display_create_dialog,"onUpdate:modelValue":t[3]||(t[3]=t=>e.display_create_dialog=t),persistent:"",onKeydown:t[4]||(t[4]=(0,n.jR)((t=>e.display_create_dialog=!1),["esc"]))},{default:(0,l.k6)((()=>[(0,l.bF)(x,{doc_type_key:e.doc_type_key},null,8,["doc_type_key"])])),_:1},8,["modelValue"]),(0,l.bF)($,{modelValue:e.display_create_copy_dialog,"onUpdate:modelValue":t[5]||(t[5]=t=>e.display_create_copy_dialog=t),persistent:"",onKeydown:t[6]||(t[6]=(0,n.jR)((t=>e.display_create_copy_dialog=!1),["esc"]))},{default:(0,l.k6)((()=>[(0,l.bF)(S,{copy_model:e.copy_model},null,8,["copy_model"])])),_:1},8,["modelValue"]),(0,l.bF)($,{modelValue:e.display_edit_dialog,"onUpdate:modelValue":t[7]||(t[7]=t=>e.display_edit_dialog=t),persistent:"",onKeydown:t[8]||(t[8]=(0,n.jR)((t=>e.display_edit_dialog=!1),["esc"]))},{default:(0,l.k6)((()=>[(0,l.bF)(K,{doc_type_key:e.doc_type_key,edit_model:e.edit_model},null,8,["doc_type_key","edit_model"])])),_:1},8,["modelValue"]),(0,l.bF)(D,{showing:e.processing},{default:(0,l.k6)((()=>[g])),_:1},8,["showing"])],64)):(0,l.Q3)("",!0)],64)}var f=o(24622),k=o(38734);const v={class:"text-weight-bold"},F={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},C={class:"full-width"},A={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},L={class:"full-width"},q=(0,l.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function T(e,t,o,s,r,a){const d=(0,l.g2)("q-toolbar-title"),c=(0,l.g2)("q-btn"),_=(0,l.g2)("q-toolbar"),u=(0,l.g2)("q-tooltip"),p=(0,l.g2)("q-icon"),m=(0,l.g2)("q-input"),y=(0,l.g2)("q-card-section"),h=(0,l.g2)("f-btn"),b=(0,l.g2)("q-card-actions"),g=(0,l.g2)("q-inner-loading"),w=(0,l.g2)("q-card"),f=(0,l.gN)("close-popup");return e.doc_type_key?((0,l.uX)(),(0,l.Wv)(w,{key:0,style:{width:"600px"}},{default:(0,l.k6)((()=>[(0,l.Lk)("form",{onSubmit:t[2]||(t[2]=(0,n.D$)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,l.bF)(_,{class:"secondary-toolbar"},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.Lk)("span",v,(0,i.v_)(e.$t("create_sub_type")),1)])),_:1}),(0,l.bo)((0,l.bF)(c,{flat:"",round:"",dense:"",icon:"close"},null,512),[[f]])])),_:1}),(0,l.bF)(y,{class:"q-pt-none"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",F,[(0,l.Lk)("div",C,[(0,l.bF)(m,{outlined:"",tabindex:"0",class:(0,i.C4)("full-width "+(e.new_model["sub_doc_type_error"]?"column-error-border":"")),modelValue:e.new_model["sub_doc_type"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["sub_doc_type"]=t),placeholder:e.$t("name"),hint:e.sub_doc_type_hint},{append:(0,l.k6)((()=>[e.new_model["sub_doc_type_error"]?((0,l.uX)(),(0,l.Wv)(p,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,l.k6)((()=>[""!=e.new_model["sub_doc_type"]?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,i.v_)(e.sub_doc_type_hint),1)],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)((0,i.v_)(e.$t("field_required")),1)],64))])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["class","modelValue","placeholder","hint"])])]),(0,l.Lk)("div",A,[(0,l.Lk)("div",L,[(0,l.bF)(m,{outlined:"",tabindex:"0",class:(0,i.C4)("full-width "+(e.new_model["title_error"]?"column-error-border":"")),modelValue:e.new_model["title"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.new_model["title"]=t),placeholder:e.$t("title")},{append:(0,l.k6)((()=>[e.new_model["title_error"]?((0,l.uX)(),(0,l.Wv)(p,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,l.k6)((()=>[""!=e.new_model["title"]?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,i.v_)(e.sub_doc_type_hint),1)],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)((0,i.v_)(e.$t("field_required")),1)],64))])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["class","modelValue","placeholder"])])])])),_:1}),(0,l.bF)(b,{align:"right"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(h,{appearance:"cancel",label:e.$t("cancel")},null,8,["label"]),[[f]]),(0,l.bF)(h,{type:"submit",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,l.bF)(g,{showing:e.loading},{default:(0,l.k6)((()=>[q])),_:1},8,["showing"])])),_:1})):(0,l.Q3)("",!0)}var E=o(68450),Q=o(11470),R=function(e,t,o,l){function s(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function n(e){try{a(l.next(e))}catch(t){i(t)}}function r(e){try{a(l["throw"](e))}catch(t){i(t)}}function a(e){e.done?o(e.value):s(e.value).then(n,r)}a((l=l.apply(e,t||[])).next())}))};const $=(0,l.pM)({el:"#app",mixins:[f.A],props:{doc_type_key:{type:String,default:""}},components:{},data(){return{title_hint:this.$t("only_characters_spaces"),sub_doc_type_hint:this.$t("only_characters_underscore")}},setup(){let e={};return{new_model:(0,k.KR)(e),loading:(0,k.KR)(!1)}},watch:{},mounted(){this.doc_type_key?this.setNewModel():this.showErrorToast("Doc Type is missing")},methods:{setNewModel(){this.new_model["name"]="",this.new_model["sub_doc_type"]="",this.new_model["title"]="",this.new_model["translation_key"]="",this.new_model["title_error"]=!1,this.new_model["sub_doc_type_error"]=!1},submitNewColumFrom(){return R(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):(this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(e))}finally{this.loading=!1}}))},saveNewRow(){return R(this,void 0,void 0,(function*(){const e={doc_type_key:this.doc_type_key,sub_doc_type:this.new_model["sub_doc_type"],title:this.new_model["title"]},t=yield Q.y2.create(e);if(t.message)throw new Error(t.message);this.setNewModel();const o=new CustomEvent("row_added",{detail:t});document.dispatchEvent(o),this.showSuccessToast("Record Created successfully")}))},validateRow(e){let t=!0;return e.sub_doc_type_error=!1,e.title_error=!1,e["sub_doc_type"]&&0!=e["sub_doc_type"].length&&(0,E.SW)(e["sub_doc_type"])||(e.sub_doc_type_error=!0,t=!1),e["title"]&&0!=e["title"].length||(e.title_error=!0,t=!1),t}}});var x=o(12807),S=o(23316),K=o(36914),D=o(39150),N=o(56384),V=o(44189),W=o(67837),X=o(50492),U=o(97410),M=o(62669),I=o(39035),O=o(88672),j=o(98582),B=o.n(j);const P=(0,x.A)($,[["render",T]]),z=P;B()($,"components",{QCard:S.A,QToolbar:K.A,QToolbarTitle:D.A,QBtn:N.A,QCardSection:V.A,QInput:W.A,QIcon:X.A,QTooltip:U.A,QCardActions:M.A,QInnerLoading:I.A}),B()($,"directives",{ClosePopup:O.A});const H={class:"text-weight-bold"},Y={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},G={class:"full-width"},J={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},Z={class:"full-width"},ee=(0,l.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function te(e,t,o,s,r,a){const d=(0,l.g2)("q-toolbar-title"),c=(0,l.g2)("q-btn"),_=(0,l.g2)("q-toolbar"),u=(0,l.g2)("q-tooltip"),p=(0,l.g2)("q-icon"),m=(0,l.g2)("q-input"),y=(0,l.g2)("q-card-section"),h=(0,l.g2)("f-btn"),b=(0,l.g2)("q-card-actions"),g=(0,l.g2)("q-inner-loading"),w=(0,l.g2)("q-card"),f=(0,l.gN)("close-popup");return e.doc_type_key?((0,l.uX)(),(0,l.Wv)(w,{key:0,style:{width:"600px"}},{default:(0,l.k6)((()=>[(0,l.Lk)("form",{onSubmit:t[2]||(t[2]=(0,n.D$)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,l.bF)(_,{class:"secondary-toolbar"},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.Lk)("span",H,(0,i.v_)(e.$t("edit_sub_type")),1)])),_:1}),(0,l.bo)((0,l.bF)(c,{flat:"",round:"",dense:"",icon:"close"},null,512),[[f]])])),_:1}),(0,l.bF)(y,{class:"q-pt-none"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Y,[(0,l.Lk)("div",G,[(0,l.bF)(m,{outlined:"",tabindex:"0",class:(0,i.C4)("full-width "+(e.new_model["sub_doc_type_error"]?"column-error-border":"")),modelValue:e.new_model["sub_doc_type"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["sub_doc_type"]=t),placeholder:e.$t("name"),hint:e.sub_doc_type_hint,readonly:""},{append:(0,l.k6)((()=>[e.new_model["sub_doc_type_error"]?((0,l.uX)(),(0,l.Wv)(p,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,l.k6)((()=>[""!=e.new_model["sub_doc_type"]?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,i.v_)(e.sub_doc_type_hint),1)],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)((0,i.v_)(e.$t("field_required")),1)],64))])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["class","modelValue","placeholder","hint"])])]),(0,l.Lk)("div",J,[(0,l.Lk)("div",Z,[(0,l.bF)(m,{outlined:"",tabindex:"0",class:(0,i.C4)("full-width "+(e.new_model["title_error"]?"column-error-border":"")),modelValue:e.new_model["title"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.new_model["title"]=t),placeholder:e.$t("title")},{append:(0,l.k6)((()=>[e.new_model["title_error"]?((0,l.uX)(),(0,l.Wv)(p,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,l.k6)((()=>[""!=e.new_model["title"]?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,i.v_)(e.sub_doc_type_hint),1)],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)((0,i.v_)(e.$t("field_required")),1)],64))])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["class","modelValue","placeholder"])])])])),_:1}),(0,l.bF)(b,{align:"right"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(h,{appearance:"cancel",label:e.$t("cancel")},null,8,["label"]),[[f]]),(0,l.bF)(h,{type:"submit",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,l.bF)(g,{showing:e.loading},{default:(0,l.k6)((()=>[ee])),_:1},8,["showing"])])),_:1})):(0,l.Q3)("",!0)}var oe=function(e,t,o,l){function s(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function n(e){try{a(l.next(e))}catch(t){i(t)}}function r(e){try{a(l["throw"](e))}catch(t){i(t)}}function a(e){e.done?o(e.value):s(e.value).then(n,r)}a((l=l.apply(e,t||[])).next())}))};const le=(0,l.pM)({el:"#app",mixins:[f.A],props:{edit_model:{},doc_type_key:{type:String,default:""}},components:{},data(){return{title_hint:this.$t("only_characters_spaces"),sub_doc_type_hint:this.$t("only_characters_underscore")}},setup(){let e={};return{new_model:(0,k.KR)(e),loading:(0,k.KR)(!1)}},watch:{},mounted(){this.doc_type_key?this.setNewModel():this.showErrorToast("Doc Type is missing")},methods:{setNewModel(){logInfo("new model",this.edit_model),this.new_model["title_error"]=!1,this.new_model["sub_doc_type_error"]=!1,this.new_model=Object.assign(this.new_model,this.edit_model)},submitNewColumFrom(){return oe(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):(this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(e))}finally{this.loading=!1}}))},saveRow(){return oe(this,void 0,void 0,(function*(){const e={id:this.new_model.id,title:this.new_model.title},t=yield Q.y2.edit(e);if(!t.success)throw new Error(t.message);this.setNewModel();const o=new CustomEvent("row_edited",{detail:e});document.dispatchEvent(o),this.showSuccessToast("Record Update Successfully")}))},validateRow(e){let t=!0;return e.sub_doc_type_error=!1,e.title_error=!1,e["sub_doc_type"]&&0!=e["sub_doc_type"].length&&(0,E.SW)(e["sub_doc_type"])||(e.sub_doc_type_error=!0,t=!1),e["title"]&&0!=e["title"].length||(e.title_error=!0,t=!1),t}}}),se=(0,x.A)(le,[["render",te]]),ie=se;B()(le,"components",{QCard:S.A,QToolbar:K.A,QToolbarTitle:D.A,QBtn:N.A,QCardSection:V.A,QInput:W.A,QIcon:X.A,QTooltip:U.A,QCardActions:M.A,QInnerLoading:I.A}),B()(le,"directives",{ClosePopup:O.A});const ne={class:"text-weight-bold"},re={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},ae={class:"full-width"},de={class:"text-weight-bold"},ce={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},_e={class:"full-width"},ue=(0,l.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function pe(e,t,o,s,r,a){const d=(0,l.g2)("q-toolbar-title"),c=(0,l.g2)("q-btn"),_=(0,l.g2)("q-toolbar"),u=(0,l.g2)("q-tooltip"),p=(0,l.g2)("q-icon"),m=(0,l.g2)("q-input"),y=(0,l.g2)("q-card-section"),h=(0,l.g2)("q-card-actions"),b=(0,l.g2)("q-inner-loading"),g=(0,l.g2)("q-card"),w=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(g,{style:{width:"600px"}},{default:(0,l.k6)((()=>[(0,l.Lk)("form",{onSubmit:t[1]||(t[1]=(0,n.D$)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,l.bF)(_,{class:"text-white secondary-toolbar"},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.Lk)("span",ne,(0,i.v_)(e.$t("clone_sub_type")),1)])),_:1}),(0,l.bo)((0,l.bF)(c,{flat:"",round:"",dense:"",icon:"close"},null,512),[[w]])])),_:1}),(0,l.bF)(y,{class:"q-pt-none"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",re,[(0,l.Lk)("div",ae,[(0,l.eW)((0,i.v_)(e.$t("duplicate_from"))+" ",1),(0,l.Lk)("span",de,(0,i.v_)(e.new_model["duplicate_from_name"]),1)])]),(0,l.Lk)("div",ce,[(0,l.Lk)("div",_e,[(0,l.bF)(m,{outlined:"",tabindex:"0",class:(0,i.C4)("full-width "+(e.new_model["sub_doc_type_error"]?"column-error-border":"")),modelValue:e.new_model["sub_doc_type"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["sub_doc_type"]=t),placeholder:e.$t("name"),hint:e.sub_doc_type_hint},{append:(0,l.k6)((()=>[e.new_model["sub_doc_type_error"]?((0,l.uX)(),(0,l.Wv)(p,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,l.k6)((()=>[""!=e.new_model["sub_doc_type"]?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,i.v_)(e.sub_doc_type_hint),1)],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)((0,i.v_)(e.$t("field_required")),1)],64))])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["class","modelValue","placeholder","hint"])])])])),_:1}),(0,l.bF)(h,{align:"right"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(c,{class:"bg-grey-3",label:e.$t("cancel")},null,8,["label"]),[[w]]),(0,l.bF)(c,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,l.bF)(b,{showing:e.loading},{default:(0,l.k6)((()=>[ue])),_:1},8,["showing"])])),_:1})}var me=function(e,t,o,l){function s(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function n(e){try{a(l.next(e))}catch(t){i(t)}}function r(e){try{a(l["throw"](e))}catch(t){i(t)}}function a(e){e.done?o(e.value):s(e.value).then(n,r)}a((l=l.apply(e,t||[])).next())}))};const ye=(0,l.pM)({el:"#app",mixins:[f.A],props:{copy_model:{}},components:{},data(){return{sub_doc_type_hint:this.$t("only_characters_underscore")}},setup(){let e={};return{new_model:(0,k.KR)(e),loading:(0,k.KR)(!1)}},watch:{},mounted(){this.setNewModel()},methods:{setNewModel(){this.new_model["sub_doc_type"]="",this.new_model["sub_doc_type_error"]=!1,this.new_model=Object.assign(this.new_model,this.copy_model)},submitNewColumFrom(){return me(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):(this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(e))}finally{this.loading=!1}}))},saveNewRow(){return me(this,void 0,void 0,(function*(){const e={from_sub_doc_type:this.new_model["from_sub_doc_type"],to_sub_doc_type:this.new_model["sub_doc_type"]},t=yield Q.y2.createCopy(e);if(!1===t.success){if(t.message)throw{message:t.message};throw t}this.setNewModel();const o=new CustomEvent("row_cloned",{detail:t});document.dispatchEvent(o),this.showSuccessToast("Record Created successfully")}))},validateRow(e){let t=!0;return e.sub_doc_type_error=!1,e.title_error=!1,e["sub_doc_type"]&&0!=e["sub_doc_type"].length&&(0,E.SW)(e["sub_doc_type"])||(e.sub_doc_type_error=!0,t=!1),t}}}),he=(0,x.A)(ye,[["render",pe]]),be=he;B()(ye,"components",{QCard:S.A,QToolbar:K.A,QToolbarTitle:D.A,QBtn:N.A,QCardSection:V.A,QInput:W.A,QIcon:X.A,QTooltip:U.A,QCardActions:M.A,QInnerLoading:I.A}),B()(ye,"directives",{ClosePopup:O.A});var ge=o(66693),we=o(25773),fe=o(47414),ke=o(1595),ve=function(e,t,o,l){function s(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function n(e){try{a(l.next(e))}catch(t){i(t)}}function r(e){try{a(l["throw"](e))}catch(t){i(t)}}function a(e){e.done?o(e.value):s(e.value).then(n,r)}a((l=l.apply(e,t||[])).next())}))};const Fe=(0,l.pM)({el:"#app",mixins:[f.A],components:{SubHeader:ge.A,Create:z,Edit:ie,LayoutBuilderBtn:fe.A,CreateCopy:be,BackToSettings:we.A},data(){return{doc_type_key:""}},mounted(){this.initView(),document.addEventListener("row_added",this.rowAdded),document.addEventListener("row_cloned",this.rowClonedDone),document.addEventListener("row_edited",this.rowEdited),document.addEventListener("update_current_user_orgs",this.updateCurrentUserOrganizations)},methods:{initView(){return ve(this,void 0,void 0,(function*(){try{if(this.processing=!0,this.doc_type_key=String(this.$route.params.doc_key),!this.doc_type_key)return void this.showErrorToast("Doc Type is missing");yield this.getList(),this.prepareColumns(),this.getTemplatesForDocuments()}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(e)}finally{this.processing=!1}}))},rowAdded(e){e&&e.detail&&(this.display_create_dialog=!1,this.addNewRow(e.detail),this.resetDocTypesSubDocTypes())},rowClonedDone(e){e&&e.detail&&(this.display_create_copy_dialog=!1,this.getList(),this.resetDocTypesSubDocTypes())},rowEdited(e){e&&e.detail&&(this.display_edit_dialog=!1,this.editRow(e.detail),this.resetDocTypesSubDocTypes())},deleteRow(){return ve(this,void 0,void 0,(function*(){try{if(!this.delete_id)return;this.processing=!0,yield Q.y2.delete(this.delete_id);let e=-1;this.rows.forEach(((t,o)=>{t["id"]===this.delete_id&&(e=o)})),-1!==e&&delete this.rows[e],this.delete_id="",yield this.resetDocTypesSubDocTypes()}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(e)}finally{this.processing=!1}}))},getList(){return ve(this,void 0,void 0,(function*(){this.processing=!0;const e=yield Q.y2.get(this.doc_type_key);e.data&&(this.prepareRows(e.data),this.processing=!1)}))},prepareColumns(){this.columns=[],this.columns.push(Object.assign({},{name:"name",label:"Name",field:"name",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(e){if(e){this.rows=[];for(let[t,o]of Object.entries(e)){const e=o;this.addNewRow(e)}}},addNewRow(e){let t=Object.assign({},e);return this.rows.push(t),this.rows.length.toString()},editRow(e){this.rows.find((t=>{t.id===e.id&&(t.title=e.title)}))},manageSettings(e){this.$router.push(e)},getSubDocTypeForDuplicate(e){const t=this.rows.filter((t=>t.name===e));return 0==t.length?String(e):e+"_copy"},copy(e){this.copy_model={sub_doc_type:this.getSubDocTypeForDuplicate(e.name+"_copy"),from_sub_doc_type:e.sub_doc_type_key,duplicate_from_name:e.name},this.display_create_copy_dialog=!0},edit(e){this.edit_model={id:e.id,sub_doc_type:e.name,title:e.title,translation_key:e.translation_key},this.display_edit_dialog=!0}},setup(){const e=(0,ke.uL)(),{getTemplatesForDocuments:t}=e,o=(0,ke.cY)(),{resetDocTypesSubDocTypes:l}=o;return{resetDocTypesSubDocTypes:l,getTemplatesForDocuments:t,display_users_dialog:(0,k.KR)(!1),display_create_dialog:(0,k.KR)(!1),display_create_copy_dialog:(0,k.KR)(!1),display_edit_dialog:(0,k.KR)(!1),copy_model:(0,k.KR)({}),edit_model:(0,k.KR)({}),selectedId:(0,k.KR)(""),selectedName:(0,k.KR)(""),columns:(0,k.KR)([]),rows:(0,k.KR)([]),delete_confirm:(0,k.KR)(!1),delete_id:(0,k.KR)(""),processing:(0,k.KR)(!1),LAYOUT_BUILDER_MODULE:(0,k.KR)(!0)}}});var Ce=o(42315),Ae=o(45262),Le=o(82156),qe=o(3952);const Te=(0,x.A)(Fe,[["render",w]]),Ee=Te;B()(Fe,"components",{QBtn:N.A,QIcon:X.A,QTable:Ce.A,QTd:Ae.A,QDialog:Le.A,QCard:S.A,QCardSection:V.A,QAvatar:qe.A,QCardActions:M.A,QInnerLoading:I.A}),B()(Fe,"directives",{ClosePopup:O.A});const Qe=(0,l.pM)({el:"#app",mixins:[],components:{SubDocTypesList:Ee},data(){return{}},setup(){return{}}}),Re=(0,x.A)(Qe,[["render",s]]),$e=Re}}]);