"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[4816],{54816:(e,t,l)=>{l.r(t),l.d(t,{default:()=>st});var i=l(61758),o=l(58790);const n={class:"container page-height-limit"},a={style:{width:"100%"}},s={class:"mt-3"},d={class:"mt-3"},r={class:"mt-3"},c={class:"mt-3"};function u(e,t,l,u,p,g){const h=(0,i.g2)("SubHeader"),f=(0,i.g2)("BackToSettings"),m=(0,i.g2)("q-icon"),b=(0,i.g2)("q-space"),_=(0,i.g2)("q-separator"),v=(0,i.g2)("SupplierPortalAdditionalFields"),k=(0,i.g2)("q-card-section"),F=(0,i.g2)("q-card"),y=(0,i.g2)("q-expansion-item"),w=(0,i.g2)("CompanyLogo"),q=(0,i.g2)("PolicyPrivacy"),L=(0,i.g2)("EDI_SpecificationDocument"),x=(0,i.g2)("q-list");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(h,{name:"settings_supplier_info",onSearch:!1,label:e.$t("supplier_general_setting")},null,8,["label"]),(0,i.bF)(f),(0,i.Lk)("div",n,[(0,i.Lk)("div",a,[(0,i.Lk)("div",null,[(0,i.bF)(x,{bordered:"",class:"rounded-borders"},{default:(0,i.k6)((()=>[(0,i.bF)(y,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,i.k6)((()=>[(0,i.bF)(m,{size:"25px",class:"q-mr-lg black_to_white",name:"img:images/settings_dark.svg"}),(0,i.Lk)("span",s,(0,o.v_)(e.$t("general")),1),(0,i.bF)(b)])),default:(0,i.k6)((()=>[(0,i.bF)(_),(0,i.bF)(F,{class:"page-background"},{default:(0,i.k6)((()=>[(0,i.bF)(k,null,{default:(0,i.k6)((()=>[(0,i.bF)(v)])),_:1})])),_:1})])),_:1}),(0,i.bF)(y,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,i.k6)((()=>[(0,i.bF)(m,{size:"25px",class:"q-mr-lg black_to_white",name:"img:settings/firmeninformation.svg"}),(0,i.Lk)("span",d,(0,o.v_)(e.$t("pages.settings.supplier_logo.upload_logo")),1),(0,i.bF)(b)])),default:(0,i.k6)((()=>[(0,i.bF)(_),(0,i.bF)(F,{class:"page-background"},{default:(0,i.k6)((()=>[(0,i.bF)(k,null,{default:(0,i.k6)((()=>[(0,i.bF)(w)])),_:1})])),_:1})])),_:1}),(0,i.bF)(y,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,i.k6)((()=>[(0,i.bF)(m,{size:"25px",class:"q-mr-lg black_to_white",name:"img:settings/terms-and-conditions-icon.svg"}),(0,i.Lk)("span",r,(0,o.v_)(e.$t("policy_privacy_statement")),1),(0,i.bF)(b)])),default:(0,i.k6)((()=>[(0,i.bF)(_),(0,i.bF)(F,{class:"page-background"},{default:(0,i.k6)((()=>[(0,i.bF)(k,null,{default:(0,i.k6)((()=>[(0,i.bF)(q)])),_:1})])),_:1})])),_:1}),(0,i.bF)(y,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,i.k6)((()=>[(0,i.bF)(m,{size:"25px",class:"q-mr-lg black_to_white",name:"img:settings/documents.svg"}),(0,i.Lk)("span",c,(0,o.v_)(e.$t("edi_specification_document")),1),(0,i.bF)(b)])),default:(0,i.k6)((()=>[(0,i.bF)(_),(0,i.bF)(F,{class:"page-background"},{default:(0,i.k6)((()=>[(0,i.bF)(k,null,{default:(0,i.k6)((()=>[(0,i.bF)(L)])),_:1})])),_:1})])),_:1})])),_:1})])])])],64)}var p=l(66693),g=l(25773);const h={class:"row q-gutter-md q-pl-xl"},f={class:"flex-1"},m={class:""},b={class:"row"},_={style:{width:"30%"}},v={class:"q-ml-md",style:{width:"30%"}},k={class:"text-weight-bold"};function F(e,t,l,n,a,s){const d=(0,i.g2)("q-icon"),r=(0,i.g2)("q-file"),c=(0,i.g2)("q-img"),u=(0,i.g2)("q-card-section"),p=(0,i.g2)("q-card"),g=(0,i.g2)("f-btn"),F=(0,i.g2)("q-toolbar-title"),y=(0,i.g2)("q-btn"),w=(0,i.g2)("q-toolbar"),q=(0,i.g2)("q-card-actions"),L=(0,i.g2)("q-dialog"),x=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.CE)("div",h,[(0,i.Lk)("div",f,[(0,i.Lk)("div",m,[(0,i.Lk)("div",b,[(0,i.Lk)("div",_,[(0,i.bF)(p,null,{default:(0,i.k6)((()=>[(0,i.bF)(u,null,{default:(0,i.k6)((()=>{var l,n;return[(0,i.bF)(r,{class:"flex-1",modelValue:e.uploadFile,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.uploadFile=t),e.handleUpload],label:e.$t("pages.settings.supplier_logo.upload_logo"),filled:"",accept:".png,.jpg,.jpeg,.webp","aria-placeholder":"Upload Logo",standout:!0,outlined:!0,counter:!1,"label-slot":!e.uploadFile},(0,i.eX)({prepend:(0,i.k6)((()=>[(0,i.bF)(d,{name:"attach_file"})])),append:(0,i.k6)((()=>[(0,i.bF)(d,{name:"laptop",class:(0,o.C4)("cursor-pointer text-primary")})])),_:2},[e.uploadFile?void 0:{name:"label",fn:(0,i.k6)((()=>{var t,l;return[(0,i.eW)((0,o.v_)(null===(l=null===(t=e.logoObject)||void 0===t?void 0:t.desktop)||void 0===l?void 0:l.filename),1)]})),key:"0"}]),1032,["modelValue","label","onUpdate:modelValue","label-slot"]),(0,i.bF)(c,{src:null===(n=null===(l=e.logoObject)||void 0===l?void 0:l.desktop)||void 0===n?void 0:n.logo,class:"q-mt-md company-logo"},null,8,["src"])]})),_:1})])),_:1})]),(0,i.Lk)("div",v,[(0,i.bF)(p,null,{default:(0,i.k6)((()=>[(0,i.bF)(u,null,{default:(0,i.k6)((()=>{var l,n;return[(0,i.bF)(r,{class:"flex-1",modelValue:e.uploadFileMoblie,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.uploadFileMoblie=t),t[2]||(t[2]=t=>e.handleUpload(t,"mobile"))],label:e.$t("pages.settings.supplier_logo.upload_logo"),filled:"",accept:".png,.jpg,.jpeg,.webp","aria-placeholder":"Upload Logo",standout:!0,outlined:!0,counter:!1,"label-slot":!e.uploadFile},(0,i.eX)({prepend:(0,i.k6)((()=>[(0,i.bF)(d,{name:"attach_file"})])),append:(0,i.k6)((()=>[(0,i.bF)(d,{name:"smartphone",class:(0,o.C4)("cursor-pointer text-primary")})])),_:2},[e.uploadFile?void 0:{name:"label",fn:(0,i.k6)((()=>{var t,l;return[(0,i.eW)((0,o.v_)(null===(l=null===(t=e.logoObject)||void 0===t?void 0:t.mobile)||void 0===l?void 0:l.filename),1)]})),key:"0"}]),1032,["modelValue","label","label-slot"]),(0,i.bF)(c,{src:null===(n=null===(l=e.logoObject)||void 0===l?void 0:l.mobile)||void 0===n?void 0:n.logo,class:"q-mt-md company-logo",fit:"fill"},null,8,["src"])]})),_:1})])),_:1})])]),(0,i.bF)(g,{class:"float-right q-mr-sm q-mt-md",label:e.$t("save"),onClick:e.saveLogo},null,8,["label","onClick"])])]),(0,i.bF)(L,{modelValue:e.dialog,"onUpdate:modelValue":t[3]||(t[3]=t=>e.dialog=t)},{default:(0,i.k6)((()=>[(0,i.bF)(p,{style:{width:"1400px","max-width":"80vw"}},{default:(0,i.k6)((()=>[(0,i.bF)(w,{class:"text-white secondary-toolbar"},{default:(0,i.k6)((()=>[(0,i.bF)(F,null,{default:(0,i.k6)((()=>[(0,i.Lk)("span",k,(0,o.v_)(e.$t("preview")),1)])),_:1}),(0,i.bo)((0,i.bF)(y,{flat:"",round:"",dense:"",icon:"close"},null,512),[[x]])])),_:1}),(0,i.bF)(u,{class:"q-pt-lg q-pb-lg",style:{"align-content":"center",display:"flex"}},{default:(0,i.k6)((()=>[(0,i.bF)(c,{style:{"max-width":"50%","max-height":"50%",margin:"0 auto !important",border:"1px solid"},src:e.imageUrl,"spinner-color":"white",fit:"fill"},null,8,["src"])])),_:1}),(0,i.bF)(q,{align:"right",class:"bg-white text-teal"},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.bF)(g,{flat:"",label:e.$t("close")},null,8,["label"]),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var y=l(38734),w=l(24622),q=l(18505),L=l(11470),x=l(64775),A=function(e,t,l,i){function o(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,n){function a(e){try{d(i.next(e))}catch(t){n(t)}}function s(e){try{d(i["throw"](e))}catch(t){n(t)}}function d(e){e.done?l(e.value):o(e.value).then(a,s)}d((i=i.apply(e,t||[])).next())}))};const E=(0,i.pM)({el:"#app",mixins:[q.A,w.A],components:{},setup(){const e=(0,y.KR)(null),t=(0,y.KR)(null),l=(0,y.KR)(!1),i=(0,y.KR)({desktop:{filename:"default",logo:"images/fellowpro-logo.png"},mobile:{filename:"default",logo:"images/fellowpro-logo.png"}}),o=(e,t="desktop")=>{if(e){const l=new FileReader;l.readAsDataURL(e),l.onload=()=>{i.value=Object.assign(Object.assign({},i.value),{[t]:{filename:e.name,logo:l.result}})},l.onerror=e=>{logError("Error converting file to base64:",e)}}};return{uploadFile:e,uploadFileMoblie:t,handleUpload:o,dialog:l,logoObject:i}},mounted(){this.init()},methods:{init(){return A(this,void 0,void 0,(function*(){yield this.fetchLogo()}))},saveLogo(){return A(this,void 0,void 0,(function*(){try{const e=L.KT.getOrgId();yield L.KT.updateLogo(`logo_${e}`,JSON.stringify(this.logoObject)),this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(e){const t=x.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}}))},fetchLogo(){return A(this,void 0,void 0,(function*(){try{const e=L.KT.getOrgId(),t=JSON.parse(yield L.KT.getLogo(`logo_${e}`));t&&(this.logoObject=t)}catch(e){const t=x.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}}))}}});var C=l(12807),$=l(23316),U=l(44189),Q=l(99980),S=l(50492),T=l(15046),V=l(82156),I=l(36914),X=l(39150),D=l(56384),K=l(62669),P=l(88672),j=l(98582),R=l.n(j);const O=(0,C.A)(E,[["render",F],["__scopeId","data-v-c462ca2c"]]),M=O;R()(E,"components",{QCard:$.A,QCardSection:U.A,QFile:Q.A,QIcon:S.A,QImg:T.A,QDialog:V.A,QToolbar:I.A,QToolbarTitle:X.A,QBtn:D.A,QCardActions:K.A}),R()(E,"directives",{ClosePopup:P.A});const N={class:"col-12 q-mt-sm q-mb-sm"},W={class:"row full-width justify-center"},z=["src"],B={key:1,class:"q-mt-lg"},J=(0,i.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function H(e,t,l,n,a,s){const d=(0,i.g2)("f-btn"),r=(0,i.g2)("q-inner-loading");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",N,[(0,i.Lk)("input",{type:"file",ref:"fileInput",accept:"application/pdf",onChange:t[0]||(t[0]=(...t)=>e.handleFileUpload&&e.handleFileUpload(...t)),hidden:""},null,544),(0,i.bF)(d,{label:e.$t("upload_document"),class:"float-right q-mb-md q-mr-sm",onClick:e.triggerFileUpload},null,8,["label","onClick"]),(0,i.Lk)("div",W,[e.url?((0,i.uX)(),(0,i.CE)("iframe",{key:0,src:e.url,title:"pdf Document",width:"90%",height:"900px"},null,8,z)):((0,i.uX)(),(0,i.CE)("div",B,(0,o.v_)(e.$t("no_policy_statement_status")),1))])]),(0,i.bF)(r,{showing:e.loading},{default:(0,i.k6)((()=>[J])),_:1},8,["showing"])],64)}var G=l(42102),Y=l(1659),Z=function(e,t,l,i){function o(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,n){function a(e){try{d(i.next(e))}catch(t){n(t)}}function s(e){try{d(i["throw"](e))}catch(t){n(t)}}function d(e){e.done?l(e.value):o(e.value).then(a,s)}d((i=i.apply(e,t||[])).next())}))};const ee=(0,i.pM)({el:"#app",mixins:[q.A,w.A],components:{},mounted(){return Z(this,void 0,void 0,(function*(){yield this.getFile()}))},methods:{triggerFileUpload(){this.$refs.fileInput.click()},handleFileUpload(e){return Z(this,void 0,void 0,(function*(){const t=e.target.files[0];try{yield this.uploadTerm(t),this.showSuccessToast(this.$t("upload_success"))}catch(l){logInfo(l,"error")}}))},fileUrl(e){if(e)return URL.createObjectURL(e)}},setup(){const e=(0,G.y)(),{uploadTerm:t,getFile:l}=e,{loading:i,url:o}=(0,Y.bP)(e);return{uploadTerm:t,loading:i,url:o,getFile:l,pdfFileUpload:(0,y.KR)(null)}}});var te=l(39035);const le=(0,C.A)(ee,[["render",H]]),ie=le;R()(ee,"components",{QInnerLoading:te.A});const oe=e=>((0,i.Qi)("data-v-466574c0"),e=e(),(0,i.jt)(),e),ne={class:"container q-pa-xl"},ae={style:{width:"100%"}},se={class:"row"},de={style:{width:"30%",margin:"auto"}},re={style:{width:"10%","margin-top":"1%"}},ce={key:0,class:"row q-my-auto",style:{width:"60%"}},ue={key:1,class:"row q-my-auto",style:{width:"60%"}},pe=oe((()=>(0,i.Lk)("div",{class:"row q-my-auto",style:{width:"60%"}},null,-1)));function ge(e,t,l,n,a,s){const d=(0,i.g2)("q-toggle"),r=(0,i.g2)("q-select");return(0,i.uX)(),(0,i.CE)("div",ne,[(0,i.Lk)("div",ae,[(0,i.Lk)("div",se,[(0,i.Lk)("div",de,(0,o.v_)(e.$t("supplier_portal_additional_invitation_fields")),1),(0,i.Lk)("div",re,[(0,i.bF)(d,{modelValue:e.user_settings[e.supplier_portal_additional_fields_preference],"onUpdate:modelValue":[t[0]||(t[0]=t=>e.user_settings[e.supplier_portal_additional_fields_preference]=t),e.handleTogglePreference]},null,8,["modelValue","onUpdate:modelValue"])]),e.user_settings[e.supplier_portal_additional_fields_preference]?((0,i.uX)(),(0,i.CE)("div",ce,[(0,i.bF)(r,{outlined:"",class:"back-white",dense:"",modelValue:e.supplierFields,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.supplierFields=t),e.handleUpdateAdditionalFields],multiple:"",options:e.field_options,loading:e.loading,label:e.$t("fields"),style:{"min-width":"250px"},"emit-value":"","map-options":""},null,8,["modelValue","options","loading","label","onUpdate:modelValue"])])):((0,i.uX)(),(0,i.CE)("div",ue))]),pe])])}var he=l(1595),fe=l(76956),me=function(e,t,l,i){function o(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,n){function a(e){try{d(i.next(e))}catch(t){n(t)}}function s(e){try{d(i["throw"](e))}catch(t){n(t)}}function d(e){e.done?l(e.value):o(e.value).then(a,s)}d((i=i.apply(e,t||[])).next())}))};const be=(0,i.pM)({el:"#app",mixins:[w.A],components:{},data(){return{supplier_portal_additional_fields_preference:fe.ac,supplier_portal_additional_fields:fe.Ut,field_setting:(0,y.KR)([]),field_options:(0,y.KR)([]),supplierFields:(0,y.KR)()}},watch:{loading_settings:{handler:function(e,t){return me(this,void 0,void 0,(function*(){1==e&&0==t||this.user_settings[fe.ac]&&(yield this.getDefaultFields(),this.initView())}))}}},mounted:function(){return me(this,void 0,void 0,(function*(){try{this.loading=!0,this.initView(),yield this.getDefaultFields()}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(e)}finally{this.loading=!1}}))},setup(){const e=(0,he.Bu)(),{user_settings:t,loading_settings:l}=(0,Y.bP)(e),{updateSetting:i}=e;return{user_settings:t,loading_settings:l,loading:(0,y.KR)(!1),updateSetting:i}},methods:{initView(){this.user_settings[this.supplier_portal_additional_fields_preference]||(this.user_settings[this.supplier_portal_additional_fields_preference]=!1),this.supplierFields=this.user_settings[this.supplier_portal_additional_fields],this.supplierFields&&(this.supplierFields=JSON.parse(this.supplierFields))},handleUpdateAdditionalFields(e){return me(this,void 0,void 0,(function*(){try{yield this.updateSetting(fe.Ut,JSON.stringify(e)),this.user_settings[fe.Ut]=JSON.stringify(e),this.showSuccessToast(this.$t("save_successfully"))}catch(t){const e=x.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}}))},handleTogglePreference(e){return me(this,void 0,void 0,(function*(){try{e&&(this.loading=!0,this.initView(),yield this.getDefaultFields()),this.updateSetting(fe.ac,e),this.user_settings[fe.ac]=e,this.showSuccessToast(this.$t("save_successfully"))}catch(t){const e=x.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}finally{this.loading=!1}}))},getDefaultFields(){var e;return me(this,void 0,void 0,(function*(){try{const t={doc_type:"SUPPLIER_M3"},l=yield L.bg.getFieldSettingsByType(t);if(this.field_setting=l.field_setting,this.field_setting.length>0){const t=this.field_setting[0];this.field_options=null===(e=null===t||void 0===t?void 0:t.rows)||void 0===e?void 0:e.map((e=>({label:e[0].title,value:e[0].field_name})))}}catch(t){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(t)}}))}}});var _e=l(66908),ve=l(94940);const ke=(0,C.A)(be,[["render",ge],["__scopeId","data-v-466574c0"]]),Fe=ke;R()(be,"components",{QToggle:_e.A,QSelect:ve.A});var ye=l(29104);const we={class:"col-12 q-mt-sm q-mb-md"},qe={class:"row full-width q-pl-sm q-pr-sm"},Le={class:"col-12"},xe={class:"table-header-text"},Ae={key:0,class:"cursor-default"},Ee={key:1,class:"q-pr-md"},Ce={key:0},$e={key:1},Ue={key:2,class:"text-center"},Qe={key:1},Se={colspan:"5",class:"text-h4 text-center"},Te={class:"text-weight-bold"},Ve={class:"col-12 mt-10 q-pa-sm"},Ie=["src"],Xe={class:"q-ml-sm"},De=(0,i.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function Ke(e,t,l,n,a,s){const d=(0,i.g2)("f-btn"),r=(0,i.g2)("q-tooltip"),c=(0,i.g2)("q-icon"),u=(0,i.g2)("q-item-section"),p=(0,i.g2)("q-item"),g=(0,i.g2)("q-list"),h=(0,i.g2)("q-menu"),f=(0,i.g2)("q-btn"),m=(0,i.g2)("q-markup-table"),b=(0,i.g2)("q-toolbar-title"),_=(0,i.g2)("q-toolbar"),v=(0,i.g2)("q-skeleton"),k=(0,i.g2)("q-card"),F=(0,i.g2)("q-dialog"),y=(0,i.g2)("q-avatar"),w=(0,i.g2)("q-card-section"),q=(0,i.g2)("q-card-actions"),L=(0,i.g2)("q-inner-loading"),x=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",we,[(0,i.Lk)("input",{type:"file",ref:"fileInput",onChange:t[0]||(t[0]=(...t)=>e.handleFileUpload&&e.handleFileUpload(...t)),hidden:""},null,544),(0,i.bF)(d,{label:e.$t("upload"),class:"float-right q-mb-md q-mr-sm",onClick:e.triggerFileUpload},null,8,["label","onClick"]),(0,i.Lk)("div",qe,[(0,i.Lk)("div",Le,[(0,i.bF)(m,{flat:"",class:"dashboard-table-style back-white"},{default:(0,i.k6)((()=>[(0,i.Lk)("thead",null,[(0,i.Lk)("tr",xe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.table_columns,(t=>((0,i.uX)(),(0,i.CE)("th",{key:t.name,class:(0,o.C4)((null===t||void 0===t?void 0:t.class)||"")},["actions"==t.name?((0,i.uX)(),(0,i.CE)("span",Ae,(0,o.v_)(e.$t(t.label)),1)):((0,i.uX)(),(0,i.CE)("span",Ee,(0,o.v_)(e.$t(t.label)),1))],2)))),128))])]),(0,i.Lk)("tbody",null,[e.fileList&&e.fileList.length>0?((0,i.uX)(!0),(0,i.CE)(i.FK,{key:0},(0,i.pI)(e.fileList,(l=>((0,i.uX)(),(0,i.CE)("tr",{key:l.id},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.table_columns,(n=>((0,i.uX)(),(0,i.CE)(i.FK,{key:n.name},["name"===n.name?((0,i.uX)(),(0,i.CE)("td",Ce,[(0,i.eW)((0,o.v_)(l.document_name)+" ",1),(0,i.bF)(c,{name:"visibility",size:"18px",class:"cursor-pointer q-pl-sm color-primary",onClick:t=>e.viewFile(l)},{default:(0,i.k6)((()=>[(0,i.bF)(r,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,o.v_)(e.$t("preview_file")),1)])),_:1})])),_:2},1032,["onClick"])])):"file_type"===n.name?((0,i.uX)(),(0,i.CE)("td",$e,(0,o.v_)(l.document_type),1)):((0,i.uX)(),(0,i.CE)("td",Ue,[(0,i.bF)(f,{flat:"",dense:"",round:"",onClick:t[1]||(t[1]=(0,ye.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,i.k6)((()=>[(0,i.bF)(h,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{dense:"",style:{"min-width":"100px"}},{default:(0,i.k6)((()=>[(0,i.bF)(p,{clickable:"",onClick:t=>e.copyFile(l)},{default:(0,i.k6)((()=>[(0,i.bF)(u,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,o.v_)(e.$t("copy")),1)])),_:1})])),_:2},1032,["onClick"]),(0,i.bF)(p,{clickable:"",onClick:t=>e.confirmDialog(null===l||void 0===l?void 0:l.id)},{default:(0,i.k6)((()=>[(0,i.bF)(u,{class:"text-red"},{default:(0,i.k6)((()=>[(0,i.eW)((0,o.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)]))],64)))),128))])))),128)):((0,i.uX)(),(0,i.CE)("tr",Qe,[(0,i.Lk)("td",Se,(0,o.v_)(e.$t("pages.messages.no_record_found")),1)]))])])),_:1})])])]),(0,i.bF)(F,{modelValue:e.openViewFile,"onUpdate:modelValue":t[2]||(t[2]=t=>e.openViewFile=t),persistent:""},{default:(0,i.k6)((()=>[(0,i.bF)(k,{style:{width:"700px","max-width":"800px"}},{default:(0,i.k6)((()=>[(0,i.bF)(_,{class:"text-white secondary-toolbar"},{default:(0,i.k6)((()=>[(0,i.bF)(b,null,{default:(0,i.k6)((()=>[(0,i.Lk)("span",Te,(0,o.v_)(e.$t("doc2light.pages.document")),1)])),_:1}),(0,i.bo)((0,i.bF)(f,{flat:"",round:"",dense:"",icon:"close"},null,512),[[x]])])),_:1}),(0,i.Lk)("div",Ve,[e.skeletonLoad?((0,i.uX)(),(0,i.Wv)(v,{key:1,style:{width:"100%"},animated:!1,width:"100%",height:"550px",class:"custom-skeleton"})):((0,i.uX)(),(0,i.CE)("iframe",{key:0,id:"preview_frame",src:e.iframe_path,title:"file preview",width:"100%",height:"550px"},null,8,Ie))])])),_:1})])),_:1},8,["modelValue"]),(0,i.bF)(F,{modelValue:e.confirmDelete,"onUpdate:modelValue":t[3]||(t[3]=t=>e.confirmDelete=t),persistent:""},{default:(0,i.k6)((()=>[(0,i.bF)(k,null,{default:(0,i.k6)((()=>[(0,i.bF)(w,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,i.k6)((()=>[(0,i.bF)(y,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,i.bF)(w,{class:"row items-center"},{default:(0,i.k6)((()=>[(0,i.Lk)("span",Xe,(0,o.v_)(e.$t("pages.messages.msg_delete")),1)])),_:1}),(0,i.bF)(q,{align:"right"},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.bF)(d,{appearance:"cancel",label:e.$t("pages.user.cancel")},null,8,["label"]),[[x]]),(0,i.bo)((0,i.bF)(d,{label:e.$t("pages.user.done"),onClick:e.onDeleteFile},null,8,["label","onClick"]),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.bF)(L,{showing:e.loading,class:"z-index-2"},{default:(0,i.k6)((()=>[De])),_:1},8,["showing"])],64)}var Pe=function(e,t,l,i){function o(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,n){function a(e){try{d(i.next(e))}catch(t){n(t)}}function s(e){try{d(i["throw"](e))}catch(t){n(t)}}function d(e){e.done?l(e.value):o(e.value).then(a,s)}d((i=i.apply(e,t||[])).next())}))};const je=(0,Y.nY)("edi_specification_store",{state:()=>({loading:!1,fileList:[]}),actions:{uploadEDIFile(e){return Pe(this,void 0,void 0,(function*(){try{const t=yield L.XN.upload(e);if(!1===t.success)throw t;return t}catch(t){logError(t)}}))},getFiles(){return Pe(this,void 0,void 0,(function*(){try{const e=yield L.XN.getFile();e.success?this.fileList=e.data:this.fileList=[]}catch(e){logError(e)}}))}}});var Re=l(46162),Oe=l(78652),Me=function(e,t,l,i){function o(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,n){function a(e){try{d(i.next(e))}catch(t){n(t)}}function s(e){try{d(i["throw"](e))}catch(t){n(t)}}function d(e){e.done?l(e.value):o(e.value).then(a,s)}d((i=i.apply(e,t||[])).next())}))};const Ne=(0,i.pM)({el:"#app",mixins:[q.A,w.A],mounted(){return Me(this,void 0,void 0,(function*(){yield this.getFiles()}))},data(){return{confirmDelete:(0,y.KR)(!1),openViewFile:(0,y.KR)(!1),table_columns:[{label:"name",name:"name"},{label:"file_type",name:"file_type"},{label:"pages.export.actions",name:"actions",class:"text-center"}],file_id:(0,y.KR)(""),iframe_path:(0,y.KR)(""),skeletonLoad:(0,y.KR)(!1)}},methods:{viewFile(e){return Me(this,void 0,void 0,(function*(){this.openViewFile=!0,yield this.getPreviewFile(e)}))},getPreviewFile(e){return Me(this,void 0,void 0,(function*(){try{this.skeletonLoad=!0;const t=yield(0,Re.L3)(),l=t.split(" ")[1],i=e.id,o=e.document_path,n={id:i,path:o,token:l},a=yield L.XN.previewFile(n),s=a.config.url;this.iframe_path=s}catch(t){logError(t)}finally{this.skeletonLoad=!1}}))},documentNameWithoutExtension(e){return e.substring(0,e.lastIndexOf("."))||e},buildFileUrl(e){return`${Re.VA}/resource/get_file/${e.id}?path=${e.path}&download=false&token=${e.token}`},copyFile(e){return Me(this,void 0,void 0,(function*(){try{const t=yield(0,Re.L3)(),l=t.split(" ")[1],i=this.documentNameWithoutExtension(e.document_name),o=e.document_path,n={id:i,path:o,token:l},a=this.buildFileUrl(n);(0,Oe.A)(a).then((()=>{this.showSuccessToast(this.$t("copy_to_clipboard"))}))}catch(t){logError(t)}}))},triggerFileUpload(){this.$refs.fileInput.click()},handleFileUpload(e){return Me(this,void 0,void 0,(function*(){try{this.loading=!0;const t=e.target.files[0],l=yield this.uploadEDIFile(t);if(!1===(null===l||void 0===l?void 0:l.success))throw null===l||void 0===l?void 0:l.message;yield this.getFiles(),this.showSuccessToast(this.$t("upload_success"))}catch(t){logInfo(t)}finally{this.loading=!1}}))},confirmDialog(e){this.file_id=e,this.confirmDelete=!0},onDeleteFile(){return Me(this,void 0,void 0,(function*(){try{this.loading=!0;const e=yield L.XN.delete(this.file_id);if(!1===e.success)throw null===e||void 0===e?void 0:e.message;yield this.getFiles(),this.showSuccessToast(this.$t("file_deleted_successfully")),this.confirmDelete=!1}catch(e){const t=x.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}}))}},setup(){const e=je(),{uploadEDIFile:t,getFiles:l}=e,{loading:i,fileList:o}=(0,Y.bP)(e);return{loading:i,uploadEDIFile:t,getFiles:l,fileList:o}}});var We=l(857),ze=l(97410),Be=l(84436),Je=l(53999),He=l(90124),Ge=l(25173),Ye=l(43820),Ze=l(3952);const et=(0,C.A)(Ne,[["render",Ke]]),tt=et;R()(Ne,"components",{QMarkupTable:We.A,QIcon:S.A,QTooltip:ze.A,QBtn:D.A,QMenu:Be.A,QList:Je.A,QItem:He.A,QItemSection:Ge.A,QDialog:V.A,QCard:$.A,QToolbar:I.A,QToolbarTitle:X.A,QSkeleton:Ye.Ay,QCardSection:U.A,QAvatar:Ze.A,QCardActions:K.A,QInnerLoading:te.A}),R()(Ne,"directives",{ClosePopup:P.A});const lt=(0,i.pM)({el:"#app",components:{SubHeader:p.A,BackToSettings:g.A,CompanyLogo:M,PolicyPrivacy:ie,SupplierPortalAdditionalFields:Fe,EDI_SpecificationDocument:tt}});var it=l(88841),ot=l(93676),nt=l(10386);const at=(0,C.A)(lt,[["render",u]]),st=at;R()(lt,"components",{QList:Je.A,QExpansionItem:it.A,QIcon:S.A,QSpace:ot.A,QSeparator:nt.A,QCard:$.A,QCardSection:U.A})}}]);