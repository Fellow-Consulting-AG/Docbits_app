"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[3994],{3994:(e,s,t)=>{t.r(s),t.d(s,{default:()=>xe});var a=t(83673),i=t(62323);const l=e=>((0,a.dD)("data-v-07076786"),e=e(),(0,a.Cn)(),e),r={class:"container settings"},o={class:"row full-width"},d={class:"col-lg-12 q-pa-md"},n={class:"highlighted-back"},m={class:"text-h4 text-uppercase text-left"},h={class:"text-h4 text-uppercase text-left"},u={class:"text-h4 text-uppercase text-left"},c={class:"text-h4 text-uppercase text-left"},p={class:"text-h4 text-left"},g={class:"text-h4 text-left"},w={class:"text-h4 text-left"},_={class:"text-h4 text-left"},f=l((()=>(0,a._)("img",{class:"img-fluid mb-14 filter-primary",width:"28",height:"28",src:"pencil.svg",alt:""},null,-1))),y=l((()=>(0,a._)("img",{class:"img-fluid mb-14 black_to_white",width:"28",height:"28",src:"trash-bin-default.svg",alt:""},null,-1))),E={key:0},b={key:0,class:"text-center",colspan:"3"},v={key:0},x={key:1},N={class:"col-sm-12 col-md-12 col-lg-12"},T={style:{width:"80%",left:"10%",position:"relative"}},R=l((()=>(0,a._)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-center"},[(0,a._)("img",{src:"settings/user.svg",class:"black_to_white q-my-sm",style:{height:"80px"}})],-1))),D={class:"col-sm-12 col-md-12 col-lg-12",id:"fist_name"},U=l((()=>(0,a._)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},null,-1))),$={class:"col-sm-12 col-md-12 col-lg-12",id:"last_name"},W={class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},C={class:"col-sm-12 col-md-12 col-lg-12",id:"email"},q={class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},k={class:"cursor-pointer"},S={class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},L={class:"col-sm-12 col-md-12 col-lg-12",id:"confirm_password"},V={class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},A={class:"col-sm-12 col-md-12 col-lg-12"},Z={class:"float-right q-ml-auto q-mb-md q-mr-sm"},I={class:"q-ml-sm"};function O(e,s,t,l,O,z){const H=(0,a.up)("SubHeader"),P=(0,a.up)("q-btn"),Q=(0,a.up)("BackToSettings"),F=(0,a.up)("q-checkbox"),M=(0,a.up)("q-markup-table"),Y=(0,a.up)("Loader"),B=(0,a.up)("q-toolbar-title"),j=(0,a.up)("q-toolbar"),G=(0,a.up)("q-input"),K=(0,a.up)("q-icon"),J=(0,a.up)("q-tooltip"),X=(0,a.up)("q-form"),ee=(0,a.up)("q-card-section"),se=(0,a.up)("q-card"),te=(0,a.up)("q-dialog"),ae=(0,a.up)("q-avatar"),ie=(0,a.up)("q-card-actions"),le=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(H,{name:"user_settings",label:e.$t("pages.user.settings")},null,8,["label"]),(0,a.Wm)(Q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(P,{color:"primary",label:e.$t("pages.user.add_user"),class:"float-right q-mr-xl",onClick:s[0]||(s[0]=s=>e.userDialog=!0)},null,8,["label"])])),_:1}),(0,a._)("div",r,[(0,a._)("div",o,[(0,a._)("div",d,[(0,a.Wm)(M,null,{default:(0,a.w5)((()=>[(0,a._)("thead",null,[(0,a._)("tr",n,[(0,a._)("th",m,(0,i.zw)(e.$t("name")),1),(0,a._)("th",h,(0,i.zw)(e.$t("pages.user.email")),1),(0,a._)("th",u,(0,i.zw)(e.$t("pages.user.is_admin")),1),(0,a._)("th",c,(0,i.zw)(e.$t("actions")),1)])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.users,((s,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",p,(0,i.zw)(s["first_name"])+" "+(0,i.zw)(s["last_name"]),1),(0,a._)("td",g,(0,i.zw)(s["email"]),1),(0,a._)("td",w,[(0,a.Wm)(F,{modelValue:s["is_organisation_admin"],"onUpdate:modelValue":e=>s["is_organisation_admin"]=e,onClick:t=>e.isAdminToggle(s["id"],s["is_organisation_admin"])},null,8,["modelValue","onUpdate:modelValue","onClick"])]),(0,a._)("td",_,[(0,a.Wm)(P,{flat:"",color:"primary",onClick:t=>e.openForm(s),class:"no-padding-left-right mr-10"},{default:(0,a.w5)((()=>[f])),_:2},1032,["onClick"]),(0,a.Wm)(P,{flat:"",onClick:t=>{e.userId=s["id"],e.confirmDelete=!0},color:"primary",class:"no-padding-left-right"},{default:(0,a.w5)((()=>[y])),_:2},1032,["onClick"])])])))),128)),0===e.users.length?((0,a.wg)(),(0,a.iD)("tr",E,[e.spinner?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("td",b," No Record Found! "))])):(0,a.kq)("",!0)])])),_:1})])])]),(0,a.Wm)(Y),(0,a.Wm)(te,{modelValue:e.userDialog,"onUpdate:modelValue":s[9]||(s[9]=s=>e.userDialog=s)},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{style:{width:"600px","max-width":"60vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{class:"bg-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(B,{class:"text-white"},{default:(0,a.w5)((()=>[this.userId&&""!=this.userId?((0,a.wg)(),(0,a.iD)("span",v,(0,i.zw)(e.$t("pages.user.edit_user")),1)):((0,a.wg)(),(0,a.iD)("span",x,(0,i.zw)(e.$t("pages.user.add_user")),1))])),_:1}),(0,a.wy)((0,a.Wm)(P,{flat:"",round:"",color:"white",icon:"close"},null,512),[[le]])])),_:1}),(0,a.Wm)(ee,null,{default:(0,a.w5)((()=>[(0,a._)("div",N,[(0,a._)("div",T,[R,(0,a.Wm)(X,{onSubmit:e.onSubmit,onReset:e.onReset},{default:(0,a.w5)((()=>[(0,a._)("div",D,[(0,a.Wm)(G,{dense:"",outlined:"",modelValue:e.firstName,"onUpdate:modelValue":s[1]||(s[1]=s=>e.firstName=s),label:e.$t("pages.user.firstName"),style:{width:"450px"}},null,8,["modelValue","label"])]),U,(0,a._)("div",$,[(0,a.Wm)(G,{dense:"",outlined:"",modelValue:e.lastName,"onUpdate:modelValue":s[2]||(s[2]=s=>e.lastName=s),label:e.$t("pages.user.lastName"),style:{width:"450px"}},null,8,["modelValue","label"])]),(0,a._)("div",W,(0,i.zw)(e.lastNameError),1),(0,a._)("div",C,[(0,a.Wm)(G,{dense:"",outlined:"",modelValue:e.email,"onUpdate:modelValue":s[3]||(s[3]=s=>e.email=s),label:e.$t("pages.user.email"),style:{width:"450px"}},null,8,["modelValue","label"])]),(0,a._)("div",q,(0,i.zw)(e.emailError),1),(0,a.Wm)(G,{dense:"",type:!1===e.show_password?"password":"text",outlined:"",modelValue:e.password,"onUpdate:modelValue":s[5]||(s[5]=s=>e.password=s),label:e.$t("pages.user.password"),id:"password",style:{width:"480px"}},{append:(0,a.w5)((()=>[(0,a.Wm)(K,{name:!1===e.show_password?"visibility":"visibility_off",onClick:s[4]||(s[4]=s=>e.show_password=!e.show_password)},null,8,["name"])])),after:(0,a.w5)((()=>[(0,a._)("div",k,[(0,a.Wm)(K,{name:"img:info_primary.svg"}),(0,a.Wm)(J,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("password_hint")),1)])),_:1})])])),_:1},8,["type","modelValue","label"]),(0,a._)("div",S,(0,i.zw)(e.passwordError),1),(0,a._)("div",L,[(0,a.Wm)(G,{dense:"",type:!1===e.show_confirm_password?"password":"text",outlined:"",modelValue:e.confirmPassword,"onUpdate:modelValue":s[7]||(s[7]=s=>e.confirmPassword=s),label:e.$t("pages.user.confirmPassword"),style:{width:"450px"}},{append:(0,a.w5)((()=>[(0,a.Wm)(K,{name:!1===e.show_confirm_password?"visibility":"visibility_off",onClick:s[6]||(s[6]=s=>e.show_confirm_password=!e.show_confirm_password)},null,8,["name"])])),_:1},8,["type","modelValue","label"])]),(0,a._)("div",V,(0,i.zw)(e.passwordError),1),(0,a._)("div",A,[(0,a.Wm)(F,{modelValue:e.role,"onUpdate:modelValue":s[8]||(s[8]=s=>e.role=s),label:e.$t("pages.user.is_admin")},null,8,["modelValue","label"])]),(0,a._)("div",Z,[(0,a.wy)((0,a.Wm)(P,{label:e.$t("pages.user.cancel"),type:"reset",color:"primary",style:{width:"100px"},outline:""},null,8,["label"]),[[le]]),(0,a.Wm)(P,{label:e.$t("pages.user.save"),type:"submit",class:"q-ml-sm",color:"primary",style:{width:"100px"}},null,8,["label"])])])),_:1},8,["onSubmit","onReset"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(te,{modelValue:e.confirmDelete,"onUpdate:modelValue":s[11]||(s[11]=s=>e.confirmDelete=s),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(se,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ee,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,a.w5)((()=>[(0,a.Wm)(ae,{icon:"warning",color:"primary"})])),_:1}),(0,a.Wm)(ee,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a._)("span",I,(0,i.zw)(e.$t("pages.messages.MSG_DELETE")),1)])),_:1}),(0,a.Wm)(ie,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(P,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[le]]),(0,a.wy)((0,a.Wm)(P,{flat:"",label:e.$t("delete"),color:"primary",onClick:s[10]||(s[10]=s=>e.deleteUser())},null,8,["label"]),[[le]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var z=t(30052),H=t.n(z),P=t(77987),Q=t(48825),F=t(77378),M=t(61959),Y=t(78564),B=t(80579),j=t(72113),G=t(45401),K=t(54268),J=t(13873),X=t(47845),ee=function(e,s,t,a){function i(e){return e instanceof t?e:new t((function(s){s(e)}))}return new(t||(t=Promise))((function(t,l){function r(e){try{d(a.next(e))}catch(s){l(s)}}function o(e){try{d(a["throw"](e))}catch(s){l(s)}}function d(e){e.done?t(e.value):i(e.value).then(r,o)}d((a=a.apply(e,s||[])).next())}))};let se;const te=(0,a.aZ)({el:"#app",mixins:[G.Z,F.Z,Y.Z],data(){return{users:(0,M.iH)([]),emailError:"",passwordError:"",lastNameError:"",userDialog:(0,M.iH)(!1)}},components:{Loader:j.Z,SubHeader:J.Z,BackToSettings:X.Z},mounted:function(){se=this,this.getUsers(!0)},methods:{isAdminToggle(e,s){return ee(this,void 0,void 0,(function*(){let t=new FormData;t.append("is_organisation_admin",s?"1":"0");try{this.showLoading();let s=yield(0,K.O_)(),a=yield H().put(K.hi.update_user+e,t,{headers:{Authorization:s}});if(a.data.message)return a.data.error_code?this.emailError=this.$t("pages.messages."+a.data.error_code):this.emailError=a.data.message,se.showErrorToast(this.emailError),yield this.getUsers(!1),void this.hideLoading();yield this.getUsers(!1),this.hideLoading(),this.showSuccessToast(this.$t("pages.messages.USER_UPDATED"))}catch(a){return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void this.hideLoading()}}))},getUsers(e){return ee(this,void 0,void 0,(function*(){this.users=[],!0===e&&this.showLoading();try{const s=yield B.FT.getUsers();if(!s)return;this.users=s,!0===e&&this.hideLoading()}catch(s){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{!0===e&&this.hideLoading()}}))},onSubmit(){this.lastNameError="",this.emailError="",this.passwordError="";let e=this.validateEmail(this.email);e||(this.emailError=this.$t("pages.messages.INVALID_EMAIL")),this.lastName&&""!=this.lastName||(this.lastNameError=this.$t("pages.messages.USER_NAME_MANDATORY")),this.userId&&""==this.password&&""==this.confirmPassword||(this.password&&""!=this.password?this.password!=this.confirmPassword&&(this.passwordError=this.$t("pages.messages.PASSWORD_NOT_MATCH")):this.passwordError=this.$t("pages.messages.PASSWORD_MANDATORY")),this.emailError||this.lastNameError||this.passwordError||(this.userId?this.editUser():this.addUser())},addUser(){return ee(this,void 0,void 0,(function*(){let e=new FormData;e.append("first_name",this.firstName),e.append("last_name",this.lastName),e.append("email",this.email),e.append("password",this.password),e.append("is_admin",this.role.toString()),this.showLoading();let s=yield(0,K.O_)();yield H().post(K.hi.create_users,e,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:s}}).then((e=>ee(this,void 0,void 0,(function*(){if(e.data.message)return e.data.error_code?this.emailError=this.$t("pages.messages."+e.data.error_code):this.emailError=e.data.message,void this.hideLoading();yield this.getUsers(!1),this.userDialog=!1,this.hideLoading(),this.showSuccessToast(this.$t("pages.messages.USER_SUCESSFULLY_CREATED"))})))).catch((function(e){se.showErrorToast(se.$t("pages.messages.ERROR_INTERNAL_OCCUR")),se.hideLoading(),se.userDialog=!1}))}))},openForm(e){e?(this.userId=e.id,this.email=e.email,this.lastName=e.last_name,this.firstName=e.first_name,this.confirmPassword="",this.password="",this.role=e.is_organisation_admin):(this.role=!1,this.email="",this.userId="",this.lastName="",this.password="",this.firstName="",this.emailError="",this.lastNameError="",this.passwordError=""),this.userDialog=!0},editUser(){return ee(this,void 0,void 0,(function*(){let e=new FormData;e.append("first_name",this.firstName),e.append("last_name",this.lastName),e.append("email",this.email),e.append("password",this.password),e.append("is_organisation_admin",this.role.toString()),this.showLoading();let s=yield(0,K.O_)();H().put(K.hi.update_user+this.userId,e,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:s}}).then((e=>ee(this,void 0,void 0,(function*(){if(e.data.message)return e.data.error_code?this.emailError=this.$t("pages.messages."+e.data.error_code):this.emailError=e.data.message,se.showErrorToast(this.emailError),void this.hideLoading();yield this.getUsers(!1),this.userDialog=!1,this.hideLoading(),this.userId=null,this.showSuccessToast(this.$t("pages.messages.USER_UPDATED"))})))).catch((function(e){se.userDialog=!1,se.showErrorToast(se.$t("pages.messages.ERROR_INTERNAL_OCCUR")),se.hideLoading()}))}))},onReset(){this.role=!1,this.email="",this.userId="",this.lastName="",this.password="",this.firstName="",this.emailError="",this.lastNameError="",this.passwordError="",this.removeClass((0,P.$)("#email").querySelector("label"),"error-border-left"),this.removeClass((0,P.$)("#last_name").querySelector("label"),"error-border-left"),this.removeClass((0,P.$)("#confirm_password").querySelector("label"),"error-border-left")},deleteUser(){return ee(this,void 0,void 0,(function*(){try{let e;this.showLoading();let s=yield(0,K.O_)();e=yield H()["delete"](K.hi.delete_user+this.userId,{headers:{Authorization:s}}),e.data&&!e.data.hasOwnProperty("success")&&e.data.hasOwnProperty("message")&&this.showErrorToast(e.data.message),e.data&&e.data.hasOwnProperty("success")&&!0===e.data.success&&(this.userId=null,yield this.getUsers(!1),this.showSuccessToast(this.$t("pages.messages.USER_DELETED")))}catch(e){this.showErrorToast(se.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.confirmDelete=!1,this.hideLoading()}}))}},setup(){(0,Q.Z)();return{icon:(0,M.iH)(!1),role:(0,M.iH)(!1),email:(0,M.iH)(),show_confirm_password:(0,M.iH)(!1),show_password:(0,M.iH)(!1),userId:(0,M.iH)(),firstName:(0,M.iH)(),lastName:(0,M.iH)(),password:(0,M.iH)(),confirmPassword:(0,M.iH)(),confirmDelete:(0,M.iH)(!1)}}});var ae=t(74260),ie=t(2165),le=t(30481),re=t(65735),oe=t(46778),de=t(10151),ne=t(39570),me=t(13747),he=t(25589),ue=t(68689),ce=t(64689),pe=t(24554),ge=t(5363),we=t(75096),_e=t(99367),fe=t(17132),ye=t(60677),Ee=t(7518),be=t.n(Ee);const ve=(0,ae.Z)(te,[["render",O],["__scopeId","data-v-07076786"]]),xe=ve;be()(te,"components",{QBtn:ie.Z,QMarkupTable:le.Z,QCheckbox:re.Z,QDialog:oe.Z,QCard:de.Z,QToolbar:ne.Z,QToolbarTitle:me.Z,QCardSection:he.Z,QForm:ue.Z,QInput:ce.Z,QIcon:pe.Z,QTooltip:ge.Z,QAvatar:we.Z,QCardActions:_e.Z,QTable:fe.Z}),be()(te,"directives",{ClosePopup:ye.Z})}}]);