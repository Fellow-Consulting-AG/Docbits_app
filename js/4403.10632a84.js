"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[4403],{84403:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Tl});var o=l(83673),a=l(62323);const i=e=>((0,o.dD)("data-v-41bf85e6"),e=e(),(0,o.Cn)(),e),s={class:"general-container create-doc-type"},n={class:"row"},d={class:"text-h6 q-mb-md q-mx-auto"},r={class:"row"},u={class:"full-width"},m={class:"row",style:{"margin-top":"20px"}},c={style:{width:"80%","margin-top":"10px"}},p={class:"row"},_={class:"full-width"},h={class:"row",style:{"margin-top":"30px"}},g=i((()=>(0,o._)("div",{class:"col-2"},null,-1))),w={class:"items-center q-ml-lg"},f={class:"row q-mt-md"},y={class:"q-mr-auto text-uppercase"},b=i((()=>(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1)));function v(e,t,l,i,v,q){const k=(0,o.up)("SubHeader"),C=(0,o.up)("BackToDocuments"),x=(0,o.up)("q-tooltip"),T=(0,o.up)("q-icon"),R=(0,o.up)("q-input"),Z=(0,o.up)("q-checkbox"),O=(0,o.up)("q-btn"),W=(0,o.up)("q-form"),D=(0,o.up)("q-step"),V=(0,o.up)("Regexes"),N=(0,o.up)("TrainingList"),E=(0,o.up)("q-tab"),Q=(0,o.up)("q-tabs"),L=(0,o.up)("q-separator"),$=(0,o.up)("Groups"),A=(0,o.up)("q-tab-panel"),F=(0,o.up)("Fields"),S=(0,o.up)("q-tab-panels"),U=(0,o.up)("Tables"),j=(0,o.up)("TableColumns"),H=(0,o.up)("q-stepper"),I=(0,o.up)("q-inner-loading"),P=(0,o.up)("Loader");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(k,{name:"settings_new_doc_type",label:e.$t("pages.settings.new_doc_type")},null,8,["label"]),(0,o.Wm)(C),(0,o._)("div",s,[(0,o._)("div",null,[(0,o._)("div",n,[(0,o._)("span",d,(0,a.zw)(this.step_labels[e.step]),1)]),(0,o.Wm)(H,{class:"white-back",modelValue:e.step,"onUpdate:modelValue":t[9]||(t[9]=t=>e.step=t),ref:"stepper",flat:"","alternative-labels":"",color:"primary",animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{name:"doc",title:e.$t("create"),icon:"img:pencil.svg","done-icon":"img:pencil-white.svg","active-icon":"img:pencil-white.svg","done-color":"green",done:e.done_steps["doc"]},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{class:"create-doc-form"},{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o._)("div",u,[(0,o.Wm)(R,{modelValue:e.step1_model["name"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.step1_model["name"]=t),placeholder:e.$t("name"),readonly:e.isDocStep1Saved(),outlined:"",dense:""},{append:(0,o.w5)((()=>[""!==e.error_model["doc_name"]?((0,o.wg)(),(0,o.j4)(T,{key:0,name:"error",color:"red",tabindex:"0",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.error_model["doc_name"]),1)])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},8,["modelValue","placeholder","readonly"])])]),(0,o._)("div",m,[(0,o.Wm)(Z,{modelValue:e.step1_model["has_table"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.step1_model["has_table"]=t),disable:e.isDocStep1Saved(),class:"q-mb-md"},null,8,["modelValue","disable"]),(0,o._)("div",c,(0,a.zw)(e.$t("has_table")),1)]),(0,o._)("div",p,[(0,o._)("div",_,[(0,o.Wm)(R,{modelValue:e.step1_model["description"],"onUpdate:modelValue":t[2]||(t[2]=t=>e.step1_model["description"]=t),readonly:e.isDocStep1Saved(),placeholder:e.$t("description"),outlined:"",dense:""},null,8,["modelValue","readonly","placeholder"])])]),(0,o._)("div",h,[g,(0,o._)("div",w,[(0,o.Wm)(O,{style:{width:"10vw"},onClick:t[3]||(t[3]=t=>e.step1_model["doc_type"]="auto"),class:(0,a.C_)("doc-type-btn highlighted-back "+("auto"==e.step1_model["doc_type"]?"selected":"")),padding:"lg",label:e.$t("auto")},null,8,["class","label"]),(0,o.Wm)(O,{style:{width:"10vw"},class:(0,a.C_)("q-ml-xl doc-type-btn highlighted-back "+("regex"==e.step1_model["doc_type"]?"selected":"")),onClick:t[4]||(t[4]=t=>e.step1_model["doc_type"]="regex"),padding:"lg",label:e.$t("regex")},null,8,["class","label"])])])])),_:1})])),_:1},8,["title","done"]),"regex"==e.step1_model["doc_type"]?((0,o.wg)(),(0,o.j4)(D,{key:0,name:"regex",title:e.$t("create_regex"),icon:"img:regex.svg","done-color":"green",done:e.done_steps["regex"]},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{doc_type:e.getDocTypeName(),list_data:e.regexes,language_origin_list:e.language_origin_list,table_height:430},null,8,["doc_type","list_data","language_origin_list"])])),_:1},8,["title","done"])):(0,o.kq)("",!0),"auto"==e.step1_model["doc_type"]?((0,o.wg)(),(0,o.j4)(D,{key:1,name:"upload",title:e.$t("upload"),icon:"img:settings/export-white.svg","done-icon":"img:settings/export-white.svg","active-icon":"img:settings/export-white.svg","done-color":"green",done:e.done_steps["upload"]},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{doc_type:e.getDocTypeName(),doc_type_key:e.getDocTypeKey(),language_origin_list:e.language_origin_list,max_value:e.training_doc_limit,list_data:e.sample_files},null,8,["doc_type","doc_type_key","language_origin_list","max_value","list_data"])])),_:1},8,["title","done"])):(0,o.kq)("",!0),(0,o.Wm)(D,{name:"fields_groups",title:e.$t("fields_groups"),icon:"img:fields_and_groups-white.svg","done-icon":"img:fields_and_groups-white.svg","active-icon":"img:fields_and_groups-white.svg","done-color":"green",done:e.done_steps["fields_groups"]},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{modelValue:e.tab,"onUpdate:modelValue":t[5]||(t[5]=t=>e.tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","active-class":"highlighted-back"},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{name:"groups",label:e.$t("groups")},null,8,["label"]),(0,o.Wm)(E,{name:"fields",label:e.$t("fields")},null,8,["label"])])),_:1},8,["modelValue"]),(0,o.Wm)(L),(0,o.Wm)(S,{modelValue:e.tab,"onUpdate:modelValue":t[6]||(t[6]=t=>e.tab=t),animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{name:"groups",class:"white-back"},{default:(0,o.w5)((()=>[(0,o.Wm)($,{doc_type:e.getDocTypeName(),list_data:e.groups},null,8,["doc_type","list_data"])])),_:1}),(0,o.Wm)(A,{name:"fields",class:"white-back"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{doc_type:e.getDocTypeName(),list_data:e.fields,groups:e.groups},null,8,["doc_type","list_data","groups"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["title","done"]),!0===e.step1_model["has_table"]?((0,o.wg)(),(0,o.j4)(D,{key:2,name:"table_columns",title:e.$t("table_columns"),icon:"table_chart","done-icon":"table_chart","active-icon":"table_chart","done-color":"green",done:e.done_steps["table_columns"]},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{modelValue:e.table_column_tab,"onUpdate:modelValue":t[7]||(t[7]=t=>e.table_column_tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","active-class":"highlighted-back"},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{name:"tables",label:e.$t("tables")},null,8,["label"]),(0,o.Wm)(E,{name:"columns",label:e.$t("columns")},null,8,["label"])])),_:1},8,["modelValue"]),(0,o.Wm)(L),(0,o.Wm)(S,{modelValue:e.table_column_tab,"onUpdate:modelValue":t[8]||(t[8]=t=>e.table_column_tab=t),animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{name:"tables",class:"white-back"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{doc_type:e.getDocTypeKey(),list_data:e.tables},null,8,["doc_type","list_data"])])),_:1}),(0,o.Wm)(A,{name:"columns",class:"white-back"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{table_height:430,tables:e.tables,list_data:e.table_columns},null,8,["tables","list_data"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["title","done"])):(0,o.kq)("",!0)])),_:1},8,["modelValue"]),(0,o._)("div",f,[(0,o._)("div",y,["doc"!=e.step?((0,o.wg)(),(0,o.j4)(O,{key:0,icon:"arrow_back",onClick:t[10]||(t[10]=t=>e.$refs.stepper.previous()),label:e.$t("back"),class:"q-ml-sm highlighted-back"},null,8,["label"])):(0,o.kq)("",!0)]),(0,o.Wm)(O,{"icon-right":"arrow_forward",class:"q-ml-sm q-ml-auto",onClick:e.validateAndNext,color:"primary",label:e.$t(e.wizardNextButtonLabel())},null,8,["onClick","label"])])])]),(0,o.Wm)(I,{showing:e.loading},{default:(0,o.w5)((()=>[b])),_:1},8,["showing"]),(0,o.Wm)(P)],64)}var q=l(30052),k=l.n(q),C=l(77378),x=l(61959),T=l(45401),R=l(54268);const Z=e=>((0,o.dD)("data-v-1007ff9e"),e=e(),(0,o.Cn)(),e),O={key:0,class:"q-ml-auto"},W=Z((()=>(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1))),D=Z((()=>(0,o._)("span",{class:"text-weight-bold"},"Clone Groups and Fields",-1))),V={class:"row"},N={class:"col-sm-12 col-md-12 col-lg-12"};function E(e,t,l,i,s,n){const d=(0,o.up)("q-btn"),r=(0,o.up)("q-space"),u=(0,o.up)("q-icon"),m=(0,o.up)("q-input"),c=(0,o.up)("q-tooltip"),p=(0,o.up)("q-td"),_=(0,o.up)("q-tr"),h=(0,o.up)("q-table"),g=(0,o.up)("q-inner-loading"),w=(0,o.up)("CreateGroup"),f=(0,o.up)("q-dialog"),y=(0,o.up)("q-toolbar-title"),b=(0,o.up)("q-toolbar"),v=(0,o.up)("q-select"),q=(0,o.up)("q-card-section"),k=(0,o.up)("q-card-actions"),C=(0,o.up)("q-card"),x=(0,o.up)("Loader"),T=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(h,{ref:"tableRef",style:{height:"360px"},flat:"",class:(0,a.C_)("sticky-header-table groups-list white-back"),rows:e.rows,columns:e.columns,"no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),"rows-per-page-options":[0],"row-key":"id",filter:e.filter,"filter-method":e.customFilter},{top:(0,o.w5)((()=>[(0,o.Wm)(d,{color:"primary",class:"mr-6",label:e.$t("add_new"),onClick:t[0]||(t[0]=t=>e.addNewDialog=!0)},null,8,["label"]),(0,o.Wm)(d,{color:"primary",class:"mr-6",label:e.$t("clone_document_type"),onClick:t[1]||(t[1]=t=>e.cloneGroupsAndFieldsDlg=!0)},null,8,["label"]),(0,o.Wm)(r),(0,o.Wm)(m,{outlined:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[2]||(t[2]=t=>e.filter=t)},{append:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,o.w5)((t=>[(0,o.Wm)(_,{props:t,id:t.key},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(l=>((0,o.wg)(),(0,o.iD)(o.HY,{key:l.name},["action"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:0,style:{width:"12%"}},{default:(0,o.w5)((()=>[""!==t.row.id?((0,o.wg)(),(0,o.iD)("span",O,["DEFAULT"!==t.row.org_id?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"float-right","icon-right":"img:trash-bin-default.svg","no-caps":"",flat:"",dense:"",onClick:l=>e.handleDelete(t.row.id,t.rowIndex)},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),_:2},1024)):(0,o.kq)("",!0),"name"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:1,style:{width:"70%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.name,"onUpdate:modelValue":e=>t.row.name=e,readonly:""!==t.row.id},null,8,["data-id","modelValue","onUpdate:modelValue","readonly"])])),_:2},1024)):(0,o.kq)("",!0)],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","no-data-label","filter","filter-method"]),(0,o.Wm)(g,{showing:e.loading},{default:(0,o.w5)((()=>[W])),_:1},8,["showing"]),(0,o.Wm)(f,{modelValue:e.addNewDialog,"onUpdate:modelValue":t[3]||(t[3]=t=>e.addNewDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{doc_type:e.doc_type},null,8,["doc_type"])])),_:1},8,["modelValue"]),(0,o.Wm)(f,{modelValue:e.cloneGroupsAndFieldsDlg,"onUpdate:modelValue":t[6]||(t[6]=t=>e.cloneGroupsAndFieldsDlg=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{style:{width:"600px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{class:"secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[D])),_:1}),(0,o.wy)((0,o.Wm)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[T]])])),_:1}),(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[(0,o._)("div",V,[(0,o._)("div",N,[(0,o.Wm)(v,{modelValue:e.copyFromDocType,"onUpdate:modelValue":t[4]||(t[4]=t=>e.copyFromDocType=t),outlined:"","data-cy":"doc-type",options:this.doc_type_list,"emit-value":"","map-options":"",label:e.$t("pages.screen2a.doctype")},null,8,["modelValue","options","label"])])])])),_:1}),(0,o.Wm)(k,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(d,{flat:"",label:e.$t("cancel"),"data-cy":"cancel",color:"primary"},null,8,["label"]),[[T]]),(0,o.wy)((0,o.Wm)(d,{flat:"",label:e.$t("proceed"),"data-cy":"delete-popup",color:"primary",onClick:t[5]||(t[5]=t=>e.cloneGroupsAndFields())},null,8,["label"]),[[T]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(x)],64)}var Q=l(72113),L=l(60727),$=l(91777),A=l(98880);const F=(0,o._)("span",{class:"text-weight-bold"},"Create New Group",-1),S={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},U={class:"full-width"},j=(0,o.Uk)(" Field is Required "),H=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function I(e,t,l,i,s,n){const d=(0,o.up)("q-toolbar-title"),r=(0,o.up)("q-btn"),u=(0,o.up)("q-toolbar"),m=(0,o.up)("q-tooltip"),c=(0,o.up)("q-icon"),p=(0,o.up)("q-input"),_=(0,o.up)("q-card-section"),h=(0,o.up)("q-card-actions"),g=(0,o.up)("q-inner-loading"),w=(0,o.up)("q-card"),f=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(w,{style:{width:"600px"}},{default:(0,o.w5)((()=>[(0,o._)("form",{onSubmit:t[1]||(t[1]=(0,A.iM)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.Wm)(u,{class:"secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[F])),_:1}),(0,o.wy)((0,o.Wm)(r,{flat:"",round:"",dense:"",icon:"close"},null,512),[[f]])])),_:1}),(0,o.Wm)(_,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o._)("div",S,[(0,o._)("div",U,[(0,o.Wm)(p,{outlined:"",tabindex:"0",class:(0,a.C_)("full-width "+(!e.new_model["validate"]||e.new_model["required_error"]?"column-error-border":"")),modelValue:e.new_model["name"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["name"]=t),placeholder:"Group Name",hint:e.message},{append:(0,o.w5)((()=>[!e.new_model["validate"]||e.new_model["required_error"]?((0,o.wg)(),(0,o.j4)(c,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[e.new_model["validate"]?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)((0,a.zw)(e.message),1)],64)),e.new_model["required_error"]?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[j],64)):(0,o.kq)("",!0)])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},8,["class","modelValue","hint"])])])])),_:1}),(0,o.Wm)(h,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(r,{class:"highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[f]]),(0,o.Wm)(r,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,o.Wm)(g,{showing:e.loading},{default:(0,o.w5)((()=>[H])),_:1},8,["showing"])])),_:1})}var P=l(29938),z=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,i){function s(e){try{d(o.next(e))}catch(t){i(t)}}function n(e){try{d(o["throw"](e))}catch(t){i(t)}}function d(e){e.done?l(e.value):a(e.value).then(s,n)}d((o=o.apply(e,t||[])).next())}))};const G=(0,o.aZ)({el:"#app",mixins:[C.Z],props:{doc_type:{type:String,default:""}},components:{},data(){return{message:this.$t("only_characters_numbers")}},setup(){let e={};return{new_model:(0,x.iH)(e),token:(0,x.iH)(""),loading:(0,x.iH)(!1)}},watch:{},mounted(){this.setNewModel()},methods:{setNewModel(){this.new_model["name"]="",this.new_model["validate"]=!0,this.new_model["required_error"]=!1},submitNewColumFrom(){return z(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.loading=!1}}))},saveNewRow(){return z(this,void 0,void 0,(function*(){let e,t=new FormData;t.append("title",this.new_model["name"]),t.append("group_name",(0,P.Kh)(this.new_model["name"])),t.append("doc_type_name",this.doc_type),t.append("translation_key",this.new_model["name"]);let l=yield(0,R.O_)();if(e=yield k().post(R.hi.create_document_field_group,t,{headers:{Authorization:l}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};const o=new CustomEvent("group_added",{detail:{data:e.data}});document.dispatchEvent(o),this.showSuccessToast("Group Created successfully"),this.setNewModel()}))},validateRow(e){let t=!0;return e["name"]&&0!=e["name"].length?(0,P.Cp)(e["name"])?t:(e.validate=!1,!1):(e.required_error=!0,!1)},getToken(){return z(this,void 0,void 0,(function*(){let e=this.token&&null!=this.token&&""!=this.token?this.token:yield(0,R.O_)();return e}))}}});var B=l(74260),M=l(10151),Y=l(39570),K=l(13747),J=l(2165),X=l(25589),ee=l(64689),te=l(24554),le=l(5363),oe=l(99367),ae=l(66941),ie=l(60677),se=l(7518),ne=l.n(se);const de=(0,B.Z)(G,[["render",I]]),re=de;ne()(G,"components",{QCard:M.Z,QToolbar:Y.Z,QToolbarTitle:K.Z,QBtn:J.Z,QCardSection:X.Z,QInput:ee.Z,QIcon:te.Z,QTooltip:le.Z,QCardActions:oe.Z,QInnerLoading:ae.Z}),ne()(G,"directives",{ClosePopup:ie.Z});var ue=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,i){function s(e){try{d(o.next(e))}catch(t){i(t)}}function n(e){try{d(o["throw"](e))}catch(t){i(t)}}function d(e){e.done?l(e.value):a(e.value).then(s,n)}d((o=o.apply(e,t||[])).next())}))};const me=(0,o.aZ)({el:"#app",mixins:[C.Z,$.Z,T.Z],props:{doc_type:{type:String,default:""},list_data:{}},components:{CreateGroup:re,Loader:Q.Z},data(){return{}},setup(){let e=[];const t=(0,x.iH)(e),l=(0,L.At)(),{doc_type_list:o}=l;return{columns:t,filter:(0,x.iH)(""),rows:(0,x.iH)(e),doc_type_list:o,loading:(0,x.iH)(!1),copyFromDocType:(0,x.iH)(),addNewDialog:(0,x.iH)(!1),cloneGroupsAndFieldsDlg:(0,x.iH)(!1)}},watch:{list_data:{deep:!0,handler:function(e,t){setTimeout((()=>{this.prepareRows(e)}),0)}}},mounted:function(){this.prepareColumns(),this.prepareRows(this.list_data),document.addEventListener("group_added",this.recordAdded)},unmounted:function(){document.removeEventListener("group_added",this.recordAdded)},methods:{prepareListView(e){this.prepareRows(e)},prepareColumns(){this.columns.push(Object.assign({},{name:"name",label:this.$t("groups"),field:"name",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(e){this.rows=[];for(let[t,l]of Object.entries(e)){const e=l;this.addNewRow(e)}},addNewRow(e){let t=Object.assign({},e);return t["name"]=this.displayFieldLabel(e),this.rows.push(t),this.rows.length.toString()},scrollToBottom(){let e=document.querySelector(".groups-list");if(!e)return;let t=e.querySelector(".q-table__middle");t&&(t.scrollTop=t.scrollHeight)},handleDelete(e,t){return ue(this,void 0,void 0,(function*(){try{if(""===e)return;let l;this.loading=!0;let o=yield(0,R.O_)();if(l=yield k()["delete"](R.hi.delete_document_field_group+"/"+e,{headers:{Authorization:o}}),l.data&&l.data.hasOwnProperty("success")&&!1===l.data.success)throw{message:l.data.message};const a=new CustomEvent("group_deleted",{detail:{index:t}});document.dispatchEvent(a)}catch(l){throw{message:this.$t("pages.messages.ERROR_INTERNAL_OCCUR")}}finally{this.loading=!1}}))},recordAdded(e){this.addNewDialog=!1,setTimeout((()=>{this.scrollToBottom()}),0)},customFilter(e,t){const l=t.toLowerCase();let o=e;return l&&""!==l?(o=e.filter(((e,t)=>{let o=!1;for(let[a,i]of Object.entries(e)){let e=i,t=e&&null!==e?e.toString():"";if(e=t.toLowerCase(),e.includes(l)){o=!0;break}}return o})),o):o},cloneGroupsAndFields(){return ue(this,void 0,void 0,(function*(){let e;this.cloneGroupsAndFieldsDlg=!1,this.showLoading();try{let t=yield(0,R.O_)(),l="?copy_from_doc_type="+this.copyFromDocType+"&copy_to_doc_type="+this.doc_type;e=yield k().get(R.hi.copy_fields_setting_from_doc_type+l,{headers:{Authorization:t}})}catch(l){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}if(!1===e.data.success)return this.showErrorToast(e.data.message),void this.hideLoading();this.showSuccessToast(this.$t("pages.messages.DOC_TYPE_FIELDS_CLONED"));const t=new CustomEvent("fetch_Groups_Fields_event",{});document.dispatchEvent(t)}))}}});var ce=l(17132),pe=l(62025),_e=l(18186),he=l(83884),ge=l(46778),we=l(72448),fe=l(86115);const ye=(0,B.Z)(me,[["render",E],["__scopeId","data-v-1007ff9e"]]),be=ye;ne()(me,"components",{QTable:ce.Z,QBtn:J.Z,QSpace:pe.Z,QInput:ee.Z,QIcon:te.Z,QTr:_e.Z,QTd:he.Z,QTooltip:le.Z,QInnerLoading:ae.Z,QDialog:ge.Z,QCard:M.Z,QToolbar:Y.Z,QToolbarTitle:K.Z,QCardSection:X.Z,QSelect:we.Z,QCardActions:oe.Z,QField:fe.Z}),ne()(me,"directives",{ClosePopup:ie.Z});const ve=e=>((0,o.dD)("data-v-3c301d90"),e=e(),(0,o.Cn)(),e),qe={key:0,class:"q-ml-auto"},ke=ve((()=>(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1)));function Ce(e,t,l,i,s,n){const d=(0,o.up)("q-btn"),r=(0,o.up)("q-space"),u=(0,o.up)("q-icon"),m=(0,o.up)("q-input"),c=(0,o.up)("q-tooltip"),p=(0,o.up)("q-td"),_=(0,o.up)("q-select"),h=(0,o.up)("q-tr"),g=(0,o.up)("q-table"),w=(0,o.up)("q-inner-loading"),f=(0,o.up)("CreateField"),y=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(g,{ref:"tableRef",style:{height:"360px"},class:(0,a.C_)("sticky-header-table fields-list white-back"),flat:"",rows:e.rows,columns:e.columns,"rows-per-page-options":[0],"row-key":"id","no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),filter:e.filter,"filter-method":e.customFilter},{top:(0,o.w5)((()=>[(0,o.Wm)(d,{color:"primary",class:"mr-6",label:e.$t("add_new"),onClick:t[0]||(t[0]=t=>e.addNewDialog=!0)},null,8,["label"]),(0,o.Wm)(r),(0,o.Wm)(m,{outlined:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter=t)},{append:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,o.w5)((t=>[(0,o.Wm)(h,{props:t,id:t.key},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(l=>((0,o.wg)(),(0,o.iD)(o.HY,{key:l.name},["action"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:0,style:{width:"12%"}},{default:(0,o.w5)((()=>[""!==t.row.id?((0,o.wg)(),(0,o.iD)("span",qe,["DEFAULT"!==t.row.org_id?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"float-right","icon-right":"img:trash-bin-default.svg","no-caps":"",flat:"",dense:"",onClick:l=>e.handleDelete(t.row.id,t.rowIndex)},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),_:2},1024)):(0,o.kq)("",!0),"group_name"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:1,style:{width:"14%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.group_name,"onUpdate:modelValue":e=>t.row.group_name=e,readonly:""!==t.row.id,options:e.group_list,"emit-value":"","map-options":""},null,8,["data-id","modelValue","onUpdate:modelValue","readonly","options"])])),_:2},1024)):(0,o.kq)("",!0),"field_type"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:2,style:{width:"14%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.field_type,"onUpdate:modelValue":e=>t.row.field_type=e,readonly:""!==t.row.id,options:e.data_types,"emit-value":"","map-options":""},null,8,["data-id","modelValue","onUpdate:modelValue","readonly","options"])])),_:2},1024)):(0,o.kq)("",!0),"title"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:3,style:{width:"35%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{borderless:"",tabindex:"0","data-id":t.key,class:(0,a.C_)("input-field "),modelValue:t.row.title,"onUpdate:modelValue":e=>t.row.title=e,readonly:""!==t.row.id},null,8,["data-id","modelValue","onUpdate:modelValue","readonly"])])),_:2},1024)):(0,o.kq)("",!0),"field_name"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:4,style:{width:"25%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{borderless:"",tabindex:"0","data-id":t.key,class:(0,a.C_)("input-field "),modelValue:t.row.field_name,"onUpdate:modelValue":e=>t.row.field_name=e,readonly:""!==t.row.id},null,8,["data-id","modelValue","onUpdate:modelValue","readonly"])])),_:2},1024)):(0,o.kq)("",!0)],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","no-data-label","filter","filter-method"]),(0,o.Wm)(w,{showing:e.loading},{default:(0,o.w5)((()=>[ke])),_:1},8,["showing"]),(0,o.Wm)(y,{modelValue:e.addNewDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.addNewDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{doc_type:e.doc_type,group_list:e.group_list},null,8,["doc_type","group_list"])])),_:1},8,["modelValue"])],64)}const xe=(0,o._)("span",{class:"text-weight-bold"},"Create New Field",-1),Te={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},Re={class:"full-width"},Ze={class:"row full-width"},Oe={class:"full-width"},We={class:"row full-width"},De={class:"full-width"},Ve={class:"row full-width"},Ne={class:"full-width"},Ee={class:"row full-width"},Qe={class:"full-width"},Le=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function $e(e,t,l,i,s,n){const d=(0,o.up)("q-toolbar-title"),r=(0,o.up)("q-btn"),u=(0,o.up)("q-toolbar"),m=(0,o.up)("q-input"),c=(0,o.up)("q-select"),p=(0,o.up)("q-checkbox"),_=(0,o.up)("q-card-section"),h=(0,o.up)("q-card-actions"),g=(0,o.up)("q-inner-loading"),w=(0,o.up)("q-card"),f=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(w,{style:{width:"600px"}},{default:(0,o.w5)((()=>[(0,o._)("form",{onSubmit:t[8]||(t[8]=(0,A.iM)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.Wm)(u,{class:"secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[xe])),_:1}),(0,o.wy)((0,o.Wm)(r,{flat:"",round:"",dense:"",icon:"close"},null,512),[[f]])])),_:1}),(0,o.Wm)(_,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o._)("div",Te,[(0,o._)("div",Re,[(0,o.Wm)(m,{outlined:"",tabindex:"0",class:(0,a.C_)("full-width "),modelValue:e.new_model["title"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["title"]=t),placeholder:"Field Title","error-message":e.new_model["title_error_msg"],error:e.new_model["title_error"]},null,8,["modelValue","error-message","error"])])]),(0,o._)("div",Ze,[(0,o._)("div",Oe,[(0,o.Wm)(m,{outlined:"",tabindex:"0",class:(0,a.C_)("full-width "),modelValue:e.new_model["field_name"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.new_model["field_name"]=t),placeholder:"Field Name","error-message":e.new_model["name_error_msg"],error:e.new_model["name_error"]},null,8,["modelValue","error-message","error"])])]),(0,o._)("div",We,[(0,o._)("div",De,[(0,o.Wm)(c,{modelValue:e.new_model["field_type"],"onUpdate:modelValue":t[2]||(t[2]=t=>e.new_model["field_type"]=t),tabindex:"0",options:e.data_types,"error-message":"Field is required",error:e.new_model["type_error"],"emit-value":"","map-options":""},null,8,["modelValue","options","error"])])]),(0,o._)("div",Ve,[(0,o._)("div",Ne,[(0,o.Wm)(c,{tabindex:"0",modelValue:e.new_model["group_name"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.new_model["group_name"]=t),"error-message":"Field is required",error:e.new_model["group_error"],options:e.group_list,"emit-value":"","map-options":""},null,8,["modelValue","error","options"])])]),(0,o._)("div",Ee,[(0,o._)("div",Qe,[(0,o.Wm)(p,{label:e.$t("required"),modelValue:e.new_model["is_required"],"onUpdate:modelValue":t[4]||(t[4]=t=>e.new_model["is_required"]=t),size:"30px"},null,8,["label","modelValue"]),(0,o.Wm)(p,{label:e.$t("readonly"),modelValue:e.new_model["is_readonly"],"onUpdate:modelValue":t[5]||(t[5]=t=>e.new_model["is_readonly"]=t),size:"30px"},null,8,["label","modelValue"]),(0,o.Wm)(p,{label:e.$t("hidden"),modelValue:e.new_model["is_hidden"],"onUpdate:modelValue":t[6]||(t[6]=t=>e.new_model["is_hidden"]=t),size:"30px"},null,8,["label","modelValue"]),(0,o.Wm)(p,{label:e.$t("force_validation"),modelValue:e.new_model["force_validation"],"onUpdate:modelValue":t[7]||(t[7]=t=>e.new_model["force_validation"]=t),size:"30px"},null,8,["label","modelValue"])])])])),_:1}),(0,o.Wm)(h,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(r,{class:"highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[f]]),(0,o.Wm)(r,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,o.Wm)(g,{showing:e.loading},{default:(0,o.w5)((()=>[Le])),_:1},8,["showing"])])),_:1})}var Ae=l(53371),Fe=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,i){function s(e){try{d(o.next(e))}catch(t){i(t)}}function n(e){try{d(o["throw"](e))}catch(t){i(t)}}function d(e){e.done?l(e.value):a(e.value).then(s,n)}d((o=o.apply(e,t||[])).next())}))};const Se=(0,o.aZ)({el:"#app",mixins:[C.Z],props:{doc_type:{type:String,default:""},group_list:[]},components:{},data(){return{}},setup(){let e={};return{new_model:(0,x.iH)(e),token:(0,x.iH)(""),data_types:(0,x.iH)([]),loading:(0,x.iH)(!1)}},watch:{},mounted(){this.setNewModel(),this.setFieldTypes()},methods:{setFieldTypes(){this.data_types=[{label:"Select Type",value:""}].concat((0,P.Wb)())},setNewModel(){this.new_model["field_name"]="",this.new_model["group_name"]="",this.new_model["field_type"]="",this.new_model["title"]="",this.new_model["is_required"]=!1,this.new_model["is_readonly"]=!1,this.new_model["is_hidden"]=!1,this.new_model["force_validation"]=!1,this.new_model["type_error"]=!1,this.new_model["group_error"]=!1,this.new_model["type_error"]=!1,this.new_model["group_error"]=!1,this.new_model["title_error"]=!1,this.new_model["name_error"]=!1,this.new_model["name_error_msg"]="",this.new_model["title_error_msg"]=""},submitNewColumFrom(){return Fe(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.loading=!1}}))},saveNewRow(){return Fe(this,void 0,void 0,(function*(){let e,t=new FormData;t.append("title",this.new_model["title"]),t.append("field_name",this.new_model["field_name"]),t.append("group_name",this.new_model["group_name"]),t.append("doc_type_name",this.doc_type),t.append("field_type",this.new_model["field_type"]),t.append("is_required",this.new_model["is_required"]),t.append("is_readonly",this.new_model["is_readonly"]),t.append("is_hidden",this.new_model["is_hidden"]),t.append("force_validation",this.new_model["force_validation"]);let l=yield(0,R.O_)();if(e=yield k().post(R.hi.create_document_field,t,{headers:{Authorization:l}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};this.showSuccessToast("Field Created successfully"),e.data["group_name"]=this.new_model["group_name"];const o=new CustomEvent("field_added",{detail:{data:e.data}});document.dispatchEvent(o)}))},validateRow(e){let t=!1;return this.new_model["type_error"]=!1,this.new_model["group_error"]=!1,this.new_model["title_error"]=!1,this.new_model["name_error"]=!1,this.new_model["name_error_msg"]="",this.new_model["title_error_msg"]="",e["title"]&&0!=e["title"].length?(0,P.Cp)(e["title"])||(this.new_model["title_error_msg"]=Ae.i18n.t("field_only_characters"),t=!0,this.new_model["title_error"]=!0):(t=!0,this.new_model["title_error_msg"]="Field Title is required",this.new_model["title_error"]=!0),e["field_name"]&&0!=e["field_name"].length?(0,P.ij)(e["field_name"])||(this.new_model["name_error_msg"]="Field Name can only contain characters, numbers, hyphen and underscore",t=!0,this.new_model["name_error"]=!0):(this.new_model["name_error_msg"]="Field Name is required",t=!0,this.new_model["name_error"]=!0),e["field_type"]&&0!=e["field_type"].length||(this.new_model["type_error"]=!0),e["group_name"]&&0!=e["group_name"].length||(this.new_model["group_error"]=!0),!t},getToken(){return Fe(this,void 0,void 0,(function*(){let e=this.token&&null!=this.token&&""!=this.token?this.token:yield(0,R.O_)();return e}))}}});var Ue=l(65735);const je=(0,B.Z)(Se,[["render",$e]]),He=je;ne()(Se,"components",{QCard:M.Z,QToolbar:Y.Z,QToolbarTitle:K.Z,QBtn:J.Z,QCardSection:X.Z,QInput:ee.Z,QSelect:we.Z,QCheckbox:Ue.Z,QCardActions:oe.Z,QInnerLoading:ae.Z}),ne()(Se,"directives",{ClosePopup:ie.Z});var Ie=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,i){function s(e){try{d(o.next(e))}catch(t){i(t)}}function n(e){try{d(o["throw"](e))}catch(t){i(t)}}function d(e){e.done?l(e.value):a(e.value).then(s,n)}d((o=o.apply(e,t||[])).next())}))};const Pe=(0,o.aZ)({el:"#app",mixins:[C.Z,$.Z],props:{doc_type:{type:String,default:""},list_data:{},groups:{}},components:{CreateField:He},data(){return{}},setup(){let e=[];const t=(0,x.iH)(e);let l={};return{loading:(0,x.iH)(!1),columns:t,rows:(0,x.iH)(e),filter:(0,x.iH)(""),group_list:(0,x.iH)(e),group_list_flat:(0,x.iH)(l),addNewDialog:(0,x.iH)(!1)}},watch:{list_data:{deep:!0,handler:function(e,t){setTimeout((()=>{this.prepareRows(e)}),0)}},groups:{deep:!0,handler:function(e,t){setTimeout((()=>{this.fetchGroups(e)}),0)}}},mounted:function(){this.prepareColumns(),this.fetchGroups(this.groups),this.prepareRows(this.list_data),document.addEventListener("field_added",this.recordAdded)},unmounted:function(){document.removeEventListener("field_added",this.recordAdded)},methods:{recordAdded(e){this.addNewDialog=!1,setTimeout((()=>{this.scrollToBottom()}),0)},fetchGroups(e){this.group_list=[],this.group_list.push(Object.assign({},{value:"",label:"Select Group"}));for(let[t,l]of Object.entries(e)){const e=l;this.group_list.push(Object.assign({},{value:e.group_name,label:this.displayFieldLabel(e)}))}this.flatLanguageList()},flatLanguageList(){if((0,P.fg)(this.group_list_flat))for(let[e,t]of Object.entries(this.group_list)){let e=t;this.group_list_flat[e.value]=e.label}},prepareColumns(){this.columns.push(Object.assign({},{name:"title",label:this.$t("field_title"),field:"title",align:"left"})),this.columns.push(Object.assign({},{name:"field_name",label:this.$t("field_name"),field:"field_name",align:"left"})),this.columns.push(Object.assign({},{name:"field_type",label:this.$t("type"),field:"field_type",align:"left"})),this.columns.push(Object.assign({},{name:"group_name",label:this.$t("groups"),field:"group_name",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(e){this.rows=[];for(let[t,l]of Object.entries(e)){const e=l;this.addNewRow(e)}},addNewRow(e){let t=Object.assign({},e);return t["title"]=this.displayFieldLabel(e),t["error"]=!1,t["error_messages"]="",this.rows.push(t),this.rows.length.toString()},scrollToBottom(){let e=document.querySelector(".fields-list");if(!e)return;let t=e.querySelector(".q-table__middle");t&&(t.scrollTop=t.scrollHeight)},handleDelete(e,t){return Ie(this,void 0,void 0,(function*(){try{if(""===e)return;let l;this.loading=!0;let o=yield(0,R.O_)();if(l=yield k()["delete"](R.hi.delete_document_field+"/"+e,{headers:{Authorization:o}}),l.data&&l.data.hasOwnProperty("success")&&!1===l.data.success)throw{message:l.data.message};const a=new CustomEvent("field_deleted",{detail:{index:t}});document.dispatchEvent(a)}catch(l){throw{message:this.$t("pages.messages.ERROR_INTERNAL_OCCUR")}}finally{this.loading=!1}}))},customFilter(e,t){const l=t.toLowerCase();let o=e;return l&&""!==l?(o=e.filter(((e,t)=>{let o=!1;for(let[a,i]of Object.entries(e)){let e=i,t=e&&null!==e?e.toString():"";if(e=t.toLowerCase(),e.includes(l)){o=!0;break}if("group_name"===a&&e&&this.group_list_flat[t]&&(e=this.group_list_flat[t].toLowerCase(),e.includes(l))){o=!0;break}}return o})),o):o}}}),ze=(0,B.Z)(Pe,[["render",Ce],["__scopeId","data-v-3c301d90"]]),Ge=ze;ne()(Pe,"components",{QTable:ce.Z,QBtn:J.Z,QSpace:pe.Z,QInput:ee.Z,QIcon:te.Z,QTr:_e.Z,QTd:he.Z,QTooltip:le.Z,QSelect:we.Z,QInnerLoading:ae.Z,QDialog:ge.Z,QField:fe.Z});const Be=e=>((0,o.dD)("data-v-47e5e1e3"),e=e(),(0,o.Cn)(),e),Me={key:0,class:"q-ml-auto"},Ye=Be((()=>(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1)));function Ke(e,t,l,i,s,n){const d=(0,o.up)("q-icon"),r=(0,o.up)("q-input"),u=(0,o.up)("q-space"),m=(0,o.up)("q-btn"),c=(0,o.up)("q-tooltip"),p=(0,o.up)("q-td"),_=(0,o.up)("q-tr"),h=(0,o.up)("q-table"),g=(0,o.up)("q-inner-loading"),w=(0,o.up)("CreateTable"),f=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(h,{ref:"tableRef",style:{height:"360px"},class:(0,a.C_)("sticky-header-table tables-list"),rows:e.rows,columns:e.columns,"rows-per-page-options":[0],"no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),"row-key":"id",filter:e.filter,"filter-method":e.customFilter},{top:(0,o.w5)((()=>[(0,o.Wm)(r,{outlined:"",debounce:"300",color:"primary",dense:"",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t)},{append:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"search"})])),_:1},8,["modelValue"]),(0,o.Wm)(u),(0,o.Wm)(m,{color:"primary",class:"mr-6",label:e.$t("add_new"),onClick:t[1]||(t[1]=t=>e.addNewDialog=!0)},null,8,["label"])])),body:(0,o.w5)((t=>[(0,o.Wm)(_,{props:t,id:t.key},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(l=>((0,o.wg)(),(0,o.iD)(o.HY,{key:l.name},["action"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:0,style:{width:"12%"}},{default:(0,o.w5)((()=>[""!==t.row.id?((0,o.wg)(),(0,o.iD)("span",Me,[(0,o.Wm)(m,{class:"float-right","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:l=>e.handleDelete(t.row.id,t.rowIndex)},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])):(0,o.kq)("",!0)])),_:2},1024)):(0,o.kq)("",!0),"table_name"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:1,style:{width:"70%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.table_name,"onUpdate:modelValue":e=>t.row.table_name=e,readonly:""!==t.row.id},null,8,["data-id","modelValue","onUpdate:modelValue","readonly"])])),_:2},1024)):(0,o.kq)("",!0)],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","no-data-label","filter","filter-method"]),(0,o.Wm)(g,{showing:e.loading},{default:(0,o.w5)((()=>[Ye])),_:1},8,["showing"]),(0,o.Wm)(f,{modelValue:e.addNewDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.addNewDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{doc_type:e.doc_type},null,8,["doc_type"])])),_:1},8,["modelValue"])],64)}const Je={class:"text-weight-bold"},Xe={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},et={class:"full-width"},tt=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function lt(e,t,l,i,s,n){const d=(0,o.up)("q-toolbar-title"),r=(0,o.up)("q-btn"),u=(0,o.up)("q-toolbar"),m=(0,o.up)("q-input"),c=(0,o.up)("q-card-section"),p=(0,o.up)("q-card-actions"),_=(0,o.up)("q-inner-loading"),h=(0,o.up)("q-card"),g=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(h,{style:{width:"600px"}},{default:(0,o.w5)((()=>[(0,o._)("form",{onSubmit:t[1]||(t[1]=(0,A.iM)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.Wm)(u,{class:"secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o._)("span",Je,(0,a.zw)(e.$t("create_new_table")),1)])),_:1}),(0,o.wy)((0,o.Wm)(r,{flat:"",round:"",dense:"",icon:"close"},null,512),[[g]])])),_:1}),(0,o.Wm)(c,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o._)("div",Xe,[(0,o._)("div",et,[(0,o.Wm)(m,{outlined:"",tabindex:"0",class:(0,a.C_)("full-width "),modelValue:e.new_model["table_name"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["table_name"]=t),label:e.$t("table_name"),hint:e.message,"error-message":e.new_model["name_error_msg"],error:e.new_model["name_error"]},null,8,["modelValue","label","hint","error-message","error"])])])])),_:1}),(0,o.Wm)(p,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(r,{class:"highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[g]]),(0,o.Wm)(r,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,o.Wm)(_,{showing:e.loading},{default:(0,o.w5)((()=>[tt])),_:1},8,["showing"])])),_:1})}var ot=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,i){function s(e){try{d(o.next(e))}catch(t){i(t)}}function n(e){try{d(o["throw"](e))}catch(t){i(t)}}function d(e){e.done?l(e.value):a(e.value).then(s,n)}d((o=o.apply(e,t||[])).next())}))};const at=(0,o.aZ)({el:"#app",mixins:[C.Z],props:{doc_type:{type:String,default:""}},components:{},data(){return{message:Ae.i18n.t("field_only_characters")}},setup(){let e={};return{new_model:(0,x.iH)(e),token:(0,x.iH)(""),loading:(0,x.iH)(!1)}},watch:{},mounted(){this.setNewModel()},methods:{setNewModel(){this.new_model["table_name"]="",this.new_model["name_error"]=!1,this.new_model["name_error_msg"]=""},submitNewColumFrom(){return ot(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.loading=!1}}))},saveNewRow(){return ot(this,void 0,void 0,(function*(){let e,t=new FormData;t.append("table_name",this.new_model["table_name"]),t.append("doc_type_name",this.doc_type),t.append("is_default","false");let l=yield(0,R.O_)();if(e=yield k().post(R.hi.create_document_table,t,{headers:{Authorization:l}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};const o=new CustomEvent("table_added",{detail:{data:e.data}});document.dispatchEvent(o),this.showSuccessToast("Table Created successfully"),this.setNewModel()}))},validateRow(e){let t=!0;return this.new_model["name_error"]=!1,this.new_model["name_error_msg"]="",e["table_name"]&&0!=e["table_name"].length?(0,P.ij)(e["table_name"])?t:(this.new_model["name_error_msg"]="Field Name can only contain characters, numbers, hyphen and underscore",this.new_model["name_error"]=!0,!1):(this.new_model["name_error_msg"]="Table Name is required",this.new_model["name_error"]=!0,!1)},getToken(){return ot(this,void 0,void 0,(function*(){let e=this.token&&null!=this.token&&""!=this.token?this.token:yield(0,R.O_)();return e}))}}}),it=(0,B.Z)(at,[["render",lt]]),st=it;ne()(at,"components",{QCard:M.Z,QToolbar:Y.Z,QToolbarTitle:K.Z,QBtn:J.Z,QCardSection:X.Z,QInput:ee.Z,QCardActions:oe.Z,QInnerLoading:ae.Z}),ne()(at,"directives",{ClosePopup:ie.Z});var nt=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,i){function s(e){try{d(o.next(e))}catch(t){i(t)}}function n(e){try{d(o["throw"](e))}catch(t){i(t)}}function d(e){e.done?l(e.value):a(e.value).then(s,n)}d((o=o.apply(e,t||[])).next())}))};const dt=(0,o.aZ)({el:"#app",mixins:[C.Z,$.Z],props:{doc_type:{type:String,default:""},list_data:{}},components:{CreateTable:st},data(){return{}},setup(){let e=[];const t=(0,x.iH)(e);return{loading:(0,x.iH)(!1),columns:t,rows:(0,x.iH)(e),filter:(0,x.iH)(""),addNewDialog:(0,x.iH)(!1)}},watch:{list_data:{deep:!0,handler:function(e,t){setTimeout((()=>{this.prepareRows(e)}),0)}}},mounted:function(){this.prepareColumns(),this.prepareRows(this.list_data),document.addEventListener("table_added",this.recordAdded)},unmounted:function(){document.removeEventListener("table_added",this.recordAdded)},methods:{prepareListView(e){this.prepareRows(e)},prepareColumns(){this.columns.push(Object.assign({},{name:"table_name",label:this.$t("table"),field:"table_name",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(e){this.rows=[];for(let[t,l]of Object.entries(e)){const e=l;this.addNewRow(e)}},addNewRow(e){let t=Object.assign({},e);return this.rows.push(t),this.rows.length.toString()},scrollToBottom(){let e=document.querySelector(".tables-list");if(!e)return;let t=e.querySelector(".q-table__middle");t&&(t.scrollTop=t.scrollHeight)},handleDelete(e,t){return nt(this,void 0,void 0,(function*(){try{if(""===e)return;let l;this.loading=!0;let o=yield(0,R.O_)();if(l=yield k()["delete"](R.hi.delete_document_table+"/"+e,{headers:{Authorization:o}}),l.data&&l.data.hasOwnProperty("success")&&!1===l.data.success)throw{message:l.data.message};const a=new CustomEvent("table_deleted",{detail:{index:t}});document.dispatchEvent(a)}catch(l){throw{message:this.$t("pages.messages.ERROR_INTERNAL_OCCUR")}}finally{this.loading=!1}}))},recordAdded(e){this.addNewDialog=!1,setTimeout((()=>{this.scrollToBottom()}),0)},customFilter(e,t){const l=t.toLowerCase();let o=e;return l&&""!==l?(o=e.filter(((e,t)=>{let o=!1;for(let[a,i]of Object.entries(e)){let e=i,t=e&&null!==e?e.toString():"";if(e=t.toLowerCase(),e.includes(l)){o=!0;break}}return o})),o):o}}}),rt=(0,B.Z)(dt,[["render",Ke],["__scopeId","data-v-47e5e1e3"]]),ut=rt;ne()(dt,"components",{QTable:ce.Z,QInput:ee.Z,QIcon:te.Z,QSpace:pe.Z,QBtn:J.Z,QTr:_e.Z,QTd:he.Z,QTooltip:le.Z,QInnerLoading:ae.Z,QDialog:ge.Z,QField:fe.Z});var mt=l(13873);const ct=e=>((0,o.dD)("data-v-68cbf164"),e=e(),(0,o.Cn)(),e),pt={key:0,class:"q-ml-auto"},_t=ct((()=>(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1)));function ht(e,t,l,i,s,n){const d=(0,o.up)("q-btn"),r=(0,o.up)("q-space"),u=(0,o.up)("q-icon"),m=(0,o.up)("q-input"),c=(0,o.up)("q-tooltip"),p=(0,o.up)("q-td"),_=(0,o.up)("q-select"),h=(0,o.up)("q-tr"),g=(0,o.up)("q-table"),w=(0,o.up)("q-inner-loading"),f=(0,o.up)("CreateRegex"),y=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(g,{ref:"tableRef",style:{height:"360px"},class:(0,a.C_)("sticky-header-table regexes-list white-back"),rows:e.rows,columns:e.columns,"rows-per-page-options":[0],"row-key":"id",filter:e.filter,"no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),"filter-method":e.customFilter},{top:(0,o.w5)((()=>[(0,o.Wm)(d,{color:"primary",class:"mr-6",label:e.$t("add_new"),onClick:t[0]||(t[0]=t=>e.addNewDialog=!0)},null,8,["label"]),(0,o.Wm)(r),(0,o.Wm)(m,{outlined:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter=t)},{append:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,o.w5)((t=>[(0,o.Wm)(h,{props:t,id:t.key},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(l=>((0,o.wg)(),(0,o.iD)(o.HY,{key:l.name},["action"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:0,style:{width:"12%"}},{default:(0,o.w5)((()=>[""!==t.row.id?((0,o.wg)(),(0,o.iD)("span",pt,["DEFAULT"!==t.row.org_id?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"float-right","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:l=>e.handleDelete(t.row,t.rowIndex)},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),_:2},1024)):(0,o.kq)("",!0),"regexValuePattern"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:1,style:{width:"70%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{borderless:"",tabindex:"0","data-id":t.key,readonly:!0,class:(0,a.C_)("input-field "),modelValue:t.row.regexValuePattern,"onUpdate:modelValue":e=>t.row.regexValuePattern=e},null,8,["data-id","modelValue","onUpdate:modelValue"])])),_:2},1024)):(0,o.kq)("",!0),"regexOrigin"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:2,style:{width:"20%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.regexOrigin,"onUpdate:modelValue":e=>t.row.regexOrigin=e,options:e.language_origin_list,readonly:!0,"emit-value":"","map-options":""},null,8,["data-id","modelValue","onUpdate:modelValue","options"])])),_:2},1024)):(0,o.kq)("",!0)],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","filter","no-data-label","filter-method"]),(0,o.Wm)(w,{showing:e.loading},{default:(0,o.w5)((()=>[_t])),_:1},8,["showing"]),(0,o.Wm)(y,{modelValue:e.addNewDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.addNewDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{doc_type:e.doc_type,language_origin_list:e.language_origin_list,rows:e.rows},null,8,["doc_type","language_origin_list","rows"])])),_:1},8,["modelValue"])],64)}const gt=(0,o._)("span",{class:"text-weight-bold"},"Create New Regex",-1),wt={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},ft={class:"full-width"},yt={class:"row full-width"},bt={class:"full-width"},vt=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function qt(e,t,l,i,s,n){const d=(0,o.up)("q-toolbar-title"),r=(0,o.up)("q-btn"),u=(0,o.up)("q-toolbar"),m=(0,o.up)("q-input"),c=(0,o.up)("q-select"),p=(0,o.up)("q-card-section"),_=(0,o.up)("q-card-actions"),h=(0,o.up)("q-inner-loading"),g=(0,o.up)("q-card"),w=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(g,{style:{width:"600px"}},{default:(0,o.w5)((()=>[(0,o._)("form",{onSubmit:t[3]||(t[3]=(0,A.iM)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.Wm)(u,{class:"secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[gt])),_:1}),(0,o.wy)((0,o.Wm)(r,{flat:"",round:"",dense:"",icon:"close"},null,512),[[w]])])),_:1}),(0,o.Wm)(p,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o._)("div",wt,[(0,o._)("div",ft,[(0,o.Wm)(m,{outlined:"",tabindex:"0",class:(0,a.C_)("full-width "),modelValue:e.new_model["regexValuePattern"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["regexValuePattern"]=t),placeholder:"Pattern","error-message":e.new_model["pattern_error_msg"],error:e.new_model["pattern_error"]},null,8,["modelValue","error-message","error"])])]),(0,o._)("div",yt,[(0,o._)("div",bt,[(0,o.Wm)(c,{tabindex:"0",modelValue:e.new_model["regexOrigin"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.new_model["regexOrigin"]=t),"error-message":"Field is required",error:e.new_model["origin_error"],options:e.language_origin_list,"emit-value":"","map-options":""},null,8,["modelValue","error","options"])])])])),_:1}),(0,o.Wm)(_,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(r,{class:"highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[w]]),(0,o.Wm)(r,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("save")},null,8,["label"]),e.new_model["regex_validated"]?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(r,{key:0,color:"orange",class:"mr-6",label:e.$t("validate"),onClick:t[2]||(t[2]=t=>e.validatePattern())},null,8,["label"]))])),_:1})],32),(0,o.Wm)(h,{showing:e.loading},{default:(0,o.w5)((()=>[vt])),_:1},8,["showing"])])),_:1})}var kt=l(91949),Ct=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,i){function s(e){try{d(o.next(e))}catch(t){i(t)}}function n(e){try{d(o["throw"](e))}catch(t){i(t)}}function d(e){e.done?l(e.value):a(e.value).then(s,n)}d((o=o.apply(e,t||[])).next())}))};const xt=(0,o.aZ)({el:"#app",mixins:[C.Z],props:{doc_type:{type:String,default:""},language_origin_list:[],type:{type:String,default:"document"},rows:[]},components:{},data(){return{}},setup(){let e={};return{new_model:(0,x.iH)(e),token:(0,x.iH)(""),loading:(0,x.iH)(!1)}},watch:{},mounted(){this.setNewModel()},methods:{setNewModel(){this.new_model["regexType"]=this.doc_type,this.new_model["regexValuePattern"]="",this.new_model["regexOrigin"]="",this.new_model["org_id"]=(0,kt.Y4)("org_id"),this.new_model["regex_validated"]=!1,this.new_model["origin_error"]=!1,this.new_model["pattern_error"]=!1,this.new_model["pattern_error_msg"]=""},submitNewColumFrom(){return Ct(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.loading=!1}}))},saveNewRow(){return Ct(this,void 0,void 0,(function*(){let e,t=yield(0,R.O_)(),l=JSON.parse(JSON.stringify(this.rows));l.push(this.new_model);let o=new FormData;if(o.append("data",JSON.stringify(l)),e=yield k().post(R.hi.post_data_fellowkv+(0,R.pA)(this.type),o,{headers:{Authorization:t}}),!1===e.data.success)throw{message:e.data.message};const a=new CustomEvent("regex_added",{detail:{}});document.dispatchEvent(a)}))},validateRow(e){let t=!1;return this.resetErrors(),this.isPatternEmpty(e)?t=!0:this.new_model["regex_validated"]||(t=!0,this.new_model["pattern_error_msg"]="Please validate Pattern",this.new_model["pattern_error"]=!0),e["regexOrigin"]&&0!=e["regexOrigin"].length||(this.new_model["origin_error"]=!0,t=!0),!t},isPatternEmpty(e){let t=!1;return e["regexValuePattern"]&&0!=e["regexValuePattern"].length||(t=!0,this.new_model["pattern_error_msg"]="Pattern is required",this.new_model["pattern_error"]=!0),t},resetErrors(){this.new_model["pattern_error"]=!1,this.new_model["pattern_error_msg"]="",this.new_model["origin_error"]=!1},validatePattern(){return Ct(this,void 0,void 0,(function*(){try{if(this.resetErrors(),this.isPatternEmpty(this.new_model))return;let e;this.loading=!0;let t=yield(0,R.O_)(),l=new FormData;if(l.append("patterns",JSON.stringify(this.getValidatePatternData())),e=yield k().post(R.hi.validate_patterns,l,{headers:{Authorization:t}}),!1===e.data.success)throw{message:e.data.message};this.updateRows(e.data.data)}catch(e){this.showErrorToast("Something went wrong while loading data. Please try again.")}finally{this.loading=!1}}))},updateRows(e){for(let[t,l]of Object.entries(e)){const e=!1!==l;this.new_model["regex_validated"]=e,!1===e&&(this.new_model["pattern_error_msg"]="Valid pattern is required",this.new_model["pattern_error"]=!0)}},getValidatePatternData(){let e=[];const t=this.new_model["regexValuePattern"]&&""!==this.new_model["regexValuePattern"]?this.new_model["regexValuePattern"].toString():"";return e.push(t),e},getToken(){return Ct(this,void 0,void 0,(function*(){let e=this.token&&null!=this.token&&""!=this.token?this.token:yield(0,R.O_)();return e}))}}}),Tt=(0,B.Z)(xt,[["render",qt]]),Rt=Tt;ne()(xt,"components",{QCard:M.Z,QToolbar:Y.Z,QToolbarTitle:K.Z,QBtn:J.Z,QCardSection:X.Z,QInput:ee.Z,QSelect:we.Z,QCardActions:oe.Z,QInnerLoading:ae.Z}),ne()(xt,"directives",{ClosePopup:ie.Z});var Zt=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,i){function s(e){try{d(o.next(e))}catch(t){i(t)}}function n(e){try{d(o["throw"](e))}catch(t){i(t)}}function d(e){e.done?l(e.value):a(e.value).then(s,n)}d((o=o.apply(e,t||[])).next())}))};const Ot=(0,o.aZ)({el:"#app",mixins:[C.Z],props:{doc_type:{type:String,default:""},list_data:[],language_origin_list:[]},components:{CreateRegex:Rt},data(){return{}},setup(){let e=[];const t=(0,x.iH)(e);return{loading:(0,x.iH)(!1),columns:t,rows:(0,x.iH)(e),filter:(0,x.iH)(""),addNewDialog:(0,x.iH)(!1)}},watch:{list_data:{deep:!0,handler:function(e,t){setTimeout((()=>{this.prepareRows(e)}),0)}}},mounted:function(){this.prepareColumns(),this.prepareRows(this.list_data),document.addEventListener("regex_added",this.recordAdded)},unmounted:function(){document.removeEventListener("regex_added",this.recordAdded)},methods:{prepareListView(e){this.prepareRows(e)},prepareColumns(){this.columns.push(Object.assign({},{name:"regexOrigin",label:this.$t("origin"),field:"regexOrigin",align:"left"})),this.columns.push(Object.assign({},{name:"regexValuePattern",label:this.$t("pattern"),field:"regexValuePattern",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(e){this.rows=[];for(let[t,l]of Object.entries(e)){const e=l;this.addNewRow(e)}},addNewRow(e){let t=Object.assign({},e);return this.rows.push(t),this.rows.length.toString()},scrollToBottom(){let e=document.querySelector(".regexes-list");if(!e)return;let t=e.querySelector(".q-table__middle");t&&(t.scrollTop=t.scrollHeight)},handleDelete(e,t){return Zt(this,void 0,void 0,(function*(){try{let e;this.loading=!0,this.rows[t].is_deleted=!0;let l=yield(0,R.O_)(),o=new FormData;if(o.append("data",JSON.stringify(this.rows)),e=yield k().post(R.hi.post_data_fellowkv+(0,R.pA)(this.type),o,{headers:{Authorization:l}}),!1===e.data.success)throw{message:e.data.message};const a=new CustomEvent("regex_deleted",{detail:{index:t}});document.dispatchEvent(a)}catch(e){throw{message:this.$t("pages.messages.ERROR_INTERNAL_OCCUR")}}finally{this.loading=!1}}))},recordAdded(e){this.addNewDialog=!1},customFilter(e,t){const l=t.toLowerCase();let o=e;return l&&""!==l?(o=e.filter(((e,t)=>{let o=!1;for(let[a,i]of Object.entries(e)){let e=i,t=e&&null!==e?e.toString():"";if(e=t.toLowerCase(),e.includes(l)){o=!0;break}}return o})),o):o}}}),Wt=(0,B.Z)(Ot,[["render",ht],["__scopeId","data-v-68cbf164"]]),Dt=Wt;ne()(Ot,"components",{QTable:ce.Z,QBtn:J.Z,QSpace:pe.Z,QInput:ee.Z,QIcon:te.Z,QTr:_e.Z,QTd:he.Z,QTooltip:le.Z,QSelect:we.Z,QInnerLoading:ae.Z,QDialog:ge.Z,QField:fe.Z});const Vt={class:"container no-padding"},Nt={class:"row full-width secondary-c-text q-pt-md q-pb-md"},Et={class:"col-6 pl-20"},Qt=(0,o._)("img",{width:"24",src:"back_new.svg"},null,-1),Lt={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},$t={class:"col-6 pr-22"};function At(e,t,l,i,s,n){const d=(0,o.up)("q-icon"),r=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("div",Vt,[(0,o._)("div",Nt,[(0,o._)("div",Et,[(0,o.Wm)(r,{flat:"",rounded:"",color:"primary",to:e.back_to_rotue},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"text-red-13",size:"sm"},{default:(0,o.w5)((()=>[Qt])),_:1}),(0,o._)("label",Lt,(0,a.zw)(e.$t("back_to_list")),1)])),_:1},8,["to"])]),(0,o._)("div",$t,[(0,o.WI)(e.$slots,"default"),e.create_new_btn?((0,o.wg)(),(0,o.j4)(r,{key:0,color:"primary",class:"float-right q-ml-sm",icon:"add",to:e.create_new_btn,label:e.$t("new")},null,8,["to","label"])):(0,o.kq)("",!0)])])])}const Ft=(0,o.aZ)({props:{back_to_rotue:{type:String,default:"/settings/document"},create_new_btn:{type:String,default:""}}}),St=(0,B.Z)(Ft,[["render",At]]),Ut=St;ne()(Ft,"components",{QBtn:J.Z,QIcon:te.Z});var jt=l(42122);const Ht=e=>((0,o.dD)("data-v-dc63238c"),e=e(),(0,o.Cn)(),e),It={key:0,class:"q-ml-auto"},Pt=Ht((()=>(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1)));function zt(e,t,l,i,s,n){const d=(0,o.up)("q-icon"),r=(0,o.up)("q-input"),u=(0,o.up)("q-space"),m=(0,o.up)("q-btn"),c=(0,o.up)("q-tooltip"),p=(0,o.up)("q-td"),_=(0,o.up)("q-select"),h=(0,o.up)("q-tr"),g=(0,o.up)("q-table"),w=(0,o.up)("q-inner-loading"),f=(0,o.up)("CreateColumn"),y=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(g,{ref:"tableRef",style:{height:"360px"},class:(0,a.C_)("table-columns-list"),rows:e.rows,columns:e.columns,"no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),"rows-per-page-options":[0],"row-key":"id",filter:e.filter,"filter-method":e.customFilter},{top:(0,o.w5)((()=>[(0,o.Wm)(r,{dense:"",outlined:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t)},{append:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"search"})])),_:1},8,["modelValue"]),(0,o.Wm)(u),(0,o.Wm)(m,{color:"primary",class:"mr-6",label:e.$t("add_new"),onClick:t[1]||(t[1]=t=>e.addNewDialog=!0)},null,8,["label"])])),body:(0,o.w5)((t=>[(0,o.Wm)(h,{props:t,id:t.key},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(l=>((0,o.wg)(),(0,o.iD)(o.HY,{key:l.name},["action"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:0,style:{width:"12%"}},{default:(0,o.w5)((()=>[""!==t.row.id?((0,o.wg)(),(0,o.iD)("span",It,["DEFAULT"!==t.row.org_id?((0,o.wg)(),(0,o.j4)(m,{key:0,class:"float-right","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:l=>e.handleDelete(t.row,t.rowIndex)},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),_:2},1024)):(0,o.kq)("",!0),"column_name"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:1,style:{width:"70%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.column_name,"onUpdate:modelValue":e=>t.row.column_name=e,readonly:""!==t.row.id},null,8,["data-id","modelValue","onUpdate:modelValue","readonly"])])),_:2},1024)):(0,o.kq)("",!0),"table_name"===l.name?((0,o.wg)(),(0,o.j4)(p,{key:2,style:{width:"70%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.table_name,"onUpdate:modelValue":e=>t.row.table_name=e,readonly:""!==t.row.id,options:e.tables_list,"emit-value":"","map-options":""},null,8,["data-id","modelValue","onUpdate:modelValue","readonly","options"])])),_:2},1024)):(0,o.kq)("",!0)],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","no-data-label","filter","filter-method"]),(0,o.Wm)(w,{showing:e.loading},{default:(0,o.w5)((()=>[Pt])),_:1},8,["showing"]),(0,o.Wm)(y,{modelValue:e.addNewDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.addNewDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{doc_type:e.doc_type,columns_list:e.columns_list,tables_list:e.tables_list},null,8,["doc_type","columns_list","tables_list"])])),_:1},8,["modelValue"])],64)}const Gt=(0,o._)("span",{class:"text-weight-bold"},"Create New Column",-1),Bt={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},Mt={class:"full-width"},Yt={class:"row full-width"},Kt={class:"full-width"},Jt={class:"row full-width"},Xt={class:"full-width"},el={class:"row full-width"},tl={class:"full-width"},ll=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function ol(e,t,l,i,s,n){const d=(0,o.up)("q-toolbar-title"),r=(0,o.up)("q-btn"),u=(0,o.up)("q-toolbar"),m=(0,o.up)("q-input"),c=(0,o.up)("q-checkbox"),p=(0,o.up)("q-icon"),_=(0,o.up)("q-item-label"),h=(0,o.up)("q-item-section"),g=(0,o.up)("q-item"),w=(0,o.up)("q-select"),f=(0,o.up)("q-card-section"),y=(0,o.up)("q-card-actions"),b=(0,o.up)("q-inner-loading"),v=(0,o.up)("q-card"),q=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(v,{style:{width:"600px"}},{default:(0,o.w5)((()=>[(0,o._)("form",{onSubmit:t[5]||(t[5]=(0,A.iM)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.Wm)(u,{class:"secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[Gt])),_:1}),(0,o.wy)((0,o.Wm)(r,{flat:"",round:"",dense:"",icon:"close"},null,512),[[q]])])),_:1}),(0,o.Wm)(f,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o._)("div",Bt,[(0,o._)("div",Mt,[(0,o.Wm)(m,{label:"Title*",modelValue:e.new_model["title"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["title"]=t),hint:"Only use Words and numbers",outlined:"",class:"full-width"},null,8,["modelValue"])])]),(0,o._)("div",Yt,[(0,o._)("div",Kt,[(0,o.Wm)(c,{label:e.$t("is_it_required"),modelValue:e.new_model["column_required"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.new_model["column_required"]=t),size:"30px"},null,8,["label","modelValue"])])]),(0,o._)("div",Jt,[(0,o._)("div",Xt,[(0,o.Wm)(w,{modelValue:e.new_model["type"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.new_model["type"]=t),class:"col-sm-6 col-md-6 col-lg-6",options:e.column_type,label:e.$t("select_column_type")+"*","emit-value":"","map-options":"","error-message":"Field is required",error:e.new_model["type_error"]},{append:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"close",onClick:t[2]||(t[2]=(0,A.iM)((t=>e.new_model["type"]=""),["stop"])),class:"cursor-pointer"})])),option:(0,o.w5)((e=>[(0,o.Wm)(g,(0,a.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","label","error"])])]),(0,o._)("div",el,[(0,o._)("div",tl,[(0,o.Wm)(w,{tabindex:"0",modelValue:e.new_model["table_name"],"onUpdate:modelValue":t[4]||(t[4]=t=>e.new_model["table_name"]=t),"error-message":"Field is required",error:e.new_model["table_name_error"],options:e.tables_list,"emit-value":"","map-options":""},null,8,["modelValue","error","options"])])])])),_:1}),(0,o.Wm)(y,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(r,{class:"highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[q]]),(0,o.Wm)(r,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,o.Wm)(b,{showing:e.loading},{default:(0,o.w5)((()=>[ll])),_:1},8,["showing"])])),_:1})}var al=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,i){function s(e){try{d(o.next(e))}catch(t){i(t)}}function n(e){try{d(o["throw"](e))}catch(t){i(t)}}function d(e){e.done?l(e.value):a(e.value).then(s,n)}d((o=o.apply(e,t||[])).next())}))};const il=(0,o.aZ)({el:"#app",mixins:[C.Z],props:{doc_type:{type:String,default:""},tables_list:[],columns_list:{}},components:{},data(){return{column_type:[{label:"Select Type",value:""},{label:this.$t("amount"),value:"AMOUNT"},{label:"STRING",value:"STRING"},{label:this.$t("invoice_date"),value:"DATE"},{label:this.$t("number"),value:"NUMBER"},{label:"BOOLEAN",value:"BOOLEAN"},{label:this.$t("currency"),value:"CURRENCY"}]}},setup(){let e={};return{new_model:(0,x.iH)(e),token:(0,x.iH)(""),data_types:(0,x.iH)([]),loading:(0,x.iH)(!1)}},watch:{},mounted(){this.setNewModel()},methods:{setNewModel(){this.new_model["column_required"]=!1,this.new_model["title"]="",this.new_model["type"]="",this.new_model["table_name"]="",this.new_model["type_error"]=!1,this.new_model["title_error"]=!1,this.new_model["table_name_error"]=!1,this.new_model["title_error_msg"]=""},submitNewColumFrom(){return al(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.loading=!1}}))},saveNewRow(){return al(this,void 0,void 0,(function*(){let e;this.setColumnName();let t=new FormData;t.append("column_name",this.new_model["column_name"]),t.append("column_type",this.new_model["type"]),t.append("title",this.new_model["title"]),t.append("is_required",this.new_model["column_required"]),t.append("table_name",this.new_model["table_name"]);let l=yield this.getToken();if(e=yield k().post(R.hi.create_table_column,t,{headers:{Authorization:l}}),!1===e.data.success)throw{message:e.data.message};this.showSuccessToast("Column Created successfully"),this.new_model["id"]=e.data.data.id;const o=new CustomEvent("column_added",{detail:{data:this.new_model}});document.dispatchEvent(o)}))},validateRow(e){let t=!1;this.new_model["title_error"]=!1,this.new_model["type_error"]=!1,this.new_model["title_error_msg"]="",this.new_model["table_name_error"]=!1;let l=e["title"].replace(/[^0-9a-zA-Z_ ]/g,"").toUpperCase();return e["title"]&&0!=e["title"].length?(0,P.x7)(e["title"])?this.columns_list.hasOwnProperty(l)&&(this.new_model["title_error_msg"]="Title already exists",t=!0,this.new_model["title_error"]=!0):(this.new_model["title_error_msg"]="Title can only contain characters, numbers",t=!0,this.new_model["title_error"]=!0):(t=!0,this.new_model["title_error_msg"]="Title is required",this.new_model["title_error"]=!0),e["type"]&&0!=e["type"].length||(this.new_model["type_error"]=!0),e["table_name"]&&0!=e["table_name"].length||(this.new_model["table_name_error"]=!0),!t},setColumnName(){this.new_model["column_name"]="";let e=this.new_model["title"];this.new_model["column_name"]=e.replace(/[^0-9a-zA-Z_ ]/g,"").toUpperCase()},getToken(){return al(this,void 0,void 0,(function*(){let e=this.token&&null!=this.token&&""!=this.token?this.token:yield(0,R.O_)();return e}))}}});var sl=l(83414),nl=l(52035),dl=l(2350);const rl=(0,B.Z)(il,[["render",ol]]),ul=rl;ne()(il,"components",{QCard:M.Z,QToolbar:Y.Z,QToolbarTitle:K.Z,QBtn:J.Z,QCardSection:X.Z,QInput:ee.Z,QCheckbox:Ue.Z,QSelect:we.Z,QIcon:te.Z,QItem:sl.Z,QItemSection:nl.Z,QItemLabel:dl.Z,QCardActions:oe.Z,QInnerLoading:ae.Z}),ne()(il,"directives",{ClosePopup:ie.Z});var ml=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,i){function s(e){try{d(o.next(e))}catch(t){i(t)}}function n(e){try{d(o["throw"](e))}catch(t){i(t)}}function d(e){e.done?l(e.value):a(e.value).then(s,n)}d((o=o.apply(e,t||[])).next())}))};const cl=(0,o.aZ)({el:"#app",mixins:[C.Z,$.Z],props:{doc_type:{type:String,default:""},list_data:{},tables:[]},components:{CreateColumn:ul},data(){return{}},setup(){let e=[];const t=(0,x.iH)(e);let l={};return{loading:(0,x.iH)(!1),columns:t,rows:(0,x.iH)(e),filter:(0,x.iH)(""),addNewDialog:(0,x.iH)(!1),columns_list:(0,x.iH)(l),tables_list:(0,x.iH)([])}},watch:{list_data:{deep:!0,handler:function(e,t){setTimeout((()=>{this.prepareRows(e)}),0)}}},mounted:function(){this.prepareColumns(),this.prepareRows(this.list_data),this.prepareTableList(),document.addEventListener("column_added",this.recordAdded)},unmounted:function(){document.removeEventListener("column_added",this.recordAdded)},methods:{prepareTableList(){this.tables_list=[],this.tables_list.push(Object.assign({},{value:"",label:this.$t("select_table")}));for(let[e,t]of Object.entries(this.tables)){const e=t;this.tables_list.push(Object.assign({},{value:e.table_name,label:e.table_name}))}},prepareListView(e){this.prepareRows(e)},prepareColumns(){this.columns.push(Object.assign({},{name:"column_name",label:this.$t("column_name"),field:"column_name",align:"left"})),this.columns.push(Object.assign({},{name:"table_name",label:this.$t("table_name"),field:"table_name",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(e){this.rows=[];for(let[t,l]of Object.entries(e)){const e=l;this.addNewRow(e),e&&e.hasOwnProperty("column_name")&&this.addToColumnList(e.column_name)}},addNewRow(e){let t=Object.assign({},e);return this.rows.push(t),this.rows.length.toString()},addToColumnList(e){this.columns_list[e]=e},scrollToBottom(){let e=document.querySelector(".table-columns-list");if(!e)return;let t=e.querySelector(".q-table__middle");t&&(t.scrollTop=t.scrollHeight)},handleDelete(e,t){return ml(this,void 0,void 0,(function*(){try{let l;this.loading=!0;let o=yield(0,R.O_)();if(l=yield k()["delete"](R.hi.delete_table_column+"/"+e.id,{headers:{Authorization:o}}),!l.data.success||!0!==l.data.success)throw l.data.message?l.data.message:{message:"Response dont have table_data index/success is set to false"};const a=new CustomEvent("column_deleted",{detail:{index:t}});document.dispatchEvent(a)}catch(l){throw{message:this.$t("pages.messages.ERROR_INTERNAL_OCCUR")}}finally{this.loading=!1}}))},recordAdded(e){this.addNewDialog=!1,setTimeout((()=>{this.scrollToBottom()}),0)},customFilter(e,t){const l=t.toLowerCase();let o=e;return l&&""!==l?(o=e.filter(((e,t)=>{let o=!1;for(let[a,i]of Object.entries(e)){let e=i,t=e&&null!==e?e.toString():"";if(e=t.toLowerCase(),e.includes(l)){o=!0;break}}return o})),o):o}}}),pl=(0,B.Z)(cl,[["render",zt],["__scopeId","data-v-dc63238c"]]),_l=pl;ne()(cl,"components",{QTable:ce.Z,QInput:ee.Z,QIcon:te.Z,QSpace:pe.Z,QBtn:J.Z,QTr:_e.Z,QTd:he.Z,QTooltip:le.Z,QSelect:we.Z,QInnerLoading:ae.Z,QDialog:ge.Z,QField:fe.Z});var hl=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,i){function s(e){try{d(o.next(e))}catch(t){i(t)}}function n(e){try{d(o["throw"](e))}catch(t){i(t)}}function d(e){e.done?l(e.value):a(e.value).then(s,n)}d((o=o.apply(e,t||[])).next())}))};const gl=(0,o.aZ)({el:"#app",mixins:[C.Z,T.Z],components:{TrainingList:jt.Z,Groups:be,Fields:Ge,TableColumns:_l,Regexes:Dt,BackToDocuments:Ut,Tables:ut,Loader:Q.Z,SubHeader:mt.Z},data(){return{}},setup(){let e={doc_type:"auto",has_table:!1,id:"",name:"",doc_type_name:""};const t=(0,L.At)(),{resetDocTypesSubDocTypes:l}=t;return{resetDocTypesSubDocTypes:l,step1_model:(0,x.iH)(e),step:(0,x.iH)("doc"),done_steps:(0,x.iH)({}),step_labels:(0,x.iH)({}),error_model:(0,x.iH)({doc_name:""}),language_origin_list:(0,x.iH)([]),training_doc_count:(0,x.iH)(0),training_doc_limit:10,fields_count:(0,x.iH)(0),tab:(0,x.iH)("groups"),sample_files:(0,x.iH)([]),groups:(0,x.iH)([]),fields:(0,x.iH)([]),doc_type:(0,x.iH)(""),regexes:(0,x.iH)([]),regex_limit:2,tables:(0,x.iH)([]),table_columns:(0,x.iH)([]),table_column_tab:(0,x.iH)("tables"),loading:(0,x.iH)(!1)}},watch:{doc_type:{handler:function(e,t){this.fetchSamplesFiles(),this.fetchGroups(),this.fetchFields(),this.getDocumentTypeRegexes(),this.fetchTables(),this.fetchTableColumns()}}},mounted(){this.prepareSteps(),this.handleLanguageOptions(),document.addEventListener("group_added",this.groupAdded),document.addEventListener("group_deleted",this.groupDeleted),document.addEventListener("field_added",this.fieldAdded),document.addEventListener("field_deleted",this.fieldDeleted),document.addEventListener("refresh_sample_data",this.refreshSampleData),document.addEventListener("sample_file_delete",this.sampleFileDeleted),document.addEventListener("table_added",this.tableAdded),document.addEventListener("table_deleted",this.tableDeleted),document.addEventListener("regex_added",this.regexAdded),document.addEventListener("regex_deleted",this.regexDeleted),document.addEventListener("column_added",this.tableColumnAdded),document.addEventListener("column_deleted",this.tableColumnDeleted),document.addEventListener("fetch_Groups_Fields_event",this.getGroupsAndFields),window.docTypeCreate=this},unmounted:function(){document.removeEventListener("refresh_sample_data",this.refreshSampleData),document.removeEventListener("sample_file_delete",this.sampleFileDeleted),document.removeEventListener("group_added",this.groupAdded),document.removeEventListener("group_deleted",this.groupDeleted),document.removeEventListener("field_added",this.fieldAdded),document.removeEventListener("field_deleted",this.fieldDeleted),document.removeEventListener("table_added",this.tableAdded),document.removeEventListener("table_deleted",this.tableDeleted),document.removeEventListener("regex_added",this.regexAdded),document.removeEventListener("regex_deleted",this.regexAdded),document.removeEventListener("column_added",this.tableColumnAdded),document.removeEventListener("column_deleted",this.tableColumnDeleted),document.removeEventListener("fetch_Groups_Fields_event",this.getGroupsAndFields)},methods:{handleLanguageOptions(){return hl(this,void 0,void 0,(function*(){yield this.fetchLanguageOptions()}))},fetchLanguageOptions(){return hl(this,void 0,void 0,(function*(){let e;try{let t=yield(0,R.O_)();e=yield k().get(R.hi.get_items_from_dictionary+"DOC_ORIGIN",{headers:{Authorization:t}})}catch(t){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}if(e.data&&0!==Object.keys(e.data).length){this.language_origin_list=[],this.language_origin_list.push(Object.assign({},{value:"",label:this.$t("amount_date_format_select")}));for(const t in e.data){let l=e.data[t],o=l.description?l.description:"";this.language_origin_list.push(Object.assign({},{value:l.value,label:l.label,locale:l.locale,description:o.replaceAll("\\n","<br />")}))}}}))},validateAndNext(){return hl(this,void 0,void 0,(function*(){try{if(this.loading=!0,"doc"!=this.step||this.isDocStep1Saved()||(this.validateDocCreateForm(),yield this.saveDocumnetType(),yield this.resetDocTypesSubDocTypes()),"upload"==this.step&&this.sample_files.length<this.training_doc_limit)throw{message:this.$t("pages.messages.ERROR_UPLOAD")+this.training_doc_limit+this.$t("pages.messages.ERROR_UPLOAD_2")};if("regex"==this.step&&this.regexes.length<this.regex_limit)throw{message:this.$t("pages.messages.ERROR_PATTERN_REQUIRED")};if("fields_groups"==this.step&&this.fields.length<1)throw{message:this.$t("pages.messages.ERROR_CREATE_FIELDS")};let e=this.$refs["stepper"];const t=this.wizardNextButtonLabel(),l="finsih"===t;l&&this.$router.push("/settings/document"),e&&(this.done_steps[this.step]=!0,e.next())}catch(e){if(null!=e&&"object"==typeof e&&e.hasOwnProperty("message"))return void this.showErrorToast(e.message)}finally{this.loading=!1}}))},isDocStep1Saved(){return""!==this.step1_model["id"]},validateDocCreateForm(){let e=!0;if(this.error_model["doc_name"]="",this.step1_model["name"]&&0!=this.step1_model["name"].length||(this.error_model["doc_name"]="Field is Required",e=!1),(0,P.Cp)(this.step1_model["name"])||(this.error_model["doc_name"]=this.$t("only_characters_numbers"),e=!1),!e)throw"Step 1 failed"},prepareSteps(){setTimeout((()=>{this.step_labels={doc:this.$t("create_doc"),upload:this.$t("upload_training_doc"),regex:this.$t("create_regex"),fields_groups:this.$t("create_fields_groups"),table_columns:this.$t("table_columns")}}),10),this.done_steps={doc:!1,upload:!1,regex:!1,fields_groups:!1,table_columns:!1}},saveDocumnetType(){return hl(this,void 0,void 0,(function*(){this.step1_model["doc_type_name"]=(0,P.Kh)(this.step1_model["name"]);let e,t=new FormData;t.append("doc_type_name",this.step1_model["doc_type_name"]),t.append("has_table",this.step1_model["has_table"].toString()),t.append("title",this.step1_model["name"]);let l=yield(0,R.O_)();if(e=yield k().post(R.hi.create_document_type,t,{headers:{Authorization:"Bearer "+l}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};this.step1_model["document_key"]=e.data.document_key,this.step1_model["doc_type_name"]=e.data.document_name,this.step1_model["id"]=e.data.id,this.doc_type=this.step1_model["doc_type_name"]}))},getDocTypeName(){return this.step1_model["doc_type_name"]},getDocTypeKey(){return this.step1_model["document_key"]},setFieldsCount(e){e&&(this.fields_count=e.detail)},wizardNextButtonLabel(){let e="next";return"fields_groups"===this.step&&!1===this.step1_model["has_table"]&&(e="finsih"),"table_columns"===this.step&&!0===this.step1_model["has_table"]&&(e="finsih"),e},refreshSampleData(){this.fetchSamplesFiles()},sampleFileDeleted(e){if(!e||!e.detail)return;let t=e.detail;for(let[l,o]of Object.entries(this.sample_files)){const e=o;e.id===t&&this.sample_files.splice(l,1)}},fetchSamplesFiles(){return hl(this,void 0,void 0,(function*(){let e;try{if((0,P.ke)(this.getDocTypeName()))return;let t=new FormData;t.append("doc_type",this.getDocTypeKey());let l=yield(0,R.O_)();if(e=yield k().post(R.hi.get_sample_documents_trainer,t,{headers:{Authorization:l}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};let o=[];for(let[a,i]of Object.entries(e.data)){const e=i;let t=Object.assign({},e);o.push(t)}this.sample_files=o}catch(t){throw{message:this.$t("pages.messages.ERROR_INTERNAL_OCCUR")}}}))},groupAdded(e){e&&e.detail&&this.groups.push(e.detail.data)},groupDeleted(e){if(!e||!e.detail)return;let t=e.detail.index;this.groups.splice(t,1),this.fetchFields()},fetchGroups(){return hl(this,void 0,void 0,(function*(){let e;try{if((0,P.ke)(this.doc_type))return;let t=yield(0,R.O_)();if(e=yield k().get(R.hi.get_document_field_groups+"?doc_type_name="+this.getDocTypeName(),{headers:{Authorization:t}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};let l=new Map,o=[];for(let[a,i]of Object.entries(e.data.data)){const e=i;let t=Object.assign({},e);o.push(t),l.set(t.id,t)}o=[],l.forEach(((e,t)=>{o.push(e)})),this.groups=o}catch(t){throw{message:this.$t("pages.messages.ERROR_INTERNAL_OCCUR")}}}))},getGroupsAndFields(e){this.fetchGroups(),this.fetchFields()},fieldAdded(e){e&&e.detail&&this.fields.push(e.detail.data)},fieldDeleted(e){if(!e||!e.detail)return;let t=e.detail.index;this.fields.splice(t,1)},fetchFields(){return hl(this,void 0,void 0,(function*(){let e;try{if((0,P.ke)(this.doc_type))return;let t=yield(0,R.O_)();if(e=yield k().get(R.hi.get_field_settings_by_type,{params:{doc_type:this.getDocTypeKey(),profile:""},headers:{Authorization:t}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};let l=e.data.field_setting,o=[];Array.from(l).forEach((e=>{Array.from(e.rows).forEach((t=>{Array.from(t).forEach((t=>{t["group_name"]=e.name,t["field_type"]=t.field_type.toUpperCase();let l=Object.assign({},t);o.push(l)}))}))})),this.fields=o}catch(t){throw{message:this.$t("pages.messages.ERROR_INTERNAL_OCCUR")}}}))},regexAdded(e){this.getDocumentTypeRegexes()},regexDeleted(e){if(!e||!e.detail)return;let t=e.detail.index;this.regexes.splice(t,1)},getDocumentTypeRegexes(){return hl(this,void 0,void 0,(function*(){if((0,P.ke)(this.getDocTypeName()))throw{message:"Document Type is missing"};let e;this.loading=!0,this.regexes=[];let t=yield(0,R.O_)(),l=new FormData,o={regexType:this.getDocTypeName()};if(l.append("data",JSON.stringify(o)),e=yield k().post(R.hi.post_data_fellowkv+R.hi.get_document_type_regexes,l,{headers:{Authorization:t}}),!e.data)throw{message:"No Data return from api"};if(e.data.hasOwnProperty("message"))throw e.data;e.data.forEach(((e,t)=>{this.regexes.push(e)})),this.loading=!1}))},tableAdded(e){e&&e.detail&&this.tables.push(e.detail.data)},tableDeleted(e){if(!e||!e.detail)return;let t=e.detail.index;this.tables.splice(t,1)},fetchTables(){return hl(this,void 0,void 0,(function*(){let e;try{if((0,P.ke)(this.doc_type))return;let t=yield(0,R.O_)();if(e=yield k().get(R.hi.get_document_tables+"?doc_type="+this.getDocTypeKey(),{headers:{Authorization:t}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};let l=[];for(let[o,a]of Object.entries(e.data.data)){const e=a;let t=Object.assign({},e);l.push(t)}this.tables=l}catch(t){throw{message:this.$t("pages.messages.ERROR_INTERNAL_OCCUR")}}}))},tableColumnAdded(e){e&&e.detail&&this.table_columns.push(e.detail.data)},tableColumnDeleted(e){if(!e||!e.detail)return;let t=e.detail.index;this.table_columns.splice(t,1)},fetchTableColumns(){return hl(this,void 0,void 0,(function*(){let e;try{if((0,P.ke)(this.doc_type))return;let t=yield(0,R.O_)();if(e=yield k().get(R.hi.get_document_tables_with_columns+"?doc_type="+this.getDocTypeKey(),{headers:{Authorization:t}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};let l=[];for(let[o,a]of Object.entries(e.data.data)){const e=a;for(let[t,a]of Object.entries(e)){const e=a;let t=Object.assign({},e);t["table_name"]=o,l.push(t)}}this.table_columns=l}catch(t){throw{message:this.$t("pages.messages.ERROR_INTERNAL_OCCUR")}}}))}}});var wl=l(83518),fl=l(96552),yl=l(68689),bl=l(57547),vl=l(3269),ql=l(65869),kl=l(5906),Cl=l(86602);const xl=(0,B.Z)(gl,[["render",v],["__scopeId","data-v-41bf85e6"]]),Tl=xl;ne()(gl,"components",{QStepper:wl.Z,QStep:fl.Z,QForm:yl.Z,QInput:ee.Z,QIcon:te.Z,QTooltip:le.Z,QCheckbox:Ue.Z,QBtn:J.Z,QTabs:bl.Z,QTab:vl.Z,QSeparator:ql.Z,QTabPanels:kl.Z,QTabPanel:Cl.Z,QInnerLoading:ae.Z})}}]);