"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[2709],{82709:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Qe});var o=i(61758),a=i(58790);const s=e=>((0,o.Qi)("data-v-1e430d7a"),e=e(),(0,o.jt)(),e),n={class:"col-12 border-bottom-bdbdbd q-pb-sm"},l={class:"row"},d={class:"col-6 items-center"},c={class:"text-h6 text-bold text-primary flex items-center"},r={class:"invoice-number-padd"},v={class:"col-6 items-center",style:{"padding-top":"13px"}},h={class:"q-ml-xs q-mr-sm"},u={key:0,class:"col-12 mt-4 q-pa-lg text-blue-grey-5"},_={class:"row mb-4"},p={class:"col-3 text-bold"},k={class:"col-3"},m={class:"col-3 text-bold"},g={class:"col-3 text-uppercase"},f={class:"row mb-4"},b={class:"col-3 text-bold"},L={class:"col-3"},y={class:"col-3 text-bold"},w={class:"col-3 text-uppercase"},$={class:"row mb-4"},x={class:"col-3 text-bold"},P={class:"col-3"},A={class:"col-3 text-bold"},I={class:"col-3"},T={class:"row mb-4"},q={class:"col-3 text-bold"},D={class:"col-3"},C={class:"col-3 text-bold"},F={class:"col-3"},Q={class:"row mb-4"},S={class:"col-3 text-bold"},M={class:"col-3"},E={class:"col-3 text-bold"},X={class:"col-3"},Z={class:"row mb-4"},z={class:"col-3 text-bold"},W={class:"col-3"},j={class:"col-3 text-bold"},B={class:"col-3"},K={class:"col-12 iframe-padding"},O={key:0,class:"mx-12 q-card mt-10"},Y=["src"],R=s((()=>(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1)));function V(e,t,i,s,V,H){const N=(0,o.g2)("SubHeader"),G=(0,o.g2)("BackToSettings"),J=(0,o.g2)("InvoiceDetailIcon"),U=(0,o.g2)("q-icon"),ee=(0,o.g2)("q-tooltip"),te=(0,o.g2)("f-btn"),ie=(0,o.g2)("q-badge"),oe=(0,o.g2)("q-skeleton"),ae=(0,o.g2)("q-card-actions"),se=(0,o.g2)("q-card"),ne=(0,o.g2)("q-inner-loading");return(0,o.uX)(),(0,o.CE)(o.FK,null,[e.$route.fullPath.includes("/share")?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(N,{key:0,name:"invoice dashboard",label:e.$t("invoices"),back_to_link:"/invoice/dashboard"},null,8,["label"])),e.$route.fullPath.includes("/share")?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(G,{key:1,label:e.$t("invoices"),back_to_rotue:"/invoice/dashboard"},null,8,["label"])),(0,o.Lk)("div",{class:(0,a.C4)(["row q-px-lg q-pb-lg",e.$route.fullPath.includes("/share")?e.iframe_path?"share-content":"":e.iframe_path?"invoice-content":""])},[(0,o.bF)(se,{class:"col-12 container-padding"},{default:(0,o.k6)((()=>[(0,o.bF)(ae,{class:"row"},{default:(0,o.k6)((()=>{var t,i,s,R,V,H,N,G,ae,se,ne,le,de,ce,re;return[(0,o.Lk)("div",n,[(0,o.Lk)("div",l,[(0,o.Lk)("div",d,[(0,o.Lk)("div",c,[(0,o.bF)(J),(0,o.Lk)("span",r,(0,a.v_)(e.$t("invoice"))+" #"+(0,a.v_)(null===(t=e.invoice_details)||void 0===t?void 0:t.alternate_document_id),1)])]),(0,o.Lk)("div",v,[(0,o.bF)(te,{class:"float-right",onClick:e.shareLinkInvoice},{default:(0,o.k6)((()=>[(0,o.bF)(U,{name:e.mdiShare},null,8,["name"]),(0,o.Lk)("span",h,(0,a.v_)(e.$t("share")),1),(0,o.bF)(ee,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.$t("copy_public_url")),1)])),_:1})])),_:1},8,["onClick"])])])]),e.invoice_details?((0,o.uX)(),(0,o.CE)("div",u,[(0,o.Lk)("div",_,[(0,o.Lk)("div",p,(0,a.v_)(e.$t("invoice_number"))+" :",1),(0,o.Lk)("div",k,(0,a.v_)(null===(i=e.invoice_details)||void 0===i?void 0:i.alternate_document_id),1),(0,o.Lk)("div",m,(0,a.v_)(e.$t("status"))+" :",1),(0,o.Lk)("div",g,[(null===(s=e.invoice_details)||void 0===s?void 0:s.status)?((0,o.uX)(),(0,o.Wv)(ie,{key:0,transparent:"",align:"middle",color:e.statusColor(null===(R=e.invoice_details)||void 0===R?void 0:R.status)},{default:(0,o.k6)((()=>{var t;return[(0,o.eW)((0,a.v_)(null===(t=e.invoice_details)||void 0===t?void 0:t.status),1)]})),_:1},8,["color"])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",f,[(0,o.Lk)("div",b,(0,a.v_)(e.$t("supplier_name"))+" :",1),(0,o.Lk)("div",L,(0,a.v_)(null===(V=e.invoice_details)||void 0===V?void 0:V.supplier_name),1),(0,o.Lk)("div",y,(0,a.v_)(e.$t("paid_status"))+" :",1),(0,o.Lk)("div",w,[(0,o.bF)(ie,{transparent:"",align:"middle",color:e.statusColor(null!==(N=null===(H=e.invoice_details)||void 0===H?void 0:H.paid_status)&&void 0!==N?N:"Open")},{default:(0,o.k6)((()=>{var t,i;return[(0,o.eW)((0,a.v_)((null===(t=e.invoice_details)||void 0===t?void 0:t.paid_status)?null===(i=e.invoice_details)||void 0===i?void 0:i.paid_status:"Open"),1)]})),_:1},8,["color"])])]),(0,o.Lk)("div",$,[(0,o.Lk)("div",x,(0,a.v_)(e.$t("total_amount"))+" :",1),(0,o.Lk)("div",P,(0,a.v_)(null===(G=e.invoice_details)||void 0===G?void 0:G.extended_amount),1),(0,o.Lk)("div",A,(0,a.v_)(e.$t("invoice_details_date"))+" :",1),(0,o.Lk)("div",I,(0,a.v_)(e.formatDateTimeZone(null===(ae=e.invoice_details)||void 0===ae?void 0:ae.invoice_date,!0)),1)]),(0,o.Lk)("div",T,[(0,o.Lk)("div",q,(0,a.v_)(e.$t("purchase_order"))+"# :",1),(0,o.Lk)("div",D,(0,a.v_)(null===(se=e.invoice_details)||void 0===se?void 0:se.purchase_order_number),1),(0,o.Lk)("div",C,(0,a.v_)(e.$t("invoice_due_date"))+" :",1),(0,o.Lk)("div",F,(0,a.v_)(e.formatDateTimeZone(null===(ne=e.invoice_details)||void 0===ne?void 0:ne.invoice_due_date,!0)),1)]),(0,o.Lk)("div",Q,[(0,o.Lk)("div",S,(0,a.v_)(e.$t("discount_term"))+" :",1),(0,o.Lk)("div",M,(0,a.v_)(null===(le=e.invoice_details)||void 0===le?void 0:le.discount_term),1),(0,o.Lk)("div",E,(0,a.v_)(e.$t("payment_method"))+" :",1),(0,o.Lk)("div",X,(0,a.v_)(e.showPaymentMethodLabel(null===(de=e.invoice_details)||void 0===de?void 0:de.payment_method)),1)]),(0,o.Lk)("div",Z,[(0,o.Lk)("div",z,(0,a.v_)(e.$t("electronic_payment"))+"# :",1),(0,o.Lk)("div",W,(0,a.v_)(e.displayLastSixDigits(null===(ce=e.invoice_details)||void 0===ce?void 0:ce.electronic_payment_number)),1),(0,o.Lk)("div",j,(0,a.v_)(e.$t("payment_date"))+" :",1),(0,o.Lk)("div",B,(0,a.v_)(e.formatDateTimeZone(null===(re=e.invoice_details)||void 0===re?void 0:re.payment_date,!0)),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("div",K,[e.iframe_path?((0,o.uX)(),(0,o.CE)("div",O,[e.skeletonLoad?((0,o.uX)(),(0,o.Wv)(oe,{key:1,style:{width:"100%"},animated:!1,width:"100%",height:"700px",class:"custom-skeleton"})):((0,o.uX)(),(0,o.CE)("iframe",{key:0,id:"preview_frame",src:e.iframe_path,title:"file preview",width:"100%",height:"700px"},null,8,Y))])):(0,o.Q3)("",!0)])]})),_:1})])),_:1})],2),(0,o.bF)(ne,{showing:e.loading,style:{"z-index":"2"}},{default:(0,o.k6)((()=>[R])),_:1},8,["showing"])],64)}var H=i(38734),N=i(91236),G=i(60894),J=i(94124),U=i(1659),ee=i(62488),te=i(43437),ie=i(78652),oe=i(24622),ae=i(64775),se=i(68450),ne=i(46162),le=i(82303),de=i(46736),ce=i(18698);const re=e=>((0,o.Qi)("data-v-487286f8"),e=e(),(0,o.jt)(),e),ve={width:"42",height:"59",id:"Ebene_1","data-name":"Ebene 1",xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 595.28 841.89"},he=re((()=>(0,o.Lk)("path",{class:"icon-size",d:"M359.6,498.63c-21.28-.02-42.55,0-63.83,0s-42.55-.01-63.83,0c-8.76,0-14.67,5.24-14.73,12.98-.06,7.73,5.9,13.2,14.52,13.21,42.69.02,85.38.02,128.07,0,8.63,0,14.59-5.46,14.53-13.19-.05-7.7-6.01-12.98-14.73-12.99Z"},null,-1))),ue=re((()=>(0,o.Lk)("path",{class:"icon-size",d:"M321.32,553.2c-29.73-.04-59.46-.02-89.19-.01-9.02,0-14.98,5.3-14.92,13.19.06,7.83,6.05,12.99,15.14,13,14.59.01,29.19,0,43.78,0,14.87,0,29.73.12,44.6-.1,2.85-.04,6-.87,8.47-2.29,4.97-2.87,6.92-8.89,5.33-14.23-1.78-5.95-6.61-9.54-13.19-9.55Z"},null,-1))),_e=re((()=>(0,o.Lk)("path",{class:"icon-size",d:"M260.31,439.29c-12.91.29-21.59-7.95-23.76-22.54-1.02-6.84-4.94-10.68-10.47-10.25-5.9.46-9.4,5.04-8.82,12.21,1.44,17.84,10.62,30.3,27.09,37.02,4.2,1.71,5.93,3.44,5.76,8.13-.26,7.17,3.82,11.53,9.61,11.48,5.73-.05,9.78-4.44,9.56-11.64-.14-4.71,1.6-6.45,5.87-8.03,16.43-6.09,27.19-22.18,27.12-41.31-.31-1.89-.62-5.55-1.55-9.04-5.12-19.26-19.86-30.34-42.25-31.94-10.39-.75-18.78-7.51-21.2-17.1-2.41-9.56,1.36-19.66,9.51-25.08,15.45-10.26,35.14.6,36.14,18.41.41,7.18,5.14,10.95,10.94,10.12,5.57-.8,8.87-5.5,8.24-12.17-1.69-17.77-10.77-30.3-27.38-36.79-4.18-1.63-5.46-3.52-5.41-7.8.09-7.5-3.51-11.48-9.52-11.57-6.07-.08-9.91,3.93-9.67,11.29.15,4.64-1.41,6.58-5.72,8.23-17.82,6.81-28.11,23.82-26.76,43.27,1.22,17.64,14.46,33.15,32.3,37.41,4.89,1.17,10.05,1.15,14.97,2.2,11.17,2.38,18.98,13.1,17.92,24.13-1.17,12.11-10.63,21.08-22.51,21.35Z"},null,-1))),pe=re((()=>(0,o.Lk)("path",{class:"icon-size",d:"M296.28,177.59c-150.5,0-272.5,122-272.5,272.5s122,272.5,272.5,272.5,272.5-122,272.5-272.5-122-272.5-272.5-272.5ZM439.82,376.48c0,72.02.01,144.04,0,216.05,0,24.52-16.87,41.4-41.37,41.4-68.46.02-136.92.02-205.37,0-24.46,0-41.35-16.93-41.35-41.42-.01-94.66-.01-189.32,0-283.98,0-24.45,16.93-41.34,41.42-41.34,45.82-.02,91.64,0,137.46,0h4.45c0,21.9-.05,43.17.01,64.44.06,20.63,13.53,36.48,33.87,39.87,2.67.44,5.43.45,8.15.46,20.72.04,41.43.02,62.74.02v4.51ZM435.91,345.77c-20.04,0-40.08.02-60.12,0-9.44-.01-14.53-5-14.54-14.28-.03-21.26,0-42.52,0-65.25,3.55,1.84,6.96,2.72,9.12,4.86,22.03,21.74,43.91,43.63,65.64,65.66,2.1,2.13,2.98,5.47,4.83,9.03-2.51,0-3.72,0-4.93,0Z"},null,-1))),ke=[he,ue,_e,pe];function me(e,t){return(0,o.uX)(),(0,o.CE)("svg",ve,ke)}var ge=i(12807);const fe={},be=(0,ge.A)(fe,[["render",me],["__scopeId","data-v-487286f8"]]),Le=be;var ye=function(e,t,i,o){function a(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function n(e){try{d(o.next(e))}catch(t){s(t)}}function l(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):a(e.value).then(n,l)}d((o=o.apply(e,t||[])).next())}))};const we=(0,o.pM)({mixins:[oe.A,de.A],components:{SubHeader:N.A,BackToSettings:G.A,InvoiceDetailIcon:Le},mounted(){this.init()},methods:{init(){return ye(this,void 0,void 0,(function*(){yield this.getDetails()}))},getDetails(){var e;return ye(this,void 0,void 0,(function*(){try{this.preview_path="",this.loading=!0;const i=this.$route.params.id;if(this.id=i,this.$route.fullPath.includes("/share")&&this.$route.query.token){this.token=this.$route.query.token;try{const t=yield le.A.get(`${ne.VA}/supplier_invoice/share/get_details?token=${this.token}`);t&&(this.invoice_details=null===(e=null===t||void 0===t?void 0:t.data)||void 0===e?void 0:e.data),this.getPreviewSharePath(this.token)}catch(t){}}else i&&(yield this.getInvoiceDetails(i)),yield this.getPreviewPathInvoice()}catch(t){}finally{this.loading=!1}}))},getPreviewSharePath(e){return ye(this,void 0,void 0,(function*(){try{const i=this.invoice_details.preview_path;if((0,se.z)(i)&&(0,se.jw)(i))return;try{this.skeletonLoad=!0;const t=this.invoice_details.alternate_document_id,o=yield le.A.get(`${ne.VA}/resource/get_file/${t}?path=${i}&download=false&token=${e}`,{responseType:"blob"});if("application/json"==o.headers["content-type"])return setTimeout((()=>{this.getInvoicePdfFile()}),5e3);const a=o.config.url;this.iframe_path=a}catch(t){}finally{this.skeletonLoad=!1}}catch(t){}}))},getPreviewPathInvoice(){return ye(this,void 0,void 0,(function*(){try{if(!(0,se.z)(this.preview_path)&&!(0,se.jw)(this.preview_path))return void this.getInvoicePdfFile();try{this.skeletonLoad=!0;const e=this.$route.params.id;e&&(yield this.getPreviewPath(e),yield this.getInvoicePdfFile())}catch(e){}finally{this.skeletonLoad=!1}}catch(e){const t=ae.t.getErrorMessage(e),i=document.getElementById("preview_frame"),o=i.contentDocument;o&&(o.write("<h1>Error</h1><p>Oops!  "+t+".</p>"),o.close())}}))},getInvoicePdfFile(){return ye(this,void 0,void 0,(function*(){try{if((0,se.z)(this.preview_path)||(0,se.jw)(this.preview_path))return;const t=(0,J._6)();yield t.getTokenQueryParam();const{tokenQueryParam:i}=t;try{this.skeletonLoad=!0;const e=yield le.A.get(`${ne.VA}/resource/get_file/${this.invoice_id_path}?path=${this.preview_path}&download=false&${i}`,{responseType:"blob"});if("application/json"==e.headers["content-type"])return setTimeout((()=>{this.getInvoicePdfFile()}),5e3);const t=e.config.url;this.iframe_path=t}catch(e){}finally{this.skeletonLoad=!1}}catch(t){}}))},statusColor(e){return e?(0,ee.qY)(e.toLowerCase())||"primary":""},shareLinkInvoice(){return ye(this,void 0,void 0,(function*(){const e=this.$route.fullPath;if(e.includes("/share"))this.shareLink=window.location,(0,ie.A)(this.shareLink).then((()=>{this.showSuccessToast(this.$t("copy_to_clipboard"))}));else try{if(this.id){let e=yield this.getInvoiceShareToken(this.id);if(e){const t=window.location.origin;this.shareLink=`${t}/supplier_invoice/share/get_details?token=${e}`,(0,ie.A)(this.shareLink).then((()=>{this.showSuccessToast(this.$t("copy_to_clipboard"))}))}return}}catch(t){}}))},displayLastSixDigits(e){let t;return t=e&&e.length>6?e.slice(-6):e,t},formatDate(e){return e?de.A.methods.formatDateWithPattern(e,"DD.MM.YYYY"):""},showPaymentMethodLabel(e){let t;const i=ce.paymentMtdAPOptions.find((t=>t.value===e));return t=i?i.label:"",t}},data(){return{shareLink:(0,H.KR)(""),skeletonLoad:(0,H.KR)(!1),iframe_path:(0,H.KR)(""),id:(0,H.KR)(""),token:(0,H.KR)("")}},setup(){const e=(0,J.LN)(),{loading:t,invoice_details:i,preview_path:o,invoice_id_path:a}=(0,U.bP)(e),{getInvoiceDetails:s,getPreviewPath:n,getInvoiceShareToken:l}=e,d=(0,J.Bu)(),{datePattern:c,dateFormatOnly:r}=d;return{loading:t,invoice_details:i,preview_path:o,invoice_id_path:a,getInvoiceDetails:s,datePattern:c,dateFormatOnly:r,getPreviewPath:n,getInvoiceShareToken:l,mdiShare:te.YuT}}});var $e=i(23316),xe=i(62669),Pe=i(50492),Ae=i(97410),Ie=i(23954),Te=i(43820),qe=i(39035),De=i(98582),Ce=i.n(De);const Fe=(0,ge.A)(we,[["render",V],["__scopeId","data-v-1e430d7a"]]),Qe=Fe;Ce()(we,"components",{QCard:$e.A,QCardActions:xe.A,QIcon:Pe.A,QTooltip:Ae.A,QBadge:Ie.A,QSkeleton:Te.Ay,QInnerLoading:qe.A})}}]);