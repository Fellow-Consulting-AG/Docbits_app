(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[3064],{70314:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var o=i(41891),s=i(63307);const a={methods:{prepareLayoutForTemplate(){const e=s.Z.methods.getCalculatorFieldsDef();for(const t of this.formLayout){let i=0;for(const[o,s]of t.rows.entries())e.hasOwnProperty(s.field_name)&&(Object.assign(s,e[s.field_name]),Object.assign(this.formBuilderConfigModel[s.field_name],e[s.field_name])),i++,(void 0!==s.visibile&&!1===s.visibile||s.is_hidden)&&i--;t.is_hidden=i<1}},isButtonToggleDisable(e){return!!o.at.includes(e)},calculateRowColSize(e){return e>1?100/e:100}}}},43432:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var o=i(80579),s=i(80589);const a="IMAGE_FIELDS_SPLITTER",l={methods:{zoomOut(){this.imageFieldSplitter<=26?this.imageFieldSplitter=26:(this.imageFieldSplitter=this.imageFieldSplitter-2,this.saveSplitterValueInStorage())},zoomIn(){this.imageFieldSplitter>=100?this.imageFieldSplitter=100:(this.imageFieldSplitter=this.imageFieldSplitter+2,this.saveSplitterValueInStorage())},saveSplitterValueInStorage(){s.Z.set("image_field_splitter",this.imageFieldSplitter)},getSplitterValueFromStorage(){this.imageFieldSplitter=s.Z.getItem("image_field_splitter"),this.imageFieldSplitter||(this.imageFieldSplitter=26)},async getSplitterValue(){try{const e=await o.FT.getOrgPreference({key:a});if(!e)return;this.imageFieldSplitter=e}catch(e){}},async saveSplitterValue(){try{await o.FT.setOrgPreference({key:a,value:this.imageFieldSplitter})}catch(e){}}}}},3227:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var o=i(53198);const s=["E","G","R","S","W","K","T","+","F","ArrowDown","ArrowRight"],a={methods:{fixedShortCutKeyList(){const e=o.Z.methods.getCombinationKey(),t=s;return s.forEach((function(i,o){t[o]=e.toUpperCase()+i.toUpperCase()})),t},keyDownEvent(e){try{const t=o.Z.methods.isCombinationKey(e);if("Tab"===e.key)return void this.TabKeyHandler(e);if("Enter"===e.key)return void this.EnterKeyHandler(e);if(69===e.keyCode&&!0===t)return e.preventDefault(),void this.clickExport();if(70===e.keyCode&&!0===t)return e.preventDefault(),void this.focusFirstFieldOnGroup();if(71===e.keyCode&&!0===t)return e.preventDefault(),void this.selectFieldFromNextGroup(e);if(82===e.keyCode&&!0===t)return e.preventDefault(),void this.rejectDocument();if(83===e.keyCode&&!0===t)return e.preventDefault(),void this.saveData();if(84===e.keyCode&&!0===t)return void this.jumpToTable(e);if(87===e.keyCode&&!0===t)return e.preventDefault(),void this.exportWithSonderWunsch();const i=o.Z.methods.getAddRowKeyCodes();if(i.includes(e.keyCode)&&!0===t)return e.preventDefault(),void this.triggerTableAddRow(e);e.keyCode&&this.focusOnGroupFromMap(e)}catch(e){}},EnterKeyHandler(e){e.preventDefault();const t=this.getFocusedFieldName();if(!t)return;const i=this.findNextField(t);i&&this.focusOnField(i,!0,!0)},TabKeyHandler(e){e.preventDefault();const t=this.getFocusedFieldName();t&&this.validateAndSelectNextInvalidField(t)},getFocusedFieldName(){let e="";const t=this.getActiveElement();return t?(e=this.getNameFromDataAttribute(t),e||(e=this.getNameFromChildTypeAttribute(t)),e):e},getNameFromDataAttribute(e){let t="";return e.hasAttribute("data-name")?(t=e.getAttribute("data-name"),t):t},getNameFromChildTypeAttribute(e){let t="";return e.hasAttribute("child_type")?(t=e.getAttribute("id"),t):t},getActiveElement(){let e=document.hasFocus()&&document.activeElement!==document.body&&document.activeElement!==document.documentElement&&document.activeElement||null;return e}}}},89203:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var o=i(53198);const s=["E","G","R","S","W","K","T","+","F","ArrowDown","ArrowRight"],a={methods:{fixedShortCutKeyList(){const e=o.Z.methods.getCombinationKey(),t=s;return s.forEach((function(i,o){t[o]=e.toUpperCase()+i.toUpperCase()})),t},keyDownEvent(e){try{const t=o.Z.methods.isCombinationKey(e);if("Tab"===e.key)return void this.TabKeyHandler(e);if("Enter"===e.key)return void this.EnterKeyHandler(e);if(69===e.keyCode&&!0===t)return e.preventDefault(),void this.clickExport();if(70===e.keyCode&&!0===t)return e.preventDefault(),void this.focusFirstFieldOnGroup();if(71===e.keyCode&&!0===t)return e.preventDefault(),void this.selectFieldFromNextGroup(e);if(82===e.keyCode&&!0===t)return e.preventDefault(),void this.rejectDocument();if(83===e.keyCode&&!0===t)return e.preventDefault(),void this.saveData();if(84===e.keyCode&&!0===t)return void this.jumpToTable(e);if(87===e.keyCode&&!0===t)return e.preventDefault(),void this.exportWithSonderWunsch();const i=o.Z.methods.getAddRowKeyCodes();if(i.includes(e.keyCode)&&!0===t)return e.preventDefault(),void this.triggerTableAddRow(e);e.keyCode&&this.focusOnGroupFromMap(e)}catch(e){}},EnterKeyHandler(e){e.preventDefault();const t=this.getFocusedFieldName();t&&this.findNextField(t)},TabKeyHandler(e){e.preventDefault();const t=this.getFocusedFieldName();t&&this.validateAndSelectNextInvalidField(t)},getFocusedFieldName(){let e="";const t=this.getActiveElement();return t?(e=this.getNameFromDataAttribute(t),e||(e=this.getNameFromChildTypeAttribute(t)),e):e},getNameFromDataAttribute(e){let t="";return e.hasAttribute("data-name")?(t=e.getAttribute("data-name"),t):t},getNameFromChildTypeAttribute(e){let t="";return e.hasAttribute("child_type")?(t=e.getAttribute("id"),t):t},getActiveElement(){let e=document.hasFocus()&&document.activeElement!==document.body&&document.activeElement!==document.documentElement&&document.activeElement||null;return e}}}},61982:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var o=i(61959),s=(i(80589),i(80579),i(85985)),a=i(60727),l=i(41891),n=i(49566);const r=document.querySelector.bind(document),d={mixins:[s.Z],setup(){const e=(0,a.H_)(),{field_view_mode:t}=storeToRefs(e);return{field_view_mode:t}},data(){return{mousedown:(0,o.iH)(!1),originImgSize:{w:0,h:0,r:0},url:this.cropUrl,posImg:{top:0,left:0},currentSelectedItem:(0,o.iH)(),latestAreaItem:{startX:0,startY:0,endX:0,endY:0},scrollLeft:0,scrollTop:0,moveTempX:0,moveTempY:0,moveCurrentX:0,moveCurrentY:0,temp:0,dragdown:!1,move:!1,imageHeight:0,imageWidth:0,correctionDialog:!1,numberOfAreas:0,oldArea:"",disableImageRowsClick:!1,delay:170,clicks:0,timer:(0,o.iH)(),delay2:(0,o.iH)(170),timer2:(0,o.iH)()}},methods:{addEvents(){this.screenshot.addEventListener("pointerdown",this.startDrag),document.body.addEventListener("click",this.mouseClicked,!0);const e=r(".right_section");e&&e.addEventListener("scroll",this.removeOverlayandLines)},removeEvents(){this.screenshot.removeEventListener("dblclick",this.dblClickToSelect),this.screenshot.removeEventListener("pointerdown",this.startDrag),document.body.removeEventListener("click",this.mouseClicked,!0);const e=r(".right_section");e&&e.removeEventListener("scroll",this.removeOverlayandLines)},initImageArea(){this.marquee=r("#marquee"),this.screenshot=r(".screenshot"),this.boxes=r("#boxes"),this.areas=r("#areas"),this.marquee.classList.add("hide");let e=r("#image_container");this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight,this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight),this.screenshot.addEventListener("dblclick",this.dblClickToSelect),this.screenshot.addEventListener("pointerdown",this.startDrag)},mouseClicked(e){this.removeMagnifier()},mousePosX(e){return e.pageX-this.posImg.left},mousePosY(e){return e.pageY-this.posImg.top},removeMagnifier(){const e=r("#glassBtn");e&&e.classList.remove("glass-active");let t=document.querySelector(".img-magnifier-glass");t&&(t.style.display="none",t.classList.remove("enable-glass"),t.removeEventListener("pointermove",this.moveMagnifier));const i=r("#draw");i&&i.removeEventListener("pointermove",this.moveMagnifier),document.body.classList.remove("active"),this.magnifyGlass=null},initMagnifyGlass(){this.removeOverlayandLines(),this.restrictDrawing();let e=r(".screenshot"),t=document.querySelector(".img-magnifier-glass");if(!t)return;const i=3;t.style.display="block",t.style.backgroundImage="url('"+e.src+"')",t.style.backgroundRepeat="no-repeat",t.style.backgroundSize=e.width*i+"px "+e.height*i+"px";const o=3,s=t.offsetWidth/2,a=t.offsetHeight/2;this.magnifyGlass={Ix:e.offsetLeft,Iy:e.offsetTop,Zw:t.offsetWidth,Zh:t.offsetHeight,w:s,h:a,bw:o,ratio:e.naturalWidth/e.width};const l=r("#draw");l.removeEventListener("pointermove",this.moveMagnifier),t.removeEventListener("pointermove",this.moveMagnifier),l.addEventListener("pointermove",this.moveMagnifier),t.addEventListener("pointermove",this.moveMagnifier)},moveMagnifier(e){const t=3;var i,o,s;let a=document.querySelector(".img-magnifier-glass"),l=r(".screenshot");e.preventDefault(),i=this.getCursorPos(e),o=i.x,s=i.y,o>l.width-this.magnifyGlass.w/t&&(o=l.width-this.magnifyGlass.w/t),o<this.magnifyGlass.w/t&&(o=this.magnifyGlass.w/t),s>l.height-this.magnifyGlass.h/t&&(s=l.height-this.magnifyGlass.h/t),s<this.magnifyGlass.h/t&&(s=this.magnifyGlass.h/t),a.style.left=o-this.magnifyGlass.w+"px",a.style.top=s-this.magnifyGlass.h+"px",a.style.backgroundPosition="-"+(o*t-this.magnifyGlass.w+this.magnifyGlass.bw)+"px -"+(s*t-this.magnifyGlass.h+this.magnifyGlass.bw)+"px"},getCursorPos(e){var t,i=0,o=0;e=e||window.event;let s=r(".screenshot");return t=s.getBoundingClientRect(),i=e.pageX-t.left,o=e.pageY-t.top,i-=window.pageXOffset,o-=window.pageYOffset,{x:i,y:o}},startDrag(e){if(!this.screenshot.classList.contains("cursor-crosshair"))return;let t=0,i=0;if(1===e.button){const t=this.hitTest(e.layerX,e.layerY);return void(t&&(this.rectangles.splice(this.rectangles.indexOf(t),1),this.redraw()))}this.marquee.classList.remove("hide");let o=this.startX=e.layerX,s=this.startY=e.layerY,a="";Object.assign(this.marqueeRect,{startX:o,startY:s,width:i,height:t,connectionId:a}),this.drawRect(this.marquee,this.marqueeRect),"validate"==this.field_view_mode?(window.addEventListener("pointerup",this.stopDragValidate),this.screenshot.addEventListener("pointermove",this.moveDrag)):(this.mouseDownAnnotate(e),window.addEventListener("pointerup",this.endDragAnnotate),this.screenshot.addEventListener("pointermove",this.moveDrag),this.screenshot.addEventListener("mousemove",this.mouseMoveAnnotate))},moveDrag(e){let t=this.startX,i=this.startY,o=e.layerX,s=e.layerY,a=e.layerX,l=e.layerY,n=this.startX-o,r=this.startY-s;n<0&&(n*=-1,o-=n),r<0&&(r*=-1,s-=r);let d="";Object.assign(this.rectCordinate,{startX:t,startY:i,endX:a,endY:l}),Object.assign(this.marqueeRect,{x:o,y:s,width:n,height:r,connectionId:d}),this.drawRect(this.marquee,this.marqueeRect)},stopDragValidate(e){this.marquee.classList.add("hide"),window.removeEventListener("pointerup",this.stopDragValidate),screenshot.removeEventListener("pointermove",this.moveDrag),e.target===this.screenshot&&this.marqueeRect.width&&this.marqueeRect.height&&(this.connectionId&&(this.marqueeRect.connectionId=this.connectionId),this.rectangles.push(Object.assign({},this.marqueeRect)),this.redraw(),this.restrictDrawing(),this.saveOverlayResult())},endDragAnnotate(){window.removeEventListener("pointerup",this.endDragAnnotate),screenshot.removeEventListener("pointermove",this.moveDrag),screenshot.removeEventListener("mousemove",this.mouseMoveAnnotate),this.mouseUpAnnotate()},mouseDownAnnotate(e){this.mousedown=!0;let t=null;if(void 0==this.areas?this.areas=[]:t=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,this.numberOfAreas=t,0!=this.latestAreaItem.startX&&0!=this.latestAreaItem.startY&&!1===this.isRowMode){let i=this.latestAreaItem.startX,o=this.latestAreaItem.startY,s=e.layerX,a=e.layerY,l=s-i,n=a-o;(l<0||n<0)&&(s=i,a=o,i=e.layerX,o=e.layerY,l=s-i,n=a-o);let r={id:t,x:i,y:o,startX:i,startY:o,width:l,height:n,z:0,resizable:!1,opacity:"1",background:this.isRowMode?rowRgbaColorStr:"",areaTag:this.isRowMode?"column":"table",areaType:this.isRowMode?"column":"table",rowId:""};return this.temp=r.id,this.areas.push(r),void(this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})}if(t){let i={id:t,x:this.mousePosX(e),y:this.mousePosY(e),startX:this.mousePosX(e),startY:this.mousePosY(e),width:0,height:0,z:0,resizable:!1,opacity:"1",background:this.isRowMode?rowRgbaColorStr:"",areaTag:this.isRowMode?"column":"table",areaType:this.isRowMode?"column":"table",rowId:""};this.areas.push(i),this.temp=i.id,this.latestAreaItem.startX=this.mousePosX(e),this.latestAreaItem.startY=this.mousePosY(e),this.latestAreaItem.endX=0,this.latestAreaItem.endY=0}},mouseMoveAnnotate(e){this.areas.filter((e=>e.id===this.temp)).map((t=>{let i=e.pageX-this.posImg.left,o=e.pageY-this.posImg.top,s=t.startX-i,a=t.startY-o;s<0&&(s*=-1,i-=s),a<0&&(a*=-1,o-=a),t.x=i,t.y=o,t.width=s,t.height=a})),this.latestAreaItem={startX:0,startY:0,endX:0,endY:0}},mouseUpAnnotate(){this.timer2=setTimeout((()=>{this.mousedown=!1,this.areas=this.areas.filter((e=>e.width>=3&&e.height>=3))}),this.delay2)},changeResizable(e){this.areas.filter((t=>t.id===e)).map((e=>{e.resizable=!0,e.z=100})),this.areas.filter((t=>t.id!==e)).map((e=>{e.resizable=!1,e.z=0}))},deleteSelected(e){this.areas=this.areas.filter((t=>t.id!==e)),this.prepareTableArea()},decideAction(e){let t=e.areaTag,i=e.areaType,o=e.rowId;if(this.currentSelectedItem=e,this.removeExistingConfirmationOverlays(),!0!==this.disableImageRowsClick)if(this.disableSelectionForRow(this.oldArea),"column"===i){this.numberOfAreas=0;let e=r("#screenshot_container"),i=e.querySelectorAll("div.column_background_area");Array.from(i).forEach((e=>{let t=e.style.background.split("100%)");e.style.background=rowRgbaColor+t[1]}));let s=e.querySelectorAll("div.column_outline");Array.from(s).forEach((e=>{e.style.opacity="0.2",e.nextSibling&&(e.nextSibling.style.border="unset")})),this.oldArea=o;let a=r("#input_"+t+"_"+o);if(a){let e=r("#draw_"+t),i=e.querySelector(".select-areas--outline");i.style.opacity="0";let o=document.querySelector("#line_item_table").querySelectorAll("label.active-border-2px");Array.from(o).forEach((e=>{e.classList.remove("active-border-2px")}));let s=e.querySelector(".select-areas--background_area");s.style.border="2px",s.style.borderStyle="solid",s.style.borderColor="#8800ff",a.scrollIntoView(),a.querySelector("label").classList.add("active-border-2px");let l=a.querySelector("label.extraction_method");if(null!=l){let e=a.dataset.columnValue,t=a.dataset.scoreDescription,i={value:e,score:t,selection:s};this.prepareOverlay({detail:i})}}}else{this.numberOfAreas=0;let e=document.getElementById(t);if(e.classList.add("active-table-row"),""!=this.oldArea){let e=document.getElementById(this.oldArea);e.classList.remove("active-table-row")}let i={rowId:t,columnName:null};const o=new CustomEvent("get_table_rows_areas",{detail:i});document.dispatchEvent(o),this.oldArea=t}},enableSelectionForRow(e){this.disableImageRowsClick=!0,this.disableSelectionForRow(this.oldArea);let t=e.detail;this.oldArea=e.detail;let i=r("#draw_"+t).querySelector(".select-areas--background_area");i.style.cursor="crosshair",i.addEventListener("mousedown",this.manageEventsForColumns)},disableSelectionForRow(e){if(""!=e&&r("#draw_"+e)){let t=r("#draw_"+e).querySelector(".select-areas--background_area");t.style.cursor="pointer",t.removeEventListener("mousedown",this.manageEventsForColumns),t.removeEventListener("mousemove",this.mouseMove)}},dblClickToSelect(e){this.disableSelectionForRow(this.oldArea);let t=this.getTableAreaAsString(this.mousePosX(e),this.mousePosY(e),this.mousePosX(e),this.mousePosY(e));this.$emit("saveColumnCoords",t)},hitTest(e,t){return this.rectangles.find((i=>e>=i.x&&t>=i.y&&e<=i.x+i.width&&t<=i.y+i.height))},redraw(){boxes.innerHTML="",this.rectangles.forEach((e=>{boxes.appendChild(this.drawRect(document.createElementNS("http://www.w3.org/2000/svg","rect"),e))}))},drawRect(e,t){if("object"==typeof t){let i="cursor-pointer";const{x:o,y:s,width:a,height:n,connectionId:r}=t;if(e.setAttributeNS(null,"width",a),e.setAttributeNS(null,"height",n),e.setAttributeNS(null,"x",o),e.setAttributeNS(null,"y",s),e.setAttributeNS(null,"connectionId",r),r&&"validate"==this.field_view_mode){e.setAttributeNS(null,"id",r+"_rect");let t=this.record.fields.filter((e=>r==e.name));const o=t.length>0?t.pop():{};o.hasOwnProperty("trocr_processor")&&""!=o.trocr_processor?i+=" extract_by_tcocr ":r.startsWith(l.QU)&&(i+=" ai_table_row ")}e.setAttributeNS(null,"class",i)}return e},prepareDataToDraw(e,t,i){const o=i||this.getHTMLField(e);if(o&&this.page==e.page&&e.coords&&e.coords[0]&&e.coords[0].hasOwnProperty("x")&&e.coords[0].hasOwnProperty("y")){let i=Math.round(this.imageWidth*e.coords[0].x),o=Math.round(this.imageHeight*e.coords[0].y),s=Math.round(this.imageWidth*e.coords[2].x),a=Math.round(this.imageHeight*e.coords[2].y),l=s-i||20,n=a-o||20;l<0&&(l*=-1,i-=l),n<0&&(n*=-1,o-=n),this.marqueeRect.x=i,this.marqueeRect.y=o,this.marqueeRect.width=l,this.marqueeRect.height=n,this.marqueeRect.connectionId=t,this.rectangles.push(Object.assign({},this.marqueeRect))}},prepareRectanglesForFields(){const e=this.record;Array.from(e.fields).forEach((e=>{this.prepareDataToDraw(e,e.name,!1)}))},prepareRectanglesForAITable(){let e={};this.record.tables&&this.record.tables[0]&&(e=this.record.tables[0]),Array.from(e.rows).forEach((e=>{this.prepareDataToDraw(e,l.QU+e.id,!0)}))},prepareRectangles(){this.rectangles=[],this.prepareRectanglesForFields(),this.has_ai_table&&this.prepareRectanglesForAITable(),this.redraw()},drawOverlay(e,t){if(this.isConfirmationBoxDisable)return;this.connectionId=e,this.removeExistingConfirmationOverlays();let i="",o="";const s=this.getOverlayHeadings();if(s){let e=s.split(l.Um);i=e[0],o=e[1]}const a=this.getOffset(t),n=document.createElement("div");n.setAttribute("id","confirmation_overlay"),n.style.position="absolute",n.style.zIndex="999",n.style.left=a.left+"px",n.style.top=(+a.top+ +a.height+6).toString()+"px",n.style.background="#e2e2e2",n.style.color="#898989",n.style.minHeight="80px",n.style.minWidth="100px",n.style.maxWidth="50%",n.style.textAlign="center",n.style.padding="5px 10px 5px 10px",n.style.letterSpacing="1px",n.style.borderRadius="7px",n.style.boxShadow="0 1px 2px rgba(0,0,0,0.07),\n            0 2px 4px rgba(0,0,0,0.07),\n            0 4px 8px rgba(0,0,0,0.07),\n            0 8px 16px rgba(0,0,0,0.07),\n            0 16px 32px rgba(0,0,0,0.07),\n            0 32px 64px rgba(0,0,0,0.07);";let d=this.getTrashIcon(e);n.innerHTML=`<div><b>${i}</b></div><div><b style='font-size: 9px'>${o}</b></div>\n                        <div>\n                        ${d}\n                        <span class='divOverlayWrong'>\n                          <i connectionId='${e}' style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.6em;' class='fa fa-times cursor-pointer'></i>\n                        </span>\n                        <span id='divOverlayCorrect'>\n                          <i style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.5em;' class='fas fa-check cursor-pointer'></i>\n                        </span></div>`,document.body.appendChild(n),r("#divOverlayCorrect")?.addEventListener("click",(t=>{this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.selectNextField(e),setTimeout((()=>{this.enableOrDisableExportButton()}),5)}));let c=document.getElementsByClassName("divOverlayWrong");Array.from(c).forEach((e=>{e?.addEventListener("click",(e=>{this.connectionId=e.target.getAttribute("connectionId"),this.connectionId&&(this.initTempFieldDelete(),this.refreshCanvas(),this.$forceUpdate(),this.enableDrawing())}))})),r("#deleteRuleFromConnection")?.addEventListener("click",(e=>{if(this.connectionId=e.target.getAttribute("connectionId"),this.connectionId)try{this.$refs["fieldsView"].deleteRule(this.connectionId),this.enableDrawing()}catch(t){}}));try{const i=r("#confirmation_overlay"),o=r("#confirmation_overlay")?.clientWidth,s=a.width,l=(+o-+s)/2;i.style.left=+a.left-+l+"px";let d=+t.getAttribute("width")+ +t.getAttribute("y")+i.offsetHeight;d>=this.screenshot.offsetHeight&&(n.style.top=(+a.top-6-+i.offsetHeight).toString()+"px");let c=null,u=this.getScoreDescription(this.getFieldByIndex(e));null!=u&&""!==u&&(c={score:String(u),background:this.getColor(Number(u))}),c&&setTimeout((()=>{this.overlayForScore(i,c)}),10)}catch(u){}},overlayForScore(e,t){let i=t.score,o=t.background;const s=this.getOffset(e),a=document.createElement("div");a.setAttribute("id","score_overlay"),a.style.position="absolute",a.style.zIndex="999",a.style.left=(+s.left+s.width-10).toString()+"px",a.style.top=(+s.top-20).toString()+"px",a.style.background=o,a.style.color="#898989",a.style.fontSize="14px",a.style.fontWeight="bold",a.style.letterSpacing="2px",a.style.cursor="pointer",a.style.padding="0.1em 0.6em",a.style.border="1px solid #f5f5f5",a.style.borderRadius="50px",a.innerHTML=`<div> <span  class='column-score-test' > ${i} </span> </div>`,document.body.appendChild(a)},getOffset(e){const t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,width:t.width||e.offsetWidth,height:t.height||e.offsetHeight}},removeBordersFromRectangles(){let e=document.body.getElementsByTagName("rect");for(let t of e)t.classList.remove("border")},removeAllConnectionLines(){const e=r("#connection_line");e&&e.remove()},getScoreDescription(e){let t="";return e&&e.hasOwnProperty("score_description")&&""!==e.score_description&&null!=e.score_description&&(t=e.score_description),String(t)},getTrashIcon(e){let t=this.getFieldByIndex(e),i="";return t?(i=!t.deleted&&t.rule?`<span id='deleteRuleFromConnection'>\n                <i connectionId='${e}' style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.6em;' class='fa fa-trash'></i>\n                </span>`:`<span class='divOverlayWrong'>\n                          <i connectionId='${e}' style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.6em;' class='fa fa-trash'></i>\n                        </span>`,i):i},enableDrawing(e=!1){e&&(this.rectangles.pop(),this.redraw());const t=r("#draw");t.classList.add("enableDrawingRectangle");const i=r(".screenshot");i.classList.add("cursor-crosshair")},restrictDrawing(){const e=r("#draw");e.classList.remove("enableDrawingRectangle");const t=r(".screenshot");t.classList.remove("cursor-crosshair")},removeOverlayandLines(){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays()},cancelOverlayDiv(){this.rectangles.pop(),this.redraw(),this.textApiResponse=null},dblClickToSelect(e){this.rectCordinate={startX:e.layerX,startY:e.layerY,endX:e.layerX,endY:e.layerY},this.getTextByCoordinates(this.rectCordinate)},currentPage(){return this.page},setImage(){this.record.hasOwnProperty("classification")&&this.record.classification.hasOwnProperty("classification_page")&&(this.page=this.record.classification.classification_page);let e=this.handleImageBaseURL(this.record.images);""!==e&&(this.baseUrl=e),this.images=(0,n.PN)(this.record.images),this.image=this.baseUrl+"/"+(0,n.Rl)(this.record.images[this.page-1].path)},highlightRow(e){e.classList.add("border")},cleanRectangles(){const e=this.rectangles[this.rectangles.length-1],t=this.rectangles.filter((function(t,i,o){return t.connectionId!==e.connectionId}));this.rectangles=[],this.rectangles=JSON.parse(JSON.stringify(t)),this.rectangles.push(e)},saveResultWrapper(e,t){this.marqueeRect=e,this.rectCordinate=t,this.rectangles.push(Object.assign({},e)),this.saveOverlayResult()},dsiplayFieldInToView(e){const t=this.getElementToConnect(r("#"+e));this.scrollInToViewCenter(t),document.documentElement.scrollTop=0,t&&(t.classList.add("light-yellow-with-effect"),setTimeout((()=>{t.classList.remove("light-yellow-with-effect")}),1e3))}}}},29474:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const o={methods:{isInt(e){return!isNaN(e)&&parseInt(Number(e))==e&&!isNaN(parseInt(e,10))}}}},3340:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});const o="%d.%m.%Y",s=Object.freeze({"%A":"dddd","%a":"ddd","%B":"MMMM","%b":"MMM","%c":"ddd MMM DD HH:mm:ss YYYY","%d":"DD","%f":"SSS","%H":"HH","%I":"hh","%j":"DDDD","%M":"mm","%m":"MM","%p":"A","%S":"ss","%U":"ww","%W":"ww","%w":"d","%X":"HH:mm:ss","%x":"MM/DD/YYYY","%Y":"YYYY","%y":"YY","%Z":"z","%z":"ZZ","%%":"%"}),a=Object.freeze({"%A":"####","%a":"###","%B":"####","%b":"###","%c":"### ### ## ##:##:## ####","%d":"##","%f":"###","%H":"##","%I":"##","%j":"####","%M":"##","%m":"##","%p":"#","%S":"##","%U":"##","%W":"##","%w":"#","%X":"##:##:##","%x":"##/##/####","%Y":"####","%y":"##","%Z":"#","%z":"##","%%":"#"}),l={methods:{convertPYDateFormatToJS(e){e&&""!=e||(e=o);for(const t in s)e=e.split(t).join(s[t]);return String(e)},convertPYDateFormatToMask(e){e&&""!=e||(e=o);for(const t in a)e=e.split(t).join(a[t]);return String(e)}}}},61566:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var pinia__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(10321),src_utils_int__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(29474),src_mixins_toasts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(77378),vue__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(83673),vue__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(61959),src_validatior_index__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(26424),src_utils_displayFieldLabel__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91777),src_validatior_validation_mixin__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(68925),src_formBuilder_formBuilderConstants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(85854),src_utils_amountConversionHelper__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(93426),src_formBuilder_utils_formBuilderHelper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(85828),src_formBuilder_form_elements_components_autocomplete_vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(37214),src_formBuilder_form_elements_formatter_TextInput_index__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(49609),src_store_main__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(60727),__awaiter=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const __WEBPACK_DEFAULT_EXPORT__=(0,vue__WEBPACK_IMPORTED_MODULE_11__.aZ)({name:"TextInput",components:{autocomplete:src_formBuilder_form_elements_components_autocomplete_vue__WEBPACK_IMPORTED_MODULE_8__.Z},props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},emits:["inputClicked","inputValueChanges","updateModel","applyFuzzySearch"],mixins:[src_utils_displayFieldLabel__WEBPACK_IMPORTED_MODULE_3__.Z,src_formBuilder_utils_formBuilderHelper__WEBPACK_IMPORTED_MODULE_7__.Z,src_validatior_validation_mixin__WEBPACK_IMPORTED_MODULE_4__.Z,src_utils_int__WEBPACK_IMPORTED_MODULE_0__.Z,src_mixins_toasts__WEBPACK_IMPORTED_MODULE_1__.Z,src_utils_amountConversionHelper__WEBPACK_IMPORTED_MODULE_6__.Z],beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},mounted:function(){this.init()},unmounted:function(){let e=this.getInputEl();e&&e.removeEventListener("update_field_value",this.updateModel)},methods:{init(){return __awaiter(this,void 0,void 0,(function*(){yield this.$nextTick();let e=this.getInputEl();e&&e.addEventListener("update_field_value",this.updateModel)}))},getInputEl(){let e=document.querySelector("."+this.fieldName+"_input");return e},updateModel(e){try{this.formBuilderModel[this.fieldName].formatted_value=e.detail.val,this.validateUpdateValue()}catch(t){}},getLowerConfidenceIfNotFormBuilder(e){return this.isFormBuilderMode?null:this.getLowerConfidence(e)},inputFieldClicked(e,t){e.stopPropagation(),this.$emit("inputClicked",t)},modelUpdated(e){this.formBuilderModel[this.fieldName].formatted_value=e,this.formatArtikalNummer(),this.formBuilderModel[this.fieldName].update_timestamp=Date.now(),this.$emit("inputValueChanges",this.fieldName,"input")},formatArtikalNummer(){this.isFieldArtikelNummber()&&(this.formBuilderModel[this.fieldName].formatted_value=src_formBuilder_form_elements_formatter_TextInput_index__WEBPACK_IMPORTED_MODULE_9__.i.format(this.formBuilderModel[this.fieldName].formatted_value))},isFieldArtikelNummber(){const e=this.getArtikelNummerFields();return!!e.includes(this.fieldName)},formatAndvalidateDate(){const e=this.getFieldType();"date"===e&&src_formBuilder_form_elements_formatter_TextInput_index__WEBPACK_IMPORTED_MODULE_9__.I.format(this.formBuilderModel[this.fieldName].formatted_value).then((e=>{this.formBuilderModel[this.fieldName].formatted_value=e,""==e&&this.throwInputError("invalid_input_date")}))},changeEvent(){this.formatAndvalidateDate(),this.validateUpdateValue()},validateUpdateValue(){return __awaiter(this,void 0,void 0,(function*(){if(this.isFormBuilderMode)return;let e=this.formBuilderModel[this.fieldName].formatted_value;if(this.formBuilderModel[this.fieldName].update_timestamp=Date.now(),!e||""==e)return void this.$emit("inputValueChanges",this.fieldName,"input");let t=!0,i="";this.formBuilderModel[this.fieldName].input_error=i;let o=this.formBuilderConfigModel[this.fieldName],s=this.formBuilderModel[this.fieldName];({is_valid:t,input_error:i}=yield src_validatior_index__WEBPACK_IMPORTED_MODULE_2__.b.init(s,o)),t?this.$emit("inputValueChanges",this.fieldName,"input"):this.throwInputError(i)}))},throwInputError(e){this.fieldName!=src_formBuilder_formBuilderConstants__WEBPACK_IMPORTED_MODULE_5__.Ev&&(this.formBuilderModel[this.fieldName].formatted_value=""),this.formBuilderModel[this.fieldName].input_error=e,this.$emit("inputValueChanges",this.fieldName,"input");let t=this.getInputEl();t&&(t.value="")},fieldMask(){if(this.isFormBuilderMode)return"";const e=this.getFieldType();let t="";switch(e){case"date":t=src_formBuilder_form_elements_formatter_TextInput_index__WEBPACK_IMPORTED_MODULE_9__.I.getMask(this.getDocDateFormat());break;default:t="";break}return t},getFieldType(){return this.formBuilderConfigModel[this.fieldName]&&this.formBuilderConfigModel[this.fieldName].field_type?String(this.formBuilderConfigModel[this.fieldName].field_type.toLowerCase()):""},hasInputError(){return!!this.formBuilderModel[this.fieldName].input_error},addErrorClass(){if(!this.hasInputError())return"";let e=" invalid-input ";return this.formBuilderModel[this.fieldName].input_error&&(e+=" "+this.formBuilderModel[this.fieldName].input_error+" "),e},inputErrorMessage(){let e="";if(!this.formBuilderModel[this.fieldName].input_error)return e;const t=this.formBuilderModel[this.fieldName].input_error,i=this.translateLabel(t);return e+=" "+i+" ",e},deleteRuleConfirmation(){this.deleteConfirmationDlg=!0},deleteRule(){this.$emit("inputValueChanges",this.fieldName,"delete_rule")},isCalculatorIconAllowed(){try{let t=void 0!=this.formBuilderConfigModel[this.fieldName].calculator&&null!=this.formBuilderConfigModel[this.fieldName].calculator&&1==this.formBuilderConfigModel[this.fieldName].calculator&&(""==this.formBuilderModel[this.fieldName].formatted_value||null==this.formBuilderModel[this.fieldName].formatted_value);if(0==t)return!1;let i=this.formBuilderConfigModel[this.fieldName].calculator_formula;var e=/\[(.*?)\]/g;let o=null,s=!1;while(null!==(o=e.exec(i))){const e=o[1];if(!this.formBuilderModel[e])return!1;const t=this.formBuilderModel[e].value?this.formBuilderModel[e].value:this.formBuilderModel[e].formatted_value;if(!t||""==t){s=!0;break}}return 1!=s}catch(t){return!1}},calculateValueOnCalulatorClick(){try{let field_name=this.formBuilderConfigModel[this.fieldName].field_name;this.removeFieldInputError(field_name);let calculator_formula=this.formBuilderConfigModel[this.fieldName].calculator_formula,translated_formula=calculator_formula,result2=null,isAnyFieldEmpty=!1;var pattern=/\[(.*?)\]/g;while(null!==(result2=pattern.exec(calculator_formula))){const e=result2[1],t=this.formBuilderModel[e].value?this.formBuilderModel[e].value:this.formBuilderModel[e].formatted_value;if(!t||""==t){isAnyFieldEmpty=!0;break}const i="["+e+"]";translated_formula=translated_formula.replace(i,t)}if(1==isAnyFieldEmpty)return void this.showErrorToast(this.$t("pages.messages.ERROR_CALCULATION_NOT_POSSIBLE"));translated_formula&&(translated_formula=translated_formula.split(",").join("."));let calculated_value=eval(translated_formula).toFixed(2);this.fieldName.startsWith("tax_rate")&&(calculated_value=parseFloat(calculated_value).toFixed(1)),calculated_value&&(calculated_value=calculated_value.split(".").join(",")),this.formBuilderModel[this.fieldName].value=calculated_value,this.formBuilderModel[this.fieldName].update_timestamp=Date.now(),this.formBuilderModel[this.fieldName].formatted_value=this.convertToDeValue(calculated_value),this.fieldCaluclations(),this.$emit("inputValueChanges",this.fieldName,"calculated"),this.$forceUpdate()}catch(err){}},fieldCaluclations(){for(const e of this.formLayout)for(const t of e.rows)t.calculation_formula&&this.performCalulations(t.field_name,t.calculation_formula,this.amount_format_locale,t.field_type)},removeFieldInputError(e){this.formBuilderModel[e].hasOwnProperty("input_error")&&(this.formBuilderModel[e].input_error="")}},setup(){const e=(0,src_store_main__WEBPACK_IMPORTED_MODULE_10__.nc)(),{formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o,formLayout:s}=(0,pinia__WEBPACK_IMPORTED_MODULE_12__.Jk)(e),{getDocDateFormat:a,getArtikelNummerFields:l,performCalulations:n}=e,r=(0,src_store_main__WEBPACK_IMPORTED_MODULE_10__.wr)(),{getListOfValues:d}=r,c=(0,src_store_main__WEBPACK_IMPORTED_MODULE_10__.H_)(),{amount_format_locale:u}=(0,pinia__WEBPACK_IMPORTED_MODULE_12__.Jk)(c);return{amount_format_locale:u,performCalulations:n,getArtikelNummerFields:l,getDocDateFormat:a,getListOfValues:d,formLayout:s,formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o,mask:(0,vue__WEBPACK_IMPORTED_MODULE_13__.iH)(""),deleteConfirmationDlg:(0,vue__WEBPACK_IMPORTED_MODULE_13__.iH)(!1)}}})},64252:(e,t,i)=>{"use strict";i.d(t,{n6:()=>D,U2:()=>C,we:()=>x,d4:()=>k,zU:()=>y,U_:()=>O,wk:()=>b,_J:()=>v});var o=i(30052),s=i.n(o),a=i(54268),l=i(68564),n=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};class r extends l.Z{constructor({}){super({})}getById(e){return super.get(a.hi.get_doc+e)}get_all_docs(){return super.get(a.hi.all_documents)}dashboard(e){return super.get(a.hi.dashboard+e)}create_doc(e){const t={headers:{"Content-Type":"multipart/form-data"}};return super.post(a.hi.create_doc,e,t)}get_directscan_documents(){return super.get(a.hi.get_directscan_documents)}split_ocr_and_upload_to_store(e,t,i,o,s,l,n,r){const d="?name="+e+"&path="+t+"&store_id="+i+"&auto_name="+s,c=new FormData;return c.append("file",o),c.append("separators",l),c.append("sorted_indexes",n),c.append("deleted_indexes",r),super.post(a.hi.split_ocr_upload+d,c)}ocr_upload_to_store(e,t,i,o,s){const l="?name="+e+"&path="+t+"&store_id="+i+"&auto_name="+s,n=new FormData;return n.append("file",o),super.post(a.hi.ocr_upload_to_store+l,n)}split_create_doc(e,t,i,o){const s=Object.create(null,{post:{get:()=>super.post}});return n(this,void 0,void 0,(function*(){const l=new FormData;return l.append("file",e),l.append("separators",t),l.append("sorted_indexes",i),l.append("deleted_indexes",o),s.post.call(this,a.hi.split_create_doc,l)}))}split_old_doc(e,t,i,o){const s=Object.create(null,{post:{get:()=>super.post}});return n(this,void 0,void 0,(function*(){const l=new FormData;return l.append("doc_id",e),l.append("separators",t),l.append("sorted_indexes",i),l.append("deleted_indexes",o),s.post.call(this,a.hi.split_old_doc,l)}))}delete_doc_by_id(e){const t=new FormData;return t.append("doc_id",e),super.delete(a.hi.delete_doc,t)}download_doc(e){return n(this,void 0,void 0,(function*(){const t=yield(0,a.O_)(),i=yield s().get(a.hi.download_doc+"/"+e,{responseType:"blob",headers:{Authorization:t}});return URL.createObjectURL(new Blob([i.data,e+".pdf",i.headers["content-type"]]))}))}getThumbnail(e){return n(this,void 0,void 0,(function*(){const t=yield(0,a.O_)(),i=yield s().get(a.hi.get_doc_thumbnail+e,{responseType:"blob",headers:{Authorization:t}});return i.data}))}get_doc_text(e){const t=new FormData;return t.append("doc_id",e),super.get(a.hi.get_doc_text+"/"+e,t)}update_doc(e,t,i,o,s,l){let n=e;return""!==t&&(n+="?name="+t),""!==i&&(n+="&asi_num="+i),void 0!==o&&(n+="&correspondent="+o),void 0!==s&&(n+="&doc_type="+s),""!==l&&(n+="&tags="+l),super.put(a.hi.update_doc+n,null)}remove_tag_from_doc(e,t){const i=new FormData;return i.append("doc_id",e),i.append("tag_id",t),super.put(a.hi.remove_tag_from_doc,i)}performDocSplit(e,t){const i=new FormData;i.append("doc_id",t);for(const[o,s]of Object.entries(e))i.append(o,s);return super.post(a.hi.split_document,i)}}var d=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};class c extends l.Z{constructor({}){super({})}init_auth(e,t){const i=new FormData;return i.append("store_type",e),"dropbox"!=e&&"lexoffice"!=e||i.append("data",t),super.post(a.hi.init_auth,i)}updateStore(e,t,i){let o;if("dropbox"==t){o="?store_id="+e+"&store_type="+t;const s=new FormData;return s.append("data",i),super.put(a.hi.edit_store+"/"+o,s)}return o="?store_id="+e+"&store_type="+t,super.put(a.hi.edit_store+"/"+o,null)}deleteStore(e){const t="?store_id="+e;return super.delete(a.hi.delete_store+t,null)}ms_auth(e){return super.get(a.hi.ms_auth+e)}getAccessableStores(){return super.get(a.hi.get_accessable_user_stores)}renameStore(e,t){const i="?store_id="+e+"&name="+t;return super.put(a.hi.rename_store+i,null)}get_store_content(){return super.get(a.hi.get_store_content)}importFile(e){return super.post(a.hi.import_files,e)}getFolders(){return super.get(a.hi.get_folders)}toggleStorePublicity(e){const t="?store_id="+e;return super.get(a.hi.toggle_store_publicity+t)}downloadFile(e){return d(this,void 0,void 0,(function*(){const t=yield(0,a.O_)(),i=yield s().post(a.hi.download_files,e,{responseType:"blob",headers:{Authorization:t}});return URL.createObjectURL(new Blob([i.data,"Document.pdf",i.headers["content-type"]]))}))}uploadtostore(e){return super.post(a.hi.upload_files,e)}get_paths_for_org(){return super.get(a.hi.get_paths_for_org)}saveFolder(e,t,i){const o="?store_id="+e+"&path_id="+t+"&path_name="+i;return super.post(a.hi.add_update_storepath+o,null)}removeFolder(e,t){const i="?store_id="+e+"&id="+t;return super.post(a.hi.add_update_storepath+i,null)}getOrgStore(){return super.get(a.hi.get_org_store)}}class u extends l.Z{constructor({}){super({})}get_tag(e){return super.get(a.hi.get_tag+e)}get_all_tags(){return super.get(a.hi.get_all_tags)}create_tag(e,t,i,o){let s="";return s+="?tag_name="+e,s+="&method="+t,s+="&regex="+i,s+="&color="+o.replace("#","%23"),super.post(a.hi.create_tag+s,null)}update_tag(e,t,i,o,s){const l="?id="+e+"&name="+t+"&method="+i+"&regex="+o+"&color="+s.replace("#","%23");return super.put(a.hi.update_tag+l,null)}delete_tag(e){const t=new FormData;return t.append("tag_id",e),super.delete(a.hi.delete_tag,t)}}class h extends l.Z{constructor({}){super({})}get_correspondent(e){return super.get(a.hi.get_correspondent+"/"+e)}get_all_correspondents(){return super.get(a.hi.get_all_correspondents)}create_correspondent(e,t,i,o){let s="";return s+="?name="+e,s+="&method="+t,s+="&regex="+i,s+="&priority="+o,super.post(a.hi.create_correspondent+s,null)}update_correspondent(e,t,i,o,s){let l="?id="+e+"&name="+t+"&method="+i+"&regex="+o;return s&&(l+="&priority="+s),super.put(a.hi.update_correspondent+l,null)}delete_correspondent(e){const t=new FormData;return t.append("id",e),super.delete(a.hi.delete_correspondent,t)}}class m extends l.Z{constructor({}){super({})}get_doctype(e){return super.get(a.hi.get_doctype+"/"+e)}get_all_doctypes(){return super.get(a.hi.get_all_doctypes)}create_doctype(e,t,i,o){const s="?name="+e+"&method="+t+"&regex="+i+"&priority="+o;return super.post(a.hi.create_doctype+s,null)}update_doctype(e,t,i,o,s){let l="?id="+e+"&name="+t+"&method="+o+"&regex="+s;return i&&(l+="&priority="+i),super.put(a.hi.update_doctype+l,null)}delete_doctype(e){let t="";return t+="?id="+e,super.delete(a.hi.delete_doctype+t,null)}}class p extends l.Z{constructor({}){super({})}dashboard(e){return super.get(a.hi.dashboard+e)}get_correspondent(e){return super.get(a.hi.get_correspondent+"/"+e)}get_all_correspondents(){return super.get(a.hi.get_all_correspondents)}create_correspondent(e){return super.post(a.hi.create_correspondent+e,null)}update_correspondent(e){return super.put(a.hi.update_correspondent+e,null)}delete_correspondent(e){const t=new FormData;return t.append("id",e),super.delete(a.hi.delete_correspondent,t)}get_doctype(e){return super.get(a.hi.get_doctype+"/"+e)}get_all_doctypes(){return super.get(a.hi.get_all_doctypes)}create_doctype(e){return super.post(a.hi.create_doctype+"/"+e,null)}update_doctype(e){return super.put(a.hi.update_doctype+e,null)}delete_doctype(e){return super.delete(a.hi.delete_doctype+e,null)}get_tag(e){return super.get(a.hi.get_tag+e)}get_all_tags(){return super.get(a.hi.get_all_tags)}create_tag(e){return super.post(a.hi.create_tag+e,null)}update_tag(e){return super.put(a.hi.update_tag+e,null)}delete_tag(e){const t=new FormData;return t.append("tag_id",e),super.delete(a.hi.delete_tag,t)}}class _ extends l.Z{constructor({}){super({})}get_correspondent_group(e){return super.get(a.hi.get_correspondent_group+"/"+e)}all_correspondent_groups(){return super.get(a.hi.get_all_correspondent_groups)}create_correspondent_group(e){const t=new FormData;return t.append("group_name",e),super.post(a.hi.create_correspondent_group,t)}rename_correspondent_group(e,t){const i=new FormData;return i.append("id",e),i.append("name",t),super.put(a.hi.rename_correspondent_group,i)}add_correspondent_to_group(e,t){const i=new FormData;return i.append("group_id",e),i.append("correspondent_id",t),super.put(a.hi.add_correspondent_to_group,i)}remove_correspondent_from_group(e,t){const i=new FormData;return i.append("group_id",e),i.append("correspondent_id",t),super.put(a.hi.remove_correspondent_from_group,i)}delete_correspondent_group(e){const t=new FormData;return t.append("id",e),super.delete(a.hi.delete_correspondent_group,t)}}var g=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};class f extends l.Z{constructor({}){super({})}init_auth(e){return super.post(a.hi.init_auth,e)}getStoreFiles(e,t){const i="?store_id="+t;return super.get(a.hi.get_store_content+i)}getStoreFolders(e,t){const i="?store_id="+t;return super.get(a.hi.get_store_content+i)}getFolders(e){const t="?store_id="+e;return super.get(a.hi.get_folders+t)}uploadFiletoGDrive(e,t,i){let o="";o+="?path="+t.id+"&store_id="+i;const s=new FormData;return s.append("file",e),super.post(a.hi.upload_files+o,s)}uploadFiletoSpace(e,t,i=!1,o,s){let l="";return"googledrive"==o||"onedrive"==o?l+="?path="+t.id+"&overwrite="+i+"&store_id="+s:"dropbox"==o?l+="?path="+t.path+"&overwrite="+i+"&store_id="+s:"lexoffice"==o&&(l+="?store_id="+s),super.post(a.hi.upload_files+l,e)}importSpaceFileToAlfred(e,t,i){const o=[];"GoogleDrive"==i||"Onedrive"==i?o.push(e.id):o.push(e.path);const s="?store_id="+t;return super.post(a.hi.import_files+s,o)}downloadFileFromSpace(e,t,i){return g(this,void 0,void 0,(function*(){const o=yield(0,a.O_)(),l="?store_id="+t,n=[];"GoogleDrive"==i||"Onedrive"==i?n.push(e.id):n.push(e.path);const r=yield s().post(a.hi.download_files+l,n,{responseType:"blob",headers:{Authorization:o}});return URL.createObjectURL(new Blob([r.data,e.label+"pdf",r.headers["content-type"]]))}))}}class w extends l.Z{constructor({}){super({})}get_all_paths(){return super.get(a.hi.get_path_dashboard)}remove_path_condition_pair(e,t){const i="?directory_id="+e+"&condition_id="+t;return super.delete(a.hi.remove_path_condition_pair+i,null)}edit_pathdirectory(e,t,i,o){const s="?directory_id="+e+"&store_id="+t+"&name="+i+"&path="+o;return super.put(a.hi.edit_pathdirectory+s,null)}create_path_condition_pair(e,t,i,o){const s="?directory_id="+o+"&value_1="+e+"&value_2="+t+"&value_3="+i;return super.post(a.hi.create_path_condition_pair+s,null)}add_pathdirectory(e,t,i){const o="?store_id="+e+"&name="+t+"&path="+i;return super.post(a.hi.create_pathdirectory+o,null)}delete_pathdirectory(e){const t="?directory_id="+e;return super.delete(a.hi.delete_pathdirectory+t,null)}}const y=new r({}),b=new c({}),v=new u({}),x=new h({}),k=new m({}),C=(new p({}),new _({})),D=new f({}),O=new w({})},79261:(e,t,i)=>{"use strict";i.d(t,{p2:()=>O.p,Wb:()=>x,_3:()=>D,My:()=>l});var o=i(10321),s=i(64252),a=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const l=(0,o.Q_)("doc2light_document_store",{state:()=>({doctype:"",docs:[],doc_ids:[],doc_view:new Blob,document:{},page:"",doc_count:"",doc_thumbnails:{}}),actions:{setData(e){if(Object.keys(e).forEach((t=>{e[t]=null===e[t]?"":e[t]})),this.doc_ids.indexOf(e.doc_id)>=0);else{this.doc_ids.push(e.doc_id);const t=[];e.tags.forEach((e=>{t.push(e)})),this.docs.push({id:e.doc_id,title:e.title,asn:e.asi_num,doc_type:e.doc_type,assignee:e.correspondent,created_on:e.created_on,last_modified:e.last_modified,metadata:e.metadata,tags:t,timeline:e.timeline})}},set_docview(e){this.doc_view=e},get_all_docs(){return a(this,void 0,void 0,(function*(){yield s.zU.get_all_docs().then((e=>{const t=e;1==t.success&&Array.from(e.data).forEach((e=>{this.setData(e)}))}))}))},dashboard(e){return a(this,void 0,void 0,(function*(){yield s.zU.dashboard(e).then((e=>{const t=e;1==t.success&&(this.doc_count=t.doc_count,this.doc_ids=[],this.docs=[],Array.from(e.data).forEach((e=>{this.setData(e)})))}))}))},delete_doc(e){return a(this,void 0,void 0,(function*(){yield s.zU.delete_doc_by_id(e)}))},get_by_id(e){return a(this,void 0,void 0,(function*(){const t=yield s.zU.getById(e);return this.document=t,t}))},get_doc_thumbnail(e){return a(this,void 0,void 0,(function*(){if(e in this.doc_thumbnails===!1)try{this.doc_thumbnails[e]=yield s.zU.getThumbnail(e)}catch(t){this.doc_thumbnails[e]="error"}return this.doc_thumbnails[e]}))},remove_tag_from_doc(e,t){return a(this,void 0,void 0,(function*(){yield s.zU.remove_tag_from_doc(e,t).then((i=>{const o=i;1==o.success&&Array.from(this.docs).forEach((i=>{if(i.id==e){const e=this.docs.indexOf(i);Array.from(this.docs[e].tags).forEach((i=>{i.id==t&&this.docs[e].tags.splice(this.docs[e].tags.indexOf(i),1)}))}}))}))}))}}});var n=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};(0,o.Q_)("doc2light_tag_store",{state:()=>({tags:[],tag_ids:[]}),actions:{setTag(e){Object.keys(e).forEach((t=>{e[t]=null===e[t]?"":e[t]})),this.tag_ids.indexOf(e.id)>=0||(this.tag_ids.push(e.id),this.tags.push({id:e.id,name:e.tag,color:e.color}))},get_all_tags(){return n(this,void 0,void 0,(function*(){const e=yield s._J.get_all_tags();1==e.data.success&&Array.from(e.data.tags).forEach((e=>{this.setTag(e)}))}))},get_tag(e){return n(this,void 0,void 0,(function*(){const t=yield s._J.get_tag(e);return t}))},update_tag(e,t,i,o,a){return n(this,void 0,void 0,(function*(){yield s._J.update_tag(e,t,i,o,a).then((i=>{const o=i;1==o.success&&this.update_store_data(e,t,a)}))}))},update_store_data(e,t,i){const o=this.tags.findIndex((t=>t.id===e));if(-1!==o)this.tags[o].name=t,this.tags[o].color=i;else{const o={id:e,tag:t,color:i};this.setTag(o)}},remove_store_data(e){const t=this.tags.findIndex((t=>t.id===e));this.tags.splice(t,1)},create_tag(e,t,i,o){return n(this,void 0,void 0,(function*(){const a=yield s._J.create_tag(e,t,i,o);if(1==a.data.success){a.data.tag.id;this.setTag(a.data.tag)}}))},delete_tag(e){return n(this,void 0,void 0,(function*(){const t=yield s._J.delete_tag(e);1==t.data.success&&this.remove_store_data(e)}))}}});var r=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};(0,o.Q_)("doc2light_doctype_store",{state:()=>({doc_types:[],doc_type_ids:[]}),actions:{setDoctype(e){Object.keys(e).forEach((t=>{e[t]=null===e[t]?"":e[t]})),this.doc_type_ids.indexOf(e.id)>=0||(this.doc_type_ids.push(e.id),this.doc_types.push({id:e.id,name:e.name,regex:e.regex,priority:e.priority,method:e.method}))},get_doctype(e){return r(this,void 0,void 0,(function*(){const t=yield s.d4.get_doctype(e).then((e=>e));return t}))},get_all_doctypes(){return r(this,void 0,void 0,(function*(){yield s.d4.get_all_doctypes().then((e=>{const t=e;return t.hasOwnProperty("doctypes")?(Array.from(t.doctypes).forEach((e=>{this.setDoctype(e)})),e):e}))}))},create_doctype(e,t,i,o){return r(this,void 0,void 0,(function*(){yield s.d4.create_doctype(e,t,i,o).then((e=>{const t=e;t.success&&this.setDoctype(t)}))}))},update_doctype(e,t,i,o,a){return r(this,void 0,void 0,(function*(){const l=yield s.d4.update_doctype(e,t,i,o,a).then((s=>(this.update_typestore_data(e,t,o,i,a),s))).catch((e=>{const t=e.response;return t}));return l}))},update_typestore_data(e,t,i,o,s){const a=this.doc_types.findIndex((t=>t.id===e));if(-1!==a)this.doc_types[a].name=t,this.doc_types[a].classification_type=i,this.doc_types[a].priority=o,this.doc_types[a].regex=s;else{const i={id:e,tag:t};this.setDoctype(i)}},remove_doctype_store_data(e){const t=this.doc_types.findIndex((t=>t.id===e));this.doc_types.splice(t,1)},delete_doctype(e){return r(this,void 0,void 0,(function*(){let t="";t+="?id="+e;yield s.d4.delete_doctype(t);this.remove_doctype_store_data(e)}))}}});var d=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};(0,o.Q_)("doc2light_corresp_store",{state:()=>({correspondents:[],corresp_ids:[]}),actions:{setCorresp(e){Object.keys(e).forEach((t=>{e[t]=null===e[t]?"":e[t]})),this.corresp_ids.indexOf(e.id)>=0||(this.corresp_ids.push(e.id),this.correspondents.push({id:e.id,name:e.name,priority:e.priority,extraction_type:e.extraction_type,regex:e.regex}))},update_store_data(e,t,i,o,s){const a=this.correspondents.findIndex((t=>t.id===e));if(-1!==a)this.correspondents[a].name=t,this.correspondents[a].extraction_type=i,this.correspondents[a].priority=o,this.correspondents[a].regex=s;else{const i={id:e,tag:t};this.setCorresp(i)}},get_all_correspondents(){return d(this,void 0,void 0,(function*(){const e=yield s.we.get_all_correspondents().then((e=>{const t=e;return t.hasOwnProperty("correspondents")?(Array.from(t.correspondents).forEach((e=>{this.setCorresp(e)})),e):e}));return e}))},delete_correspondent(e){return d(this,void 0,void 0,(function*(){yield s.we.delete_correspondent(e).then((t=>(this.remove_corresp_store_data(e),t)))}))},get_correspondent(e){return d(this,void 0,void 0,(function*(){const t=yield s.we.get_correspondent(e).then((e=>e));return t}))},remove_corresp_store_data(e){const t=this.correspondents.findIndex((t=>t.id===e));this.correspondents.splice(t,1)},create_correspondent(e,t,i,o){return d(this,void 0,void 0,(function*(){yield s.we.create_correspondent(e,t,i,o).then((e=>{const t=e;this.setCorresp(t.correspondent)}))}))},update_correspondent(e,t,i,o,a){return d(this,void 0,void 0,(function*(){const l=yield s.we.update_correspondent(e,t,i,o,a).then((s=>(this.update_store_data(e,t,i,a,o),s))).catch((e=>{const t=e.response;return t}));return l}))}}});function c(e){const t={priorities:[],data:{}};return e.doctypes.forEach((e=>{const i={id:e.id,name:e.name,regex:e.regex,method:e.method,priority:e.priority,fabaction:!1,rowSelection:!1};t.data[i.id]=i,null!==i.priority&&t.priorities.push(i.priority)})),t}function u(e,t){e.hasOwnProperty("data")||(e.data={}),e.hasOwnProperty("priorities")||(e.priorities=[]);const i={id:t.id,name:t.name,regex:t.regex,method:t.method,priority:t.priority,fabaction:!1,rowSelection:!1};return e.data[i.id]=i,null!==i.priority&&e.priorities.push(i.priority),e}function h(e){const t={data:{}};return e.paths.forEach((e=>{const i={id:e.id,name:e.name,path:e.path,store:e.store,conditions:e.conditions,fabaction:!1,rowSelection:!1};t.data[i.id]=i})),t}function m(e){const t={data:{}};return e.tags.forEach((e=>{const i={id:e.id,name:e.tag,method:e.extraction_type,regex:e.regex,color:e.color,fabaction:!1,rowSelection:!1};t.data[i.id]=i})),t}function p(e,t){e.hasOwnProperty("data")||(e.data={});const i={id:t.tag.id,name:t.tag.tag,method:t.tag.method,regex:t.tag.regex,color:t.tag.color,fabaction:!1,rowSelection:!1};return e.data[i.id]=i,e}function _(e){const t={priorities:[],data:{}};return e.correspondents.forEach((e=>{const i={id:e.id,name:e.name,regex:e.regex,method:e.extraction_type,priority:e.priority,fabaction:!1,rowSelection:!1};t.data[i.id]=i,null!==i.priority&&t.priorities.push(i.priority)})),t}function g(e,t){e.hasOwnProperty("data")||(e.data={}),e.hasOwnProperty("priorities")||(e.priorities=[]);const i={id:t.correspondent.id,name:t.correspondent.name,regex:t.correspondent.regex,method:t.correspondent.method,priority:t.correspondent.priority,fabaction:!1,rowSelection:!1};return e.data[i.id]=i,null!==i.priority&&e.priorities.push(i.priority),e}function f(e){const t={data:{}};return e.correspondent_groups.forEach((e=>{const i={id:e.id,name:e.name,correspondents:e.correspondents,fabaction:!1,rowSelection:!1};t.data[i.id]=i})),t}function w(e,t){e.hasOwnProperty("data")||(e.data={});const i={id:t.group.id,name:t.group.name,correspondents:t.group.correspondents,fabaction:!1,rowSelection:!1};return e.data[i.id]=i,e}function y(e){const t={documents:{}};return t.doc_count=e.doc_count,t.current_dashboard_docs=[],e.data.forEach((e=>{const i=[];null!=e.tags&&e.tags.forEach((e=>{null!=e&&i.push({value:e["id"],label:e["name"]})}));const o=null===e.correspondent?null:e.correspondent,s=null===e.doc_type?null:e.doc_type,a={asi:null,timeline:e.timeline,metadata:e.metadata,id:e.doc_id,name:e.title,created_on:e.created_on,last_modified:e.last_modified,tags:i,doc_type:s,correspondent:o,image_data:null,image:null};t.documents[a.id]=a,t.current_dashboard_docs.push(a.id)})),t}var b=i(25616),v=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const x=(0,o.Q_)("doc2light_comb_store",{state:()=>({doc_count:"",page_count:1,doc_thumbnails:{},correspondentData:{},documentData:{},docTypeData:{},tagData:{},dashboardDocs:{},groupData:{},pathData:{}}),getters:{getDashboardDocIds:e=>e.documentData.current_dashboard_docs,getCurrentPageCount:e=>e.page_count,getDocIds:e=>Object.keys(e.documentData.documents),getDocData:e=>t=>e.documentData.documents[t],getDocCorrespondent:e=>t=>{const i=e.documentData.documents[t].correspondent;return null===i?"":e.correspondentData.data[i.id].name},getDocTags:e=>t=>e.documentData.documents[t].tags,getTagIds:e=>Object.keys(e.tagData.data),getTagData:e=>t=>e.tagData.data[t],getDocTypeIds:e=>Object.keys(e.docTypeData.data),getDocTypePriorities:e=>e.docTypeData.priorities,getDocTypeData:e=>t=>e.docTypeData.data[t],getCorrespondentIds:e=>Object.keys(e.correspondentData.data),getCorrespondentPriorities:e=>e.correspondentData.priorities,getCorrespondentData:e=>t=>e.correspondentData.data[t],getGroupIds:e=>Object.keys(e.groupData.data),getGroupData:e=>t=>e.groupData.data[t]},actions:{loadFromServer(){return v(this,void 0,void 0,(function*(){yield this.setCorrespondentsFromServer(),yield this.setDocumentsDashboard(),yield this.setDocTypesfromServer(),yield this.setTagsFromServer(),yield this.setGroupsFromServer(),yield this.setPathsFromServer(),this.prepareDashboard()}))},setDocumentsDashboard(e="?limit=18"){return v(this,void 0,void 0,(function*(){e+="&skip="+18*(this.page_count-1);yield s.zU.dashboard(e).then((e=>{this.documentData=y(e)})).catch((e=>{}))}))},setDocTypesfromServer(){return v(this,void 0,void 0,(function*(){yield s.d4.get_all_doctypes().then((e=>{this.docTypeData=c(e)})).catch((e=>{}))}))},setTagsFromServer(){return v(this,void 0,void 0,(function*(){yield s._J.get_all_tags().then((e=>{this.tagData=m(e)})).catch((e=>{}))}))},setPathsFromServer(){return v(this,void 0,void 0,(function*(){yield s.U_.get_all_paths().then((e=>{this.pathData=h(e)})).catch((e=>{}))}))},setCorrespondentsFromServer(){return v(this,void 0,void 0,(function*(){yield s.we.get_all_correspondents().then((e=>{this.correspondentData=_(e)})).catch((e=>{}))}))},setGroupsFromServer(){return v(this,void 0,void 0,(function*(){yield s.U2.all_correspondent_groups().then((e=>{this.groupData=f(e)})).catch((e=>{}))}))},prepareDashboard(){this.dashboardDocs={docs:{},doc_ids:this.documentData.current_dashboard_docs},this.documentData.current_dashboard_docs.forEach((e=>{const t=[],i=this.documentData.documents[e];i.tags.forEach((e=>{const i=this.tagData.data[e.value];t.push(i)}));const o={id:"",name:"",method:"",priority:"",regex:"",fabaction:!1,rowSelection:!1},s={id:"",name:"",method:"",priority:"",regex:"",fabaction:!1,rowSelection:!1},a=null===i.asi?"-":i.asi,l=null===i.doc_type?o:i.doc_type,n=k(i.created_on,"YYYY-MM-DD HH:mm:ss"),r=null===i.last_modified?"-":k(i.last_modified,"YYYY-MM-DD HH:mm:ss"),d=null===i.correspondent?s:i.correspondent,c={id:i.id,name:i.name,asi:a,metadata:i.metadata,tags:t,correspondent:d,last_modified:r,created_on:n,doc_type:l,fabaction:!1,rowSelection:!1,image_data:i.image_data,image:i.image};this.dashboardDocs.docs[i.id]=c}))},delete_doc(e){return v(this,void 0,void 0,(function*(){yield s.zU.delete_doc_by_id(e);delete this.documentData.documents[e],delete this.dashboardDocs.docs[e]}))},get_by_id(e){return v(this,void 0,void 0,(function*(){const t=yield s.zU.getById(e);return t}))},get_doc_thumbnail(e){return v(this,void 0,void 0,(function*(){if(e in this.doc_thumbnails===!1)try{this.doc_thumbnails[e]=yield s.zU.getThumbnail(e)}catch(t){this.doc_thumbnails[e]="error"}return this.doc_thumbnails[e]}))},change_pagecount(e){this.page_count=e},remove_tag_from_doc(e,t){return v(this,void 0,void 0,(function*(){const i=yield s.zU.remove_tag_from_doc(e,t),o=i;1==o.success&&(this.documentData.documents[e].tags.splice(this.documentData.documents[e].tags.indexOf(t),1),this.dashboardDocs.docs[e].tags.splice(this.dashboardDocs.docs[e].tags.indexOf(t),1))}))},get_tag(e){return v(this,void 0,void 0,(function*(){const t=yield s._J.get_tag(e);return t}))},update_tag(e,t,i,o,a){return v(this,void 0,void 0,(function*(){const l=yield s._J.update_tag(e,t,i,o,a),n=l;1==n.success&&p(this.tagData,n)}))},create_tag(e,t,i,o){return v(this,void 0,void 0,(function*(){const a=yield s._J.create_tag(e,t,i,o),l=a;1==l.success&&p(this.tagData,a)}))},delete_tag(e){return v(this,void 0,void 0,(function*(){const t=yield s._J.delete_tag(e),i=t;1==i.success&&delete this.tagData.data[e]}))},remove_path_condition_pair(e,t){return v(this,void 0,void 0,(function*(){yield s.U_.remove_path_condition_pair(e,t).then((i=>{delete this.pathData.data[e].conditions.data[t]}))}))},create_path_condition_pair(e,t,i,o){return v(this,void 0,void 0,(function*(){yield s.U_.create_path_condition_pair(e,t,i,o).then((e=>{}))}))},edit_pathdirectory(e,t,i,o){return v(this,void 0,void 0,(function*(){yield s.U_.edit_pathdirectory(e,t,i,o).then((t=>{this.pathData.data[e]=t.directory}))}))},add_pathdirectory(e,t,i){return v(this,void 0,void 0,(function*(){const o=yield s.U_.add_pathdirectory(e,t,i).then((e=>{const t={id:e.directory.id,name:e.directory.name,path:e.directory.path,store:e.directory.store,conditions:e.directory.conditions,fabaction:!1,rowSelection:!1};return this.pathData.data[t.id]=t,e}));return o}))},delete_pathdirectory(e){return v(this,void 0,void 0,(function*(){yield s.U_.delete_pathdirectory(e).then((t=>{delete this.pathData.data[e]}))}))},get_doctype(e){return v(this,void 0,void 0,(function*(){const t=yield s.d4.get_doctype(e).then((e=>e));return t}))},create_doctype(e,t,i,o){return v(this,void 0,void 0,(function*(){yield s.d4.create_doctype(e,t,i,o).then((e=>{const t=e;u(this.docTypeData,t.doctype)}))}))},update_doctype(e,t,i,o,a){return v(this,void 0,void 0,(function*(){yield s.d4.update_doctype(e,t,i,o,a).then((e=>{u(this.docTypeData,e)})).catch((e=>{e.response}))}))},delete_doctype(e){return v(this,void 0,void 0,(function*(){const t=yield s.d4.delete_doctype(e),i=t;1==i.success&&delete this.docTypeData.data[e]}))},get_all_correspondents(){return v(this,void 0,void 0,(function*(){const e=yield s.we.get_all_correspondents().then((e=>{const t=e;if(1==t.success)return this.groupData=f(t),e}));return e}))},delete_correspondent(e){return v(this,void 0,void 0,(function*(){yield s.we.delete_correspondent(e).then((t=>{const i=t;if(1==i.success)return delete this.correspondentData.data[e],t}))}))},get_correspondent(e){return v(this,void 0,void 0,(function*(){const t=yield s.we.get_correspondent(e).then((e=>e));return t}))},create_correspondent(e,t,i,o){return v(this,void 0,void 0,(function*(){yield s.we.create_correspondent(e,t,i,o).then((e=>{const t=e;g(this.correspondentData,t)}))}))},update_correspondent(e,t,i,o,a){return v(this,void 0,void 0,(function*(){yield s.we.update_correspondent(e,t,i,o,a).then((e=>{const t=e;if(1==t.success)return g(this.correspondentData,t),t})).catch((e=>{const t=e.response;return t}))}))},get_all_correspondent_groups(){return v(this,void 0,void 0,(function*(){yield s.U2.all_correspondent_groups().then((e=>{const t=e;if(1==t.success)return f(t),e}))}))},rename_correspondent_group(e,t){return v(this,void 0,void 0,(function*(){yield s.U2.rename_correspondent_group(e,t).then((e=>{const t=e;if(1==t.success)return w(this.groupData,t),e}))}))},remove_correspondent_from_group(e,t){return v(this,void 0,void 0,(function*(){yield s.U2.remove_correspondent_from_group(t,e).then((i=>{const o=i;if(1==o.success)return this.groupData.data[t].correspondents.splice(this.groupData.data[t].correspondents.indexOf(e),1),i}))}))},add_correspondent_to_group(e,t,i,o){return v(this,void 0,void 0,(function*(){yield s.U2.add_correspondent_to_group(t,e).then((e=>{const t=e;1==t.success&&w(this.groupData,t)}))}))},delete_correspondent_group(e){return v(this,void 0,void 0,(function*(){yield s.U2.delete_correspondent_group(e).then((t=>{const i=t;if(1==i.success)return delete this.groupData.data[e],t}))}))},get_correspondent_groups(e){return v(this,void 0,void 0,(function*(){const t=yield s.U2.get_correspondent_group(e).then((e=>e));return t}))},create_correspondent_group(e){return v(this,void 0,void 0,(function*(){yield s.U2.create_correspondent_group(e).then((e=>{const t=e;1==t.success&&w(this.groupData,t.group)}))}))}}});function k(e,t){return b.ZP.formatDate(e,t)}var C=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const D=(0,o.Q_)("doc2light_corresp_group_store",{state:()=>({correspondent_groups:[],corresp_group_ids:[]}),actions:{setGroups(e){Object.keys(e).forEach((t=>{e[t]=null===e[t]?"":e[t]})),this.corresp_group_ids.indexOf(e.id)>=0||(this.corresp_group_ids.push(e.id),this.correspondent_groups.push({id:e.id,name:e.name,correspondents:e.correspondents}))},update_store_data(e,t,i){const o=this.correspondent_groups.findIndex((t=>t.id===e));if(-1!==o)this.correspondent_groups[o].name=t,this.correspondent_groups[o].correspondents.push(i);else{const i={id:e,name:t};this.setGroups(i)}},get_all_correspondent_groups(){return C(this,void 0,void 0,(function*(){yield s.U2.all_correspondent_groups().then((e=>{const t=e;return t.hasOwnProperty("correspondent_groups")?(Array.from(t.correspondent_groups).forEach((e=>{this.setGroups(e)})),e):e}))}))},rename_correspondent_group(e,t){return C(this,void 0,void 0,(function*(){yield s.U2.rename_correspondent_group(e,t).then((i=>{const o=i;return this.update_store_data(e,t,o.group.correspondents),i}))}))},remove_correspondent_from_group(e,t){return C(this,void 0,void 0,(function*(){yield s.U2.remove_correspondent_from_group(t,e).then((i=>(this.remove_corresp_from_group_store_data(t,e),i)))}))},add_correspondent_to_group(e,t,i){return C(this,void 0,void 0,(function*(){yield s.U2.add_correspondent_to_group(t,e).then((e=>{const o=e;this.add_corresp_to_store_data(t,o.data.correspondent_id,i)}))}))},delete_correspondent_group(e){return C(this,void 0,void 0,(function*(){yield s.U2.delete_correspondent_group(e).then((t=>{this.remove_corresp_group_store_data(e);return t}))}))},remove_corresp_group_store_data(e){const t=this.correspondent_groups.findIndex((t=>t.id===e));this.correspondent_groups.splice(t,1)},get_correspondent_groups(e){return C(this,void 0,void 0,(function*(){const t=yield s.U2.get_correspondent_group(e).then((e=>e));return t}))},add_corresp_to_store_data(e,t,i){const o=this.correspondent_groups.findIndex((t=>t.id===e));this.correspondent_groups[o].correspondents.push({id:t,name:i})},remove_corresp_from_group_store_data(e,t){const i=this.correspondent_groups.findIndex((t=>t.id===e)),o=this.correspondent_groups[i].correspondents.findIndex((e=>e.id===t));o>-1&&this.correspondent_groups[i].correspondents.splice(o,1)},create_correspondent_group(e){return C(this,void 0,void 0,(function*(){yield s.U2.create_correspondent_group(e).then((e=>{const t=e;this.setGroups(t.group)}))}))}}});var O=i(65536),E=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const S={id:"",label:"/",children:[],children_ids:[],saved:0};(0,o.Q_)("alfred_store_store",{state:()=>({current_store:{},stores:[],folders:{},root_folder:S,current_folder:S,store_type:"google_drive",saved_folders:[]}),getters:{getStoreType:e=>e.store_type,getCurrentStore:e=>e.current_store,getCurrentFolder:e=>e.current_folder,getCurrentFolderFolders:e=>{const t=[];return e.current_folder.children.forEach((i=>{void 0!==e.folders[i]&&t.push(e.folders[i])})),t},getRootFolder:e=>e.root_folder,getRootFolderData:e=>{const t=[];return e.root_folder.children.forEach((i=>{void 0!==e.folders[i]&&t.push(e.folders[i])})),t}},actions:{prepareData(){return E(this,void 0,void 0,(function*(){yield this.getStores(),null!=this.current_store&&(yield this.loadStoreContent(this.current_store.id),this.setStoreType(this.current_store.type))}))},getStores(){return E(this,void 0,void 0,(function*(){this.stores=[];yield s.wk.getAccessableStores().then((e=>{e.exports.forEach(((e,t)=>{this.stores.push(e)}))})).catch((e=>{throw e}))}))},get_paths_for_org(){s.wk.get_paths_for_org().then((e=>{e.paths.forEach((e=>{const t={folder_id:e.path_id,store_id:e.store_id,id:e.id};this.saved_folders.push(t)}))}))},loadStoreContent(e){return E(this,void 0,void 0,(function*(){this.folders={},this.get_paths_for_org(),yield s.n6.getFolders(e).then((e=>{const t=[],i=[];e.folders.forEach((e=>{i.push(e.id)})),e.folders.forEach((e=>{t.push(e.id)})),e.folders.forEach((e=>{this.saved_folders.forEach((t=>{if(e.id==t.folder_id){const t={id:e.id,label:e.label,children:[],children_ids:[],saved:1};this.folders[t.id]=t}else{const t={id:e.id,label:e.label,children:[],children_ids:[],saved:0};this.folders[t.id]=t}}))})),this.current_folder=this.root_folder})).catch((e=>{throw e}))}))},uploadFiletoGDrive(e,t,i){return E(this,void 0,void 0,(function*(){yield s.n6.uploadFiletoGDrive(e,t,i).catch((e=>{throw e}))}))},updateStore(e,t,i){return E(this,void 0,void 0,(function*(){yield s.wk.updateStore(e,t,i).catch((e=>{throw e}))}))},deleteStore(e){s.wk.deleteStore(e).catch((e=>{throw e}))},setStoreType(e){this.store_type=e},setFolder(e){this.current_folder=e}}})},65536:(e,t,i)=>{"use strict";i.d(t,{p:()=>n});var o=i(10321),s=i(64252),a=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const l={path:"/",id:"root",files:[],folders:[],label:"/"},n=(0,o.Q_)("doc2light_space_store",{state:()=>({files:{},folders:{},current_folder:l,root_folder:l,store_type:""}),getters:{getStoreType:e=>e.store_type,getCurrentFolder:e=>e.current_folder,getCurrentFolderFolders:e=>{const t=[];return e.current_folder.folders.forEach((i=>{void 0!==e.folders[i]&&t.push(e.folders[i])})),t},getCurrentFolderFiles:e=>{const t=[];return e.current_folder.files.forEach((i=>{void 0!==e.files[i]&&t.push(e.files[i])})),t},getRootFolder:e=>l,getRootFolderData:e=>{const t=[];return e.root_folder.folders.forEach((i=>{void 0!==e.folders[i]&&t.push(e.folders[i])})),t}},actions:{getFileById(e){return this.files[e]},getFolderById(e){return this.folders[e]},loadStoreContent(e){return a(this,void 0,void 0,(function*(){this.files={},this.folders={},yield s.n6.getStoreFiles("",e).then((e=>{this.store_type=e.store;const t=[],i=[];e.files.forEach((e=>{this.files[e.id]=e,t.push(e.id)})),e.folders.forEach((e=>{i.push(e.id)})),e.folders.forEach((e=>{var o;const s={id:e.id,path:e.path,label:e.label,files:[],folders:[]};null===(o=e.children)||void 0===o||o.forEach((e=>{var o,a;t.includes(e)?null===(o=s.files)||void 0===o||o.push(e):i.includes(e)&&(null===(a=s.folders)||void 0===a||a.push(e))})),this.folders[s.id]=s})),this.set_root_files(),this.current_folder=this.root_folder})).catch((e=>{throw e}))}))},setFolder(e){this.current_folder=e},set_root_files(){this.root_folder.files=[],this.root_folder.folders=[],Object.values(this.files).forEach((e=>{null===this.root_folder.files&&(this.root_folder.files=[]),-1==e.path.search("/.+/")&&this.root_folder.files.push(e.id)})),Object.values(this.folders).forEach((e=>{null===this.root_folder.folders&&(this.root_folder.folders=[]),-1==e.path.search("/.+/")&&this.root_folder.folders.push(e.id)}))},downloadFileFromSpace(e,t){return a(this,void 0,void 0,(function*(){return yield s.n6.downloadFileFromSpace(e,t,this.store_type).then((e=>e)).catch((e=>{throw e}))}))},importSpaceFileToAlfred(e,t){return a(this,void 0,void 0,(function*(){yield s.n6.importSpaceFileToAlfred(e,t,this.store_type).catch((e=>{throw e}))}))},uploadFiletoSpace(e,t,i,o,l){return a(this,void 0,void 0,(function*(){yield s.n6.uploadFiletoSpace(e,t,i,l,o).catch((e=>{throw e}))}))}}})},49609:(e,t,i)=>{"use strict";i.d(t,{I:()=>c,i:()=>u});var o=i(3340),s=i(80579),a=i(60727),l=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const n=(0,a.nc)();class r{constructor(){}getMask(e=""){try{return String(o.Z.methods.convertPYDateFormatToMask(e))}catch(t){return""}}getFormat(e=""){try{return String(o.Z.methods.convertPYDateFormatToJS(e))}catch(t){return""}}format(e=""){return l(this,void 0,void 0,(function*(){try{const t=n.getDocDateFormat(),i=n.getDocLocale(),o=yield s.vy.format(e,i,t);return!1===o.data.success?"":String(o.data.formatted_value)}catch(t){return""}}))}}class d{constructor(){}format(e=""){let t=e;try{t=String(t.toUpperCase())}catch(i){}return t}}const c=new r,u=new d},85828:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o=i(91777);const s={mixins:[o.Z],methods:{getLowerConfidence(e){if(e.confidence&&e.score){let t=e.confidence<1?(100*e.confidence.toFixed(2)).toFixed(0):e.confidence.toFixed(2),i=e.score<=1?(100*e.score.toFixed(2)).toFixed(0):e.score.toFixed(2);return t=Number(t),i=Math.floor(Number(i)),t<i?t:i}return e.confidence?e.confidence<1?(100*e.confidence.toFixed(2)).toFixed(0):e.confidence.toFixed(2):null},getInputFieldWidth(e){return e.displayLabelOnLeft?100-+e.labelWidth:100}}}},84815:(e,t,i)=>{"use strict";i.d(t,{V:()=>o});const o={getDetailViewRoute(e){let t="";try{t="/manage_layout_builder/"+e.doc_type_key,e.layout_template_id&&(t+="/"+e.layout_template_id),e.sub_doc_type_key&&(t+="?sub_doc_type="+e.sub_doc_type_key)}catch(i){}return t}}},25740:(e,t,i)=>{"use strict";i.d(t,{G:()=>d});var o=i(10321),s=i(30052),a=i.n(s),l=i(64252),n=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const r={id:"",label:"/",children:[],children_ids:[],saved:0},d=(0,o.Q_)("scanner_store",{state:()=>({valid_url:"https://local.polydocs.io:",scanners:[],file:"",filedata:{},pager:{},page_count:0,current_carousel_name:"store",carousel_names:["store","scan","documents"],folder_selection:!0,new_scan:{},showDownloadInstallerButton:!1,showDragDrop:!0,showSplitButton:!1,no_store:!0,loading:!1,showPulsating:!0,current_store:{},stores:[],shown_folders:{},folders:{},documents:[],saved_folders:[],root_folder:r,current_folder:{},current_folder_url:"",store_type:"google_drive",oauthToken:null}),getters:{getShowDownloadInstallerButton:e=>e.showDownloadInstallerButton,getScannersfromStore:e=>e.scanners,getFiledata:e=>e.filedata,getFile:e=>e.file,getUrl:e=>e.valid_url,getCurrentStore:e=>e.current_store,getCurrentFolder:e=>e.current_folder,getTableDocuments:e=>e.documents,getPageCount:e=>e.page_count,getBackDisable:e=>e.page_count>0,getNextDisable:e=>e.page_count<2,getCarouselName:e=>e.current_carousel_name},actions:{subtractPage(){this.page_count=this.getPageCount-1,this.current_carousel_name=this.carousel_names[this.getPageCount]},addPage(){this.page_count=this.getPageCount+1,this.current_carousel_name=this.carousel_names[this.getPageCount]},getStore(){return n(this,void 0,void 0,(function*(){yield l.wk.getOrgStore().then((e=>{1==e.success&&(this.oauthToken=e.store.access_token,this.current_carousel_name="scan",this.current_store=e.store)})).catch((e=>{throw this.current_store={},e}))}))},checkAlfred(e){return n(this,void 0,void 0,(function*(){try{yield a().get(e+"12500/"),yield this.getScanners(e+"12500/")}catch(t){try{yield a().get(e+"12154/"),yield this.getScanners(e+"12154/")}catch(t){try{yield a().get(e+"12346/"),yield this.getScanners(e+"12346/")}catch(t){this.showDownloadInstallerButton=!0}}}}))},callScanners(e){return n(this,void 0,void 0,(function*(){"https://local.polydocs.io:"===e?this.checkAlfred(this.valid_url):this.showDownloadInstallerButton=!1,this.valid_url=e;const t=yield a().get(e+"scanners");if(1!=t.data.success)throw"No scanners found";this.scanners=[],t.data.scanners.forEach((e=>{this.scanners.push({value:e["Host"],label:e["Device"]})}))}))},getScanners(e){return n(this,void 0,void 0,(function*(){yield this.callScanners(e),yield this.callScanners(e),yield this.callScanners(e)}))},doScan(){return n(this,void 0,void 0,(function*(){this.showSplitButton=!1;let e=this.valid_url+"scan?host="+this.new_scan["source"]["value"];1==this.new_scan["automatic_get"]?e+="&source=adf":e+="&source=platen",""!=this.new_scan["pixel_type"]["value"]&&(e=e+"&color="+this.new_scan["pixel_type"]["value"]),""!=this.new_scan["2_sided"]&&(e=e+"&duplex_input="+this.new_scan["2_sided"]);yield a().get(e,{responseType:"blob"}).then((e=>(this.file=URL.createObjectURL(e.data),this.new_scan["automatic_get"]&&(this.showSplitButton=!0),this.filedata=e.data,this.showDragDrop=!1,{message:"TEST"}))).catch((e=>({message:"Something failed"})))}))},uploadFiles(e){return n(this,void 0,void 0,(function*(){for(const i in e)try{const t=new FormData,o=e[i];t.append("file",o),yield l.zU.ocr_upload_to_store(this.new_scan["name"],this.current_folder.id,this.current_store.id,o,this.new_scan["auto_doc_name"])}catch(t){}""!=this.current_folder_url&&window.open(this.current_folder_url,"_blank")}))},uploadSingleFile(){return n(this,void 0,void 0,(function*(){try{yield l.zU.ocr_upload_to_store(this.new_scan["name"],this.current_folder.id,this.current_store.id,this.filedata,this.new_scan["auto_doc_name"]),""!=this.current_folder_url&&window.open(this.current_folder_url,"_blank")}catch(e){}}))},uploadSplitOcr(e,t,i){return n(this,void 0,void 0,(function*(){try{yield l.zU.split_ocr_and_upload_to_store(this.new_scan["name"],this.current_folder.id,this.current_store.id,this.filedata,this.new_scan["auto_doc_name"],e,t,i),""!=this.current_folder_url&&window.open(this.current_folder_url,"_blank")}catch(o){}}))},setShowInstaller(){this.showDownloadInstallerButton,this.showDownloadInstallerButton},prepareData(){return n(this,void 0,void 0,(function*(){yield this.getStore(),null!=this.current_store&&"google_drive"!=this.store_type&&(yield this.loadStoreContent(this.current_store.id)),this.get_paths_for_org()}))},loadTableDocuments(){return n(this,void 0,void 0,(function*(){yield l.zU.get_directscan_documents().then((e=>{e.documents.forEach((e=>{this.documents.push(e)}))})).catch((e=>{}))}))},loadStoreContent(e){return n(this,void 0,void 0,(function*(){this.folders={},yield l.n6.getFolders(e).then((e=>{const t=[],i=[];e.folders.forEach((e=>{i.push(e.id)})),e.folders.forEach((e=>{t.push(e.id)})),e.folders.forEach((e=>{const t={id:e.id,label:e.label,children:[],children_ids:[],saved:0};this.folders[t.id]=t})),this.shown_folders=this.folders,this.current_folder=this.root_folder})).catch((e=>{throw e}))}))},init_auth(e,t){return n(this,void 0,void 0,(function*(){yield l.wk.init_auth(e,t).then((e=>{window.open(e.url,"_blank")})).catch((e=>{throw e}))}))},deleteStore(e){l.wk.deleteStore(e).then((e=>{this.current_store={}})).catch((e=>{throw e}))},setStoreType(e){this.store_type=e},setFolder(e){this.saved_folders.forEach((t=>{e.id==t.folder_id&&(e.saved=1)})),this.current_folder=e,this.folder_selection=!1},get_paths_for_org(){this.saved_folders=[],l.wk.get_paths_for_org().then((e=>{e.paths.forEach((e=>{const t={label:e.path_name,folder_id:e.path_id,store_id:e.store,id:e.id};this.saved_folders.push(t)}))}))},filterFolders(e){""!=e?(this.shown_folders={},Object.values(this.folders).forEach((t=>{t.label.toUpperCase().includes(e.toUpperCase())&&(this.shown_folders[t.id]=t)}))):this.shown_folders=this.folders},saveFolder(e,t){return l.wk.saveFolder(this.current_store.id,e,t)},removeFolder(e){return l.wk.removeFolder(this.current_store.id,e)}}})},62753:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var o=i(54268);const s="+49 176 1122209";var a=i(41914),l=i(77378);const n={methods:{help_center(){window.open(o.hi.support_ticket)},call_us(){window.open(o.hi.support_ticket)},get_call_us_support_no(){return s},copyText(){const e=this.get_call_us_support_no();e.trim().length>0&&(0,a.Z)(e).then((()=>{l.Z.methods.showSuccessToast("Copied!")}))}}}},55276:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const o={methods:{getColor(e){const t=10,i=e/t,o=100,s=((1-i)*o).toString(10);return["hsl(",s,",100%,70%)"].join("")}}}},93426:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var o=i(53371),s=i(77378),a=i(80579),l=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const n={methods:{getConversionFields(){return["net_amount","tax_amount","tax_rate","net_amount_2","tax_amount_2","tax_rate_2","net_amount_3","tax_amount_3","tax_rate_3"]},convertToUSValue(e){return e.replace(/,/g,".")},convertToDeValue(e){return e.toString().replace(/\./g,",")},normalizeLocale(e){return e?e.toLowerCase().replace("_","-"):e},convertPOValuePerLocale(e,t){const i=this.normalizeLocale(e);return t=t?t.replace(",","."):t,Number(parseFloat(t)).toLocaleString(i,{minimumFractionDigits:2,maximumFractionDigits:2})},isValidAmount(e){e=e.replace(/\s/g,"");const t=/^[0-9.,]+$/;return!!t.test(e)},convertValueAccordingToLocale(e,t,i){return l(this,void 0,void 0,(function*(){let l;try{l=yield a.C$.convertValueAccordingToLocale(e,t,i)}catch(n){s.Z.methods.showErrorToast(o.i18n.t("pages.messages.ERROR_INTERNAL_OCCUR"))}if(l)return l}))}}}},85944:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const o={"#":{pattern:"[\\d]"}},s=Object.keys(o);s.forEach((e=>{o[e].regex=new RegExp(o[e].pattern)}));const a={methods:{isDateMatchMask(e,t){if(void 0===e||null===e||""===e)return!1;let i=!0,s=0;for(let a=0;a<t.length;a++){const l=t[a],n=e[s];if("string"===typeof l&&n===l){s++;continue}const r=o[l];if(!r||!r.hasOwnProperty("regex")||!r.regex.test(n)){i=!1;break}s++}return i},formatDate(e){const t=new Date(e);let i=""+(t.getMonth()+1),o=""+t.getDate();const s=t.getFullYear();return i.length<2&&(i="0"+i),o.length<2&&(o="0"+o),[s,i,o].join("-")}}}},84474:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o=i(60727);const s={methods:{getDocTypeSubDocType(e){const t=(0,o.At)(),{doc_types_sub_types_list:i}=t,s=i.filter((t=>t.value===e));if(s&&Array.isArray(s)&&0!=s.length&&s[0].hasOwnProperty("doc_type_key")&&""!=s[0].doc_type_key)return{doc_type_key:s[0].doc_type_key,sub_doc_type:e}}}}},12699:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Az:()=>polydocs,RY:()=>version_link,Rg:()=>getLink,hA:()=>po_help_link,ny:()=>settings_users,oi:()=>polydocs_contact});var quasar_src_plugins_LocalStorage_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(80589);const po_matching_link="https://docs.cloudintegration.eu/docs/doc2app/po-matching/",settings_document_types_de="https://docbits.com/de/doc/einstellungen/dokumenttypen/",settings_document_types_en="https://docbits.com/doc/settings/document-types/",version_link="https://docs.fellowpro.com/Release/Release_notes/",polydocs="https://fellowpro.com",settings_users="https://docs.cloudintegration.eu/docs/doc2app/settings-users/",polydocs_contact="https://polydocs.io/contact/",list_of_values_de="https://docbits.com/de/doc/einstellungen/list-of-values/",list_of_values_en="https://docbits.com/doc/settings/list-of-values/",modules="https://docbits.com/doc/settings/modules/",dashboard_de="https://docbits.com/de/dashboard/",dashboard_en="https://docbits.com/beginner-course-dashboard/",ocr_settings_en="https://docbits.com/doc/document-validation/ocr-view/",ocr_settings_de="https://docbits.com/de/doc/dokumentenvalidierung/ocr-ansicht/",classify_extract_settings_general_en="https://docbits.com/doc/document-validation/",classify_extract_settings_general_de="https://docbits.com/de/doc/dokumentenvalidierung/",classify_extract_settings_classification_rules_en="https://docbits.com/doc/table-extraction/",classify_extract_settings_classification_rules_de="https://docbits.com/de/doc/tabellenextraktion/",classify_extract_settings_custom_models_en="https://docbits.com/doc/table-extraction/ai-table-extraction/",classify_extract_settings_custom_models_de="https://docbits.com/de/doc/tabellenextraktion/ki-tabellenextraktion/",integration_en="https://docbits.com/doc/settings/integration/",integration_de="https://docbits.com/de/doc/einstellungen/integration-de/",settings="https://docs.fellowpro.com/DocBits/settings/",api_settings="https://docs.fellowpro.com/DocBits/settings-api/",module_settings="https://docs.fellowpro.com/DocBits/modules/",company_settings="https://docs.fellowpro.com/DocBits/company-information/",user_settings_en="https://docbits.com/doc/settings/groups-users-and-permissions/users/",user_settings_de="https://docbits.com/de/doc/einstellungen/gruppen-benutzer-und-berechtigungen/benutzer/",import_settings_en="https://docbits.com/doc/settings/all-import-options/",import_settings_de="https://docbits.com/de/doc/einstellungen/alle-importoptionen/",report_en="https://docbits.com/beginner-course-report/",report_de="https://docbits.com/de/beginnerkurs-bericht/",export_settings="https://docs.fellowpro.com/DocBits/export/",master_data_settings_de="https://docbits.com/de/doc/dokumentenvalidierung/master-data-validation/",master_data_settings_en="https://docbits.com/doc/document-validation/master-data-validation/",saml_settings="https://docs.cloudintegration.eu/docs/doc2app/settings-sso-settings/",doc_general="",po_help_link="https://docs.fellowpro.com/DocBits/pomatching/po-matching/",settings_company_info_de="https://docbits.com/de/doc/einstellungen/firmeninformationen/",settings_company_info_en="https://docbits.com/doc/settings/company-information/",logic_apps="https://docbits.com/?s=Logic+Apps",doc_status_notifications_de="https://docbits.com/de/doc/einstellungen/e-mail-benachrichtigung/",doc_status_notifications_en="https://docbits.com/doc/settings/email-notification/";function getLink(name){const lang_code=quasar_src_plugins_LocalStorage_js__WEBPACK_IMPORTED_MODULE_0__.Z.getItem("selected_language");let link_name=name;try{return link_name+="de"==lang_code?"_de":"_en",eval(link_name)}catch(error){return eval(name)}}},78564:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const o={methods:{validateEmail(e){const t=/^([A-Za-z0-9_\-.+])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,})$/;return!!t.test(e)},removeClass(e,t){e.classList.remove(t)},addClass(e,t){e.classList.add(t)},stringReplaceWithString(e,t,i){const o=e.split(t).join(i);return o},hasWhiteSpace(e){return/\s/g.test(e)},checkFirstLetterIsSpecialOrNumber(e){const t=/^[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+|^\d/;return t.test(e)},scrollInToViewCenter(e){e&&e.scrollIntoView({behavior:"auto",block:"center",inline:"center"})},scrollInToViewStart(e){e&&e.scrollIntoView({behavior:"smooth",block:"start"})}}}},53198:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const o={methods:{isCombinationKey(e){const t=e.altKey;return Boolean(t)},getCombinationKey(e){if(!e)return"alt";const t=e.altKey;return Boolean(t)?"alt":""},getAddRowKeyCodes(){const e=[107,187];return e}}}},30872:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var o=i(53371),s=i(29938),a=i(60727);const l=(0,a.H_)();let n=!0,r=[],d=[],c=[],u=[],h=[],m=[],p={},_={};const g={methods:{prepareTableLayoutObj(){c=[];const e={};d={},this.initStandardColumns(),l.record.tables&&l.record.tables.length>0&&l.record.tables[0].hasOwnProperty("layout")&&(Array.from(l.record.tables[0].layout).forEach((t=>{e.hasOwnProperty(t.column_name)||0!=t.is_hidden||this.isCustomColumnHidden(t.column_name)||(e[t.column_name]=!0,t["lbl_to_display"]=this.getLabelToDisplay(t),d[t.column_name]=t,this.addStandardColumns(t),c.push({header:t.lbl_to_display,techName:t.column_name}))})),this.sortMappingColumns())},initStandardColumns(){m=[],m.push(Object.assign({},{value:"",label:o.i18n.t("select")})),m.push(Object.assign({},{value:"__trash__",label:o.i18n.t("trash")}))},isCustomColumnHidden(e){let t=!1;if(!h||0==h.length)return t;for(const i of h)if(i===e){t=!0;break}return t},getLabelToDisplay(e){let t=e.title;return o.i18n.t("pages.line_items_columns."+e.translation_key)!=="pages.line_items_columns."+e.translation_key&&(t=o.i18n.t("pages.line_items_columns."+e.translation_key)),t},addStandardColumns(e){m.push(Object.assign({},{value:e.column_name,label:e.column_name}))},sortMappingColumns(){c.length>0&&c.sort((function(e,t){return e.header<t.header?-1:e.header>t.header?1:0}))},addInMapping(e,t){_[t]=Number(e)},hasOriginalIndex(e,t){let i=!1;return""!==e&&(i=!0),i},validateLineItemColumns(){let e=!1;if(l.record["table_has_error"]=!1,void 0===r)return;for(const i of r){const t=this.isColumnNameValid(i);t||(l.record["table_has_error"]=!0,i.error=!0,e=!0)}const t=!e;n!==t&&(n=t)},isColumnNameValid(e){const t=!(!_||null==_||!(0,s.fg)(_));let i=!1;for(const o of c)if(e.name===o.techName){i=!0;break}return i&&t&&!0===this.hasOriginalIndex(e.org_index,e)&&this.addInMapping(e.org_index,e.name),i},setFormatOptions(){p={},l.record.tables&&l.record.tables.length>0&&l.record.tables[0].hasOwnProperty("formatting_options")&&(p=l.record.tables[0].formatting_options),p.hasOwnProperty("mapping")&&null!==p.mapping&&(_=Object.assign({},p.mapping)),p.hasOwnProperty("columns_to_hide")&&null!==p.columns_to_hide&&(u=Object.assign([],p.columns_to_hide)),p.hasOwnProperty("custom_columns_to_hide")&&null!==p.custom_columns_to_hide&&(h=Object.assign([],p.custom_columns_to_hide))},isColumnVisible(e,t){let i=!0;return e&&u&&0!=u.length?((u.includes(e)||"UUID"==t.name)&&(i=!1),i):i},isColumnHidden(e,t){let i="";null!=t.org_index&&void 0!=t.org_index&&(i=String(t.org_index));let o=!0;return""!==i&&(o=this.isColumnVisible(i,t)),""===i&&(o=!this.isCustomColumnHidden(t.name)),o},prepareTableErrors(){this.prepareTableLayoutObj(),this.setFormatOptions(),r=[];const e=[],t=[];let i=!1;const o={};if(l.record.tables&&l.record.tables.length>0&&l.record.tables[0].hasOwnProperty("rows")&&l.record.tables[0].rows.length>0){for(const s of l.record.tables[0].rows){for(const e in s.messages){const t=s.messages[e];if(t.message&&""!=t.message){i=!0;break}}Array.from(s.columns).forEach((i=>{const a=this.isColumnHidden(s,i);if(a&&!o.hasOwnProperty(i.name)){o[i.name]=!0;let s=i.name;d.hasOwnProperty(i.name)&&(s=d[i.name].lbl_to_display);let a="";null!=i.org_index&&void 0!=i.org_index&&(a=String(i.org_index));const l={name:i.name,field:i.name,align:"left",label:s,is_mapped:!!i.is_mapped&&i.is_mapped,org_index:""!==a?a:""};i.hasOwnProperty("org_index")&&null!=i.org_index?t.push(l):e[i.name]=l}}))}if(i)l.record["table_has_error"]=!0;else{for(const i of Object.keys(d))e.hasOwnProperty(i)&&(t.push(Object.assign({},e[i])),delete e[i]);if(e.lenght>0)for(const i of e)t.push(Object.assign({},e[i]));Array.from(t).forEach(((e,t)=>{r.push(Object.assign({},e))})),this.validateLineItemColumns()}}}}}},98381:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const o={methods:{getSAFieldsDef(){const e={ul_g:{type:"textbox",coordinates:"0.019938650306748466,0.4453227931488801,0.12269938650306748,0.4888010540184453"},ul_f:{type:"textbox",coordinates:"0.02147239263803681,0.5032938076416338,0.12269938650306748,0.5401844532279315"},ul_e:{type:"textbox",coordinates:"0.019938650306748466,0.5599472990777339,0.12423312883435583,0.6034255599472991"},ul_d:{type:"textbox",coordinates:"0.01687116564417178,0.6245059288537549,0.12269938650306748,0.6521739130434783"},ul_c:{type:"textbox",coordinates:"0.018404907975460124,0.6640316205533597,0.12423312883435583,0.7022397891963109"},ul_b1:{type:"textbox",coordinates:"0.019938650306748466,0.7167325428194994,0.12576687116564417,0.758893280632411"},ul_b:{type:"textbox",coordinates:"0.01687116564417178,0.7733860342555995,0.12269938650306748,0.8063241106719368"},ul_y:{type:"textbox",coordinates:"0.018404907975460124,0.8168642951251647,0.12423312883435583,0.847167325428195"},ul_a:{type:"textbox",coordinates:"0.018404907975460124,0.8537549407114624,0.12576687116564417,0.8880105401844532"},l_la_a:{type:"textbox",coordinates:"0.018666666666666668,0.9003359462486002,0.12533333333333332,0.93505039193729"},l_la_z:{type:"textbox",coordinates:"0.018666666666666668,0.948488241881299,0.12533333333333332,0.9832026875699889"},ur_t:{type:"textbox",coordinates:"0.6831144555214724,0.22793148880105402,0.7699386503067485,0.25823451910408435"},ur_h:{type:"textbox",coordinates:"0.6846481978527608,0.27140974967061926,0.7730061349693251,0.30171277997364954"},ur_k:{type:"textbox",coordinates:"0.6794478527607362,0.40843214756258234,0.7638036809815951,0.4426877470355731"},ur_g:{type:"textbox",coordinates:"0.6794478527607362,0.45454545454545453,0.7668711656441718,0.4874835309617918"},ur_f:{type:"textbox",coordinates:"0.6779141104294478,0.5046113306982872,0.7668711656441718,0.5362318840579711"},ur_e:{type:"textbox",coordinates:"0.6794478527607362,0.5638998682476943,0.7668711656441718,0.6007905138339921"},ur_d:{type:"textbox",coordinates:"0.6779141104294478,0.6231884057971014,0.7684049079754601,0.6521739130434783"},ur_c:{type:"textbox",coordinates:"0.6809815950920245,0.6640316205533597,0.7699386503067485,0.696969696969697"},ur_b1:{type:"textbox",coordinates:"0.6809815950920245,0.7193675889328063,0.7699386503067485,0.7562582345191041"},ur_b:{type:"textbox",coordinates:"0.6809815950920245,0.7720685111989459,0.7714723926380368,0.8010540184453228"},ur_y:{type:"textbox",coordinates:"0.6794478527607362,0.8155467720685112,0.7684049079754601,0.8432147562582345"},ur_a:{type:"textbox",coordinates:"0.6809815950920245,0.855072463768116,0.7684049079754601,0.8840579710144928"},r_la_a:{type:"textbox",coordinates:"0.6807980049875312,0.8956916099773242,0.7680798004987531,0.9328054138321995"},r_la_z:{type:"textbox",coordinates:"0.6845386533665836,0.9455782312925171,0.7718204488778054,0.9804244614512472"},la_htv:{type:"textbox",coordinates:"0.8819018404907976,0.11725955204216074,0.9739263803680982,0.14888010540184454"},la_hth:{type:"textbox",coordinates:"0.8895705521472392,0.17786561264822134,0.9754601226993865,0.20816864295125165"},la_t:{type:"textbox",coordinates:"0.8880368098159509,0.22924901185770752,0.9739263803680982,0.2608695652173913"},la_h:{type:"textbox",coordinates:"0.8911042944785276,0.2779973649538867,0.9754601226993865,0.3069828722002635"},la_g:{type:"textbox",coordinates:"0.8880368098159509,0.45718050065876153,0.9769938650306749,0.4888010540184453"},la_f:{type:"textbox",coordinates:"0.8871021855828221,0.5032938076416338,0.9769938650306749,0.5362318840579711"},la_e:{type:"textbox",coordinates:"0.8871021855828221,0.5625823451910409,0.9769938650306749,0.5955204216073782"},la_d:{type:"textbox",coordinates:"0.8865030674846626,0.6231884057971014,0.9754601226993865,0.6534914361001317"},la_c:{type:"textbox",coordinates:"0.8886359279141104,0.6640316205533597,0.9769938650306749,0.7009222661396575"},la_b1:{type:"textbox",coordinates:"0.8880368098159509,0.7180500658761528,0.9785276073619632,0.7562582345191041"},la_b:{type:"textbox",coordinates:"0.8865030674846626,0.7707509881422925,0.9769938650306749,0.8050065876152833"},la_a:{type:"textbox",coordinates:"0.8865030674846626,0.8985507246376812,0.9769938650306749,0.930171277997365"},la_z:{type:"textbox",coordinates:"0.8880368098159509,0.9472990777338604,0.9785276073619632,0.9802371541501976"}};return e},getSAFields(){const e=["ul_g","ul_f","ul_e","ul_d","ul_c","ul_b1","ul_b","ul_y","ul_a","l_la_a","l_la_z","ur_t","ur_h","ur_k","ur_g","ur_f","ur_e","ur_d","ur_c","ur_b1","ur_b","ur_y","ur_a","r_la_a","r_la_z","la_htv","la_hth","la_t","la_h","la_g","la_f","la_e","la_d","la_c","la_b1","la_b","la_a","la_z"];return e},getArticleNumberfields(){const e=["fusslange_o_checkbox","fusslange_m_checkbox","farbe","tbp_checkbox","tbb_checkbox","tbe_checkbox","tbs_checkbox","trk_checkbox","mfb_checkbox","nob_checkbox","nom_checkbox","seb_checkbox","trk_2_checkbox","l_checkbox","me_1","me_2","me_3","me_ad","me_af","me_ag","me_at","me_atu","me_ath","mp_1","mp_2","mp_3","mp_ad","mp_af","mp_ag","mp_at","mp_atu","mp_ath","mc_1","mc_2","mc_3","mc_ad","mc_af","mc_ag","mc_at","mc_atu","mc_ath","mf_1","mf_2","mf_3","mf_ad","mf_af","mf_ag","mf_at","mf_atu","mf_ath"];return e},getFuzzyFields(){const e={customer_number:{fuzzy_field:"supplier:supplier_name"},absender:{fuzzy_field:"supplier:zip_code"},inhaber:{fuzzy_field:"supplier:supplier_number"},adresse:{fuzzy_field:"supplier:adresse"},telefon:{fuzzy_field:"supplier:town_city"}};return e},getMabeFields(){const e=[["vorn","","","vorn","la_htv"],["hinten","","ur_t","hinten","la_hth"],["lT","","ur_h","lT","la_t"],["hT","","ur_k","hT","la_h"],["cG","ul_g","ur_g","cG","la_g"],["cF","ul_f","ur_f","cF","la_f"],["cE","ul_e","ur_e","cE","la_e"],["cD","ul_d","ur_d","cD","la_d"],["cC","ul_c","ur_c","cC","la_c"],["cB1","ul_b1","ur_b1","cB1","la_b1"],["cB","ul_b","ur_b","cB","la_b"],["cY","ul_y","ur_y","cY",""],["cA","ul_a","ur_a","cA",""],["lA","l_la_a","r_la_a","lA","la_a"],["lZ","l_la_z","r_la_z","lZ","la_z"]];return e},getFieldsMeta(){return[{name:"ma_1",type:"checkbox",is_readonly:!1},{name:"ma_2",type:"checkbox",is_readonly:!1},{name:"ma_3",type:"checkbox",is_readonly:!0},{name:"ma_ad",type:"checkbox",is_readonly:!1},{name:"ma_af",type:"checkbox",is_readonly:!0},{name:"ma_ag",type:"checkbox",is_readonly:!0},{name:"ma_atu",type:"checkbox",is_readonly:!0},{name:"ma_at",type:"checkbox",is_readonly:!0},{name:"ma_ath",type:"checkbox",is_readonly:!0},{name:"db_1",type:"checkbox",is_readonly:!1},{name:"db_2",type:"checkbox",is_readonly:!1},{name:"db_3",type:"checkbox",is_readonly:!0},{name:"db_ad",type:"checkbox",is_readonly:!1},{name:"db_af",type:"checkbox",is_readonly:!0},{name:"db_ag",type:"checkbox",is_readonly:!1},{name:"db_atu",type:"checkbox",is_readonly:!1},{name:"db_at",type:"checkbox",is_readonly:!1},{name:"db_ath",type:"checkbox",is_readonly:!0},{name:"mm_1",type:"checkbox",is_readonly:!1},{name:"mm_2",type:"checkbox",is_readonly:!1},{name:"mm_3",type:"checkbox",is_readonly:!0},{name:"mm_ad",type:"checkbox",is_readonly:!1},{name:"mm_af",type:"checkbox",is_readonly:!0},{name:"mm_ag",type:"checkbox",is_readonly:!1},{name:"mm_atu",type:"checkbox",is_readonly:!1},{name:"mm_at",type:"checkbox",is_readonly:!1},{name:"mm_ath",type:"checkbox",is_readonly:!0},{name:"stbb_checkbox",type:"checkbox",is_readonly:!1,translation_key:"stbb_checkbox"},{name:"snob_checkbox",type:"checkbox",is_readonly:!1,translation_key:"snob_checkbox"},{name:"mm_nob_checkbox",type:"checkbox",is_readonly:!1,translation_key:"mm_nob_checkbox"},{name:"mm_spb_checkbox",type:"checkbox",is_readonly:!1,translation_key:"mm_spb_checkbox"},{name:"mbs_checkbox",type:"checkbox",is_readonly:!1,translation_key:"mbs_checkbox"},{name:"fbr_checkbox",type:"checkbox",is_readonly:!1,translation_key:"fbr_checkbox"},{name:"mm_snob_checkbox",type:"checkbox",is_readonly:!1,translation_key:"mm_snob_checkbox"}]},getAllMediFields(){const e=["customer_number","versandanschrift","absender","datum","inhaber","komission","adresse","menge","telefon","fusslange_o","fusslange_m","farbe","hohe","taille","sonderwunsche","la_htv","la_hth","la_t","la_h","ul_g","ur_g","la_g","ul_f","ur_f","la_f","ul_e","ur_e","la_e","ul_d","ur_d","la_d","ul_c","ur_c","la_c","ul_b1","ur_b1","la_b1","ul_b","ur_b","la_b","ul_y","ur_y","ul_a","ur_a","l_la_a","r_la_a","la_a","l_la_z","r_la_z","la_z"];return e}}}},52828:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var o=i(54268),s=i(30052),a=i.n(s),l=i(29938),n=i(60727),r=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const d={methods:{getWorkflowSettings(){return r(this,void 0,void 0,(function*(){try{const e=(0,n.ZO)();if(!e.hasAppsSubscription)return{success:!1,message:"no_subscribed"};const t=yield this.getSettingsFromWorkflowServer();return!0===t.active&&!0===t.ready&&(t.message="ready"),!0===t.active&&!1===t.ready&&(t.message="in_progress"),!1===t.active&&!1===t.ready&&(t.message="new"),t}catch(e){this.handleN8NErrors(e)}return{success:!1,message:"new"}}))},handleN8NErrors(e){let t="";throw null!=e&&"object"==typeof e&&e.hasOwnProperty("message")&&(t=e.message),e&&e.response&&e.response.data&&(e.response.data.hasOwnProperty("message")&&(t=e.response.data.message),e.response.data.hasOwnProperty("error_description")&&(t=e.response.data.error_description),403===e.response.status&&(t=e.response.data+". Please contact administrator")),{success:!1,message:t}},subscriptionError(){return"no_subscribed"},getSettingsFromWorkflowServer(){return r(this,void 0,void 0,(function*(){const e=yield(0,o.O_)(),t={app:"workflow"},i=(0,l.XV)(t),s=yield a().get(o.hi.workflow_get_settings+"?"+i,{headers:{Authorization:e}}),n=s.data;if(!n||!n.hasOwnProperty("success")||!n.hasOwnProperty("url")||!n.hasOwnProperty("active")||!n.hasOwnProperty("ready")||!n.hasOwnProperty("subdomain")||!n.hasOwnProperty("password"))throw{error_code:"settings_api_fail"};const r={success:s.data.success,url:s.data.url,active:s.data.active,ready:s.data.ready,subdomain:s.data.subdomain,password:s.data.password};return r}))},triggerNewWorkflowForUser(e){return r(this,void 0,void 0,(function*(){const t=yield(0,o.O_)(),i=yield a().post(o.hi.workflow_actions,{create:e.create.toString(),subdomain_prefix:e.domain_name.toLowerCase()},{headers:{"X-API-KEY":t.replace("Bearer ",""),"Content-Type":"application/json",accept:"application/json"}});if(!0!==i.data.success)throw{message:i.data.message};return!0}))},getN8NerrorMessagesList(){const e={no_subscribed:"You need to have a doc2app subscription to access workflows",workflow_url_not_found:"Url for the workflow is missing. Please contact administrator",workflow_in_progress:"Workflow creation is in-progress. This might take a while"};return e}}}},75933:(e,t,i)=>{"use strict";let o,s,a,l,n,r;i.d(t,{Z:()=>d});const d={methods:{resizableGrid(e){const t=e.getElementsByTagName("tr")[0],i=t?t.children:void 0;if(!i)return;const o=e.offsetHeight;for(let s=0;s<i.length;s++)r=this.createDiv(o),i[s].appendChild(r),i[s].style.position="relative",this.setListeners()},setListeners(){r.addEventListener("mousedown",this.mousedownListener),r.addEventListener("mouseover",(function(e){e.target.style.borderRight="2px solid #c0c0c0"})),r.addEventListener("mouseout",(function(e){e.target.style.borderRight=""})),document.addEventListener("mouseup",this.mouseUpListener)},createDiv(e){const t=document.createElement("div");return t.style.top="0",t.style.right="0",t.style.width="5px",t.style.position="absolute",t.style.cursor="col-resize",t.style.userSelect="none",t.style.height=e+"px",t},paddingDiff(e){if("border-box"==this.getStyleVal(e,"box-sizing"))return 0;const t=this.getStyleVal(e,"padding-left"),i=this.getStyleVal(e,"padding-right");return parseInt(t)+parseInt(i)},getStyleVal(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)},mousedownListener(e){if(s=e.target.parentElement,a=s.nextElementSibling,o=e.pageX,s&&a&&o){const e=this.paddingDiff(s);l=s.offsetWidth-e,a&&(n=a.offsetWidth-e),document.addEventListener("mousemove",this.mouseMoveListener)}},mouseMoveListener(e){if(s){const t=e.pageX-o;a&&t>0&&(a.style.width=n-t+"px",a.style.minWidth=n-t+"px"),s.style.width=l+t+"px",s.style.minWidth=l+t+"px"}},mouseUpListener(e){document.removeEventListener("mousemove",this.mouseMoveListener),s=void 0,a=void 0,o=void 0,n=void 0,l=void 0}}}},30524:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var o=i(80589),s=i(29938),a=i(52828),l=i(28239),n=i(80579),r=i(91949),d=i(54268),c=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const u={"/register":"register-","/":"login-"},h="after_login_route",m={methods:{getStatusByRoute(e){let t="login";return u.hasOwnProperty(e)&&""!==u[e]&&(t=u[e]),t},setAfterLoginRoute(e){!0===e.includes("register")&&this.setAppsAsPath()},setAppsAsPath(){o.Z.set(h,"/apps")},setDashboardAsPath(){o.Z.set(h,"/dashboard")},setScanAsPath(){o.Z.set(h,"/directscan")},getPathFromStorage(){const e=o.Z.getItem(h);let t=e;return o.Z.has(h)&&null!==e&&""!==e||(t="/directscan"),o.Z.remove(h),t},getPathRedirect(){const e="go_to_apps";try{const e=(0,l.$8)("USER_SELECTED_APPS");if((0,s.Jp)(e)||void 0===e||""===e||(0,s.fg)(e))return"go_to_apps";const t=JSON.parse(e);if(!this.isAnyAppSelected(t))throw"go_to_apps";if(this.onlyCurrentAppSelected(t,"doc2scan"))return"go_to_scan";if(this.onlyCurrentAppSelected(t,"doc2"))return"go_to_dashboard";if(this.onlyCurrentAppSelected(t,"workflow"))return"go_to_workflow"}catch(t){}return e},savePath(e){(0,s.Jp)(e)&&this.setAppsAsPath(),"go_to_scan"===e&&this.setScanAsPath(),"go_to_apps"===e&&this.setAppsAsPath(),"go_to_dashboard"===e&&this.setDashboardAsPath()},onlyCurrentAppSelected(e,t){return!(0,s.fg)(e)&&!(!e.hasOwnProperty(t)||!0!==e[t])},isAnyAppSelected(e){if((0,s.fg)(e))return!1;let t=!1;for(const[i,o]of Object.entries(e))!0===o&&(t=!0);return t},isOAuthLoginRoute(e){return"/oauth/login"==e.$route.path},redirectForOAuthLogin(){return c(this,void 0,void 0,(function*(){const e=(yield n.FT.getToken()).replace("Bearer ",""),t=(0,r.Y4)("org_id"),i=d.hi.insight_url+"/sso/polydocs/"+t+"?code="+e;window.open(i)}))},getLoginSource(){const e=o.Z.getItem("login_source");return o.Z.has("login_source")&&null!==e?String(e.toLowerCase()):""},afterLoginRedirect(e){return c(this,void 0,void 0,(function*(){try{this.isOAuthLoginRoute(e)&&this.redirectForOAuthLogin();let t=this.getPathRedirect();if("go_to_workflow"===t){const e=yield a.Z.methods.getWorkflowSettings();if(!(0,s.Jp)(e)&&!0===e.success&&"ready"===e.message&&""!==e.url)return void window.open(e.url,"_self");t="go_to_apps"}const i=this.getLoginSource();"infor"==i&&(t="go_to_dashboard"),this.savePath(t);let o=this.getPathFromStorage();e.$route.hasOwnProperty("query")&&e.$route.query.hasOwnProperty("redirect")&&(o=e.$route.query.redirect),e.$router.push(o)}catch(t){this.setAppsAsPath()}}))},getSelectedApps(){const e=(0,l.$8)("USER_SELECTED_APPS");return(0,s.Jp)(e)||void 0===e||""===e||(0,s.fg)(e)?{}:JSON.parse(e)},saveSelectedAppsInPreference(e,t){return c(this,void 0,void 0,(function*(){try{const i=this.getSelectedApps();i[e]=t;const o="USER_SELECTED_APPS",s=JSON.stringify(i);yield(0,l.AF)(o,s),(0,l.vq)(o,s)}catch(i){throw i}}))}}}},93622:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const o={methods:{removeSpaces(e){return e.replace(/\s+/g,"")}}}},63307:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const o={methods:{getCalculatorFieldsDef(){const e={};return e["net_amount"]={calculator:!0,calculator_formula:this.generateFormulaForNetAmount("")},e["tax_amount"]={calculator:!0,calculator_formula:this.generateFormulaForTaxAmount("")},e["tax_rate"]={calculator:!0,calculator_formula:this.generateFormulaForTaxRate("")},e["net_amount_2"]={calculator:!0,calculator_formula:this.generateFormulaForNetAmount("_2")},e["tax_amount_2"]={calculator:!0,calculator_formula:this.generateFormulaForTaxAmount("_2")},e["tax_rate_2"]={calculator:!0,calculator_formula:this.generateFormulaForTaxRate("_2")},e},generateFormulaForNetAmount(e){return"[tax_amount"+e+"] * 100 / [tax_rate"+e+"]"},generateFormulaForTaxAmount(e){return"[net_amount"+e+"] * [tax_rate"+e+"] / 100"},generateFormulaForTaxRate(e){return"[tax_amount"+e+"] * 100 / [net_amount"+e+"]"}}}},89657:(e,t,i)=>{"use strict";function o(e){let t=!0;try{new RegExp(e)}catch(i){t=!1}return t}function s(e){const t=e.replace(/[^\d]/g,"");return t}function a(e){let t=!0;try{const i=/^[0-9,.]+$/;if(!i.test(e))return void(t=!1)}catch(i){t=!1}return t}i.d(t,{bI:()=>s,hz:()=>a,nc:()=>o})},26424:(e,t,i)=>{"use strict";i.d(t,{b:()=>m});var o=i(68925),s=i(29474),a=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};class l{constructor(){this.field_model=[],this.field_config_model=[],this.field_name="",this.mixins=Object.assign(o.Z.methods,s.Z.methods)}init(e,t){return a(this,void 0,void 0,(function*(){return this.field_model=e,this.field_config_model=t,this.field_name=this.field_model.name,yield this.validate()}))}validate(){return a(this,void 0,void 0,(function*(){const e={is_valid:!1,input_error:""};return Promise.resolve(e)}))}getFieldType(){return this.field_config_model&&this.field_config_model.field_type?String(this.field_config_model.field_type.toLowerCase()):""}}var n=i(49609),r=i(29938),d=i(60727),c=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const u=(0,d.wr)();(0,d.nc)();class h extends l{validate(){return c(this,void 0,void 0,(function*(){let e=!0,t="";const i=this.field_model.formatted_value;if(!i||""==i)return Promise.resolve({is_valid:e,input_error:t});const o=this.getFieldType();switch(o){case"date":const o=yield n.I.format(i);""!=o&&null!=o||(e=!1,t="invalid_input_date");break;case"amount":({is_valid:e,input_error:t}=yield this.mixins.validateAmount(i));break}return e&&(this.field_config_model.enforce_list_of_values&&({is_valid:e,input_error:t}=yield this.mixins.validateListOfValues(i,u.getListOfValues(this.field_config_model.list_of_values))),this.mixins.isInt(this.field_config_model.length)&&({is_valid:e,input_error:t}=yield this.mixins.validateFieldLength(i,this.field_config_model.length)),(0,r.ke)(this.field_config_model.banned_keywords)||({is_valid:e,input_error:t}=yield this.mixins.validateBannedKeywords(i,this.field_config_model.banned_keywords))),Promise.resolve({is_valid:e,input_error:t})}))}}const m=new h},68925:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const o={"#":{pattern:"[\\d]"}},s=Object.keys(o);s.forEach((e=>{o[e].regex=new RegExp(o[e].pattern)}));const a={amount:function(e){e=e.replace(/\s/g,"");const t=/^-?[0-9.,]+$/;return Promise.resolve(t.test(e))},date_with_mask(e,t){if(void 0===e||null===e||""===e)return!1;let i=!0,s=0;for(let a=0;a<t.length;a++){const l=t[a],n=e[s];if("string"===typeof l&&n===l){s++;continue}const r=o[l];if(!r||!r.hasOwnProperty("regex")||!r.regex.test(n)){i=!1;break}s++}return Promise.resolve(i)}};var l=i(53371),n=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const r={methods:{validateDate(e,t){return n(this,void 0,void 0,(function*(){const i=yield a.date_with_mask(e,t);return{is_valid:i,input_error:"invalid_input_date"}}))},validateAmount(e){return n(this,void 0,void 0,(function*(){const t=yield a.amount(e);return{is_valid:t,input_error:"invalid_input_amount"}}))},validateListOfValues(e,t){return n(this,void 0,void 0,(function*(){const i={is_valid:!0,input_error:"invalid_input_list_of_value"};if(!Array.isArray(t)||0==t.length)return Promise.resolve(i);const o=t.filter((t=>t.includes(e)));return 0==o.length&&(i["is_valid"]=!1),Promise.resolve(i)}))},validateFieldLength(e,t){return n(this,void 0,void 0,(function*(){const i={is_valid:!0,input_error:"invalid_field_length"};return 0!==Number(t)&&e.length!==Number(t)&&(i["is_valid"]=!1),Promise.resolve(i)}))},validateBannedKeywords(e,t){return n(this,void 0,void 0,(function*(){const i={is_valid:!0,input_error:l.i18n.t("banned_keyword_error")};try{t.split(",").forEach((t=>{e.includes(t)&&(i["is_valid"]=!1,i["input_error"]=i["input_error"].replace("*keyword",t))}))}catch(o){}return Promise.resolve(i)}))}}}},56815:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var o=i(83673),s=i(62323);const a=e=>((0,o.dD)("data-v-a255977a"),e=e(),(0,o.Cn)(),e),l={class:"ai_indicator_header"},n={class:"text"},r=a((()=>(0,o._)("div",{id:"speedometer"},[(0,o._)("span",{class:"barometer"}),(0,o._)("span",{class:"needle"})],-1)));function d(e,t,i,a,d,c){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("span",l,[(0,o._)("span",n,(0,s.zw)(e.$t("ai_indicator")),1)]),r],64)}var c=i(61959);const u=(0,o.aZ)({el:"#app",mixins:[],props:{},components:{},data(){return{gauge_data:{},needle:{},prop:null}},mounted:function(){document.addEventListener("TE_gauge_calculation",this.TEGaugeCalculation),document.addEventListener("FV_gauge_calculation",this.FVGaugeCalculation),this.initGauge()},unmounted:function(){document.removeEventListener("TE_gauge_calculation",this.TEGaugeCalculation),document.removeEventListener("FV_gauge_calculation",this.FVGaugeCalculation)},watch:{},methods:{initGauge(){this.value=0,this.renderGauge()},TEGaugeCalculation(e){e&&e.detail&&e.detail.hasOwnProperty("min_table_effective_weight")&&e.detail.min_table_effective_weight!==this.value&&(this.value=e.detail.min_table_effective_weight,this.renderGauge())},FVGaugeCalculation(e){e&&e.detail&&e.detail.hasOwnProperty("mean_effective_weight")&&e.detail.mean_effective_weight!==this.value&&(this.value=e.detail.mean_effective_weight,this.renderGauge())},renderGauge(){const e=this.makeWithInRange(this.value);this.needle=document.querySelector(".needle"),this.needle.style.transform="rotate("+e+"deg)"},makeWithInRange(e){let t=10,i=0,o=0,s=0;return 5==e?1:(e>5&&(o=89,s=1),e<5&&(o=357,s=272),(e-i)/(t-i)*(o-s)+s)},getRandomInt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}},setup(){return{value:(0,c.iH)(0)}}});var h=i(74260);const m=(0,h.Z)(u,[["render",d],["__scopeId","data-v-a255977a"]]),p=m},2232:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var o=i(83673),s=i(62323);const a={class:"table-container col-sm-12 col-md-12 col-lg-12 min-height-300"},l={class:"bg-white"};function n(e,t,i,n,r,d){const c=(0,o.up)("q-card-section"),u=(0,o.up)("q-icon"),h=(0,o.up)("q-input"),m=(0,o.up)("q-td"),p=(0,o.up)("q-btn"),_=(0,o.up)("q-table"),g=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(g,{style:{width:"700px","max-width":"1060px",height:"460px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"row items-center q-pb-none"}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",a,[(0,o.Wm)(_,{class:"my-sticky-header-table","no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),rows:e.rows,columns:e.columns,"rows-per-page-options":[0],"row-key":"name",filter:e.filter},{top:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o.Wm)(h,{class:"float-right",outlined:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),label:e.$t("search_by_column")},{append:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"search"})])),_:1},8,["modelValue","label"])])])),"body-cell-name":(0,o.w5)((e=>[(0,o.Wm)(m,{props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.row.label),1)])),_:2},1032,["props"])])),"body-cell-action":(0,o.w5)((t=>[(0,o.Wm)(m,{props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{color:"primary",icon:"add",label:e.$t("enable"),onClick:i=>e.enableColumn(t.row.name)},null,8,["label","onClick"])])),_:2},1032,["props"])])),_:1},8,["no-data-label","rows","columns","filter"])])])),_:1})])),_:1})}var r=i(61959);const d=(0,o.aZ)({mixins:[],components:{},props:{rows:[]},data(){return{}},mounted:function(){this.prepareColumns()},methods:{prepareColumns(){this.columns.push(Object.assign({},{name:"name",label:this.$t("column_name"),field:"name",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},enableColumn(e){const t=new CustomEvent("enable_custom_column",{detail:e});document.dispatchEvent(t)}},setup(){const e=(0,r.iH)("");let t=[];const i=(0,r.iH)(t);return{columns:i,filter:e}}});var c=i(74260),u=i(10151),h=i(25589),m=i(17132),p=i(64689),_=i(24554),g=i(83884),f=i(2165),w=i(7518),y=i.n(w);const b=(0,c.Z)(d,[["render",n]]),v=b;y()(d,"components",{QCard:u.Z,QCardSection:h.Z,QTable:m.Z,QInput:p.Z,QIcon:_.Z,QTd:g.Z,QBtn:f.Z})},88432:(e,t,i)=>{"use strict";i.d(t,{Z:()=>T});var o=i(83673),s=i(62323);const a=(0,o._)("img",{src:"trigger_ocr.svg",width:"26"},null,-1),l={class:"q-ml-sm"};function n(e,t,i,n,r,d){const c=(0,o.up)("q-tooltip"),u=(0,o.up)("q-btn"),h=(0,o.up)("q-avatar"),m=(0,o.up)("q-card-section"),p=(0,o.up)("q-card-actions"),_=(0,o.up)("q-card"),g=(0,o.up)("q-dialog"),f=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.show_btn?((0,o.wg)(),(0,o.j4)(u,{key:0,flat:"",class:"p-4",color:"grey-6",onClick:t[0]||(t[0]=t=>e.confirmation=!0)},{default:(0,o.w5)((()=>[a,(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("force_ocr")),1)])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(g,{modelValue:e.confirmation,"onUpdate:modelValue":t[3]||(t[3]=t=>e.confirmation=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(m,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",l,(0,s.zw)(e.$t("restartClassification")),1)])),_:1}),(0,o.Wm)(p,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(u,{flat:"","data-cy":"cancel",label:e.$t("cancel"),color:"primary",onClick:t[1]||(t[1]=t=>e.reset())},null,8,["label"]),[[f]]),(0,o.wy)((0,o.Wm)(u,{flat:"","data-cy":"done",label:e.$t("proceed"),color:"primary",onClick:t[2]||(t[2]=t=>e.triggerProcess())},null,8,["label"]),[[f]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var r=i(61959),d=i(77378),c=i(45401),u=i(60727),h=i(10321),m=i(84474),p=i(9273),_=i(80579),g=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const f=(0,o.aZ)({el:"#app",mixins:[c.Z,d.Z,m.Z],props:{show_btn:{type:Boolean,default:!1},force_ocr:{type:Boolean,default:!1}},components:{},data(){return{}},setup(){const e=(0,u.H_)(),{setDocTypeAndLanguageOrigin:t}=e,{record:i,language_origin:o,selected_doc_type:s}=(0,h.Jk)(e),a=(0,u.TB)(),{releaseDocLock:l}=a,n=(0,u.Dg)(),{resetStore:d}=n,{confirmation:c,trigger_classification:m,reset_classification:p,selected_page:_,selected_custom_model_label:g}=(0,h.Jk)(n);return{selected_custom_model_label:g,resetStore:d,selected_page:_,setDocTypeAndLanguageOrigin:t,language_origin:o,selected_doc_type:s,sub_doc_type:(0,r.iH)(""),record:i,releaseDocLock:l,docId:(0,r.iH)(""),table_train:(0,r.iH)(!1),confirmation:c,trigger_classification:m,reset_classification:p}},watch:{trigger_classification:{handler:function(e,t){1==e&&this.triggerProcess()}}},mounted:function(){document.addEventListener("trigger_classification",this.TriggerConfirmation),this.isDocForTraining()},unmounted:function(){document.removeEventListener("trigger_classification",this.TriggerConfirmation)},methods:{reset(){this.setDocTypeAndLanguageOrigin(),this.resetStore()},TriggerConfirmation(){this.triggerProcess()},triggerProcess(){return g(this,void 0,void 0,(function*(){try{if(!this.selected_doc_type||""===this.selected_doc_type)return void this.showErrorToast("Document Type is missing");if(!this.language_origin||""===this.language_origin)return void this.showErrorToast("Document Origin is missing");this.setDocTypeSubDocType(),yield this.restartDoc(),this.resetStore(),this.showSuccessToast(this.$t("pages.messages.NEW_CLASSIFICATION")),!0===this.table_train?this.routeForTableTrain():this.routeToDashboard()}catch(e){this.showErrorToast("Something went wrong while loading data. Please try again."),this.hideLoading()}}))},routeToDashboard(){this.releaseDocLock({doc_id:this.record.doc_id}),this.$router.push("/dashboard")},setDocTypeSubDocType(){this.sub_doc_type="";const e=this.getDocTypeSubDocType(this.selected_doc_type);e&&e.hasOwnProperty("doc_type_key")&&e.hasOwnProperty("sub_doc_type")&&(this.sub_doc_type=e.sub_doc_type,this.selected_doc_type=e.doc_type_key)},restartDoc(){return g(this,void 0,void 0,(function*(){try{this.showLoading();let e={};e.doc_type=this.selected_doc_type,e.doc_origin=this.language_origin,""!==this.sub_doc_type&&(e.sub_doc_type=this.sub_doc_type),!0===this.force_ocr&&(e.force_ocr=(!0).toString()),this.selected_page&&(e.doc_start_page=this.selected_page),this.selected_custom_model_label&&(e.doc_classification_label=this.selected_custom_model_label),yield _.U0.restartClassification(e,this.docId)}catch(e){const t=p.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.hideLoading()}}))},routeForTableTrain(){const e=window.opener;e&&(e.postMessage("reload_page_with_force_ocr","*"),window.close())},isDocForTraining(){this.$route.params.table_train&&"true"===this.$route.params.table_train?(this.table_train=!0,this.docId=String(this.$route.query.id)):this.docId=String(this.$route.params.id)}}});var w=i(74260),y=i(2165),b=i(5363),v=i(46778),x=i(10151),k=i(25589),C=i(75096),D=i(99367),O=i(60677),E=i(7518),S=i.n(E);const I=(0,w.Z)(f,[["render",n]]),T=I;S()(f,"components",{QBtn:y.Z,QTooltip:b.Z,QDialog:v.Z,QCard:x.Z,QCardSection:k.Z,QAvatar:C.Z,QCardActions:D.Z}),S()(f,"directives",{ClosePopup:O.Z})},42691:(e,t,i)=>{"use strict";i.d(t,{Z:()=>E});var o=i(83673),s=i(62323);const a={class:"q-ml-sm"};function l(e,t,i,l,n,r){const d=(0,o.up)("q-btn"),c=(0,o.up)("q-avatar"),u=(0,o.up)("q-card-section"),h=(0,o.up)("q-card-actions"),m=(0,o.up)("q-card"),p=(0,o.up)("q-dialog"),_=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(d,{color:"primary",label:e.$t("pages.screen2a.deleteRule"),class:"full-width",onClick:t[0]||(t[0]=t=>{e.confirmDelete=!0})},null,8,["label"]),(0,o.Wm)(p,{modelValue:e.confirmDelete,"onUpdate:modelValue":t[2]||(t[2]=t=>e.confirmDelete=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(u,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",a,(0,s.zw)(e.$t("pages.messages.MSG_DELETE")),1)])),_:1}),(0,o.Wm)(h,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(d,{flat:"",label:e.$t("pages.user.cancel"),color:"primary"},null,8,["label"]),[[_]]),(0,o.wy)((0,o.Wm)(d,{flat:"",label:e.$t("pages.user.done"),color:"primary",onClick:t[1]||(t[1]=t=>e.deleteRules())},null,8,["label"]),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var n=i(30052),r=i.n(n),d=i(61959),c=i(77378),u=i(45401),h=i(54268),m=i(60727),p=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const _=(0,o.aZ)({el:"#app",mixins:[u.Z,c.Z],props:{docId:{type:String,required:!0},token:{type:String,default:""}},components:{},data(){return{}},computed:{},methods:{deleteRules(){return p(this,void 0,void 0,(function*(){const e=yield this.hasActionAcquiredLock();if(!e)return;this.confirmDelete=!1;let t,i=new FormData;i.append("doc_id",this.docId),this.showLoading();try{let e=yield this.getToken();t=yield r().post(h.hi.delete_table_rules,i,{headers:{Authorization:e}})}catch(o){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}if(this.hideLoading(),!1===t.data.success)this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),this.showErrorToast(t.data.message);else{this.showSuccessToast(this.$t("pages.messages.RULES_DELETED_SUCESSFULLY"));const e=new CustomEvent("rules_deleted",{});document.dispatchEvent(e),this.$emit("autoDetectTables")}}))},getToken(){return p(this,void 0,void 0,(function*(){let e=this.token&&null!=this.token&&""!=this.token?this.token:yield(0,h.O_)();return e}))}},setup(){const e=(0,m.TB)(),{hasActionAcquiredLock:t}=e;return{confirmDelete:(0,d.iH)(!1),hasActionAcquiredLock:t}}});var g=i(74260),f=i(2165),w=i(46778),y=i(10151),b=i(25589),v=i(75096),x=i(99367),k=i(60677),C=i(7518),D=i.n(C);const O=(0,g.Z)(_,[["render",l]]),E=O;D()(_,"components",{QBtn:f.Z,QDialog:w.Z,QCard:y.Z,QCardSection:b.Z,QAvatar:v.Z,QCardActions:x.Z}),D()(_,"directives",{ClosePopup:k.Z})},67721:(e,t,i)=>{"use strict";i.d(t,{Z:()=>w});var o=i(83673),s=i(62323);const a={class:"text-weight-bold"};function l(e,t,i,l,n,r){const d=(0,o.up)("q-toolbar-title"),c=(0,o.up)("q-btn"),u=(0,o.up)("q-toolbar"),h=(0,o.up)("q-card"),m=(0,o.up)("q-dialog"),p=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(m,{modelValue:n.swDialog,"onUpdate:modelValue":t[0]||(t[0]=e=>n.swDialog=e),persistent:"",onShow:r.onShow,onHide:r.onHide},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:(0,s.j5)({width:i.width+"px !important","min-width":i.width+"px"})},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:(0,s.C_)(["text-white secondary-toolbar draggable-toolbar",i.draggable?"cursor-move":""])},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o._)("span",a,(0,s.zw)(i.title),1)])),_:1}),(0,o.wy)((0,o.Wm)(c,{flat:"",round:"",dense:"",icon:"close"},null,512),[[p]])])),_:1},8,["class"]),(0,o.WI)(e.$slots,"default")])),_:3},8,["style"])])),_:3},8,["modelValue","onShow","onHide"])}const n={name:"dialogDraggable",props:{draggable:{type:Boolean,default:!0},modelDialog:{type:Boolean,default:!1},title:{type:String,default:"Title"},width:{type:String,default:"650"}},data(){return{swDialog:!1,target:null,nodeDragg:null}},watch:{modelDialog(e){this.swDialog=e}},methods:{onShow(){let e=document.getElementsByClassName("q-dialog");this.target=e[0].querySelector(".q-card"),this.nodeDragg=this.target.querySelector(".draggable-toolbar"),this.draggable&&this.nodeDragg.addEventListener("mousedown",this.onGrab),this.$emit("onShow")},onHide(){this.draggable&&(document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.onLetGo),this.nodeDragg.removeEventListener("mousedown",this.onGrab)),this.$emit("onHide")},onDrag(e){let t=window.getComputedStyle(this.target);this.target.style.left=parseInt(t.left)+e.movementX+"px",this.target.style.top=parseInt(t.top)+e.movementY+"px"},onLetGo(){document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.onLetGo)},onGrab(){document.addEventListener("mousemove",this.onDrag),document.addEventListener("mouseup",this.onLetGo)}}};var r=i(74260),d=i(46778),c=i(10151),u=i(39570),h=i(13747),m=i(2165),p=i(60677),_=i(7518),g=i.n(_);const f=(0,r.Z)(n,[["render",l]]),w=f;g()(n,"components",{QDialog:d.Z,QCard:c.Z,QToolbar:u.Z,QToolbarTitle:h.Z,QBtn:m.Z}),g()(n,"directives",{ClosePopup:p.Z})},97570:(e,t,i)=>{"use strict";i.d(t,{Z:()=>F});var o=i(83673),s=i(62323);const a=e=>((0,o.dD)("data-v-28d349c6"),e=e(),(0,o.Cn)(),e),l={key:0,class:"q-dialog fullscreen no-pointer-events q-dialog--modal banner-parent"},n=a((()=>(0,o._)("div",{class:"q-dialog__backdrop fixed-full","aria-hidden":"true",style:{"--q-transition-duration":"300ms"}},null,-1))),r={class:"lock-banner row q-dialog__inner all-pointer-events"},d={class:"left-side"},c=(0,o.Uk)(" Dashboard "),u={class:"message"},h={class:"right-side"},m=(0,o.Uk)(" Unlock "),p=(0,o.Uk)(" Reload ");function _(e,t,i,a,_,g){const f=(0,o.up)("q-btn");return""!==e.message?((0,o.wg)(),(0,o.iD)("div",l,[n,(0,o._)("div",r,[(0,o._)("span",d,[(0,o.Wm)(f,{class:"reload-doc text-weight-bold",to:"/dashboard"},{default:(0,o.w5)((()=>[c])),_:1})]),(0,o._)("span",u,(0,s.zw)(e.message),1),(0,o._)("span",h,[e.unlock_btn?((0,o.wg)(),(0,o.j4)(f,{key:0,class:"force-unlock text-weight-bold",onClick:t[0]||(t[0]=t=>e.forceAcquireLock(!0))},{default:(0,o.w5)((()=>[m])),_:1})):(0,o.kq)("",!0),e.reload_btn?((0,o.wg)(),(0,o.j4)(f,{key:1,class:"reload-doc text-weight-bold",onClick:e.reloadDocument},{default:(0,o.w5)((()=>[p])),_:1},8,["onClick"])):(0,o.kq)("",!0)])])])):(0,o.kq)("",!0)}var g=i(61959),f=(i(65363),i(91949)),w=i(53371),y=i(25616);const b={methods:{docLockNotify(e){},getTranslationKeyForDocLockError(e){const t=(0,f.Y4)("id");let i=String(e.error_code),o="";return e.hasOwnProperty("locked_by_user")&&(o=e.locked_by_user),t==o&&(i+="_BY_SAME_USER"),i},docLockErrorHandler(e){let t="";e&&e.hasOwnProperty("error_code")&&(t=e.error_code);let i=this.getTranslationKeyForDocLockError(e),o=this.docLockErrorTranslation(i);o=o===e.error_code?e.message:o;let s="",a="";return e.hasOwnProperty("locked_by")&&(s=e.locked_by),e.hasOwnProperty("locked_on")&&(a=e.locked_on),e.hasOwnProperty("modified_by")&&(s=e.modified_by),e.hasOwnProperty("modified_on")&&(a=e.modified_on),o=o.replaceAll("%name",s),o=o.replaceAll("%date",this.formateDate(new Date(`${a} UTC`),"YYYY-MM-DD, HH:mm:ss")),""!==s&&""!==a||(o=e.message),o},docLockErrorTranslation(e){let t="";try{t=e?w.i18n.t(e):""}catch(i){}return t},formateDate(e,t){return y.ZP.formatDate(e,t)}}};var v=i(10321),x=i(29938),k=i(41891),C=i(60727);const D=(0,o.aZ)({el:"#app",mixins:[b],props:{document_version:{type:Number,default:0},trigger_document_lock:{type:Boolean,default:!1},doc_id:{type:String,default:""}},watch:{document_version:{deep:!0,handler:function(e,t){this.forceAcquireLock()}},trigger_document_lock(e,t){if(!0===e){const e=(0,C.TB)();e.$subscribe(((e,t)=>{this.afterAcquireLock()}))}}},components:{},data(){return{}},methods:{forceAcquireLock(e=!1){k.at.includes(this.record.status)&&(e=!0),this.doc_id?this.acquireDocLock(e,this.doc_id,this.document_version.toString()):this.acquireDocLock(e)},afterAcquireLock(){!0===this.doc_lock.success&&(this.message=""),!1===this.doc_lock.success&&0!==(0,x.v7)(this.doc_lock.error)&&(this.unlock_btn=!1,this.reload_btn=!1,"DOCUMENT_ALREADY_MODIFIED"===this.doc_lock.error.error_code&&(this.reload_btn=!0),"DOCUMENT_ALREADY_LOCKED"===this.doc_lock.error.error_code&&(0,f.i5)()&&(this.unlock_btn=!0),this.message=this.docLockErrorHandler(this.doc_lock.error))},reloadDocument(){this.removeCache(),this.$router.go(0)}},setup(){const e=(0,C.TB)(),{acquireDocLock:t}=e,{doc_lock:i}=(0,v.Jk)(e),o=(0,C.H_)(),{record:s}=(0,v.Jk)(o),{removeCache:a}=o;return{removeCache:a,record:s,docId:(0,g.iH)(""),message:(0,g.iH)(""),unlock_btn:(0,g.iH)(!1),reload_btn:(0,g.iH)(!1),doc_lock:i,acquireDocLock:t}}});var O=i(74260),E=i(46778),S=i(18186),I=i(2165),T=i(7518),L=i.n(T);const M=(0,O.Z)(D,[["render",_],["__scopeId","data-v-28d349c6"]]),F=M;L()(D,"components",{QDialog:E.Z,QTr:S.Z,QBtn:I.Z})},1937:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>T});var o=i(83673),s=i(62323),a=i(98880);const l=e=>((0,o.dD)("data-v-f901f390"),e=e(),(0,o.Cn)(),e),n={class:"row"},r={class:"col-sm-12 col-md-12 col-lg-12"},d={class:"cursor-pointer q-ml-sm float-left q-mt-sm q-mb-sm file_name"},c={class:"q-mr-sm"},u=(0,o.Uk)(" | "),h=l((()=>(0,o._)("img",{width:"24",height:"24",src:"full_screen.svg"},null,-1))),m={class:"col-sm-12 col-md-12 col-lg-12 po-image",id:"image_container"},p=["data-id","width","id","src","onLoad"],_=l((()=>(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1)));function g(e,t,i,l,g,f){const w=(0,o.up)("q-tooltip"),y=(0,o.up)("q-btn"),b=(0,o.up)("q-inner-loading");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",r,[(0,o._)("div",{class:(0,s.C_)([e.renderOpenWindoIcon?"back-white":"bg-black text-white","position-fixed"]),id:"po-image-header"},[(0,o._)("span",d,[(0,o.Uk)((0,s.zw)(this.fileName)+" ",1),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(this.fileName),1)])),_:1})]),(0,o._)("span",c,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.currentDocPage=t),class:(0,s.C_)([e.renderOpenWindoIcon?"pdf-input-white input-border":"pdf-input-black","po_iterateable_item"]),onChange:t[1]||(t[1]=t=>e.changePage())},null,34),[[a.nr,e.currentDocPage]]),(0,o.Uk)(" /"+(0,s.zw)(e.images.length),1)]),u,(0,o.Wm)(y,{flat:"",round:"",color:e.renderOpenWindoIcon?"black":"white",icon:"remove",size:"md",class:"po_iterateable_item highlight-text",onClick:e.zoomOut},{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("zoom_out")),1)])),_:1})])),_:1},8,["color","onClick"]),(0,o._)("span",null,(0,s.zw)(e.imageWidthPercent)+" % ",1),(0,o.Wm)(y,{flat:"",round:"",color:e.renderOpenWindoIcon?"black":"white",icon:"add",size:"md",class:"po_iterateable_item highlight-text",onClick:e.zoomIn},{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("zoom_in")),1)])),_:1})])),_:1},8,["color","onClick"]),(0,o.WI)(e.$slots,"default",{},void 0,!0),e.renderOpenWindoIcon?((0,o.wg)(),(0,o.j4)(y,{key:0,flat:"",class:"float-right q-pl-sm q-pr-sm po_iterateable_item",size:"md",onClick:t[2]||(t[2]=t=>e.openComponentInSaparateWindow())},{default:(0,o.w5)((()=>[h,(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("open_image")),1)])),_:1})])),_:1})):(0,o.kq)("",!0)],2)]),(0,o._)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.images,((t,i)=>((0,o.wg)(),(0,o.iD)("img",{"data-id":i,width:e.imageWidth,key:i,id:i+1,src:e.baseUrl+"/"+t.path,class:"shadow-5 center-inner v-m-10 image-item",onLoad:t=>e.imageLoaded(e.evt,i)},null,40,p)))),128))]),(0,o.Wm)(b,{showing:e.processing},{default:(0,o.w5)((()=>[_])),_:1},8,["showing"])])}var f=i(77987),w=i(77378),y=i(61959),b=i(60727),v=i(10321);const x=(0,o.aZ)({el:"#app",mixins:[w.Z],props:{docName:{type:String,default:""},docImages:{type:[],default:""},renderOpenWindoIcon:{type:Boolean,default:!1}},watch:{docName(e){e&&""!=e&&(this.fileName=e)},docImages(e){e&&""!=e&&(this.images=e,this.prepareImagesData())}},data(){return{imageWidth:0,imageHeight:0,currentDocPage:1,actualImageWidth:0,imageWidthPercent:100}},mounted(){window.addEventListener("resize",this.windowResize),this.init()},unmounted:function(){window.removeEventListener("resize",this.windowResize),window.removeEventListener("scroll",this.handleScroll)},methods:{init(){try{if(this.setRecordFromCache(),!this.record||0===Object.keys(this.record).length||!1===this.record.success)return;this.record.hasOwnProperty("filename")&&(this.fileName=this.record.filename),this.record.hasOwnProperty("images")&&(this.images=this.record.images),this.prepareImagesData()}catch(e){}},prepareImagesData(){if(this.images&&this.images.length>0){this.processing=!this.images_loaded;let e=(0,f.$)("#image_container");if(!e)return;this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight-40,this.actualImageWidth=e.offsetWidth,this.imageWidthPercent=90,this.setImageStat(),!1===this.renderOpenWindoIcon&&(window.addEventListener("scroll",this.handleScroll),e.classList.remove("po-image"));let t=(0,f.$)("#po-image-header");t.classList.remove("position-fixed"),(0,f.$)("#image_container").addEventListener("scroll",this.handleScroll)}},windowResize(){let e=(0,f.$)("#image_container");this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight-40,this.imageWidthPercent=90,this.setImageStat()},adjustImageTopPanel(){setTimeout((()=>{let e=(0,f.$)("#toolbar_area");if(e){let t=e.parentElement;(0,f.$)("#file_name").style.width=t.offsetWidth-20-e.offsetWidth+"px"}}),10)},imageLoaded(e,t){if(this.images_loaded)return;const i=document.querySelectorAll(".image-item");i.length>=this.images.length&&(this.processing=!1,this.images_loaded=!0)},openComponentInSaparateWindow(){let e=this.$router.resolve({path:"/po-image"});window.open(e.href,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,left=500,width=1000,height=1000")},setImageStat(){let e=(0,f.$)("#image_container");setTimeout((()=>{this.imageHeight=e.offsetHeight-40}),10)},zoomOut(){this.imageWidthPercent>10&&(this.imageWidthPercent-=10,this.imageWidth=this.imageWidth-this.getPercentageOfimageWidth(10),this.setImageStat())},zoomIn(){if(this.imageWidthPercent<250){this.imageWidthPercent+=10,this.imageWidth=this.imageWidth+this.getPercentageOfimageWidth(10);let e=(0,f.$)("#image_container");setTimeout((()=>{this.imageHeight=e.offsetHeight}),10)}},getPercentageOfimageWidth(e){let t=this.actualImageWidth*(e/100);return t},changePage(){let e=document.getElementById(this.currentDocPage.toString());this.currentDocPage<=this.images.length&&e?e.scrollIntoView():this.showErrorToast(this.$t("pages.messages.PAGE_NOT_FOUND"))},handleScroll(){let e;e=!1===this.renderOpenWindoIcon?document.documentElement.scrollTop:(0,f.$)("#image_container").scrollTop;let t=document.getElementById("1").offsetHeight,i=Math.round(e/t);i<this.images.length&&(this.currentDocPage=i,this.currentDocPage++)}},setup(){const e=(0,b.H_)(),{record:t,get_cached_data_id:i}=(0,v.Jk)(e),{setRecordFromCache:o}=e;let s=[];return{setRecordFromCache:o,record:t,get_cached_data_id:i,images:s,fileName:"",baseUrl:"https://api.docbits.com",processing:(0,y.iH)(!1),images_loaded:(0,y.iH)(!1)}}});var k=i(74260),C=i(5363),D=i(2165),O=i(66941),E=i(7518),S=i.n(E);const I=(0,k.Z)(x,[["render",g],["__scopeId","data-v-f901f390"]]),T=I;S()(x,"components",{QTooltip:C.Z,QBtn:D.Z,QInnerLoading:O.Z})},4424:(e,t,i)=>{"use strict";i.d(t,{Z:()=>ot});var o=i(83673),s=i(62323);const a={class:"row no-wrap q-pa-md"},l={class:"column"},n={class:"row"},r={style:{width:"50%"}},d={style:{width:"50%"},class:"q-pl-sm"},c={class:"text-weight-medium"},u={class:"column items-center"},h=(0,o._)("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1),m={class:"cursor-pointer link"},p={class:"text-subtitle1 q-mb-xs"},_={class:"q-ml-sm"};function g(e,t,i,g,f,w){const y=(0,o.up)("q-item-label"),b=(0,o.up)("q-separator"),v=(0,o.up)("q-icon"),x=(0,o.up)("q-item-section"),k=(0,o.up)("q-item"),C=(0,o.up)("q-list"),D=(0,o.up)("DateFormat"),O=(0,o.up)("AmountFormat"),E=(0,o.up)("fontSizeOption"),S=(0,o.up)("darkModeOption"),I=(0,o.up)("DualMonitor"),T=(0,o.up)("q-btn"),L=(0,o.up)("q-avatar"),M=(0,o.up)("q-tooltip"),F=(0,o.up)("q-btn-dropdown"),q=(0,o.up)("EditProfile"),Z=(0,o.up)("q-dialog"),R=(0,o.up)("q-card-section"),W=(0,o.up)("q-card-actions"),A=(0,o.up)("q-card"),V=(0,o.Q2)("ripple"),z=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(F,{class:"user-setting q-ml-md account-header",label:e.main_orgainzation},{default:(0,o.w5)((()=>[(0,o._)("div",a,[(0,o._)("div",l,[e.organizations?((0,o.wg)(),(0,o.j4)(C,{key:0,class:"organizations-list",style:(0,s.j5)(e.hasSubOrganizations()?{"max-width":"314px","min-width":"314px","min-height":"136px"}:{})},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.organizations,((t,i)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i},[(0,o.Wm)(y,{class:"v-p-0 font-size-18 no-padding-left-right text-weight-bold",header:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.name),1)])),_:2},1024),(0,o.Wm)(b),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.sub_organisations,((t,i)=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(k,{key:i,class:"m-t-5 v-p-0 font-size-12 no-padding-left-right text-weight-bold",clickable:"",onClick:i=>e.setSubOrg(t),active:t.id===e.sub_org_id},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{name:"work",color:t.id===e.sub_org_id?"grey-8":"grey-5"},null,8,["color"])])),_:2},1024),(0,o.Wm)(x,{class:(0,s.C_)(t.id===e.sub_org_id?"text-grey-8":"text-grey-5")},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.name),1)])),_:2},1032,["class"])])),_:2},1032,["onClick","active"])),[[V]]))),128))],64)))),128))])),_:1},8,["style"])):(0,o.kq)("",!0),(0,o.Wm)(b),(0,o._)("div",n,[(0,o._)("div",r,[(0,o.Wm)(D)]),(0,o._)("div",d,[(0,o.Wm)(O)])]),(0,o._)("div",null,[(0,o.Wm)(E)]),(0,o._)("div",null,[(0,o.Wm)(S)]),(0,o.Wm)(I),(0,o._)("div",c,[(0,o.Wm)(T,{style:{padding:"4px 6px"},flat:"",color:"primary",onClick:e.refreshClicked,icon:"refresh",class:"no-padding-left-right"},null,8,["onClick"]),(0,o.Uk)(" "+(0,s.zw)(e.$t("refresh_user_settings")),1)])]),(0,o.Wm)(b,{vertical:"",inset:"",class:"q-mx-lg"}),(0,o._)("div",u,[(0,o.Wm)(L,{size:"72px"},{default:(0,o.w5)((()=>[h])),_:1}),(0,o._)("label",{class:"row q-ma-sm",onClick:t[0]||(t[0]=t=>e.profileDialog=!0)},[(0,o.Wm)(v,{name:"edit",size:"16px",color:"primary",class:"mt-3 cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(M,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("edit_profile")),1)])),_:1})])),_:1}),(0,o._)("span",m,(0,s.zw)(e.$t("edit_profile")),1)]),(0,o._)("div",p,(0,s.zw)(this.userFullName),1),(0,o.wy)((0,o.Wm)(T,{push:"",size:"sm","data-cy":"logout",color:"primary text-white ",label:e.$t("layout.logout"),onClick:t[1]||(t[1]=e=>this.logout()),icon:"power_settings_new"},null,8,["label"]),[[z]])])])])),_:1},8,["label"]),(0,o.Wm)(Z,{modelValue:e.profileDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.profileDialog=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(q)])),_:1},8,["modelValue"]),(0,o.Wm)(Z,{modelValue:e.refresh_warning,"onUpdate:modelValue":t[5]||(t[5]=t=>e.refresh_warning=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(A,null,{default:(0,o.w5)((()=>[(0,o.Wm)(R,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(R,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",_,(0,s.zw)(e.$t("change_lost_warning")),1)])),_:1}),(0,o.Wm)(W,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{flat:"","data-cy":"cancel",label:e.$t("cancel"),color:"primary",onClick:t[3]||(t[3]=t=>e.refresh_warning=!1)},null,8,["label"]),(0,o.Wm)(T,{flat:"","data-cy":"done",label:e.$t("proceed"),color:"primary",onClick:t[4]||(t[4]=t=>e.refreshSettings(!0))},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var f=i(10321),w=i(28741),y=i(77378),b=i(98303),v=i(61959);const x={for:"Font Size"};function k(e,t,i,a,l,n){const r=(0,o.up)("q-radio");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("label",x,(0,s.zw)(e.$t("font_size")),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.font_size_options,((i,s)=>((0,o.wg)(),(0,o.j4)(r,{key:s,modelValue:e.font_size,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.font_size=t),t[1]||(t[1]=t=>e.fontSizeUpdated())],val:i.value,label:i.label},null,8,["modelValue","val","label"])))),128))],64)}var C=i(60727),D=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const O=(0,o.aZ)({el:"#app",mixins:[],props:{},components:{},data(){return{}},mounted:function(){this.init()},methods:{init(){return D(this,void 0,void 0,(function*(){yield this.initFontSize()}))},fontSizeUpdated(){this.setAppFontSize(),this.saveFontSizeValue()}},setup(){const e=(0,C.$l)(),{saveFontSizeValue:t,initFontSize:i,setAppFontSize:o}=e,{font_size:s,font_size_options:a}=(0,f.Jk)(e);return{font_size:s,font_size_options:a,saveFontSizeValue:t,initFontSize:i,setAppFontSize:o}}});var E=i(74260),S=i(77991),I=i(7518),T=i.n(I);const L=(0,E.Z)(O,[["render",k]]),M=L;T()(O,"components",{QRadio:S.Z});const F=(0,o._)("label",{for:"Dark Mode"},"Dark Mode",-1),q=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function Z(e,t,i,s,a,l){const n=(0,o.up)("q-toggle"),r=(0,o.up)("q-inner-loading");return(0,o.wg)(),(0,o.iD)(o.HY,null,[F,(0,o.Wm)(n,{modelValue:e.darkMode,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.darkMode=t),t[2]||(t[2]=t=>{e.setUserPreferences(this.dark_mode_setting,t)})],onClick:t[1]||(t[1]=t=>e.$q.dark.toggle()),"checked-icon":"dark_mode",color:"primary","unchecked-icon":"light_mode"},null,8,["modelValue"]),(0,o.Wm)(r,{showing:e.loading||e.loading_settings},{default:(0,o.w5)((()=>[q])),_:1},8,["showing"])],64)}var R=i(80579),W=i(29058),A=i(9273),V=i(41891),z=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const B=(0,o.aZ)({el:"#app",mixins:[y.Z],props:[],components:{},mounted(){const e=W.Z.isActive;1==Boolean(e)?this.darkMode=!0:this.darkMode=!1},data(){return{darkMode:!1,dark_mode_setting:V.pP}},watch:{loading_settings:{handler:function(e,t){0!=e||1!=t||this.user_settings[this.dark_mode_setting]||(this.user_settings[this.dark_mode_setting]=!1)}}},setup(){const e=(0,C.VF)(),{user_settings:t,loading_settings:i}=(0,f.Jk)(e),{setUserPreferences:o,getUserSettingWithExpiry:s}=e;return{getUserSettingWithExpiry:s,setUserPreferences:o,user_settings:t,loading_settings:i,settings_store:e,loading:(0,v.iH)(!1)}},methods:{saveSettings(e,t){return z(this,void 0,void 0,(function*(){if(e)try{this.loading=!0;let e=new FormData;e.append("key",this.dark_mode_setting),e.append("value",t),yield R.FT.setUserPreference({key:this.dark_mode_setting,value:t}),this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(i){const e=A.w.getErrorMessage(i);this.showErrorToast(e)}finally{this.loading=!1}}))}}});var N=i(28886),P=i(66941);const U=(0,E.Z)(B,[["render",Z]]),j=U;T()(B,"components",{QToggle:N.Z,QInnerLoading:P.Z});const H=["innerHTML"];function $(e,t,i,a,l,n){const r=(0,o.up)("q-item-label"),d=(0,o.up)("q-tooltip"),c=(0,o.up)("q-item-section"),u=(0,o.up)("q-item"),h=(0,o.up)("q-select");return(0,o.wg)(),(0,o.j4)(h,{loading:e.date_pattern_loading||e.loading_settings,dense:"","options-dense":"",modelValue:e.user_settings[e.date_pattern_setting],"onUpdate:modelValue":[t[0]||(t[0]=t=>e.user_settings[e.date_pattern_setting]=t),t[1]||(t[1]=t=>{e.setUserPreferences(e.date_pattern_setting,t)})],options:e.date_pattern_list,"emit-value":"","map-options":"",label:e.$t("date_pattern")},{option:(0,o.w5)((e=>[(0,o.Wm)(u,(0,s.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1024),e.opt.description?((0,o.wg)(),(0,o.j4)(d,{key:0},{default:(0,o.w5)((()=>[(0,o._)("span",{innerHTML:e.opt.description},null,8,H)])),_:2},1024)):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1040)])),_:1},8,["loading","modelValue","options","label"])}var Q=i(29938);const Y=(0,o.aZ)({el:"#app",props:[],components:{},mounted:function(){this.init()},data(){return{date_pattern_setting:V.Hc}},watch:{loading_settings:{handler:function(e,t){!1===e&&this.init()}}},setup(){const e=(0,C.VF)(),{user_settings:t,loading_settings:i}=(0,f.Jk)(e),{setUserPreferences:o}=e,s=(0,C.MW)(),{date_pattern_list:a,date_pattern_loading:l,date_pattern_loaded:n}=(0,f.Jk)(s);return{setUserPreferences:o,user_settings:t,loading_settings:i,date_pattern_list:a,date_pattern_loading:l,date_pattern_loaded:n}},methods:{init(){this.loading_settings||(0,Q.Jp)(this.user_settings[this.date_pattern_setting])&&(this.user_settings[this.date_pattern_setting]="")}}});var J=i(72448),K=i(83414),G=i(52035),X=i(2350),ee=i(5363);const te=(0,E.Z)(Y,[["render",$]]),ie=te;T()(Y,"components",{QSelect:J.Z,QItem:K.Z,QItemSection:G.Z,QItemLabel:X.Z,QTooltip:ee.Z});const oe=["innerHTML"];function se(e,t,i,a,l,n){const r=(0,o.up)("q-item-label"),d=(0,o.up)("q-tooltip"),c=(0,o.up)("q-item-section"),u=(0,o.up)("q-item"),h=(0,o.up)("q-select");return(0,o.wg)(),(0,o.j4)(h,{dense:"","options-dense":"",loading:e.language_origins_loading||e.loading_settings,modelValue:e.user_settings[e.amount_format_setting],"onUpdate:modelValue":[t[0]||(t[0]=t=>e.user_settings[e.amount_format_setting]=t),t[1]||(t[1]=t=>{e.setUserPreferences(e.amount_format_setting,t)})],options:e.format_origins,"emit-value":"","map-options":"",label:e.$t("pages.settings.amount_format")},{option:(0,o.w5)((e=>[(0,o.Wm)(u,(0,s.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1024),e.opt.description?((0,o.wg)(),(0,o.j4)(d,{key:0},{default:(0,o.w5)((()=>[(0,o._)("span",{innerHTML:e.opt.description},null,8,oe)])),_:2},1024)):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1040)])),_:1},8,["loading","modelValue","options","label"])}const ae=(0,o.aZ)({el:"#app",mixins:[],props:[],components:{},mounted:function(){this.init()},data(){return{amount_format_setting:V.xq}},watch:{loading_settings:{handler:function(e,t){!1===e&&this.init()}}},methods:{init(){this.loading_settings||(0,Q.Jp)(this.user_settings[this.amount_format_setting])&&(this.user_settings[this.amount_format_setting]="")}},setup(){const e=(0,C.VF)(),{user_settings:t,loading_settings:i}=(0,f.Jk)(e),{setUserPreferences:o,getSettingWithExpiry:s}=e,a=(0,C.A3)(),{format_origins:l,language_origins_loading:n,language_origins_loaded:r}=(0,f.Jk)(a);return{loading_settings:i,getSettingWithExpiry:s,setUserPreferences:o,format_origins:l,language_origins_loading:n,language_origins_loaded:r,user_settings:t}}}),le=(0,E.Z)(ae,[["render",se]]),ne=le;T()(ae,"components",{QSelect:J.Z,QItem:K.Z,QItemSection:G.Z,QItemLabel:X.Z,QTooltip:ee.Z});var re=i(45401),de=i(63230);const ce={autocomplete:"off"},ue={key:0,class:"row text-red-5",style:{"flex-direction":"column",width:"100%","font-size":"1.2rem","font-wight":"bold"}},he={class:"row",style:{"flex-direction":"column",width:"100%"}},me={class:"row",style:{"flex-direction":"column",width:"100%"}},pe={style:{"flex-direction":"column",width:"100%"}},_e={class:"cursor-pointer"},ge={style:{"flex-direction":"column",width:"100%"},class:"row full-width"},fe=(0,o._)("img",{class:"loader",src:"loader.gif",alt:"Loading..."},null,-1);function we(e,t,i,a,l,n){const r=(0,o.up)("q-space"),d=(0,o.up)("q-tooltip"),c=(0,o.up)("q-btn"),u=(0,o.up)("q-bar"),h=(0,o.up)("q-card-section"),m=(0,o.up)("q-input"),p=(0,o.up)("q-icon"),_=(0,o.up)("q-card-actions"),g=(0,o.up)("q-card"),f=(0,o.up)("q-inner-loading"),w=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(g,{style:{width:"30vw","max-width":"60vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"bg-primary q-pa-lg text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.user.edit_user"))+" ",1),(0,o.Wm)(r),(0,o.wy)(((0,o.wg)(),(0,o.j4)(c,{dense:"",flat:"",icon:"close"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.select_app.close")),1)])),_:1})])),_:1})),[[w]])])),_:1}),(0,o.Wm)(h,{class:"row items-center p-4"}),(0,o._)("form",ce,[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[""!==e.api_errors?((0,o.wg)(),(0,o.iD)("div",ue," Error: "+(0,s.zw)(e.api_errors),1)):(0,o.kq)("",!0),(0,o._)("div",he,[(0,o.Wm)(m,{dense:"",outlined:"",class:(0,s.C_)("full-width cursor-pointer first_name"),modelValue:e.model["first_name"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.model["first_name"]=t),label:e.$t("first_name"),"error-message":e.model_error["first_name"],error:""!=e.model_error["first_name"]},null,8,["modelValue","label","error-message","error"])]),(0,o._)("div",me,[(0,o.Wm)(m,{dense:"",outlined:"",label:e.$t("last_name"),class:(0,s.C_)("full-width cursor-pointer last_name"),modelValue:e.model["last_name"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.model["last_name"]=t),"error-message":e.model_error["last_name"],error:""!=e.model_error["last_name"]},null,8,["label","modelValue","error-message","error"])]),(0,o._)("div",pe,[(0,o.Wm)(m,{dense:"",outlined:"",class:(0,s.C_)("cursor-pointer password"),modelValue:e.model["password"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.model["password"]=t),label:e.$t("password"),"error-message":e.model_error["password"],error:""!=e.model_error["password"],type:!1===e.show_password?"password":"text"},{append:(0,o.w5)((()=>[(0,o.Wm)(p,{name:!1===e.show_password?"visibility":"visibility_off",onClick:t[2]||(t[2]=t=>e.show_password=!e.show_password)},null,8,["name"])])),after:(0,o.w5)((()=>[(0,o._)("div",_e,[(0,o.Wm)(p,{name:"img:info_primary.svg"}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("password_hint")),1)])),_:1})])])),_:1},8,["modelValue","label","error-message","error","type"])]),(0,o._)("div",ge,[(0,o.Wm)(m,{dense:"",outlined:"",class:(0,s.C_)("cursor-pointer confirm_password"),modelValue:e.model["confirm_password"],"onUpdate:modelValue":t[5]||(t[5]=t=>e.model["confirm_password"]=t),"error-message":e.model_error["confirm_password"],label:e.$t("confirm_password"),error:""!=e.model_error["confirm_password"],type:!1===e.show_confirm_password?"password":"text"},{append:(0,o.w5)((()=>[(0,o.Wm)(p,{name:!1===e.show_confirm_password?"visibility":"visibility_off",onClick:t[4]||(t[4]=t=>e.show_confirm_password=!e.show_confirm_password)},null,8,["name"])])),_:1},8,["modelValue","error-message","label","error","type"])])])),_:1}),(0,o.Wm)(_,{align:"left",class:"float-right q-ml-auto q-mr-sm"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(c,{label:e.$t("pages.user.cancel"),color:"primary",type:"reset",style:{width:"100px"},outline:""},null,8,["label"]),[[w]]),(0,o.wy)((0,o.Wm)(c,{label:e.$t("pages.user.save"),class:"q-ml-sm",style:{width:"100px"},color:"primary",onClick:e.updateUserInfo},null,8,["label","onClick"]),[[w]])])),_:1})])])),_:1}),(0,o.Wm)(f,{showing:e.processing,class:"max-full-width full-height full-height-max"},{default:(0,o.w5)((()=>[fe])),_:1},8,["showing"])],64)}var ye=i(30052),be=i.n(ye),ve=i(52828),xe=i(48825),ke=i(80589),Ce=i(54268),De=i(91949),Oe=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const Ee=(0,o.aZ)({el:"#app",mixins:[y.Z,ve.Z],data(){return{fields:["first_name","last_name","password","confirm_password"],empty_validation_fields:["first_name","last_name"]}},setup(){(0,xe.Z)();const e=(0,C.LM)();return{userStore:e,model:(0,v.iH)({}),model_error:(0,v.iH)({}),processing:(0,v.iH)(!1),api_errors:(0,v.iH)(""),api_success:(0,v.iH)(""),show_password:(0,v.iH)(!1),show_confirm_password:(0,v.iH)(!1)}},watch:{},mounted(){this.initModel(),this.updateModelFromSettings()},methods:{initModel(){for(const e of this.fields)this.model[e]="",this.model_error[e]="";this.resetErrors()},updateModelFromSettings(){for(const e of this.fields){const t=(0,De.Y4)(e);this.model[e]=t}},resetErrors(){for(const e of this.fields)this.model_error[e]="";this.api_errors="",this.api_success=""},validateRow(){let e=!1;this.resetErrors();for(const t of this.empty_validation_fields)this.model[t]&&0!=this.model[t].length||(e=!0,this.model_error[t]=this.$t(t)+"is required");return!1===e&&this.model["password"]!==this.model["confirm_password"]&&(this.model_error["confirm_password"]="Passwords do not match",e=!0),e},updateUserInfo(){return Oe(this,void 0,void 0,(function*(){if(!this.validateRow())try{let e=(0,De.Y4)("id");if(!e)throw{message:"User ID is missing"};this.processing=!0,yield this.editUser(e),this.initModel()}catch(e){this.handleErrors(e)}finally{this.processing=!1}}))},editUser(e){return Oe(this,void 0,void 0,(function*(){let t=this.$t("pages.messages.USER_UPDATED"),i=new FormData;i.append("first_name",this.model["first_name"]),i.append("last_name",this.model["last_name"]),this.model["password"]&&0!==this.model["password"].length&&i.append("password",this.model["password"]);let o,s=yield(0,Ce.O_)();if(o=yield be().put(Ce.hi.update_user+e,i,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:s}}),!1===o.data.success&&o.data.message)throw t="",t=o.data.error_code&&this.$t(o.data.error_code)!==o.data.error_code?this.$t(o.data.error_code):this.$t(o.data.message),{message:t};const a=ke.Z.getItem("user_details");a&&(a.first_name=this.model["first_name"],a.last_name=this.model["last_name"],ke.Z.set("user_details",a),this.userStore.updateUserName()),this.showSuccessToast(t)}))},handleErrors(e){let t="";if(null!=e&&"object"==typeof e&&e.hasOwnProperty("message")&&(t=e.message),e&&e.response&&e.response.data&&e.response.data.hasOwnProperty("message")&&(t=e.response.data.message),t&&""!==t)throw this.api_errors=t,{message:t}}}});var Se=i(10151),Ie=i(10846),Te=i(62025),Le=i(2165),Me=i(25589),Fe=i(64689),qe=i(24554),Ze=i(99367),Re=i(60677);const We=(0,E.Z)(Ee,[["render",we]]),Ae=We;T()(Ee,"components",{QCard:Se.Z,QBar:Ie.Z,QSpace:Te.Z,QBtn:Le.Z,QTooltip:ee.Z,QCardSection:Me.Z,QInput:Fe.Z,QIcon:qe.Z,QCardActions:Ze.Z,QInnerLoading:P.Z}),T()(Ee,"directives",{ClosePopup:Re.Z});const Ve={key:0,class:"row"},ze=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function Be(e,t,i,s,a,l){const n=(0,o.up)("q-toggle"),r=(0,o.up)("q-option-group"),d=(0,o.up)("q-inner-loading");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",null,[(0,o.Wm)(n,{modelValue:e.user_settings[e.setting_name],"onUpdate:modelValue":[t[0]||(t[0]=t=>e.user_settings[e.setting_name]=t),t[1]||(t[1]=t=>{e.saveSettings(e.setting_name,t)})],label:e.$t("dual_monitor_mode"),"left-label":!0},null,8,["modelValue","label"])]),e.user_settings[e.setting_name]?((0,o.wg)(),(0,o.iD)("div",Ve,[(0,o.Wm)(r,{modelValue:e.user_settings[e.sub_setting_name],"onUpdate:modelValue":[t[2]||(t[2]=t=>e.user_settings[e.sub_setting_name]=t),t[3]||(t[3]=t=>{e.setUserPreference(e.sub_setting_name,t)})],options:e.options,color:"primary",inline:""},null,8,["modelValue","options"])])):(0,o.kq)("",!0),(0,o.Wm)(d,{showing:e.loading||e.loading_settings},{default:(0,o.w5)((()=>[ze])),_:1},8,["showing"])],64)}var Ne=i(28239),Pe=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const Ue=(0,o.aZ)({el:"#app",mixins:[y.Z],props:[],components:{},data(){return{sub_setting_name:"MONITOR_PREFERENCE",setting_name:"DUAL_MONITOR_MODE_SETTING"}},watch:{loading_settings:{handler:function(e,t){0!=e||1!=t||this.user_settings[this.setting_name]||(this.user_settings[this.setting_name]=!1)}}},mounted(){return Pe(this,void 0,void 0,(function*(){if(!this.user_settings[this.setting_name])return void(this.user_settings[this.setting_name]=!1);const e=yield R.FT.getUserPreference({key:this.sub_setting_name});this.user_settings[this.sub_setting_name]=e}))},methods:{saveSettings(e,t){return Pe(this,void 0,void 0,(function*(){if(e)try{this.loading=!0,yield(0,Ne.AF)(e,t),this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(i){const e=A.w.getErrorMessage(i);this.showErrorToast(e)}finally{this.loading=!1}}))},setUserPreference(e,t){return Pe(this,void 0,void 0,(function*(){if(e)try{this.loading=!0,yield R.FT.setUserPreference({key:this.sub_setting_name,value:t}),this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(i){const e=A.w.getErrorMessage(i);this.showErrorToast(e)}finally{this.loading=!1}}))}},setup(){const e=(0,C.VF)(),{user_settings:t,loading_settings:i}=(0,f.Jk)(e);return{user_settings:t,loading_settings:i,loading:(0,v.iH)(!1),options:[{label:"Monitor 1",value:"monitor_1"},{label:"Monitor 2",value:"monitor_2"}]}}});var je=i(75682);const He=(0,E.Z)(Ue,[["render",Be]]),$e=He;T()(Ue,"components",{QToggle:N.Z,QOptionGroup:je.Z,QInnerLoading:P.Z});var Qe=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const Ye=(0,o.aZ)({el:"#app",mixins:[w.Z,re.Z,y.Z],props:{},components:{EditProfile:Ae,DualMonitor:$e,DateFormat:ie,AmountFormat:ne,fontSizeOption:M,darkModeOption:j},data(){return{}},mounted:function(){this.init()},methods:{init(){return Qe(this,void 0,void 0,(function*(){this.refreshSettings(),this.refreshUserInfo(),yield this.getUserOrganizations(),yield this.getSubOrgId(),this.getLanguageOrigins(),this.getDatePatterns()}))},getLanguageOrigins(){return Qe(this,void 0,void 0,(function*(){this.language_origins_loaded||(yield this.getLanguageOptions())}))},getDatePatterns(){return Qe(this,void 0,void 0,(function*(){this.date_pattern_loaded||(yield this.getDatePatternOptions())}))},setSubOrg(e){return Qe(this,void 0,void 0,(function*(){try{this.showLoading();const t=String(e.id);if(!t)return void this.showErrorToast("no organization selected");yield de.r.setSubOrgId(t),yield this.getSubOrgId(),this.$router.go(0)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},refreshUserInfo(){this.profileDialog=!1;const e=(0,De.Y4)("id");this.isUserAdmin=(0,De.Y4)("is_organisation_admin"),e?this.updateUserName():this.logout()},refreshSettings(e=!1){return Qe(this,void 0,void 0,(function*(){if(yield this.setOrgSettings(),this.refresh_warning=!1,!e)return;this.clearStorageForRefresh(),yield b.W1.fetch(),yield this.getSubOrgId();const t=(0,C.H_)();t.resetDocStore(this.$route.fullPath),this.$router.go(0)}))},refreshClicked(){const e=this.$route.path,t=["/dashboard","/setting","/apps"];t.includes(e)?this.refreshSettings(!0):this.refresh_warning=!0},hasSubOrganizations(){return!!(this.organizations[0]&&this.organizations[0].hasOwnProperty("sub_organisations")&&this.organizations[0].sub_organisations.length>0)}},setup(){const e=(0,C.LM)(),{updateUserName:t,getUserOrganizations:i,getSubOrgId:o}=e,{userFullName:s,organizations:a,sub_org_id:l,main_orgainzation:n}=(0,f.Jk)(e),r=(0,C.VF)(),{setOrgSettings:d}=r,c=(0,C.A3)(),{getLanguageOptions:u}=c,{language_origins_loaded:h}=(0,f.Jk)(c),m=(0,C.MW)(),{getDatePatternOptions:p}=m,{date_pattern_loaded:_}=(0,f.Jk)(m);return{language_origins_loaded:h,date_pattern_loaded:_,getDatePatternOptions:p,getLanguageOptions:u,getUserOrganizations:i,setOrgSettings:d,updateUserName:t,getSubOrgId:o,settings_store:r,main_orgainzation:n,sub_org_id:l,userFullName:s,organizations:a,refresh_warning:(0,v.iH)(!1),profileDialog:(0,v.iH)(!1),isUserAdmin:(0,v.iH)(""),link:(0,v.iH)("inbox")}}});var Je=i(82226),Ke=i(27011),Ge=i(65869),Xe=i(75096),et=i(46778),tt=i(80860);const it=(0,E.Z)(Ye,[["render",g]]),ot=it;T()(Ye,"components",{QBtnDropdown:Je.Z,QList:Ke.Z,QItemLabel:X.Z,QSeparator:Ge.Z,QItem:K.Z,QItemSection:G.Z,QIcon:qe.Z,QBtn:Le.Z,QAvatar:Xe.Z,QTooltip:ee.Z,QDialog:et.Z,QCard:Se.Z,QCardSection:Me.Z,QCardActions:Ze.Z}),T()(Ye,"directives",{Ripple:tt.Z,ClosePopup:Re.Z})},38229:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var o=i(83673);function s(e,t,i,s,a,l){const n=(0,o.up)("q-select");return(0,o.wg)(),(0,o.j4)(n,{modelValue:e.locale,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.locale=t),e.languageChanged],options:e.languages_list,dense:"",borderless:"","emit-value":"","map-options":"","options-dense":"",class:"select-language"},null,8,["modelValue","options","onUpdate:modelValue"])}var a=i(9262),l=i(61959),n=i(80589),r=i(7153),d=i(60727),c=i(10321);const u=(0,o.aZ)({name:"LanguageDropdown",mounted:function(){this.getLanguageList(),n.Z.has("selected_language")&&(this.locale=n.Z.getItem("selected_language")),r.Z.remove("event_name")},methods:{languageChanged(){n.Z.set("selected_language",this.locale),r.Z.set("event_name","language_change"),n.Z.remove("doc_types"),window.location.reload()}},setup(){let{locale:e}=(0,a.QT)({useScope:"global"});const t=(0,d.At)(),{languages_list:i}=(0,c.Jk)(t),{getLanguageList:o}=t;return{languages_list:i,getLanguageList:o,locale:(0,l.iH)(e)}}});var h=i(74260),m=i(72448),p=i(7518),_=i.n(p);const g=(0,h.Z)(u,[["render",s],["__scopeId","data-v-4c35da2a"]]),f=g;_()(u,"components",{QSelect:m.Z})},70229:(e,t,i)=>{"use strict";i.d(t,{Z:()=>We});var o=i(83673),s=i(62323),a=i(98880);const l={class:"row q-pa-sm"},n={class:"bg-grey-3"},r=(0,o._)("th",null,null,-1),d={key:0,class:"text-left"},c={style:{width:"89%",position:"relative"},class:"text-left"},u=["data-id"],h={class:"secondary-c-text"},m=["onPointerover","onPointerleave"],p=["onPointerover","onPointerleave"],_=["data-id"],g=["id","onUpdate:modelValue"],f={class:"back-white"},w={class:"q-ml-sm"},y={key:0,class:"q-pa-md q-gutter-sm"},b={class:"text-weight-bold"},v={class:"row items-center"},x={style:{width:"30%",margin:"auto"}},k={style:{width:"40%"}},C=(0,o._)("div",{style:{width:"30%"}},null,-1),D={class:"row items-center"},O={style:{width:"30%",margin:"auto"}},E={style:{width:"40%"}},S=(0,o._)("div",{style:{width:"30%"}},null,-1),I={key:0,class:"row items-center"},T={style:{width:"1000%",margin:"auto"}},L={class:"bg-grey-3"},M={class:"text-h4 text-uppercase text-left"},F={class:"text-h4 text-uppercase text-left"},q={class:"text-h4 text-uppercase text-left"},Z={class:"text-h4 text-uppercase text-left"},R=(0,o._)("img",{src:"trash-bin-default.svg",width:"20"},null,-1),W=(0,o.Uk)("Remove"),A={class:"text-weight-bold"},V={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},z={style:{width:"50%"}},B=(0,o._)("div",{style:{width:"50%"},class:"pl-20"},null,-1),N={style:{"margin-bottom":"20px"},class:"row full-width mb-10"},P={style:{width:"50%"}},U={style:{width:"50%"},class:"pl-20"},j={key:0,style:{"margin-bottom":"20px"},class:"row full-width mb-10"},H={style:{width:"100%"}},$={style:{"margin-bottom":"20px"},class:"row full-width mb-10"},Q={style:{width:"100%"}},Y={class:"q-ml-sm"};function J(e,t,i,J,K,G){const X=(0,o.up)("q-tooltip"),ee=(0,o.up)("q-fab-action"),te=(0,o.up)("q-fab"),ie=(0,o.up)("q-item-label"),oe=(0,o.up)("q-item-section"),se=(0,o.up)("q-item"),ae=(0,o.up)("q-list"),le=(0,o.up)("q-btn-dropdown"),ne=(0,o.up)("q-icon"),re=(0,o.up)("q-btn"),de=(0,o.up)("q-markup-table"),ce=(0,o.up)("q-card-section"),ue=(0,o.up)("q-card-actions"),he=(0,o.up)("q-card"),me=(0,o.up)("q-dialog"),pe=(0,o.up)("q-toolbar-title"),_e=(0,o.up)("q-toolbar"),ge=(0,o.up)("q-input"),fe=(0,o.up)("q-checkbox"),we=(0,o.up)("q-select"),ye=(0,o.up)("q-avatar"),be=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[e.hasLineItems()?((0,o.wg)(),(0,o.j4)(de,{key:0,class:"full-width",style:{"min-height":"160px"}},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",n,[r,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.headers,((i,a)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i.techName},[e.isColumnVisible(a,i)?((0,o.wg)(),(0,o.iD)("th",d,[(0,o._)("div",c,[1==e.isViewEditable()?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(te,{color:e.groupByIndex==String(a)?"primary":"grey-6",title:e.groupByIndex==String(a)?"GroupBy Column":"Actions",class:"column-fab",icon:"more_horiz",direction:"down"},{default:(0,o.w5)((()=>[(0,o.Wm)(ee,{color:"grey-3","text-color":"black",onClick:t=>e.deleteLineItemColumn(a),width:"20",icon:"img:trash-bin-default.svg"},{default:(0,o.w5)((()=>[(0,o.Wm)(X,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("delete_column")),1)])),_:1})])),_:2},1032,["onClick"]),e.groupByIndex!==String(a)?((0,o.wg)(),(0,o.j4)(ee,{key:0,color:"grey-3","text-color":"black",onClick:t=>e.formateLineItms(i.techName,a),width:"20",icon:"lar la-object-group"},{default:(0,o.w5)((()=>[(0,o.Wm)(X,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("group_rows")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),e.groupByIndex==String(a)?((0,o.wg)(),(0,o.j4)(ee,{key:1,color:"grey-3","text-color":"black",onClick:t[0]||(t[0]=t=>e.resetFormating()),width:"20",icon:"lar la-object-ungroup"},{default:(0,o.w5)((()=>[(0,o.Wm)(X,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("reset_group_rows")),1)])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:2},1032,["color","title"]),(0,o.Wm)(le,{flat:"",class:(0,s.C_)("gridHeader "+(i.error?"column-error-border":"")),style:{width:"100%","box-shadow":"none",padding:"0"},label:i.header},{default:(0,o.w5)((()=>[(0,o.Wm)(ae,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.dropdownColumns,(t=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(se,{key:t.techName,clickable:"",onClick:i=>e.swapColumn(t,a)},{default:(0,o.w5)((()=>[(0,o.Wm)(oe,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ie,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.header),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[be]]))),128))])),_:2},1024)])),_:2},1032,["class","label"])],64)):((0,o.wg)(),(0,o.iD)("span",{key:1,class:(0,s.C_)("gridHeader "+(i.error?"column-error-border":"")),style:{width:"100%","box-shadow":"none",padding:"8px 40px 8px 2px"}},(0,s.zw)(i.header),3)),i.error?((0,o.wg)(),(0,o.j4)(ne,{key:2,title:e.$t("pages.screen2b.in_valid_column_error"),name:"priority_high",class:"headerError"},{default:(0,o.w5)((()=>[(0,o.Wm)(X,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.screen2b.in_valid_column_error")),1)])),_:1})])),_:1},8,["title"])):(0,o.kq)("",!0)])])):(0,o.kq)("",!0)],64)))),128))])]),((0,o.wg)(),(0,o.iD)("tbody",{ref:"tbodyRef",class:"ln-tbody",key:e.renderKey},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.lineitems,((i,l)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:l},[e.isRowDeleted(i)?((0,o.wg)(),(0,o.iD)("tr",{key:0,tabindex:"0","data-id":e.getLineUuid(i),class:"droptarget"},[(0,o._)("td",h,[1==e.isViewEditable()?((0,o.wg)(),(0,o.j4)(re,{key:0,flat:"",color:"primary",onClick:t=>e.removeLineItem(l,i),icon:"fa fa-times"},null,8,["onClick"])):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[],64)),e.isPurchaseOrderConnected(i)?((0,o.wg)(),(0,o.iD)(o.HY,{key:2},["success"==e.getConnectedinfoAttribute(i,"connection_status")?((0,o.wg)(),(0,o.j4)(ne,{key:0,size:"sm",tabindex:"0",class:"cursor-pointer",onFocus:t=>e.showlineHighlighted(i),onBlur:t=>e.removedLineHighlight(i)},{default:(0,o.w5)((()=>[(0,o._)("img",{width:"20",src:"link.svg",onPointerover:t=>e.showlineHighlighted(i),onPointerleave:t=>e.removedLineHighlight(i)},null,40,m),(0,o.Wm)(X,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("po_connected_match")),1)])),_:1})])),_:2},1032,["onFocus","onBlur"])):((0,o.wg)(),(0,o.j4)(ne,{key:1,size:"sm",tabindex:"0",class:"cursor-pointer",onFocus:t=>e.showlineHighlighted(i),onBlur:t=>e.removedLineHighlight(i)},{default:(0,o.w5)((()=>[(0,o._)("img",{width:"20",src:"broken-link.svg",onPointerover:t=>e.showlineHighlighted(i),onPointerleave:t=>e.removedLineHighlight(i)},null,40,p),(0,o.Wm)(X,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("po_connected_mismatch")),1)])),_:1})])),_:2},1032,["onFocus","onBlur"])),e.is_po_view?((0,o.wg)(),(0,o.j4)(re,{key:2,flat:"",color:"blue",onClick:t=>e.removePOConnection(l,i),icon:"fa fa-times"},{default:(0,o.w5)((()=>[(0,o.Wm)(X,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("remove_po_connection")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0)],64)):(0,o.kq)("",!0)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i,((n,r)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:r},[e.isColumnVisible(r,n)?((0,o.wg)(),(0,o.iD)("td",{key:0,"data-id":e.getLineUuid(i)},[1==e.isViewEditable()?(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{key:0,style:{border:"0px",background:"transparent","outline-width":"0"},onChange:t[1]||(t[1]=(...t)=>e.prepareLineItemJsonForImport&&e.prepareLineItemJsonForImport(...t)),id:l.toString()+r.toString(),"onUpdate:modelValue":e=>n.value=e},null,40,g)),[[a.nr,n.value]]):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,s.zw)(n.value),1)],64))],8,_)):(0,o.kq)("",!0)],64)))),128))],8,u)):(0,o.kq)("",!0)],64)))),128))]))])),_:1})):((0,o.wg)(),(0,o.j4)(de,{key:1,class:"full-width"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",f,[(0,o._)("th",null,(0,s.zw)(e.$t("no_line_items_found")),1)])])])),_:1}))]),(0,o.Wm)(me,{modelValue:e.confirmDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.confirmDialog=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(he,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ce,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",w,(0,s.zw)(e.$t("line_items_connection_overwrite")),1)])),_:1}),(0,o.Wm)(ue,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(re,{flat:"",label:"Cancel",color:"primary"},null,512),[[be]]),(0,o.Wm)(re,{flat:"",label:"Connect anyway",color:"primary",onClick:e.removeExistingAndConnectNewPO},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),e.openAdvSettings?((0,o.wg)(),(0,o.iD)("div",y,[(0,o.Wm)(me,{modelValue:e.openAdvSettings,"onUpdate:modelValue":t[6]||(t[6]=t=>e.openAdvSettings=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(he,{style:{width:"700px","max-width":"50vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_e,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(pe,null,{default:(0,o.w5)((()=>[(0,o._)("span",b,(0,s.zw)(e.$t("pages.line_items.adv_settings_header")),1)])),_:1}),(0,o.wy)((0,o.Wm)(re,{flat:"",round:"",dense:"",icon:"close"},null,512),[[be]])])),_:1}),(0,o.Wm)(ce,{class:""},{default:(0,o.w5)((()=>[(0,o._)("div",v,[(0,o._)("div",x,(0,s.zw)(e.$t("pages.line_items.header_row_count_field")),1),(0,o._)("div",k,[(0,o.Wm)(ge,{outlined:"",type:"number",rules:e.headerRowCountRules,modelValue:e.header_rows_count,"onUpdate:modelValue":t[3]||(t[3]=t=>e.header_rows_count=t)},null,8,["rules","modelValue"])]),C]),(0,o._)("div",D,[(0,o._)("div",O,(0,s.zw)(e.$t("pages.line_items.move_extra_rows_to_desc_line")),1),(0,o._)("div",E,[(0,o.Wm)(fe,{modelValue:e.move_extra_rows_to_desc,"onUpdate:modelValue":t[4]||(t[4]=t=>e.move_extra_rows_to_desc=t)},null,8,["modelValue"])]),S]),e.extra_columns.length>0?((0,o.wg)(),(0,o.iD)("div",I,[(0,o._)("div",T,[(0,o.Wm)(de,null,{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",L,[(0,o._)("th",M,(0,s.zw)(e.$t("field_key")),1),(0,o._)("th",F,(0,s.zw)(e.$t("source_field")),1),(0,o._)("th",q,(0,s.zw)(e.$t("pattern")),1),(0,o._)("th",Z,(0,s.zw)(e.$t("actions")),1)])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.extra_columns,((t,i)=>((0,o.wg)(),(0,o.iD)("tr",{key:t["key"]},[(0,o._)("td",null,(0,s.zw)(t["field_key"]),1),(0,o._)("td",null,(0,s.zw)(t["source_field"]),1),(0,o._)("td",null,(0,s.zw)(t["pattern"]),1),(0,o._)("td",null,[(0,o.Wm)(re,{flat:"",onClick:t=>{t.stopPropagation(),e.removeFieldFromSettings(i)}},{default:(0,o.w5)((()=>[R,(0,o.Wm)(X,null,{default:(0,o.w5)((()=>[W])),_:1})])),_:2},1032,["onClick"])])])))),128))])])),_:1})])])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(ue,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(re,{class:"bg-grey-3",label:e.$t("cancel")},null,8,["label"]),[[be]]),(0,o.Wm)(re,{color:"primary",class:"q-mr-sm","data-cy":"setvatfield",label:e.$t("pages.line_items.proceed"),onClick:e.formatWthAdvSettings},null,8,["label","onClick"]),(0,o.Wm)(re,{color:"primary",class:"q-mr-sm",label:e.$t("add_fields"),onClick:t[5]||(t[5]=t=>e.addFieldForAdvSettings())},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(me,{modelValue:e.addFieldsDialog,"onUpdate:modelValue":t[15]||(t[15]=t=>e.addFieldsDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(he,{style:{width:"600px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_e,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(pe,null,{default:(0,o.w5)((()=>[(0,o._)("span",A,(0,s.zw)(e.$t("add_field_view_header")),1)])),_:1}),(0,o.wy)((0,o.Wm)(re,{flat:"",round:"",dense:"",icon:"close"},null,512),[[be]])])),_:1}),(0,o.Wm)(ce,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o._)("div",V,[(0,o._)("div",z,[(0,o.Wm)(we,{modelValue:e.new_field_model["source"],"onUpdate:modelValue":t[8]||(t[8]=t=>e.new_field_model["source"]=t),class:"col-sm-6 col-md-6 col-lg-6",options:e.adv_column_options,label:"Field Source*","bottom-slots":"","error-message":"Field is required",error:e.new_field_model["source_invalid"],"emit-value":"","map-options":""},{append:(0,o.w5)((()=>[(0,o.Wm)(ne,{name:"close",onClick:t[7]||(t[7]=(0,a.iM)((t=>{e.new_field_model["source"]=""}),["stop"])),class:"cursor-pointer"})])),option:(0,o.w5)((e=>[(0,o.Wm)(se,(0,s.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(oe,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ie,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","error"])]),B]),(0,o._)("div",N,[(0,o._)("div",P,[(0,o.Wm)(ge,{label:"Key*",modelValue:e.new_field_model["key"],"onUpdate:modelValue":t[9]||(t[9]=t=>e.new_field_model["key"]=t),outlined:"",class:"full-width","bottom-slots":"","error-message":"Field is required",error:e.new_field_model["key_invalid"]},null,8,["modelValue","error"])]),(0,o._)("div",U,[(0,o.Wm)(we,{modelValue:e.new_field_model["key_dropdown"],"onUpdate:modelValue":[t[11]||(t[11]=t=>e.new_field_model["key_dropdown"]=t),t[12]||(t[12]=t=>e.advSettingNewFieldColumnSelected("key","key_dropdown"))],class:"col-sm-6 col-md-6 col-lg-6",options:e.adv_column_options,label:e.$t("adv_column_options")},{append:(0,o.w5)((()=>[(0,o.Wm)(ne,{name:"close",onClick:t[10]||(t[10]=(0,a.iM)((t=>{e.new_field_model["key_dropdown"]="",e.advSettingNewFieldColumnSelected("key","key_dropdown")}),["stop"])),class:"cursor-pointer"})])),option:(0,o.w5)((e=>[(0,o.Wm)(se,(0,s.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(oe,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ie,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","label"])])]),e.new_field_model["key_dropdown"]?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",j,[(0,o._)("div",H,[(0,o.Wm)(ge,{label:"Label",modelValue:e.new_field_model["label"],"onUpdate:modelValue":t[13]||(t[13]=t=>e.new_field_model["label"]=t),outlined:"",class:"full-width"},null,8,["modelValue"])])])),(0,o._)("div",$,[(0,o._)("div",Q,[(0,o.Wm)(ge,{label:"Pattern*",modelValue:e.new_field_model["pattern"],"onUpdate:modelValue":t[14]||(t[14]=t=>e.new_field_model["pattern"]=t),outlined:"",class:"full-width","bottom-slots":"","error-message":"Invalid Regex Pattern",error:e.new_field_model["pattern_invalid"]},null,8,["modelValue","error"])])])])),_:1}),(0,o.Wm)(ue,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(re,{class:"bg-grey-3",label:e.$t("cancel")},null,8,["label"]),[[be]]),(0,o.Wm)(re,{color:"primary",class:"q-mr-sm","data-cy":"setvatfield",label:e.$t("pages.line_items.proceed"),onClick:e.saveNewFieldForAdvSettings},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])):(0,o.kq)("",!0),(0,o.Wm)(me,{modelValue:e.poEditRestrictDialog,"onUpdate:modelValue":t[16]||(t[16]=t=>e.poEditRestrictDialog=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(he,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ce,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(ye,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(ce,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",Y,(0,s.zw)(e.poEditRestrictMessage),1)])),_:1}),(0,o.Wm)(ue,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(re,{flat:"",label:e.$t("dashboard"),color:"primary",to:"/dashboard"},null,8,["label"]),(0,o.Wm)(re,{flat:"",label:e.$t("table_extraction_view"),color:"primary",to:"/tbl_ext_v3/"+e.apiData.doc_id},null,8,["label","to"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var K=i(30052),G=i.n(K),X=i(7153),ee=i(77378),te=i(61959),ie=i(45401),oe=i(54268),se=i(89657),ae=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};let le,ne,re,de={};const ce=(0,o.aZ)({el:"#app",mixins:[ie.Z,ee.Z],props:{apiData:{},extractedData:{type:String,default:""}},emits:["updateTableDataForSave","updateReadOnlyFlag","updateExtractionDataForSave","updateTableForSave"],components:{},data(){return{docId:"",dropdownColumns:[],columns_to_hide:[],rows_to_delete:[],po_dragging:!1,dragging_data:{},coveredLineItem:[],validation_done:!0,po_connected_line_items:{},connected_line_item:"",confirmDialog:(0,te.iH)(!1),renderKey:0,lineItemsRect:[],timeoutId:0,wait:!1,openAdvSettings:(0,te.iH)(!1),is_po_view:!1}},updated:function(){this.$nextTick((function(){if(ne=this.$refs.tbodyRef,!ne)return;let e=!1,t=ne.querySelectorAll("tr");if(t.length>0){let i=t[0].getBoundingClientRect();0!=i.x&&0!=i.y||(e=!0)}if(!e){this.lineItemsRect=[];for(var i=0;i<t.length;i++){let e=t[i].getBoundingClientRect();this.lineItemsRect.push({id:t[i].dataset.id,rect:e})}}}))},mounted:function(){document.addEventListener("po_dragging",this.poDragStart),document.addEventListener("po_dragging_stop",this.poDragStop),document.addEventListener("revert_changes",this.revertChanges),this.isViewPo(),window.lineItems=this,document.addEventListener("dragenter",this.dragenter),document.addEventListener("dragover",this.dragover),document.addEventListener("drop",this.drop),document.addEventListener("keydown",this.keyDownEvent)},unmounted:function(){document.removeEventListener("po_dragging",this.poDragStart),document.removeEventListener("po_dragging_stop",this.poDragStop),document.removeEventListener("revert_changes",this.revertChanges),document.removeEventListener("dragenter",this.dragenter),document.removeEventListener("dragover",this.dragover),document.removeEventListener("drop",this.drop),document.removeEventListener("keydown",this.keyDownEvent)},watch:{apiData:{deep:!0,handler:function(e,t){this.initLineItems()}},extractedData(e){re.value=e,re.parentElement.classList.remove("active"),re=null}},computed:{groupByIndex:function(){return this.getColumnGroupBy()}},methods:{dragover(e){e.preventDefault()},drop(e){if(e.preventDefault(),!e.target||!this.apiData.editable)return;let t=e.target,i=e.target.dataset.id,o=X.Z.getItem("Text");X.Z.remove("Text");var s=e.target.closest("tr");if(("tr"!=t.tagName||"droptarget"!=t.className)&&s&&s.className&&"droptarget"==s.className&&(i=s.dataset.id),!o||!i)return;let a=JSON.parse(o);this.makeConnection(i,a)},makeConnection(e,t){if(!e)return;let i="";for(let[o,s]of this.lineItemsRect.entries())if(s.id==e){i=o;break}if(this.coveredLineItem=this.lineitems[i],this.dragging_data=t,this.po_connected_line_items.hasOwnProperty(e))return this.confirmDialog=!0,void(this.connected_line_item=e);this.connectNewPORecord(),this.renderKey++},dragenter(e){var t=e.target.closest("tr");"tr"==e.target.tagName&&"droptarget"==e.target.className||t&&t.className&&t.className},initLineItems(){return ae(this,void 0,void 0,(function*(){this.docId=this.apiData&&this.apiData.doc_id?this.apiData.doc_id:"",yield this.initColumnHeaders(),this.getLineItemRowsToHide(),this.setLineItems(),this.parseSynonyms(),this.findHeaderLabels(),this.processGridData(),this.getColumnsToHide(),this.setConnectedLineItems(),this.validateLineItemColumns(),this.restrictPOEditIfNotValidated(),this.renderKey++}))},resetlintItems(){this.setLineItems(),this.parseSynonyms(),this.findHeaderLabels(),this.processGridData(),this.validateLineItemColumns(),this.setConnectedLineItems(),this.restrictPOEditIfNotValidated(),this.renderKey++},isViewEditable(){return!this.is_po_view},getToken(){return ae(this,void 0,void 0,(function*(){let e=this.apiData.token&&null!=this.apiData.token&&""!=this.apiData.token?this.apiData.token:yield(0,oe.O_)();return e}))},initColumnHeaders(){return ae(this,void 0,void 0,(function*(){if(X.Z.has("tbex_lineitem_headers")&&null!=X.Z.getItem("tbex_lineitem_headers"))return this.dropdownColumns=X.Z.getItem("tbex_lineitem_headers"),void this.validateLineItemColumns();let e;this.showLoading();try{let t=yield this.getToken();e=yield G().get(oe.hi.get_tbex_lineitems_columns,{headers:{Authorization:t}})}catch(t){return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void this.hideLoading()}if(this.hideLoading(),e.data){for(const t of e.data)this.dropdownColumns.push({header:this.$t("pages.line_items_columns."+t),techName:t});X.Z.set("tbex_lineitem_headers",this.dropdownColumns)}else this.showErrorToast(this.$t("pages.messages.INVALID_DOCUMENT"))}))},setLineItems(){this.lineitems=[],this.lineitems=this.apiData&&this.apiData.tables&&this.apiData.tables[0]&&this.apiData.tables[0].data?this.apiData.tables[0].data:[]},formateLineItms(e,t){return ae(this,void 0,void 0,(function*(){let e;this.showLoading();try{this.setJsonForLineItems();let i=new FormData;i.append("header_rows_count",this.header_rows_count.toString()),i.append("group_column",String(t)),i.append("move_extra_rows_to_desc",this.move_extra_rows_to_desc.toString()),i.append("data",JSON.stringify(this.apiData)),i.append("column_mapping_indexes",JSON.stringify(this.getColumnMappingIndexes())),this.apiData.hasOwnProperty("is_table_training_doc")&&i.append("is_table_training_doc",(!0).toString());let o=yield this.getToken();e=yield G().post(oe.hi.group_line_items,i,{headers:{Authorization:o}})}catch(i){return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void this.hideLoading()}this.hideLoading(),this.formatAfterHook(e),this.$forceUpdate()}))},getColumnMappingIndexes(){let e={};for(let[t,i]of this.headers.entries())this.isColumnNameValid(i)&&(e[i.techName]=t);return e},resetFormating(){return ae(this,void 0,void 0,(function*(){let e;this.showLoading();try{this.setJsonForLineItems();let t=new FormData;t.append("header_rows_count",this.header_rows_count.toString()),t.append("group_column",""),t.append("move_extra_rows_to_desc",this.move_extra_rows_to_desc.toString()),t.append("data",JSON.stringify(this.apiData)),t.append("column_mapping_indexes",JSON.stringify(this.getColumnMappingIndexes())),this.apiData.hasOwnProperty("is_table_training_doc")&&t.append("is_table_training_doc",(!0).toString());let i=yield this.getToken();e=yield G().post(oe.hi.group_line_items,t,{headers:{Authorization:i}})}catch(t){return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void this.hideLoading()}this.hideLoading(),this.formatAfterHook(e),this.$forceUpdate()}))},parseSynonyms(){de=this.apiData&&this.apiData.synonyms?this.apiData.synonyms:{},le=[];for(const e of Object.keys(de))de[e].forEach((t=>{le.push({techName:e,label:t})}))},findHeaderLabels(){if(!this.lineitems||!this.lineitems[0])return void(this.headers=[]);let e=[],t=Object.keys(this.lineitems[0]);t.forEach((t=>{const i=this.findTechNameAgainstLabel(t);this.$t("pages.line_items_columns."+t)!="pages.line_items_columns."+t&&(t=this.$t("pages.line_items_columns."+t)),e.push({orig_name:t,header:t,techName:i.techName})})),this.headers=JSON.parse(JSON.stringify(e))},processGridData(){if(!this.lineitems)return;let e=[],t=[];for(const[i,o]of this.lineitems.entries()){e=[];for(const t of Object.keys(o)){const i=this.findTechNameAgainstLabel(t);e.push({label:t,techName:i.techName,value:o[t]})}t.push(e)}this.lineitems=t},swapColumn(e,t){if(!this.isViewEditable())return;let i=!1;for(let[o,s]of this.headers.entries())if(s.techName===e.techName&&s.orig_name==s.header&&this.isColumnVisible(o,s)){i=!0;break}i?this.showErrorToast(this.$t("pages.messages.COLUMN_ALREADY_MAPPED")):(Object.assign(this.headers[t],{header:e.header,techName:e.techName}),Array.from(this.lineitems).forEach((i=>{i[t].label=e.header,i[t].techName=e.techName})),this.validateLineItemColumns(),this.updateLineItemsForApi(),this.$forceUpdate())},findTechNameAgainstLabel(e){for(const i of this.dropdownColumns)if(e==i.techName)return{techName:i.techName};const t=le.filter((t=>t.label===e));return t&&t[0]&&t[0].techName?{techName:t[0].techName}:{techName:e}},validateLineItemColumns(){let e=!1;if(void 0===this.headers)return;for(let[i,o]of this.headers.entries()){delete o.error;let t=this.isColumnVisible(i,o);if(!t)continue;let s=this.isColumnNameValid(o);s||(o.error=!0,e=!0)}let t=!e;this.validation_done!==t&&(!this.validation_done&&t&&this.updateLineItemsForApi(),this.validation_done=t,this.$emit("updateReadOnlyFlag",e))},isColumnNameValid(e){let t=!1;for(const i of this.dropdownColumns)if(e.techName===i.techName){t=!0;break}return t},deleteLineItemColumn(e){this.setColumnsToHide(e),this.validateLineItemColumns(),this.isColumnGroupBy(String(e))?this.resetFormating():this.validation_done||this.updateLineItemsForApi(),this.$forceUpdate()},updateLineItemsForApi(){this.isReadOnly||(this.setJsonForLineItems(),this.$emit("updateExtractionDataForSave","mapping",this.getColumnMappingIndexes()))},restrictPOEditIfNotValidated(){this.is_po_view&&(this.validation_done&&this.hasLineItems()||(this.validation_done||(this.poEditRestrictMessage=this.$t("po_restrict_message_not_mapped")),this.hasLineItems()||(this.poEditRestrictMessage=this.$t("po_restrict_message_not_items")),this.poEditRestrictDialog=!0))},isColumnGroupBy(e){let t="";this.apiData&&this.apiData.tables&&this.apiData.tables[0]&&this.apiData.tables[0].hasOwnProperty("extraction_info")||(t="");for(let[i,o]of Object.entries(this.apiData.tables[0].extraction_info))this.apiData.tables[0].extraction_info[i].hasOwnProperty("group_column")&&(t=this.apiData.tables[0].extraction_info[i].group_column);return null===t&&(t=""),t==e},getColumnGroupBy(){let e="";this.apiData&&this.apiData.tables&&this.apiData.tables[0]&&this.apiData.tables[0].hasOwnProperty("extraction_info")||(e="");for(let[t,i]of Object.entries(this.apiData.tables[0].extraction_info))this.apiData.tables[0].extraction_info[t].hasOwnProperty("group_column")&&(e=this.apiData.tables[0].extraction_info[t].group_column);return null===e&&(e=""),e},isColumnExist(e){let t=!1;for(let i of this.headers)i.orig_name===e&&(t=!0);return t},getColumnsToHide(){if(this.columns_to_hide=[],this.apiData&&this.apiData.tables&&this.apiData.tables[0]&&this.apiData.tables[0].hasOwnProperty("extraction_info")){for(let[e,t]of Object.entries(this.apiData.tables[0].extraction_info))this.apiData.tables[0].extraction_info[e].hasOwnProperty("columns_to_hide")&&(this.columns_to_hide=this.apiData.tables[0].extraction_info[e].columns_to_hide);null===this.columns_to_hide&&(this.columns_to_hide=[])}},setColumnToHideForApi(){this.apiData.tables[0]&&this.apiData.tables[0].hasOwnProperty("extraction_info")&&this.$emit("updateExtractionDataForSave","columns_to_hide",this.columns_to_hide)},setColumnsToHide(e){this.columns_to_hide.push(String(e)),this.setColumnToHideForApi()},isColumnVisible(e,t){let i=!0;return(this.columns_to_hide.includes(String(e))||"UUID"==t.techName)&&(i=!1),i},isRowDeleted(e){let t=this.getLineUuid(e);return!this.rows_to_delete.includes(t)},getLineUuid(e){let t="";for(let[i,o]of e.entries())if("UUID"==o.techName){t=o.value;break}return t},getLineItemRowsToHide(){if(this.rows_to_delete=[],this.apiData&&this.apiData.tables&&this.apiData.tables[0]&&this.apiData.tables[0].hasOwnProperty("extraction_info")){for(let[e,t]of Object.entries(this.apiData.tables[0].extraction_info))this.apiData.tables[0].extraction_info[e].hasOwnProperty("rows_to_delete")&&(this.rows_to_delete=this.apiData.tables[0].extraction_info[e].rows_to_delete);Array.isArray(this.rows_to_delete)&&this.rows_to_delete.length>0?this.rows_to_delete=this.rows_to_delete[0].split(" "):this.rows_to_delete=[]}},removeLineItem(e,t){this.addToRowToDelete(t),this.lineitems.splice(e,1),this.setRowToDeleteForApi(),this.$forceUpdate()},addToRowToDelete(e){for(let[t,i]of e.entries())if("UUID"==i.techName){this.rows_to_delete.push(i.value);break}},setRowToDeleteForApi(){if(!this.apiData.tables[0]||!this.apiData.tables[0].hasOwnProperty("extraction_info"))return;let e=[this.rows_to_delete.join(" ")];this.$emit("updateExtractionDataForSave","rows_to_delete",e)},prepareLineItemJsonForImport(e){setTimeout((()=>{re=document.getElementById(e.target.id),re.parentElement.classList.add("active")}),10),this.isViewEditable()&&(this.setJsonForLineItems(),this.$forceUpdate())},setJsonForLineItems(){let e=[],t=[];Array.from(this.lineitems).forEach((i=>{t=[];for(let e of i)t[e.techName]=e.value;e.push(Object.assign({},t))})),this.$emit("updateTableDataForSave",e)},addLine(){const e=[];this.headers.forEach((t=>{const i={label:t.header,techName:t.techName,value:""};e.push(i)})),this.lineitems.push(e),this.setJsonForLineItems(),this.$forceUpdate()},poDragStart(e){this.validation_done?(this.po_dragging=!0,this.dragging_data=e.detail,document.addEventListener("pointermove",this.mouseMoveHandler)):this.showErrorToast(this.$t("pages.messages.COLUMN_MAPPING_NOT_DONE"))},poDragStop(e){this.po_dragging=!1,this.validation_done&&(document.removeEventListener("pointermove",this.mouseMoveHandler),this.dragging_data=e.detail,this.handlePolineItemAction())},handlePolineItemAction(){let e=this.checkIfPOOverLineItem(this.dragging_data.rect);if(1!==e.length)return;let t=e[0],i=t.id;if(i){if(this.coveredLineItem=this.lineitems[t.index],this.po_connected_line_items.hasOwnProperty(i))return this.confirmDialog=!0,void(this.connected_line_item=i);this.connectNewPORecord(),this.renderKey++,this.$forceUpdate()}},connectNewPORecord(){let e={};if(!this.coveredLineItem)return;for(let[s,a]of this.coveredLineItem.entries())"UNIT_PRICE"==a.techName&&(e["UNIT_PRICE"]=a.value),"QUANTITY"==a.techName&&(e["QUANTITY"]=a.value),"TOTAL_AMOUNT"==a.techName&&(e["TOTAL_AMOUNT"]=a.value),"UUID"==a.techName&&(e["UUID"]=a.value);if(!e.UUID)return;let t=this.setPoConnectionStatus(e,this.dragging_data.data),i={invoice_table_line_id:e.UUID,connection_status:t,po_line_id:this.dragging_data.data.id,unit_price:e.UNIT_PRICE,quantity:e.QUANTITY,total_amount:e.TOTAL_AMOUNT};const o=["id","unit_price","quantity","total_amount"];for(let[s,a]of Object.entries(this.dragging_data.data))o.includes(s)||(i[s]=a);this.po_connected_line_items[e.UUID]=i,this.dispatchConnectionSuccessEvent(i)},setPoConnectionStatus(e,t){let i="";return i=t.unit_price==e.UNIT_PRICE&&t.quantity==e.QUANTITY?"success":"mismatch","DELIVERY_NOTE"==this.apiData.doc_type&&(i=t.quantity==e.QUANTITY?"success":"mismatch"),"ORDER_CONFIRMATION"==this.apiData.doc_type&&(i=t.unit_price==e.UNIT_PRICE?"success":"mismatch"),i},dispatchConnectionSuccessEvent(e){const t=new CustomEvent("po_connection_add",{detail:{data:e}});document.dispatchEvent(t)},removeExistingAndConnectNewPO(){this.confirmDialog=!1;let e=this.po_connected_line_items.hasOwnProperty(this.connected_line_item)?this.po_connected_line_items[this.connected_line_item]:{};this.dispatchConnectionRemoveEvent(e),delete this.po_connected_line_items[this.connected_line_item],this.connectNewPORecord()},dispatchConnectionRemoveEvent(e){const t=new CustomEvent("po_connection_remove",{detail:{data:e}});document.dispatchEvent(t)},convertToUSValue(e){return e.replace(/,/g,".")},mouseMoveHandler(e){this.po_dragging&&this.validation_done&&this.wait},checkIfPOOverLineItem(e){let t=[];for(let[i,o]of this.lineItemsRect.entries()){let s=o.rect,a=this.checkElements(s,e);a&&t.push({index:i,id:o.id})}return t},checkElements(e,t){let i=!1;return(t.top>=e.top&&t.top<=e.bottom||t.bottom>=e.top&&t.bottom<=e.bottom)&&(t.left>=e.left&&t.left<=e.right||t.right>=e.left&&t.right<=e.right)&&(i=!0),i},isPurchaseOrderConnected(e){let t=this.getLineUuid(e);return!!this.po_connected_line_items.hasOwnProperty(t)},getConnectionInfo(e){let t={},i=this.getLineUuid(e);return t=this.po_connected_line_items.hasOwnProperty(i)?this.po_connected_line_items[i]:{},t},getConnectedinfoAttribute(e,t){let i=this.getConnectionInfo(e);return i&&0!==Object.keys(i).length?i[t]:{}},setConnectedLineItems(){let e=this.getConnectedLineItems();if(0!=e.length)for(let[t,i]of e.entries())this.po_connected_line_items[i.invoice_table_line_id]=i},getConnectedLineItems(){let e=[];return this.apiData?(this.apiData.hasOwnProperty("po_matched")&&(e=this.apiData.po_matched),e):e},removePOConnection(e,t){const i=this.getLineUuid(t);let o=this.po_connected_line_items.hasOwnProperty(i)?this.po_connected_line_items[i]:{};this.dispatchConnectionRemoveEvent(o),delete this.po_connected_line_items[i]},hasLineItems(){return!(!this.headers||0===Object.keys(this.headers).length)},openAdvanceSettings(){this.openAdvSettings=!0,this.adv_column_options=[];for(const e of this.dropdownColumns)this.adv_column_options.push(Object.assign({},{value:e.techName,label:e.header}));this.setAdvSettings()},setAdvSettings(){if(this.move_extra_rows_to_desc=!1,this.header_rows_count=1,this.extra_columns=[],this.apiData&&this.apiData.tables&&this.apiData.tables[0]&&this.apiData.tables[0].hasOwnProperty("extraction_info"))for(let[e,t]of Object.entries(this.apiData.tables[0].extraction_info)){let t=this.apiData.tables[0].extraction_info[e];t.hasOwnProperty("merge_extra_lines_to_desc")&&t.merge_extra_lines_to_desc&&(this.move_extra_rows_to_desc=t.merge_extra_lines_to_desc),t.hasOwnProperty("header_rows_count")&&t.header_rows_count&&(this.header_rows_count=t.header_rows_count),t.hasOwnProperty("extra_cols")&&t.extra_cols&&(this.extra_columns=t.extra_cols)}},formatWthAdvSettings(){return ae(this,void 0,void 0,(function*(){let e;this.showLoading();try{let t=new FormData;t.append("header_rows_count",this.header_rows_count.toString()),t.append("group_column",this.getColumnGroupBy()),t.append("move_extra_rows_to_desc",this.move_extra_rows_to_desc.toString()),t.append("data",JSON.stringify(this.apiData)),t.append("column_mapping_indexes",JSON.stringify(this.getColumnMappingIndexes())),t.append("extra_columns",JSON.stringify(this.extra_columns)),this.apiData.hasOwnProperty("is_table_training_doc")&&t.append("is_table_training_doc",(!0).toString());let i=yield this.getToken();e=yield G().post(oe.hi.group_line_items,t,{headers:{Authorization:i}})}catch(t){return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void this.hideLoading()}this.hideLoading(),this.formatAfterHook(e),this.$forceUpdate(),this.openAdvSettings=!1}))},advSettingNewFieldColumnSelected(e,t){this.new_field_model[t]?this.new_field_model[e]=this.new_field_model[t].value:this.new_field_model[e]=""},saveNewFieldForAdvSettings(){this.new_field_model["pattern_invalid"]=!1,this.new_field_model["key_invalid"]=!1,this.new_field_model["source_invalid"]=!1;let e=!0;if(this.new_field_model["pattern"]&&!(0,se.nc)(this.new_field_model["pattern"])&&(this.new_field_model["pattern_invalid"]=!0,e=!1),this.new_field_model["key"]&&""!=this.new_field_model["key"]||(this.new_field_model["key_invalid"]=!0,e=!1),this.new_field_model["source"]&&""!=this.new_field_model["source"]||(this.new_field_model["source_invalid"]=!0,e=!1),!e)return;let t=this.new_field_model["label"];t||(t=this.new_field_model["key"].toUpperCase()),this.extra_columns||(this.extra_columns=[]),this.extra_columns.push({field_key:this.new_field_model["key"].toUpperCase(),source_field:this.new_field_model["source"].toUpperCase(),label:t,pattern:this.new_field_model["pattern"].toUpperCase()}),this.addFieldsDialog=!1},addFieldForAdvSettings(){this.addFieldsDialog=!0,this.new_field_model={}},removeFieldFromSettings(e){e=Number(e),e>-1&&this.extra_columns.splice(e,1)},revertChanges(){this.resetChanges(),this.$forceUpdate()},resetChanges(){return ae(this,void 0,void 0,(function*(){let e;this.showLoading();try{let t=new FormData;t.append("header_rows_count","1"),t.append("group_column",""),t.append("move_extra_rows_to_desc",(!1).toString()),t.append("data",JSON.stringify(this.apiData)),t.append("column_mapping_indexes",JSON.stringify({})),this.apiData.hasOwnProperty("is_table_training_doc")&&t.append("is_table_training_doc",(!0).toString());let i=yield this.getToken();e=yield G().post(oe.hi.group_line_items,t,{headers:{Authorization:i}})}catch(t){return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void this.hideLoading()}this.hideLoading(),this.formatAfterHook(e)}))},formatAfterHook(e){e.data.tables&&e.data.tables[0].extraction_info&&this.$emit("updateTableForSave",e.data.tables)},isViewPo(){this.$route.fullPath.match(/po-matching/g)&&(this.is_po_view=!0)},showlineHighlighted(e){if(!this.is_po_view)return;let t=this.getConnectionInfo(e);if(!t||0===Object.keys(t).length)return;const i=new CustomEvent("show_line_highlighted",{detail:t});document.dispatchEvent(i)},removedLineHighlight(e){if(!this.is_po_view)return;let t=this.getConnectionInfo(e);if(!t||0===Object.keys(t).length)return;const i=new CustomEvent("removed_highlight",{detail:t});document.dispatchEvent(i)},keyDownEvent(e){if("v"===e.key&&e.ctrlKey){let t=document.activeElement;if(!t||!t.classList.contains("droptarget"))return;this.drop(e)}}},setup(){let e=[],t={};return{headers:(0,te.iH)(),lineitems:(0,te.iH)(),move_extra_rows_to_desc:(0,te.iH)(!0),header_rows_count:(0,te.iH)(1),extra_columns:(0,te.iH)(e),addFieldsDialog:(0,te.iH)(!1),poEditRestrictDialog:(0,te.iH)(!1),poEditRestrictMessage:(0,te.iH)(""),new_field_model:(0,te.iH)(t),adv_column_options:e,headerRowCountRules:[e=>null!==e||"Please type number",e=>e>0&&e<100||"Please type number"]}}});var ue=i(74260),he=i(30481),me=i(39200),pe=i(39975),_e=i(5363),ge=i(82226),fe=i(27011),we=i(83414),ye=i(52035),be=i(2350),ve=i(24554),xe=i(2165),ke=i(46778),Ce=i(10151),De=i(25589),Oe=i(99367),Ee=i(39570),Se=i(13747),Ie=i(64689),Te=i(65735),Le=i(72448),Me=i(75096),Fe=i(60677),qe=i(7518),Ze=i.n(qe);const Re=(0,ue.Z)(ce,[["render",J]]),We=Re;Ze()(ce,"components",{QMarkupTable:he.Z,QFab:me.Z,QFabAction:pe.Z,QTooltip:_e.Z,QBtnDropdown:ge.Z,QList:fe.Z,QItem:we.Z,QItemSection:ye.Z,QItemLabel:be.Z,QIcon:ve.Z,QBtn:xe.Z,QDialog:ke.Z,QCard:Ce.Z,QCardSection:De.Z,QCardActions:Oe.Z,QToolbar:Ee.Z,QToolbarTitle:Se.Z,QInput:Ie.Z,QCheckbox:Te.Z,QSelect:Le.Z,QAvatar:Me.Z}),Ze()(ce,"directives",{ClosePopup:Fe.Z})},72113:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var o=i(83673);const s={class:"loading-component"},a=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1),l=[a];function n(e,t,i,a,n,r){return(0,o.wg)(),(0,o.iD)("div",s,l)}const r=document.querySelector.bind(document),d=(0,o.aZ)({el:"#app",name:"Loader",props:["show","hide","zIndex"],data(){return{}},watch:{show(){this.showLoader()},hide(){this.hideLoader()},zIndex(){r(".loading-component").style.zIndex=this.zIndex}},methods:{showLoader(){r(".loading-component").style.display="block"},hideLoader(){r(".loading-component").style.display="none"}}});var c=i(74260),u=i(2165),h=i(7518),m=i.n(h);const p=(0,c.Z)(d,[["render",n]]),_=p;m()(d,"components",{QBtn:u.Z})},93305:(e,t,i)=>{"use strict";i.d(t,{Z:()=>B});var o=i(83673),s=i(98880),a=i(62323);const l={class:"text-weight-bold"},n={class:"table-container col-sm-12 col-md-12 col-lg-12 min-height-300"},r={key:0,class:"q-ml-auto"},d={class:"q-ml-sm"};function c(e,t,i,c,u,h){const m=(0,o.up)("q-toolbar-title"),p=(0,o.up)("q-btn"),_=(0,o.up)("q-toolbar"),g=(0,o.up)("q-card-section"),f=(0,o.up)("q-icon"),w=(0,o.up)("q-input"),y=(0,o.up)("q-space"),b=(0,o.up)("q-tooltip"),v=(0,o.up)("q-td"),x=(0,o.up)("q-select"),k=(0,o.up)("q-tr"),C=(0,o.up)("q-table"),D=(0,o.up)("q-card"),O=(0,o.up)("q-dialog"),E=(0,o.up)("q-avatar"),S=(0,o.up)("q-card-actions");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(O,{modelValue:e.display_list,"onUpdate:modelValue":t[5]||(t[5]=t=>e.display_list=t),persistent:"","transition-show":"scale","transition-hide":"scale",onKeydown:t[6]||(t[6]=(0,s.D2)((t=>e.display_list=!1),["esc"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{style:{width:"1000px","max-width":"1060px",height:"600px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o._)("span",l,(0,a.zw)(e.$t("manage_regexes")),1)])),_:1}),(0,o.Wm)(p,{flat:"",round:"",dense:"",icon:"close",onClick:t[0]||(t[0]=t=>e.checkForUnSaveChanges())})])),_:1}),(0,o.Wm)(g,{class:"row items-center q-pb-none"}),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o.Wm)(C,{ref:"tableRef",style:{height:"500px"},class:(0,a.C_)("sticky-header-table table-regexex-"+e.doctype),"table-header-class":"back-white",rows:e.rows,"no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),columns:e.columns,"rows-per-page-options":[0],"row-key":"id",filter:e.filter,loading:e.loading,"filter-method":e.customFilter},{top:(0,o.w5)((()=>[(0,o.Wm)(w,{outlined:"",debounce:"300",dense:"",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter=t),label:e.$t("search")},{append:(0,o.w5)((()=>[(0,o.Wm)(f,{name:"search"})])),_:1},8,["modelValue","label"]),(0,o.Wm)(y),(0,o.Wm)(p,{color:"primary",class:"mr-6",style:{height:"40px"},label:e.$t("add_new"),onClick:t[2]||(t[2]=t=>e.addNew())},null,8,["label"]),!0===e.validate_pattern?((0,o.wg)(),(0,o.j4)(p,{key:0,color:"orange",class:"mr-6",style:{height:"40px"},label:e.$t("validate"),onClick:t[3]||(t[3]=t=>e.validatePattern())},null,8,["label"])):(0,o.kq)("",!0),e.hasPendingUpdate()?((0,o.wg)(),(0,o.j4)(p,{key:1,color:"red",class:"mr-6",style:{height:"40px"},label:e.$t("save_changes"),onClick:t[4]||(t[4]=t=>e.saveAll())},null,8,["label"])):(0,o.kq)("",!0)])),body:(0,o.w5)((t=>[!1===t.row.is_deleted?((0,o.wg)(),(0,o.j4)(k,{key:0,props:t,id:t.key},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(i=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i.name},["action"===i.name?((0,o.wg)(),(0,o.j4)(v,{key:0,style:{width:"10%"}},{default:(0,o.w5)((()=>[""!==t.row.id?((0,o.wg)(),(0,o.iD)("span",r,[(0,o.Wm)(p,{color:!1===t.row.disabled?"positive":"negative","icon-right":!1===t.row.disabled?"visibility":"visibility_off","no-caps":"",flat:"",dense:"",onClick:i=>e.handleDisable(t.row,t.rowIndex)},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>["DEFAULT"!==t.row.org_id?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)((0,a.zw)(!1===t.row.disabled?e.$t("click_to_disable"):e.$t("click_to_enable")),1)],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,a.zw)(e.$t("cannot_edit_default_type")),1)],64))])),_:2},1024)])),_:2},1032,["color","icon-right","onClick"]),"DEFAULT"!==t.row.org_id?((0,o.wg)(),(0,o.j4)(p,{key:0,color:"grey","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:i=>e.handleDelete(t.row,t.rowIndex)},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])):(0,o.kq)("",!0),""===t.row.id?((0,o.wg)(),(0,o.j4)(p,{key:1,class:"float-right",color:"grey","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:i=>e.deleteNewRow(t.rowIndex)},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])),_:2},1024)):(0,o.kq)("",!0),"regexValuePattern"===i.name?((0,o.wg)(),(0,o.j4)(v,{key:1,style:{width:"70%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{borderless:"",tabindex:"0","data-id":t.key,class:(0,a.C_)("input-field "+(!t.row.validate||t.row.required_error?"column-error-border":"")),modelValue:t.row.regexValuePattern,"onUpdate:modelValue":[e=>t.row.regexValuePattern=e,i=>{e.inputValueChanges("regexValuePattern",t.key,i,t.rowIndex)}],disable:"DEFAULT"==t.row.org_id},{append:(0,o.w5)((()=>[!t.row.validate||t.row.required_error?((0,o.wg)(),(0,o.j4)(f,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[t.row.validate?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)((0,a.zw)(e.$t("pattern_invalid")),1)],64)),t.row.required_error?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,a.zw)(e.$t("pattern_empty")),1)],64)):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1024)):(0,o.kq)("",!0)])),default:(0,o.w5)((()=>["DEFAULT"==t.row.org_id?((0,o.wg)(),(0,o.j4)(b,{key:0,class:"bg-red"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("cannot_edit_default_type")),1)])),_:1})):(0,o.kq)("",!0)])),_:2},1032,["data-id","class","modelValue","onUpdate:modelValue","disable"])])),_:2},1024)):(0,o.kq)("",!0),"regexOrigin"===i.name?((0,o.wg)(),(0,o.j4)(v,{key:2,style:{width:"20%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.regexOrigin,"onUpdate:modelValue":[e=>t.row.regexOrigin=e,i=>{e.inputValueChanges("regexOrigin",t.key,i,t.rowIndex)}],options:e.language_origin_list,disable:"DEFAULT"==t.row.org_id,"emit-value":"","map-options":""},{default:(0,o.w5)((()=>["DEFAULT"==t.row.org_id?((0,o.wg)(),(0,o.j4)(b,{key:0,class:"bg-red"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("cannot_edit_default_type")),1)])),_:1})):(0,o.kq)("",!0)])),_:2},1032,["data-id","modelValue","onUpdate:modelValue","options","disable"])])),_:2},1024)):(0,o.kq)("",!0)],64)))),128))])),_:2},1032,["props","id"])):(0,o.kq)("",!0)])),_:1},8,["class","rows","no-data-label","columns","filter","loading","filter-method"])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(O,{modelValue:e.unsave_warning,"onUpdate:modelValue":t[9]||(t[9]=t=>e.unsave_warning=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(g,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",d,(0,a.zw)(e.$t("unsave_changes_warning")),1)])),_:1}),(0,o.Wm)(S,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{flat:"","data-cy":"cancel",label:e.$t("cancel"),color:"primary",onClick:t[7]||(t[7]=t=>e.unsave_warning=!1)},null,8,["label"]),(0,o.Wm)(p,{flat:"","data-cy":"done",label:e.$t("proceed"),color:"primary",onClick:t[8]||(t[8]=t=>e.proceedWithOutSave())},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var u=i(61959),h=i(77378),m=i(45401),p=i(54268),_=i(30052),g=i.n(_),f=i(29938),w=i(91949),y=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const b=(0,o.aZ)({el:"#app",mixins:[m.Z,h.Z],props:{type:{type:String,default:"document"},loading_new_data:{type:Boolean,default:!1},doctype:{type:String,default:""},display:{type:Boolean,default:!1},list_data:{},language_origin_list:[]},components:{},data(){return{docId:""}},setup(){let e=[];const t=(0,u.iH)(e);return{display_list:(0,u.iH)(!1),loading:(0,u.iH)(!0),columns:t,rows:(0,u.iH)(e),filter:(0,u.iH)(""),pending_update:(0,u.iH)({}),original_data:{},unsave_warning:(0,u.iH)(!1),validate_pattern:(0,u.iH)(!1),flat_language_list:(0,u.iH)({})}},watch:{loading_new_data:{handler:function(e,t){!0===e&&(this.loading=e)}},display:{handler:function(e,t){!0===e&&(this.display_list=e,this.loading=!e,this.prepareListView(this.list_data))}},list_data:{handler:function(e,t){this.prepareListView(e),this.flatLanguageList()}}},mounted:function(){this.docId=this.$route.params.id,this.prepareColumns()},methods:{flatLanguageList(){if((0,f.fg)(this.flat_language_list))for(let[e,t]of Object.entries(this.language_origin_list)){let e=t;this.flat_language_list[e.value]=e.label}},showListView(){this.display_list=!0},prepareListView(e){this.original_data=JSON.parse(JSON.stringify(e)),this.prepareRows()},prepareColumns(){this.columns.push(Object.assign({},{name:"regexOrigin",label:this.$t("origin"),field:"regexOrigin",align:"left"})),this.columns.push(Object.assign({},{name:"regexValuePattern",label:this.$t("pattern"),field:"regexValuePattern",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(){this.rows=[];for(let[e,t]of Object.entries(this.list_data)){const e=t;this.addNewRow(e)}},addNewRow(e){let t=Object.assign({},e);return t["validate"]=!0,t["required_error"]=!1,this.rows.push(t),this.rows.length.toString()},addNew(){const e=this.addNewRow({id:"",regexType:this.doctype,regexValuePattern:"",regexOrigin:"",is_deleted:!1,org_id:(0,w.Y4)("org_id")});this.pending_update[e]=!0,setTimeout((()=>{this.scrollToBottom()}),0)},scrollToBottom(){let e=document.querySelector(".table-regexex-"+this.doctype);if(!e)return;let t=e.querySelector(".q-table__middle");t&&(t.scrollTop=t.scrollHeight)},handleDisable(e,t){try{if(""===e.id||"DEFAULT"==e.org_id)return;this.rows[t].disabled=!e.disabled,this.pending_update[t.toString()]=!0}catch(i){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}},handleDelete(e,t){try{if(""===e.id)return;this.rows[t].is_deleted=!0,this.pending_update[t.toString()]=!0}catch(i){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}},deleteNewRow(e){this.rows.splice(e,1);const t=e.toString();this.pending_update.hasOwnProperty(t)&&delete this.pending_update[t]},inputValueChanges(e,t,i,o){if(""!==t||"regexValuePattern"!=e||""===i)for(let[s,a]of Object.entries(this.original_data)){const o=a;t===o.id&&(o[e]!==i&&("regexValuePattern"!=e||""===i?this.pending_update[s.toString()]=!0:this.validate_pattern=!0))}else this.validate_pattern=!0},saveAll(){return y(this,void 0,void 0,(function*(){try{if(!this.validateData())return;let e;this.cleanUpDataBeforeSave(),this.showLoading();let t=yield(0,p.O_)(),i=new FormData;if(i.append("data",JSON.stringify(this.rows)),e=yield g().post(p.hi.post_data_fellowkv+(0,p.pA)(this.type),i,{headers:{Authorization:t}}),!1===e.data.success)throw{message:e.data.message};this.pending_update={},this.dispatchSuccessEvent()}catch(e){this.showErrorToast("Something went wrong while loading data. Please try again.")}finally{this.hideLoading()}}))},validateData(){let e=!0;return this.validate_pattern&&(e=!1,this.showErrorToast("Please validate Before save.")),this.regexValuePatternsEmpty()&&(e=!1,this.showErrorToast("Pattern field is required")),e},regexValuePatternsEmpty(){let e=!1;return this.rows.forEach(((t,i)=>{t["regexValuePattern"]&&""!==t["regexValuePattern"]?t.required_error=!1:(t.required_error=!0,e=!0)})),e},cleanUpDataBeforeSave(){this.rows.forEach(((e,t)=>{e["id"]&&""!==e["id"]||delete e["id"]}))},dispatchSuccessEvent(){const e=new CustomEvent("regexes_saved",{detail:this.doctype});document.dispatchEvent(e)},checkForUnSaveChanges(){this.hasPendingUpdate()?this.unsave_warning=!0:this.display_list=!1},hasPendingUpdate(){return!(0,f.fg)(this.pending_update)},proceedWithOutSave(){this.unsave_warning=!1,this.display_list=!1,this.pending_update={},this.validate_pattern=!1},validatePattern(){return y(this,void 0,void 0,(function*(){try{if(this.regexValuePatternsEmpty())return void this.showErrorToast("Pattern field is required");let e;this.showLoading();let t=yield(0,p.O_)(),i=new FormData;if(i.append("patterns",JSON.stringify(this.getValidatePatternData())),e=yield g().post(p.hi.validate_patterns,i,{headers:{Authorization:t}}),!1===e.data.success)throw{message:e.data.message};this.validate_pattern=!1,this.updateRows(e.data.data)}catch(e){this.showErrorToast("Something went wrong while loading data. Please try again.")}finally{this.hideLoading()}}))},updateRows(e){for(let[t,i]of Object.entries(e))this.rows.forEach(((e,o)=>{if(e["regexValuePattern"]==t){const t=!1!==i;e.validate=t,!1===t&&(this.pending_update[o.toString()]=!0,this.validate_pattern=!0)}}))},getValidatePatternData(){let e=[];return this.rows.forEach(((t,i)=>{const o=t["regexValuePattern"]&&""!==t["regexValuePattern"]?t["regexValuePattern"].toString():"";e.push(o)})),e},customFilter(e,t){const i=t.toLowerCase();let o=e;return i&&""!==i?(o=e.filter(((e,t)=>{let o=!1;for(let[s,a]of Object.entries(e)){let e=a,t=e&&null!==e?e.toString():"";if(e=t.toLowerCase(),e.includes(i)){o=!0;break}if("regexOrigin"===s&&e&&this.flat_language_list[t]&&(e=this.flat_language_list[t].toLowerCase(),e.includes(i))){o=!0;break}}return o})),o):o}}});var v=i(74260),x=i(46778),k=i(10151),C=i(39570),D=i(13747),O=i(2165),E=i(25589),S=i(17132),I=i(64689),T=i(24554),L=i(62025),M=i(18186),F=i(83884),q=i(5363),Z=i(72448),R=i(75096),W=i(99367),A=i(7518),V=i.n(A);const z=(0,v.Z)(b,[["render",c],["__scopeId","data-v-57a359fa"]]),B=z;V()(b,"components",{QDialog:x.Z,QCard:k.Z,QToolbar:C.Z,QToolbarTitle:D.Z,QBtn:O.Z,QCardSection:E.Z,QTable:S.Z,QInput:I.Z,QIcon:T.Z,QSpace:L.Z,QTr:M.Z,QTd:F.Z,QTooltip:q.Z,QSelect:Z.Z,QAvatar:R.Z,QCardActions:W.Z})},58116:(e,t,i)=>{"use strict";i.d(t,{Z:()=>Z});var o=i(83673),s=i(62323);const a={class:"text-weight-bold"},l={class:"full-width q-mb-md"},n={class:"table-container full-width min-height-300"},r={class:"text-left"},d={class:"text-left"},c={key:0},u={class:"text-center"};function h(e,t,i,h,m,p){const _=(0,o.up)("q-toolbar-title"),g=(0,o.up)("q-btn"),f=(0,o.up)("q-toolbar"),w=(0,o.up)("q-card-section"),y=(0,o.up)("q-tooltip"),b=(0,o.up)("q-icon"),v=(0,o.up)("q-input"),x=(0,o.up)("q-markup-table"),k=(0,o.up)("q-card"),C=(0,o.up)("q-dialog"),D=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(C,{persistent:"",modelValue:e.showDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.showDialog=t),"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{style:{width:"1000px","max-width":"1060px",height:"600px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o._)("span",a,(0,s.zw)(e.$t("manage_regexes")),1)])),_:1}),(0,o.wy)((0,o.Wm)(g,{flat:"",round:"",dense:"",icon:"close",onClick:e.setShowRegexDlg},null,8,["onClick"]),[[D]])])),_:1}),(0,o.Wm)(w,{class:"row items-center q-pb-none"}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o._)("div",l,[!0===e.validate_pattern?((0,o.wg)(),(0,o.j4)(g,{key:0,color:"orange",class:"mr-6 float-right",label:e.$t("validate"),onClick:t[0]||(t[0]=t=>e.validatePattern())},null,8,["label"])):(0,o.kq)("",!0),!0===e.allowSave?((0,o.wg)(),(0,o.j4)(g,{key:1,class:"mr-6 float-right bg-primary text-white",label:e.$t("save_changes"),onClick:t[1]||(t[1]=t=>e.saveAll())},null,8,["label"])):(0,o.kq)("",!0)])])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",r,(0,s.zw)(e.$t("regex")),1)])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.regexList,((t,i)=>((0,o.wg)(),(0,o.iD)("tr",{key:t["key"]},[(0,o._)("td",d,[(0,o.Wm)(v,{dense:"",borderless:"",tabindex:"0","data-id":t["key"],class:(0,s.C_)(!t.validate||t.required_error?"column-error-border":""),modelValue:this.regexList[i].value,"onUpdate:modelValue":[e=>this.regexList[i].value=e,o=>{e.inputValueChanges(o,i,t["key"])}]},{append:(0,o.w5)((()=>[!t.validate||t.required_error?((0,o.wg)(),(0,o.j4)(b,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[t.validate?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)((0,s.zw)(e.$t("pattern_invalid")),1)],64)),t.required_error?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,s.zw)(e.$t("pattern_empty")),1)],64)):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1024)):(0,o.kq)("",!0)])),_:2},1032,["data-id","class","modelValue","onUpdate:modelValue"])])])))),128)),!this.regexList||this.regexList.length<1?((0,o.wg)(),(0,o.iD)("tr",c,[(0,o._)("td",u,(0,s.zw)(e.$t("no_data_found")),1)])):(0,o.kq)("",!0)])])),_:1})])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var m=i(77378),p=i(61959),_=i(60727),g=i(45401),f=i(80579),w=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const y=(0,o.aZ)({el:"#app",mixins:[g.Z,m.Z],props:{loading_new_data:{type:Boolean,default:!1},showRegexDlg:{type:Boolean,default:!1}},components:{},data(){return{}},setup(){const e=(0,_.H_)();return{docStore:e,loading:(0,p.iH)(!0),allowSave:(0,p.iH)(!1),showDialog:(0,p.iH)(!1),regexList:(0,p.iH)([]),validate_pattern:(0,p.iH)(!1)}},watch:{loading_new_data:{handler:function(e,t){!0===e&&(this.loading=e)}},showRegexDlg:{handler:function(e,t){!0===e&&(this.showDialog=e,this.loading=!e,this.convertMapintoArray())}}},methods:{inputValueChanges(e,t,i){e!==this.docStore.regex.get(i)&&(this.validate_pattern=!0,this.allowSave=!1,""===e?(this.regexList[t].validate=!1,this.regexList[t].required_error=!0):(this.regexList[t].validate=!0,this.regexList[t].required_error=!1))},saveAll(){this.validateData()&&(this.allowSave=!1,this.showDialog=!1,this.updateStoreRegexMap(),this.$emit("updateRegexByRule"))},updateStoreRegexMap(){this.regexList.forEach(((e,t)=>{this.docStore.regex.has(e.key)&&this.docStore.regex.set(e.key,e.value)}))},validateData(){let e=!0;return this.validate_pattern&&(e=!1,this.showErrorToast("Please validate Before save.")),this.regexValuePatternsEmpty()&&(e=!1,this.showErrorToast("Pattern field is required")),e},regexValuePatternsEmpty(){let e=!1;return this.regexList.forEach(((t,i)=>{t.value&&""!==t.value?t.required_error=!1:(t.required_error=!0,e=!0)})),e},dispatchSuccessEvent(){const e=new CustomEvent("regexes_saved",{detail:this.doctype});document.dispatchEvent(e)},validatePattern(){return w(this,void 0,void 0,(function*(){try{if(this.regexValuePatternsEmpty())return void this.showErrorToast("Pattern field is required");this.showLoading();const e=yield f.Fn.validatePattern(this.getValidatePatternData());if(!1===e.success)throw{message:e.message};this.validate_pattern=!1,this.allowSave=!0,this.updateRows(e.data)}catch(e){this.showErrorToast("Something went wrong while loading data. Please try again.")}finally{this.hideLoading()}}))},updateRows(e){for(let[t,i]of Object.entries(e))this.regexList.forEach(((e,o)=>{if(e.value==t){const t=!1!==i;e.validate=t,!1===t&&(this.validate_pattern=!0,this.allowSave=!1)}}))},getValidatePatternData(){let e=[];return this.regexList.forEach(((t,i)=>{const o=t.value&&""!==t.value?t.value.toString():"";e.push(o)})),e},convertMapintoArray(){this.regexList=Array.from(this.docStore.regex,(([e,t])=>({["key"]:e,["value"]:t,["validate"]:!0,["required_error"]:!1})))},setShowRegexDlg(){this.$emit("setShowRegexDlg",!1)}}});var b=i(74260),v=i(46778),x=i(10151),k=i(39570),C=i(13747),D=i(2165),O=i(25589),E=i(30481),S=i(64689),I=i(24554),T=i(5363),L=i(60677),M=i(7518),F=i.n(M);const q=(0,b.Z)(y,[["render",h],["__scopeId","data-v-c739aaa4"]]),Z=q;F()(y,"components",{QDialog:v.Z,QCard:x.Z,QToolbar:k.Z,QToolbarTitle:C.Z,QBtn:D.Z,QCardSection:O.Z,QMarkupTable:E.Z,QInput:S.Z,QIcon:I.Z,QTooltip:T.Z}),F()(y,"directives",{ClosePopup:L.Z})},98718:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Bi});var o=i(83673),s=i(62323),a=i(98880);const l=e=>((0,o.dD)("data-v-54da4e6a"),e=e(),(0,o.Cn)(),e),n={class:"bg-white mb-4 p-t-b-6 image_control_panel"},r={class:"row"},d={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},c=(0,o.Uk)("Save"),u=(0,o.Uk)("Validate and Export"),h={class:"bg-white"},m={class:"top-panel row full-width"},p={class:"row q-pl-sm q-pr-sm full-width"},_={class:"col-lg-3"},g={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},f={class:"col-lg-3 pl-20"},w={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},y=l((()=>(0,o._)("div",{class:"col-lg-2"},null,-1))),b={class:"col-lg-4"},v={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},x={class:"row q-pl-sm q-pr-sm full-width"},k={class:"col-lg-3"},C={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},D=l((()=>(0,o._)("div",{class:"col-lg-5"},null,-1))),O={class:"col-lg-4"},E={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},S={class:"row q-pl-sm q-pr-sm full-width"},I={class:"col-lg-6"},T={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},L=l((()=>(0,o._)("div",{class:"col-lg-2"},null,-1))),M={class:"col-lg-4"},F={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},q={class:"row q-pl-sm q-pr-sm full-width"},Z={class:"col-lg-2"},R={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},W={class:"col-lg-6 p-t-8"},A={class:"col-lg-4"},V={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},z={class:"row full-width"},B=l((()=>(0,o._)("div",{class:"border-top-bdbdbd"},null,-1))),N={class:"row"},P={class:"row"},U={class:"row padding-left-12-percent"},j={style:{width:"60%"}},H={class:"padding-top-3-percent",style:{width:"40%"}},$=l((()=>(0,o._)("span",{class:"pl-6"}," cm ",-1))),Q={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},Y={class:"row"},J={class:"row padding-left-12-percent"},K={style:{width:"60%"}},G={class:"padding-top-3-percent",style:{width:"40%"}},X=l((()=>(0,o._)("span",{class:"pl-6"}," cm ",-1))),ee={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},te={class:"row"},ie=l((()=>(0,o._)("div",{class:"border-top-bdbdbd"},null,-1))),oe={class:"row"},se={class:"full-width"},ae={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},le=l((()=>(0,o._)("div",{class:"border-top-bdbdbd margin-top-bottom"},null,-1))),ne={class:"row"},re={class:"row"},de={class:"row"},ce={class:"row"},ue={class:"row"},he={class:"row"},me=l((()=>(0,o._)("div",{class:"border-top-bdbdbd"},null,-1))),pe={class:"row"},_e={class:"row"},ge={class:"row"},fe={class:"row"},we={class:"row"},ye={class:"row"},be=l((()=>(0,o._)("div",{class:"border-top-bdbdbd"},null,-1))),ve={class:"row"},xe={class:"row"},ke={class:"row"},Ce={style:{width:"25%"},class:"padding-top-3-percent"},De={style:{width:"40%"}},Oe={class:"padding-top-3-percent",style:{width:"30%"}},Ee=l((()=>(0,o._)("span",{class:"pl-6"}," cm ",-1))),Se={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},Ie={class:"row padding-top-6"},Te={style:{width:"25%"},class:"padding-top-3-percent"},Le={style:{width:"40%"}},Me={class:"padding-top-3-percent",style:{width:"30%"}},Fe=l((()=>(0,o._)("span",{class:"pl-6"}," cm ",-1))),qe={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},Ze=l((()=>(0,o._)("div",{class:"border-top-bdbdbd margin-top-bottom"},null,-1))),Re={class:"row"},We={class:"full-width"},Ae={key:0,class:"float-right font-size-12 pl-6 text-teal-5"},Ve=l((()=>(0,o._)("div",{class:"border-top-bdbdbd margin-top-bottom"},null,-1))),ze={class:"col-xs-12 col-sm-9 col-md-9 col-lg-9"},Be={class:"full-width full-height bg-white table-extraction-view",id:"image_container2",style:{position:"relative"}},Ne=l((()=>(0,o._)("br",{class:"clear"},null,-1))),Pe={class:"col-lg-7 q-pa-sm"},Ue={class:"no-border"},je={class:"float-left"},He={class:"border-top border-left no-border-bottom"},$e={class:"border-top border-left no-border-bottom"},Qe={class:"border-top border-left no-border-bottom"},Ye={class:"border-left",colspan:"6"},Je={class:"float-left"},Ke={class:"no-border-bottom"},Ge={class:""},Xe={class:"float-left"},et={class:"border-left"},tt={class:"border-left"},it={class:"border-left"},ot={class:"border-left"},st={class:"border-left"},at={class:"border-left"},lt={class:"border-left"},nt={class:"border-left"},rt={class:"border-left border-right"},dt={class:"no-border-bottom"},ct={class:""},ut={class:"border-left"},ht={class:"float-left"},mt=l((()=>(0,o._)("td",{class:"no-border-bottom"},null,-1))),pt={class:"border-left"},_t={class:"float-left"},gt=l((()=>(0,o._)("td",{class:"no-border-bottom"},null,-1))),ft={class:"border-left"},wt={class:"float-left"},yt=l((()=>(0,o._)("td",{class:"no-border-bottom"},null,-1))),bt={class:"border-left border-bottom"},vt={class:"float-left"},xt=l((()=>(0,o._)("td",{class:"no-border-bottom"},null,-1))),kt={class:""},Ct=l((()=>(0,o._)("img",{src:"fuzzy-search-white.svg"},null,-1))),Dt=l((()=>(0,o._)("span",{class:"text-weight-bold"},"Masterdata",-1))),Ot={id:"fuzzySearchField",class:"full-width q-pl-md q-pr-md"},Et={class:"q-pa-md"},St={class:"q-mt-md full-width text-center"};function It(e,t){const i=(0,o.up)("q-tooltip"),l=(0,o.up)("q-icon"),It=(0,o.up)("autoTesting"),Tt=(0,o.up)("q-avatar"),Lt=(0,o.up)("q-input"),Mt=(0,o.up)("q-checkbox"),Ft=(0,o.up)("MediMultiSelectInputImage"),qt=(0,o.up)("q-markup-table"),Zt=(0,o.up)("q-toolbar-title"),Rt=(0,o.up)("q-btn"),Wt=(0,o.up)("q-toolbar"),At=(0,o.up)("q-th"),Vt=(0,o.up)("q-tr"),zt=(0,o.up)("q-td"),Bt=(0,o.up)("q-table"),Nt=(0,o.up)("q-card-section"),Pt=(0,o.up)("q-card"),Ut=(0,o.up)("q-dialog"),jt=(0,o.up)("export-dialog"),Ht=(0,o.up)("Loader"),$t=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.isModelReady()?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",n,[(0,o._)("div",r,[(0,o._)("div",d,[(0,o.Wm)(l,{name:"img:save.svg",size:"24px",class:"float-left q-mr-sm cursor-pointer",onClick:e.saveData},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[c])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(l,{name:"import_export",onClick:e.exportData,color:"",size:"24px",class:"float-left q-mr-sm cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[u])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(It),e.renderOpenWindoIcon?((0,o.wg)(),(0,o.j4)(l,{key:0,name:"exit_to_app",size:"24px",class:"float-right q-mr-sm cursor-pointer",onClick:t[0]||(t[0]=t=>e.openComponentInSaparateWindow())})):(0,o.kq)("",!0)])])]),(0,o._)("div",h,[(0,o._)("div",m,[(0,o._)("div",p,[(0,o._)("div",_,[(0,o._)("div",null,[(0,o.Uk)((0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["customer_number"]))+" ",1),e.getLowerConfidence(e.model["customer_number"])?((0,o.wg)(),(0,o.iD)("span",g,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["customer_number"]))+"% ",1)])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o.Wm)(Lt,{outlined:"",disable:e.isReadOnly,"data-name":e.model["customer_number"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),class:(0,s.C_)("input-field full-width  "+e.fieldsDef["customer_number"].color+" "+e.model["customer_number"].name),"onUpdate:modelValue":[t[2]||(t[2]=t=>e.inputValueChanges("customer_number")),t[3]||(t[3]=t=>e.model["customer_number"].formatted_value=t)],modelValue:e.model["customer_number"].formatted_value},(0,o.Nv)({_:2},[e.fieldsDef["customer_number"].fuzzy_name&&null!=e.fieldsDef["customer_number"].fuzzy_name?{name:"append",fn:(0,o.w5)((()=>[(0,o.Wm)(Tt,{class:"cursor-pointer",size:"24px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:"fuzzy-search.svg",onClick:t[1]||(t[1]=t=>e.applyFuzzySearch(e.model["customer_number"].formatted_value))})])),_:1})]))}:void 0]),1032,["disable","data-name","onKeyup","class","modelValue"])])]),(0,o._)("div",f,[(0,o._)("div",null,[(0,o.Uk)((0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["versandanschrift"]))+" ",1),e.getLowerConfidence(e.model["versandanschrift"])?((0,o.wg)(),(0,o.iD)("span",w,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["versandanschrift"]))+"% ",1)])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o.Wm)(Lt,{outlined:"",onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),"data-name":e.model["versandanschrift"].name,disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["versandanschrift"].color+" "+e.model["versandanschrift"].name),"onUpdate:modelValue":[t[4]||(t[4]=t=>e.inputValueChanges("versandanschrift")),t[5]||(t[5]=t=>e.model["versandanschrift"].formatted_value=t)],modelValue:e.model["versandanschrift"].formatted_value},null,8,["onKeyup","data-name","disable","class","modelValue"])])]),y,(0,o._)("div",b,[(0,o._)("div",null,[(0,o.Uk)((0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["absender"]))+" ",1),e.getLowerConfidence(e.model["absender"])?((0,o.wg)(),(0,o.iD)("span",v,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["absender"]))+"% ",1)])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["absender"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["absender"].color+" "+e.model["absender"].name),"onUpdate:modelValue":[t[7]||(t[7]=t=>e.inputValueChanges("absender")),t[8]||(t[8]=t=>e.model["absender"].formatted_value=t)],modelValue:e.model["absender"].formatted_value},(0,o.Nv)({_:2},[e.fieldsDef["absender"].fuzzy_name&&null!=e.fieldsDef["absender"].fuzzy_name?{name:"append",fn:(0,o.w5)((()=>[(0,o.Wm)(Tt,{class:"cursor-pointer",size:"24px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:"fuzzy-search.svg",onClick:t[6]||(t[6]=t=>e.applyFuzzySearch(e.model["absender"].formatted_value))})])),_:1})]))}:void 0]),1032,["data-name","onKeyup","disable","class","modelValue"])])])]),(0,o._)("div",x,[(0,o._)("div",k,[(0,o._)("div",null,[(0,o.Uk)((0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["datum"]))+" ",1),e.getLowerConfidence(e.model["datum"])?((0,o.wg)(),(0,o.iD)("span",C,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["datum"]))+"% ",1)])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["datum"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["datum"].color+" "+e.model["datum"].name),"onUpdate:modelValue":[t[9]||(t[9]=t=>e.inputValueChanges("datum")),t[10]||(t[10]=t=>e.model["datum"].formatted_value=t)],modelValue:e.model["datum"].formatted_value},null,8,["data-name","onKeyup","disable","class","modelValue"])])]),D,(0,o._)("div",O,[(0,o._)("div",null,[(0,o.Uk)((0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["inhaber"]))+" ",1),e.getLowerConfidence(e.model["inhaber"])?((0,o.wg)(),(0,o.iD)("span",E,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["inhaber"]))+"% ",1)])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["inhaber"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["inhaber"].color+" "+e.model["inhaber"].name),"onUpdate:modelValue":[t[12]||(t[12]=t=>e.inputValueChanges("inhaber")),t[13]||(t[13]=t=>e.model["inhaber"].formatted_value=t)],modelValue:e.model["inhaber"].formatted_value},(0,o.Nv)({_:2},[e.fieldsDef["inhaber"].fuzzy_name&&null!=e.fieldsDef["inhaber"].fuzzy_name?{name:"append",fn:(0,o.w5)((()=>[(0,o.Wm)(Tt,{class:"cursor-pointer",size:"24px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:"fuzzy-search.svg",onClick:t[11]||(t[11]=t=>e.applyFuzzySearch(e.model["inhaber"].formatted_value))})])),_:1})]))}:void 0]),1032,["data-name","onKeyup","disable","class","modelValue"])])])]),(0,o._)("div",S,[(0,o._)("div",I,[(0,o._)("div",null,[(0,o.Uk)((0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["komission"]))+" ",1),e.getLowerConfidence(e.model["komission"])?((0,o.wg)(),(0,o.iD)("span",T,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["komission"]))+"% ",1)])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["komission"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["komission"].color+" "+e.model["komission"].name),"onUpdate:modelValue":[t[14]||(t[14]=t=>e.inputValueChanges("komission")),t[15]||(t[15]=t=>e.model["komission"].formatted_value=t)],modelValue:e.model["komission"].formatted_value},null,8,["data-name","onKeyup","disable","class","modelValue"])])]),L,(0,o._)("div",M,[(0,o._)("div",null,[(0,o.Uk)((0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["adresse"]))+" ",1),e.getLowerConfidence(e.model["adresse"])?((0,o.wg)(),(0,o.iD)("span",F,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["adresse"]))+"% ",1)])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["adresse"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["adresse"].color+" "+e.model["adresse"].name),"onUpdate:modelValue":[t[17]||(t[17]=t=>e.inputValueChanges("adresse")),t[18]||(t[18]=t=>e.model["adresse"].formatted_value=t)],modelValue:e.model["adresse"].formatted_value},(0,o.Nv)({_:2},[e.fieldsDef["adresse"].fuzzy_name&&null!=e.fieldsDef["adresse"].fuzzy_name?{name:"append",fn:(0,o.w5)((()=>[(0,o.Wm)(Tt,{class:"cursor-pointer",size:"24px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:"fuzzy-search.svg",onClick:t[16]||(t[16]=t=>e.applyFuzzySearch(e.model["adresse"].formatted_value))})])),_:1})]))}:void 0]),1032,["data-name","onKeyup","disable","class","modelValue"])])])]),(0,o._)("div",q,[(0,o._)("div",Z,[(0,o._)("div",null,[(0,o.Uk)((0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["menge"]))+" ",1),e.getLowerConfidence(e.model["menge"])?((0,o.wg)(),(0,o.iD)("span",R,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["menge"]))+"% ",1)])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["menge"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["menge"].color+" "+e.model["menge"].name),"onUpdate:modelValue":[t[19]||(t[19]=t=>e.inputValueChanges("menge")),t[20]||(t[20]=t=>e.model["menge"].formatted_value=t)],modelValue:e.model["menge"].formatted_value},null,8,["data-name","onKeyup","disable","class","modelValue"])])]),(0,o._)("div",W,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["stuck_checkbox"]),modelValue:e.model["stuck_checkbox"].formatted_value,"onUpdate:modelValue":[t[21]||(t[21]=t=>e.model["stuck_checkbox"].formatted_value=t),t[22]||(t[22]=t=>{e.handleSingleSelection("stuck_checkbox",t)})],size:"50px",class:(0,s.C_)(e.model["stuck_checkbox"].name)},null,8,["disable","label","modelValue","class"]),(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["paar_checkbox"]),modelValue:e.model["paar_checkbox"].formatted_value,"onUpdate:modelValue":[t[23]||(t[23]=t=>e.model["paar_checkbox"].formatted_value=t),t[24]||(t[24]=t=>{e.handleSingleSelection("paar_checkbox",t)})],size:"50px",class:(0,s.C_)(e.model["paar_checkbox"].name)},null,8,["disable","label","modelValue","class"]),(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["hose_checkbox"]),modelValue:e.model["hose_checkbox"].formatted_value,"onUpdate:modelValue":[t[25]||(t[25]=t=>e.model["hose_checkbox"].formatted_value=t),t[26]||(t[26]=t=>{e.handleSingleSelection("hose_checkbox",t)})],size:"50px",class:(0,s.C_)(e.model["hose_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),(0,o._)("div",A,[(0,o._)("div",null,[(0,o.Uk)((0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["telefon"]))+" ",1),e.getLowerConfidence(e.model["telefon"])?((0,o.wg)(),(0,o.iD)("span",V,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["telefon"]))+"% ",1)])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["telefon"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["telefon"].color+" "+e.model["telefon"].name),"onUpdate:modelValue":[t[28]||(t[28]=t=>e.inputValueChanges("telefon")),t[29]||(t[29]=t=>e.model["telefon"].formatted_value=t)],modelValue:e.model["telefon"].formatted_value},(0,o.Nv)({_:2},[e.fieldsDef["telefon"].fuzzy_name&&null!=e.fieldsDef["telefon"].fuzzy_name?{name:"append",fn:(0,o.w5)((()=>[(0,o.Wm)(Tt,{class:"cursor-pointer",size:"24px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:"fuzzy-search.svg",onClick:t[27]||(t[27]=t=>e.applyFuzzySearch(e.model["telefon"].formatted_value))})])),_:1})]))}:void 0]),1032,["data-name","onKeyup","disable","class","modelValue"])])])])]),(0,o._)("div",z,[((0,o.wg)(),(0,o.iD)("div",{key:e.renderKey,class:"middle-left-panel col-xs-12 col-sm-3 col-md-3 col-lg-3 q-pa-sm"},[B,(0,o._)("div",N,(0,s.zw)(e.$t("medi.fusteil")),1),(0,o._)("div",P,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["fusslange_o_checkbox"]),modelValue:e.model["fusslange_o_checkbox"].formatted_value,"onUpdate:modelValue":[t[30]||(t[30]=t=>e.model["fusslange_o_checkbox"].formatted_value=t),t[31]||(t[31]=t=>e.inputValueChanges("fusslange_o_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["fusslange_o_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),(0,o._)("div",U,[(0,o._)("div",null,(0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["fusslange_o"])),1),(0,o._)("span",j,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["fusslange_o"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["fusslange_o"].color+" "+e.model["fusslange_o"].name),"onUpdate:modelValue":[t[32]||(t[32]=t=>e.inputValueChanges("fusslange_o")),t[33]||(t[33]=t=>e.model["fusslange_o"].formatted_value=t)],modelValue:e.model["fusslange_o"].formatted_value},null,8,["data-name","onKeyup","disable","class","modelValue"])]),(0,o._)("span",H,[$,e.getLowerConfidence(e.model["fusslange_o"])?((0,o.wg)(),(0,o.iD)("span",Q,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["fusslange_o"]))+"% ",1)])):(0,o.kq)("",!0)])]),(0,o._)("div",Y,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["fusslange_m_checkbox"]),modelValue:e.model["fusslange_m_checkbox"].formatted_value,"onUpdate:modelValue":[t[34]||(t[34]=t=>e.model["fusslange_m_checkbox"].formatted_value=t),t[35]||(t[35]=t=>e.inputValueChanges("fusslange_m_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["fusslange_m_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),(0,o._)("div",J,[(0,o._)("div",null,(0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["fusslange_m"])),1),(0,o._)("span",K,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["fusslange_m"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["fusslange_m"].color+" "+e.model["fusslange_m"].name),"onUpdate:modelValue":[t[36]||(t[36]=t=>e.inputValueChanges("fusslange_m")),t[37]||(t[37]=t=>e.model["fusslange_m"].formatted_value=t)],modelValue:e.model["fusslange_m"].formatted_value},null,8,["data-name","onKeyup","disable","class","modelValue"])]),(0,o._)("span",G,[X,e.getLowerConfidence(e.model["fusslange_m"])?((0,o.wg)(),(0,o.iD)("span",ee,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["fusslange_m"]))+"% ",1)])):(0,o.kq)("",!0)])]),(0,o._)("div",te,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["softspitze"]),modelValue:e.model["softspitze"].formatted_value,"onUpdate:modelValue":[t[38]||(t[38]=t=>e.model["softspitze"].formatted_value=t),t[39]||(t[39]=t=>e.inputValueChanges("softspitze"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["softspitze"].name)},null,8,["disable","label","modelValue","class"])]),ie,(0,o._)("div",oe,[(0,o._)("div",se,[(0,o._)("div",null,[(0,o.Uk)((0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["farbe"]))+" ",1),e.getLowerConfidence(e.model["farbe"])?((0,o.wg)(),(0,o.iD)("span",ae,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["farbe"]))+"% ",1)])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["farbe"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["farbe"].color+" "+e.model["farbe"].name),"onUpdate:modelValue":[t[40]||(t[40]=t=>e.inputValueChanges("farbe")),t[41]||(t[41]=t=>e.model["farbe"].formatted_value=t)],modelValue:e.model["farbe"].formatted_value},null,8,["data-name","onKeyup","disable","class","modelValue"])])])]),le,(0,o._)("div",ne,(0,s.zw)(e.$t("medi.topbander_bei_medivan_elegance_plus")),1),(0,o._)("div",re,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["tbp_checkbox"]),modelValue:e.model["tbp_checkbox"].formatted_value,"onUpdate:modelValue":[t[42]||(t[42]=t=>e.model["tbp_checkbox"].formatted_value=t),t[43]||(t[43]=t=>e.inputValueChanges("tbp_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["tbp_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),(0,o._)("div",de,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["tbb_checkbox"]),modelValue:e.model["tbb_checkbox"].formatted_value,"onUpdate:modelValue":[t[44]||(t[44]=t=>e.model["tbb_checkbox"].formatted_value=t),t[45]||(t[45]=t=>e.inputValueChanges("tbb_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["tbb_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),(0,o._)("div",ce,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["tbe_checkbox"]),modelValue:e.model["tbe_checkbox"].formatted_value,"onUpdate:modelValue":[t[46]||(t[46]=t=>e.model["tbe_checkbox"].formatted_value=t),t[47]||(t[47]=t=>e.inputValueChanges("tbe_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["tbe_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),(0,o._)("div",ue,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["tbs_checkbox"]),modelValue:e.model["tbs_checkbox"].formatted_value,"onUpdate:modelValue":[t[48]||(t[48]=t=>e.model["tbs_checkbox"].formatted_value=t),t[49]||(t[49]=t=>e.inputValueChanges("tbs_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["tbs_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),(0,o._)("div",he,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["trk_checkbox"]),modelValue:e.model["trk_checkbox"].formatted_value,"onUpdate:modelValue":[t[50]||(t[50]=t=>e.model["trk_checkbox"].formatted_value=t),t[51]||(t[51]=t=>e.inputValueChanges("trk_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["trk_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),me,(0,o._)("div",pe,(0,s.zw)(e.$t("medi.haftbander_bei_medivan_comfort_forte")),1),(0,o._)("div",_e,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["mfb_checkbox"]),modelValue:e.model["mfb_checkbox"].formatted_value,"onUpdate:modelValue":[t[52]||(t[52]=t=>e.model["mfb_checkbox"].formatted_value=t),t[53]||(t[53]=t=>e.inputValueChanges("mfb_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["mfb_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),(0,o._)("div",ge,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["nob_checkbox"]),modelValue:e.model["nob_checkbox"].formatted_value,"onUpdate:modelValue":[t[54]||(t[54]=t=>e.model["nob_checkbox"].formatted_value=t),t[55]||(t[55]=t=>e.inputValueChanges("nob_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["nob_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),(0,o._)("div",fe,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["nom_checkbox"]),modelValue:e.model["nom_checkbox"].formatted_value,"onUpdate:modelValue":[t[56]||(t[56]=t=>e.model["nom_checkbox"].formatted_value=t),t[57]||(t[57]=t=>e.inputValueChanges("nom_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["nom_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),(0,o._)("div",we,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["seb_checkbox"]),modelValue:e.model["seb_checkbox"].formatted_value,"onUpdate:modelValue":[t[58]||(t[58]=t=>e.model["seb_checkbox"].formatted_value=t),t[59]||(t[59]=t=>e.inputValueChanges("seb_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["seb_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),(0,o._)("div",ye,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["trk_2_checkbox"]),modelValue:e.model["trk_2_checkbox"].formatted_value,"onUpdate:modelValue":[t[60]||(t[60]=t=>e.model["trk_2_checkbox"].formatted_value=t),t[61]||(t[61]=t=>e.inputValueChanges("trk_2_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["trk_2_checkbox"].name)},null,8,["disable","label","modelValue","class"])]),be,(0,o._)("div",ve,(0,s.zw)(e.$t("medi.huftbefestigung")),1),(0,o._)("div",xe,[(0,o.Wm)(Mt,{disable:e.isReadOnly,label:e.displayFieldLabelForMedi(e.fieldsDef["l_checkbox"]),modelValue:e.model["l_checkbox"].formatted_value,"onUpdate:modelValue":[t[62]||(t[62]=t=>e.model["l_checkbox"].formatted_value=t),t[63]||(t[63]=t=>e.inputValueChanges("l_checkbox"))],size:"30px",color:"grey-6",class:(0,s.C_)(e.model["l_checkbox"].name)},null,8,["disable","label","modelValue","class"]),(0,o.Wm)(Mt,{disable:e.isReadOnly,class:(0,s.C_)("padding-left-12-percent "+e.model["l_checkbox"].name),color:"grey-6",label:e.displayFieldLabelForMedi(e.fieldsDef["r_checkbox"]),modelValue:e.model["r_checkbox"].formatted_value,"onUpdate:modelValue":[t[64]||(t[64]=t=>e.model["r_checkbox"].formatted_value=t),t[65]||(t[65]=t=>e.inputValueChanges("r_checkbox"))],size:"30px"},null,8,["disable","class","label","modelValue"])]),(0,o._)("div",ke,[(0,o._)("span",Ce,(0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["hohe"])),1),(0,o._)("span",De,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["hohe"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["hohe"].color+" "+e.model["hohe"].name),"onUpdate:modelValue":[t[66]||(t[66]=t=>e.inputValueChanges("hohe")),t[67]||(t[67]=t=>e.model["hohe"].formatted_value=t)],modelValue:e.model["hohe"].formatted_value},null,8,["data-name","onKeyup","disable","class","modelValue"])]),(0,o._)("span",Oe,[Ee,e.getLowerConfidence(e.model["hohe"])?((0,o.wg)(),(0,o.iD)("span",Se,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["hohe"]))+"% ",1)])):(0,o.kq)("",!0)])]),(0,o._)("div",Ie,[(0,o._)("span",Te,(0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["taille"])),1),(0,o._)("span",Le,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["taille"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["taille"].color+" "+e.model["taille"].name),"onUpdate:modelValue":[t[68]||(t[68]=t=>e.inputValueChanges("taille")),t[69]||(t[69]=t=>e.model["taille"].formatted_value=t)],modelValue:e.model["taille"].formatted_value},null,8,["data-name","onKeyup","disable","class","modelValue"])]),(0,o._)("span",Me,[Fe,e.getLowerConfidence(e.model["taille"])?((0,o.wg)(),(0,o.iD)("span",qe,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["taille"]))+"% ",1)])):(0,o.kq)("",!0)])]),Ze,(0,o._)("div",Re,[(0,o._)("div",We,[(0,o._)("div",null,[(0,o.Uk)((0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["sonderwunsche"]))+" ",1),e.getLowerConfidence(e.model["sonderwunsche"])?((0,o.wg)(),(0,o.iD)("span",Ae,[(0,o.Wm)(l,{name:"check_circle_outline",class:"q-pb-xs"}),(0,o.Uk)(" "+(0,s.zw)(e.getLowerConfidence(e.model["sonderwunsche"]))+"% ",1)])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["sonderwunsche"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),disable:e.isReadOnly,class:(0,s.C_)("input-field full-width  "+e.fieldsDef["sonderwunsche"].color+" "+e.model["sonderwunsche"].name),"onUpdate:modelValue":[t[70]||(t[70]=t=>e.inputValueChanges("sonderwunsche")),t[71]||(t[71]=t=>e.model["sonderwunsche"].formatted_value=t)],modelValue:e.model["sonderwunsche"].formatted_value},null,8,["data-name","onKeyup","disable","class","modelValue"])])])]),Ve])),(0,o._)("div",ze,[(0,o._)("div",Be,[e.isSelectedAreaDataReady()?((0,o.wg)(),(0,o.j4)(Ft,{key:0,"pos-correction":!1,isReadOnly:e.isReadOnly,tableAreas:e.tableAreasStr,model:e.model,fieldsDef:e.fieldsDef,width:e.imageWidth2,height:e.imageHeight2,cropUrl:e.image2},null,8,["isReadOnly","tableAreas","model","fieldsDef","width","height","cropUrl"])):(0,o.kq)("",!0)])])]),Ne,((0,o.wg)(),(0,o.iD)("div",{class:"row full-width",key:e.renderKey},[(0,o._)("div",Pe,[(0,o.Wm)(qt,{flat:"",class:"group_checkboxes_tbl overflow-visible"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",Ue,[(0,o._)("span",je,(0,s.zw)(e.$t("medi.qualitat")),1)]),(0,o._)("th",He,(0,s.zw)(e.$t("medi.ccl")),1),(0,o._)("th",$e,(0,s.zw)(e.$t("medi.ccl")),1),(0,o._)("th",Qe,(0,s.zw)(e.$t("medi.ccl")),1),(0,o._)("th",Ye,[(0,o._)("span",Je,(0,s.zw)(e.$t("medi.langen")),1)]),(0,o._)("th",Ke,[(0,o._)("span",Ge,(0,s.zw)(e.displayFieldLabelForMedi(e.fieldsDef["article_number"])),1)])]),(0,o._)("tr",null,[(0,o._)("th",null,[(0,o._)("span",Xe,(0,s.zw)(e.$t("medi.gewunschtes_bitte_ankreuzen")),1)]),(0,o._)("th",et,(0,s.zw)(e.$t("medi.ccl1")),1),(0,o._)("th",tt,(0,s.zw)(e.$t("medi.ccl2")),1),(0,o._)("th",it,(0,s.zw)(e.$t("medi.ccl3")),1),(0,o._)("th",ot,(0,s.zw)(e.$t("medi.ad")),1),(0,o._)("th",st,(0,s.zw)(e.$t("medi.af")),1),(0,o._)("th",at,(0,s.zw)(e.$t("medi.ag")),1),(0,o._)("th",lt,(0,s.zw)(e.$t("medi.at")),1),(0,o._)("th",nt,(0,s.zw)(e.$t("medi.atu")),1),(0,o._)("th",rt,(0,s.zw)(e.$t("medi.ath")),1),(0,o._)("th",dt,[(0,o._)("span",ct,[(0,o.Wm)(Lt,{outlined:"","data-name":e.model["article_number"].name,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),class:(0,s.C_)("input-field full-width  "+e.fieldsDef["article_number"].color+" "+e.model["article_number"].name),style:{width:"200px !important"},modelValue:e.model["article_number"].formatted_value,"onUpdate:modelValue":t[73]||(t[73]=t=>e.model["article_number"].formatted_value=t),disable:e.isReadOnly},{append:(0,o.w5)((()=>[(0,o.Wm)(l,{flat:"",dense:"",name:"calculate",size:"24px",class:"cursor-pointer",tabindex:"0",onClick:t[72]||(t[72]=t=>e.setArticleFieldsBySearch())},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("medi.artikle_number_required")),1)])),_:1})])),_:1})])),_:1},8,["data-name","onKeyup","class","modelValue","disable"])])])])]),(0,o._)("tbody",null,[(0,o._)("tr",null,[(0,o._)("td",ut,[(0,o._)("span",ht,(0,s.zw)(e.$t("medi.mediven_elegance")),1)]),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("me_1"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["me_1"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[74]||(t[74]=t=>e.inputValueChanges("me_1")),t[75]||(t[75]=t=>e.model["me_1"].formatted_value=t)],modelValue:e.model["me_1"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["me_1"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("me_2"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["me_2"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[76]||(t[76]=t=>e.inputValueChanges("me_2")),t[77]||(t[77]=t=>e.model["me_2"].formatted_value=t)],modelValue:e.model["me_2"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["me_2"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("me_3"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["me_3"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[78]||(t[78]=t=>e.inputValueChanges("me_3")),t[79]||(t[79]=t=>e.model["me_3"].formatted_value=t)],modelValue:e.model["me_3"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["me_3"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("me_ad"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["me_ad"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[80]||(t[80]=t=>e.inputValueChanges("me_ad")),t[81]||(t[81]=t=>e.model["me_ad"].formatted_value=t)],modelValue:e.model["me_ad"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["me_ad"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("me_af"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["me_af"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[82]||(t[82]=t=>e.inputValueChanges("me_af")),t[83]||(t[83]=t=>e.model["me_af"].formatted_value=t)],modelValue:e.model["me_af"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["me_af"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("me_ag"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["me_ag"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[84]||(t[84]=t=>e.inputValueChanges("me_ag")),t[85]||(t[85]=t=>e.model["me_ag"].formatted_value=t)],modelValue:e.model["me_ag"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["me_ag"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("me_at"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["me_at"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[86]||(t[86]=t=>e.inputValueChanges("me_at")),t[87]||(t[87]=t=>e.model["me_at"].formatted_value=t)],modelValue:e.model["me_at"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["me_at"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("me_atu"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["me_atu"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[88]||(t[88]=t=>e.inputValueChanges("me_atu")),t[89]||(t[89]=t=>e.model["me_atu"].formatted_value=t)],modelValue:e.model["me_atu"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["me_atu"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left border-right group-checkbox-td "+e.setCheckboxBackgroupColor("me_ath"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["me_ath"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[90]||(t[90]=t=>e.inputValueChanges("me_ath")),t[91]||(t[91]=t=>e.model["me_ath"].formatted_value=t)],modelValue:e.model["me_ath"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["me_ath"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),mt]),(0,o._)("tr",null,[(0,o._)("td",pt,[(0,o._)("span",_t,(0,s.zw)(e.$t("medi.mediven_plus")),1)]),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mp_1"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mp_1"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[92]||(t[92]=t=>e.inputValueChanges("mp_1")),t[93]||(t[93]=t=>e.model["mp_1"].formatted_value=t)],modelValue:e.model["mp_1"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mp_1"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mp_2"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mp_2"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[94]||(t[94]=t=>e.inputValueChanges("mp_2")),t[95]||(t[95]=t=>e.model["mp_2"].formatted_value=t)],modelValue:e.model["mp_2"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mp_2"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mp_3"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mp_3"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[96]||(t[96]=t=>e.inputValueChanges("mp_3")),t[97]||(t[97]=t=>e.model["mp_3"].formatted_value=t)],modelValue:e.model["mp_3"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mp_3"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mp_ad"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mp_ad"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[98]||(t[98]=t=>e.inputValueChanges("mp_ad")),t[99]||(t[99]=t=>e.model["mp_ad"].formatted_value=t)],modelValue:e.model["mp_ad"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mp_ad"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mp_af"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mp_af"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[100]||(t[100]=t=>e.inputValueChanges("mp_af")),t[101]||(t[101]=t=>e.model["mp_af"].formatted_value=t)],modelValue:e.model["mp_af"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mp_af"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mp_ag"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mp_ag"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[102]||(t[102]=t=>e.inputValueChanges("mp_ag")),t[103]||(t[103]=t=>e.model["mp_ag"].formatted_value=t)],modelValue:e.model["mp_ag"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mp_ag"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mp_at"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mp_at"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[104]||(t[104]=t=>e.inputValueChanges("mp_at")),t[105]||(t[105]=t=>e.model["mp_at"].formatted_value=t)],modelValue:e.model["mp_at"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mp_at"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mp_atu"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mp_atu"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[106]||(t[106]=t=>e.inputValueChanges("mp_atu")),t[107]||(t[107]=t=>e.model["mp_atu"].formatted_value=t)],modelValue:e.model["mp_atu"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mp_atu"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left border-right group-checkbox-td "+e.setCheckboxBackgroupColor("mp_ath"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mp_ath"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[108]||(t[108]=t=>e.inputValueChanges("mp_ath")),t[109]||(t[109]=t=>e.model["mp_ath"].formatted_value=t)],modelValue:e.model["mp_ath"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mp_ath"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),gt]),(0,o._)("tr",null,[(0,o._)("td",ft,[(0,o._)("span",wt,(0,s.zw)(e.$t("medi.mediven_comfort")),1)]),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mc_1"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mc_1"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[110]||(t[110]=t=>e.inputValueChanges("mc_1")),t[111]||(t[111]=t=>e.model["mc_1"].formatted_value=t)],modelValue:e.model["mc_1"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mc_1"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mc_2"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mc_2"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[112]||(t[112]=t=>e.inputValueChanges("mc_2")),t[113]||(t[113]=t=>e.model["mc_2"].formatted_value=t)],modelValue:e.model["mc_2"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mc_2"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mc_3"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mc_3"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[114]||(t[114]=t=>e.inputValueChanges("mc_3")),t[115]||(t[115]=t=>e.model["mc_3"].formatted_value=t)],modelValue:e.model["mc_3"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mc_3"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mc_ad"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mc_ad"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[116]||(t[116]=t=>e.inputValueChanges("mc_ad")),t[117]||(t[117]=t=>e.model["mc_ad"].formatted_value=t)],modelValue:e.model["mc_ad"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mc_ad"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mc_af"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mc_af"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[118]||(t[118]=t=>e.inputValueChanges("mc_af")),t[119]||(t[119]=t=>e.model["mc_af"].formatted_value=t)],modelValue:e.model["mc_af"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mc_af"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mc_ag"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mc_ag"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[120]||(t[120]=t=>e.inputValueChanges("mc_ag")),t[121]||(t[121]=t=>e.model["mc_ag"].formatted_value=t)],modelValue:e.model["mc_ag"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mc_ag"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mc_at"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mc_at"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[122]||(t[122]=t=>e.inputValueChanges("mc_at")),t[123]||(t[123]=t=>e.model["mc_at"].formatted_value=t)],modelValue:e.model["mc_at"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mc_at"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left group-checkbox-td "+e.setCheckboxBackgroupColor("mc_atu"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mc_atu"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[124]||(t[124]=t=>e.inputValueChanges("mc_atu")),t[125]||(t[125]=t=>e.model["mc_atu"].formatted_value=t)],modelValue:e.model["mc_atu"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mc_atu"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left border-right group-checkbox-td "+e.setCheckboxBackgroupColor("mc_ath"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mc_ath"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[126]||(t[126]=t=>e.inputValueChanges("mc_ath")),t[127]||(t[127]=t=>e.model["mc_ath"].formatted_value=t)],modelValue:e.model["mc_ath"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mc_ath"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),yt]),(0,o._)("tr",null,[(0,o._)("td",bt,[(0,o._)("span",vt,(0,s.zw)(e.$t("medi.mediven_forte")),1)]),(0,o._)("td",{class:(0,s.C_)("border-left border-bottom group-checkbox-td "+e.setCheckboxBackgroupColor("mf_1"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mf_1"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[128]||(t[128]=t=>e.inputValueChanges("mf_1")),t[129]||(t[129]=t=>e.model["mf_1"].formatted_value=t)],modelValue:e.model["mf_1"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mf_1"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left border-bottom group-checkbox-td "+e.setCheckboxBackgroupColor("mf_2"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mf_2"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[130]||(t[130]=t=>e.inputValueChanges("mf_2")),t[131]||(t[131]=t=>e.model["mf_2"].formatted_value=t)],modelValue:e.model["mf_2"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mf_2"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left border-bottom group-checkbox-td "+e.setCheckboxBackgroupColor("mf_3"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mf_3"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[132]||(t[132]=t=>e.inputValueChanges("mf_3")),t[133]||(t[133]=t=>e.model["mf_3"].formatted_value=t)],modelValue:e.model["mf_3"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mf_3"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left border-bottom group-checkbox-td "+e.setCheckboxBackgroupColor("mf_ad"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mf_ad"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[134]||(t[134]=t=>e.inputValueChanges("mf_ad")),t[135]||(t[135]=t=>e.model["mf_ad"].formatted_value=t)],modelValue:e.model["mf_ad"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mf_ad"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left border-bottom group-checkbox-td "+e.setCheckboxBackgroupColor("mf_af"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mf_af"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[136]||(t[136]=t=>e.inputValueChanges("mf_af")),t[137]||(t[137]=t=>e.model["mf_af"].formatted_value=t)],modelValue:e.model["mf_af"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mf_af"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left border-bottom group-checkbox-td "+e.setCheckboxBackgroupColor("mf_ag"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mf_ag"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[138]||(t[138]=t=>e.inputValueChanges("mf_ag")),t[139]||(t[139]=t=>e.model["mf_ag"].formatted_value=t)],modelValue:e.model["mf_ag"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mf_ag"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left border-bottom group-checkbox-td "+e.setCheckboxBackgroupColor("mf_at"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mf_at"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[140]||(t[140]=t=>e.inputValueChanges("mf_at")),t[141]||(t[141]=t=>e.model["mf_at"].formatted_value=t)],modelValue:e.model["mf_at"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mf_at"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left border-bottom group-checkbox-td "+e.setCheckboxBackgroupColor("mf_atu"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mf_atu"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[142]||(t[142]=t=>e.inputValueChanges("mf_atu")),t[143]||(t[143]=t=>e.model["mf_atu"].formatted_value=t)],modelValue:e.model["mf_atu"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mf_atu"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),(0,o._)("td",{class:(0,s.C_)("border-left border-bottom border-right group-checkbox-td "+e.setCheckboxBackgroupColor("mf_ath"))},[(0,o.Wm)(Mt,{dense:"",disable:e.fieldsDef["mf_ath"].is_readonly||e.isReadOnly,"onUpdate:modelValue":[t[144]||(t[144]=t=>e.inputValueChanges("mf_ath")),t[145]||(t[145]=t=>e.model["mf_ath"].formatted_value=t)],modelValue:e.model["mf_ath"].formatted_value,class:(0,s.C_)("group-checkbox "+e.model["mf_ath"].name),color:"primary"},null,8,["disable","modelValue","class"])],2),xt])])])),_:1})])]))]),(0,o._)("div",kt,[(0,o.Wm)(Ut,{modelValue:e.fuzzyDialog,"onUpdate:modelValue":t[150]||(t[150]=t=>e.fuzzyDialog=t),"full-width":""},{default:(0,o.w5)((()=>[(0,o.Wm)(Pt,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Wt,{class:"secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(Tt,null,{default:(0,o.w5)((()=>[Ct])),_:1}),(0,o.Wm)(Zt,null,{default:(0,o.w5)((()=>[Dt,(0,o.Uk)(" "+(0,s.zw)(e.$t("pages.screen2a.validation")),1)])),_:1}),(0,o.wy)((0,o.Wm)(Rt,{flat:"",round:"",dense:"",icon:"close"},null,512),[[$t]])])),_:1}),(0,o.Wm)(Nt,null,{default:(0,o.w5)((()=>[(0,o._)("div",Ot,[(0,o.Wm)(Lt,{filled:"",modelValue:e.fuzzySearchField,"onUpdate:modelValue":t[147]||(t[147]=t=>e.fuzzySearchField=t),style:{width:"300px"}},{append:(0,o.w5)((()=>[(0,o.Wm)(l,{onClick:t[146]||(t[146]=t=>e.applyFuzzySearch(e.fuzzySearchField)),name:"search","data-cy":"search",class:"q-pb-md cursor-pointer"})])),_:1},8,["modelValue"])]),(0,o._)("div",Et,[(0,o.Wm)(Bt,{rows:e.tableRows,columns:e.tableColumns,"row-key":"id","no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),selection:"single",selected:e.selectedRow,"onUpdate:selected":t[148]||(t[148]=t=>e.selectedRow=t),"table-header-class":"highlighted-back",loading:e.loading,"hide-bottom":"",style:{overflow:"scroll",height:"400px"},"rows-per-page-options":[0],onSelection:e.onRowSelection},{header:(0,o.w5)((e=>[(0,o.Wm)(Vt,{props:e},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(t=>((0,o.wg)(),(0,o.j4)(At,{key:t.name,props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,o.w5)((e=>[(0,o.Wm)(Vt,{class:"cursor-pointer",props:e,onClick:t=>e.selected=!e.selected},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(t=>((0,o.wg)(),(0,o.j4)(zt,{key:t.name,props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.value),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props","onClick"])])),_:1},8,["rows","columns","no-data-label","selected","loading","onSelection"]),(0,o._)("div",St,[(0,o.Wm)(Rt,{color:"primary",class:"q-mr-sm","data-cy":"setvatfield",label:e.$t("pages.screen2a.proceed"),onClick:t[149]||(t[149]=t=>e.setVatField()),disable:e.disableSelectionButton},null,8,["label","disable"]),(0,o.wy)((0,o.Wm)(Rt,{label:e.$t("pages.screen2a.cancel")},null,8,["label"]),[[$t]])])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])],64)):(0,o.kq)("",!0),(0,o.Wm)(Ut,{modelValue:e.display_config_dialog,"onUpdate:modelValue":t[151]||(t[151]=t=>e.display_config_dialog=t),position:"top",class:"export-dialog",persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(jt)])),_:1},8,["modelValue"]),e.is_sep_view?((0,o.wg)(),(0,o.j4)(Ht,{key:1})):(0,o.kq)("",!0)],64)}var Tt=i(61959),Lt=i(45401),Mt=i(77378),Ft=i(30052),qt=i.n(Ft),Zt=i(54268),Rt=i(72113),Wt=i(80589),At=i(49405),Vt=i(7153);const zt=e=>((0,o.dD)("data-v-695a5f90"),e=e(),(0,o.Cn)(),e),Bt=["src","width","height"],Nt={key:0},Pt=["onMousedown","onMousemove"],Ut=["onClick"],jt=zt((()=>(0,o._)("div",{class:"select-areas--delete_area"},null,-1))),Ht=[jt],$t=["src","width","height"];function Qt(e,t,i,l,n,r){const d=(0,o.up)("q-input"),c=(0,o.up)("Resizable");return(0,o.wg)(),(0,o.iD)("div",{class:"image-decorator medi-selected-area-fields",ref:"image-area",id:"image_area",style:(0,s.j5)({width:e.width+"px",height:e.height+"px"})},[e.url?((0,o.wg)(),(0,o.iD)("img",{key:0,onLoad:t[0]||(t[0]=(...t)=>e.prepareImageData&&e.prepareImageData(...t)),id:"screenshot2",class:"original-image",style:{},src:e.url+"?reload="+e.image_reload,alt:"Original Image",width:e.width,height:e.height},null,40,Bt)):(0,o.kq)("",!0),e.userMode?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:1,class:"",id:"draw",style:(0,s.j5)({"background-color":"rgb(0, 0, 0)",opacity:0,position:"absolute",width:e.originImgSize.w+"px",height:e.originImgSize.h+"px"}),onMousedown:t[1]||(t[1]=(...t)=>e.mouseDown&&e.mouseDown(...t)),onMousemove:t[2]||(t[2]=(...t)=>e.mouseMove&&e.mouseMove(...t))},null,36)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.areas,(t=>((0,o.wg)(),(0,o.iD)("div",{key:t.id},[e.userMode?((0,o.wg)(),(0,o.iD)("div",Nt,[(0,o.Wm)(d,{outlined:"",disable:e.isReadOnly,onKeyup:(0,a.D2)(e.fieldKeyupEventHandler,["enter"]),"data-name":e.fieldsDef[t.name].name,class:(0,s.C_)("select-areas--background_area "+e.fieldsDef[t.name].color+" "+e.fieldsDef[t.name].name),"onUpdate:modelValue":[i=>e.inputValueChanges(t.name),i=>e.local_model[t.name].formatted_value=i],modelValue:e.local_model[t.name].formatted_value,style:(0,s.j5)({background:`#fff url('${e.url}') -${t.x}px -${t.y}px / ${e.originImgSize.w}px ${e.originImgSize.h}px no-repeat`,position:"absolute",cursor:"move",width:t.width+"px",height:t.height+"px",left:e.areaDisplayPosX(t)+"px",top:e.areaDisplayPosY(t)+"px","z-index":t.z+2})},null,8,["disable","onKeyup","data-name","class","onUpdate:modelValue","modelValue","style"])])):((0,o.wg)(),(0,o.iD)("div",{key:1,onMousedown:(0,a.iM)((i=>e.startMove(t,i)),["stop","prevent"]),onMousemove:i=>e.doMove(t,i)},[(0,o._)("div",{class:"select-areas--outline",style:(0,s.j5)({opacity:e.opacityOutline,position:"absolute",cursor:"default",width:t.width+4+"px",height:t.height+4+"px",left:e.areaDisplayPosX(t)-2+"px",top:e.areaDisplayPosY(t)-2+"px","z-index":t.z})},null,4),(0,o.Wm)(d,{outlined:"",class:"select-areas--background_area",style:(0,s.j5)({background:`#fff url('${e.url}') -${t.x}px -${t.y}px / ${e.originImgSize.w}px ${e.originImgSize.h}px no-repeat`,position:"absolute",cursor:"move",width:t.width+"px",height:t.height+"px",left:e.areaDisplayPosX(t)+"px",top:e.areaDisplayPosY(t)+"px","z-index":t.z+2}),onClick:i=>e.changeResizable(t.id)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.name),1)])),_:2},1032,["style","onClick"]),t.resizable?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"delete-area",style:(0,s.j5)({display:"block",left:e.areaDisplayPosX(t)+t.width+"px",top:e.areaDisplayPosY(t)-25+"px","z-index":t.z+2}),onClick:i=>e.deleteSelected(t.id)},Ht,12,Ut)):(0,o.kq)("",!0),(0,o.Wm)(c,{item:t,posImg:e.posImg,"pos-correction":e.posCorrection,onStartDrag:e.startDrag,onDoDrag:e.doDrag},null,8,["item","posImg","pos-correction","onStartDrag","onDoDrag"])],40,Pt))])))),128)),e.userMode?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:2,class:"c-crop--hide_main",style:(0,s.j5)({width:e.width+"px",height:e.height+"px"})},[(0,o._)("img",{id:"c-crop--hide_img",src:e.url,alt:"",width:e.width,height:e.height},null,8,$t)],4))],4)}var Yt=i(98266),Jt=i(77987),Kt=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};let Gt,Xt,ei,ti={columns:[],table_areas:[]};const ii=(0,o.aZ)({data(){return{mousedown:!1,originImgSize:{w:0,h:0,r:0},url:this.cropUrl,posImg:{top:0,left:0},areas:[],latestAreaItem:{startX:0,startY:0,endX:0,endY:0},scrollLeft:0,scrollTop:0,moveTempX:0,moveTempY:0,moveCurrentX:0,moveCurrentY:0,temp:0,dragdown:!1,move:!1,imageHeight:0,imageWidth:0,image_reload:1,userMode:!0}},props:{cropUrl:{type:String,default:"https://dev.doc2api.cloudintegration.eu/resource/image/1b90b6d5-63b5-446b-92a4-a60d57dc0edd/1.png"},width:{type:Number,default:1500},height:{type:Number,default:1500},opacityOutline:{type:Number,default:.2},opacityOverlay:{type:Number,default:.2},posCorrection:{type:Boolean,default:!0},tableAreas:{type:String,default:""},model:{},fieldsDef:{},isReadOnly:{type:Boolean,default:!1}},components:{Resizable:Yt.Z},watch:{cropUrl(e){return Kt(this,void 0,void 0,(function*(){this.url=e,yield this.setSize(),this.image_reload++}))},tableAreas(e){this.image_reload++,this.updateLocalModel()},width(e){return Kt(this,void 0,void 0,(function*(){yield this.setSize(),this.image_reload++}))}},setup(){return{local_model:(0,Tt.iH)({})}},methods:{areaDisplayPosX(e){return e.x+(this.posCorrection?this.posImg.left:0)},areaDisplayPosY(e){return e.y+(this.posCorrection?this.posImg.top:0)},mousePosX(e){return e.pageX-this.posImg.left},mousePosY(e){return e.pageY-this.posImg.top},setSize(){return Kt(this,void 0,void 0,(function*(){if(!this.url)return;let e=yield this.getSize(this.url);this.originImgSize=e}))},getSize(e){let t=this.$el.querySelector("#c-crop--hide_img");return new Promise((i=>{e&&t?(t.onload=function(){const e=Gt.getSizeImg(t);i(e)},t.src=e):i({w:0,h:0,r:0})}))},getSizeImg(e){let t=e.width,i=e.height,o=0===t&&0===i?0:t/i;return{w:t,h:i,r:o}},calcPosOfBox(){let e=this.$refs["image-area"];this.scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,this.scrollTop=window.pageYOffset||document.documentElement.scrollTop;let t=e.getBoundingClientRect().top,i=e.getBoundingClientRect().left;this.posImg.top=t+this.scrollTop,this.posImg.left=i+this.scrollLeft},mouseDown(e){this.mousedown=!0;let t=null;if(t=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,0!=this.latestAreaItem.startX&&0!=this.latestAreaItem.startY){let i=this.latestAreaItem.startX,o=this.latestAreaItem.startY,s=e.layerX,a=e.layerY,l=s-i,n=a-o;(l<0||n<0)&&(s=i,a=o,i=e.layerX,o=e.layerY,l=s-i,n=a-o);let r={id:t,x:i,y:o,width:l,height:n,z:0,resizable:!1};return this.areas.push(r),this.temp=r.id,void(this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})}if(t){let i={id:t,x:this.mousePosX(e),y:this.mousePosY(e),width:0,height:0,z:0,resizable:!1};this.areas.push(i),this.temp=i.id,this.latestAreaItem.startX=this.mousePosX(e),this.latestAreaItem.startY=this.mousePosY(e),this.latestAreaItem.endX=0,this.latestAreaItem.endY=0}},mouseMove(e){this.mousedown&&(this.areas.filter((e=>e.id===this.temp)).map((t=>{t.width=e.pageX-t.x-this.posImg.left-8,t.height=e.pageY-t.y-this.posImg.top-8})),this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})},mouseUp(){this.mousedown=!1,this.areas=this.areas.filter((e=>e.width>=3&&e.height>=3)),this.endMove(),this.endDrag(),this.prepareTableArea()},changeResizable(e){this.areas.filter((t=>t.id===e)).map((e=>{e.resizable=!0,e.z=100})),this.areas.filter((t=>t.id!==e)).map((e=>{e.resizable=!1,e.z=0}))},deleteSelected(e){this.areas=this.areas.filter((t=>t.id!==e)),this.prepareTableArea()},startDrag(){this.dragdown=!0},doDrag(e,t,i){if(this.dragdown)switch(t){case"w":i.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-i.pageX+this.posImg.left,e.x=i.pageX-this.posImg.left),e.width<10&&(e.x=e.x-10,e.width=e.width+10);break;case"sw":i.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-i.pageX+this.posImg.left,e.x=i.pageX-this.posImg.left),i.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=i.pageY-this.posImg.top-e.y),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"s":i.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=i.pageY-this.posImg.top-e.y),e.height<10&&(e.height=e.height+10);break;case"se":i.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=i.pageX-this.posImg.left-e.x),i.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=i.pageY-this.posImg.top-e.y),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"e":i.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=i.pageX-this.posImg.left-e.x),e.width<10&&(e.x=e.x-10,e.width=e.width+10);break;case"ne":i.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=i.pageX-this.posImg.left-e.x),i.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-i.pageY),e.y=i.pageY-this.posImg.top),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"n":i.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-i.pageY),e.y=i.pageY-this.posImg.top),e.height<10&&(e.height=e.height+10);break;case"nw":i.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-i.pageY),e.y=i.pageY-this.posImg.top),i.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-i.pageX+this.posImg.left,e.x=i.pageX-this.posImg.left),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;default:break}},endDrag(){this.dragdown=!1},startMove(e,t){this.move=!0,this.moveTempX=t.clientX,this.moveTempY=t.clientY,this.moveCurrentX=e.x,this.moveCurrentY=e.y},doMove(e,t){if(this.move){let i=this.moveCurrentX+(t.clientX-this.moveTempX),o=this.moveCurrentY+(t.clientY-this.moveTempY),s=this.originImgSize.w-e.width,a=this.originImgSize.h-e.height;i>0&&o>0&&i<s&&o<a&&(e.x=i,e.y=o)}},endMove(){this.move=!1},creatReactangle(e,t,i,o,s,a){let l=null;if(l=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,l){let n={id:l,x:e,y:t,width:i,height:o,z:0,resizable:!1,name:s,fieldDef:a};this.areas.push(n),this.temp=n.id}},prepareImageData(){if(ei=(0,Jt.$)("#screenshot2"),ei){this.imageWidth=ei.offsetWidth,this.imageHeight=ei.offsetHeight,this.prepareDataForAreas();const e=new CustomEvent("reload_tables",{});document.dispatchEvent(e)}},prepareDataForAreas(){let e={};if(Vt.Z.has("table_data")&&null!=Vt.Z.getItem("table_data")&&""!=Vt.Z.getItem("table_data")){let t=Vt.Z.getItem("table_data");e=JSON.parse(t)}else e={columns:[],table_areas:[]};this.areas=[];if(e.table_areas)for(const t in e.table_areas){let i=e.table_areas[t],o=[];o=i.coordinates.split(",");let s=Math.round(this.imageWidth*o[0]),a=Math.round(this.imageHeight*o[1]),l=Math.round(this.imageWidth*o[2]),n=Math.round(this.imageHeight*o[3]),r=l-s,d=n-a;this.creatReactangle(s,a,r,d,i.name,i)}},getTableAreaAsString(e,t,i,o){let s=e/this.imageWidth,a=t/this.imageHeight,l=i/this.imageWidth,n=o/this.imageHeight;return s.toString()+","+a.toString()+","+l.toString()+","+n.toString()},prepareTableArea(){ti.table_areas=[],Array.from(this.areas).forEach((e=>{let t=e.width+e.x,i=e.height+e.y;e.fieldDef.coordinates=this.getTableAreaAsString(e.x,e.y,t,i),ti.table_areas.push(e.fieldDef)})),Vt.Z.set("table_data",JSON.stringify(ti))},calculateLeftPosition(e){let t=this.areaDisplayPosX(e)+e.width;return t+50>=this.imageWidth&&(t=this.areaDisplayPosX(e)-60),t+"px"},calculatePositionFromTop(e){let t=this.areaDisplayPosY(e)-25;return t<0&&(t=this.areaDisplayPosY(e)),t+"px"},inputValueChanges(e){setTimeout((()=>{this.triggerModelUpdateEvent(e)}),0)},triggerModelUpdateEvent(e){const t=new CustomEvent("model_updated",{detail:{field_name:e}});document.dispatchEvent(t)},updateLocalModel(){this.local_model=this.model},fieldKeyupEventHandler(e){if(!1!==this.userMode&&!0!==this.isReadOnly&&"Enter"===e.key){let t=e.target.dataset.name;t&&this.triggerModelUpdateEvent(t)}}},mounted(){Gt=this,this.setSize(),Xt=(0,Jt.$)("#image_area"),Xt.addEventListener("mousemove",this.calcPosOfBox),Xt.addEventListener("scroll",this.calcPosOfBox),this.calcPosOfBox(),Xt.addEventListener("mouseup",this.mouseUp),window.MediMultiSelectView=this,this.updateLocalModel()},unmounted:function(){Xt.removeEventListener("mousemove",this.calcPosOfBox),Xt.removeEventListener("scroll",this.calcPosOfBox),Xt.removeEventListener("mouseup",this.mouseUp)}});var oi=i(74260),si=i(64689),ai=i(86115),li=i(7518),ni=i.n(li);const ri=(0,oi.Z)(ii,[["render",Qt],["__scopeId","data-v-695a5f90"]]),di=ri;ni()(ii,"components",{QInput:si.Z,QField:ai.Z});var ci=i(98381),ui=i(93426),hi=i(29938),mi=i(41891),pi=i(5029),_i=i(75592),gi=i(91777),fi=i(60727),wi=i(10321),yi=i(80579),bi=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const vi=document.querySelector.bind(document);let xi=new Map;const ki=(0,o.aZ)({el:"#app",mixins:[Lt.Z,Mt.Z,ci.Z,ui.Z,gi.Z],props:{data:[],renderOpenWindoIcon:{type:Boolean,default:!1}},components:{Loader:Rt.Z,MediMultiSelectInputImage:di,autoTesting:pi.Z,ExportDialog:_i.Z},watch:{data(e){return bi(this,void 0,void 0,(function*(){this.updateLocalData(this.data),yield this.makeModel()}))},config_saved:{handler:function(e,t){!0===t&&!1===e||(this.display_config_dialog=!1)}}},data(){return{docId:"",imageHeight:0,imageWidth:0,itemsData:{},conversionFields:[],articleNumberFields:[],debounceArticleSearchFunc:{}}},mounted:function(){this.docId=this.$route.params.id,this.isViewSeparateComponenet(),this.init(),window.MediFieldsView=this,window.addEventListener("resize",this.windowResize),document.addEventListener("model_updated",this.updateModelAttribute),document.addEventListener("reload_tables",this.reloadTable),this.debounceArticleSearchFunc=(0,At.Z)((()=>{this.calculateArticleNumber()}),1e3)},unmounted:function(){window.removeEventListener("resize",this.windowResize),document.removeEventListener("model_updated",this.updateModelAttribute),document.removeEventListener("reload_tables",this.reloadTable)},methods:{reloadTable(){this.renderKey++},init(){return bi(this,void 0,void 0,(function*(){if(this.is_sep_view){let e=Wt.Z.has("fields_sep_comp")?Wt.Z.getItem("fields_sep_comp"):null;null!=e&&e.doc_id==this.docId?(Wt.Z.remove("fields_sep_comp"),this.updateLocalData(e)):yield this.getInvoiceDataByDocId(this.docId)}else this.updateLocalData(this.data);if(mi.at.includes(this.apiData.status)&&(this.isReadOnly=!0),this.setConversionFields(),this.setArticleNumberRelatedFields(),yield this.makeModel(),!this.isModelReady())return void this.showErrorToast("Document does not have layout. Please contact administrator");let e=vi("#image_container2");this.imageWidth2=e.offsetWidth,this.imageHeight2=e.offsetHeight,this.image2="medi.svg",this.setFuzzyTableColumns(),this.loadSelectedAreasFields()}))},getInvoiceDataByDocId(e){return bi(this,void 0,void 0,(function*(){try{const t={doc_id:e},i=yield yi.U0.getById(t);if(!i.doc_id)return void this.showErrorToast(this.$t("pages.messages.INVALID_DOCUMENT"));this.updateLocalData(i)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},updateLocalData(e){this.apiData=e},makeModel(){return new Promise(((e,t)=>{let i={};if(void 0!==this.apiData){this.apiData.fields.forEach(((e,t)=>{i[e.name]=e}));let e=[];e=this.apiData.layout.groups,e.forEach(((e,t)=>{e.rows.forEach(((e,t)=>{e.forEach(((e,t)=>{let o=e.field_name,s=i[o];if(s?this.setColor(s,e):s=this.createEmptyField(o,e.input_type),this.cleanCheckboxValue(s,e.input_type),e.fuzzy_field&&null!=e.fuzzy_field){let t=e.fuzzy_field.split(":");const i=t[1].toLowerCase();if(xi.has(t[0]))xi.get(t[0]).set(o,i);else{let e=new Map;e.set(o,i),xi.set(t[0],e)}e.fuzzy_name=t[0]}this.model[o]=s,this.fieldsDef[o]=e}))}))}))}e("done")}))},cleanCheckboxValue(e,t){"checkbox"==t&&("true"==e.formatted_value||1==e.formatted_value||"Y"==e.formatted_value?e.formatted_value=!0:e.formatted_value=!1)},setColor(e,t){"MD"==e.extraction_method?t.color="extraction_method-border-left":e.is_valid?t.color="success-border-left":t.color="error-border-left"},setConversionFields(){this.conversionFields=this.getConversionFields()},setArticleNumberRelatedFields(){this.articleNumberFields=this.getArticleNumberfields()},getField(e){let t={};if(void 0!==this.apiData)for(const i in this.apiData.fields){let o=this.apiData.fields[i];if(o.name==e){t=o;break}}return t},createEmptyField(e,t){let i="checkbox"!=t&&"";return{confidence:0,name:e,value:i,formatted_value:i,content:i}},loadSelectedAreasFields(){let e={},t=this.getSAFieldsDef(),i=this.getSAFields(),o=[];Array.from(i).forEach((e=>{t.hasOwnProperty(e)&&o.push(Object.assign({name:e},t[e]))})),e={columns:[],table_areas:o};let s=JSON.stringify(e);Vt.Z.set("table_data",s),this.tableAreasStr=s,this.isSelectedAreaFieldsReady=!0},persistTableAreas(){this.saveMediImageFields()},windowResize(){this.persistTableAreas(),setTimeout((()=>{let e=vi("#image_container2");this.imageWidth2=e.offsetWidth,this.imageHeight2=e.offsetHeight,this.loadSelectedAreasFields()}),0)},saveMediImageFields(){let e={};if(Vt.Z.has("table_data")&&null!=Vt.Z.getItem("table_data")&&""!=Vt.Z.getItem("table_data")){let t=Vt.Z.getItem("table_data");e=JSON.parse(t)}else e={columns:[],table_areas:[]}},saveData(){return bi(this,void 0,void 0,(function*(){if(this.isReadOnly)return;this.saveMediImageFields();let e=this.apiData;this.showLoading(),e.hasOwnProperty("table_data_copy")&&delete e["table_data_copy"];let t,i=new FormData;i.append("data",JSON.stringify(e));try{let e=yield(0,Zt.O_)();t=yield qt().post(Zt.hi.save_document+this.docId,i,{headers:{Authorization:e}})}catch(o){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}this.hideLoading(),!1===t.data.success?(this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),this.showErrorToast(t.data.message)):this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}))},exportData(){return bi(this,void 0,void 0,(function*(){if(!this.isReadOnly)try{const e=yield this.confirmExportConfiguration();if(!e)return void(this.display_config_dialog=!0);yield this.callExportApi()}catch(e){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},confirmExportConfiguration(){return bi(this,void 0,void 0,(function*(){let e,t=new FormData;t.append("doc_type",this.apiData.doc_type);let i=yield(0,Zt.O_)();const o=yield qt().post(Zt.hi.export_configuration_existence,t,{headers:{Authorization:i}});return e=o.data.valid,e}))},callExportApi(){return bi(this,void 0,void 0,(function*(){let e;try{let t=this.apiData;this.showLoading(),t.hasOwnProperty("table_data_copy")&&delete t["table_data_copy"];let i=new FormData;i.append("data",JSON.stringify(t));let o=yield(0,Zt.O_)();e=yield qt().post(Zt.hi.validate_and_export+this.docId,i,{headers:{Authorization:o}})}catch(t){this.hideLoading(),this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}if(!0===e.data.success)this.hideLoading(),this.$router.push("/success").catch();else{let t=e.data.validation_error_codes;t?t.forEach((e=>{let t=e.split(":"),i=this.displayFieldLabelForMedi(this.fieldsDef[t[0]]);this.showErrorToast(i+" "+this.$t("pages.api_user_messages."+t[1]),!0)})):(this.showErrorToast(e.data.message),this.hideLoading()),this.$emit("setApiData",e.data.data),this.hideLoading()}}))},isModelReady(){return 0!==(0,hi.v7)(this.model)},isSelectedAreaDataReady(){return this.isSelectedAreaFieldsReady},getConfidence(e){return e?e<1?(100*+e.toFixed(2)).toFixed(0):+e.toFixed(2):""},getLowerConfidence(e){if(e.confidence&&e.score){let t=e.confidence<1?(100*e.confidence.toFixed(2)).toFixed(0):e.confidence.toFixed(2),i=e.score<=1?(100*e.score.toFixed(2)).toFixed(0):e.score.toFixed(2);return t=Number(t),i=Math.floor(Number(i)),t<i?t:i}return e.confidence?e.confidence<1?(100*e.confidence.toFixed(2)).toFixed(0):e.confidence.toFixed(2):null},openComponentInSaparateWindow(){Wt.Z.set("fields_sep_comp",this.apiData);let e=this.$router.resolve({path:"/fields_sep_comp/"+this.docId});window.open(e.href,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,left=500,width=1500,height=1000")},isViewSeparateComponenet(){this.$route.fullPath.match(/fields_sep_comp/g)&&(this.is_sep_view=!0)},setCheckboxBackgroupColor(e){let t=this.fieldsDef[e],i="";return 1==t.is_readonly?i=" bg-disable ":1==this.model[e].formatted_value&&(i=" color-primary "),i},applyFuzzySearch(e){return bi(this,void 0,void 0,(function*(){let t;this.fuzzySearchField=e,this.showLoading();try{let i=yield(0,Zt.O_)();t=yield qt().get((0,Zt.er)(e),{headers:{Authorization:i}})}catch(i){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}this.tableRows=[],Array.from(t.data).forEach(((e,t)=>{let i={};i["id"]=e.id,xi.forEach(((t,o)=>{t.forEach(((t,o)=>{i[t]=e[t]}))})),this.tableRows.push(i)})),this.fuzzyDialog=!0,this.hideLoading(),this.$forceUpdate()}))},populateFuzzyData(e){let t=JSON.parse(e),i=[];xi.forEach(((e,o)=>{e.forEach(((e,o)=>{t.hasOwnProperty(e)&&(this.model[o].formatted_value=t[e],this.model[o].value=t[e],this.model[o].content=t[e],this.fieldsDef[o].color="extraction_method-border-left",this.model[o].extraction_method="MD",i.push(o))}))})),i.length>0&&this.updateImportJson(i,"MD")},onRowSelection(e){e.added?this.disableSelectionButton=!1:this.disableSelectionButton=!0},setVatField(){let e=JSON.parse(JSON.stringify(this.selectedRow));this.populateFuzzyData(JSON.stringify(e[0])),this.fuzzyDialog=!1,this.selectedRow=[],this.disableSelectionButton=!0,this.$forceUpdate()},updateModelAttribute(e){e.detail&&e.detail.field_name&&this.updateImportJson([e.detail.field_name])},inputValueChanges(e){setTimeout((()=>{this.model[e].value=this.model[e].formatted_value,this.model[e].content=this.model[e].formatted_value,this.updateImportJson([e]),this.articleNumberFields.includes(e)&&this.debounceArticleSearchFunc()}),0)},updateImportJson(e,t){let i=[];this.apiData.fields.forEach(((t,o)=>{let s=t.name;if(e.includes(s)){i.push(s),t.hasOwnProperty("original")||(t["original"]=Object.assign({},t)),t.is_valid=!0,t.is_validated=!0;let e=this.model[s],o=this.fieldsDef[s];t.formatted_value=e.formatted_value,t.value=e.value,t.content=e.content,e.hasOwnProperty("api_save")&&e.api_save||(t.value=e.formatted_value,t.content=e.formatted_value),e.hasOwnProperty("api_save")&&e.api_save||!this.conversionFields.includes(e.name)||"en_DE"!=this.apiData.doc_locale||(t.value=this.convertToUSValue(t.value)),e.hasOwnProperty("extraction_method")&&(t.extraction_method=e.extraction_method),t.color="success-border-left","MD"==t.extraction_method&&(t.color="extraction_method-border-left"),this.model[s]=t,o.color=t.color}})),e.forEach(((e,o)=>{i.includes(e)||(this.apiData.fields.push(this.model[e]),this.apiData.fields[this.apiData.fields.length-1].name=e,this.apiData.fields[this.apiData.fields.length-1].content=this.model[e].content,this.apiData.fields[this.apiData.fields.length-1].formatted_value=this.model[e].formatted_value,this.apiData.fields[this.apiData.fields.length-1].value=this.model[e].value,this.apiData.fields[this.apiData.fields.length-1].validation_code="",this.apiData.fields[this.apiData.fields.length-1].extraction_method=t,this.apiData.fields[this.apiData.fields.length-1].is_validated=!0,this.apiData.fields[this.apiData.fields.length-1].is_valid=!0,this.model[e]=this.apiData.fields[this.apiData.fields.length-1],this.fieldsDef[e].color="success-border-left","MD"==t&&(this.fieldsDef[e].color="extraction_method-border-left"))}))},setFuzzyTableColumns(){this.tableColumns=[],xi.forEach(((e,t)=>{e.forEach(((e,t)=>{let i=this.displayFieldLabelForMedi(this.fieldsDef[t]);this.tableColumns.push({name:t,label:i,field:e,align:"left"})}))}))},calculateArticleNumber(){return bi(this,void 0,void 0,(function*(){let e;this.showLoading();try{let t=new FormData;t.append("doc_data",JSON.stringify(this.apiData));let i=yield(0,Zt.O_)();if(e=yield qt().post(Zt.hi.get_medi_item_number,t,{headers:{Authorization:i}}),!1===e.data.success)throw e.data.message;{let t="article_number";this.model[t].formatted_value=e.data.code,this.inputValueChanges(t)}this.hideLoading()}catch(t){return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void this.hideLoading()}}))},setArticleFieldsBySearch(){return bi(this,void 0,void 0,(function*(){try{let e,t="article_number";if(!this.model[t].formatted_value||""===this.model[t].formatted_value)return void this.showErrorToast(this.$t("medi.artikle_number_required"));this.showLoading();let i=new FormData;i.append("item_number",this.model[t].formatted_value);let o=yield(0,Zt.O_)();if(e=yield qt().post(Zt.hi.get_medi_item_number_fields_map,i,{headers:{Authorization:o}}),!1===e.data.success)throw e.data.message;this.setArticleFieldsValues(e.data.data),this.hideLoading()}catch(e){return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void this.hideLoading()}}))},setArticleFieldsValues(e){let t=[];for(const o of Object.keys(e)){let i=e[o];this.model[o].formatted_value=i,t.push(o)}let i=this.articleNumberFields.filter((e=>!t.includes(e)));i.forEach(((e,i)=>{let o=this.fieldsDef[e];"checkbox"==o.input_type?this.model[e].formatted_value=!1:this.model[e].formatted_value="",t.push(e)})),setTimeout((()=>{t.forEach(((e,t)=>{this.model[e].value=this.model[e].formatted_value,this.model[e].content=this.model[e].formatted_value})),t.length>0&&this.updateImportJson(t)}),0)},fieldKeyupEventHandler(e){if(!0!==this.isReadOnly&&"Enter"===e.key){let t=e.target.dataset.name;t&&this.updateModelAttribute({detail:{field_name:t}})}},handleSingleSelection(e,t){let i=["stuck_checkbox","paar_checkbox","hose_checkbox"];!0===t&&i.forEach(((t,i)=>{t!==e&&(this.model[t].formatted_value=!1,this.model[t].value=!1)})),this.model[e].formatted_value=t,this.model[e].value=t,this.model[e].content=t,this.updateImportJson(i)}},setup(){let e=[];const t=(0,fi.Fl)(),{clearStateForExportDialog:i}=t,{display_config_dialog:o}=(0,wi.Jk)(t);return{clearStateForExportDialog:i,apiData:(0,Tt.iH)(e),tableAreasStr:(0,Tt.iH)(""),model:(0,Tt.iH)({}),fieldsDef:(0,Tt.iH)({}),image2:(0,Tt.iH)(""),imageHeight2:(0,Tt.iH)(0),imageWidth2:(0,Tt.iH)(0),fields:(0,Tt.iH)({}),isSelectedAreaFieldsReady:(0,Tt.iH)(!1),is_sep_view:(0,Tt.iH)(!1),fuzzyDialog:(0,Tt.iH)(!1),disableSelectionButton:(0,Tt.iH)(!0),selectedRow:(0,Tt.iH)([]),tableRows:[],fuzzySearchField:(0,Tt.iH)(""),tableColumns:[{}],renderKey:0,isReadOnly:(0,Tt.iH)(!1),display_config_dialog:o}}});var Ci=i(24554),Di=i(5363),Oi=i(75096),Ei=i(65735),Si=i(2165),Ii=i(30481),Ti=i(46778),Li=i(10151),Mi=i(39570),Fi=i(13747),qi=i(25589),Zi=i(17132),Ri=i(18186),Wi=i(92414),Ai=i(83884),Vi=i(60677);const zi=(0,oi.Z)(ki,[["render",It],["__scopeId","data-v-54da4e6a"]]),Bi=zi;ni()(ki,"components",{QIcon:Ci.Z,QTooltip:Di.Z,QInput:si.Z,QAvatar:Oi.Z,QCheckbox:Ei.Z,QBtn:Si.Z,QMarkupTable:Ii.Z,QDialog:Ti.Z,QCard:Li.Z,QToolbar:Mi.Z,QToolbarTitle:Fi.Z,QCardSection:qi.Z,QTable:Zi.Z,QTr:Ri.Z,QTh:Wi.Z,QTd:Ai.Z,QField:ai.Z}),ni()(ki,"directives",{ClosePopup:Vi.Z})},88469:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var o=i(83673),s=i(62323);const a={class:"message"},l=(0,o.Uk)(" Dashboard ");function n(e,t,i,n,r,d){const c=(0,o.up)("q-btn"),u=(0,o.up)("q-banner");return(0,o.wg)(),(0,o.j4)(u,{"inline-actions":"",class:(0,s.C_)([e.messageCategoryClass,"msg-banner text-white"])},{avatar:(0,o.w5)((()=>[e.back_route?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(c,{key:0,class:"text-weight-bold",to:"/dashboard"},{default:(0,o.w5)((()=>[l])),_:1})),e.back_route?((0,o.wg)(),(0,o.j4)(c,{key:1,class:"text-weight-bold",onClick:t[0]||(t[0]=e=>this.$router.back())},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("back")),1)])),_:1})):(0,o.kq)("",!0)])),action:(0,o.w5)((()=>[(0,o.Wm)(c,{label:"Dismiss",onClick:t[1]||(t[1]=t=>e.dismiss())})])),default:(0,o.w5)((()=>[(0,o._)("div",a,(0,s.zw)(e.message),1)])),_:1},8,["class"])}var r=i(77987);const d=(0,o.aZ)({el:"#app",props:{message:{type:String,default:""},messageCategoryClass:{type:String,default:"error-banner"},back_route:{type:Boolean,default:!1}},components:{},data(){return{}},methods:{dismiss(){(0,r.$)(".msg-banner").remove();const e=new CustomEvent("dismiss_message",{});document.dispatchEvent(e)}},setup(){return{}}});var c=i(74260),u=i(15607),h=i(2165),m=i(7518),p=i.n(m);const _=(0,c.Z)(d,[["render",n],["__scopeId","data-v-b592e638"]]),g=_;p()(d,"components",{QBanner:u.Z,QBtn:h.Z})},57776:(e,t,i)=>{"use strict";i.d(t,{Z:()=>I});var o=i(83673),s=i(62323),a=i(98880);const l=e=>((0,o.dD)("data-v-55f70a00"),e=e(),(0,o.Cn)(),e),n={class:"image-decorator",ref:"image-area",id:"image_area"},r={id:"screenshot_container"},d=["src","width"],c=["onMousedown","onMousemove"],u=["onClick"],h=["onClick"],m=l((()=>(0,o._)("div",{class:"select-areas--delete_area"},null,-1))),p=[m],_={class:"c-crop--hide_main"},g=["src","width"];function f(e,t,i,l,m,f){const w=(0,o.up)("Resizable");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",r,[e.url?((0,o.wg)(),(0,o.iD)("img",{key:0,onLoad:t[0]||(t[0]=(...t)=>e.prepareImageData&&e.prepareImageData(...t)),id:"screenshot",class:"original-image",src:e.url,alt:"Original Image",width:e.width},null,40,d)):(0,o.kq)("",!0),(0,o._)("div",{class:"select-areas--overlay",style:(0,s.j5)({opacity:e.opacityOverlay,position:"absolute",width:e.originImgSize.w+"px",height:e.originImgSize.h+"px",display:"block"})},null,4),(0,o._)("div",{class:"pointer-events-none",id:"draw",style:(0,s.j5)({"background-color":"rgb(0, 0, 0)",opacity:0,position:"absolute",width:e.originImgSize.w+"px",height:e.originImgSize.h+"px"}),onMousedown:t[1]||(t[1]=(...t)=>e.mouseDown&&e.mouseDown(...t)),onMousemove:t[2]||(t[2]=(...t)=>e.mouseMove&&e.mouseMove(...t))},null,36),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.areas,(t=>((0,o.wg)(),(0,o.iD)("div",{key:t.id},[(0,o._)("div",{onMousedown:(0,a.iM)((i=>e.startMove(t,i)),["stop","prevent"]),onMousemove:i=>e.doMove(t,i)},[(0,o._)("div",{class:"select-areas--outline",style:(0,s.j5)({opacity:e.opacityOutline,position:"absolute",cursor:"default",width:t.width+4+"px",height:t.height+4+"px",left:e.areaDisplayPosX(t)-2+"px",top:e.areaDisplayPosY(t)-2+"px","z-index":t.z})},null,4),(0,o._)("div",{class:"select-areas--background_area",style:(0,s.j5)({background:`#fff url('${e.url}') -${t.x}px -${t.y}px / ${e.originImgSize.w}px ${e.originImgSize.h}px no-repeat`,position:"absolute",cursor:"move",width:t.width+"px",height:t.height+"px",left:e.areaDisplayPosX(t)+"px",top:e.areaDisplayPosY(t)+"px","z-index":t.z+2}),onClick:i=>e.changeResizable(t.id)},null,12,u),t.resizable?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"delete-area",style:(0,s.j5)({display:"block",left:e.areaDisplayPosX(t)+t.width+"px",top:e.areaDisplayPosY(t)-25+"px","z-index":t.z+2}),onClick:i=>e.deleteSelected(t.id)},p,12,h)):(0,o.kq)("",!0),(0,o.Wm)(w,{item:t,posImg:e.posImg,"pos-correction":e.posCorrection,onStartDrag:e.startDrag,onDoDrag:e.doDrag},null,8,["item","posImg","pos-correction","onStartDrag","onDoDrag"])],40,c)])))),128))]),(0,o._)("div",_,[(0,o._)("img",{id:"c-crop--hide_img",src:e.url,alt:"",width:e.width},null,8,g)])],512)}var w=i(98266),y=i(7153),b=i(77987),v=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};let x,k,C,D={columns:[],table_areas:[]};const O=(0,o.aZ)({data(){return{mousedown:!1,originImgSize:{w:0,h:0,r:0},url:this.cropUrl,posImg:{top:0,left:0},areas:[{id:1,x:64,y:208,width:556,height:55,z:0,resizable:!1}],latestAreaItem:{startX:0,startY:0,endX:0,endY:0},scrollLeft:0,scrollTop:0,moveTempX:0,moveTempY:0,moveCurrentX:0,moveCurrentY:0,temp:0,dragdown:!1,move:!1,imageHeight:0,imageWidth:0}},props:{cropUrl:{type:String,default:"https://dev.doc2api.cloudintegration.eu/resource/image/1b90b6d5-63b5-446b-92a4-a60d57dc0edd/1.png"},width:{type:Number,default:1500},opacityOutline:{type:Number,default:.2},opacityOverlay:{type:Number,default:.2},posCorrection:{type:Boolean,default:!0},tableAreas:{type:String,default:""}},components:{Resizable:w.Z},watch:{cropUrl(e){this.url=e,setTimeout((()=>{this.setSize()}),200)},tableAreas(e){this.prepareDataForAreas()},width(e){return v(this,void 0,void 0,(function*(){yield this.setSize(),this.prepareImageData()}))}},methods:{areaDisplayPosX(e){return e.x+(this.posCorrection?this.posImg.left:0)},areaDisplayPosY(e){return e.y+(this.posCorrection?this.posImg.top:0)},mousePosX(e){return e.pageX-this.posImg.left},mousePosY(e){return e.pageY-this.posImg.top},setSize(){return v(this,void 0,void 0,(function*(){if(!this.url)return;let e=yield this.getSize(this.url);this.originImgSize=e}))},getSize(e){let t=this.$el.querySelector("#c-crop--hide_img");return new Promise((i=>{e&&t?(t.onload=function(){const e=x.getSizeImg(t);i(e)},t.src=e):i({w:0,h:0,r:0})}))},getSizeImg(e){let t=e.width,i=e.height,o=0===t&&0===i?0:t/i;return{w:t,h:i,r:o}},calcPosOfBox(){let e=this.$refs["image-area"];this.scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,this.scrollTop=window.pageYOffset||document.documentElement.scrollTop;let t=e.getBoundingClientRect().top,i=e.getBoundingClientRect().left;this.posImg.top=t+this.scrollTop,this.posImg.left=i+this.scrollLeft},mouseDown(e){this.mousedown=!0;let t=null;if(t=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,0!=this.latestAreaItem.startX&&0!=this.latestAreaItem.startY){let i=this.latestAreaItem.startX,o=this.latestAreaItem.startY,s=e.layerX,a=e.layerY,l=s-i,n=a-o;(l<0||n<0)&&(s=i,a=o,i=e.layerX,o=e.layerY,l=s-i,n=a-o);let r={id:t,x:i,y:o,width:l,height:n,z:0,resizable:!1};return this.areas.push(r),this.temp=r.id,void(this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})}if(t){let i={id:t,x:this.mousePosX(e),y:this.mousePosY(e),width:0,height:0,z:0,resizable:!1};this.areas.push(i),this.temp=i.id,this.latestAreaItem.startX=this.mousePosX(e),this.latestAreaItem.startY=this.mousePosY(e),this.latestAreaItem.endX=0,this.latestAreaItem.endY=0}},mouseMove(e){this.mousedown&&(this.areas.filter((e=>e.id===this.temp)).map((t=>{t.width=e.pageX-t.x-this.posImg.left-8,t.height=e.pageY-t.y-this.posImg.top-8})),this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})},mouseUp(){this.mousedown=!1,this.areas=this.areas.filter((e=>e.width>=3&&e.height>=3)),this.endMove(),this.endDrag(),this.prepareTableArea()},changeResizable(e){this.areas.filter((t=>t.id===e)).map((e=>{e.resizable=!0,e.z=100})),this.areas.filter((t=>t.id!==e)).map((e=>{e.resizable=!1,e.z=0}))},deleteSelected(e){this.areas=this.areas.filter((t=>t.id!==e)),this.prepareTableArea()},startDrag(){this.dragdown=!0},doDrag(e,t,i){if(this.dragdown)switch(t){case"w":i.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-i.pageX+this.posImg.left,e.x=i.pageX-this.posImg.left),e.width<10&&(e.x=e.x-10,e.width=e.width+10);break;case"sw":i.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-i.pageX+this.posImg.left,e.x=i.pageX-this.posImg.left),i.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=i.pageY-this.posImg.top-e.y),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"s":i.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=i.pageY-this.posImg.top-e.y),e.height<10&&(e.height=e.height+10);break;case"se":i.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=i.pageX-this.posImg.left-e.x),i.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=i.pageY-this.posImg.top-e.y),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"e":i.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=i.pageX-this.posImg.left-e.x),e.width<10&&(e.x=e.x-10,e.width=e.width+10);break;case"ne":i.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=i.pageX-this.posImg.left-e.x),i.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-i.pageY),e.y=i.pageY-this.posImg.top),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"n":i.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-i.pageY),e.y=i.pageY-this.posImg.top),e.height<10&&(e.height=e.height+10);break;case"nw":i.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-i.pageY),e.y=i.pageY-this.posImg.top),i.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-i.pageX+this.posImg.left,e.x=i.pageX-this.posImg.left),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;default:break}},endDrag(){this.dragdown=!1},startMove(e,t){this.move=!0,this.moveTempX=t.clientX,this.moveTempY=t.clientY,this.moveCurrentX=e.x,this.moveCurrentY=e.y},doMove(e,t){if(this.move){let i=this.moveCurrentX+(t.clientX-this.moveTempX),o=this.moveCurrentY+(t.clientY-this.moveTempY),s=this.originImgSize.w-e.width,a=this.originImgSize.h-e.height;i>0&&o>0&&i<s&&o<a&&(e.x=i,e.y=o)}},endMove(){this.move=!1},creatReactangle(e,t,i,o){let s=null;if(s=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,s){let a={id:s,x:e,y:t,width:i,height:o,z:0,resizable:!1};this.areas.push(a),this.temp=a.id}},prepareImageData(){C=(0,b.$)("#screenshot"),C&&(this.imageWidth=C.offsetWidth,this.imageHeight=C.offsetHeight,this.prepareDataForAreas())},prepareDataForAreas(){if(y.Z.has("table_data")&&null!=y.Z.getItem("table_data")&&""!=y.Z.getItem("table_data")){let e=y.Z.getItem("table_data");D=JSON.parse(e)}else D={columns:[],table_areas:[]};this.areas=[];let e=[];D&&D.table_areas.length>0&&Array.from(D.table_areas).forEach((t=>{e=t.split(",");let i=Math.round(this.imageWidth*e[0]),o=Math.round(this.imageHeight*e[1]),s=Math.round(this.imageWidth*e[2]),a=Math.round(this.imageHeight*e[3]),l=s-i,n=a-o;this.creatReactangle(i,o,l,n)}))},getTableAreaAsString(e,t,i,o){let s=e/this.imageWidth,a=t/this.imageHeight,l=i/this.imageWidth,n=o/this.imageHeight;return s.toString()+","+a.toString()+","+l.toString()+","+n.toString()},prepareTableArea(){D.table_areas=[],Array.from(this.areas).forEach((e=>{let t=e.width+e.x,i=e.height+e.y;D.table_areas.push(this.getTableAreaAsString(e.x,e.y,t,i))})),y.Z.set("table_data",JSON.stringify(D))},calculateLeftPosition(e){let t=this.areaDisplayPosX(e)+e.width;return t+50>=this.imageWidth&&(t=this.areaDisplayPosX(e)-60),t+"px"},calculatePositionFromTop(e){let t=this.areaDisplayPosY(e)-25;return t<0&&(t=this.areaDisplayPosY(e)),t+"px"}},mounted(){x=this,this.setSize(),k=(0,b.$)("#image_area"),k.addEventListener("mousemove",this.calcPosOfBox),k.addEventListener("scroll",this.calcPosOfBox),this.calcPosOfBox(),k.addEventListener("mouseup",this.mouseUp)},unmounted:function(){k.removeEventListener("mousemove",this.calcPosOfBox),k.removeEventListener("scroll",this.calcPosOfBox),k.removeEventListener("mouseup",this.mouseUp)}});var E=i(74260);const S=(0,E.Z)(O,[["render",f],["__scopeId","data-v-55f70a00"]]),I=S},98266:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var o=i(83673),s=i(62323),a=i(98880);const l={class:"handler"};function n(e,t,i,n,r,d){return(0,o.wg)(),(0,o.iD)("div",l,[e.item.resizable?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"select-areas-resize-handler w",style:(0,s.j5)({position:"absolute",cursor:"w-resize",display:"block",left:e.displayPosX(e.item)-5+"px",top:e.displayPosY(e.item)+e.item.height/2-4+"px","z-index":e.item.z+10}),onMousedown:t[0]||(t[0]=(0,a.iM)((t=>e.startDrag(e.item,"w")),["stop","prevent"]))},null,36)):(0,o.kq)("",!0),e.item.resizable?((0,o.wg)(),(0,o.iD)("div",{key:1,class:"select-areas-resize-handler sw",style:(0,s.j5)({position:"absolute",cursor:"sw-resize",display:"block",left:e.displayPosX(e.item)-4+"px",top:e.displayPosY(e.item)+e.item.height-6+"px","z-index":e.item.z+10}),onMousedown:t[1]||(t[1]=(0,a.iM)((t=>e.startDrag(e.item,"sw")),["stop","prevent"]))},null,36)):(0,o.kq)("",!0),e.item.resizable?((0,o.wg)(),(0,o.iD)("div",{key:2,class:"select-areas-resize-handler s",style:(0,s.j5)({position:"absolute",cursor:"s-resize",display:"block",left:e.displayPosX(e.item)+e.item.width/2-4+"px",top:e.displayPosY(e.item)+e.item.height-4+"px","z-index":e.item.z+10}),onMousedown:t[2]||(t[2]=(0,a.iM)((t=>e.startDrag(e.item,"s")),["stop","prevent"]))},null,36)):(0,o.kq)("",!0),e.item.resizable?((0,o.wg)(),(0,o.iD)("div",{key:3,class:"select-areas-resize-handler se",style:(0,s.j5)({position:"absolute",cursor:"se-resize",display:"block",left:e.displayPosX(e.item)+e.item.width-6+"px",top:e.displayPosY(e.item)+e.item.height-6+"px","z-index":e.item.z+10}),onMousedown:t[3]||(t[3]=(0,a.iM)((t=>e.startDrag(e.item,"se")),["stop","prevent"]))},null,36)):(0,o.kq)("",!0),e.item.resizable?((0,o.wg)(),(0,o.iD)("div",{key:4,class:"select-areas-resize-handler e",style:(0,s.j5)({position:"absolute",cursor:"e-resize",display:"block",left:e.displayPosX(e.item)+e.item.width-5+"px",top:e.displayPosY(e.item)+e.item.height/2-6+"px","z-index":e.item.z+10}),onMousedown:t[4]||(t[4]=(0,a.iM)((t=>e.startDrag(e.item,"e")),["stop","prevent"]))},null,36)):(0,o.kq)("",!0),e.item.resizable?((0,o.wg)(),(0,o.iD)("div",{key:5,class:"select-areas-resize-handler ne",style:(0,s.j5)({position:"absolute",cursor:"ne-resize",display:"block",left:e.displayPosX(e.item)+e.item.width-6+"px",top:e.displayPosY(e.item)-4+"px","z-index":e.item.z+10}),onMousedown:t[5]||(t[5]=(0,a.iM)((t=>e.startDrag(e.item,"ne")),["stop","prevent"]))},null,36)):(0,o.kq)("",!0),e.item.resizable?((0,o.wg)(),(0,o.iD)("div",{key:6,class:"select-areas-resize-handler n",style:(0,s.j5)({position:"absolute",cursor:"n-resize",display:"block",left:e.displayPosX(e.item)+e.item.width/2-4+"px",top:e.displayPosY(e.item)-4+"px","z-index":e.item.z+10}),onMousedown:t[6]||(t[6]=(0,a.iM)((t=>e.startDrag(e.item,"n")),["stop","prevent"]))},null,36)):(0,o.kq)("",!0),e.item.resizable?((0,o.wg)(),(0,o.iD)("div",{key:7,class:"select-areas-resize-handler nw",style:(0,s.j5)({position:"absolute",cursor:"nw-resize",display:"block",left:e.displayPosX(e.item)-4+"px",top:e.displayPosY(e.item)-4+"px","z-index":e.item.z+10}),onMousedown:t[7]||(t[7]=(0,a.iM)((t=>e.startDrag(e.item,"nw")),["stop","prevent"]))},null,36)):(0,o.kq)("",!0)])}const r=(0,o.aZ)({data(){return{pos:null}},props:{item:{type:Object,default:()=>({id:0,x:0,y:0,width:0,height:0,z:0,resizable:!1})},posCorrection:{type:Boolean,default:!0},posImg:{type:Object,default:null}},methods:{displayPosX(e){return e.x+(this.posCorrection?this.posImg.left:0)},displayPosY(e){return e.y+(this.posCorrection?this.posImg.top:0)},startDrag(e,t){this.pos=t,document.addEventListener("mousemove",this.doDrag),window.addEventListener("pointerup",this.stopDrag),this.$emit("startDrag")},doDrag(e){this.$emit("doDrag",this.item,this.pos,e)},stopDrag(e){document.removeEventListener("mousemove",this.doDrag)},removeDoDragEvent(e){document.removeEventListener("mousemove",this.doDrag)}},updated(){!1===this.item.resizable&&window.addEventListener("mouseup",this.removeDoDragEvent)},unmounted:function(){document.removeEventListener("mousemove",this.doDrag),window.removeEventListener("pointerup",this.stopDrag),window.removeEventListener("mouseup",this.removeDoDragEvent)}});var d=i(74260);const c=(0,d.Z)(r,[["render",n],["__scopeId","data-v-42f41a93"]]),u=c},35352:(e,t,i)=>{"use strict";i.d(t,{Z:()=>S});var o=i(83673),s=i(62323);const a={class:"row items-center q-pb-none"},l={"data-cy":"select-integration",class:"text-h6"},n={style:{width:"100%","padding-left":"30px","padding-top":"5px"}},r={style:{"padding-left":"5px"}},d={key:0,style:{width:"100%","padding-left":"30px","padding-top":"5px"}},c={style:{"padding-left":"5px"}},u={style:{display:"flex","justify-content":"center"}},h={style:{"margin-top":"50px"}},m={style:{"letter-spacing":"1px"}},p={style:{"margin-top":"50px"}},_={style:{"letter-spacing":"1px"}};function g(e,t,i,g,f,w){const y=(0,o.up)("q-space"),b=(0,o.up)("q-btn"),v=(0,o.up)("q-icon"),x=(0,o.up)("q-card-section"),k=(0,o.up)("q-card"),C=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(k,{style:{width:"500px","max-width":"1060px",height:"auto"}},{default:(0,o.w5)((()=>[(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o._)("div",a,[(0,o._)("div",l,[(0,o._)("b",null,(0,s.zw)(e.data.title),1)]),(0,o.Wm)(y),(0,o.wy)((0,o.Wm)(b,{icon:"close",flat:"",round:"",dense:"",onClick:e.selectionPopupClosed},null,8,["onClick"]),[[C]])]),(0,o._)("div",n,[(0,o.Wm)(v,{class:"text-red",style:{"font-size":"18px"},name:"warning"}),(0,o._)("span",r,(0,s.zw)(e.$t("selection_popup_origin_warning")),1)]),e.data.value_2.message?((0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(v,{class:"text-red",style:{"font-size":"18px"},name:"warning"}),(0,o._)("span",c,(0,s.zw)(e.data.value_2.message),1)])):(0,o.kq)("",!0),(0,o._)("div",u,[(0,o._)("div",{class:"rectangle",onClick:t[0]||(t[0]=t=>e.selectedValue(e.data.value_1.key,e.data.value_1.disable))},[(0,o._)("div",h,[(0,o.Wm)(b,{style:{"margin-bottom":"25px","pointer-events":"none"},size:"25px",flat:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.data.value_1.value),1)])),_:1})]),(0,o._)("span",m,(0,s.zw)(e.data.value_1.label),1)]),(0,o._)("div",{class:"rectangle",onClick:t[1]||(t[1]=t=>e.selectedValue(e.data.value_2.key,e.data.value_2.disable))},[(0,o._)("div",p,[(0,o.Wm)(b,{style:{"margin-bottom":"25px","pointer-events":"none"},size:"25px",flat:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.data.value_2.value),1)])),_:1})]),(0,o._)("span",_,(0,s.zw)(e.data.value_2.label),1)])])])),_:1})])),_:1})}const f=(0,o.aZ)({name:"selection-popup",props:{data:[],warning_text:{type:String}},data(){return{}},methods:{selectedValue(e,t){if(t)return;const i=new CustomEvent("selection_popup_selected",{detail:{data:this.data,selected:e}});document.dispatchEvent(i)},selectionPopupClosed(){const e=new CustomEvent("selection_popup_closed",{});document.dispatchEvent(e)}}});var w=i(74260),y=i(10151),b=i(25589),v=i(62025),x=i(2165),k=i(24554),C=i(60677),D=i(7518),O=i.n(D);const E=(0,w.Z)(f,[["render",g],["__scopeId","data-v-48746203"]]),S=E;O()(f,"components",{QCard:y.Z,QCardSection:b.Z,QSpace:v.Z,QBtn:x.Z,QIcon:k.Z}),O()(f,"directives",{ClosePopup:C.Z})},5029:(e,t,i)=>{"use strict";i.d(t,{Z:()=>O});var o=i(83673),s=i(98663),a=i.n(s);const l=e=>((0,o.dD)("data-v-5941e138"),e=e(),(0,o.Cn)(),e),n=l((()=>(0,o._)("img",{width:"24",src:a()},null,-1))),r=(0,o.Uk)("Auto Testing"),d=l((()=>(0,o._)("img",{width:"24",src:a()},null,-1))),c=(0,o.Uk)("Get Testing Data");function u(e,t,i,s,a,l){const u=(0,o.up)("q-tooltip"),h=(0,o.up)("q-icon");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.isAutoTestingOn?((0,o.wg)(),(0,o.j4)(h,{key:0,class:"text-red-13 auto_testing q-ma-sm",size:"sm",onClick:t[0]||(t[0]=t=>e.saveData())},{default:(0,o.w5)((()=>[n,(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[r])),_:1})])),_:1})):(0,o.kq)("",!0),e.isAutoTestingOn?((0,o.wg)(),(0,o.j4)(h,{key:1,class:"text-red-13 auto_testing q-ma-sm",size:"sm",onClick:t[1]||(t[1]=t=>e.getDocumentData())},{default:(0,o.w5)((()=>[d,(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[c])),_:1})])),_:1})):(0,o.kq)("",!0)],64)}var h=i(30052),m=i.n(h),p=i(61959),_=i(77378),g=i(45401),f=i(54268),w=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const y=(0,o.aZ)({el:"#app",mixins:[g.Z,_.Z],props:{},components:{},data(){return{}},computed:{isAutoTestingOn:function(){let e=!1;return this.$route.query&&"true"===this.$route.query.auto_testing&&(e=!0),e}},mounted:function(){this.docId=this.$route.params.id},methods:{saveData(){return w(this,void 0,void 0,(function*(){try{let e;this.showLoading();let t=new FormData;t.append("doc_id",this.docId);let i=yield(0,f.O_)();e=yield m().post(f.hi.auto_test_add_update_document,t,{headers:{Authorization:i}}),!1===e.data.success?this.showErrorToast(e.data.message):this.showSuccessToast(e.data.message)}catch(e){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},getDocumentData(){return w(this,void 0,void 0,(function*(){try{let e;this.showLoading();let t=yield(0,f.O_)();e=yield m().get(f.hi.get_document_data+"?doc_id="+this.docId,{headers:{Authorization:t}}),!1===e.data.success?this.showErrorToast(e.data.message):(this.showSuccessToast(this.$t("pages.messages.TEST_DATA_LOADED")),this.$emit("setApiData",e.data.data))}catch(e){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))}},setup(){return{docId:(0,p.iH)("")}}});var b=i(74260),v=i(24554),x=i(5363),k=i(7518),C=i.n(k);const D=(0,b.Z)(y,[["render",u],["__scopeId","data-v-5941e138"]]),O=D;C()(y,"components",{QIcon:v.Z,QTooltip:x.Z})},16839:(e,t,i)=>{"use strict";i.d(t,{Z:()=>B});var o=i(83673),s=i(62323);const a=e=>((0,o.dD)("data-v-75406387"),e=e(),(0,o.Cn)(),e),l=a((()=>(0,o._)("span",{class:"text-weight-bold"},null,-1))),n={class:"main-container highlighted-back"},r={draggable:"true",class:"split-img-main box"},d=["data-page-id","src","onLoad"],c={class:"img-number"},u={class:"doc-splitter"},h=a((()=>(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1))),m={class:"q-ml-sm"};function p(e,t,i,a,p,_){const g=(0,o.up)("q-toolbar-title"),f=(0,o.up)("q-btn"),w=(0,o.up)("q-toolbar"),y=(0,o.up)("q-card-actions"),b=(0,o.up)("q-icon"),v=(0,o.up)("q-card-section"),x=(0,o.up)("q-inner-loading"),k=(0,o.up)("q-avatar"),C=(0,o.up)("q-card"),D=(0,o.up)("q-dialog"),O=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(C,{class:"split-doc-card"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("split_document")),1),l])),_:1}),(0,o.wy)((0,o.Wm)(f,{flat:"",round:"",dense:"",icon:"close"},null,512),[[O]])])),_:1}),(0,o.Wm)(y,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(f,{class:"highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[O]]),(0,o.Wm)(f,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("confirm"),onClick:t[0]||(t[0]=t=>e.split_action_confirm=!0)},null,8,["label"])])),_:1}),(0,o.Wm)(v,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.images,((i,a)=>((0,o.wg)(),(0,o.iD)("span",{key:a,class:"box-parent"},[(0,o._)("div",r,[(0,o.Wm)(b,{flat:"",dense:"","data-page-id":a,name:"cancel",size:"20px",color:"red",class:"img-delete",onClick:e.deletePage},null,8,["data-page-id","onClick"]),(0,o._)("img",{"data-page-id":a,src:e.baseUrl+"/"+i.path,class:"shadow-5 split-img",style:{height:"auto"},onLoad:t=>{e.imageLoaded(t,a)}},null,40,d),(0,o._)("span",c,(0,s.zw)(a+1),1)]),(0,o._)("span",u,[(0,o._)("span",{class:"splitter-span",onClick:t[1]||(t[1]=(...t)=>e.addSplit&&e.addSplit(...t)),style:(0,s.j5)({height:e.splitterHeight+"px"})},null,4)])])))),128))])])),_:1}),(0,o.Wm)(x,{showing:e.processing},{default:(0,o.w5)((()=>[h])),_:1},8,["showing"]),(0,o.Wm)(D,{modelValue:e.split_action_confirm,"onUpdate:modelValue":t[3]||(t[3]=t=>e.split_action_confirm=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(v,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",m,(0,s.zw)(e.$t("confirm_split_message")),1)])),_:1}),(0,o.Wm)(y,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(f,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[O]]),(0,o.wy)((0,o.Wm)(f,{flat:"",label:e.$t("proceed"),color:"primary",onClick:t[2]||(t[2]=t=>e.performDocumentSplit())},null,8,["label"]),[[O]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var _=i(61959),g=i(60727),f=i(10321),w=i(49566),y=i(85985),b=i(80579),v=i(77378),x=i(29938),k=i(9273),C=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const D=(0,o.aZ)({el:"#app",mixins:[y.Z,v.Z],props:{},components:{},data(){return{dragSrcEl:{}}},mounted:function(){this.initView()},watch:{},methods:{handleDragStart(e){e.target.style.opacity="0.4",this.dragSrcEl=e.target,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.innerHTML)},handleDragEnd(e){e.target.style.opacity="1";let t=document.querySelectorAll(".main-container .box");t.forEach((function(e){e.classList.remove("over")}))},handleDragOver(e){return e.preventDefault(),!1},handleDragEnter(e){e.target.classList.add("over")},handleDragLeave(e){e.target.classList.remove("over")},handleDrop(e){if(e.stopPropagation(),this.dragSrcEl!==e.target){this.dragSrcEl.innerHTML=e.target.innerHTML,e.target.innerHTML=e.dataTransfer.getData("text/html");const t=e.target.querySelector(".img-delete");t&&t.addEventListener("click",this.deletePage);const i=this.dragSrcEl.querySelector(".img-delete");i&&i.addEventListener("click",this.deletePage)}return!1},deletePage(e){let t=e.target;if(!t)return;let i=t.parentNode;if(!i)return;let o=i.parentNode;if(!o)return;const s=Number(t.dataset.pageId)+1;this.deleted_indexes.push(s),o.remove()},imageLoaded(e,t){this.image_load_count++,this.image_load_count>this.images.length&&(this.image_load_count=this.images.length),this.image_load_count===this.images.length&&(this.splitterHeight=e.target.offsetHeight+56,this.processing=!1,this.afterEvents())},afterEvents(){let e=document.querySelectorAll(".main-container .box");e.forEach((e=>{e.addEventListener("dragstart",this.handleDragStart),e.addEventListener("dragend",this.handleDragEnd),e.addEventListener("dragover",this.handleDragOver),e.addEventListener("dragenter",this.handleDragEnter),e.addEventListener("dragleave",this.handleDragLeave),e.addEventListener("drop",this.handleDrop)}))},initView(){this.processing=!0;const e=(0,g.H_)(),{record:t}=e;let i=this.handleImageBaseURL(t.images);""!==i&&(this.baseUrl=i),this.image_load_count=0,this.images=(0,w.PN)(t.images)},addSplit(e){e.stopPropagation();let t=e.target;const i="split-active";t.classList.contains(i)?t.classList.remove(i):t.classList.add("split-active")},getActiveSplits(){const e=document.querySelectorAll(".split-active");if(e.length<1)return[];const t=document.querySelector(".main-container");if(!t)return[];let i=[];for(var o=0;o<e.length;o++){let s=e[o],a=s.parentNode;if(!a)continue;let l=a.parentNode;if(!l)continue;const n=Array.prototype.indexOf.call(t.children,l);n&&i.push(Number(n)+1)}return i.push(t.children.length),i=this.sortNumbericArray(i),i},getActiveSplitters(){const e="split-active",t=document.querySelectorAll(".splitter-span");if(t.length<1)return[];let i=[];for(var o=0;o<t.length;o++){let s=t[o];if(!s.classList.contains(e))continue;const a=o+1;i.push(a)}return i.push(t.length),i=this.sortNumbericArray(i),i},getArrangedPages(){this.sorted_indexes={};const e=document.querySelectorAll(".split-img");if(e.length<1)return;let t=!1;for(var i=0;i<e.length;i++){let o=e[i];const s=Number(o.dataset.pageId)+1,a=i+1;s!==a&&(t=!0),this.sorted_indexes[a]=s}t||(this.sorted_indexes={})},performDocumentSplit(){return C(this,void 0,void 0,(function*(){try{this.processing=!0;let e={},t=this.getActiveSplitters();if(this.getArrangedPages(),0!==(0,x.v7)(this.sorted_indexes)&&(e["sorted_indexes"]=JSON.stringify(this.sorted_indexes)),0!==this.deleted_indexes.length&&(e["deleted_indexes"]=this.deleted_indexes.toString()),0!==t.length&&(e["separators"]=t.toString()),0===(0,x.v7)(e))return this.processing=!1,void this.showFullWidthToast(this.$t("split_empty_warning"));const i=yield b.U0.performDocSplit(e,this.record.doc_id);if(!i||i.hasOwnProperty("success")&&!1===i.success)throw i;!0===i.success&&(this.showSuccessToast(this.$t("split_success_message")),this.$router.push("/dashboard"))}catch(e){const t=k.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.processing=!1}}))}},setup(){const e=(0,g.H_)(),{record:t}=(0,f.Jk)(e);let i=[];return{record:t,images:(0,_.iH)(i),processing:(0,_.iH)(!1),baseUrl:"https://api.docbits.com",split_action_confirm:(0,_.iH)(!1),splitterHeight:(0,_.iH)(120),image_load_count:(0,_.iH)(0),deleted_indexes:(0,_.iH)([]),sorted_indexes:(0,_.iH)({})}}});var O=i(74260),E=i(10151),S=i(39570),I=i(13747),T=i(2165),L=i(99367),M=i(25589),F=i(24554),q=i(66941),Z=i(46778),R=i(75096),W=i(60677),A=i(7518),V=i.n(A);const z=(0,O.Z)(D,[["render",p],["__scopeId","data-v-75406387"]]),B=z;V()(D,"components",{QCard:E.Z,QToolbar:S.Z,QToolbarTitle:I.Z,QBtn:T.Z,QCardActions:L.Z,QCardSection:M.Z,QIcon:F.Z,QInnerLoading:q.Z,QDialog:Z.Z,QAvatar:R.Z}),V()(D,"directives",{ClosePopup:W.Z})},48820:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var o=i(83673),s=i(62323);const a=(0,o._)("img",{src:"doc-type.svg",class:"black_to_white"},null,-1);function l(e,t,i,l,n,r){const d=(0,o.up)("q-item-label"),c=(0,o.up)("q-item-section"),u=(0,o.up)("q-item"),h=(0,o.up)("q-icon"),m=(0,o.up)("q-select");return(0,o.wg)(),(0,o.j4)(m,{outlined:"",dense:"",class:"doc-type-select",disable:e.isReadOnly,modelValue:e.selected_doc_type,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.selected_doc_type=t),e.itemClicked],options:e.active_doc_types_sub_types_list,"emit-value":"","map-options":""},{option:(0,o.w5)((t=>[(0,o.Wm)(u,(0,o.dG)(t.itemProps,{disable:t.opt.hasDocTypes}),{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[t.opt.doc_type_key?((0,o.wg)(),(0,o.j4)(d,{key:0,class:(0,s.C_)("pl-20 "+(e.sub_doc_type===t.opt.value?"q-item--active":""))},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.opt.label),1)])),_:2},1032,["class"])):((0,o.wg)(),(0,o.j4)(d,{key:1},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.opt.label),1)])),_:2},1024))])),_:2},1024)])),_:2},1040,["disable"])])),prepend:(0,o.w5)((()=>[(0,o.Wm)(h,{flat:"",dense:"",color:"grey-9"},{default:(0,o.w5)((()=>[a])),_:1})])),_:1},8,["disable","modelValue","options","onUpdate:modelValue"])}var n=i(10321),r=i(60727);const d=(0,o.aZ)({props:{isReadOnly:{type:Boolean,default:!1}},mixins:[],components:{},data(){return{}},methods:{itemClicked(){let e=this.sub_types_list.filter((e=>e.value==this.selected_doc_type));e=e[0]||null,e&&e.hasOwnProperty("model_label_id")&&e.model_label_id?(this.selected_custom_model_label=e.model_label_id,this.label_classification_popup=!0):this.restart_classification_popup=!0}},setup(){const e=(0,r.Dg)(),{restart_classification_popup:t,label_classification_popup:i,selected_custom_model_label:o}=(0,n.Jk)(e),s=(0,r.At)(),{active_doc_types_sub_types_list:a,sub_types_list:l}=(0,n.Jk)(s),d=(0,r.H_)(),{selected_doc_type:c,sub_doc_type:u}=(0,n.Jk)(d);return{selected_custom_model_label:o,label_classification_popup:i,restart_classification_popup:t,selected_doc_type:c,active_doc_types_sub_types_list:a,sub_doc_type:u,sub_types_list:l}}});var c=i(74260),u=i(72448),h=i(83414),m=i(52035),p=i(2350),_=i(24554),g=i(7518),f=i.n(g);const w=(0,c.Z)(d,[["render",l]]),y=w;f()(d,"components",{QSelect:u.Z,QItem:h.Z,QItemSection:m.Z,QItemLabel:p.Z,QIcon:_.Z})},41482:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var o=i(83673),s=i(62323);function a(e,t,i,a,l,n){const r=(0,o.up)("q-item-label"),d=(0,o.up)("q-item-section"),c=(0,o.up)("q-item"),u=(0,o.up)("q-select");return(0,o.wg)(),(0,o.j4)(u,{outlined:"",dense:"",clearable:"","use-input":"",disable:e.isReadOnly,modelValue:e.selected_custom_model_label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selected_custom_model_label=t),options:e.filtered_custom_model_label,onFilter:e.filterlistEvent,"emit-value":"","map-options":"",label:e.$t("labels")},{option:(0,o.w5)((t=>[(0,o.Wm)(c,(0,o.dG)(t.itemProps,{disable:t.opt.has_child}),{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[t.opt.has_child?((0,o.wg)(),(0,o.j4)(r,{key:1},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.opt.label),1)])),_:2},1024)):((0,o.wg)(),(0,o.j4)(r,{key:0,class:(0,s.C_)("pl-20 "+(e.sub_doc_type===t.opt.value?"q-item--active":""))},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.opt.label),1)])),_:2},1032,["class"]))])),_:2},1024)])),_:2},1040,["disable"])])),_:1},8,["disable","modelValue","options","onFilter","label"])}var l=i(10321),n=i(61959),r=i(60727),d=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const c=(0,o.aZ)({props:{isReadOnly:{type:Boolean,default:!1}},mixins:[],components:{},data(){return{}},watch:{custom_model_labels_loading:{handler:function(e,t){this.filtered_custom_model_label=this.custom_model_labels_list}}},mounted:function(){this.initView()},methods:{initView(){return d(this,void 0,void 0,(function*(){yield this.getModelLabels(),this.prepareDropdown()}))},filterlistEvent(e,t,i){t(e?()=>{const t=e.toLowerCase();this.filtered_custom_model_label=this.custom_model_labels_list.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}:()=>{this.filtered_custom_model_label=this.custom_model_labels_list})}},setup(){const e=(0,r.YT)(),{getModelLabels:t,prepareDropdown:i}=e,{custom_model_labels_list:o,custom_model_labels_loading:s}=(0,l.Jk)(e),a=(0,r.Dg)(),{selected_custom_model_label:d}=(0,l.Jk)(a);return{custom_model_labels_loading:s,custom_model_labels_list:o,selected_custom_model_label:d,filtered_custom_model_label:(0,n.iH)([]),getModelLabels:t,prepareDropdown:i}}});var u=i(74260),h=i(72448),m=i(83414),p=i(52035),_=i(2350),g=i(7518),f=i.n(g);const w=(0,u.Z)(c,[["render",a]]),y=w;f()(c,"components",{QSelect:h.Z,QItem:m.Z,QItemSection:p.Z,QItemLabel:_.Z})},53108:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var o=i(83673),s=i(62323);const a=["innerHTML"],l=(0,o._)("img",{width:"20",src:"globe.svg",class:"black_to_white"},null,-1);function n(e,t,i,n,r,d){const c=(0,o.up)("q-item-label"),u=(0,o.up)("q-tooltip"),h=(0,o.up)("q-item-section"),m=(0,o.up)("q-item"),p=(0,o.up)("q-icon"),_=(0,o.up)("q-select");return(0,o.wg)(),(0,o.j4)(_,{outlined:"",dense:"",class:"language-select",modelValue:e.language_origin,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.language_origin=t),t[1]||(t[1]=t=>e.restart_classification_popup=!0)],options:e.language_origin_list,"emit-value":"","map-options":"",disable:e.isReadOnly},{option:(0,o.w5)((e=>[(0,o.Wm)(m,(0,s.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1024),e.opt.description?((0,o.wg)(),(0,o.j4)(u,{key:0},{default:(0,o.w5)((()=>[(0,o._)("span",{innerHTML:e.opt.description},null,8,a)])),_:2},1024)):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1040)])),prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{flat:"",dense:"",color:"primary"},{default:(0,o.w5)((()=>[l])),_:1})])),_:1},8,["modelValue","options","disable"])}var r=i(10321),d=i(60727);const c=(0,o.aZ)({props:{isReadOnly:{type:Boolean,default:!1}},mixins:[],components:{},data(){return{}},methods:{},setup(){const e=(0,d.Dg)(),{restart_classification_popup:t}=(0,r.Jk)(e),i=(0,d.H_)(),{language_origin:o}=(0,r.Jk)(i),s=(0,d.A3)(),{language_origins:a}=(0,r.Jk)(s);return{restart_classification_popup:t,language_origin:o,language_origin_list:a}}});var u=i(74260),h=i(72448),m=i(83414),p=i(52035),_=i(2350),g=i(5363),f=i(24554),w=i(7518),y=i.n(w);const b=(0,u.Z)(c,[["render",n]]),v=b;y()(c,"components",{QSelect:h.Z,QItem:m.Z,QItemSection:p.Z,QItemLabel:_.Z,QTooltip:g.Z,QIcon:f.Z})},43783:(e,t,i)=>{"use strict";i.d(t,{Z:()=>te});var o=i(83673);const s={class:"row full-width justify-end"},a={class:"col q-pl-sm"},l={class:"col-auto q-pl-sm"},n={class:"col-auto"};function r(e,t,i,r,d,c){const u=(0,o.up)("docTypeDropdown"),h=(0,o.up)("LanguageDropdown"),m=(0,o.up)("labelClassificationBtn"),p=(0,o.up)("RestartClassificationPopup"),_=(0,o.up)("q-dialog"),g=(0,o.up)("LabelClassificationPopup"),f=(0,o.up)("Classification");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",s,[(0,o._)("div",a,[(0,o.Wm)(u,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])]),(0,o._)("div",l,[(0,o.Wm)(h,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])]),(0,o._)("div",n,[e.isReadOnly?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(m,{key:0}))])]),(0,o.Wm)(_,{modelValue:e.restart_classification_popup,"onUpdate:modelValue":t[0]||(t[0]=t=>e.restart_classification_popup=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])])),_:1},8,["modelValue"]),(0,o.Wm)(_,{modelValue:e.label_classification_popup,"onUpdate:modelValue":t[1]||(t[1]=t=>e.label_classification_popup=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])])),_:1},8,["modelValue"]),(0,o.Wm)(f)],64)}var d=i(10321),c=i(88432),u=i(60727),h=i(22879);const m={class:"row"},p={class:"col-12 q-mb-sm"},_={class:"col-12 q-mb-sm"},g={class:"col-12 q-mb-sm"};function f(e,t,i,s,a,l){const n=(0,o.up)("q-toolbar-title"),r=(0,o.up)("q-btn"),d=(0,o.up)("q-toolbar"),c=(0,o.up)("labelsDropdown"),u=(0,o.up)("LanguageDropdown"),h=(0,o.up)("PagesDropdown"),f=(0,o.up)("q-card-section"),w=(0,o.up)("q-card-actions"),y=(0,o.up)("q-card"),b=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(y,{style:{width:"500px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(n),(0,o.wy)((0,o.Wm)(r,{flat:"",round:"",dense:"",icon:"close",onClick:e.resetClassification},null,8,["onClick"]),[[b]])])),_:1}),(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o._)("div",p,[(0,o.Wm)(c,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])]),(0,o._)("div",_,[(0,o.Wm)(u,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])]),(0,o._)("div",g,[(0,o.Wm)(h,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])])])])),_:1}),e.isReadOnly?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(w,{key:0,align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(r,{flat:"",label:e.$t("cancel"),color:"primary",onClick:e.resetClassification},null,8,["label","onClick"]),[[b]]),(0,o.wy)((0,o.Wm)(r,{flat:"",label:e.$t("proceed"),color:"primary",onClick:e.triggerNewClassification},null,8,["label","onClick"]),[[b]])])),_:1}))])),_:1})}var w=i(41482),y=i(53108);function b(e,t,i,s,a,l){const n=(0,o.up)("q-select");return(0,o.wg)(),(0,o.j4)(n,{outlined:"",denses:"",modelValue:e.selected_page,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selected_page=t),options:e.pages_list,"emit-value":"","map-options":"",label:e.$t("Start Page")},null,8,["modelValue","options","label"])}const v=(0,o.aZ)({props:{isReadOnly:{type:Boolean,default:!1}},mixins:[],components:{},data(){return{}},methods:{},setup(){const e=(0,u.H_)(),{pages_list:t}=(0,d.Jk)(e),i=(0,u.Dg)(),{selected_page:o}=(0,d.Jk)(i);return{pages_list:t,selected_page:o}}});var x=i(74260),k=i(72448),C=i(7518),D=i.n(C);const O=(0,x.Z)(v,[["render",b]]),E=O;D()(v,"components",{QSelect:k.Z});const S=(0,o.aZ)({el:"#app",mixins:[],components:{labelsDropdown:w.Z,LanguageDropdown:y.Z,PagesDropdown:E},props:{isReadOnly:{type:Boolean,default:!0}},mounted:function(){},methods:{resetClassification(){this.resetStore(),this.setDocTypeAndLanguageOrigin()},triggerNewClassification(){this.trigger_classification=!0}},setup(){const e=(0,u.Dg)(),{resetStore:t}=e,{trigger_classification:i,reset_classification:o}=(0,d.Jk)(e),s=(0,u.H_)(),{setDocTypeAndLanguageOrigin:a}=s;return{resetStore:t,trigger_classification:i,reset_classification:o,setDocTypeAndLanguageOrigin:a}}});var I=i(10151),T=i(39570),L=i(13747),M=i(2165),F=i(25589),q=i(99367),Z=i(60677);const R=(0,x.Z)(S,[["render",f]]),W=R;D()(S,"components",{QCard:I.Z,QToolbar:T.Z,QToolbarTitle:L.Z,QBtn:M.Z,QCardSection:F.Z,QCardActions:q.Z}),D()(S,"directives",{ClosePopup:Z.Z});const A=e=>((0,o.dD)("data-v-5f778a86"),e=e(),(0,o.Cn)(),e),V=A((()=>(0,o._)("img",{src:"settings/klassifizierung.svg"},null,-1))),z=(0,o.Uk)("Re-Classifiy Document");function B(e,t,i,s,a,l){const n=(0,o.up)("q-tooltip"),r=(0,o.up)("q-icon");return e.display_btn?((0,o.wg)(),(0,o.j4)(r,{key:0,class:"q-ml-sm q-mr-sm cursor-pointer classification-icon",onClick:e.displayPopup},{default:(0,o.w5)((()=>[V,(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[z])),_:1})])),_:1},8,["onClick"])):(0,o.kq)("",!0)}var N=i(77378),P=i(61959),U=i(29938);const j=(0,o.aZ)({props:{},mixins:[N.Z],watch:{doc_loaded:{handler:function(e,t){this.initView()}}},components:{},data(){return{}},mounted:function(){this.initView()},methods:{initView(){this.record.hasOwnProperty("classification")&&!(0,U.fg)(this.record.classification)&&(this.display_btn=!0)},displayPopup(){this.label_classification_popup=!0}},setup(){const e=(0,u.H_)(),{record:t,doc_loaded:i}=(0,d.Jk)(e),o=(0,u.Dg)(),{label_classification_popup:s}=(0,d.Jk)(o);return{doc_loaded:i,record:t,label_classification_popup:s,display_btn:(0,P.iH)(!1)}}});var H=i(24554),$=i(5363);const Q=(0,x.Z)(j,[["render",B],["__scopeId","data-v-5f778a86"]]),Y=Q;D()(j,"components",{QIcon:H.Z,QTooltip:$.Z});var J=i(48820),K=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const G=(0,o.aZ)({name:"DocumentClassification",props:{isReadOnly:{type:Boolean,default:!1}},mixins:[],components:{Classification:c.Z,RestartClassificationPopup:h.Z,LabelClassificationPopup:W,labelClassificationBtn:Y,docTypeDropdown:J.Z,LanguageDropdown:y.Z},data(){return{}},mounted:function(){this.initPage()},methods:{initPage(){return K(this,void 0,void 0,(function*(){yield this.getLanguageOptions()}))}},setup(){const e=(0,u.Dg)(),{restart_classification_popup:t,label_classification_popup:i}=(0,d.Jk)(e),o=(0,u.A3)(),{getLanguageOptions:s}=o,a=(0,u.H_)(),{selected_doc_type:l}=(0,d.Jk)(a);return{getLanguageOptions:s,selected_doc_type:l,restart_classification_popup:t,label_classification_popup:i}}});var X=i(46778);const ee=(0,x.Z)(G,[["render",r]]),te=ee;D()(G,"components",{QDialog:X.Z})},57765:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var o=i(83673),s=i(62323);const a=(0,o._)("img",{width:"24",height:"24",src:"special_rule.svg"},null,-1);function l(e,t,i,l,n,r){const d=(0,o.up)("q-tooltip"),c=(0,o.up)("q-btn");return e.is_script_editor_available||""!=e.selected_doc_type?((0,o.wg)(),(0,o.j4)(c,{key:0,flat:"",class:"pr-6 pl-6",onClick:e.goToScriptView},{default:(0,o.w5)((()=>[a,(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("add_special_rules")),1)])),_:1})])),_:1},8,["onClick"])):(0,o.kq)("",!0)}var n=i(60727),r=i(10321),d=i(77378);const c=(0,o.aZ)({el:"#app",mixins:[d.Z],components:{},props:{},watch:{doc_loaded:{handler:function(e,t){this.init()}},doc_type_loading:{handler:function(e,t){this.init()}}},data(){return{}},mounted:function(){this.init()},methods:{init(){if(!this.doc_loaded)return;const e=this.record.doc_type;let t=this.doc_types_sub_types_list.filter((t=>t.value==e));t=t[0]||null,t&&t.hasOwnProperty("name")&&t.name&&(this.selected_doc_type=t.name)},goToScriptView(){if(!this.doc_loaded)return;this.selected_doc_type;const e="/settings/doc_scripts/"+this.selected_doc_type;window.open(e,"_blank").focus()}},setup(){const e=(0,n.H_)(),{record:t,doc_loaded:i}=(0,r.Jk)(e),o=(0,n.At)(),{doc_types_sub_types_list:s,doc_type_loading:a}=(0,r.Jk)(o),l=(0,n.Eu)(),{open_editor:d,selected_doc_type:c,is_script_editor_available:u}=(0,r.Jk)(l);return{doc_type_loading:a,doc_types_sub_types_list:s,record:t,doc_loaded:i,script_editor_dialog:d,selected_doc_type:c,is_script_editor_available:u}}});var u=i(74260),h=i(2165),m=i(5363),p=i(7518),_=i.n(p);const g=(0,u.Z)(c,[["render",l]]),f=g;_()(c,"components",{QBtn:h.Z,QTooltip:m.Z})},34030:(e,t,i)=>{"use strict";i.d(t,{Z:()=>w});var o=i(83673);const s={class:"row validation_time_spent_main",style:{width:"250px",float:"right"}},a={key:0,class:"secondary-c-text text-uppercase title q-ml-auto text-right"},l=(0,o._)("div",{class:"secondary-c-text validation_time_spent"},null,-1);function n(e,t,i,n,r,d){return(0,o.wg)(),(0,o.iD)("div",s,[this.isValidationTimeSpentTimerEnable?((0,o.wg)(),(0,o.iD)("div",a," Time Spent: ")):(0,o.kq)("",!0),l])}var r=i(61959),d=i(60727),c=i(10321),u=i(25429),h=i.n(u);function m(e,t){var i=document.createElement("span");i.className="flip-clock__piece",i.innerHTML='<b class="flip-clock__card card"><b class="card__top"></b><b class="card__bottom"></b><b class="card__back"><b class="card__bottom"></b></b></b>',this.el=i;var o=i.querySelector(".card__top"),s=i.querySelector(".card__bottom"),a=i.querySelector(".card__back"),l=i.querySelector(".card__back .card__bottom");this.update=function(e){e=("0"+e).slice(-2),e!==this.currentValue&&(this.currentValue>=0&&(a.setAttribute("data-value",this.currentValue),s.setAttribute("data-value",this.currentValue)),this.currentValue=e,o.innerText=this.currentValue,l.setAttribute("data-value",this.currentValue),this.el.classList.remove("flip"),this.el.offsetWidth,this.el.classList.add("flip"))},this.update(t)}class p{constructor(e,t=!1,i=0,o){h()(this,"el",null),h()(this,"start_clock",!1),h()(this,"timer",null),h()(this,"countdown",null),h()(this,"updateFn",{}),h()(this,"diff",0),h()(this,"callback",(function(){})),h()(this,"timeinterval",null),h()(this,"throttle",0),h()(this,"trackers",{}),h()(this,"first_update",!1),this.diff=i,this.start_clock=t,this.timer=null,this.countdown=!!e&&new Date(Date.parse(e)),this.first_update=!0,o&&(this.callback=o),this.updateFn=e?this.getTimeRemaining:{},this.el=document.createElement("div"),this.el.className="flip-clock",this.trackers={};var s,a=this.updateFn();for(s in a)a[s]<0&&(a[s]=0),"Total"!==s&&"Days"!=s&&("Hours"===s&&a[s]<=0||(this.trackers[s]=new m(s,a[s]),this.el.appendChild(this.trackers[s].el)));this.updateClock()}startClock(e,t){this.countdown=e,this.diff=t,this.start_clock=!0}stopClock(){this.start_clock=!1}updateClock(){try{if(this.timeinterval=requestAnimationFrame(this.updateClock.bind(this)),this.throttle++%30)return;if(!this.start_clock&&!this.first_update)return;this.first_update=!1;var e=this.updateFn();if(e.Total<0){cancelAnimationFrame(this.timeinterval);for(let e in this.trackers)this.trackers[e].update(0);return void this.callback(e)}for(let t in this.trackers)this.trackers[t].update(e[t]);this.callback(e)}catch(t){}}getTimeRemaining(){let e=new Date;e=new Date(e.getTime()+1e3*this.diff);var t=Date.parse(e)-this.countdown;return t<0&&(t=0),{Total:t,Days:Math.floor(t/864e5),Hours:Math.floor(t/36e5%24),Minutes:Math.floor(t/1e3/60%60),Seconds:Math.floor(t/1e3%60)}}}const _=(0,o.aZ)({el:"#app",props:{},watch:{doc_loaded:{handler:function(){this.initView()}},isValidationTimeSpentTimerEnable:{handler:function(){this.initView()}},doc_saving:{handler:function(e,t){1==e&&this.stopClock()}}},mounted(){this.initView(),document.addEventListener("start_time_spent_on_validation",this.startClock)},unmounted(){document.removeEventListener("start_time_spent_on_validation",this.startClock);try{this.clock&&this.clock.timeinterval&&cancelAnimationFrame(this.clock.timeinterval)}catch(e){}},methods:{initView(){this.isTimerEnabled()&&!this.clock_set&&this.makeCounter()},isTimerEnabled(){return!(!this.isValidationTimeSpentTimerEnable||!this.doc_loaded)&&!(!this.record||!this.record.hasOwnProperty("doc_id"))},getParentDivEl(){return!!this.timer_parent_DIV||(this.timer_parent_DIV=document.querySelector(".validation_time_spent"),!!this.timer_parent_DIV)},makeCounter(e=!1){try{if(!this.getParentDivEl())return;this.timer_parent_DIV.innerHTML="",this.clock=new p(new Date,e,this.getTimeDiffInSeconds(),this.timeUpdated),this.timer_parent_DIV.appendChild(this.clock.el),this.clock_set=!0}catch(t){}},getTimeDiffInSeconds(){let e=0;return this.record&&this.record.hasOwnProperty("time_spent_on_validation")&&(e=Number(this.record.time_spent_on_validation)),e},startClock(){this.isTimerEnabled()&&this.clock&&!this.clock.start_clock&&this.clock.startClock(new Date,this.getTimeDiffInSeconds())},stopClock(){this.isTimerEnabled()&&this.clock&&this.clock.start_clock&&this.clock.stopClock()},timeUpdated(e){e["Total"]<0||(this.record.time_spent_on_validation=Math.round(e["Total"]/1e3))}},setup(){const e=(0,d.e0)(),{isValidationTimeSpentTimerEnable:t}=(0,c.Jk)(e),i=(0,d.H_)(),{record:o,doc_loaded:s,saving:a}=(0,c.Jk)(i);return{doc_saving:a,isValidationTimeSpentTimerEnable:t,counter_dateTime:(0,r.iH)({}),doc_loaded:s,record:o,time_spent:(0,r.iH)(0),clock:(0,r.iH)(),timer_parent_DIV:(0,r.iH)(),clock_set:(0,r.iH)(!1)}}});var g=i(74260);const f=(0,g.Z)(_,[["render",n]]),w=f},97767:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var o=i(83673);function s(e,t,i,s,a,l){const n=(0,o.up)("q-btn"),r=(0,o.Q2)("close-popup");return(0,o.wy)(((0,o.wg)(),(0,o.j4)(n,{label:e.message,class:"cancel-btn-alfred","text-color":"red",flat:"",icon:e.icon},null,8,["label","icon"])),[[r]])}var a=i(61959),l=i(45401),n=i(77378);const r=(0,o.aZ)({el:"#app",mixins:[l.Z,n.Z],props:["label","icon"],mounted(){null!=this.label&&(this.message=this.label)},data(){return{message:(0,a.iH)(this.$t("cancel"))}},methods:{}});var d=i(74260),c=i(2165),u=i(60677),h=i(7518),m=i.n(h);const p=(0,d.Z)(r,[["render",s],["__scopeId","data-v-1608f57c"]]),_=p;m()(r,"components",{QBtn:c.Z}),m()(r,"directives",{ClosePopup:u.Z})},73902:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var o=i(83673);function s(e,t,i,s,a,l){const n=(0,o.up)("q-btn"),r=(0,o.Q2)("close-popup");return(0,o.wy)(((0,o.wg)(),(0,o.j4)(n,{label:e.message,class:"default-btn-alfred",flat:"",icon:e.icon},null,8,["label","icon"])),[[r]])}var a=i(61959),l=i(45401),n=i(77378);const r=(0,o.aZ)({el:"#app",mixins:[l.Z,n.Z],props:["label","icon","deactivate"],mounted(){null!=this.label&&(this.message=this.label)},data(){return{message:(0,a.iH)(this.$t("")),button_state:(0,a.iH)(!0)}},methods:{}});var d=i(74260),c=i(2165),u=i(60677),h=i(7518),m=i.n(h);const p=(0,d.Z)(r,[["render",s],["__scopeId","data-v-279a7ba1"]]),_=p;m()(r,"components",{QBtn:c.Z}),m()(r,"directives",{ClosePopup:u.Z})},99321:(e,t,i)=>{"use strict";i.d(t,{Z:()=>D});var o=i(83673),s=i(62323),a=i(98880);const l={class:"q-ml-sm"};function n(e,t,i,n,r,d){const c=(0,o.up)("q-tooltip"),u=(0,o.up)("q-fab-action"),h=(0,o.up)("q-avatar"),m=(0,o.up)("q-card-section"),p=(0,o.up)("CancelBtn"),_=(0,o.up)("SaveBtn"),g=(0,o.up)("q-card-actions"),f=(0,o.up)("q-card"),w=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(u,{padding:"5px","label-position":"top",color:"red",icon:"delete_outline",onClick:t[0]||(t[0]=t=>e.confirm=!0)},{default:(0,o.w5)((()=>[e.tooltip?((0,o.wg)(),(0,o.j4)(c,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.tooltip),1)])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(w,{modelValue:e.confirm,"onUpdate:modelValue":t[2]||(t[2]=t=>e.confirm=t),onKeydown:t[3]||(t[3]=(0,a.D2)((t=>e.confirm=!1),["esc"])),style:{width:"350px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{style:{width:"350px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{icon:"delete",color:"red","text-color":"white"}),(0,o._)("span",l,(0,s.zw)(e.$t("doc2light.descriptions.confirm_delete")+" ("+this.info+")"),1)])),_:1}),(0,o.Wm)(g,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(p),(0,o.Wm)(_,{label:e.$t("doc2light.popups.accept"),onClick:t[1]||(t[1]=t=>this.function(e.argument))},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var r=i(61959),d=i(45401),c=i(77378),u=i(97767),h=i(50442);const m=(0,o.aZ)({el:"#app",mixins:[d.Z,c.Z],props:["function","tooltip","info","argument"],components:{CancelBtn:u.Z,SaveBtn:h.Z},data(){return{confirm:(0,r.iH)(!1)}},methods:{}});var p=i(74260),_=i(39975),g=i(5363),f=i(46778),w=i(10151),y=i(25589),b=i(75096),v=i(99367),x=i(7518),k=i.n(x);const C=(0,p.Z)(m,[["render",n],["__scopeId","data-v-7334c572"]]),D=C;k()(m,"components",{QFabAction:_.Z,QTooltip:g.Z,QDialog:f.Z,QCard:w.Z,QCardSection:y.Z,QAvatar:b.Z,QCardActions:v.Z})},50442:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var o=i(83673);function s(e,t,i,s,a,l){const n=(0,o.up)("q-btn"),r=(0,o.Q2)("close-popup");return(0,o.wy)(((0,o.wg)(),(0,o.j4)(n,{label:e.message,class:"save-btn","text-color":"primary",unelevated:"",icon:e.icon},null,8,["label","icon"])),[[r]])}var a=i(61959),l=i(45401),n=i(77378);const r=(0,o.aZ)({el:"#app",mixins:[l.Z,n.Z],mounted(){null!=this.label&&(this.message=this.label)},props:["label","icon","breathe"],data(){return{message:(0,a.iH)(this.$t("save"))}},methods:{}});var d=i(74260),c=i(2165),u=i(60677),h=i(7518),m=i.n(h);const p=(0,d.Z)(r,[["render",s],["__scopeId","data-v-ec9b80fe"]]),_=p;m()(r,"components",{QBtn:c.Z}),m()(r,"directives",{ClosePopup:u.Z})},7883:(e,t,i)=>{"use strict";i.d(t,{Z:()=>P});var o=i(83673),s=i(62323);const a=e=>((0,o.dD)("data-v-3ea5f3d3"),e=e(),(0,o.Cn)(),e),l={id:"card",class:"text-left white-back",style:{padding:"10px"}},n={style:{"margin-top":"10px"}},r={style:{"margin-bottom":"15px"}},d={class:"row"},c={key:0,class:"col-4",style:{"margin-top":"14px"}},u={key:1,class:"col-5",style:{"margin-top":"14px"}},h=a((()=>(0,o._)("hr",{style:{color:"#cecece"}},null,-1))),m={key:0},p=["onClick"],_={key:0},g={key:1,class:"text-subtitle1 text-grey-10"},f={style:{"margin-top":"10px"}};function w(e,t,i,a,w,y){const b=(0,o.up)("DefaultBtn"),v=(0,o.up)("q-select"),x=(0,o.up)("q-checkbox"),k=(0,o.up)("CancelBtn"),C=(0,o.up)("SaveBtn"),D=(0,o.up)("q-toolbar-title"),O=(0,o.up)("q-icon"),E=(0,o.up)("q-item-section"),S=(0,o.up)("q-item"),I=(0,o.up)("q-list"),T=(0,o.up)("q-card-actions"),L=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("div",n,[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.Wm)(v,{filled:"",modelValue:e.store_selection,"onUpdate:modelValue":t[1]||(t[1]=t=>e.store_selection=t),options:e.store_options,label:"Store"},{after:(0,o.w5)((()=>[(0,o.Wm)(b,{onClick:t[0]||(t[0]=t=>e.initView()),label:e.$t("select")},null,8,["label"])])),_:1},8,["modelValue","options"])]),(0,o._)("div",d,["popup"==e.mode?((0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(x,{modelValue:e.overwrite,"onUpdate:modelValue":t[2]||(t[2]=t=>e.overwrite=t),label:e.$t("doc2light.popups.overwrite"),color:"primary",unelevated:""},null,8,["modelValue","label"])])):(0,o.kq)("",!0),"popup"==e.mode?((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)(k,{label:e.$t("cancel"),style:{"margin-right":"10px"}},null,8,["label"]),(0,o.Wm)(C,{label:e.$t("doc2light.pages.upload"),onClick:e.uploadToSpace},null,8,["label","onClick"])])):(0,o.kq)("",!0)])])),_:1}),h,0!=e.path_array.length?((0,o.wg)(),(0,o.iD)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.path_array,((t,i)=>((0,o.wg)(),(0,o.iD)("span",{onClick:i=>e.clickOnPath(t),key:i,class:"text-subtitle1 underliner"},[(0,o.Uk)((0,s.zw)(t.label),1),"/"!=t.label?((0,o.wg)(),(0,o.iD)("span",_,"/")):(0,o.kq)("",!0)],8,p)))),128))])):((0,o.wg)(),(0,o.iD)("span",g,"/"))]),(0,o._)("div",f,[0!=e.apidata.getCurrentFolderFolders.length?((0,o.wg)(),(0,o.j4)(I,{key:0,bordered:"",padding:"",class:"rounded-borders text-primary dark-back",style:{height:"50vh","overflow-y":"auto"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.apidata.getCurrentFolderFolders,((t,i)=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(S,{clickable:"",key:i,onClick:i=>e.setCurrentFolder(t)},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(O,{name:"folder"})])),_:1}),(0,o.Wm)(E,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.label),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[L]]))),128))])),_:1})):(0,o.kq)("",!0)]),(0,o.Wm)(T)])}var y=i(77378),b=i(61959),v=i(45401),x=i(65536),k=i(10321),C=i(64252),D=i(50442),O=i(97767),E=i(73902),S=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const I=(0,o.aZ)({data(){return{}},mixins:[v.Z,y.Z],components:{CancelBtn:O.Z,SaveBtn:D.Z,DefaultBtn:E.Z},props:["mode","selection"],mounted(){return S(this,void 0,void 0,(function*(){yield this.getStores()}))},methods:{initView(){return S(this,void 0,void 0,(function*(){this.showLoading();try{if(null==this.store_selection)return this.showErrorToast("Please select a store"),void this.hideLoading();yield this.loadStoreContent(this.store_selection.value).then((()=>{this.selected_store_id=this.store_selection.value,this.hideLoading()})).catch((()=>{this.selected_store_id=this.store_selection.value,this.hideLoading()}))}catch(e){this.hideLoading(),this.showErrorToast("Error while loading files. Please Recheck your token")}}))},getStores(){return S(this,void 0,void 0,(function*(){try{yield C.wk.getAccessableStores().then((e=>{e.exports.forEach((e=>{const t={label:e.name,value:e.id,store:e.store_type};this.store_options.push(t)})),this.store_selection=this.store_options[0],null!=this.store_selection&&this.initView()}))}catch(e){this.showErrorToast("Failed getting authenticated Stores")}}))},uploadToSpace(){return S(this,void 0,void 0,(function*(){const e={label:"",path:this.apidata.getCurrentFolder.path,id:this.apidata.getCurrentFolder.id};try{this.showLoading(),yield this.uploadFiletoSpace(this.selection,e,this.overwrite,this.store_selection.value,this.store_selection.store).then((e=>{!0===e.success?this.showSuccessToast("Files Uploaded to Space"):this.showErrorToast("File(s) could not be uploaded. "+e.message)})),this.hideLoading()}catch(t){this.hideLoading(),this.showErrorToast("Files could not be uploaded. Please try again")}}))},clickOnPath(e){this.setCurrentFolder(e);var t=this.path_array.findIndex((e=>e.id===this.apidata.getCurrentFolder.id));this.path_array.length=t+1},setCurrentFolder(e){this.setFolder(e),"/"==this.apidata.getCurrentFolder.path?this.path_array=[{label:"/",path:"/",id:this.getRootFolder.id,folders:this.getRootFolder.folders,files:this.getRootFolder.files}]:this.path_array.push(this.apidata.getCurrentFolder)}},setup(){const e=(0,x.p)(),t=(0,k.Jk)(e),{setFolder:i,uploadFiletoSpace:o,loadStoreContent:s,getRootFolder:a}=e;return{overwrite:(0,b.iH)(!1),loadStoreContent:s,uploadFiletoSpace:o,getRootFolder:a,path_array:(0,b.iH)([{label:"/",path:"/",id:a.id,folders:a.folders,files:a.files}]),apidata:(0,b.iH)(t),store_selection:(0,b.iH)({}),store_options:(0,b.iH)([]),selected_store_id:(0,b.iH)(""),setFolder:i}}});var T=i(74260),L=i(13747),M=i(72448),F=i(65735),q=i(27011),Z=i(83414),R=i(52035),W=i(24554),A=i(99367),V=i(80860),z=i(7518),B=i.n(z);const N=(0,T.Z)(I,[["render",w],["__scopeId","data-v-3ea5f3d3"]]),P=N;B()(I,"components",{QToolbarTitle:L.Z,QSelect:M.Z,QCheckbox:F.Z,QList:q.Z,QItem:Z.Z,QItemSection:R.Z,QIcon:W.Z,QCardActions:A.Z}),B()(I,"directives",{Ripple:V.Z})},22899:(e,t,i)=>{"use strict";i.d(t,{Z:()=>j});var o=i(83673),s=i(62323);const a=e=>((0,o.dD)("data-v-246ae8db"),e=e(),(0,o.Cn)(),e),l={key:0,class:"popup-heading",style:{color:"#2388ae"}},n={key:1,class:"popup-heading",style:{color:"#2388ae"}},r={key:0,class:"popup-heading",style:{color:"#2388ae"}},d={key:1,class:"popup-heading",style:{color:"#2388ae"}},c=a((()=>(0,o._)("hr",null,null,-1))),u={class:"row full-width mb-10 mt-8"},h={class:"full-width"},m={class:"q-gutter-md row items-start"},p={key:0},_={key:1},g=a((()=>(0,o._)("div",null,null,-1))),f=[g],w={key:0,style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},y={class:"full-width"},b={key:1,style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},v=a((()=>(0,o._)("div",{class:"full-width"},null,-1))),x=[v];function k(e,t,i,a,g,v){const k=(0,o.up)("q-toolbar-title"),C=(0,o.up)("CancelBtn"),D=(0,o.up)("SaveBtn"),O=(0,o.up)("q-card-actions"),E=(0,o.up)("q-toolbar"),S=(0,o.up)("q-input"),I=(0,o.up)("q-select"),T=(0,o.up)("q-card-section"),L=(0,o.up)("q-card"),M=(0,o.up)("Loader");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(L,{style:{width:"50%"},class:"card-format"},{default:(0,o.w5)((()=>["edit"==e.mode?((0,o.wg)(),(0,o.j4)(E,{key:0,class:"primary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,null,{default:(0,o.w5)((()=>["doctype"==e.show?((0,o.wg)(),(0,o.iD)("span",l,(0,s.zw)(e.$t("doc2light.popups.edit_doc_type")),1)):"corresp"==e.show?((0,o.wg)(),(0,o.iD)("span",n,(0,s.zw)(e.$t("doc2light.popups.edit_correspondent")),1)):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(O,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(C),(0,o.Wm)(D,{onClick:e.EditItem},null,8,["onClick"])])),_:1})])),_:1})):"create"==e.mode?((0,o.wg)(),(0,o.j4)(E,{key:1,class:"primary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,null,{default:(0,o.w5)((()=>["doctype"==e.show?((0,o.wg)(),(0,o.iD)("span",r,(0,s.zw)(e.$t("doc2light.popups.create_new_doc_type")),1)):"corresp"==e.show?((0,o.wg)(),(0,o.iD)("span",d,(0,s.zw)(e.$t("doc2light.popups.add_correspondent")),1)):(0,o.kq)("",!0)])),_:1}),"create"==e.mode?((0,o.wg)(),(0,o.j4)(O,{key:0,align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(C),(0,o.Wm)(D,{onClick:e.AddItem},null,8,["onClick"])])),_:1})):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0),c,(0,o.Wm)(T,null,{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o._)("div",h,[(0,o.Wm)(S,{style:{"margin-bottom":"18px"},type:"text",outlined:"",dense:"",tabindex:"0",label:e.$t("doc2light.popups.name"),modelValue:e.field["name"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.field["name"]=t)},null,8,["label","modelValue"])])]),(0,o._)("div",m,[(0,o._)("div",null,[(0,o._)("div",null,[(0,o.Wm)(I,{style:{width:"250px"},outlined:"",modelValue:e.field["assignment_algorythm"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.field["assignment_algorythm"]=t),options:e.algorythms,label:e.$t("doc2light.popups.assignment_algorythm"),dense:""},null,8,["modelValue","options","label"])])]),"MatchNone"!=e.field["assignment_algorythm"]&&"MatchAI"!=e.field["assignment_algorythm"]?((0,o.wg)(),(0,o.iD)("div",p,[(0,o._)("div",null,[(0,o.Wm)(S,{style:{width:"260px"},type:"number",outlined:"",dense:"",label:e.$t("priority"),modelValue:e.field["priority"],"onUpdate:modelValue":t[2]||(t[2]=t=>e.field["priority"]=t),rules:[t=>t>-1||e.$t("doc2light.popups.use_positive_number")]},null,8,["label","modelValue","rules"])])])):((0,o.wg)(),(0,o.iD)("div",_,f))]),"MatchNone"!=e.field["assignment_algorythm"]&&"MatchAI"!=e.field["assignment_algorythm"]?((0,o.wg)(),(0,o.iD)("div",w,[(0,o._)("div",y,[(0,o.Wm)(S,{type:"text",outlined:"",tabindex:"0",dense:"",label:e.$t("doc2light.popups.assignment_pattern"),modelValue:e.field["assignment_pattern"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.field["assignment_pattern"]=t)},null,8,["label","modelValue"])])])):((0,o.wg)(),(0,o.iD)("div",b,x))])),_:1})])),_:1}),(0,o.Wm)(M)],64)}var C=i(61959),D=i(72113),O=i(45401),E=i(77378),S=i(79261),I=i(10321),T=i(50442),L=i(97767),M=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const F=(0,o.aZ)({el:"#app",mixins:[O.Z,E.Z],props:["showSpinner","show","mode","id"],components:{SaveBtn:T.Z,CancelBtn:L.Z,Loader:D.Z},data(){return{}},mounted(){"edit"==this.mode&&this.get_field_values(this.id),this.field["priority"]=0,this.field["assignment_algorythm"]=this.algorythms[0]},methods:{fill_fields(e){"doctype"==this.show?(this.field["name"]=e.name,this.field["assignment_algorythm"]=e.method,this.field["assignment_pattern"]=e.regex,this.field["priority"]=e.priority):"corresp"==this.show&&(this.field["name"]=e.name,this.field["assignment_algorythm"]=e.extraction_type,this.field["assignment_pattern"]=e.regex,this.field["priority"]=e.priority)},get_field_values(e){"doctype"==this.show?this.get_doctype(e).then((e=>{const t=e;this.fill_fields(t.doctype)})):"corresp"==this.show&&this.get_correspondent(e).then((e=>{const t=e;this.fill_fields(t.correspondent)}))},EditItem(){return M(this,void 0,void 0,(function*(){"doctype"==this.show?yield this.update_doctype(this.id,this.field["name"],this.field["priority"],this.field["assignment_algorythm"],this.field["assignment_pattern"]):"corresp"==this.show&&(yield this.update_correspondent(this.id,this.field["name"],this.field["assignment_algorythm"],this.field["assignment_pattern"],this.field["priority"]))}))},AddItem(){return M(this,void 0,void 0,(function*(){"doctype"==this.show?yield this.create_doctype(this.field["name"],this.field["assignment_algorythm"],this.field["assignment_pattern"],this.field["priority"]):"corresp"==this.show&&(void 0==this.field["assignment_pattern"]&&(this.field["assignment_pattern"]=""),yield this.create_correspondent(this.field["name"],this.field["assignment_algorythm"],this.field["assignment_pattern"],this.field["priority"]))}))}},setup(){const e=(0,S.Wb)(),{create_doctype:t,get_doctype:i,update_doctype:o,create_correspondent:s,update_correspondent:a,get_correspondent:l}=((0,I.Jk)(e),e);return{multiUploaderDialog:(0,C.iH)(!0),create_doctype:t,get_doctype:i,update_correspondent:a,create_correspondent:s,update_doctype:o,get_correspondent:l,uploadedFiles:(0,C.iH)(null),field:(0,C.iH)({}),algorythms:["MatchNone","MatchAll","MatchAny","MatchRegex","MatchAI","MatchLiteral"]}}});var q=i(74260),Z=i(10151),R=i(39570),W=i(13747),A=i(99367),V=i(25589),z=i(64689),B=i(72448),N=i(7518),P=i.n(N);const U=(0,q.Z)(F,[["render",k],["__scopeId","data-v-246ae8db"]]),j=U;P()(F,"components",{QCard:Z.Z,QToolbar:R.Z,QToolbarTitle:W.Z,QCardActions:A.Z,QCardSection:V.Z,QInput:z.Z,QSelect:B.Z})},85574:(e,t,i)=>{"use strict";i.d(t,{Z:()=>Q});var o=i(83673),s=i(62323);const a=e=>((0,o.dD)("data-v-087b27fe"),e=e(),(0,o.Cn)(),e),l={key:0,class:"popup-heading",style:{color:"#2388AE"}},n={key:1,class:"popup-heading",style:{color:"#2388AE"}},r=a((()=>(0,o._)("hr",{style:{color:"#cecece"}},null,-1))),d={class:"full-width mb-10 mt-8"},c={class:"full-width"},u={class:"row"},h={class:"col-6 mt-8",style:{}},m=(0,o.Uk)(" Field is Required "),p=a((()=>(0,o._)("div",{class:"col-1"},null,-1))),_={class:"col-5 mt-8"},g={key:0,class:"full-width"},f={class:"full-width"},w={class:"full-width"},y={key:1,class:"full-width"},b=a((()=>(0,o._)("div",{class:"full-width"},null,-1))),v=[b];function x(e,t,i,a,b,x){const k=(0,o.up)("q-toolbar-title"),C=(0,o.up)("CancelBtn"),D=(0,o.up)("SaveBtn"),O=(0,o.up)("q-card-actions"),E=(0,o.up)("q-toolbar"),S=(0,o.up)("q-input"),I=(0,o.up)("q-tooltip"),T=(0,o.up)("q-icon"),L=(0,o.up)("q-select"),M=(0,o.up)("q-color"),F=(0,o.up)("q-popup-proxy"),q=(0,o.up)("q-card-section"),Z=(0,o.up)("q-card"),R=(0,o.up)("Loader");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(Z,{style:{width:"50%"},class:"card-format"},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{class:"primary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,null,{default:(0,o.w5)((()=>["create"==e.mode?((0,o.wg)(),(0,o.iD)("span",l,(0,s.zw)(e.$t("doc2light.popups.create_new_tag")),1)):"edit"==e.mode?((0,o.wg)(),(0,o.iD)("span",n,(0,s.zw)(e.$t("doc2light.popups.edit_tag")),1)):(0,o.kq)("",!0)])),_:1}),"create"==e.mode?((0,o.wg)(),(0,o.j4)(O,{key:0,align:"right",style:{"margin-right":"9px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{onClick:t[0]||(t[0]=t=>e.field={})}),(0,o.Wm)(D,{onClick:e.AddItem},null,8,["onClick"])])),_:1})):"edit"==e.mode?((0,o.wg)(),(0,o.j4)(O,{key:1,align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{onClick:t[1]||(t[1]=t=>e.field={})}),(0,o.Wm)(D,{onClick:e.EditItem},null,8,["onClick"])])),_:1})):(0,o.kq)("",!0)])),_:1}),r,(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[(0,o._)("div",d,[(0,o._)("div",c,[(0,o.Wm)(S,{type:"text",outlined:"",tabindex:"0",dense:"",hint:e.message,label:e.$t("doc2light.popups.name"),modelValue:e.field["name"],"onUpdate:modelValue":t[2]||(t[2]=t=>e.field["name"]=t)},null,8,["hint","label","modelValue"])])]),(0,o._)("div",u,[(0,o._)("div",h,[(0,o._)("div",null,[(0,o.Wm)(L,{outlined:"",modelValue:e.field["extraction_method"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.field["extraction_method"]=t),options:e.algorythms,dense:"","emit-value":"","map-options":"",label:e.$t("doc2light.table.regex_rythm")},{append:(0,o.w5)((()=>[e.field["extraction_method_error"]?((0,o.wg)(),(0,o.j4)(T,{key:0,flat:"",dense:"",name:"error",size:"24px"},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[e.field["extraction_method_error"]?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[m],64)):(0,o.kq)("",!0)])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},8,["modelValue","options","label"])])]),p,(0,o._)("div",_,[(0,o._)("div",null,[(0,o.Wm)(S,{outlined:"",dense:"",standout:"",modelValue:e.field["color"],"onUpdate:modelValue":t[5]||(t[5]=t=>e.field["color"]=t),rules:["hexColor"],label:e.$t("doc2light.popups.color")},{append:(0,o.w5)((()=>[(0,o.Wm)(T,{name:"colorize",class:"cursor-pointer",color:{"background-color":e.field["color"]}},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{modelValue:e.field["color"],"onUpdate:modelValue":t[4]||(t[4]=t=>e.field["color"]=t),"default-view":"palette","no-header-tabs":""},null,8,["modelValue"])])),_:1})])),_:1},8,["color"])])),_:1},8,["modelValue","label"])])])]),"MatchNone"!=e.field["extraction_method"]&&"MatchAI"!=e.field["extraction_method"]?((0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("div",f,(0,s.zw)(e.$t("This will overwrite the AI-Results")),1),(0,o._)("div",w,[(0,o.Wm)(S,{type:"text",outlined:"",dense:"",label:e.$t("doc2light.table.regex"),modelValue:e.field["regex"],"onUpdate:modelValue":t[6]||(t[6]=t=>e.field["regex"]=t)},null,8,["label","modelValue"])])])):((0,o.wg)(),(0,o.iD)("div",y,v))])),_:1})])),_:1}),(0,o.Wm)(R)],64)}var k=i(61959),C=i(72113),D=i(97767),O=i(50442),E=i(45401),S=i(77378),I=i(79261),T=i(10321),L=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const M=(0,o.aZ)({el:"#app",mixins:[E.Z,S.Z],props:["showSpinner","mode","id"],components:{SaveBtn:O.Z,CancelBtn:D.Z,Loader:C.Z},data(){return{}},mounted(){this.initView(),"edit"==this.mode&&this.get_field_values()},methods:{get_field_values(){this.get_tag(this.id).then((e=>this.fill_fields(e)))},fill_fields(e){this.field["name"]=e.tag.tag,this.field["extraction_method"]=e.tag.extraction_type,this.field["regex"]=e.tag.regex,this.field["color"]=e.tag.color},initView(){this.field["extraction_method"]=this.algorythms[0]},EditItem(){return L(this,void 0,void 0,(function*(){yield this.update_tag(this.id,this.field["name"],this.field["extraction_method"],this.field["regex"],this.field["color"])}))},AddItem(){return L(this,void 0,void 0,(function*(){yield this.create_tag(this.field["name"],this.field["extraction_method"],this.field["regex"],this.field["color"])}))}},setup(){const e=(0,I.Wb)(),t=(0,T.Jk)(e),{create_tag:i,update_tag:o,get_tag:s}=e;return{apidata:(0,k.iH)(t),create_tag:i,update_tag:o,get_tag:s,algorythms:["MatchNone","MatchAll","MatchAny","MatchRegex","MatchAI","MatchLiteral"],field:(0,k.iH)({})}}});var F=i(74260),q=i(10151),Z=i(39570),R=i(13747),W=i(99367),A=i(25589),V=i(64689),z=i(72448),B=i(24554),N=i(5363),P=i(83944),U=i(83456),j=i(7518),H=i.n(j);const $=(0,F.Z)(M,[["render",x],["__scopeId","data-v-087b27fe"]]),Q=$;H()(M,"components",{QCard:q.Z,QToolbar:Z.Z,QToolbarTitle:R.Z,QCardActions:W.Z,QCardSection:A.Z,QInput:V.Z,QSelect:z.Z,QIcon:B.Z,QTooltip:N.Z,QPopupProxy:P.Z,QColor:U.Z})},60759:(e,t,i)=>{"use strict";i.d(t,{Z:()=>q});var o=i(83673),s=i(62323);const a={class:"popup-heading",style:{color:"#2388AE"}},l={class:"row"},n={class:"col-3 text-center"},r={class:"col-1 text-center"},d={class:"col-4 text-center"},c={class:"col-1 text-center"},u={class:"col-3 text-center"};function h(e,t,i,h,m,p){const _=(0,o.up)("q-btn"),g=(0,o.up)("q-toolbar-title"),f=(0,o.up)("q-toolbar"),w=(0,o.up)("q-img"),y=(0,o.up)("q-icon"),b=(0,o.up)("q-card-section"),v=(0,o.up)("DefaultBtn"),x=(0,o.up)("q-card-actions"),k=(0,o.up)("q-card"),C=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(k,{class:"download-installer"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"text-center"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(_,{flat:"",round:"",dense:""},null,512),[[C]]),(0,o.Wm)(g,{class:"text-center"},{default:(0,o.w5)((()=>[(0,o._)("span",a,(0,s.zw)(e.$t("doc2light.pages.download_scan_installer")),1)])),_:1}),(0,o.wy)((0,o.Wm)(_,{flat:"",round:"",dense:"",icon:"close"},null,512),[[C]])])),_:1}),(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o._)("div",n,[(0,o.Wm)(w,{id:"image",src:"doc2light/download-13.svg",height:"70px",width:"70px"}),(0,o._)("div",null,(0,s.zw)(e.$t("download")),1)]),(0,o._)("div",r,[(0,o.Wm)(y,{name:"double_arrow",size:"40px",style:{"margin-top":"1.5vh"}})]),(0,o._)("div",d,[(0,o.Wm)(w,{id:"image",src:"doc2light/ordner-12.svg",height:"70px",width:"80px"}),(0,o._)("div",null,(0,s.zw)(e.$t("doc2light.pages.installing")),1)]),(0,o._)("div",c,[(0,o.Wm)(y,{name:"double_arrow",size:"40px",style:{"margin-top":"1.5vh"}})]),(0,o._)("div",u,[(0,o.Wm)(w,{id:"image",src:"doc2light/icons-menu_Scan.svg",height:"70px",width:"70px"}),(0,o._)("div",null,(0,s.zw)(e.$t("doc2light.pages.scan")),1)])])])),_:1}),(0,o.Wm)(x,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{class:"download-button",label:e.$t("download"),icon:"fab fa-windows",onClick:t[0]||(t[0]=t=>e.downloadInstaller("https://github.com/Fellow-Consulting-AG/Public-Doc2scanner/releases/latest/download/doc2scan-windows-installer.msi"))},null,8,["label"]),(0,o.Wm)(v,{class:"download-button",label:e.$t("download"),icon:"apple",onClick:t[1]||(t[1]=t=>e.downloadInstaller("https://github.com/Fellow-Consulting-AG/Public-Doc2scanner/releases/latest/download/doc2scan-macos-installer-x64.pkg "))},null,8,["label"])])),_:1})])),_:1})}var m=i(77378),p=i(61959),_=i(45401),g=i(25616),f=i(73902),w=i(79261),y=i(10321);const b=(0,o.aZ)({data(){return{}},components:{DefaultBtn:f.Z},mixins:[_.Z,m.Z],methods:{formateDate(e,t){return g.ZP.formatDate(e,t)},downloadInstaller(e){window.open(e,"_self")}},setup(){const e=(0,w.My)(),t=(0,y.Jk)(e),i=[{value:"Grayscale8",label:"Gray"},{value:"RGB24",label:"Color"}],o=[{value:"300",label:"300"},{value:"600",label:"600"},{value:"1200",label:"1200"}];return{apidata:(0,p.iH)(t),showDragDrop:(0,p.iH)(!0),showDownloadInstaller:(0,p.iH)(!1),myFile:(0,p.iH)(),file:(0,p.iH)(),filedata:(0,p.iH)(),filter:(0,p.iH)(""),view:(0,p.iH)("list"),multiUploaderDialog:(0,p.iH)(!1),uploadedFiles:(0,p.iH)(null),image:(0,p.iH)(),new_scan:(0,p.iH)({}),scanners:(0,p.iH)([]),show_popup:(0,p.iH)(!1),pixeltypes:(0,p.iH)(i),resolutions:(0,p.iH)(o),importing:(0,p.iH)(!1),showSplitButton:(0,p.iH)(!1),showMenu:(0,p.iH)(!1),showIcons:(0,p.iH)(!0),documentScanned:(0,p.iH)(!1),ports:(0,p.iH)(["12500","12154","12346"]),valid_url:(0,p.iH)()}}});var v=i(74260),x=i(10151),k=i(39570),C=i(2165),D=i(13747),O=i(25589),E=i(24027),S=i(24554),I=i(99367),T=i(60677),L=i(7518),M=i.n(L);const F=(0,v.Z)(b,[["render",h],["__scopeId","data-v-880d9b30"]]),q=F;M()(b,"components",{QCard:x.Z,QToolbar:k.Z,QBtn:C.Z,QToolbarTitle:D.Z,QCardSection:O.Z,QImg:E.Z,QIcon:S.Z,QCardActions:I.Z}),M()(b,"directives",{ClosePopup:T.Z})},74371:(e,t,i)=>{"use strict";i.d(t,{Z:()=>U});var o=i(83673),s=i(62323);const a=e=>((0,o.dD)("data-v-4f48ab3c"),e=e(),(0,o.Cn)(),e),l=a((()=>(0,o._)("span",{class:"text-weight-bold"},null,-1))),n={class:"main-container"},r={draggable:"true",class:"split-img-main box"},d={class:"img-number"},c={class:"doc-splitter"},u=["data-page-id"],h=a((()=>(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1))),m={class:"q-ml-sm"};function p(e,t,i,a,p,_){const g=(0,o.up)("q-toolbar-title"),f=(0,o.up)("q-btn"),w=(0,o.up)("q-toolbar"),y=(0,o.up)("CancelBtn"),b=(0,o.up)("DefaultBtn"),v=(0,o.up)("q-card-actions"),x=(0,o.up)("q-icon"),k=(0,o.up)("vue-pdf-embed"),C=(0,o.up)("q-card-section"),D=(0,o.up)("q-inner-loading"),O=(0,o.up)("q-avatar"),E=(0,o.up)("SaveBtn"),S=(0,o.up)("q-card"),I=(0,o.up)("q-dialog"),T=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(S,{class:"split-doc-card"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("split_document")),1),l])),_:1}),(0,o.wy)((0,o.Wm)(f,{flat:"",round:"",dense:"",icon:"close"},null,512),[[T]])])),_:1}),(0,o.Wm)(v,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(y),(0,o.Wm)(b,{class:"q-mr-sm",label:e.$t("confirm"),onClick:t[0]||(t[0]=t=>e.split_action_confirm=!0)},null,8,["label"])])),_:1}),(0,o.Wm)(C,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.pageCount,(i=>((0,o.wg)(),(0,o.iD)("span",{key:i,class:"box-parent"},[(0,o._)("div",r,[(0,o.Wm)(x,{flat:"",dense:"","data-page-id":i,name:"cancel",size:"20px",color:"red",class:"img-delete",onClick:e.deletePage},null,8,["data-page-id","onClick"]),(0,o.Wm)(k,{"data-page-id":i,class:"split-img",source:e.doc,page:i},null,8,["data-page-id","source","page"]),(0,o._)("span",d,(0,s.zw)(i),1)]),(0,o._)("span",c,[(0,o._)("span",{class:"splitter-span",onClick:t[1]||(t[1]=(...t)=>e.addSplit&&e.addSplit(...t)),"data-page-id":i,style:(0,s.j5)({height:e.splitterHeight+"px"})},null,12,u)])])))),128))])])),_:1}),(0,o.Wm)(D,{showing:e.processing},{default:(0,o.w5)((()=>[h])),_:1},8,["showing"]),e.split_action_confirm?((0,o.wg)(),(0,o.j4)(I,{key:0,persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(O,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(C,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",m,(0,s.zw)(e.$t("confirm_split_message")),1)])),_:1}),(0,o.Wm)(v,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(y),(0,o.Wm)(E,{label:e.$t("proceed"),onClick:t[2]||(t[2]=t=>e.performDocumentSplit())},null,8,["label"])])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1})}var _=i(61959),g=i(85985),f=i(77378),w=i(29938),y=i(9273),b=i(97767),v=i(45752),x=i.n(v),k=i(64252),C=i(50442),D=i(73902),O=i(25740),E=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const S=(0,o.aZ)({el:"#app",mixins:[g.Z,f.Z],props:["doc","pageCount","filedata","mode"],components:{SaveBtn:C.Z,DefaultBtn:D.Z,CancelBtn:b.Z,VuePdfEmbed:x()},data(){return{dragSrcEl:{}}},watch:{},methods:{handleDragStart(e){e.target.style.opacity="0.4",this.dragSrcEl=e.target,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.innerHTML)},handleDragEnd(e){e.target.style.opacity="1";let t=document.querySelectorAll(".main-container .box");t.forEach((function(e){e.classList.remove("over")}))},handleDragOver(e){return e.preventDefault(),!1},handleDragEnter(e){e.target.classList.add("over")},handleDragLeave(e){e.target.classList.remove("over")},handleDrop(e){if(e.stopPropagation(),this.dragSrcEl!==e.target){this.dragSrcEl.innerHTML=e.target.innerHTML,e.target.innerHTML=e.dataTransfer.getData("text/html");const t=e.target.querySelector(".img-delete");t&&t.addEventListener("click",this.deletePage);const i=this.dragSrcEl.querySelector(".img-delete");i&&i.addEventListener("click",this.deletePage)}return!1},deletePage(e){let t=e.target;if(!t)return;let i=t.parentNode;if(!i)return;let o=i.parentNode;if(!o)return;const s=Number(t.dataset.pageId);this.deleted_indexes.push(s),o.remove()},afterEvents(){let e=document.querySelectorAll(".main-container .box");e.forEach((e=>{e.addEventListener("dragstart",this.handleDragStart),e.addEventListener("dragend",this.handleDragEnd),e.addEventListener("dragover",this.handleDragOver),e.addEventListener("dragenter",this.handleDragEnter),e.addEventListener("dragleave",this.handleDragLeave),e.addEventListener("drop",this.handleDrop)}))},addSplit(e){e.stopPropagation();let t=e.target;const i="split-active";t.classList.contains(i)?t.classList.remove(i):t.classList.add("split-active")},getActiveSplits(){const e=document.querySelectorAll(".split-active");if(e.length<1)return[];const t=document.querySelector(".main-container");if(!t)return[];let i=[];for(var o=0;o<e.length;o++){let s=e[o],a=s.parentNode;if(!a)continue;let l=a.parentNode;if(!l)continue;const n=Array.prototype.indexOf.call(t.children,l);n&&i.push(Number(n)+1)}return i.push(t.children.length),i=this.sortNumbericArray(i),i},getActiveSplitters(){const e="split-active",t=document.querySelectorAll(".splitter-span");if(t.length<1)return[];let i=[];for(var o=0;o<t.length;o++){let s=t[o];if(!s.classList.contains(e))continue;const a=o+1;i.push(a)}return i.push(t.length),i=this.sortNumbericArray(i),i},getArrangedPages(){this.sorted_indexes={};const e=document.querySelectorAll(".split-img");if(e.length<1)return;let t=!1;for(var i=0;i<e.length;i++){let o=e[i];const s=Number(o.dataset.pageId),a=i+1;s!==a&&(t=!0),this.sorted_indexes[a]=s}t||(this.sorted_indexes={})},performDocumentSplit(){return E(this,void 0,void 0,(function*(){try{this.processing=!0;let e={},t=this.getActiveSplitters();if(this.getArrangedPages(),0!==(0,w.v7)(this.sorted_indexes)&&(e["sorted_indexes"]=JSON.stringify(this.sorted_indexes)),0!==this.deleted_indexes.length&&(e["deleted_indexes"]=this.deleted_indexes.toString()),0!==t.length&&(e["separators"]=t.toString()),0===(0,w.v7)(e))return this.processing=!1,void this.showFullWidthToast(this.$t("split_empty_warning"));"split_create"==this.mode?yield k.zU.split_create_doc(this.filedata,e.separators,e.sorted_indexes,e.deleted_indexes):"split_only"==this.mode?yield k.zU.split_old_doc(this.$route.params.id,e.separators,e.sorted_indexes,e.deleted_indexes):"ocr_create"==this.mode&&(yield this.scanstore.uploadSplitOcr(e.separators,e.sorted_indexes,e.deleted_indexes))}catch(e){const t=y.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.processing=!1,this.$router.push("/alfred/dashboard")}}))}},setup(){const e=(0,O.G)();return{processing:(0,_.iH)(!1),scanstore:e,baseUrl:"https://api.docbits.com",split_action_confirm:(0,_.iH)(!1),splitterHeight:(0,_.iH)(120),image_load_count:(0,_.iH)(0),deleted_indexes:(0,_.iH)([]),sorted_indexes:(0,_.iH)({}),content:(0,_.iH)([]),page:(0,_.iH)(),showAllPages:(0,_.iH)(!0),splitter_list:(0,_.iH)([])}}});var I=i(74260),T=i(10151),L=i(39570),M=i(13747),F=i(2165),q=i(99367),Z=i(25589),R=i(24554),W=i(66941),A=i(46778),V=i(75096),z=i(60677),B=i(7518),N=i.n(B);const P=(0,I.Z)(S,[["render",p],["__scopeId","data-v-4f48ab3c"]]),U=P;N()(S,"components",{QCard:T.Z,QToolbar:L.Z,QToolbarTitle:M.Z,QBtn:F.Z,QCardActions:q.Z,QCardSection:Z.Z,QIcon:R.Z,QInnerLoading:W.Z,QDialog:A.Z,QAvatar:V.Z}),N()(S,"directives",{ClosePopup:z.Z})},27547:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var o=i(83673),s=i(62323);const a={class:"container no-padding"},l={class:"row full-width secondary-c-text q-pt-md q-pb-md"},n={class:"col-6 pl-20"},r=(0,o._)("img",{width:"24",src:"back-primary.svg"},null,-1),d={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},c={class:"col-6 pr-22"};function u(e,t,i,u,h,m){const p=(0,o.up)("q-icon"),_=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",l,[(0,o._)("div",n,[(0,o.Wm)(_,{flat:"",rounded:"",color:"primary",to:e.back_to_rotue},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"text-red-13",size:"sm"},{default:(0,o.w5)((()=>[r])),_:1}),(0,o._)("label",d,(0,s.zw)(e.$t("layout.settings")),1)])),_:1},8,["to"])]),(0,o._)("div",c,[(0,o.WI)(e.$slots,"default"),e.create_new_btn?((0,o.wg)(),(0,o.j4)(_,{key:0,color:"primary",class:"float-right q-ml-sm",icon:"add",to:e.create_new_btn,label:e.$t("new")},null,8,["to","label"])):(0,o.kq)("",!0)])])])}const h=(0,o.aZ)({props:{back_to_rotue:{type:String,default:"/alfred/settings"},create_new_btn:{type:String,default:""}}});var m=i(74260),p=i(2165),_=i(24554),g=i(7518),f=i.n(g);const w=(0,m.Z)(h,[["render",u]]),y=w;f()(h,"components",{QBtn:p.Z,QIcon:_.Z})},22102:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var o=i(83673),s=i(62323);function a(e,t,i,a,l,n){const r=(0,o.up)("q-tooltip"),d=(0,o.up)("q-icon"),c=(0,o.up)("q-btn");return e.isButtonVisible?((0,o.wg)(),(0,o.j4)(c,{key:0,color:"primary",label:e.formBuilderConfigModel[e.fieldName].label,disable:e.isReadOnly,class:"full-width q-mt-sm",onClick:e.clickEvent},{default:(0,o.w5)((()=>[e.isFormBuilderMode&&!e.isModuleOn()?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"white"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("module_disabled")),1)])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},8,["label","disable","onClick"])):(0,o.kq)("",!0)}var l=i(10321),n=i(61959),r=i(60727),d=i(77378),c=i(45401),u=i(41891),h=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const m=(0,o.aZ)({name:"TextInput",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1},show_button_type:{type:String,default:""}},emits:["inputClicked","updateModel"],mixins:[d.Z,c.Z],watch:{},data(){return{auto_accounting_setting:u.x8}},beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},computed:{isButtonVisible:function(){return!!this.isFormBuilderMode||(this.show_button_type===this.currentField.fieldType||""===this.show_button_type&&!(!this.isModuleOn()||"INVOICE"!=this.record.doc_type))}},methods:{isModuleOn(){return this.user_settings[this.auto_accounting_setting]||(this.user_settings[this.auto_accounting_setting]=!1),Boolean(this.user_settings[this.auto_accounting_setting])},clickEvent(e){return h(this,void 0,void 0,(function*(){if(e.stopPropagation(),this.isFormBuilderMode)this.$emit("inputClicked",this.fieldName);else try{if(this.isReadOnly)return void this.$router.push("/accounting/"+this.$route.params.id);this.showLoading();const e=yield this.saveAndValidate();if(!1===e.success){const t=new CustomEvent("display_fields_errors",{});return document.dispatchEvent(t),void this.showErrorToast(e.message)}this.$router.push("/accounting/"+this.$route.params.id)}catch(t){}finally{this.hideLoading()}}))}},setup(){const e=(0,r.nc)(),{formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o}=(0,l.Jk)(e),s=(0,r.H_)(),{record:a,doctype:d,tb_version:c}=(0,l.Jk)(s),{saveAndValidate:u}=s,h=(0,r.VF)(),{user_settings:m,loading_settings:p}=(0,l.Jk)(h);return{saveAndValidate:u,doctype:d,record:a,formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o,user_settings:m,loading_settings:p,show_button:(0,n.iH)(!1)}}});var p=i(74260),_=i(2165),g=i(24554),f=i(5363),w=i(7518),y=i.n(w);const b=(0,p.Z)(m,[["render",a]]),v=b;y()(m,"components",{QBtn:_.Z,QIcon:g.Z,QTooltip:f.Z})},49629:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var o=i(83673),s=i(62323);function a(e,t,i,a,l,n){const r=(0,o.up)("q-tooltip"),d=(0,o.up)("q-icon"),c=(0,o.up)("q-btn");return e.isButtonVisible?((0,o.wg)(),(0,o.j4)(c,{key:0,color:"primary",label:e.formBuilderConfigModel[e.fieldName].label,disable:e.isReadOnly,class:"full-width q-mt-sm",onClick:e.clickEvent},{default:(0,o.w5)((()=>[e.isFormBuilderMode&&!e.isPoSettingActivate()?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"white"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("module_disabled")),1)])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},8,["label","disable","onClick"])):(0,o.kq)("",!0)}var l=i(10321),n=i(60727),r=i(37295),d=i(77378),c=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const u=(0,o.aZ)({name:"TextInput",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1},show_button_type:{type:String,default:""}},emits:["inputClicked","updateModel"],mixins:[r.Z,d.Z],beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},computed:{isButtonVisible:function(){return!!this.isFormBuilderMode||(this.show_button_type===this.currentField.fieldType||""===this.show_button_type&&!(!this.isPoSettingActivate()||!this.isPoIconAllowed(this.doctype,this.record.status,this.tb_version)))}},methods:{clickEvent(e){return c(this,void 0,void 0,(function*(){if(e.stopPropagation(),this.isFormBuilderMode)return void this.$emit("inputClicked",this.fieldName);if(null===this.tb_version)return;let t=this.showProcessMessage(this.$t("saving_data"));const i=yield this.saveAndValidate();if(t(),!1===i.success){const e=new CustomEvent("display_fields_errors",{});return document.dispatchEvent(e),void this.showErrorToast(i.message)}this.$router.push("/po-matching-v3/"+this.record.doc_id)}))}},setup(){const e=(0,n.nc)(),{formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o}=(0,l.Jk)(e),s=(0,n.H_)(),{record:a,doctype:r,tb_version:d}=(0,l.Jk)(s),{saveAndValidate:c}=s,u=(0,n.TB)(),{hasActionAcquiredLock:h,releaseDocLock:m}=u;return{saveAndValidate:c,hasActionAcquiredLock:h,releaseDocLock:m,tb_version:d,doctype:r,record:a,formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o}}});var h=i(74260),m=i(2165),p=i(24554),_=i(5363),g=i(7518),f=i.n(g);const w=(0,h.Z)(u,[["render",a]]),y=w;f()(u,"components",{QBtn:m.Z,QIcon:p.Z,QTooltip:_.Z})},20850:(e,t,i)=>{"use strict";i.d(t,{Z:()=>S});var o=i(83673),s=i(62323);const a={class:"q-ml-sm"},l={class:"q-ml-sm"};function n(e,t,i,n,r,d){const c=(0,o.up)("q-btn"),u=(0,o.up)("q-avatar"),h=(0,o.up)("q-card-section"),m=(0,o.up)("q-card-actions"),p=(0,o.up)("q-card"),_=(0,o.up)("q-dialog"),g=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(c,{color:"primary",label:e.formBuilderConfigModel[e.fieldName].label,disable:e.isReadOnly,class:"full-width q-mt-sm",onClick:e.clickEvent},null,8,["label","disable","onClick"]),(0,o.Wm)(_,{modelValue:e.confirmRuleSave,"onUpdate:modelValue":t[1]||(t[1]=t=>e.confirmRuleSave=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(h,{class:"row items-center",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o._)("span",a,(0,s.zw)(e.$t("pages.messages.SAVE_RULES_WARNING")),1),(0,o._)("span",l,(0,s.zw)(e.$t("pages.messages.SAVE_RULES_WARNING_2")),1)])),_:1}),(0,o.Wm)(m,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(c,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[g]]),(0,o.wy)((0,o.Wm)(c,{flat:"",label:e.$t("done"),color:"primary",onClick:t[0]||(t[0]=t=>e.saveRules())},null,8,["label"]),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var r=i(10321),d=i(61959),c=i(60727),u=i(77378),h=i(45401),m=i(80579),p=i(9273),_=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const g=(0,o.aZ)({name:"TextInput",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},emits:["inputClicked","updateModel"],mixins:[h.Z,u.Z],beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},methods:{clickEvent(e){e.stopPropagation(),this.isFormBuilderMode?this.$emit("inputClicked",this.fieldName):this.confirmRuleSave=!0},saveRules(){return _(this,void 0,void 0,(function*(){const e=yield this.hasActionAcquiredLock();if(e){this.confirmRuleSave=!1,this.showLoading(),this.record.hasOwnProperty("table_data_copy")&&delete this.record["table_data_copy"];try{const e={data:JSON.stringify(this.record)},t=yield m.zB.saveRules(e);if(!1===t.success)throw t.message;this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(t){const e=p.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.hideLoading()}}}))}},setup(){const e=(0,c.nc)(),{isFormBuilderMode:t,formBuilderConfigModel:i}=(0,r.Jk)(e),o=(0,c.H_)(),{record:s}=(0,r.Jk)(o),a=(0,c.TB)(),{hasActionAcquiredLock:l}=a;return{formBuilderConfigModel:i,hasActionAcquiredLock:l,record:s,isFormBuilderMode:t,confirmRuleSave:(0,d.iH)(!1)}}});var f=i(74260),w=i(2165),y=i(46778),b=i(10151),v=i(25589),x=i(75096),k=i(99367),C=i(60677),D=i(7518),O=i.n(D);const E=(0,f.Z)(g,[["render",n]]),S=E;O()(g,"components",{QBtn:w.Z,QDialog:y.Z,QCard:b.Z,QCardSection:v.Z,QAvatar:x.Z,QCardActions:k.Z}),O()(g,"directives",{ClosePopup:C.Z})},72272:(e,t,i)=>{"use strict";i.d(t,{Z:()=>b});var o=i(83673),s=i(62323);const a={key:0,src:"ignore_table_validate_done.svg"},l={key:1,src:"ignore_table_validate.svg"};function n(e,t,i,n,r,d){const c=(0,o.up)("q-tooltip"),u=(0,o.up)("q-icon");return(0,o.wg)(),(0,o.j4)(u,{size:"28px",onClick:e.ignoreTableValidation,class:"q-mr-sm cursor-pointer"},{default:(0,o.w5)((()=>[e.ignore_table_validation?((0,o.wg)(),(0,o.iD)("img",a)):((0,o.wg)(),(0,o.iD)("img",l)),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("ignore_table_validation")),1)])),_:1})])),_:1},8,["onClick"])}var r=i(77378),d=i(61959),c=i(60727),u=i(45401),h=i(10321);const m=(0,o.aZ)({el:"#app",mixins:[u.Z,r.Z],components:{},props:{isReadOnly:{type:Boolean,default:!1}},watch:{doc_loaded:{handler:function(e,t){this.init()}}},data(){return{}},mounted(){this.init()},methods:{init(){this.isFormBuilderMode||this.record.hasOwnProperty("ignore_table_validation")&&1==this.record.ignore_table_validation&&(this.ignore_table_validation=!0)},ignoreTableValidation(){this.isFormBuilderMode||this.isReadOnly||(this.ignore_table_validation=!this.ignore_table_validation,this.record.ignore_table_validation=this.ignore_table_validation)}},setup(){const e=(0,c.H_)(),{doc_loaded:t,record:i}=(0,h.Jk)(e),o=(0,c.nc)(),{isFormBuilderMode:s}=(0,h.Jk)(o);return{isFormBuilderMode:s,doc_loaded:t,record:i,ignore_table_validation:(0,d.iH)(!1)}}});var p=i(74260),_=i(24554),g=i(5363),f=i(7518),w=i.n(f);const y=(0,p.Z)(m,[["render",n],["__scopeId","data-v-4290b59a"]]),b=y;w()(m,"components",{QIcon:_.Z,QTooltip:g.Z})},49836:(e,t,i)=>{"use strict";i.d(t,{Z:()=>S});var o=i(83673),s=i(62323),a=i(98880);const l={class:"full-width"},n={key:0,class:"center border-left"},r=["onClick"],d=["onClick"],c={key:0,class:"center border-left"};function u(e,t,i,u,h,m){const p=(0,o.up)("q-tooltip"),_=(0,o.up)("q-btn"),g=(0,o.up)("q-checkbox"),f=(0,o.up)("q-markup-table");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(f,{flat:"",class:"group_checkboxes_tbl overflow-visible border-bottom"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.formBuilderConfigModel[e.fieldName].tableHeaderRows,((t,i)=>((0,o.wg)(),(0,o.iD)("thead",{key:i},[(0,o._)("tr",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t,((e,t)=>((0,o.wg)(),(0,o.iD)("th",{key:t,class:(0,s.C_)(["border-left",0==t?" text-left ":" center "])},(0,s.zw)(e),3)))),128)),e.isFormBuilderMode?((0,o.wg)(),(0,o.iD)("th",n,[(0,o.Wm)(_,{round:"",color:"primary",icon:"settings",size:"xs",class:"h-m-5 float-right",onClick:t=>e.loadSettings(i,e.headerColumnIndex,!0)},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("settings")),1)])),_:1})])),_:2},1032,["onClick"])])):(0,o.kq)("",!0)])])))),128)),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.formBuilderConfigModel[e.fieldName].tableBodyRows,((t,i)=>((0,o.wg)(),(0,o.iD)("tr",{key:i},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t,((t,l)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:l},[t.isLabelArea?((0,o.wg)(),(0,o.iD)("td",{key:0,class:"text-left border-left",onClick:t=>e.loadSettings(i,l,!1)},(0,s.zw)(t.label),9,r)):((0,o.wg)(),(0,o.iD)("td",{key:1,class:(0,s.C_)(["center border-left group-checkbox-td",e.formBuilderConfigModel[e.fieldName].tableBodyRows[i][l].isDisabled?" bg-disable ":" "]),onClick:t=>e.loadSettings(i,l,!1)},[(0,o.Wm)(g,{id:t.name,child_type:"checkbox",disable:!e.isFormBuilderMode&&(e.isReadOnly||e.formBuilderConfigModel[e.fieldName].tableBodyRows[i][l].isDisabled),"onUpdate:modelValue":[o=>e.inputValueChanges(o,t.name,i,l),i=>e.formBuilderModel[t.name].formatted_value=i],onFocus:e.focusEvent,onKeydown:(0,a.D2)((i=>{e.keydownEvent(i,t.name)}),["enter"]),modelValue:e.formBuilderModel[t.name].formatted_value,size:"30px",color:"grey-6",class:(0,s.C_)(t.name+" "+e.getElementBorder(e.formBuilderConfigModel[t.name].color))},null,8,["id","disable","onUpdate:modelValue","onFocus","onKeydown","modelValue","class"])],10,d))],64)))),128)),e.isFormBuilderMode?((0,o.wg)(),(0,o.iD)("td",c,[(0,o.Wm)(_,{round:"",color:"primary",icon:"delete",size:"xs",class:"h-m-5 float-right",onClick:t=>e.deleteRow(i)},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])):(0,o.kq)("",!0)])))),128))])])),_:1})])}var h=i(10321),m=i(61959),p=i(85985),_=i(60727),g=i(85854);const f=(0,o.aZ)({name:"TableOfCheckboxes",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},emits:["updateModel","inputValueChanges"],mixins:[p.Z],beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},methods:{loadSettings(e,t,i){if(!this.isFormBuilderMode)return;this.activeTab="element_properties",this.activeFieldName=this.fieldName;const o=new CustomEvent("load_settings",{detail:{rowIndex:e,columnIndex:t,isColumnMode:i}});document.dispatchEvent(o)},deleteRow(e){for(let t of this.formBuilderConfigModel[this.fieldName].tableBodyRows)delete this.formBuilderModel[t.name];this.formBuilderConfigModel[this.fieldName].tableBodyRows.splice(e,1)},inputValueChanges(e,t,i,o){const s="Enter"==window.event.key;if(s){const e=this.formBuilderModel[t].formatted_value;return setTimeout((()=>{this.formBuilderModel[t].formatted_value=e,this.emitinputValueChanges(t)}),50),void this.triggerMoveToNextFieldEvent(t)}this.emitinputValueChanges(t),this.loadSettings(i,o,!1)},emitinputValueChanges(e){this.$emit("inputValueChanges",e,g.oh.TABLE_OF_CHECKBOXES)},triggerMoveToNextFieldEvent(e){if(this.is_focus_event)return void(this.is_focus_event=!1);const t=new CustomEvent("move_to_next_field",{detail:e});document.dispatchEvent(t)},keydownEvent(e,t){this.is_focus_event=!1,this.triggerMoveToNextFieldEvent(t)},focusEvent(){this.is_focus_event=!0,setTimeout((()=>{this.is_focus_event=!1}),500)}},setup(){const e=(0,_.nc)(),{formBuilderConfigModel:t,isFormBuilderMode:i,formBuilderModel:o,activeFieldName:s,activeTab:a}=(0,h.Jk)(e);return{activeTab:a,activeFieldName:s,isFormBuilderMode:i,formBuilderModel:o,formBuilderConfigModel:t,is_focus_event:(0,m.iH)(!1)}}});var w=i(74260),y=i(30481),b=i(2165),v=i(5363),x=i(65735),k=i(17132),C=i(86115),D=i(7518),O=i.n(D);const E=(0,w.Z)(f,[["render",u],["__scopeId","data-v-5c4897b6"]]),S=E;O()(f,"components",{QMarkupTable:y.Z,QBtn:b.Z,QTooltip:v.Z,QCheckbox:x.Z,QTable:k.Z,QField:C.Z})},46614:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x});var o=i(83673),s=i(62323);const a={class:"full-width"},l=["src"];function n(e,t,i,n,r,d){const c=(0,o.up)("q-icon"),u=(0,o.up)("q-tooltip"),h=(0,o.up)("q-btn"),m=(0,o.up)("q-btn-group");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(m,{class:"group-btn-panel pr-14 mt-15",outline:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.buttons,((t,i)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i},[!t.is_hidden||e.isFormBuilderMode?((0,o.wg)(),(0,o.j4)(h,{key:0,class:(0,s.C_)(t.selected?"q-btn-selected":""),outline:"",color:"#9d9898",onClick:i=>e.toggleGroupFieldsVisibility(t.field,t.selected)},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{size:"md"},{default:(0,o.w5)((()=>[(0,o._)("img",{width:"26",src:t.icon},null,8,l)])),_:2},1024),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.label),1)])),_:2},1024)])),_:2},1032,["class","onClick"])):(0,o.kq)("",!0)],64)))),128))])),_:1})])}var r=i(10321),d=i(60727),c=i(91777),u=i(85854),h=i(70314);const m=(0,o.aZ)({name:"CheckBox",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},data(){return{buttons:{}}},mixins:[h.Z,c.Z],beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},mounted:function(){this.addAdditionalAmountPanelInRows()},methods:{addAdditionalAmountPanelInRows(){let e=JSON.parse(JSON.stringify(u.kC.aditionalAmountGroupPositive)),t=JSON.parse(JSON.stringify(u.kC.aditionalAmountGroupNegative)),i=[],o=!0;this.buttons=[{selected:!1,is_hidden:!1,name:"additional_amount",icon:"AdditionalAmount.svg",field:"additional_amount",label:"Additional Amount"},{selected:!1,is_hidden:!1,name:"additional_amount_2",icon:"AdditionalAmount.svg",field:"additional_amount_2",label:"Additional Amount 2"},{selected:!1,is_hidden:!1,name:"additional_amount_3",icon:"AdditionalAmount.svg",field:"additional_amount_3",label:"Additional Amount 3"},{selected:!1,is_hidden:!1,name:"negative_amount",icon:"NegativeAmount.svg",field:"negative_amount",label:"Negative Amount"},{selected:!1,is_hidden:!1,name:"negative_amount_2",icon:"NegativeAmount.svg",field:"negative_amount_2",label:"Negative Amount 2"},{selected:!1,is_hidden:!1,name:"negative_amount_3",icon:"NegativeAmount.svg",field:"negative_amount_3",label:"Negative Amount 3"}];let s="";for(const[a,l]of this.buttons.entries()){s="";let a=l.field;i.push(a),this.formBuilderConfigModel[a].is_hidden?(l.is_hidden=!0,s=a):this.formBuilderModel[a].value?(l.selected=!0,this.formBuilderModel[a].visibile=!0,this.formBuilderConfigModel[a].visibile=!0,o=!1):(this.formBuilderConfigModel[a].visibile=!1,s=a),s&&(e.includes(a)?e=e.filter((e=>e!==a)):t.includes(a)&&(t=t.filter((e=>e!==a))))}o&&(this.buttons[0].selected=!0,this.formBuilderModel[this.buttons[0].field].visibile=!0,this.formBuilderConfigModel[this.buttons[0].field].visibile=!0);for(const[a,l]of this.formLayout.entries())if("tax_details"===l.name)for(const[o,s]of l.rows.entries())i.some((e=>e===s.field_name))&&(s.visibile=this.formBuilderConfigModel[s.field_name].visibile,e.includes(s.field_name)?s.elementWidth=Math.round(this.calculateRowColSize(e.length)):t.includes(s.field_name)&&(s.elementWidth=Math.round(this.calculateRowColSize(t.length))))},toggleGroupFieldsVisibility(e,t){if(this.isButtonToggleDisable())return;this.buttons.forEach(((i,o)=>{i.field==e&&(i.selected=!t)}));let i=[],o=[];for(const s of this.formLayout)for(const a of s.rows)"tax_details"===s.name&&(a.field_name==e&&(a.visibile=!t),a.visibile&&!a.is_hidden&&(u.kC.aditionalAmountGroupPositive.includes(a.field_name)?i.push(a.field_name):u.kC.aditionalAmountGroupNegative.includes(a.field_name)&&o.push(a.field_name)));for(const s of this.formLayout)for(const e of s.rows)"tax_details"===s.name&&(i.includes(e.field_name)?e.elementWidth=Math.round(this.calculateRowColSize(i.length)):o.includes(e.field_name)&&(e.elementWidth=Math.round(this.calculateRowColSize(o.length))));this.prepareLayoutForTemplate()}},setup(){const e=(0,d.nc)(),{formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o,formLayout:s}=(0,r.Jk)(e);return{formBuilderConfigModel:o,isFormBuilderMode:i,formBuilderModel:t,formLayout:s}}});var p=i(74260),_=i(36375),g=i(2165),f=i(24554),w=i(5363),y=i(7518),b=i.n(y);const v=(0,p.Z)(m,[["render",n],["__scopeId","data-v-37e7cb8a"]]),x=v;b()(m,"components",{QBtnGroup:_.Z,QBtn:g.Z,QIcon:f.Z,QTooltip:w.Z})},40925:(e,t,i)=>{"use strict";i.d(t,{Z:()=>w});var o=i(83673),s=i(62323);const a={class:"full-width"};function l(e,t,i,l,n,r){const d=(0,o.up)("q-btn"),c=(0,o.up)("q-btn-group");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(c,{class:"group-btn-panel",outline:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.buttons,((t,i)=>((0,o.wg)(),(0,o.j4)(d,{key:i,class:(0,s.C_)(["cursor-pointer",t.selected?"q-btn-selected":""]),outline:"",color:"#9d9898",label:e.$t("pages.screen2a."+t.translation_key),onClick:i=>e.toggleFieldsVisibility(t.fields,t.name,t.selected)},null,8,["class","label","onClick"])))),128))])),_:1})])}var n=i(10321),r=i(60727),d=i(85854),c=i(70314);const u=(0,o.aZ)({name:"CheckBox",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},data(){return{buttons:{}}},mixins:[c.Z],beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},mounted:function(){this.addFieldsButtonsVibility()},methods:{toggleFieldsVisibility(e,t,i){if(!this.isButtonToggleDisable()){this.buttons.forEach(((e,o)=>{e.name==t&&(e.selected=!i)}));for(const t of this.formLayout)for(const o of t.rows){let t=o.field_name;e.some((e=>e===t))&&(o.visibile=!i,this.formBuilderConfigModel[t].visibile=!i)}this.prepareLayoutForTemplate(),this.$forceUpdate()}},addFieldsButtonsVibility(){this.addVibilityButtons();let e=this.checkButtonsVisibilty(),t=JSON.parse(JSON.stringify(d.kC.amountGroup1)),i=JSON.parse(JSON.stringify(d.kC.amountGroup2)),o=JSON.parse(JSON.stringify(d.kC.amountGroup3)),s=[];this.buttons.forEach(((a,l)=>{let n=Object.values(a.fields);for(const[r,d]of n.entries()){let l=d;this.formBuilderConfigModel[l]&&(s.push(l),!0===e[a.name]?(a.selected=!0,this.formBuilderConfigModel[l].visibile=!0):(a.selected=!1,this.formBuilderConfigModel[l].visibile=!1),this.formBuilderConfigModel[l].is_hidden&&(t.includes(l)?t=t.filter((e=>e!==l)):i.includes(l)?i=i.filter((e=>e!==l)):o.includes(l)&&(o=o.filter((e=>e!==l)))))}}));for(const a of this.formLayout)for(const e of a.rows){let l=e.field_name;"tax_details"===a.name&&s.some((e=>e===l))&&(e.visibile=this.formBuilderConfigModel[l].visibile,t.includes(e.field_name)?e.elementWidth=Math.round(this.calculateRowColSize(t.length)):i.includes(e.field_name)?e.elementWidth=Math.round(this.calculateRowColSize(i.length)):o.includes(e.field_name)&&(e.elementWidth=Math.round(this.calculateRowColSize(o.length))))}this.prepareLayoutForTemplate()},addVibilityButtons(){this.buttons=[{selected:!1,name:"full",translation_key:"full",fields:["net_amount","tax_amount","tax_rate","tax_code"]},{selected:!1,name:"reduced",translation_key:"reduced",fields:["net_amount_2","tax_amount_2","tax_rate_2","tax_code_2"],alt_translation_keys:{net_amount_2:"net_amount",tax_amount_2:"tax_amount",tax_rate_2:"tax_rate",tax_code_2:"tax_code"}},{selected:!1,name:"free",translation_key:"free",fields:["net_amount_3","tax_amount_3","tax_rate_3","tax_code_3"],alt_translation_keys:{net_amount_3:"net_amount",tax_amount_3:"tax_amount",tax_rate_3:"tax_rate",tax_code_3:"tax_code"}}]},checkButtonsVisibilty(){var e={};return this.buttons.forEach(((t,i)=>{let o=Object.values(t.fields);e.hasOwnProperty(t.name)||(e[t.name]=!1),o.forEach(((i,o)=>{this.formBuilderModel[i]&&(this.formBuilderModel[i].value||this.formBuilderModel[i].is_required||"error-border-left"==this.formBuilderModel[i].color)&&(e[t.name]=!0)}))})),this.makeFullTaxDetailRowVisible(e),e},makeFullTaxDetailRowVisible(e){let t=!1;for(let[i,o]of Object.entries(e))o&&(t=!0);t||(e["full"]=!0)}},setup(){const e=(0,r.nc)(),{formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o,formLayout:s}=(0,n.Jk)(e);return{formBuilderConfigModel:o,isFormBuilderMode:i,formBuilderModel:t,formLayout:s}}});var h=i(74260),m=i(36375),p=i(2165),_=i(7518),g=i.n(_);const f=(0,h.Z)(u,[["render",l],["__scopeId","data-v-59dbbaaa"]]),w=f;g()(u,"components",{QBtnGroup:m.Z,QBtn:p.Z})},27728:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var o=i(83673),s=i(62323);const a=(0,o.Uk)(" Following fields need to be validated before export:"),l=(0,o._)("br",null,null,-1),n=(0,o._)("br",null,null,-1);function r(e,t,i,r,d,c){const u=(0,o.up)("q-tooltip"),h=(0,o.up)("q-btn");return e.isButtonVisible?((0,o.wg)(),(0,o.j4)(h,{key:0,color:"primary",label:e.formBuilderConfigModel[e.fieldName].label,disable:e.isReadOnly,class:(0,s.C_)(["full-width q-mt-sm",e.canDisabled&&!e.enableExportButton?"disabled":""]),onClick:t[0]||(t[0]=t=>{t.stopPropagation(),e.inputClicked(e.fieldName)})},{default:(0,o.w5)((()=>[e.canDisabled&&e.fieldsErrorArray&&e.fieldsErrorArray.length>0?((0,o.wg)(),(0,o.j4)(u,{key:0},{default:(0,o.w5)((()=>[a,l,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.fieldsErrorArray,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e},[(0,o.Uk)((0,s.zw)(e),1),n])))),128))])),_:1})):(0,o.kq)("",!0)])),_:1},8,["label","disable","class"])):(0,o.kq)("",!0)}var d=i(10321),c=i(61959),u=i(41891),h=i(60727),m=i(85854);const p=(0,o.aZ)({name:"TextInput",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1},show_button_type:{type:String,default:""}},emits:["inputClicked","updateModel"],computed:{isButtonVisible:function(){return!(!this.isFormBuilderMode&&m.oh.EXPORT_BUTTON===this.currentField.fieldType)||(this.show_button_type===this.currentField.fieldType||""===this.show_button_type)}},beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},mounted:function(){!this.isFormBuilderMode&&this.formBuilderConfigModel[this.fieldName].exportType==u.tl["export"]&&(0,u.s_)(this.doctype)&&(this.canDisabled=!0)},methods:{inputClicked(e){this.canDisabled&&!this.enableExportButton||this.$emit("inputClicked",e)}},setup(){const e=(0,h.H_)(),{fieldsErrorArray:t,enableExportButton:i,doctype:o}=(0,d.Jk)(e),s=(0,h.nc)(),{formBuilderModel:a,isFormBuilderMode:l,formBuilderConfigModel:n}=(0,d.Jk)(s);return{doctype:o,fieldsErrorArray:t,formBuilderModel:a,isFormBuilderMode:l,enableExportButton:i,formBuilderConfigModel:n,canDisabled:(0,c.iH)(!1)}}});var _=i(74260),g=i(2165),f=i(5363),w=i(7518),y=i.n(w);const b=(0,_.Z)(p,[["render",r]]),v=b;y()(p,"components",{QBtn:g.Z,QTooltip:f.Z})},40386:(e,t,i)=>{"use strict";i.d(t,{Z:()=>b});var o=i(83673),s=i(98880),a=i(62323);const l={class:"full-width"};function n(e,t,i,n,r,d){const c=(0,o.up)("q-checkbox");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(c,{id:e.fieldName,child_type:"checkbox",disable:e.isReadOnly,tabindex:e.formBuilderConfigModel[e.fieldName].tabIndex,label:e.getLabelForFormBuilder(e.formBuilderConfigModel[e.fieldName],"form_builder."),onFocus:e.focusEvent,onKeydown:(0,s.D2)(e.keydownEvent,["enter"]),modelValue:e.formBuilderModel[e.fieldName].formatted_value,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.formBuilderModel[e.fieldName].formatted_value=t),t[1]||(t[1]=t=>e.inputValueChanges(t,e.fieldName))],size:"30px",color:"grey-6",class:(0,a.C_)(e.formBuilderModel[e.fieldName].name+" "+e.getElementBorder(e.formBuilderConfigModel[e.fieldName].color))},null,8,["id","disable","tabindex","label","onFocus","onKeydown","modelValue","class"])])}var r=i(10321),d=i(61959),c=i(85985),u=i(60727),h=i(91777),m=i(85828);const p=(0,o.aZ)({name:"CheckBox",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},emits:["inputValueChanges","updateModel"],mixins:[h.Z,m.Z,c.Z],beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},methods:{getLowerConfidence(e){return this.isFormBuilderMode?null:this.getLowerConfidence(e)},inputValueChanges(e,t){const i="Enter"==window.event.key;if(i)return this.formBuilderModel[this.fieldName].formatted_value=!this.formBuilderModel[this.fieldName].formatted_value,void this.triggerMoveToNextFieldEvent();this.$emit("inputValueChanges",t,"checkbox")},triggerMoveToNextFieldEvent(){if(this.is_focus_event)return void(this.is_focus_event=!1);const e=new CustomEvent("move_to_next_field",{detail:this.fieldName});document.dispatchEvent(e)},keydownEvent(e){this.is_focus_event=!1,this.triggerMoveToNextFieldEvent()},focusEvent(e){this.is_focus_event=!0,setTimeout((()=>{this.is_focus_event=!1}),500)}},setup(){const e=(0,u.nc)(),{formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o}=(0,r.Jk)(e);return{formBuilderConfigModel:o,isFormBuilderMode:i,formBuilderModel:t,is_focus_event:(0,d.iH)(!1)}}});var _=i(74260),g=i(65735),f=i(7518),w=i.n(f);const y=(0,_.Z)(p,[["render",n]]),b=y;w()(p,"components",{QCheckbox:g.Z})},81964:(e,t,i)=>{"use strict";i.d(t,{Z:()=>O});var o=i(83673),s=i(62323);const a={class:"full-width"},l={key:0,class:"col-sm-12 col-md-12 col-lg-12 display-flex"},n={key:0,class:"width-35px"},r=["id","child_type"],d={class:"inner-field-actions",style:{height:"38px"}};function c(e,t,i,c,u,h){const m=(0,o.up)("q-tooltip"),p=(0,o.up)("q-icon"),_=(0,o.up)("q-select");return(0,o.wg)(),(0,o.iD)("div",a,[e.formBuilderConfigModel[e.fieldName].displayLabelOnLeft?((0,o.wg)(),(0,o.iD)("div",{key:0,style:(0,s.j5)("width:"+e.formBuilderConfigModel[e.fieldName].labelWidth+"%"),class:"display-block"},[(0,o._)("div",{class:(0,s.C_)(e.fieldName+" "+(e.isFormBuilderMode||null==e.getLowerConfidenceIfNotFormBuilder(e.formBuilderModel[e.fieldName])?" full-width ":" label-area "))},[(0,o.Uk)((0,s.zw)(e.getLabelForFormBuilder(e.formBuilderConfigModel[e.fieldName],"form_builder."))+" ",1),(0,o.kq)("",!0)],2)],4)):(0,o.kq)("",!0),(0,o._)("div",{style:(0,s.j5)("width:"+e.getInputFieldWidth(e.formBuilderConfigModel[e.fieldName])+"%"),class:"display-block"},[e.formBuilderConfigModel[e.fieldName].displayLabelOnLeft?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("div",{class:(0,s.C_)(["ellipsify",e.fieldName+" "+(e.isFormBuilderMode||null==e.getLowerConfidenceIfNotFormBuilder(e.formBuilderModel[e.fieldName])?"full-width":"label-area-fb")])},[(0,o.Uk)((0,s.zw)(e.getLabelForFormBuilder(e.formBuilderConfigModel[e.fieldName],"form_builder."))+" ",1),(0,o.kq)("",!0),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.getLabelForFormBuilder(e.formBuilderConfigModel[e.fieldName],"form_builder.")),1)])),_:1})],2),!e.isFormBuilderMode&&e.getLowerConfidenceIfNotFormBuilder(e.formBuilderModel[e.fieldName])?((0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(p,{name:"check_circle_outline",class:"q-pb-xs text-teal-5"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.getLowerConfidenceIfNotFormBuilder(e.formBuilderModel[e.fieldName]))+"%",1)])),_:1})])),_:1})])):(0,o.kq)("",!0)])),(0,o._)("div",{id:e.fieldName,child_type:e.formBuilderConfigModel[e.fieldName].is_textarea?"textarea":"input",class:(0,s.C_)(["col-sm-12 col-md-12 col-lg-12 autocomplete",e.formBuilderConfigModel[e.fieldName].is_textarea?" ":" input-text-28px"]),role:"combobox","aria-autocomplete":"list","aria-controls":"suggestions","aria-expanded":"false"},[(0,o.Wm)(_,{outlined:"","data-field-name":e.formBuilderConfigModel[e.fieldName].field_name,options:e.options,disable:e.isReadOnly||e.formBuilderConfigModel[e.fieldName].is_readonly,class:(0,s.C_)("full-width input-field ellipsify "+e.formBuilderConfigModel[e.fieldName].field_name+"_input "+e.formBuilderConfigModel[e.fieldName].color+" "+(e.formBuilderModel[e.fieldName].input_error?" invalid-input ":"")+e.formBuilderModel[e.fieldName].input_error),"onUpdate:modelValue":[t[0]||(t[0]=t=>{e.changeEventHandler(t)}),t[1]||(t[1]=t=>e.formBuilderModel[e.fieldName].formatted_value=t)],modelValue:e.formBuilderModel[e.fieldName].formatted_value,"data-cy":e.formBuilderModel[e.fieldName].field_name,"emit-value":"","map-options":""},{append:(0,o.w5)((()=>[(0,o._)("div",d,[e.formBuilderModel[e.fieldName].input_error?((0,o.wg)(),(0,o.j4)(p,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[""!==e.formBuilderModel[e.fieldName].input_error?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)((0,s.zw)(e.$t(e.formBuilderModel[e.fieldName].input_error)),1)],64)):(0,o.kq)("",!0)])),_:1})])),_:1})):(0,o.kq)("",!0)])])),_:1},8,["data-field-name","options","disable","class","modelValue","data-cy"])],10,r)],4)])}var u=i(10321),h=i(29474),m=i(61959),p=i(91777),_=i(68925),g=i(85828),f=i(60727);const w=(0,o.aZ)({name:"EnumInput",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},emits:["inputClicked","inputValueChanges","updateModel"],mixins:[p.Z,g.Z,_.Z,h.Z],beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},mounted:function(){this.options=this.getListOfValuesAsSelectList(this.formBuilderConfigModel[this.fieldName].list_of_values)},methods:{getLowerConfidenceIfNotFormBuilder(e){return this.isFormBuilderMode?null:this.getLowerConfidence(e)},changeEventHandler(e){this.formBuilderModel[this.fieldName].formatted_value=e,this.formBuilderModel[this.fieldName].value=e,this.$emit("inputValueChanges",this.fieldName,"input")}},setup(){const e=(0,f.nc)(),{formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o}=(0,u.Jk)(e),s=(0,f.wr)(),{getListOfValuesAsSelectList:a}=s;return{formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o,getListOfValuesAsSelectList:a,options:(0,m.iH)([])}}});var y=i(74260),b=i(5363),v=i(24554),x=i(72448),k=i(7518),C=i.n(k);const D=(0,y.Z)(w,[["render",c],["__scopeId","data-v-5d060b5b"]]),O=D;C()(w,"components",{QTooltip:b.Z,QIcon:v.Z,QSelect:x.Z})},83678:(e,t,i)=>{"use strict";i.d(t,{Z:()=>U});var o=i(83673),s=i(62323);const a=e=>((0,o.dD)("data-v-1a63a0fd"),e=e(),(0,o.Cn)(),e),l={key:0,class:"full-width"},n={class:"highlighted-back"},r=(0,o.Uk)(" No columns found. Please contact system administrator. "),d=(0,o.Uk)(" No columns found. Please go to "),c=(0,o.Uk)(". "),u={class:"full-width"},h=a((()=>(0,o._)("img",{width:"22",src:"add_row.svg"},null,-1))),m=["id"];function p(e,t,i,a,p,_){const g=(0,o.up)("q-markup-table"),f=(0,o.up)("q-btn"),w=(0,o.up)("q-td"),y=(0,o.up)("draggable"),b=(0,o.up)("q-tr"),v=(0,o.up)("q-tooltip"),x=(0,o.up)("q-icon"),k=(0,o.up)("q-input"),C=(0,o.up)("autocomplete"),D=(0,o.up)("q-checkbox"),O=(0,o.up)("q-table");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.displayTable?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(g,{class:"full-width"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",n,[(0,o._)("th",null,[e.isFormBuilderMode?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[r],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[d,(0,o._)("span",{class:"cursor-pointer link",onClick:t[0]||(t[0]=(...t)=>e.routeToTableTraining&&e.routeToTableTraining(...t))},"table training view"),c],64))])])])])),_:1})])),e.displayTable?((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,s.C_)("full-width "+e.fieldName)},[(0,o._)("div",u,[(0,o.Wm)(O,{class:"full-width",id:"table_"+e.fieldName,"row-key":"id","no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),"hide-bottom":"",rows:e.tableRows,columns:e.tableColumns,"rows-per-page-options":[0],"table-header-style":{backgroundColor:"#d4d4d4"},style:{overflow:"scroll",height:"auto","min-height":"180px","max-height":"500px"}},{header:(0,o.w5)((t=>[e.isFormBuilderMode?((0,o.wg)(),(0,o.j4)(b,{key:0,props:t,class:"bg-grey-3"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{modelValue:t.cols,"onUpdate:modelValue":e=>t.cols=e,class:"dragArea","item-key":"name",group:{name:"formbuilder",pull:!1,put:!0},sort:!0,"ghost-class":"sortable__ghost",onChange:e.itemDraggedComplete},{item:(0,o.w5)((({element:t})=>[(0,o.Wm)(w,{id:"col_"+t.col_id,class:(0,s.C_)([(t.tr_ocr_model_id?"text-primary":"")+" "+e.getColumnClass(t.label),"text-center"])},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{flat:"",label:t.label,onClick:i=>e.markTableColumns(i,t.col_id)},null,8,["label","onClick"])])),_:2},1032,["id","class"])])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["props"])):((0,o.wg)(),(0,o.j4)(b,{key:1,props:t,class:"bg-grey-3"},{default:(0,o.w5)((()=>[e.isReadOnly?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(w,{key:0},{default:(0,o.w5)((()=>[e.isFormBuilderMode?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(x,{key:0,flat:"",dense:"",size:"22px",color:"primary",class:"cursor-pointer",onClick:e.addRow},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("add_row")),1)])),_:1}),h])),_:1},8,["onClick"]))])),_:1})),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,((t,i)=>((0,o.wg)(),(0,o.j4)(w,{key:i,id:"col_"+t.col_id,class:(0,s.C_)(["text-center",e.getColumnClass(t.label)])},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,s.zw)(t.label),1)])),_:2},1032,["id","class"])))),128))])),_:2},1032,["props"]))])),body:(0,o.w5)((t=>[(0,o.Wm)(b,{props:t,id:e.getRowIdPrefix()+t.key},{default:(0,o.w5)((()=>[e.isReadOnly?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(w,{key:0,"data-name":"actions",class:"no-wrap-text"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{tabindex:"0",flat:"",color:"primary",onClick:i=>e.removeRow(t.rowIndex,t.key),icon:"close",class:"padding-left-right-2"},null,8,["onClick"]),(0,o.Wm)(f,{tabindex:"0",flat:"",color:"primary",onClick:i=>e.copyRow(t.rowIndex),icon:"content_copy",class:"padding-left-right-2"},null,8,["onClick"])])),_:2},1024)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(i=>((0,o.wg)(),(0,o.j4)(w,{key:i.name,"data-name":i.name,"data-type":i.col_type,"data-input-class":e.tableRowsObj[t.key]["columns"][i.name].col_class},{default:(0,o.w5)((()=>[(0,o._)("div",{id:e.tableRowsObj[t.key]["columns"][i.name].col_class+"_parent",class:"autocomplete",role:"combobox","aria-autocomplete":"list","aria-controls":"suggestions","aria-expanded":"false"},["boolean"!=i.col_type.toLowerCase()?((0,o.wg)(),(0,o.j4)(k,{key:0,outlined:"",disable:e.isReadOnly,class:(0,s.C_)("input-text-28px "+e.tableRowsObj[t.key]["columns"][i.name].col_class+" "+e.getInputTextElementBorder(e.tableRowsObj[t.key]["columns"][i.name].is_valid)),onChange:o=>e.inputValueChanges(i.name,t.key),modelValue:e.tableRowsObj[t.key]["columns"][i.name].formatted_value,"onUpdate:modelValue":o=>e.tableRowsObj[t.key]["columns"][i.name].formatted_value=o,autocomplete:"off","data-column-name":i.name},null,8,["disable","class","onChange","modelValue","onUpdate:modelValue","data-column-name"])):(0,o.kq)("",!0),e.hasListOfValuesForAnyColumn()&&e.lov_columns_mapping[i.name]?((0,o.wg)(),(0,o.j4)(C,{key:1,input_class:e.tableRowsObj[t.key]["columns"][i.name].col_class,parent_id:e.tableRowsObj[t.key]["columns"][i.name].col_class+"_parent",options:e.getListOfValues(e.lov_columns_mapping[i.name])},null,8,["input_class","parent_id","options"])):(0,o.kq)("",!0),"boolean"==i.col_type.toLowerCase()?((0,o.wg)(),(0,o.j4)(D,{key:2,child_type:"checkbox",disable:e.isReadOnly,tabindex:"0",class:(0,s.C_)(e.tableRowsObj[t.key]["columns"][i.name].col_class+" "+e.getCheckBoxElementBorder(e.tableRowsObj[t.key]["columns"][i.name].is_valid)),onFocus:e.focusEvent,"onUpdate:modelValue":[o=>{e.checkboxUpdateForColumn(i.name,t.key,o)},o=>e.tableRowsObj[t.key]["columns"][i.name].formatted_value=o],modelValue:e.tableRowsObj[t.key]["columns"][i.name].formatted_value,size:"30px",color:"grey-6"},null,8,["disable","class","onFocus","onUpdate:modelValue","modelValue"])):(0,o.kq)("",!0)],8,m)])),_:2},1032,["data-name","data-type","data-input-class"])))),128))])),_:2},1032,["props","id"])])),_:1},8,["id","no-data-label","rows","columns"])])],2)):(0,o.kq)("",!0)],64)}var _=i(11185),g=i(10321),f=i(40470),w=i.n(f),y=i(61959),b=i(78564),v=i(53198),x=i(85985),k=i(29938),C=i(75933),D=i(60727),O=i(37214),E=i(85854),S=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const I=(0,o.aZ)({name:"ExtractedTable",components:{draggable:w(),autocomplete:O.Z},props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},emits:["inputClicked","updateModel","inputValueChanges","markTableColumns"],mixins:[b.Z,v.Z,x.Z,C.Z],data(){return{displayTable:(0,y.iH)(!1),savedColumnsMap:new Map}},beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},mounted:function(){this.init(),window.lineItems=this,document.addEventListener("prepare_rows",this.prepareRows)},unmounted:function(){if(document.removeEventListener("prepare_rows",this.prepareRows),!this.fieldName)return;let e=document.querySelector("."+this.fieldName);if(e&&(e.removeEventListener("focus_first_row_column",this.focusFirstRowColumn),e.removeEventListener("trigger_add_row",this.triggerAddRow),e.removeEventListener("keydown",this.handleKeyDown)),this.tableRowsObj)for(let[t,i]of Object.entries(this.tableRowsObj))this.removeEventOnRow(i)},methods:{itemDraggedComplete(e){if(e.moved){const t=this.tableColumns[e.moved.oldIndex];this.tableColumns.splice(e.moved.oldIndex,1),this.tableColumns.splice(e.moved.newIndex,0,t);const i=this.formBuilderConfigModel[this.fieldName].columns[e.moved.oldIndex];this.formBuilderConfigModel[this.fieldName].columns.splice(e.moved.oldIndex,1),this.formBuilderConfigModel[this.fieldName].columns.splice(e.moved.newIndex,0,i)}},init(){return S(this,void 0,void 0,(function*(){this.isFormBuilderMode||(yield this.prepareColumns(),this.prepareRows(),this.hasTable(),this.initEventsOnMount(),setTimeout((()=>{let e=document.querySelector("#table_"+this.fieldName);if(e){let t=e.querySelector("table");t&&this.resizableGrid(t)}}),1e3))}))},hasListOfValuesForAnyColumn(){return!this.isFormBuilderMode&&!(0,k.fg)(this.lov_columns_mapping)},getColumnClass(e){const t=e.split(" ");return 2==t.length&&1==t[1].length?"no-wrap-text":""},getLablel(e){return this.stringReplaceWithString(e,"_"," ")},addItemToColumnList(e,t,i,o){const s=Object.assign({},{name:e.column_name,label:this.getLablel(e.title),field:e.column_name,col_id:e.id,col_type:e.column_type,tr_ocr_model_id:i});this.tableColumns.push(s),this.column_properties_map[e.column_name]=s,this.formBuilderConfigModel[this.fieldName].columns.push({coords:t,col_id:e.id,name:e.column_name,column_type:e.column_type,list_of_values:this.lov_columns_mapping[e.column_name],run_script_on_change:o,tr_ocr_model_id:i})},prepareColumns(){return S(this,void 0,void 0,(function*(){this.tableColumns=[];const e=new Map;this.column_properties_map={};const t=this.formBuilderConfigModel[this.fieldName].columns;if(yield this.getDocumentTables(this.docType),!this.documentTables.hasOwnProperty(this.fieldName))return;for(const a of this.documentTables[this.fieldName])e.set(a.column_name,a);this.formBuilderConfigModel[this.fieldName].columns=[];let i=[],o="",s=!1;for(const a of t)this.savedColumnsMap.set(a.name,a),e.has(a.name)&&(a.list_of_values&&(this.lov_columns_mapping[a.name]=a.list_of_values),i=a.coords?a.coords:[],o=a.tr_ocr_model_id?a.tr_ocr_model_id:"",s=!!a.run_script_on_change&&a.run_script_on_change,this.addItemToColumnList(e.get(a.name),i,o,s),e.delete(a.name));for(const[a,l]of e)this.addItemToColumnList(l,[],"",!1)}))},prepareRows(){this.tableRows=[],this.tableRowsObj=[],!this.isFormBuilderMode&&this.formBuilderModel.hasOwnProperty(this.fieldName)&&(Array.from(this.formBuilderModel[this.fieldName].rows).forEach(((e,t)=>{let i=[];this.tableRowsObj[e.id]=[],this.tableRowsObj[e.id].columns=[];let o=[],s=JSON.parse(JSON.stringify(this.column_properties_map));i["id"]=e.id;for(const a of e.columns)i[a.name]=a.formatted_value,a.col_type=this.getColumnType(a.name),o.push(this.columnModel(a)),this.addRowToTableRowObj(e.id,a.id,a),s.hasOwnProperty(a.name)&&delete s[a.name];for(let[a,l]of Object.entries(s)){const t=this.getNewColumnObj(l);i[t.name]=t.formatted_value,o.push(this.columnModel(t)),this.addRowToTableRowObj(e.id,t.id,t)}this.formBuilderModel[this.fieldName].rows[t]["columns"]=o,this.tableRows.push(i)})),0==this.tableRows.length&&this.addRow())},addRow(){return S(this,void 0,void 0,(function*(){let e=(0,_.Z)(),t=[],i=[];this.tableRowsObj[e]=[],this.tableRowsObj[e].columns=[],t["id"]=e;for(let[o,s]of Object.entries(this.tableColumns)){const o=this.getNewColumnObj(s);t[o.name]=o.formatted_value,this.addRowToTableRowObj(e,o.id,o),i.push(this.columnModel(s))}this.tableRows.push(t),this.formBuilderModel[this.fieldName].rows.push(Object.assign({},{id:e,columns:i})),yield this.$nextTick(),this.addEventOnRowColumns(e,this.tableRowsObj[e])}))},getColumnType(e){let t=E.oh.TEXT_INPUT;if(this.column_properties_map.hasOwnProperty(e)){const i=this.column_properties_map[e];t=i.col_type}return t},getNewColumnObj(e){return e.col_type=this.getColumnType(e.name),Object.assign(e,{col_type:e.col_type,id:(0,_.Z)(),formatted_value:this.getColumnFormattedValue(e)})},columnModel(e){return{id:e.id,name:e.name,value:e.value,formatted_value:e.formatted_value}},addRowToTableRowObj(e,t,i){this.tableRowsObj[e].columns[i.name]={};const o=i.name+"_"+e;i.formatted_value=this.getColumnFormattedValue(i),i["value"]=i.formatted_value,Object.assign(this.tableRowsObj[e].columns[i.name],{id:t,name:i.name,col_class:o,value:i.value,formatted_value:i.formatted_value}),i.highlight_field&&(i.highlight_field=!1,this.fieldListToHighlight.push(o+"_parent"))},getColumnFormattedValue(e){return e.formatted_value||(e.formatted_value=""),"boolean"==e.col_type.toLowerCase()&&(e.formatted_value=Boolean(e.formatted_value)),e.formatted_value},removeRow(e,t){this.removeEventOnRow(this.tableRowsObj[t]),this.tableRows.splice(e,1),this.tableRowsObj.splice(e,1),this.formBuilderModel[this.fieldName].rows.splice(e,1)},copyRow(e){return S(this,void 0,void 0,(function*(){let t=(0,_.Z)(),i=[];for(const a in this.tableRows[e])i[a]=this.tableRows[e][a];i["id"]=t,this.tableRows.splice(e+1,0,i);let o=[];this.tableRowsObj[t]=[],this.tableRowsObj[t].columns=[];for(let[e,a]of Object.entries(this.tableColumns)){const e=this.getNewColumnObj(a);e.formatted_value=i[e.name],this.addRowToTableRowObj(t,e.id,e),o.push(this.columnModel(a))}const s=Object.assign({},{id:t,columns:o});this.formBuilderModel[this.fieldName].rows.splice(e+1,0,s);for(const e in i)this.tableRowsObj[t]["columns"][e]&&this.inputValueChanges(e,t);yield this.$nextTick(),this.addEventOnRowColumns(t,this.tableRowsObj[t])}))},initEventsOnMount(){return S(this,void 0,void 0,(function*(){yield this.$nextTick();let e=document.querySelector("."+this.fieldName);e&&(e.addEventListener("focus_first_row_column",this.focusFirstRowColumn),e.addEventListener("trigger_add_row",this.triggerAddRow),e.addEventListener("keydown",this.handleKeyDown));for(let[t,i]of Object.entries(this.tableRowsObj))this.addEventOnRowColumns(t,i)}))},focusFirstRowColumn(e){if(0===this.tableRows.length)return;const t=this.tableRows[0];if(!t)return;const i=this.tableColumns[0];if(!i)return;const o=this.tableRowsObj[t.id]["columns"][i.name].col_class;this.focusOnColumn(o,i.col_type)},getRowEl(e){const t=document.querySelector("#"+this.getRowIdPrefix()+e);return t},addEventOnRowColumns(e,t){try{if(!this.hasListOfValuesForAnyColumn())return;const i=this.getRowEl(e);if(!i)return;if(!t.columns)return;for(const[e,o]of Object.entries(t.columns)){const t=o;let i=!0;t.col_type&&"boolean"==t.col_type.toLowerCase()&&(i=!1),i&&this.lov_columns_mapping[e]&&this.addEventOnColumn(t.col_class)}}catch(i){}},addEventOnColumn(e){let t=document.querySelector("."+e);t&&t.addEventListener("update_field_value",this.updateModel)},removeEventOnRow(e){try{if(!this.hasListOfValuesForAnyColumn())return;if(!e.columns)return;for(const[t,i]of Object.entries(e.columns)){const e=i;this.lov_columns_mapping[t]&&this.removeEventOnColumn(e.col_class)}}catch(t){}},removeEventOnColumn(e){let t=document.querySelector("."+e);t&&t.removeEventListener("update_field_value",this.updateModel)},updateModel(e){try{let t=String(e.target.closest("tr").getAttribute("id"));t=t.replace(this.getRowIdPrefix(),"");const i=e.target.querySelectorAll("[data-column-name]");if(0==i.length)return;const o=i[0],s=o.getAttribute("data-column-name");this.tableRowsObj[t]["columns"][s].formatted_value=e.detail.val,this.focusToNextColumn(o),this.inputValueChanges(s,t)}catch(t){}},getRowIdPrefix(){return"tbl_row_"},hasTable(){this.tableColumns.length>0&&(this.displayTable=!0)},checkboxUpdateForColumn(e,t,i){this.tableRowsObj[t]["columns"][e].formatted_value=i,this.inputValueChanges(e,t)},inputValueChanges(e,t){const i=this.tableRowsObj[t]["columns"][e].formatted_value,o=this.formBuilderModel[this.fieldName].rows.findIndex((e=>e.id==t));if(-1===o)return;const s=this.formBuilderModel[this.fieldName].rows[o].columns.findIndex((t=>t.name==e));if(-1===s)return;const a=this.formBuilderModel[this.fieldName].rows[o].columns[s].formatted_value;this.formBuilderModel[this.fieldName].rows[o].columns[s].hasOwnProperty("original_value")||(this.formBuilderModel[this.fieldName].rows[o].columns[s]["original_value"]=a),this.formBuilderModel[this.fieldName].rows[o].columns[s].value=i,this.formBuilderModel[this.fieldName].rows[o].columns[s].formatted_value=i,this.triggerScriptCalculate(e,t)},triggerScriptCalculate(e,t){if(!this.savedColumnsMap.has(e)||!this.savedColumnsMap.get(e).run_script_on_change)return;const i=new CustomEvent("script_calculate_func",{detail:{columnName:e,rowId:t}});document.dispatchEvent(i)},markTableColumns(e,t){setTimeout((()=>{this.$emit("markTableColumns",t+"__"+this.fieldName);const e=new CustomEvent("load_settings_for_series",{detail:t});document.dispatchEvent(e)}),100)},triggerAddRow(){this.addRow()},handleKeyDown(e){try{switch(e.key){case"ArrowDown":this.moveToNextRowColumn(e),e.stopPropagation(),e.preventDefault();break;case"ArrowUp":this.moveToPrevRowColumn(e),e.stopPropagation(),e.preventDefault();break;case"ArrowRight":this.focusToNextColumn(e.target),e.stopPropagation(),e.preventDefault();break;case"ArrowLeft":this.focusToPrevColumn(e.target),e.stopPropagation(),e.preventDefault();break}const t=this.isCombinationKey(e),i=this.getAddRowKeyCodes();i.includes(e.keyCode)&&!0===t&&(this.triggerAddRow(),e.preventDefault(),e.stopPropagation())}catch(t){}},moveToPrevRowColumn(e){const t=e.target.closest("td");if(!t)return;const i=t.getAttribute("data-name"),o=t.closest("tr").previousSibling.previousElementSibling;if(!o)return;const s=o.querySelector("[data-name='"+i+"']");this.focusOnColumnByTd(s)},moveToNextRowColumn(e){const t=e.target.closest("td");if(!t)return;const i=t.getAttribute("data-name"),o=t.closest("tr").nextSibling.nextElementSibling;if(!o)return;const s=o.querySelector("[data-name='"+i+"']");this.focusOnColumnByTd(s)},focusToPrevColumn(e){return S(this,void 0,void 0,(function*(){if(!e)return;yield this.$nextTick(),e.blur();const t=e.closest("td"),i=t.closest("td").previousSibling;i&&"function"===typeof i.hasAttribute&&i.hasAttribute("data-input-class")&&this.focusOnColumnByTd(i)}))},focusToNextColumn(e){return S(this,void 0,void 0,(function*(){if(!e)return;yield this.$nextTick(),e.blur();const t=e.closest("td"),i=t.nextSibling;if(!i)return;if("function"===typeof i.hasAttribute&&i.hasAttribute("data-input-class"))return void this.focusOnColumnByTd(i);const o=t.closest("tr").nextSibling.nextElementSibling;o&&this.focusToRowFirstColumn(o)}))},focusToRowFirstColumn(e){if(!e)return;if(0==e.children.length)return;let t;for(let i of e.children)if(i.dataset.hasOwnProperty("inputClass")){t=i;break}this.focusOnColumnByTd(t)},focusOnColumnByTd(e){if(!e)return;e.getAttribute("data-name");const t=e.getAttribute("data-type"),i=e.getAttribute("data-input-class");this.focusOnColumn(i,t)},focusOnColumn(e,t){if("STRING"!==t)return void this.checkboxFocusHandler(e);const i=document.querySelector("."+e);if(!i)return;const o=i.querySelector("input");o&&(o.click(),o.focus())},checkboxFocusHandler(e){const t=document.querySelector("."+e);t&&(this.is_focus_event=!0,t.focus())},focusEvent(e){this.is_focus_event=!0,setTimeout((()=>{this.is_focus_event=!1}),500)},routeToTableTraining(){this.$router.push("/tbl_ext_v3/"+this.$route.params.id)}},setup(){let e=[];const t=(0,D.nc)(),{formBuilderModel:i,isFormBuilderMode:o,formBuilderConfigModel:s,documentTables:a,docType:l,fieldListToHighlight:n,activeFieldName:r,activeTab:d}=(0,g.Jk)(t),{replaceElementInLayout:c,getDocumentTables:u}=t,h=(0,D.wr)(),{getListOfValues:m}=h;return{getListOfValues:m,formBuilderConfigModel:s,fieldListToHighlight:n,isFormBuilderMode:o,formBuilderModel:i,activeFieldName:r,documentTables:a,activeTab:d,docType:l,tableRows:(0,y.iH)(e),tableRowsObj:(0,y.iH)(e),tableColumns:(0,y.iH)(e),column_properties_map:(0,y.iH)({}),lov_columns_mapping:(0,y.iH)({}),getDocumentTables:u,replaceElementInLayout:c,is_focus_event:(0,y.iH)(!1)}}});var T=i(74260),L=i(30481),M=i(17132),F=i(18186),q=i(83884),Z=i(2165),R=i(24554),W=i(5363),A=i(64689),V=i(65735),z=i(86115),B=i(7518),N=i.n(B);const P=(0,T.Z)(I,[["render",p],["__scopeId","data-v-1a63a0fd"]]),U=P;N()(I,"components",{QMarkupTable:L.Z,QTable:M.Z,QTr:F.Z,QTd:q.Z,QBtn:Z.Z,QIcon:R.Z,QTooltip:W.Z,QInput:A.Z,QCheckbox:V.Z,QField:z.Z})},87344:(e,t,i)=>{"use strict";i.d(t,{Z:()=>dt});var o=i(83673),s=i(62323);const a={class:"q-pa-sm full-width"},l={key:1,class:"q-ml-auto"},n=(0,o._)("img",{src:"column.svg",width:"24"},null,-1),r=(0,o._)("img",{src:"table_delete.svg"},null,-1),d=(0,o._)("img",{width:"24",src:"table_extraction.svg"},null,-1),c={key:2,class:"q-ml-auto"};function u(e,t,i,u,h,m){const p=(0,o.up)("q-tooltip"),_=(0,o.up)("q-tab"),g=(0,o.up)("IgnoreTableValidation"),f=(0,o.up)("q-icon"),w=(0,o.up)("BlockSupplier"),y=(0,o.up)("UnBlockSupplier"),b=(0,o.up)("q-tabs"),v=(0,o.up)("q-separator"),x=(0,o.up)("UnBlockSupplierWarning"),k=(0,o.up)("AIExtractedTable"),C=(0,o.up)("q-tab-panel"),D=(0,o.up)("LineItemTable"),O=(0,o.up)("q-tab-panels");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(b,{"narrow-indicator":!1,"active-class":"highlighted-back",modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tab=t),class:"text-weight-bold extracted-tabs","active-color":"primary","indicator-color":"primary"},{default:(0,o.w5)((()=>[e.AI_setting_flag?((0,o.wg)(),(0,o.j4)(_,{key:0,disable:!e.has_ai_table&&!e.record.table_blocked,name:"ai_tables",class:"max-width-400",label:e.$t("AI_extracted_table")},{default:(0,o.w5)((()=>[e.has_ai_table||e.record.table_blocked?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(p,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("ai_table_not_found")),1)])),_:1}))])),_:1},8,["disable","label"])):(0,o.kq)("",!0),(0,o.Wm)(_,{name:"extracted_tables",label:e.$t("extracted_table")},null,8,["label"]),e.record.table_blocked?((0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(y,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])])):((0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(g),e.has_ai_table?((0,o.wg)(),(0,o.j4)(f,{key:0,size:"26px",onClick:t[0]||(t[0]=t=>e.addColumnInLineItems()),class:"q-mr-sm cursor-pointer"},{default:(0,o.w5)((()=>[n,(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("add_new_table_column")),1)])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(f,{size:"31px",onClick:e.deleteTable,class:"q-mr-sm cursor-pointer"},{default:(0,o.w5)((()=>[r,(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("delete_table")),1)])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(w,{apiData:this.record,isReadOnly:e.isReadOnly},null,8,["apiData","isReadOnly"]),(0,o.Wm)(f,{size:"24px",onClick:e.goToTableExtraction,class:"q-mr-sm cursor-pointer"},{default:(0,o.w5)((()=>[d,(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("go_to_table_extraction_view")),1)])),_:1})])),_:1},8,["onClick"])]))])),_:1},8,["modelValue"]),(0,o.Wm)(O,{modelValue:e.tab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.tab=t)},{default:(0,o.w5)((()=>[e.AI_setting_flag?((0,o.wg)(),(0,o.j4)(C,{key:0,name:"ai_tables"},{default:(0,o.w5)((()=>[(0,o.Wm)(v),(0,o.Wm)(x),e.record.table_blocked?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(k,{key:0,isReadOnly:e.isReadOnly},null,8,["isReadOnly"]))])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(C,{name:"extracted_tables"},{default:(0,o.w5)((()=>[(0,o.Wm)(x),e.renderTable&&!e.record.table_blocked?((0,o.wg)(),(0,o.j4)(D,{key:0,fieldName:e.firstTableName,isReadOnly:e.isReadOnly},null,8,["fieldName","isReadOnly"])):(0,o.kq)("",!0)])),_:1})])),_:1},8,["modelValue"])])}var h=i(10321),m=i(61959),p=i(85985),_=i(91777);const g={key:0,class:"full-width"},f={class:"highlighted-back"},w={class:"cursor-pointer link"},y={class:"full-width"},b={class:"full-width"},v={class:"row items-center no-wrap"},x={class:"row items-center no-wrap"},k={class:"text-center"},C=["id"],D={key:0,class:"highlighted-back"},O={key:1},E={key:2,class:"row items-center q-mt-md full-width"},S={class:"col"},I={class:"col-auto"},T={class:"highlighted-back"};function L(e,t,i,a,l,n){const r=(0,o.up)("q-markup-table"),d=(0,o.up)("q-th"),c=(0,o.up)("q-tooltip"),u=(0,o.up)("q-fab-action"),h=(0,o.up)("q-fab"),m=(0,o.up)("q-icon"),p=(0,o.up)("q-item-label"),_=(0,o.up)("q-item-section"),L=(0,o.up)("q-item"),M=(0,o.up)("q-list"),F=(0,o.up)("q-btn-dropdown"),q=(0,o.up)("q-td"),Z=(0,o.up)("q-tr"),R=(0,o.up)("q-input"),W=(0,o.up)("q-table"),A=(0,o.up)("q-spinner-hourglass"),V=(0,o.up)("q-inner-loading"),z=(0,o.up)("q-btn"),B=(0,o.up)("CreateCustomColumn"),N=(0,o.up)("q-dialog"),P=(0,o.Q2)("new-tab"),U=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.isFormBuilderMode?((0,o.wg)(),(0,o.iD)("div",g,[(0,o.Wm)(r,{class:"full-width"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",f,[(0,o._)("th",null,[(0,o.Uk)((0,s.zw)(e.$t("ai_table_place_holder"))+" ",1),(0,o.wy)(((0,o.wg)(),(0,o.iD)("span",w,[(0,o.Uk)((0,s.zw)(e.$t("settings")),1)])),[[P,"settings/classify-extract"]])])])])])),_:1})])):(0,o.kq)("",!0),e.displayTable?((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,s.C_)("full-width "+e.fieldName)},[(0,o._)("div",y,[(0,o._)("div",b,[e.hasLineItems()?((0,o.wg)(),(0,o.j4)(W,{key:0,class:"full-width",id:"table_"+e.fieldName,"row-key":"id","hide-bottom":"",rows:e.tableRows,"no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),columns:e.tableColumns,"rows-per-page-options":[0],"table-header-style":{backgroundColor:"#d4d4d4"},style:{overflow:"scroll",height:"auto","max-height":"500px","min-height":"128px"}},{header:(0,o.w5)((t=>[(0,o.Wm)(Z,{props:t,class:"highlighted-back"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,((t,i)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i},[""===t.label?((0,o.wg)(),(0,o.j4)(d,{key:0})):(0,o.kq)("",!0),""!==t.label&&e.isColumnVisible(t.org_index,t)?((0,o.wg)(),(0,o.j4)(q,{key:1,id:t.name,class:(0,s.C_)(e.getColumnClass(t.label))},{default:(0,o.w5)((()=>[(0,o._)("div",v,[e.isReadOnly?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[e.hasOriginalIndex(t.org_index,t)?((0,o.wg)(),(0,o.j4)(h,{key:0,color:e.hasOriginalIndex(t.org_index,t)&&e.formatting_options.group_column===t.org_index?"primary":"grey-6",class:"column-fab",icon:"more_horiz",direction:"down",padding:"2px",outline:""},{default:(0,o.w5)((()=>[e.hasOriginalIndex(t.org_index,t)?((0,o.wg)(),(0,o.j4)(u,{key:0,color:"grey-3","text-color":"black",onClick:i=>e.deleteLineItemColumn(t.org_index),width:"18",icon:"img:trash-bin-default.svg"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("delete_column")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])),_:2},1032,["color"])):(0,o.kq)("",!0),e.hasOriginalIndex(t.org_index,t)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(h,{key:1,flat:"",color:"grey-6",class:"column-fab",icon:"more_horiz",direction:"down",padding:"2px",outline:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{color:"grey-3","text-color":"black",onClick:i=>e.disableCustomColumn(t.name),width:"18",icon:"img:trash-bin-default.svg"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("disable_column")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024))],64)),(0,o.Wm)(F,{flat:"",disable:1!=e.hasOriginalIndex(t.org_index,t)||e.isReadOnly,id:"button_"+i,class:(0,s.C_)("ellipsis ellipsis-column gridHeader "+(t.error?"column-error-border":"")+(!0===e.hasOriginalIndex(t.org_index,t)?"non-extractable-column-text ":" extractable-column-text"))},{label:(0,o.w5)((()=>[(0,o._)("div",x,[t.error?((0,o.wg)(),(0,o.j4)(m,{key:0,left:"",title:e.$t("pages.screen2b.in_valid_column_error"),name:"priority_high",class:"headerError"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.screen2b.in_valid_column_error")),1)])),_:1})])),_:1},8,["title"])):(0,o.kq)("",!0),(0,o._)("div",k,(0,s.zw)(t.label),1)])])),default:(0,o.w5)((()=>[(0,o.Wm)(M,{filter:e.filter},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.dropdownColumns,(a=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(L,{key:a.techName,clickable:"",onClick:o=>e.swapColumn(a,t.org_index,t.name,"button_"+i)},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(a.header),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[U]]))),128))])),_:2},1032,["filter"])])),_:2},1032,["disable","id","class"])])])),_:2},1032,["id","class"])):(0,o.kq)("",!0)],64)))),128))])),_:2},1032,["props"])])),body:(0,o.w5)((t=>[(0,o.Wm)(Z,{props:t,id:e.getRowIdPrefix()+t.key,onClick:i=>e.highlightRow(t.key),pageno:e.lineDataObj[t.key].page},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(i=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i.name},[""===i.label?((0,o.wg)(),(0,o.j4)(q,{key:0,class:"secondary-c-text border-right-none"},{default:(0,o.w5)((()=>[e.isReadOnly?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[e.rowHasErrors(t.key)?((0,o.wg)(),(0,o.j4)(m,{key:0,name:"priority_high",class:"headerError"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.lineItemsErrors[t.key],((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t},(0,s.zw)(e),1)))),128))])),_:2},1024)])),_:2},1024)):(0,o.kq)("",!0)],64))])),_:2},1024)):(0,o.kq)("",!0),"id"!==i.name?((0,o.wg)(),(0,o.j4)(q,{key:1,"data-name":i.name,"data-type":i.column_type,"data-input-class":i.name+"_"+t.key},{default:(0,o.w5)((()=>[(0,o._)("div",{id:i.name+"_"+t.key+"_parent"},[(0,o.Wm)(R,{outlined:"",disable:e.isReadOnly,class:(0,s.C_)("input-text-28px "+i.name+"_"+t.key+" input_column_type "+i.column_type.toLowerCase()),onChange:o=>e.inputValueChanges(i.name,t.key),modelValue:e.lineDataObj[t.key]["columns"][i.name].formatted_value,"onUpdate:modelValue":o=>e.lineDataObj[t.key]["columns"][i.name].formatted_value=o,"data-column-name":i.name},null,8,["disable","class","onChange","modelValue","onUpdate:modelValue","data-column-name"])],8,C)])),_:2},1032,["data-name","data-type","data-input-class"])):(0,o.kq)("",!0)],64)))),128))])),_:2},1032,["props","id","onClick","pageno"])])),_:1},8,["id","rows","no-data-label","columns"])):((0,o.wg)(),(0,o.j4)(r,{key:1,class:"full-width"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[!1===e.lineItemsloading?((0,o.wg)(),(0,o.iD)("tr",D,[(0,o._)("th",null,(0,s.zw)(e.$t("no_line_items_found")),1)])):(0,o.kq)("",!0),!0===e.lineItemsloading?((0,o.wg)(),(0,o.iD)("tr",O,[(0,o._)("th",null,[(0,o.Wm)(V,{showing:e.lineItemsloading},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{color:"primary",size:"6em"})])),_:1},8,["showing"])])])):(0,o.kq)("",!0)])])),_:1})),e.hasLineItems()?((0,o.wg)(),(0,o.iD)("div",E,[(0,o._)("div",S,[(0,o.Wm)(R,{disable:e.isReadOnly,modelValue:e.ai_prompt,"onUpdate:modelValue":t[0]||(t[0]=t=>e.ai_prompt=t),outlined:"",type:"textarea",autogrow:"",rows:"8"},null,8,["disable","modelValue"])]),(0,o._)("div",I,[(0,o.Wm)(z,{unelevated:"",class:"q-ml-sm float-right",color:"primary",onClick:e.deleteRules,label:e.$t("delete")},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.screen2a.deleteRule")),1)])),_:1})])),_:1},8,["onClick","label"]),(0,o.Wm)(z,{unelevated:"",class:"q-ml-sm float-right",color:"primary",onClick:e.saveRules,label:e.$t("save")},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.screen2a.saveRules")),1)])),_:1})])),_:1},8,["onClick","label"]),(0,o.Wm)(z,{unelevated:"",class:"q-ml-sm float-right",color:"primary",onClick:e.requestReformate,label:e.$t("apply")},null,8,["onClick","label"])])])):(0,o.kq)("",!0)])])],2)):((0,o.wg)(),(0,o.j4)(r,{key:2,class:"full-width"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",T,[(0,o._)("th",null,(0,s.zw)(e.$t("no_line_items_found")),1)])])])),_:1})),(0,o.Wm)(N,{modelValue:e.addColumnDialog,"onUpdate:modelValue":t[1]||(t[1]=t=>e.addColumnDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{is_table_training_doc:!!e.record.hasOwnProperty("is_table_training_doc"),table_name:e.record.tables&&e.record.tables.length>0?e.record.tables[0].name:"",tables:e.record.tables&&e.record.tables.length>0?e.record.tables[0]:{},columns_list:e.lineItemLayout,addColumnDialog:e.addColumnDialog},null,8,["is_table_training_doc","table_name","tables","columns_list","addColumnDialog"])])),_:1},8,["modelValue"])],64)}var M=i(77378),F=i(78564),q=i(77987),Z=i(45401),R=i(48825),W=i(7153),A=i(41891),V=i(55276),z=i(80579),B=i(54268),N=i(75933),P=i(89657),U=i(29938),j=i(93426),H=i(60727),$=i(9273),Q=i(86068),Y=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};let J=new Map;const K=(0,o.aZ)({name:"AIExtractedTable",components:{CreateCustomColumn:Q.Z},mixins:[Z.Z,M.Z,V.Z,N.Z,p.Z,F.Z,j.Z],emits:["updateExtractionDataForSave","setTableRowCorrdinates","loadNewPageImage","updateModel"],props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},watch:{doc_loaded:{handler:function(e,t){this.init()}},loading_settings:{handler:function(e,t){0==e&&1==t&&this.init()}}},computed:{hasSettingDisabled:function(){return Boolean(this.doc_loaded&&!this.setting_flag)}},data(){return{dropdownColumns:[],rows_to_delete:[],po_dragging:!1,dragging_data:{},coveredLineItem:[],validation_done:!0,connected_line_item:"",renderKey:0,is_po_view:!1,po_connected_line_items:{},is_auto_filled_color:"#c2dba6",is_missing_color:"#eed69e",tableObj:{},AI_table_extraction_setting:A.Yl}},beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},mounted:function(){this.init(),document.addEventListener("add_ai_new_column",this.addNewCustomColumn),document.addEventListener("custom_column_create",this.customColumnCreated),document.addEventListener("delete_table",this.deleteTable),document.addEventListener("display_fields_errors",this.displayFieldErrors),window.ait=this},unmounted:function(){document.removeEventListener("add_ai_new_column",this.addNewCustomColumn),document.removeEventListener("custom_column_create",this.customColumnCreated),document.removeEventListener("delete_table",this.deleteTable),document.removeEventListener("display_fields_errors",this.displayFieldErrors)},methods:{init(){if(this.checkSetting(),!this.isFormBuilderMode&&!1!==this.doc_loaded&&null!==this.record&&void 0!==this.record&&!1!==this.setting_flag&&this.has_ai_table&&null!==this.record.tables&&0!=this.record.tables.length&&1!=this.displayTable){this.displayTable=!0;for(let e of this.record.tables){this.tableObj=e;break}this.ai_prompt=this.tableObj.ai_prompt,this.lineItemDataLoaded()}},isSettingsEnabled(){return!0},checkSetting(){this.isFormBuilderMode||(this.setting_flag=!1,this.user_settings[this.AI_table_extraction_setting]&&(this.setting_flag=this.user_settings[this.AI_table_extraction_setting]))},get_org_pref(e){return Y(this,void 0,void 0,(function*(){let t=!1;try{let i={main_key:e};const o=yield z.Fz.getOrgPref(i);if(!1===o.success)return t;t=o}catch(i){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}return t}))},addExtractionMethodClass(e){let t="";return e&&e.hasOwnProperty("extraction_method")&&""!==e.extraction_method&&(t="extraction_method"),t},deleteTable(){this.tableObj={},this.lineItemDataLoaded()},lineItemDataLoaded(){this.lineItemsloading=!1,this.resetRows(),this.refactorApiData()},isViewEditable(){return!this.is_po_view},getToken(){return Y(this,void 0,void 0,(function*(){let e=this.record.token&&null!=this.record.token&&""!=this.record.token?this.record.token:yield(0,B.O_)();return e}))},getColumnMappingIndexes(){let e={};for(const t in this.column_mapping_indexes){let i=this.column_mapping_indexes[t];e[t]=i}return e},validateLineItemColumns(){let e=!1;if(void 0===this.tableColumns)return;let t=[];for(const o of this.tableColumns){let i=this.isColumnNameValid(o);i||(o.error=!0,e=!0,t.push(o.name))}let i=!e;this.is_line_item_validated=i,this.missing_mapping_column=t,this.validation_done!==i&&(this.validation_done,this.validation_done=i)},isColumnNameValid(e){let t=!(!this.column_mapping_indexes||null==this.column_mapping_indexes||!(0,U.fg)(this.column_mapping_indexes)),i=!1;if("id"==e.name)return!0;for(const o of this.dropdownColumns)if(e.name===o.techName){i=!0;break}return i&&t&&!0===this.hasOriginalIndex(e.org_index,e)&&this.addInMapping(e.org_index,e.name),i},addInMapping(e,t){this.column_mapping_indexes[t]=Number(e)},updateLineItemsForApi(){this.isReadOnly||this.$emit("updateExtractionDataForSave","mapping",this.getColumnMappingIndexes())},isColumnGroupBy(e){let t="";return this.group_column&&(t=this.group_column),null===t&&(t=""),t==e},getColumnGroupBy(){let e="";return this.group_column&&(e=this.group_column),null===e&&(e=""),e},isColumnVisible(e,t){let i=!0;return e&&this.columns_to_hide&&0!=this.columns_to_hide.length?((this.columns_to_hide.includes(e)||"UUID"==t.name)&&(i=!1),i):i},isCustomColumnHidden(e){let t=!1;if(!this.custom_columns_to_hide||0==this.custom_columns_to_hide.length)return t;for(const i of this.custom_columns_to_hide)if(i===e){t=!0;break}return t},isRowDeleted(e){let t=this.getLineUuid(e);return!this.rows_to_delete.includes(t)},getLineUuid(e){let t="";for(let[i,o]of e.entries())if("UUID"==o.techName){t=o.value;break}return t},getLineItemRowsToHide(){if(this.rows_to_delete=[],this.tableObj&&this.tableObj.hasOwnProperty("extraction_info")){for(let[e,t]of Object.entries(this.tableObj.extraction_info))this.tableObj.extraction_info[e].hasOwnProperty("rows_to_delete")&&(this.rows_to_delete=this.tableObj.extraction_info[e].rows_to_delete);Array.isArray(this.rows_to_delete)&&this.rows_to_delete.length>0?this.rows_to_delete=this.rows_to_delete[0].split(" "):this.rows_to_delete=[]}},addToRowToDelete(e){for(let[t,i]of e.entries())if("UUID"==i.techName){this.rows_to_delete.push(i.value);break}},setRowToDeleteForApi(){if(!this.tableObj||!this.tableObj.hasOwnProperty("extraction_info"))return;let e=[this.rows_to_delete.join(" ")];this.$emit("updateExtractionDataForSave","rows_to_delete",e)},inputKeyDown(e){if(this.training_mode)return e.preventDefault(),e.target.blur(),void this.showErrorToast(this.$t("manual_change"))},inputValueChanges(e,t){return Y(this,void 0,void 0,(function*(){const i=this.lineDataObj[t]["columns"][e].formatted_value;this.lineDataObj[t]["columns"][e].value=i;const o=this.record.amount_format_locale.split(".");"en_US"!=o[0]&&this.lineItemLayout.hasOwnProperty(e)&&"AMOUNT"===this.lineItemLayout[e].column_type&&(this.lineDataObj[t]["columns"][e].value=yield this.convertValueAccordingToLocale(i,o[0],"en_US"),this.lineDataObj[t]["columns"][e].content=i),this.updateJsonForLineItems(e,t)}))},updateJsonForLineItems(e,t){Array.from(this.tableObj.rows).forEach(((i,o)=>{t===i.id&&Array.from(i.columns).forEach(((t,s)=>{t.name!==e||(this.tableObj.rows[o].columns[s]=this.lineDataObj[i.id].columns[e])}))})),this.dispatchEventToSaveTableChanges()},setJsonForLineItems(){Array.from(this.tableObj.rows).forEach(((e,t)=>{const i=e.id,o=this.lineDataObj[i];this.tableObj.rows[t]=o})),this.dispatchEventToSaveTableChanges()},dispatchEventToSaveTableChanges(e=!1){this.docStore.confirmationForPoConnectionReset=!0,this.record.tables&&this.record.tables[0]||(this.record.tables=[]),this.record.tables[0]=this.tableObj},hasLineItems(){return!(!this.tableRows||0===Object.keys(this.tableRows).length)},setAdvSettings(){this.move_extra_rows_to="",this.header_rows_count=1,this.extra_columns=[],this.formatting_options&&(this.formatting_options.hasOwnProperty("merge_extra_lines_to")&&null!==this.formatting_options.merge_extra_lines_to&&(this.move_extra_rows_to=this.formatting_options.merge_extra_lines_to),this.formatting_options.hasOwnProperty("header_rows_count")&&null!==this.formatting_options.header_rows_count&&(this.header_rows_count=this.formatting_options.header_rows_count),this.formatting_options.hasOwnProperty("extra_cols")&&null!==this.formatting_options.extra_cols&&(this.extra_columns=this.formatting_options.extra_cols),this.formatting_options.hasOwnProperty("group_column")&&null!==this.formatting_options.group_column&&(this.group_column=this.formatting_options.group_column),this.formatting_options.hasOwnProperty("min_group_rows")&&null!==this.formatting_options.min_group_rows&&(this.min_group_rows=this.formatting_options.min_group_rows),this.formatting_options.hasOwnProperty("max_group_rows")&&null!==this.formatting_options.max_group_rows&&(this.max_group_rows=this.formatting_options.max_group_rows),this.formatting_options.hasOwnProperty("distinct_group_column")&&null!==this.formatting_options.distinct_group_column&&(this.distinct_group_column=this.formatting_options.distinct_group_column),this.formatting_options.hasOwnProperty("reverse_grouping")&&null!==this.formatting_options.reverse_grouping&&(this.reverse_grouping=this.formatting_options.reverse_grouping),this.formatting_options.hasOwnProperty("split_text")&&null!==this.formatting_options.split_text&&(this.split_text=this.formatting_options.split_text))},formatWthAdvSettings(){return Y(this,void 0,void 0,(function*(){yield this.requestReformate(),this.openAdvSettings=!1}))},advSettingNewFieldColumnSelected(e,t){this.new_field_model[t]?this.new_field_model[e]=this.new_field_model[t].value:this.new_field_model[e]=""},saveNewFieldForAdvSettings(){this.new_field_model["pattern_invalid"]=!1,this.new_field_model["key_invalid"]=!1,this.new_field_model["source_invalid"]=!1;let e=!0;if(this.new_field_model["pattern"]&&!(0,P.nc)(this.new_field_model["pattern"])&&(this.new_field_model["pattern_invalid"]=!0,e=!1),this.new_field_model["key"]&&""!=this.new_field_model["key"]||(this.new_field_model["key_invalid"]=!0,e=!1),this.new_field_model["source"]&&""!=this.new_field_model["source"]||(this.new_field_model["source_invalid"]=!0,e=!1),!e)return;let t=this.new_field_model["label"];t||(t=this.new_field_model["key"].toUpperCase()),this.extra_columns||(this.extra_columns=[]),this.extra_columns.push({field_key:this.new_field_model["key"].toUpperCase(),source_field:this.new_field_model["source"].toUpperCase(),label:t,pattern:this.new_field_model["pattern"].toUpperCase()}),this.addFieldsDialog=!1},addFieldForAdvSettings(){this.addFieldsDialog=!0,this.new_field_model={}},removeFieldFromSettings(e){e=Number(e),e>-1&&this.extra_columns.splice(e,1)},revertChanges(e=!1){return Y(this,void 0,void 0,(function*(){!1!==e?(this.revert_changes_confirm_dialog=!1,this.resetFormatSettings(),yield this.requestReformate()):this.revert_changes_confirm_dialog=!0}))},isViewPo(){this.$route.fullPath.match(/po-matching/g)&&(this.is_po_view=!0)},refactorApiData(){this.resetFormatSettings(),this.setFormatOptions(),this.setAdvSettings(),this.prepareTableLayoutObj(),this.prepareTableColumn(),this.prepareTableRowsAndRowObj(),this.sortTableColumn(),this.validateLineItemColumns(),this.prepareDisabledCstmColumnsList(),setTimeout((()=>{let e=document.querySelector("#line_item_table");if(e){let t=e.querySelector("table");t&&this.resizableGrid(t)}}),1e3)},setFormatOptions(){this.formatting_options={},this.tableObj&&this.tableObj.hasOwnProperty("formatting_options")&&(this.formatting_options=this.tableObj.formatting_options),this.formatting_options.hasOwnProperty("mapping")&&null!==this.formatting_options.mapping&&(this.column_mapping_indexes=Object.assign({},this.formatting_options.mapping)),this.formatting_options.hasOwnProperty("columns_to_hide")&&null!==this.formatting_options.columns_to_hide&&(this.columns_to_hide=Object.assign([],this.formatting_options.columns_to_hide)),this.formatting_options.hasOwnProperty("custom_columns_to_hide")&&null!==this.formatting_options.custom_columns_to_hide&&(this.custom_columns_to_hide=Object.assign([],this.formatting_options.custom_columns_to_hide))},resetRows(){this.tableRows=[],this.lineDataObj=[],this.lineItemsErrors={}},resetFormatSettings(){this.move_extra_rows_to="",this.header_rows_count=1,this.extra_columns=[],this.group_column="",this.min_group_rows=1,this.max_group_rows=null,this.distinct_group_column=!1,this.reverse_grouping=!1,this.column_mapping_indexes={},this.columns_to_hide=[],this.custom_columns_to_hide=[],this.split_text=!1},setTableData(e){this.tableObj=e,this.ai_prompt=this.tableObj.ai_prompt},prepareTableRowsAndRowObj(){this.docStore.confirmationForPoConnectionReset=!0,this.tableRows=[],this.lineDataObj=[];let e={};if(this.lineItemsErrors={},this.tableRowsLocationsMap.clear(),!this.tableObj||!this.tableObj.hasOwnProperty("rows")||0==this.tableObj.rows.length)return;this.tableObj.rows[0].id;Array.from(this.tableObj.rows).forEach((t=>{if(!1===t.is_deleted){let i={};e[t.id]=JSON.parse(JSON.stringify(t)),e[t.id].locations_list=[],t.locations_list&&Array.from(t.locations_list).forEach((i=>{e[t.id].locations_list["page_"+i.page]=i,this.tableRowsLocationsMap.has("page_"+i.page)||this.tableRowsLocationsMap.set("page_"+i.page,t.id)})),delete e[t.id].columns,e[t.id]["columns"]=[],Array.from(t.columns).forEach((o=>{e[t.id].columns[o.name]=JSON.parse(JSON.stringify(o)),e[t.id].columns[o.name].locations_list=[],o.locations_list&&Array.from(o.locations_list).forEach((i=>{e[t.id].columns[o.name].locations_list["page_"+i.page]=i})),t.id,(0,U.Jp)(o.formatted_value)&&(o.formatted_value=""),i[o.name]=o.formatted_value,this.prepareMapOfColumnHavingData(o)})),this.addExtraColumnsInRow(e,i,t.id),i["id"]=t.id,t.id,this.tableRows.push(i),this.setRowErrors(t)}})),Object.assign(this.lineDataObj,e),this.addExtraColumnsInExportJson()},prepareMapOfColumnHavingData(e){J.has(e.name)?!1===J.get(e.name)&&e.formatted_value&&null!=e.formatted_value&&""!=e.formatted_value&&J.set(e.name,!0):e.formatted_value&&null!=e.formatted_value&&""!=e.formatted_value?J.set(e.name,!0):J.set(e.name,!1)},addExtraColumnsInRow(e,t,i){for(let o of this.layoutExtraColumns){let s={name:o,value:"",content:"",locations:[],locations_list:[],formatted_value:"",isExtraColumn:!0};e[i].columns[o]=s,J.set(o,!1),t[o]=""}},addExtraColumnsInExportJson(){let e=[];for(let t of this.layoutExtraColumns){let i={name:t,value:"",content:"",locations:[],locations_list:[],formatted_value:"",isExtraColumn:!0};e.push(i)}Array.from(this.tableObj.rows).forEach(((t,i)=>{for(let o of e)this.tableObj.rows[i].columns.push(o)}))},setRowErrors(e){if(this.lineItemsErrors[e.id]={},!e.messages||!Array.isArray(e.messages))return;let t={};for(const i in e.messages){let o=e.messages[i];"COLUMN_NOT_MAPPED"!=o.message_code&&(o.message&&""!=o.message&&(t[o.message_code]=o.message))}this.lineItemsErrors[e.id]=t},rowHasErrors(e){return!(!this.lineItemsErrors.hasOwnProperty(e)||null===this.lineItemsErrors[e]||(0,U.fg)(this.lineItemsErrors[e]))},isColumnHasError(e,t){return!(!this.lineItemsErrors.hasOwnProperty(e)||(0,U.fg)(this.lineItemsErrors[e])||null===this.lineItemsErrors[e])&&!(!this.lineItemsErrors[e].hasOwnProperty(t)||!this.lineItemsErrors[e][t]||""===this.lineItemsErrors[e][t])},prepareTableLayoutObj(){this.dropdownColumns=[];let e={};this.lineItemLayout={},this.initStandardColumns(),this.tableObj&&this.tableObj.hasOwnProperty("layout")&&(Array.from(this.tableObj.layout).forEach((t=>{e.hasOwnProperty(t.column_name)||0!=t.is_hidden||this.isCustomColumnHidden(t.column_name)||(e[t.column_name]=!0,t["lbl_to_display"]=this.getLabelToDisplay(t),this.lineItemLayout[t.column_name]=t,this.addStandardColumns(t),this.dropdownColumns.push({header:t.lbl_to_display,techName:t.column_name}))})),this.sortMappingColumns())},sortMappingColumns(){this.dropdownColumns.length>0&&this.dropdownColumns.sort((function(e,t){return e.header<t.header?-1:e.header>t.header?1:0}))},initStandardColumns(){this.advance_settings_columns=[],this.advance_settings_columns.push(Object.assign({},{value:"",label:this.$t("select")})),this.advance_settings_columns.push(Object.assign({},{value:"__trash__",label:this.$t("trash")}))},addStandardColumns(e){this.advance_settings_columns.push(Object.assign({},{value:e.column_name,label:e.column_name}))},prepareTableColumn(){this.tableColumns=[];let e={};if(this.layoutExtraColumns=[],!(this.tableObj&&this.tableObj.hasOwnProperty("rows")&&this.tableObj.rows.length>0))return;let t={name:"id",field:"id",align:"left",label:"",is_mapped:!0,org_index:"",column_type:"string"};this.tableColumns.push(t);const i=this.tableObj.rows[0];if(!i)return;let o=JSON.parse(JSON.stringify(this.lineItemLayout));Array.from(i.columns).forEach((t=>{let s=this.isColumnHidden(i,t);if(s){let i=t.name,s="string";this.lineItemLayout.hasOwnProperty(t.name)&&(i=this.lineItemLayout[t.name].lbl_to_display,delete o[t.name],this.lineItemLayout[t.name].hasOwnProperty("column_type")&&(s=this.lineItemLayout[t.name].column_type));let a="";null!=t.org_index&&void 0!=t.org_index&&(a=String(t.org_index));let l={name:t.name,field:t.name,align:"left",label:i,is_mapped:!!t.is_mapped&&t.is_mapped,column_type:s,org_index:a};t.hasOwnProperty("org_index")&&null!=t.org_index?this.tableColumns.push(l):e[t.name]=l}}));for(let s in o){const e=o[s];if(!e.hasOwnProperty("org_index")||!e.org_index)continue;let t=!this.isCustomColumnHidden(e.name);if(!t){delete o[e.name];continue}let i="string";this.lineItemLayout.hasOwnProperty(e.name)&&this.lineItemLayout[e.name].hasOwnProperty("column_type")&&(i=this.lineItemLayout[e.name].column_type);let a={name:e.column_name,field:e.column_name,align:"left",label:e.lbl_to_display,is_mapped:!!e.is_mapped&&e.is_mapped,column_type:i,org_index:"",is_extra_column:!0};this.tableColumns.push(Object.assign({},a)),this.layoutExtraColumns.push(e.column_name)}},sortTableColumn(){let e=JSON.parse(JSON.stringify(this.tableColumns)),t=[];this.tableColumns=[],Array.from(e).forEach(((e,i)=>{1!=this.hasOriginalIndex(e.org_index,e)&&J.has(e.name)&&!1===J.get(e.name)?t.push(Object.assign({},e)):this.tableColumns.push(Object.assign({},e))})),t.sort(((e,t)=>{let i=e.field.toLowerCase(),o=t.field.toLowerCase();return i<o?-1:i>o?1:0})),Array.from(t).forEach(((e,t)=>{this.tableColumns.push(Object.assign({},e))}))},isColumnHidden(e,t){let i="";null!=t.org_index&&void 0!=t.org_index&&(i=String(t.org_index));let o=!0;return""!==i&&(o=this.isColumnVisible(i,t)),""===i&&(o=!this.isCustomColumnHidden(t.name)),o},deleteLineItemColumn(e){return Y(this,void 0,void 0,(function*(){this.columns_to_hide.push(e),null!=this.group_column&&this.group_column===e&&(this.group_column=""),yield this.requestReformate()}))},getColumnToHide(){return Array.isArray(this.columns_to_hide)?this.columns_to_hide.join():""},removeLineItem(e){Array.from(this.tableObj.rows).forEach((t=>{if(t.id===e)return t.is_deleted=!0,this.$forceUpdate(),void this.prepareTableRowsAndRowObj()})),this.dispatchEventToSaveTableChanges()},swapColumn(e,t,i,o){return Y(this,void 0,void 0,(function*(){if(!this.isViewEditable())return;if(this.selectedColumnHasData(e.techName))return void this.showErrorToast(this.$t("column_has_value"));let s=!1,a=!1,l=t;if(this.column_mapping_indexes)for(const t in this.column_mapping_indexes){let o=this.column_mapping_indexes[t];if(t==e.techName&&o!=l){s=!0;break}if(t==i&&o==l){a=!0;break}}s?this.showErrorToast(this.$t("pages.messages.COLUMN_ALREADY_MAPPED")):(a&&delete this.column_mapping_indexes[i],this.addInMapping(l,e.techName),yield this.requestReformate(),setTimeout((()=>{this.scrollInToViewCenter(document.getElementById(o))}),10))}))},selectedColumnHasData(e){let t=!1;for(const i in this.tableRows){const o=this.tableRows[i];if(o.hasOwnProperty(e)&&null!=o[e]&&void 0!=o[e]&&""!=o[e]){t=!0;break}}return t},getTableData(){return this.tableObj?this.tableObj:{}},addNewCustomColumn(e){this.addColumnDialog=!0},editColumnData(e,t,i){if(!this.lineDataObj[i].hasOwnProperty("custom_row"))if(!0===this.isRowMode){let o,s=10;this.clearOldSelection(),e.target.closest("label")&&e.target.closest("label").classList.add("active-border-2px"),o=this.lineDataObj[i].columns[t];let a=!0;if(o&&o.locations_list){let e=o.locations_list;if(e.hasOwnProperty("page_"+this.currentPageNo))a=!1;else if(0!=Object.entries(e).length){s=200;for(const t in e){a=!1;let i=+e[t].page-1;this.$emit("loadNewPageImage",i);break}}else this.loadAppropriatePage(i)}setTimeout((()=>{if(!1===a){let a={rowId:i,columnName:t};this.getTableRowsAreas({detail:a}),setTimeout((()=>{let i=(0,q.$)("#draw_"+t);if(i){i.querySelector(".select-areas--outline").style.opacity="0";let s=i.querySelector(".select-areas--background_area");s.style.border="2px",s.style.borderStyle="solid",s.style.borderColor="#8800ff",this.oldSelectedColumnName=t,this.scrollInToViewCenter(s),this.removeExistingConfirmationOverlays(),o&&""!==this.addExtractionMethodClass(o)&&setTimeout((()=>{let t=e.target.closest("td").dataset.columnValue,i=e.target.closest("td").dataset.scoreDescription,o={value:t,score:i,selection:s};const a=new CustomEvent("prepare_overlay",{detail:o});document.dispatchEvent(a)}),20)}}),s)}else{this.showNotification(this.$t("pages.messages.SELECT_AREA"));let e={rowId:i,columnName:t,onlySelectedRow:!0};this.getTableRowsAreas({detail:e}),setTimeout((()=>{const e=new CustomEvent("enable_column_selection",{detail:i});document.dispatchEvent(e)}),10)}}),10)}else this.loadAppropriatePage(i),setTimeout((()=>{let e={rowId:i,columnName:t,onlySelectedRow:!0};this.drawSelectedRow({detail:e}),setTimeout((()=>{let e=(0,q.$)("#draw_"+i);if(e){this.oldSelectedColumnName=t;let i=e.querySelector(".select-areas--background_area");this.scrollInToViewCenter(i)}}),40)}),100)},clearOldSelection(){if(""!=this.oldSelectedColumnName){let e=(0,q.$)("#draw_"+this.oldSelectedColumnName);if(e){let t=e.querySelector(".select-areas--background_area"),i=t.style.background.split("100%)");t.style.background=A.zb+i[1]}}let e=document.querySelector("#line_item_table").querySelectorAll("label.active-border-2px");Array.from(e).forEach((e=>{e.classList.remove("active-border-2px")}));let t=document.querySelector("#screenshot_container"),i=t.querySelectorAll("div.select-areas--outline");Array.from(i).forEach((e=>{e.style.opacity="0.2",e.nextSibling&&(e.nextSibling.style.border="unset")}))},loadAppropriatePage(e){let t=this.lineDataObj[e],i="";for(const o in t.locations_list){if(t.locations_list[o].page===this.currentPageNo){i=o;break}i=o}if(""!=i){let e=+t.locations_list[i].page-1;this.$emit("loadNewPageImage",e)}},drawSelectedRow(e){let t="",i=null;void 0!=e.detail&&e.detail.columnName&&(t=e.detail.rowId,i=e.detail.columnName);let o=[];if(this.lineDataObj[t]){this.lineDataObj[t].locations_list&&this.lineDataObj[t].locations_list["page_"+this.currentPageNo]&&o.push({id:t,type:"row",row_id:"",background:A.yY,opacity:"1",coord:this.lineDataObj[t].locations_list["page_"+this.currentPageNo].coords[0]});let s=this.lineDataObj[t].columns[i];s&&s.locations_list&&s.locations_list["page_"+this.currentPageNo]&&o.push({id:i,row_id:e.detail.rowId,type:"column",background:A.yY,opacity:"1",coord:s.locations_list["page_"+this.currentPageNo].coords[0]})}let s={columns:[],table_areas:[]};s.table_areas=o,W.Z.set("table_rows_data",JSON.stringify(s));const a=new CustomEvent("prepare_customized_areas");document.dispatchEvent(a)},getTableRowsAreas(e){let t="all_rows",i=null;void 0!=e.detail&&e.detail.columnName&&(t=e.detail.rowId,i=e.detail.columnName);let o=[];for(const s in this.lineDataObj)this.lineDataObj[s]&&this.lineDataObj[s].locations_list["page_"+this.currentPageNo]&&o.push({id:s,type:"row",row_id:"",background:void 0!=e.detail&&e.detail.rowId===s?"":"linear-gradient( rgba(211, 211, 211, 0.5) 100%, rgba(0, 0, 0, 0.5)100%),",opacity:(void 0!=e.detail&&e.detail.rowId,"1"),coord:this.lineDataObj[s].locations_list["page_"+this.currentPageNo].coords[0]});if(e.detail&&!e.detail.onlySelectedRow&&this.lineDataObj.hasOwnProperty(e.detail.rowId)){let t=this.lineDataObj[e.detail.rowId].columns;for(const i in t)t[i].locations_list&&t[i].locations_list.hasOwnProperty("page_"+this.currentPageNo)&&o.push({id:i,row_id:e.detail.rowId,type:"column",background:this.columnDefaultBackground(),opacity:1,coord:t[i].locations_list["page_"+this.currentPageNo].coords[0]})}this.$emit("setTableRowCorrdinates",JSON.stringify(o),i,t)},columnDefaultBackground(){return A.yY},hasOriginalIndex(e,t){let i=!1;return""!==e&&(i=!0),i},getScoreDescription(e){let t="";return e&&e.hasOwnProperty("score_description")&&""!==e.score_description&&null!=e.score_description&&(t=e.score_description),String(t)},TriggerSplitText(){this.split_text_confirm_dialog=!1,this.openAdvSettings=!1;const e=new CustomEvent("perform_split_text",{detail:this.split_text});document.dispatchEvent(e)},disableCustomColumn(e){this.formatting_options.hasOwnProperty("custom_columns_to_hide")&&null!==this.formatting_options.custom_columns_to_hide||(this.formatting_options.custom_columns_to_hide=Object.assign([])),this.formatting_options.custom_columns_to_hide.push(e),this.refactorApiData(),this.$forceUpdate(),this.dispatchEventToSaveTableChanges(!0)},getLabelToDisplay(e){let t=e.title;return this.$t("pages.line_items_columns."+e.translation_key)!=="pages.line_items_columns."+e.translation_key&&(t=this.$t("pages.line_items_columns."+e.translation_key)),t},prepareDisabledCstmColumnsList(){this.disableColumnList=[],this.tableObj&&this.tableObj.hasOwnProperty("layout")&&Array.from(this.tableObj.layout).forEach((e=>{if(!0===this.isCustomColumnHidden(e.column_name)){let t={};t["name"]=e.column_name,t["label"]=this.getLabelToDisplay(e),this.disableColumnList.push(t)}}))},openDisabledCstmColumnsView(){this.tableObj&&this.tableObj.hasOwnProperty("layout")&&(this.openDisableColumnListView=!0)},enableCustomColumn(e){if(e&&e.detail){var t=this.formatting_options.custom_columns_to_hide.indexOf(e.detail);-1!==t&&this.formatting_options.custom_columns_to_hide.splice(t,1),this.refactorApiData(),this.dispatchEventToSaveTableChanges(!0)}},customColumnCreated(e){e&&e.detail&&e.detail.tables&&(this.addColumnDialog=!1,this.setTableData(e.detail.tables),this.dispatchEventToSaveTableChanges(),this.refactorApiData())},createRowJson(){let e=JSON.parse(JSON.stringify(this.tableObj.rows[0]));e.id=Date.now(),e.ids=[],e.content="",e.locations=[],e.locations_list=[],e.is_deleted=!1,e.messages=[],e.custom_row=!0,Array.from(e.columns).forEach(((e,t)=>{e.content="",e.locations=[],e.locations_list=[],e.value="",e.formatted_value=[]})),this.tableObj.rows.push(e),this.$forceUpdate(),this.prepareTableRowsAndRowObj()},prepareRegexData(e){this.docStore.regex.clear(),this.selectedColumn=e,Array.from(this.tableObj.rows).forEach(((t,i)=>{Array.from(t.columns).forEach(((t,i)=>{t.name===e&&t.hasOwnProperty("rule")&&t.hasOwnProperty("valuePattern")&&this.docStore.regex.set(t.rule,t.valuePattern)}))})),this.showRegexDlg=!0},updateRegexByRule(){this.showRegexDlg=!1,Array.from(this.tableObj.rows).forEach(((e,t)=>{Array.from(e.columns).forEach(((e,i)=>{e.name===this.selectedColumn&&e.hasOwnProperty("rule")&&e.hasOwnProperty("valuePattern")&&(this.tableObj.rows[t].columns[i].valuePattern=this.docStore.regex.get(e.rule))}))})),this.refactorApiData()},setShowRegexDlg(e){this.showRegexDlg=e},highliteFirstRowOfCurrentPage(){if(this.tableRowsLocationsMap.has("page_"+this.currentPageNo)){const e=this.tableRowsLocationsMap.get("page_"+this.currentPageNo),t=(0,q.$)("#"+A.QU+e);t&&(this.scrollInToViewStart(t),setTimeout((()=>{t.classList.add("light-grey-with-effect"),setTimeout((()=>{t.classList.remove("light-grey-with-effect")}),1400)}),500))}},getBackgroundColor(e){let t="";return e.hasOwnProperty("is_auto_filled")&&1==e.is_auto_filled?t=this.is_auto_filled_color:e.hasOwnProperty("is_missing")&&1==e.is_missing&&(t=this.is_missing_color),t},getRowIdPrefix(){return A.QU},getColumnClass(e){const t=e.split(" ");return 2==t.length&&1==t[1].length?"no-wrap-text":""},displayName(e,t){return e},requestReformate(){return Y(this,void 0,void 0,(function*(){try{if(this.isReadOnly)return;this.lineItemsloading=!0,this.resetRows();const e={doc_id:this.record.doc_id,data:JSON.stringify(this.getTableData()),column_mapping_indexes:JSON.stringify(this.getColumnMappingIndexes()),ai_prompt:this.ai_prompt?this.ai_prompt:"",columns_to_hide:this.getColumnToHide()};this.record.hasOwnProperty("is_table_training_doc")&&(e["is_table_training_doc"]=(!0).toString());const t=yield z.zB.reformatAITable(e);if(!1===t.success)throw t.message;this.setTableData(t),this.refactorApiData(),this.dispatchEventToSaveTableChanges(),this.lineItemsloading=!1}catch(e){const t=$.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.hideLoading()}}))},setDataForRuleSave(){this.record.tables[0]=this.tableObj,this.ai_prompt=this.tableObj.ai_prompt},saveRules(){return Y(this,void 0,void 0,(function*(){try{if(this.isReadOnly)return;const e=yield this.hasActionAcquiredLock();if(!e)return;this.showLoading(),this.setDataForRuleSave();const t={data:JSON.stringify(this.record)},i=yield z.zB.saveRules(t);if(!1===i.success)throw i.message}catch(e){const t=$.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.hideLoading()}}))},deleteRules(){return Y(this,void 0,void 0,(function*(){try{if(this.isReadOnly)return;const e=yield this.hasActionAcquiredLock();if(!e)return;this.showLoading(),this.setDataForRuleSave();const t={doc_id:this.record.doc_id},i=yield z.zB.deleteRules(t);if(!1===i.success)throw i.message;this.showSuccessToast(this.$t("pages.messages.RULES_DELETED_SUCESSFULLY")),yield this.autoDetectTables(),this.tableObj=this.record.tables[0],this.lineItemDataLoaded()}catch(e){const t=$.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.hideLoading()}}))},highlightRow(e){const t=new CustomEvent("highlight_table_row",{detail:A.QU+e});document.dispatchEvent(t)},displayFieldErrors(){this.displayTable=!1,this.init()}},setup(){const e=(0,R.Z)(),t=(0,H.H_)(),i=(0,H.nc)(),{isFormBuilderMode:o}=(0,h.Jk)(i),s=(0,H.A)(),{validation_done:a,missing_mapping_column:l}=(0,h.Jk)(s),n=(0,H.H_)(),{record:r,doc_loaded:d,has_ai_table:c}=(0,h.Jk)(n),{saveDocument:u,autoDetectTables:p}=n,_=(0,H.VF)(),{user_settings:g,loading_settings:f}=(0,h.Jk)(_),w=(0,H.TB)(),{hasActionAcquiredLock:y}=w;let b=[],v={};const x=(0,m.iH)("");return{has_ai_table:c,autoDetectTables:p,hasActionAcquiredLock:y,saveDocument:u,setting_flag:(0,m.iH)(!1),user_settings:g,loading_settings:f,record:r,doc_loaded:d,is_line_item_validated:a,missing_mapping_column:l,filter:x,docStore:t,headers:(0,m.iH)(),lineitems:(0,m.iH)(),move_extra_rows_to:(0,m.iH)(""),header_rows_count:(0,m.iH)(1),min_group_rows:(0,m.iH)(1),max_group_rows:(0,m.iH)(),distinct_group_column:(0,m.iH)(!1),reverse_grouping:(0,m.iH)(!1),group_column:(0,m.iH)(""),column_mapping_indexes:(0,m.iH)(v),columns_to_hide:(0,m.iH)(b),custom_columns_to_hide:(0,m.iH)(b),addFieldsDialog:(0,m.iH)(!1),extra_columns:(0,m.iH)(b),poEditRestrictDialog:(0,m.iH)(!1),poEditRestrictMessage:(0,m.iH)(""),new_field_model:(0,m.iH)(v),new_column_model:(0,m.iH)(v),revert_changes_confirm_dialog:(0,m.iH)(!1),adv_column_options:b,advance_settings_columns:(0,m.iH)([]),confirmDialog:(0,m.iH)(!1),displayTable:(0,m.iH)(!1),selectedColumn:(0,m.iH)(""),showRegexDlg:(0,m.iH)(!1),openAdvSettings:(0,m.iH)(!1),oldSelectedColumnName:(0,m.iH)(""),headerRowCountRules:[e=>null!==e||"Please type number",e=>e>0&&e<100||"Please type number"],showNotification(t){e.notify({message:t,color:"primary",position:"bottom"})},lineDataObj:(0,m.iH)(b),lineItemsErrors:(0,m.iH)(v),lineItemLayout:(0,m.iH)(b),tableColumns:(0,m.iH)(b),tableRows:(0,m.iH)(b),formatting_options:(0,m.iH)(v),addColumnDialog:(0,m.iH)(!1),headerKey:(0,m.iH)(""),headerLable:(0,m.iH)(""),lineItemsloading:(0,m.iH)(!0),openDisableColumnListView:(0,m.iH)(!1),disableColumnList:(0,m.iH)(b),split_text:(0,m.iH)(!1),split_text_confirm_dialog:(0,m.iH)(!1),tableRowsLocationsMap:(0,m.iH)(new Map),layoutExtraColumns:(0,m.iH)([]),isFormBuilderMode:o,ai_prompt:(0,m.iH)("")}}});var G=i(74260),X=i(30481),ee=i(17132),te=i(18186),ie=i(83884),oe=i(24554),se=i(5363),ae=i(92414),le=i(39200),ne=i(39975),re=i(82226),de=i(27011),ce=i(83414),ue=i(52035),he=i(2350),me=i(2165),pe=i(64689),_e=i(66941),ge=i(23282),fe=i(46778),we=i(86115),ye=i(60677),be=i(7518),ve=i.n(be);const xe=(0,G.Z)(K,[["render",L],["__scopeId","data-v-548acc4b"]]),ke=xe;ve()(K,"components",{QMarkupTable:X.Z,QTable:ee.Z,QTr:te.Z,QTd:ie.Z,QIcon:oe.Z,QTooltip:se.Z,QTh:ae.Z,QFab:le.Z,QFabAction:ne.Z,QBtnDropdown:re.Z,QList:de.Z,QItem:ce.Z,QItemSection:ue.Z,QItemLabel:he.Z,QBtn:me.Z,QInput:pe.Z,QInnerLoading:_e.Z,QSpinnerHourglass:ge.Z,QDialog:fe.Z,QField:we.Z}),ve()(K,"directives",{ClosePopup:ye.Z});var Ce=i(85828),De=i(61402),Oe=i(23911),Ee=i(98880);const Se=e=>((0,o.dD)("data-v-475ea692"),e=e(),(0,o.Cn)(),e),Ie=Se((()=>(0,o._)("img",{src:"supplier_block.svg"},null,-1))),Te={class:"q-ml-sm"};function Le(e,t,i,a,l,n){const r=(0,o.up)("q-tooltip"),d=(0,o.up)("q-icon"),c=(0,o.up)("q-avatar"),u=(0,o.up)("q-card-section"),h=(0,o.up)("q-btn"),m=(0,o.up)("q-card-actions"),p=(0,o.up)("q-card"),_=(0,o.up)("q-dialog"),g=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(d,{size:"28px",onClick:t[0]||(t[0]=t=>{t.stopPropagation(),e.openSupplierBlockDialog()}),class:"q-mr-sm cursor-pointer"},{default:(0,o.w5)((()=>[Ie,(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("block_supplier_tooltip")),1)])),_:1})])),_:1}),(0,o.Wm)(_,{modelValue:e.confirm_supplier_block,"onUpdate:modelValue":t[1]||(t[1]=t=>e.confirm_supplier_block=t),onKeydown:t[2]||(t[2]=(0,Ee.D2)((t=>e.confirm_supplier_block=!1),["esc"])),onHide:t[3]||(t[3]=t=>e.confirm_supplier_block=!1)},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{icon:"block",color:"primary","text-color":"white"}),(0,o._)("span",Te,(0,s.zw)(e.$t("block_supplier_confirmation")),1)])),_:1}),(0,o.Wm)(m,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(h,{label:e.$t("cancel")},null,8,["label"]),[[g]]),(0,o.Wm)(h,{color:"primary",class:"q-mr-sm","data-cy":"setvatfield",label:e.$t("confirm"),onClick:e.blockSupplierTableExtraction},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var Me=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const Fe=(0,o.aZ)({el:"#app",mixins:[Z.Z,M.Z],components:{},props:{isReadOnly:{type:Boolean,default:!1}},data(){return{}},methods:{openSupplierBlockDialog(){this.isReadOnly||(this.confirm_supplier_block=!0)},blockSupplierTableExtraction(){return Me(this,void 0,void 0,(function*(){try{if(this.isReadOnly)return;if(!this.supplier)return void this.showErrorToast(this.$t("pages.messages.SUPPLIER_NAME_MISSING"));const e={};e.doc_type=this.record.doc_type,e.is_org_specific=!0,e.tfidf_id=this.supplier,this.record.filter_values&&this.record.filter_values.length>0&&this.record.filter_values.forEach((function(t,i){let o="filterID"+(i+1);e[o]=t})),this.showLoading();const t=yield z.Mq.blockSupplierForTableExtraction(e);if(!t||!1===t.success)throw{message:t.message};yield this.updateDocument(),this.confirm_supplier_block=!1,this.$router.go(0)}catch(e){const t=$.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.hideLoading()}}))},updateDocument(){return Me(this,void 0,void 0,(function*(){this.record.tables=[],this.record.table_blocked=!0,yield this.saveDocument(this.record.doc_id),this.setDataToCache()}))}},setup(){const e=(0,H.H_)(),{doc_loaded:t,record:i,supplier:o}=(0,h.Jk)(e),{saveDocument:s,setDataToCache:a}=e;return{setDataToCache:a,supplier:o,saveDocument:s,doc_loaded:t,record:i,confirm_supplier_block:(0,m.iH)(!1)}}});var qe=i(10151),Ze=i(25589),Re=i(75096),We=i(99367);const Ae=(0,G.Z)(Fe,[["render",Le],["__scopeId","data-v-475ea692"]]),Ve=Ae;ve()(Fe,"components",{QIcon:oe.Z,QTooltip:se.Z,QDialog:fe.Z,QCard:qe.Z,QCardSection:Ze.Z,QAvatar:Re.Z,QCardActions:We.Z,QBtn:me.Z}),ve()(Fe,"directives",{ClosePopup:ye.Z});const ze=e=>((0,o.dD)("data-v-38cf2721"),e=e(),(0,o.Cn)(),e),Be=ze((()=>(0,o._)("img",{src:"supplier_un_block.svg"},null,-1))),Ne={class:"q-ml-sm"};function Pe(e,t,i,a,l,n){const r=(0,o.up)("q-tooltip"),d=(0,o.up)("q-icon"),c=(0,o.up)("q-avatar"),u=(0,o.up)("q-card-section"),h=(0,o.up)("q-btn"),m=(0,o.up)("q-card-actions"),p=(0,o.up)("q-card"),_=(0,o.up)("q-dialog"),g=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.record.table_blocked?((0,o.wg)(),(0,o.j4)(d,{key:0,size:"30px",onClick:t[0]||(t[0]=t=>e.openSupplierBlockDialog()),class:"q-mr-sm cursor-pointer"},{default:(0,o.w5)((()=>[Be,(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("unblock_supplier")),1)])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(_,{modelValue:e.confirm_supplier_unblock,"onUpdate:modelValue":t[1]||(t[1]=t=>e.confirm_supplier_unblock=t),onKeydown:t[2]||(t[2]=(0,Ee.D2)((t=>e.confirm_supplier_unblock=!1),["esc"])),onHide:t[3]||(t[3]=t=>e.confirm_supplier_unblock=!1)},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{icon:"block",color:"primary"}),(0,o._)("span",Ne,(0,s.zw)(e.$t("unblock_supplier_confirmation")),1)])),_:1}),(0,o.Wm)(m,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(h,{label:e.$t("cancel")},null,8,["label"]),[[g]]),(0,o.Wm)(h,{color:"primary",class:"q-mr-sm",label:e.$t("confirm"),onClick:e.unBlockedSupplier},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var Ue=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const je=(0,o.aZ)({el:"#app",mixins:[Z.Z,M.Z],props:{isReadOnly:{type:Boolean,default:!1}},components:{},data(){return{}},methods:{openSupplierBlockDialog(){this.isReadOnly||(this.confirm_supplier_unblock=!0)},unBlockedSupplier(){return Ue(this,void 0,void 0,(function*(){try{if(!this.supplier)throw"No Supplier found to unblock";this.showLoading();const e=yield z.Mq.deleteSupplierBySupplier(this.supplier);if(!1===e.success)throw{message:e.message};const t=yield z.U0.restartDocument(this.record.doc_id);if(!1===t.success)throw{message:"Failed to unblock"};this.$router.push("/dashboard")}catch(e){const t=$.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.hideLoading(),this.confirm_supplier_unblock=!1}}))}},setup(){const e=(0,H.H_)(),{record:t,supplier:i}=(0,h.Jk)(e);return{supplier:i,record:t,confirm_supplier_unblock:(0,m.iH)(!1)}}}),He=(0,G.Z)(je,[["render",Pe],["__scopeId","data-v-38cf2721"]]),$e=He;ve()(je,"components",{QIcon:oe.Z,QTooltip:se.Z,QDialog:fe.Z,QCard:qe.Z,QCardSection:Ze.Z,QAvatar:Re.Z,QCardActions:We.Z,QBtn:me.Z}),ve()(je,"directives",{ClosePopup:ye.Z});const Qe={key:0,class:"text-center text-h5 q-mt-sm"},Ye={style:{"padding-left":"5px"}};function Je(e,t,i,a,l,n){const r=(0,o.up)("q-icon");return e.record.table_blocked?((0,o.wg)(),(0,o.iD)("div",Qe,[(0,o.Wm)(r,{class:"text-blue",style:{"font-size":"32px"},name:"info"}),(0,o._)("span",Ye,(0,s.zw)(e.$t("block_supplier_warning")),1)])):(0,o.kq)("",!0)}const Ke=(0,o.aZ)({el:"#app",mixins:[Z.Z,M.Z],components:{},data(){return{}},methods:{},setup(){const e=(0,H.H_)(),{record:t}=(0,h.Jk)(e);return{record:t}}}),Ge=(0,G.Z)(Ke,[["render",Je],["__scopeId","data-v-0d8af5f7"]]),Xe=Ge;ve()(Ke,"components",{QIcon:oe.Z});var et=i(72272),tt=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const it=(0,o.aZ)({name:"CheckBox",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},emits:["inputValueChanges","updateModel"],mixins:[_.Z,Ce.Z,p.Z],components:{LineItemTable:Oe.Z,AIExtractedTable:ke,BlockSupplier:Ve,UnBlockSupplierWarning:Xe,UnBlockSupplier:$e,IgnoreTableValidation:et.Z},watch:{doc_loaded:{handler:function(e,t){this.init()}}},data(){return{tables:(0,m.iH)(De.q.data().tables),renderTable:(0,m.iH)(!1),firstTableName:(0,m.iH)(""),extractedTables:(0,m.iH)([]),AI_table_extraction_setting:A.Yl}},beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},mounted(){this.init()},unmounted:function(){},methods:{init(){this.isFormBuilderMode?this.AI_setting_flag=!0:(this.prepareTables(),this.record.table_blocked||(this.checkSetting(),this.has_ai_table&&this.AI_setting_flag&&(this.tab="ai_tables")))},checkSetting(){this.AI_setting_flag=!1,this.user_settings[this.AI_table_extraction_setting]&&(this.AI_setting_flag=this.user_settings[this.AI_table_extraction_setting])},prepareTables(){return tt(this,void 0,void 0,(function*(){yield this.getDocumentTables(this.docType);for(let[e,t]of Object.entries(this.documentTables))this.tables[0].name=e,this.tables[0].text="Table ("+e+")",this.extractedTables.push(JSON.parse(JSON.stringify(this.tables[0]))),this.documentTableNames.push(e),this.firstTableName=this.documentTableNames[0];this.renderTable=!0}))},goToTableExtraction(){this.isFormBuilderMode||this.$router.push("/tbl_ext_v3/"+this.$route.params.id)},deleteTable(){if(this.isFormBuilderMode||this.isReadOnly)return;this.record.tables=[];const e=new CustomEvent("delete_table",{});document.dispatchEvent(e)},addColumnInLineItems(){if(this.isFormBuilderMode||this.isReadOnly)return;const e=new CustomEvent("add_ai_new_column",{});document.dispatchEvent(e)}},setup(){const e=(0,H.nc)(),{formBuilderModel:t,formBuilderConfigModel:i,isFormBuilderMode:o,documentTableNames:s,documentTables:a,docType:l}=(0,h.Jk)(e),{getDocumentTables:n}=e,r=(0,H.H_)(),{doc_loaded:d,has_ai_table:c,record:u}=(0,h.Jk)(r),p=(0,H.VF)(),{user_settings:_}=(0,h.Jk)(p);return{user_settings:_,record:u,docType:l,doc_loaded:d,has_ai_table:c,documentTables:a,formBuilderModel:t,isFormBuilderMode:o,documentTableNames:s,formBuilderConfigModel:i,tab:(0,m.iH)("extracted_tables"),AI_setting_flag:(0,m.iH)(!1),getDocumentTables:n}}});var ot=i(57547),st=i(3269),at=i(5906),lt=i(86602),nt=i(65869);const rt=(0,G.Z)(it,[["render",u]]),dt=rt;ve()(it,"components",{QTabs:ot.Z,QTab:st.Z,QTooltip:se.Z,QIcon:oe.Z,QTabPanels:at.Z,QTabPanel:lt.Z,QSeparator:nt.Z})},56040:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var o=i(83673),s=i(62323);function a(e,t,i,a,l,n){const r=(0,o.up)("q-separator");return(0,o.wg)(),(0,o.j4)(r,{size:"2px",class:(0,s.C_)(["cursor-pointer",e.formBuilderConfigModel[e.fieldName].space_from_top+" "+e.formBuilderConfigModel[e.fieldName].space_from_bottom]),onClick:t[0]||(t[0]=t=>e.$emit("inputClicked",e.fieldName))},null,8,["class"])}var l=i(10321),n=i(60727);const r=(0,o.aZ)({name:"HorizontalSeparator",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},emits:["updateModel","inputClicked"],beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},methods:{getLowerConfidence(e){return this.isFormBuilderMode?null:this.getLowerConfidence(e)}},setup(){const e=(0,n.nc)(),{isFormBuilderMode:t,formBuilderConfigModel:i}=(0,l.Jk)(e);return{isFormBuilderMode:t,formBuilderConfigModel:i}}});var d=i(74260),c=i(65869),u=i(7518),h=i.n(u);const m=(0,d.Z)(r,[["render",a]]),p=m;h()(r,"components",{QSeparator:c.Z})},12121:(e,t,i)=>{"use strict";i.d(t,{Z:()=>I});var o=i(83673);const s=e=>((0,o.dD)("data-v-64bd586a"),e=e(),(0,o.Cn)(),e),a={class:"full-width"},l=s((()=>(0,o._)("div",{class:"q-pa-md"},[(0,o._)("div",{class:"row items-center"},[(0,o._)("div",{class:"col"}," Buttons visibility ")]),(0,o._)("div",{class:"row"},[(0,o._)("div",{class:"col"}," Auto Accounting = Cost Invoice + Auto Accounting module is on ")]),(0,o._)("div",{class:"row"},[(0,o._)("div",{class:"col"}," PO Match = PO + PO Enable ")]),(0,o._)("div",{class:"row"},[(0,o._)("div",{class:"col"}," Export = No Auto Accounting AND No PO Match ")])],-1))),n={class:"full-width"},r=["onClick"];function d(e,t,i,s,d,c){const u=(0,o.up)("q-tooltip"),h=(0,o.up)("q-icon");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",a,[e.isFormBuilderMode?((0,o.wg)(),(0,o.j4)(h,{key:0,flat:"",dense:"",name:"error",size:"24px"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"bg-grey",anchor:"bottom right",self:"top right"},{default:(0,o.w5)((()=>[l])),_:1})])),_:1})):(0,o.kq)("",!0)]),(0,o._)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.formBuilderConfigModel[e.fieldName].child_elements,((t,i)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i},[e.isFormBuilderMode||-1!==e.exclueded_buttons.indexOf(t.fieldType)||e.show_button_type===t.fieldType?((0,o.wg)(),(0,o.iD)("div",(0,o.dG)({key:0},e.formBuilderConfigModel[t.name],{onClick:i=>e.inputClicked(t.name),class:["display-block element_parent cursor-move",t.name==e.activeFieldName?"is--active  dashed-border":" "],style:"width:"+e.getElementWidth(e.formBuilderConfigModel[t.name])+"%"}),[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.fieldType),{onInputClicked:e.inputClicked,currentField:e.formBuilderConfigModel[t.name],fieldName:t.name,show_button_type:e.show_button_type,isReadOnly:e.isReadOnly,class:"form__field"},null,8,["onInputClicked","currentField","fieldName","show_button_type","isReadOnly"]))],16,r)):(0,o.kq)("",!0)],64)))),128))])],64)}var c=i(10321),u=i(61959),h=i(91777),m=i(20850),p=i(22102),_=i(49629),g=i(27728),f=i(85828),w=i(60727),y=i(37295),b=i(85854),v=i(41891);const x=(0,o.aZ)({name:"InvoiceButtons",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},emits:["inputClicked","updateModel"],mixins:[h.Z,f.Z,y.Z],components:{PoMatchButton:_.Z,SaveRulesButton:m.Z,ExportButton:g.Z,AutoAccountingButton:p.Z},watch:{doc_loaded:{handler:function(e,t){this.init()}},loading_settings:{handler:function(e,t){1==e&&0==t||this.init()}}},data(){return{auto_accounting_setting:v.x8}},beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},mounted(){this.init(),document.addEventListener("field_value_updated",this.fieldValueUpdated)},unmounted:function(){document.removeEventListener("field_value_updated",this.fieldValueUpdated)},methods:{inputClicked(e){const t=new CustomEvent("element_click",{detail:e});document.dispatchEvent(t)},fieldValueUpdated(e){"invoice_sub_type"===e.detail.field_name&&this.init()},init(){if(window.btns=this,this.isFormBuilderMode)return;let e=b.oh.EXPORT_BUTTON;!0===Boolean(this.user_settings[this.auto_accounting_setting])&&this.formBuilderModel["invoice_sub_type"]&&this.formBuilderModel["invoice_sub_type"].hasOwnProperty("formatted_value")&&"Cost Invoice"===this.formBuilderModel["invoice_sub_type"].formatted_value?e=b.oh.AUTO_ACCOUNTING_BUTTON:this.isPoSettingActivate()&&this.isPoIconAllowed(this.doctype,this.record.status,this.tb_version)&&(e=b.oh.PO_MATCH_BUTTON),this.show_button_type=e}},setup(){const e=(0,w.nc)(),{formBuilderModel:t,formBuilderConfigModel:i,documentTableNames:o,isFormBuilderMode:s,activeFieldName:a,documentTables:l,docType:n}=(0,c.Jk)(e),{getElementWidth:r}=e,d=(0,w.H_)(),{record:h,doctype:m,doc_loaded:p}=(0,c.Jk)(d),_=(0,w.VF)(),{user_settings:g}=(0,c.Jk)(_);return{user_settings:g,record:h,doctype:m,getElementWidth:r,docType:n,doc_loaded:p,documentTables:l,activeFieldName:a,formBuilderModel:t,isFormBuilderMode:s,documentTableNames:o,formBuilderConfigModel:i,show_button_type:(0,u.iH)(b.oh.EXPORT_BUTTON),exclueded_buttons:(0,u.iH)([b.oh.SAVE_RULES_BUTTON])}}});var k=i(74260),C=i(24554),D=i(5363),O=i(7518),E=i.n(O);const S=(0,k.Z)(x,[["render",d],["__scopeId","data-v-64bd586a"]]),I=S;E()(x,"components",{QIcon:C.Z,QTooltip:D.Z})},9062:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var o=i(83673),s=i(62323);const a={class:"full-width full-height cursor-pointer"};function l(e,t,i,l,n,r){return(0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("span",{onClick:t[0]||(t[0]=t=>e.$emit("inputClicked",e.fieldName))},(0,s.zw)(e.getLabelForFormBuilder(e.formBuilderConfigModel[e.fieldName],"form_builder.")),1)])}var n=i(10321),r=i(60727),d=i(91777);const c=(0,o.aZ)({name:"TextInput",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},emits:["updateModel","inputClicked"],mixins:[d.Z],beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},methods:{getLowerConfidence(e){return this.isFormBuilderMode?null:this.getLowerConfidence(e)}},setup(){const e=(0,r.nc)(),{formBuilderConfigModel:t,isFormBuilderMode:i}=(0,n.Jk)(e);return{isFormBuilderMode:i,formBuilderConfigModel:t}}});var u=i(74260);const h=(0,u.Z)(c,[["render",l]]),m=h},71814:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var o=i(83673);const s={class:"full-width"};function a(e,t,i,a,l,n){const r=(0,o.up)("q-option-group");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(r,{id:e.fieldName,child_type:"multi_checkbox",inline:"",color:"primary",type:"checkbox",modelValue:e.formBuilderModel[e.fieldName].groupList,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.formBuilderModel[e.fieldName].groupList=t),t[1]||(t[1]=t=>{e.inputValueChanges(e.$event,t)})],options:e.formBuilderConfigModel[e.fieldName].options,tabindex:e.formBuilderConfigModel[e.fieldName].tabIndex},null,8,["id","modelValue","options","tabindex"])])}var l=i(10321),n=i(60727),r=i(91777),d=i(85828);const c=(0,o.aZ)({name:"MultiCheckBox",props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},emits:["inputValueChanges","updateModel"],mixins:[r.Z,d.Z],beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},methods:{inputValueChanges(e,t){e||(e=window.event),e.stopPropagation&&e.stopPropagation(),this.isFormBuilderMode?this.formBuilderModel[this.fieldName].groupList=[]:this.formBuilderModel[this.fieldName].groupList.length>1&&this.formBuilderModel[this.fieldName].groupList.splice(0,1),this.$emit("inputValueChanges",this.fieldName,"checkbox")}},setup(){const e=(0,n.nc)(),{formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o}=(0,l.Jk)(e);return{formBuilderModel:t,isFormBuilderMode:i,formBuilderConfigModel:o}}});var u=i(74260),h=i(75682),m=i(7518),p=i.n(m);const _=(0,u.Z)(c,[["render",a]]),g=_;p()(c,"components",{QOptionGroup:h.Z})},35627:(e,t,i)=>{"use strict";i.d(t,{Z:()=>S});var o=i(62323),s=i(83673);const a={key:0,class:"row items-center justify-center"},l={key:1,class:"full-width"},n={class:"row"},r={class:"col-sm-6 secondary-c-text text-h6 q-pt-sm q-pb-sm text-weight-bold"},d={class:(0,o.C_)("row full-width ")},c={key:0,class:"col-6 q-pt-sm qr-fields"},u={class:"row"},h={class:"row"},m={class:(0,o.C_)("row full-width ")},p={key:0,class:"col-6 q-mt-sm qr-fields"},_={class:"row"},g={class:"row"};function f(e,t,i,f,w,y){const b=(0,s.up)("q-input");return(0,s.wg)(),(0,s.iD)(s.HY,null,[e.isFormBuilderMode?((0,s.wg)(),(0,s.iD)("div",a,(0,o.zw)(e.$t("qr_code_extracted_fields")),1)):(0,s.kq)("",!0),e.doc_loaded&&e.hasQRInfo()?((0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",n,[(0,s._)("div",r,(0,o.zw)(e.$t("qr_code")),1),(0,s._)("div",d,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.record.qr_code_data,((t,i)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:i},[t&&"object"!==typeof t?((0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",u,(0,o.zw)(e.makeLabelFromFieldName(i)),1),(0,s._)("div",h,[(0,s.Wm)(b,{"data-field-name":i,outlined:"",disable:!0,class:(0,o.C_)(" bg-disable input-field input-text-28px full-width "+i+"_input "),type:"text",modelValue:e.record.qr_code_data[i],"onUpdate:modelValue":t=>e.record.qr_code_data[i]=t},null,8,["data-field-name","class","modelValue","onUpdate:modelValue"])])])):(0,s.kq)("",!0)],64)))),128))]),e.show_more?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:0,class:"row link cursor-pointer font-size-14",onClick:t[0]||(t[0]=t=>e.show_more=!0)},(0,o.zw)(e.$t("show_more")),1)),e.show_more?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.record.qr_code_data,((t,i)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:i},[t&&"object"===typeof t?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",{class:(0,o.C_)("row full-width q-pt-sm pr-14 "+i+("object"===typeof t?" secondary-c-text text-weight-bold ":""))},(0,o.zw)(e.makeLabelFromFieldName(i)),3),(0,s._)("div",m,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t,((t,a)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:a},[t?((0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("div",_,(0,o.zw)(e.makeLabelFromFieldName(a)),1),(0,s._)("div",g,[(0,s.Wm)(b,{"data-field-name":a,outlined:"",disable:!0,class:(0,o.C_)(" bg-disable full-width input-field input-text-28px "+a+"_input "),type:"text",modelValue:e.record.qr_code_data[i][a],"onUpdate:modelValue":t=>e.record.qr_code_data[i][a]=t},null,8,["data-field-name","class","modelValue","onUpdate:modelValue"])])])):(0,s.kq)("",!0)],64)))),128))])],64)):(0,s.kq)("",!0)],64)))),128)),(0,s._)("div",{class:"row link cursor-pointer font-size-14",onClick:t[1]||(t[1]=t=>e.show_more=!1)},(0,o.zw)(e.$t("show_less")),1)],64)):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)],64)}var w=i(10321),y=i(61959),b=i(60727),v=i(91777);const x=(0,s.aZ)({name:"TextInput",watch:{doc_loaded:{handler:function(e,t){e&&(this.load_view=!0)}}},props:{currentField:{type:Object,default:new Object},fieldName:{type:String,default:""},isReadOnly:{type:Boolean,default:!1}},emits:["updateModel","inputClicked"],mixins:[v.Z],beforeMount:function(){this.isFormBuilderMode&&this.$emit("updateModel",this.currentField)},methods:{hasQRInfo(){return!this.isFormBuilderMode&&this.doc_loaded&&this.record.hasOwnProperty("qr_code_data")&&null!=this.record.qr_code_data},makeLabelFromFieldName(e){return e.replace(/_/g," ").toUpperCase()}},setup(){const e=(0,b.nc)(),{isFormBuilderMode:t}=(0,w.Jk)(e),i=(0,b.H_)(),{doc_loaded:o,record:s}=(0,w.Jk)(i);return{isFormBuilderMode:t,doc_loaded:o,record:s,load_view:(0,y.iH)(!1),show_more:(0,y.iH)(!1)}}});var k=i(74260),C=i(64689),D=i(7518),O=i.n(D);const E=(0,k.Z)(x,[["render",f]]),S=E;O()(x,"components",{QInput:C.Z})},39180:(e,t,i)=>{"use strict";i.d(t,{Z:()=>S});var o=i(83673),s=i(62323);const a={class:"full-width"},l={key:0,class:"col-sm-12 col-md-12 col-lg-12 display-flex"},n={key:0,class:"width-35px"},r={key:0},d=["id","child_type"],c={class:"inner-field-actions"},u={class:"q-ml-sm"};function h(e,t,i,h,m,p){const _=(0,o.up)("q-tooltip"),g=(0,o.up)("q-icon"),f=(0,o.up)("q-avatar"),w=(0,o.up)("q-input"),y=(0,o.up)("autocomplete"),b=(0,o.up)("q-card-section"),v=(0,o.up)("q-btn"),x=(0,o.up)("q-card-actions"),k=(0,o.up)("q-card"),C=(0,o.up)("q-dialog"),D=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",a,[e.formBuilderConfigModel[e.fieldName].displayLabelOnLeft?((0,o.wg)(),(0,o.iD)("div",{key:0,style:(0,s.j5)("width:"+e.formBuilderConfigModel[e.fieldName].labelWidth+"%"),class:"display-block"},[(0,o._)("div",{class:(0,s.C_)(e.fieldName+" "+(e.isFormBuilderMode||null==e.getLowerConfidenceIfNotFormBuilder(e.formBuilderModel[e.fieldName])?" full-width ":" label-area "))},[(0,o.Uk)((0,s.zw)(e.getLabelForFormBuilder(e.formBuilderConfigModel[e.fieldName],"form_builder."))+" ",1),(0,o.kq)("",!0)],2)],4)):(0,o.kq)("",!0),(0,o._)("div",{style:(0,s.j5)("width:"+e.getInputFieldWidth(e.formBuilderConfigModel[e.fieldName])+"%"),class:"display-block"},[e.formBuilderConfigModel[e.fieldName].displayLabelOnLeft?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("div",{class:(0,s.C_)(["ellipsify",e.fieldName+" "+(e.isFormBuilderMode||null==e.getLowerConfidenceIfNotFormBuilder(e.formBuilderModel[e.fieldName])?"full-width":"label-area-fb")])},[(0,o.Uk)((0,s.zw)(e.getLabelForFormBuilder(e.formBuilderConfigModel[e.fieldName],"form_builder."))+" ",1),(0,o.kq)("",!0),(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.getLabelForFormBuilder(e.formBuilderConfigModel[e.fieldName],"form_builder.")),1)])),_:1})],2),!e.isFormBuilderMode&&e.getLowerConfidenceIfNotFormBuilder(e.formBuilderModel[e.fieldName])?((0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(g,{name:"check_circle_outline",class:"q-pb-xs text-teal-5"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.getLowerConfidenceIfNotFormBuilder(e.formBuilderModel[e.fieldName]))+"%",1)])),_:1})])),_:1}),!e.formBuilderModel[e.fieldName].deleted&&e.formBuilderModel[e.fieldName].rule?((0,o.wg)(),(0,o.iD)("span",r,[(0,o._)("img",{onClick:t[0]||(t[0]=t=>e.deleteRuleConfirmation()),class:"q-ml-xs cursor-pointer black_to_white",width:"14",src:"trash-bin-default.svg"})])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),(0,o._)("div",{id:e.fieldName,child_type:e.formBuilderConfigModel[e.fieldName].is_textarea?"textarea":"input",class:(0,s.C_)(["col-sm-12 col-md-12 col-lg-12 autocomplete",e.formBuilderConfigModel[e.fieldName].is_textarea?" ":" input-text-28px"]),role:"combobox","aria-autocomplete":"list","aria-controls":"suggestions","aria-expanded":"false"},[(0,o.Wm)(w,{outlined:"",dense:"","data-name":e.fieldName,disable:e.isReadOnly||e.formBuilderConfigModel[e.fieldName].is_readonly,tabindex:e.formBuilderConfigModel[e.fieldName].tabIndex,autogrow:e.formBuilderConfigModel[e.fieldName].is_textarea,class:(0,s.C_)(" full-width "+e.fieldName+"_input "+(e.formBuilderConfigModel[e.fieldName].is_textarea?" ":"input-field ")+e.formBuilderConfigModel[e.fieldName].color+" "+e.formBuilderModel[e.fieldName].name+" "+e.addErrorClass()),onClick:t[3]||(t[3]=t=>{e.inputFieldClicked(t,e.fieldName)}),"onUpdate:modelValue":[t[4]||(t[4]=t=>{e.modelUpdated(t)}),t[6]||(t[6]=t=>e.formBuilderModel[e.fieldName].formatted_value=t)],onChange:t[5]||(t[5]=t=>{e.changeEvent()}),modelValue:e.formBuilderModel[e.fieldName].formatted_value,autocomplete:"off"},{append:(0,o.w5)((()=>[(0,o._)("div",c,[e.isCalculatorIconAllowed()?((0,o.wg)(),(0,o.j4)(g,{key:0,flat:"",dense:"",name:"calculate",size:"24px",class:"cursor-pointer",tabindex:"0",onClick:t[1]||(t[1]=t=>e.calculateValueOnCalulatorClick())})):(0,o.kq)("",!0)]),e.formBuilderConfigModel[e.fieldName].fuzzy_name&&null!=e.formBuilderConfigModel[e.fieldName].fuzzy_name?((0,o.wg)(),(0,o.j4)(f,{key:0,class:"cursor-pointer fuzzy-field",size:"20px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:"fuzzy-search.svg",onClick:t[2]||(t[2]=t=>{t.stopPropagation(),t.preventDefault(),e.$emit("applyFuzzySearch",e.formBuilderModel[e.fieldName])})})])),_:1})):(0,o.kq)("",!0),e.hasInputError()?((0,o.wg)(),(0,o.j4)(g,{key:1,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{class:"bg-red",anchor:"bottom left",self:"top left"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.inputErrorMessage()),1)])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},8,["data-name","disable","tabindex","autogrow","class","modelValue"]),!e.isFormBuilderMode&&e.formBuilderConfigModel[e.fieldName].list_of_values?((0,o.wg)(),(0,o.j4)(y,{key:0,input_class:e.fieldName+"_input",parent_id:e.fieldName,options:e.getListOfValues(e.formBuilderConfigModel[e.fieldName].list_of_values)},null,8,["input_class","parent_id","options"])):(0,o.kq)("",!0)],10,d)],4)]),(0,o.Wm)(C,{modelValue:e.deleteConfirmationDlg,"onUpdate:modelValue":t[8]||(t[8]=t=>e.deleteConfirmationDlg=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(b,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",u,(0,s.zw)(e.$t("pages.messages.MSG_DELETE_RULE")),1)])),_:1}),(0,o.Wm)(x,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(v,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[D]]),(0,o.wy)((0,o.Wm)(v,{flat:"",label:e.$t("delete"),color:"primary",onClick:t[7]||(t[7]=t=>e.deleteRule())},null,8,["label"]),[[D]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var m=i(61566),p=i(74260),_=i(5363),g=i(24554),f=i(64689),w=i(75096),y=i(46778),b=i(10151),v=i(25589),x=i(99367),k=i(2165),C=i(60677),D=i(7518),O=i.n(D);const E=(0,p.Z)(m.Z,[["render",h],["__scopeId","data-v-2e73b320"]]),S=E;O()(m.Z,"components",{QTooltip:_.Z,QIcon:g.Z,QInput:f.Z,QAvatar:w.Z,QDialog:y.Z,QCard:b.Z,QCardSection:v.Z,QCardActions:x.Z,QBtn:k.Z}),O()(m.Z,"directives",{ClosePopup:C.Z})},37214:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var o=i(83673),s=i(61959),a=i(60727),l=i(10321),n=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const r=(0,o.aZ)({data(){return{}},props:{input_class:{type:String,required:!0},parent_id:{type:String,required:!0},options:{type:Array,default:[]}},setup(){const e=(0,a.nc)(),{formBuilderModel:t}=(0,l.Jk)(e);return{formBuilderModel:t,suggestions_id:(0,s.iH)(""),FILTERED:(0,s.iH)([]),suggestionsEle:(0,s.iH)({}),searchInput:(0,s.iH)({}),parent_DIV:(0,s.iH)({}),CURRENT_INDEX:(0,s.iH)(-1)}},methods:{handleInput(e){const t=e.target.value,i=t.toLowerCase();this.FILTERED=this.options.filter((e=>e.toLowerCase().indexOf(i)>-1)),this.suggestionsEle.innerHTML="",this.FILTERED.forEach(this.createOption),t.length>0?this.openSuggestions():this.closeSuggestions()},highlightNext(){const e=(this.CURRENT_INDEX+1)%this.FILTERED.length;this.updateIndex(e)},highlightPrev(){const e=(this.CURRENT_INDEX-1+this.FILTERED.length)%this.FILTERED.length;this.updateIndex(e)},handleKeyDown(e){const t=["Escape","ArrowDown","ArrowUp","Enter"];if(t.includes(e.key))switch(this.suggestionsEle.hidden||e.stopPropagation(),e.key){case"Escape":this.closeSuggestions();break;case"ArrowDown":this.highlightNext();break;case"ArrowUp":this.highlightPrev();break;case"Enter":this.selectItem(e)}},createOption(e,t){const i=document.createElement("li");i.id=`option-${t}`,i.className="suggestion-option",i.textContent=e,i.addEventListener("mouseover",(()=>this.updateIndex(t))),i.addEventListener("click",this.selectItem),this.suggestionsEle.appendChild(i)},updateIndex(e){const t=this.CURRENT_INDEX;this.CURRENT_INDEX=e,this.suggestionsEle.setAttribute("aria-activedescendant",String(this.CURRENT_INDEX));const i=this.suggestionsEle.querySelector(`#option-${t}`),o=this.suggestionsEle.querySelector(`#option-${this.CURRENT_INDEX}`);i&&i.classList.remove("current"),o&&o.classList.add("current")},selectItem(e){const t=this.FILTERED[this.CURRENT_INDEX];if(!t)return;const i=new CustomEvent("update_field_value",{detail:{input_class:this.input_class,val:t}});this.searchInput.dispatchEvent(i),this.closeSuggestions()},openSuggestions(){var e=this.parent_DIV.getBoundingClientRect(),t=Number(e.left+window.pageXOffset),i=Number(e.top+window.pageYOffset)+30;this.suggestionsEle.hidden=!1,this.suggestionsEle.style.visibility="visible",this.suggestionsEle.style.left=t+"px",this.suggestionsEle.style.top=i+"px",this.parent_DIV.setAttribute("aria-expanded",String(!0)),window.addEventListener("click",this.closeSuggestions)},closeSuggestions(){this.hideSuggestions(),this.searchInput.focus()},hideSuggestions(){this.CURRENT_INDEX=-1,this.suggestionsEle.hidden=!0,this.suggestionsEle.style.visibility="hidden",this.parent_DIV.setAttribute("aria-expanded",String(!1)),window.removeEventListener("click",this.closeSuggestions)},hanldFocusOut(e){this.suggestionsEle.hidden||setTimeout((()=>{this.hideSuggestions()}),1e3)},init(){return n(this,void 0,void 0,(function*(){yield this.$nextTick();let e=document.querySelector("."+this.input_class);if(!e)return;const t=document.createElement("ul");t.setAttribute("id",this.suggestions_id),t.setAttribute("class","sugg"),document.body.appendChild(t);const i=document.getElementById(this.parent_id);i&&(this.parent_DIV=i,this.searchInput=e,this.suggestionsEle=t,this.searchInput.addEventListener("blur",this.hanldFocusOut),this.searchInput.addEventListener("focusout",this.hanldFocusOut),this.searchInput.addEventListener("input",this.handleInput),this.parent_DIV.addEventListener("keydown",this.handleKeyDown),window.addEventListener("scroll",this.hideSuggestions,!0))}))}},mounted:function(){this.suggestions_id=this.input_class+"_suggestions",this.init()},unmounted:function(){window.removeEventListener("scroll",this.hideSuggestions,!0);let e=document.querySelector("."+this.input_class);e&&(e.removeEventListener("input",this.handleInput),this.searchInput.removeEventListener("blur",this.hanldFocusOut),this.searchInput.removeEventListener("focusout",this.hanldFocusOut));const t=document.getElementById(this.parent_id);t&&t.removeEventListener("keydown",this.handleKeyDown)}});var d=i(18186),c=i(7518),u=i.n(c);const h=r,m=h;u()(r,"components",{QTr:d.Z})},93188:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var o=i(83673),s=i(62323);const a={class:"on-left"},l={key:0,class:"on-right"};function n(e,t,i,n,r,d){return(0,o.wg)(),(0,o.iD)("div",{id:"version",target:"_blank",onClick:t[0]||(t[0]=t=>e.goHelp()),color:"white",class:"cursor-pointer row justify-center",style:{"font-size":"11px"}},[(0,o._)("p",a,"DocBits Version "+(0,s.zw)(e.app_version),1),this.$route.path.includes("setting")?((0,o.wg)(),(0,o.iD)("p",l,"API Version "+(0,s.zw)(e.api_version),1)):(0,o.kq)("",!0)])}var r=i(61959),d=i(12699),c=i(80579),u=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const h=(0,o.aZ)({name:"Footer",setup(){return{app_version:(0,r.iH)("0.0.0"),api_version:(0,r.iH)("0.0.0")}},mounted:function(){this.getApiVersion()},methods:{getApiVersion(){return u(this,void 0,void 0,(function*(){yield c.lk.getApiVersion().then((e=>{1==e.success&&(this.api_version=e.version)}))}))},goHelp(){d.RY&&window.open(d.RY)}}});var m=i(74260);const p=(0,m.Z)(h,[["render",n]]),_=p},9472:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var o=i(83673),s=i(62323);const a={class:"error"},l={class:"row justify-center items-center q-ma-lg"},n={class:"col-6 inline-block"},r=(0,o._)("div",{class:"error-heading"},"Shoot!",-1),d={class:"text-h2"},c={class:"text-h5"},u=(0,o._)("div",{class:"col-4 error-img inline-block"},[(0,o._)("img",{src:"error.svg",alt:"Error Image"})],-1);function h(e,t,i,h,m,p){return(0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",l,[(0,o._)("div",n,[r,(0,o._)("div",d,(0,s.zw)(e.heading),1),(0,o._)("div",c,(0,s.zw)(e.$t("errors.error_code"))+": "+(0,s.zw)(e.status_code),1),(0,o.WI)(e.$slots,"default")]),u])])}const m=(0,o.aZ)({mixins:[],props:{heading:{type:String,default:""},status_code:{type:String,default:"500"}},data(){return{}},methods:{}});var p=i(74260);const _=(0,p.Z)(m,[["render",h]]),g=_},65864:(e,t,i)=>{"use strict";i.d(t,{Z:()=>O});var o=i(83673),s=i(62323);const a=e=>((0,o.dD)("data-v-3c00c708"),e=e(),(0,o.Cn)(),e),l={key:0,class:"q-dialog fullscreen no-pointer-events q-dialog--modal banner-parent"},n=a((()=>(0,o._)("div",{class:"q-dialog__backdrop fixed-full","aria-hidden":"true",style:{"--q-transition-duration":"300ms"}},null,-1))),r={class:"error-banner row q-dialog__inner all-pointer-events"},d={class:"left-side"},c=(0,o.Uk)(" Dashboard "),u={class:"message"},h={key:0},m={key:1},p=a((()=>(0,o._)("span",{class:"right-side"},null,-1)));function _(e,t,i,a,_,g){const f=(0,o.up)("q-btn");return e.error?((0,o.wg)(),(0,o.iD)("div",l,[n,(0,o._)("div",r,[(0,o._)("span",d,[(0,o.Wm)(f,{class:"reload-doc text-weight-bold",to:"/dashboard"},{default:(0,o.w5)((()=>[c])),_:1})]),(0,o._)("span",u,[e.errors.hasOwnProperty(e.error_message)?((0,o.wg)(),(0,o.iD)("span",h,(0,s.zw)(e.$t(e.errors[e.error_message])),1)):((0,o.wg)(),(0,o.iD)("span",m,(0,s.zw)(e.$t(e.errors["general"])),1))]),p])])):(0,o.kq)("",!0)}var g=i(10321),f=i(60727);const w=(0,o.aZ)({el:"#app",mixins:[],components:{},data(){return{errors:{invalid:"pages.messages.INVALID_DOCUMENT",permission:"doc_permission_error",general:"pages.messages.ERROR_INTERNAL_OCCUR",invalid_status:"doc_invalid_status_error",error_status:"document_has_error_status"}}},methods:{},setup(){const e=(0,f.H_)(),{error:t,error_message:i}=(0,g.Jk)(e);return{error:t,error_message:i}}});var y=i(74260),b=i(46778),v=i(18186),x=i(2165),k=i(7518),C=i.n(k);const D=(0,y.Z)(w,[["render",_],["__scopeId","data-v-3c00c708"]]),O=D;C()(w,"components",{QDialog:b.Z,QTr:v.Z,QBtn:x.Z})},69797:(e,t,i)=>{"use strict";i.d(t,{Z:()=>D});var o=i(83673),s=i(62323);const a=e=>((0,o.dD)("data-v-127c4dd8"),e=e(),(0,o.Cn)(),e),l={key:0,class:"q-dialog fullscreen no-pointer-events q-dialog--modal banner-parent"},n=a((()=>(0,o._)("div",{class:"q-dialog__backdrop fixed-full","aria-hidden":"true",style:{"--q-transition-duration":"300ms"}},null,-1))),r={class:"update-banner row q-dialog__inner all-pointer-events"},d={class:"message"};function c(e,t,i,a,c,u){const h=(0,o.up)("q-btn");return e.app_update_warning?((0,o.wg)(),(0,o.iD)("div",l,[n,(0,o._)("div",r,[(0,o._)("span",d,[(0,o._)("span",null,[(0,o.Uk)((0,s.zw)(e.$t("new_version_available"))+" ",1),(0,o.Wm)(h,{style:{color:"grey-4"},class:"reload-page text-weight-bold",onClick:e.refreshPage},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("refresh")),1)])),_:1},8,["onClick"])])])])])):(0,o.kq)("",!0)}var u=i(10321),h=i(98303),m=i(60727),p=i(28741),_=i(23829),g=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const f=(0,o.aZ)({el:"#app",mixins:[p.Z],components:{},data(){return{}},methods:{refreshPage(){return g(this,void 0,void 0,(function*(){yield this.setOrgSettings(),this.clearStorageForRefresh(),yield h.W1.fetch(),_.b.updateVersion(),this.app_update_warning=!1,window.location.reload()}))}},setup(){const e=(0,m.VF)(),{setOrgSettings:t}=e,{app_update_warning:i}=(0,u.Jk)(e);return{app_update_warning:i,setOrgSettings:t}}});var w=i(74260),y=i(46778),b=i(18186),v=i(2165),x=i(7518),k=i.n(x);const C=(0,w.Z)(f,[["render",c],["__scopeId","data-v-127c4dd8"]]),D=C;k()(f,"components",{QDialog:y.Z,QTr:b.Z,QBtn:v.Z})},54275:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_e});var o=i(83673),s=i(62323),a=i(98880);const l={class:"row"},n={class:"row col-12"},r={class:"col-auto q-ml-md"},d={class:"ellipsis"},c={class:"col-auto"},u={class:"ellipsis"},h={class:"col"},m={class:"row full-width justify-center"},p={class:"col-3 q-ml-md"},_={class:"col-auto q-ml-md"},g={class:"col-3 q-ml-md"},f=(0,o._)("div",{class:"col-auto q-ml-auto"},null,-1),w={class:"q-pl-md q-pr-md q-pt-md"},y={class:"text-item"},b={class:"q-mt-md row full-width"},v=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function x(e,t,i,x,k,C){const D=(0,o.up)("q-tooltip"),O=(0,o.up)("q-icon"),E=(0,o.up)("q-select"),S=(0,o.up)("q-input"),I=(0,o.up)("q-btn"),T=(0,o.up)("savedSortByBadges"),L=(0,o.up)("q-checkbox"),M=(0,o.up)("ColumnOrderBy"),F=(0,o.up)("q-th"),q=(0,o.up)("q-tr"),Z=(0,o.up)("q-td"),R=(0,o.up)("q-table"),W=(0,o.up)("q-pagination"),A=(0,o.up)("q-card-section"),V=(0,o.up)("q-inner-loading");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(A,{style:{"min-width":"650px"}},{default:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o._)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.advance_filters,((t,i)=>((0,o.wg)(),(0,o.iD)("div",{key:i,class:"row mb-10"},[(0,o._)("div",r,[(0,o.Wm)(E,{square:"",outlined:"",class:"ms-select",clearable:"",modelValue:t["field"],"onUpdate:modelValue":e=>t["field"]=e,options:e.tableColumns,"emit-value":"","map-options":""},{append:(0,o.w5)((()=>[t["validate_field_name"]?((0,o.wg)(),(0,o.j4)(O,{key:0,flat:"",dense:"",name:"error",color:"red"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,o.kq)("",!0)])),"selected-item":(0,o.w5)((e=>[(0,o._)("div",d,(0,s.zw)(e.opt.label),1)])),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),(0,o._)("div",c,[(0,o.Wm)(E,{square:"",outlined:"",class:"ms-select ms-select-operator left-border-none",clearable:"",modelValue:t["operator"],"onUpdate:modelValue":e=>t["operator"]=e,options:e.search_operators,"emit-value":"","map-options":""},{append:(0,o.w5)((()=>[t["validate_operator"]?((0,o.wg)(),(0,o.j4)(O,{key:0,flat:"",dense:"",name:"error",color:"red"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,o.kq)("",!0)])),"selected-item":(0,o.w5)((e=>[(0,o._)("div",u,(0,s.zw)(e.opt.label),1)])),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),(0,o._)("div",h,[(0,o.Wm)(S,{borderless:"",square:"",modelValue:t["search_text"],"onUpdate:modelValue":e=>t["search_text"]=e,onKeyup:(0,a.D2)(e.searchBySelectedColumns,["enter"]),class:(0,s.C_)("ms-search-input left-border-none "+(t["validate"]?"column-error-border":""))},{append:(0,o.w5)((()=>[1==t["validate"]?((0,o.wg)(),(0,o.j4)(O,{key:0,flat:"",dense:"",name:"error",color:"red"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,o.kq)("",!0)])),after:(0,o.w5)((()=>[])),_:2},1032,["modelValue","onUpdate:modelValue","onKeyup","class"])]),(0,o.Wm)(I,{class:"q-ml-sm",icon:"close",onClick:t=>e.removeFilter(i),flat:"",round:"",dense:""},null,8,["onClick"])])))),128))])]),(0,o._)("div",m,[(0,o._)("div",p,[(0,o.Wm)(I,{color:"primary",unelevated:"",class:"btns primary-color",onKeyup:(0,a.D2)(e.searchBySelectedColumns,["enter"]),label:e.$t("pages.user.search"),onClick:e.searchBySelectedColumns},null,8,["onKeyup","label","onClick"])]),(0,o._)("div",_,[(0,o.Wm)(I,{square:"",flat:"",class:"btns",icon:"filter_alt",label:e.$t("Add"),onClick:e.addNewAdvanceSearchRow},{default:(0,o.w5)((()=>[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("add_new_filter")),1)])),_:1})])),_:1},8,["label","onClick"])]),(0,o._)("div",g,[(0,o.Wm)(I,{color:"primary",unelevated:"",class:"float-right btns",label:e.$t("pages.screen2a.proceed"),onClick:t[0]||(t[0]=t=>e.selectedRowProceed()),disable:e.disableSelectionButton},null,8,["label","disable"])]),f]),(0,o.Wm)(T),(0,o.Wm)(L,{class:"all-columns q-mr-md",label:e.$t("display_all_columns"),modelValue:e.show_all_columns,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.show_all_columns=t),t[2]||(t[2]=t=>{e.showAllColumns(t)})],size:"30px"},null,8,["label","modelValue"]),(0,o._)("div",w,[(0,o.Wm)(R,{rows:e.tableRows,columns:e.tableColumns,"row-key":"id",selection:"single",selected:e.selectedRow,"onUpdate:selected":t[3]||(t[3]=t=>e.selectedRow=t),"table-header-style":{},loading:e.loading,"hide-bottom":"",flat:"",class:"dashboard-table-style dashboard-text-color",style:{overflow:"auto",height:"400px"},"rows-per-page-options":[0],onSelection:e.onRowSelection,"no-data-label":e.$t("no_data_found")},{header:(0,o.w5)((t=>[(0,o.Wm)(q,{props:t},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(e=>((0,o.wg)(),(0,o.j4)(F,{key:e.name,props:t},{default:(0,o.w5)((()=>[(0,o._)("span",y,(0,s.zw)(e.label),1),(0,o.Wm)(M,{column_name:e.field},null,8,["column_name"])])),_:2},1032,["props"])))),128))])),_:2},1032,["props"]),0==e.tableRows.length?((0,o.wg)(),(0,o.j4)(q,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{colspan:"20",class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("no_data_found")),1)])),_:1})])),_:1})):(0,o.kq)("",!0)])),body:(0,o.w5)((t=>[(0,o.Wm)(q,{class:"cursor-pointer",props:t,onClick:e=>t.selected=!t.selected,onDblclick:i=>e.dblClickSelect(t.row)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(e=>((0,o.wg)(),(0,o.j4)(Z,{key:e.name,props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.value),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props","onClick","onDblclick"])])),_:1},8,["rows","columns","selected","loading","onSelection","no-data-label"]),(0,o._)("div",b,[e.total_pages>1?((0,o.wg)(),(0,o.j4)(W,{key:0,modelValue:e.current_page,"onUpdate:modelValue":t[4]||(t[4]=t=>e.current_page=t),max:e.total_pages,"max-pages":6,"direction-links":"",unelevated:"",color:"black","active-color":"black",class:"doc2-pagination q-mb-md q-ml-auto q-mr-auto",onClick:t[5]||(t[5]=t=>e.nexPageClicked())},null,8,["modelValue","max"])):(0,o.kq)("",!0)])])])),_:1}),(0,o.Wm)(V,{showing:e.loading},{default:(0,o.w5)((()=>[v])),_:1},8,["showing"])],64)}var k=i(25616),C=i(11185),D=i(10321),O=i(77378),E=i(61959),S=i(29938),I=i(80579),T=i(9273),L=i(91777),M=i(60727),F=i(28239);const q={class:"orderByParentSpan"},Z=["data-name"],R=["data-name"];function W(e,t,i,a,l,n){return(0,o.wg)(),(0,o.iD)("span",q,[(0,o._)("span",{class:(0,s.C_)(["up-arrow orderBy absolute cursor-pointer",e.is_order_by_selected("asc")?"selected":""]),"data-name":e.column_name,"data-direction":"asc",onClick:t[0]||(t[0]=t=>e.OrderBy("asc"))},null,10,Z),(0,o._)("span",{class:(0,s.C_)(["down-arrow orderBy absolute cursor-pointer",e.is_order_by_selected("desc")?"selected":""]),"data-name":e.column_name,"data-direction":"desc",onClick:t[1]||(t[1]=t=>e.OrderBy("desc"))},null,10,R)])}const A=(0,o.aZ)({mixins:[],props:{column_name:{type:String,required:!0}},components:{},methods:{is_order_by_selected(e){return Boolean(this.orderByMap.has(this.column_name)&&this.orderByMap.get(this.column_name)==e)},OrderBy(e){this.orderByMap.has(this.column_name)&&this.orderByMap.get(this.column_name)==e?this.orderByMap.delete(this.column_name):this.orderByMap.set(this.column_name,e),this.saveOrderByColumns(this.master_lookup_type),this.triggerApplyFilters()},triggerApplyFilters(){const e=new CustomEvent("ms_search",{});document.dispatchEvent(e)}},setup(){const e=(0,M.fI)(),{orderByMap:t,master_lookup_type:i}=(0,D.Jk)(e),{saveOrderByColumns:o}=e;return{master_lookup_type:i,saveOrderByColumns:o,orderByMap:t}}});var V=i(74260);const z=(0,V.Z)(A,[["render",W],["__scopeId","data-v-f2bc1a00"]]),B=z;var N=i(44074);const P={class:"saved-filter-badge row q-mt-sm q-ml-md"},U={key:0};function j(e,t,i,a,l,n){const r=(0,o.up)("q-icon"),d=(0,o.up)("q-badge");return(0,o.wg)(),(0,o.iD)("div",P,[e.orderByMap.size>0?((0,o.wg)(),(0,o.iD)("span",U,(0,s.zw)(e.$t("sort_by")),1)):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.orderByMap,(([t,i])=>((0,o.wg)(),(0,o.j4)(d,{key:t,rounded:"",color:"primary",class:"q-mr-sm capitalize"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.column_ms_mapping[t])+" : "+(0,s.zw)(i)+" ",1),(0,o.Wm)(r,{name:"close",color:"white",class:"q-ml-xs cursor-pointer",onClick:i=>e.removeFilter(t)},null,8,["onClick"])])),_:2},1024)))),128))])}const H=(0,o.aZ)({props:{},methods:{removeFilter(e){this.orderByMap.delete(e),this.triggerApplyFilters()},triggerApplyFilters(){const e=new CustomEvent("ms_search",{});document.dispatchEvent(e)}},setup(){const e=(0,M.fI)(),{orderByMap:t,column_ms_mapping:i}=(0,D.Jk)(e);return{column_ms_mapping:i,orderByMap:t}}});var $=i(69721),Q=i(24554),Y=i(7518),J=i.n(Y);const K=(0,V.Z)(H,[["render",j]]),G=K;J()(H,"components",{QBadge:$.Z,QIcon:Q.Z});var X=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const ee=(0,o.aZ)({mixins:[O.Z,L.Z],props:{},watch:{quickSearchText:{handler:function(e,t){this.updateFilters()}}},components:{ColumnOrderBy:B,savedSortByBadges:G},data(){return{columnListPreferenc:[]}},mounted:function(){this.populate_row_to_view=!1,this.validateViewVariables(),this.getOrderByColumns(this.master_lookup_type),this.searchByField(),window.msl=this,document.addEventListener("ms_search",this.searchEvent)},unmounted:function(){document.removeEventListener("ms_search",this.searchEvent)},methods:{removeFilter(e){delete this.advance_filters[e]},searchEvent(){this.searchBySelectedColumns()},addNewAdvanceSearchRow(){const e=(0,C.Z)();this.advance_filters[e]={field:null,search_text:"",validate:!1,operator:this.search_operator,validate_field_name:!1}},updateFilters(){for(let[e,t]of Object.entries(this.advance_filters)){const i=t.hasOwnProperty("field")&&t.field,o=t.search_text&&t.search_text.length>0;if(!i&&!o){delete this.advance_filters[e];continue}const s=t.hasOwnProperty("operator")&&t.operator;s||(t.operator=this.search_operator)}},validateSearchFilters(){let e=!0;for(let[t,i]of Object.entries(this.advance_filters)){i.validate=!1,i.validate_field_name=!1;const t=i.hasOwnProperty("field")&&i.field,o=i.search_text&&i.search_text.length>0;!t&&o&&(i.validate_field_name=!0,e=!1),!o&&t&&(i.validate=!0,e=!1)}return e},makeSearchJsonFromFilters(){let e=[];for(let[t,i]of Object.entries(this.advance_filters))i.search_text&&e.push({field:i.field.field,operator:i.operator,value:i.search_text});return e},prepareFiltersForApiCall(){let e={};e["data_type"]=this.master_lookup_type,e["filter_data_json"]="";const t=this.makeSearchJsonFromFilters();return t.length>0&&(e["filter_data_json"]=JSON.stringify({filters:t})),e},onKeyup(e){"Enter"==e.key&&this.searchBySelectedColumns()},searchBySelectedColumns(){return X(this,void 0,void 0,(function*(){try{if(this.loading=!0,this.updateFilters(),!1===this.validateSearchFilters())return;this.tableRows=[],this.resetPagination();const e=this.prepareFiltersForApiCall();this.search_params=e,yield this.fetchFromServer(e)}catch(e){}finally{this.loading=!1}}))},setInitialSearch(){for(let[e,t]of Object.entries(this.advance_filters)){let e=t.fuzzy_field.split(":")||{};const i=this.tableColumns.find((t=>t.field.toLowerCase()==e[1].toLowerCase()));i&&(t.field=i,t.operator||(t.operator=this.search_operator))}},searchByField(){return X(this,void 0,void 0,(function*(){try{if(this.loading=!0,this.getColumnSortPreference(),this.populateTableColumns(),yield this.setDefaultSearchOperator(),this.setInitialSearch(),this.updateFilters(),!1===this.validateSearchFilters())return;const e=this.prepareFiltersForApiCall();this.search_params=e,yield this.fetchFromServer(e)}catch(e){}finally{this.loading=!1}}))},populateTableColumns(){const e=this.getColumnsByType(this.master_lookup_type);if(e.length>0)return this.tableColumns=e,void this.applyColumnSort();this.setTableColumns()},setTableColumns(){if(this.tableColumns=[],"supplier"==this.master_lookup_type)return this.loadSupplierColumns(),this.tableColumns=this.getColumnsByType(this.master_lookup_type),void this.applyColumnSort();this.getColumnsfromFieldsMapping()},getColumnsfromFieldsMapping(){const e=this.master_data_fields_map.get(this.master_lookup_type);e.forEach(((e,t)=>{let i=this.getColumnLabel(t);this.column_ms_mapping[e]=t,this.tableColumns.push({name:t,label:i,field:e,align:"left"})})),this.applyColumnSort(),this.setColumnsByType(this.master_lookup_type,this.tableColumns)},getColumnLabel(e){let t=this.displayFieldLabelForMedi(this.model[e]);return t==e&&(t=(0,N.TY)(t)),t},fetchFromServer(e){return X(this,void 0,void 0,(function*(){try{this.loading=!0;const t={};t["data_type"]=e["data_type"],t["skip"]=this.offset,t["limit"]=this.page_size;const i=this.makeOrderByForCall();i.length>0&&(t["sort_order_json"]=JSON.stringify(i));let o={};if(o=yield I.MG.getData_V2(t,e["filter_data_json"]),0==o.success)throw o;if(!o.data||!Array.isArray(o.data)||0==o.data.length)return;this.tableRows=[],o.hasOwnProperty("total_records")&&(this.total_records=o.total_records,this.setTotalPages()),this.populateRows(o.data)}catch(t){const e=T.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.loading=!1}}))},nexPageClicked(){return X(this,void 0,void 0,(function*(){try{this.calculateOffset(),yield this.fetchFromServer(this.search_params)}catch(e){const t=T.w.getErrorMessage(e);this.showErrorToast(t)}}))},resetPagination(){this.total_pages=0,this.current_page=1,this.total_records=0,this.offset=0},setTotalPages(){this.total_pages=Math.ceil(this.total_records/this.page_size)},calculateOffset(){this.offset=this.page_size*(this.current_page-1)},populateRows(e){Array.from(e).forEach(((e,t)=>{let i={};for(let[o,s]of Object.entries(e))o=o.toLowerCase(),i[o]=s,"last_modified_on"===o&&(i[o]=s?k.ZP.formatDate(String(s),"YYYY-MM-DD HH:mm:ss"):"-");"supplier"==this.master_lookup_type&&(i["id"]=i["id"]?i["id"]:e["supplier_number"]),this.tableRows.push(i)}))},selectedRowProceed(){let e=JSON.parse(JSON.stringify(this.selectedRow));this.selected_row=JSON.stringify(e[0]),this.selectedRow=[],this.populate_row_to_view=!0,this.disableSelectionButton=!0},onRowSelection(e){e.added?this.disableSelectionButton=!1:this.disableSelectionButton=!0},validateViewVariables(){this.inital_filters=JSON.parse(JSON.stringify(this.advance_filters)),this.master_data_fields_map.size,(0,S.fg)(this.model)},showAllColumns(e){0!=this.tableRows.length&&(e?this.populateTableColumnsFromRow():this.setTableColumns())},populateTableColumnsFromRow(){const e=this.tableRows[0];for(const[t,i]of Object.entries(e)){if(this.column_ms_mapping.hasOwnProperty(t))continue;let e=t;e="last_modified_on"==t?this.$t(t):(0,N.TY)(e),this.tableColumns.push({name:t,label:e,field:t,align:"left"})}this.applyColumnSort()},dblClickSelect(e){this.selected_row=JSON.stringify(e),this.selectedRow=[],this.populate_row_to_view=!0,this.disableSelectionButton=!0},getColumnSortPreference(){this.columnListPreferenc=JSON.parse(this.getColumnPreference(this.master_lookup_type))},applyColumnSort(){this.tableColumns=this.sortColumns(this.columnListPreferenc,this.tableColumns)},setDefaultSearchOperator(){return X(this,void 0,void 0,(function*(){const e=String(this.master_lookup_type+this.search_op_key_postfix).toUpperCase();this.search_operator=yield(0,F.$8)(e),this.search_operator||(this.search_operator=this.default_operator)}))},makeOrderByForCall(){return(0,N.Lm)(this.orderByMap)}},setup(){const e=(0,M.fI)(),{model:t,populate_row_to_view:i,master_data_fields_map:o,selected_row:s,column_ms_mapping:a,advance_filters:l,master_lookup_type:n,search_operators:r,search_op_key_postfix:d,orderByMap:c,default_operator:u,inital_filters:h}=(0,D.Jk)(e),{setColumnsByType:m,loadSupplierColumns:p,getColumnsByType:_,getOrderByColumns:g}=e,f=(0,M.UU)(),{sortColumns:w,getColumnPreference:y}=f;return{default_operator:u,orderByMap:c,getOrderByColumns:g,search_op_key_postfix:d,sortColumns:w,getColumnsByType:_,setColumnsByType:m,getColumnPreference:y,loadSupplierColumns:p,model:t,advance_filters:l,master_lookup_type:n,column_ms_mapping:a,populate_row_to_view:i,selected_row:s,master_data_fields_map:o,search_operators:r,oldSearchVal:(0,E.iH)(""),tableColumns:(0,E.iH)([]),loading:(0,E.iH)(!1),tableRows:(0,E.iH)([]),selectedRow:(0,E.iH)([]),disableSelectionButton:(0,E.iH)(!0),show_all_columns:(0,E.iH)(!1),master_lookup_columns:(0,E.iH)({}),search_params:(0,E.iH)({}),current_page:(0,E.iH)(1),total_pages:(0,E.iH)(0),offset:(0,E.iH)(0),page_size:(0,E.iH)(10),total_records:(0,E.iH)(0),searchable_columns_list:(0,E.iH)([]),search_operator:(0,E.iH)(""),inital_filters:h}}});var te=i(25589),ie=i(72448),oe=i(5363),se=i(64689),ae=i(2165),le=i(65735),ne=i(17132),re=i(18186),de=i(92414),ce=i(83884),ue=i(87300),he=i(66941),me=i(86115);const pe=(0,V.Z)(ee,[["render",x]]),_e=pe;J()(ee,"components",{QCardSection:te.Z,QSelect:ie.Z,QIcon:Q.Z,QTooltip:oe.Z,QInput:se.Z,QBtn:ae.Z,QCheckbox:le.Z,QTable:ne.Z,QTr:re.Z,QTh:de.Z,QTd:ce.Z,QPagination:ue.Z,QInnerLoading:he.Z,QField:me.Z})},22879:(e,t,i)=>{"use strict";i.d(t,{Z:()=>C});var o=i(83673);const s={class:"row"},a={class:"col-12 q-mb-sm"},l={class:"col-12 q-mb-sm"};function n(e,t,i,n,r,d){const c=(0,o.up)("q-toolbar-title"),u=(0,o.up)("q-btn"),h=(0,o.up)("q-toolbar"),m=(0,o.up)("docTypeDropdown"),p=(0,o.up)("LanguageDropdown"),_=(0,o.up)("q-card-section"),g=(0,o.up)("q-card-actions"),f=(0,o.up)("q-card"),w=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(f,{style:{width:"500px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(c),(0,o.wy)((0,o.Wm)(u,{flat:"",round:"",dense:"",icon:"close",onClick:e.resetClassification},null,8,["onClick"]),[[w]])])),_:1}),(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o._)("div",a,[(0,o.Wm)(m,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])]),(0,o._)("div",l,[(0,o.Wm)(p,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])])])])),_:1}),e.isReadOnly?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(g,{key:0,align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(u,{flat:"",label:e.$t("cancel"),color:"primary",onClick:e.resetClassification},null,8,["label","onClick"]),[[w]]),(0,o.wy)((0,o.Wm)(u,{flat:"",label:e.$t("proceed"),color:"primary",onClick:e.triggerNewClassification},null,8,["label","onClick"]),[[w]])])),_:1}))])),_:1})}var r=i(48820),d=i(53108),c=i(60727),u=i(10321);const h=(0,o.aZ)({el:"#app",mixins:[],components:{docTypeDropdown:r.Z,LanguageDropdown:d.Z},props:{isReadOnly:{type:Boolean,default:!0}},mounted:function(){},methods:{resetClassification(){this.resetStore(),this.setDocTypeAndLanguageOrigin()},triggerNewClassification(){this.trigger_classification=!0}},setup(){const e=(0,c.Dg)(),{resetStore:t}=e,{trigger_classification:i,reset_classification:o}=(0,u.Jk)(e),s=(0,c.H_)(),{setDocTypeAndLanguageOrigin:a}=s;return{resetStore:t,trigger_classification:i,reset_classification:o,setDocTypeAndLanguageOrigin:a}}});var m=i(74260),p=i(10151),_=i(39570),g=i(13747),f=i(2165),w=i(25589),y=i(99367),b=i(60677),v=i(7518),x=i.n(v);const k=(0,m.Z)(h,[["render",n]]),C=k;x()(h,"components",{QCard:p.Z,QToolbar:_.Z,QToolbarTitle:g.Z,QBtn:f.Z,QCardSection:w.Z,QCardActions:y.Z}),x()(h,"directives",{ClosePopup:b.Z})},24877:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Se});var o=i(83673),s=i(62323),a=i(98880);const l=e=>((0,o.dD)("data-v-7167db9b"),e=e(),(0,o.Cn)(),e),n={class:"mb-4 p-t-b-6 image_control_panel"},r={class:"row justify-start panel-right"},d=l((()=>(0,o._)("img",{width:"24",height:"24",src:"save.svg"},null,-1))),c={class:"col-auto"},u={key:0,class:"col-auto"},h={class:"col-auto"},m=l((()=>(0,o._)("img",{width:"24",height:"24",src:"full_screen.svg"},null,-1))),p={class:"col-auto q-ml-auto medi-classification"},_={key:0,class:"full-width"},g=["data-group-id"],f={class:"row q-pl-sm q-pr-sm"},w={class:"col-12 secondary-c-text text-h6 text-weight-bold"},y=l((()=>(0,o._)("img",{width:"24",src:"card-checklist.svg"},null,-1))),b=["data-fields-group-name"],v={key:0,class:"full-width v-m-10 height-7"},x={class:""};function k(e,t,i,l,k,C){const D=(0,o.up)("q-tooltip"),O=(0,o.up)("q-btn"),E=(0,o.up)("q-icon"),S=(0,o.up)("scriptBtn"),I=(0,o.up)("autoTesting"),T=(0,o.up)("DocumentClassification"),L=(0,o.up)("q-separator"),M=(0,o.up)("masterDataLookup"),F=(0,o.up)("dialog-draggable"),q=(0,o.up)("export-dialog"),Z=(0,o.up)("q-dialog"),R=(0,o.up)("Loader"),W=(0,o.up)("q-spinner-hourglass"),A=(0,o.up)("q-inner-loading");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.isModelReady()?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",n,[(0,o._)("div",r,[(0,o.Wm)(O,{flat:"",class:"pr-6 pl-6",onClick:e.saveData},{default:(0,o.w5)((()=>[d,(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("save")),1)])),_:1})])),_:1},8,["onClick"]),(0,o._)("div",c,[(0,o.kq)("",!0)]),!0===this.is_admin?((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)(S)])):(0,o.kq)("",!0),(0,o._)("div",h,[(0,o.Wm)(I)]),e.renderOpenWindoIcon?((0,o.wg)(),(0,o.j4)(O,{key:1,flat:"",class:"pr-6 pl-6",onClick:e.openComponentInSaparateWindow},{default:(0,o.w5)((()=>[m,(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("medi.new_window")),1)])),_:1})])),_:1},8,["onClick"])):(0,o.kq)("",!0),(0,o._)("div",p,[(0,o.Wm)(T,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])])])]),(0,o._)("div",{class:(0,s.C_)(["scrolle-y back-white",e.renderOpenWindoIcon?"full-height":"right-content-height"]),"data-section":"fields",id:"field_scrolle"},[e.renderComponent?((0,o.wg)(),(0,o.iD)("div",_,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.formLayout,((t,i)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:`div-${i}`},[t.is_panel_section_group===e.isPanelSection?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,s.C_)(["full-width q-mb-lg",t.is_stcky_group?" validation-sticky-area":"not-sticky-area"]),"data-group-id":i},[(0,o._)("div",f,[(0,o._)("div",w,[t.title?((0,o.wg)(),(0,o.j4)(E,{key:0,class:"cursor-pointer",size:"sm",onClick:t=>e.validateAllSectionFields(i)},{default:(0,o.w5)((()=>[y,(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("validate_all_fields")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,s.zw)(t.title),1)])]),(0,o._)("div",{class:"full-width","data-fields-group-name":t.name},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.rows,((t,a)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:`div-${a}`},[t.is_hidden||void 0!=t.visibile&&!t.visibile?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:0,class:"display-block medi-field-padding",style:(0,s.j5)("width:"+e.getElementWidth(t)+"%")},[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.fieldType),{currentField:t,isReadOnly:e.isReadOnly,fieldName:t.name,groupIndex:i,onInputClicked:e.htmlElementClick,onInputValueChanges:e.onInputValueChanges,onApplyFuzzySearch:e.masterDataSearchByField,onUpdateModel:e.updateModel},null,8,["currentField","isReadOnly","fieldName","groupIndex","onInputClicked","onInputValueChanges","onApplyFuzzySearch","onUpdateModel"]))],4))],64)))),128))],8,b),t.is_stcky_group?((0,o.wg)(),(0,o.iD)("div",v)):(0,o.kq)("",!0)],10,g)):(0,o.kq)("",!0)],64)))),128))])):(0,o.kq)("",!0),(0,o.Wm)(L,{size:"2px",class:"q-mt-lg q-ma-sm"})],2),(0,o._)("div",x,[(0,o.Wm)(F,{modelValue:e.fuzzyDialog,"onUpdate:modelValue":t[0]||(t[0]=t=>e.fuzzyDialog=t),seamless:"","full-width":"",position:"right",persistent:"",onKeydown:(0,a.D2)(e.closeMsDialog,["esc"]),title:e.$t("pages.screen2a.validation"),onOnHide:e.closeMsDialog,width:e.master_data_popup_width},{default:(0,o.w5)((()=>[(0,o._)("div",{style:(0,s.j5)({width:e.master_data_popup_width+"px !important"})},[(0,o.Wm)(M)],4)])),_:1},8,["modelValue","onKeydown","title","onOnHide","width"])])],64)):(0,o.kq)("",!0),(0,o.Wm)(Z,{modelValue:e.display_config_dialog,"onUpdate:modelValue":t[1]||(t[1]=t=>e.display_config_dialog=t),position:"top",class:"export-dialog",persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(q)])),_:1},8,["modelValue"]),e.is_sep_view?((0,o.wg)(),(0,o.j4)(R,{key:1})):(0,o.kq)("",!0),(0,o.Wm)(A,{showing:e.script_loading},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{color:"primary",size:"6em"})])),_:1},8,["showing"])],64)}var C=i(30052),D=i.n(C),O=i(10321),E=i(77378),S=i(61959),I=i(78564),T=i(72113),L=i(45401),M=i(54268),F=i(98381),q=i(80579),Z=i(5029),R=i(91777),W=i(29938),A=i(49405),V=i(7153),z=i(11185),B=i(93426),N=i(75592),P=i(41891),U=i(54275),j=i(60727),H=i(57765),$=i(9062),Q=i(40386),Y=i(27728),J=i(49629),K=i(39180),G=i(71814),X=i(83678),ee=i(49836),te=i(56040),ie=i(85854),oe=i(43783),se=i(3227),ae=i(9273),le=i(91949),ne=i(67721),re=i(26424),de=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const ce=document.querySelector.bind(document);let ue=new Map;const he=(0,o.aZ)({el:"#app",mixins:[L.Z,I.Z,se.Z,E.Z,F.Z,B.Z,R.Z],props:{renderOpenWindoIcon:{type:Boolean,default:!1},isPanelSection:{type:Boolean,default:!1}},emits:["removeOldMapiingsAndDrawNew","showConnectionFromField","setSplitterModel","handleScroll","setApiData","setDocVersion","getImageDetails"],components:{ExportDialog:N.Z,autoTesting:Z.Z,Loader:T.Z,Label:$.Z,CheckBox:Q.Z,TextInput:K.Z,ExportButton:Y.Z,MultiCheckBox:G.Z,ExtractedTable:X.Z,TableOfCheckboxes:ee.Z,HorizontalSeparator:te.Z,masterDataLookup:U.Z,scriptBtn:H.Z,DocumentClassification:oe.Z,dialogDraggable:ne.Z,PoMatchButton:J.Z},watch:{config_saved:{handler:function(e,t){!0===t&&!1===e||(this.display_config_dialog=!1)}},populate_row_to_view:{handler:function(e,t){0!=e&&this.populateMasterDataFields()}}},data(){return{page:1,docId:"",imageWidth:0,imageHeight:0,connectionId:"",itemsData:{},conversionFields:[],debounceScriptCalculateFunc:{},highlightFieldsMode:(0,S.iH)(!1),excluded_field_types:["Label","ExportButton","HorizontalSeparator"]}},mounted:function(){this.isFormBuilderMode=!1,this.formBuilderModel={},this.formBuilderConfigModel={},this.docId=this.$route.params.id,this.is_admin=(0,le.i5)(),this.isViewSeparateComponenet(),this.init(),window.MediFieldsView=this,document.addEventListener("script_calculate_func",this.scriptCalculateFuncWrapper),document.addEventListener("model_updated",this.updateModelAttribute),document.addEventListener("reload_tables",this.reloadTable),document.addEventListener("keydown",this.keydownEventWrapper),document.addEventListener("move_to_next_field",this.moveToNextFieldEvent),window.addEventListener("resize",this.windowResize)},unmounted:function(){document.removeEventListener("script_calculate_func",this.scriptCalculateFuncWrapper),document.removeEventListener("model_updated",this.updateModelAttribute),document.removeEventListener("reload_tables",this.reloadTable),document.removeEventListener("keydown",this.keydownEventWrapper)},methods:{reloadTable(){this.renderKey++},init(){return de(this,void 0,void 0,(function*(){this.is_sep_view&&this.get_cached_data_id===this.docId&&(yield this.setRecordFromCache()),P.at.includes(this.record.status)&&(this.isReadOnly=!0),yield this.getLayoutTemplateID(),yield this.getFormBuilderLayout(),this.populateListsAndValues(),this.isModelReady()?(this.renderComponent=!0,this.$emit("getImageDetails"),this.getOrgSettings(),this.createScriptCalculateDebounceFunc(),this.$nextTick((function(){this.viewLoadCompleted()}))):this.showErrorToast("Document does not have layout. Please contact administrator")}))},createScriptCalculateDebounceFunc(){this.debounceScriptCalculateFunc=(0,A.Z)((()=>{this.applyScript()}),3e3)},updateScriptRequest(){this.updateRequestId(),this.debounceScriptCalculateFunc.cancel()},createNewScriptRequest(){this.createScriptCalculateDebounceFunc(),this.debounceScriptCalculateFunc()},viewLoadCompleted(){const e=ce(".validation-sticky-area"),t=ce(".not-sticky-area");e&&t&&(t.style.paddingTop=e.clientHeight+20+"px"),this.focusFirstFieldOnGroup();const i=ce("#field_scrolle");i&&i.addEventListener("scroll",this.handleScroll)},prepareMediTable(e){if(this.formBuilderConfigModel[e.name]=Object.assign({},e),!this.record.tables||!this.record.tables[0]){this.record.tables=[];let t={name:e.name,rows:[]};return void(this.formBuilderModel[e.name]=Object.assign({},t))}let t={};this.record.tables.forEach((i=>{(i.name=e.name)&&(t=Object.assign({},i))})),this.formBuilderModel[e.name]=Object.assign({},t)},prepareMultiCheckBox(e,t,i){if(this.formBuilderConfigModel[e.name]=Object.assign({},e),!t)return this.formBuilderModel[i]=[],this.formBuilderModel[i].page="",this.formBuilderModel[i].color="",this.formBuilderModel[i].score="",this.formBuilderModel[i].value="",this.formBuilderModel[i].coords=[],this.formBuilderModel[i].groupList=[],this.formBuilderModel[i].confidence="",void(this.formBuilderModel[i].formatted_value="");t.highlight_field&&(t.highlight_field=!1,this.addFieldToHighlight(i)),this.formBuilderModel[i]=Object.assign({},t)},prepareCheckboxesTable(e,t,i){e.tableBodyRows.forEach(((e,o)=>{e.forEach(((e,o)=>{let s=e.name;i.hasOwnProperty(s)&&Object.assign(e,this.cleanLayoutSettings(i[s])),this.prepareModel(e,t[s],s)}))}))},makeModel(){return this.fieldListToHighlight=[],this.fields_tabindex_mapping={},new Promise(((e,t)=>{let i={};if(void 0!==this.record){this.record.fields.forEach(((e,t)=>{i[e.name]=e}));let e=this.getUpdatedFieldSettings(),t="";for(const[o,s]of this.formLayout.entries()){s.short_cut_key_2&&(t=s.short_cut_key_1+s.short_cut_key_2,this.groupShortCutMap.set(t,o));for(let t of s.rows){let o=t.hasOwnProperty("field_name")?t.field_name:t.name;t.fieldType!==ie.oh.TABLE_OF_CHECKBOXES?t.fieldType!==ie.oh.EXTRACTED_TABLE?t.fieldType!==ie.oh.MULTI_CHECK_BOX?(e.hasOwnProperty(o)&&(t=Object.assign(t,this.cleanLayoutSettings(e[o]))),this.prepareModel(t,i[o],o)):this.prepareMultiCheckBox(t,i[o],o):this.prepareMediTable(t):this.prepareCheckboxesTable(t,i,e)}}}e("done"),this.highlightFieldsMode&&setTimeout((()=>{this.highlightFields()}),500)}))},prepareModel(e,t,i){t?this.setColor(t,e):t=this.createEmptyField(i,e.input_type);let o=e.input_type?e.input_type:e.fieldType;if(this.cleanCheckboxValue(t,o.toLowerCase()),e.fuzzy_field&&null!=e.fuzzy_field){let t=e.fuzzy_field.split(":");const o=t[1].toLowerCase();if(ue.has(t[0]))ue.get(t[0]).set(i,o);else{let e=new Map;e.set(i,o),ue.set(t[0],e)}e.fuzzy_name=t[0]}e.hasOwnProperty("tabIndex")&&!(0,W.Jp)(e.tabIndex)||(e.tabIndex=0),t.highlight_field&&(t.highlight_field=!1,this.addFieldToHighlight(i)),this.formBuilderModel[i]=[],this.formBuilderConfigModel[i]=[],this.formBuilderModel[i]=Object.assign({},t),this.formBuilderConfigModel[i]=Object.assign({},e),this.setTabIndexInList(e),this.handleListofValues(i)},handleListofValues(e){this.formBuilderConfigModel[e].hasOwnProperty("list_of_values")&&this.addNameToLovList(this.formBuilderConfigModel[e].list_of_values)},addFieldToHighlight(e){this.fieldListToHighlight.push(e)},highlightFields(){var e;this.highlightFieldsMode=!1;for(const t of this.fieldListToHighlight){let i=ce("#"+t);(null===(e=i.parentElement)||void 0===e?void 0:e.classList.contains("q-td"))&&(i=i.parentElement),i&&(i.classList.add("light-yellow-with-effect"),setTimeout((()=>{i.classList.remove("light-yellow-with-effect")}),4e3))}},getUpdatedFieldSettings(){let e={},t=JSON.parse(JSON.stringify(this.record.layout.groups));return t.forEach(((t,i)=>{t.rows.forEach(((t,i)=>{t.forEach(((t,i)=>{let o=t.field_name;e[o]=t}))}))})),e},cleanLayoutSettings(e){return delete e.name,delete e.field,delete e.field_name,delete e.field_type,delete e.title,delete e.translation_key,e},setTabIndexInList(e){if(this.excluded_field_types.includes(e.fieldType)||1==e.is_readonly||1==e.is_hidden||1==e.isDisabled)return;let t=e.field_name||e.name;const i=Number(e.tabIndex);this.fields_tabindex_mapping.hasOwnProperty(i)||(this.fields_tabindex_mapping[i]=[]),this.fields_tabindex_mapping[i].push(t)},cleanCheckboxValue(e,t){"checkbox"!=t&&"CheckBox"!=e.fieldType||("true"==e.formatted_value||1==e.formatted_value||"Y"==e.formatted_value?e.formatted_value=!0:e.formatted_value=!1)},setColor(e,t){e.hasOwnProperty("is_valid")?"MD"==e.extraction_method?t.color="extraction_method-border-left":e.is_valid?t.color="success-border-left":t.color="error-border-left":t.color=""},setConversionFields(){this.conversionFields=this.getConversionFields()},getField(e){let t={};if(void 0!==this.record)for(const i in this.record.fields){let o=this.record.fields[i];if(o.name==e){t=o;break}}return t},createEmptyField(e,t){let i="checkbox"!=t&&"";return{confidence:0,name:e,value:i,formatted_value:i,content:i}},saveMediImageFields(){let e={};if(V.Z.has("table_data")&&null!=V.Z.getItem("table_data")&&""!=V.Z.getItem("table_data")){let t=V.Z.getItem("table_data");e=JSON.parse(t)}else e={columns:[],table_areas:[]}},prepareTableJson(){this.record["tables"]=[],Object.keys(this.formBuilderModel).forEach((e=>{this.formBuilderConfigModel[e].fieldType===ie.oh.EXTRACTED_TABLE?this.record.tables.push(Object.assign({},this.formBuilderModel[e])):this.formBuilderConfigModel[e].fieldType===ie.oh.MULTI_CHECK_BOX&&(this.record.fields.push(Object.assign({},this.formBuilderModel[e])),this.record.fields[this.record.fields.length-1].name=e)}))},saveData(){return de(this,void 0,void 0,(function*(){try{if(this.isReadOnly)return;this.prepareTableJson(),this.saveMediImageFields(),this.showLoading();const e=yield this.saveDocument(this.docId);if(!1===e.success)return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void this.showErrorToast(e.message);this.$emit("setDocVersion"),this.setDataToCache(),yield this.makeModel();const t=new CustomEvent("prepare_rows",{});document.dispatchEvent(t),this.$forceUpdate(),this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(e){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},exportData(){return de(this,void 0,void 0,(function*(){if(!this.isReadOnly)try{const e=yield this.confirmExportConfiguration();if(!e)return void(this.display_config_dialog=!0);yield this.callExportApi()}catch(e){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},confirmExportConfiguration(){return de(this,void 0,void 0,(function*(){let e,t=new FormData;t.append("doc_type",this.record.doc_type);let i=yield(0,M.O_)();const o=yield D().post(M.hi.export_configuration_existence,t,{headers:{Authorization:i}});return e=o.data.valid,e}))},validateRequiredFieldRules(){let e=!0;return this.record.hasOwnProperty("required_field_pairs")&&Array.isArray(this.record.required_field_pairs)&&0!=this.record.required_field_pairs.length?(Array.from(this.record.required_field_pairs).forEach((t=>{let i=!1;for(let e of t)this.formBuilderModel[e].formatted_value&&(i=!0);if(!i){e=!1;const i=this.getRequirdFieldsErrorMessage(t);for(let e of t)this.formBuilderModel[e].input_error=i}})),e):e},getRequirdFieldsErrorMessage(e){const t=[];for(let o of e)t.push(this.getLabelForFormBuilder(this.formBuilderConfigModel[o],"form_builder."));let i=this.$t("atleast_fill_one_field");return i=i.replace("#",t.join(", ")),i},callExportApi(){return de(this,void 0,void 0,(function*(){let e;try{if(yield this.validateExportData())return;let t=this.record;this.showLoading(),t.hasOwnProperty("table_data_copy")&&delete t["table_data_copy"];let i=new FormData;i.append("data",JSON.stringify(t));let o=yield(0,M.O_)();if(e=yield D().post(M.hi.validate_and_export+this.docId,i,{headers:{Authorization:o}}),!0===e.data.success)return yield this.dashboardFiltersAfterExport(),void this.routeToDashboard();this.showErrorToast(e.data.message),this.record=e.data.data,yield this.handleExportError()}catch(t){const e=ae.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.hideLoading()}}))},routeToDashboard(){this.$router.push("/dashboard")},validateExportData(){return de(this,void 0,void 0,(function*(){this.handleScroll(),this.updateFieldErrors();const e=this.setFieldErrors(!0),t=yield this.checkValidationError(),i=!this.validateRequiredFieldRules();return(e||t||i)&&this.focusFirstErrorField(),e||t||i}))},handleExportError(){return de(this,void 0,void 0,(function*(){this.setDataToCache(),this.$emit("setDocVersion"),yield this.makeModel();const e=this.setFieldErrors(!1);e&&this.focusFirstErrorField()}))},updateFieldErrors(){for(const[e,t]of Object.entries(this.formBuilderModel))this.formBuilderConfigModel[e].is_required&&t.formatted_value&&"REQUIRED"===t.validation_code&&(t.validation_code="")},setFieldErrors(e){let t=!1;for(const[i,o]of Object.entries(this.formBuilderModel)){if(this.formBuilderModel[i].input_error="",this.formBuilderConfigModel[i].is_required&&!o.formatted_value){t=!0,this.formBuilderModel[i].input_error=this.$t("field_required");continue}if(!o.validation_code||e&&P.s1.includes(o.validation_code))continue;let s=this.formBuilderModel[i].validation_message;s||(s=this.$t("pages.api_user_messages."+o.validation_code)),t=!0,this.formBuilderModel[i].input_error=s}return t},focusFirstErrorField(){let e="";for(const[t,i]of Object.entries(this.formBuilderModel))if(i.input_error){e=t;break}this.focusOnField(e)},checkValidationError(){return de(this,void 0,void 0,(function*(){let e=!1;for(const[t,i]of Object.entries(this.formBuilderModel)){if("TextInput"!==this.formBuilderConfigModel[t].fieldType)continue;let o=i.formatted_value;if(!o||""==o)continue;const s=this.formBuilderConfigModel[t];let a=!0,l="";({is_valid:a,input_error:l}=yield re.b.init(i,s)),a||(this.formBuilderModel[t].input_error=l,e=!0)}return e}))},isModelReady(){return 0!==(0,W.v7)(this.formBuilderModel)},isSelectedAreaDataReady(){return this.isSelectedAreaFieldsReady},getConfidence(e){return e?e<1?(100*+e.toFixed(2)).toFixed(0):+e.toFixed(2):""},getLowerConfidence(e){if(e.confidence&&e.score){let t=e.confidence<1?(100*e.confidence.toFixed(2)).toFixed(0):e.confidence.toFixed(2),i=e.score<=1?(100*e.score.toFixed(2)).toFixed(0):e.score.toFixed(2);return t=Number(t),i=Math.floor(Number(i)),t<i?t:i}return e.confidence?e.confidence<1?(100*e.confidence.toFixed(2)).toFixed(0):e.confidence.toFixed(2):null},openComponentInSaparateWindow(){this.setDataToCache();let e=this.$router.resolve({path:"/fields_sep_comp_v3/"+this.docId});window.open(e.href,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,left=500,width=1500,height=1000")},isViewSeparateComponenet(){this.$route.fullPath.match(/fields_sep_comp_v3/g)&&(this.is_sep_view=!0)},setCheckboxBackgroupColor(e){let t=this.formBuilderConfigModel[e],i="";if(!(0,W.Jp)(t))return 1==t.is_readonly?i=" bg-disable ":1==this.formBuilderModel[e].formatted_value&&(i=" color-primary "),i},updateModelAttribute(e){e.detail&&e.detail.field_name&&this.updateImportJson(e.detail.field_name)},inputValueChanges(e){this.updateLocalModel(e),this.updateImportJson(e),this.handleScriptCalculatedFields(e)},updateLocalModel(e){this.formBuilderModel[e].value=this.formBuilderModel[e].formatted_value,this.formBuilderModel[e].content=this.formBuilderModel[e].formatted_value},masterDataSearchByField(e){try{const t=e.name,i=this.formBuilderConfigModel[t];if(!i)return;let o=i.fuzzy_field.split(":")||{};const s=(0,z.Z)();this.ms_advance_filters[s]={fuzzy_field:i.fuzzy_field,search_text:this.formBuilderModel[t].formatted_value,field_name:t,primary:!0},this.master_lookup_type=o[0],this.ms_view_model=this.formBuilderConfigModel,this.master_data_fields_map=ue,this.master_data_popup_width=this.calculateWidthForMSPopuup();for(let[e,a]of Object.entries(this.formBuilderConfigModel))if(a.hasOwnProperty("fuzzy_primary_field")&&!0===a.fuzzy_primary_field&&t!==a.name){const e=(0,z.Z)();this.ms_advance_filters[e]={fuzzy_field:a.fuzzy_field,search_text:this.formBuilderModel[a.name].formatted_value,field_name:a.name,primary:!1}}this.fuzzyDialog=!0}catch(t){}},closeMsDialog(){this.fuzzyDialog=!1,this.ms_advance_filters={}},calculateWidthForMSPopuup(){let e="700";const t=document.querySelector(".field_validation");if(!t)return e;const i=document.querySelector("#field_scrolle");if(!i)return e;const o=i.offsetWidth;return o<=0?e:String(o)},windowResize(){this.fuzzyDialog&&(this.master_data_popup_width=this.calculateWidthForMSPopuup())},handleSingleSelection(e){let t=["stuck_checkbox","paar_checkbox","hose_checkbox"];t.includes(e)&&t.forEach(((t,i)=>{t!==e&&(this.formBuilderModel[t].formatted_value=!1,this.formBuilderModel[t].value=!1)}))},checkboxValueChanges(e){setTimeout((()=>{this.formBuilderModel[e].formatted_value=this.formBuilderModel[e].value,this.showConnectionFromField(e)}),30)},showConnectionFromField(e){ie.P8.includes(this.formBuilderConfigModel[e].fieldType)&&(this.connectionId=e,this.$emit("showConnectionFromField",e))},exportWithSonderWunsch(){this.record["export_parameters"]={doc_export_status:"export_with_sonderwunsche",validate:!1},this.exportData()},clickExport(){this.record["export_parameters"]={doc_export_status:"export",validate:!1},this.exportData()},htmlElementClick(e){if(this.formBuilderConfigModel[e].fieldType===ie.oh.EXPORT_BUTTON)return"reject"==this.formBuilderConfigModel[e].exportType?void this.rejectDocument():(this.record["export_parameters"]={doc_export_status:this.formBuilderConfigModel[e].exportType,validate:!1},void this.exportData());const t=ce("#"+e);t&&t.closest(".validation-sticky-area")?this.handleScroll():this.showConnectionFromField(e)},updateFieldInFormBuilder(e,t){let i=e.querySelector("."+this.connectionId+"_input");if(!i)return;const o=new CustomEvent("update_field_value",{detail:{input_class:this.connectionId+"_input",val:t.formatted_value}});i.dispatchEvent(o)},updateFieldData(e){let t=ce("#"+this.connectionId);t.setAttribute("pageno",this.page.toString()),t&&this.updateFieldInFormBuilder(t,e);const i=this.getInputType(t);this.formBuilderModel[this.connectionId].value=e.value,this.formBuilderModel[this.connectionId].formatted_value=e.formatted_value,this.formBuilderModel[this.connectionId].content=e.text,this.formBuilderModel[this.connectionId].api_save=!0,this.formBuilderModel[this.connectionId].score_description="","checkbox"===i&&(this.formBuilderModel[this.connectionId].value=!1,this.formBuilderModel[this.connectionId].formatted_value=!1,this.formBuilderModel[this.connectionId].content=!1,e.formatted_value&&"x"===e.formatted_value.toLowerCase()&&(this.handleSingleSelection(this.connectionId),this.formBuilderModel[this.connectionId].value=!0,this.formBuilderModel[this.connectionId].content=!0,this.formBuilderModel[this.connectionId].formatted_value=!0)),this.valueChangesOnRedraw(this.connectionId,e.coords,this.page),this.$forceUpdate()},valueChangesOnRedraw(e,t,i){let o=["stuck_checkbox","paar_checkbox","hose_checkbox"],s=[];o.includes(e)?s=o:s.push(e),t&&i?this.prepareImportJson(s,t,i,"AI"):this.prepareImportJson(s),this.$emit("removeOldMapiingsAndDrawNew",e),this.$forceUpdate()},prepareImportJson(e,t,i,o){e.forEach((e=>{this.updateImportJson(e,t,i,o)}))},updateImportJson(e,t,i,o){let s=!1;if(this.record.fields.forEach(((o,a)=>de(this,void 0,void 0,(function*(){if(o.name===e){s=!0,o.hasOwnProperty("original")||(o["original"]=Object.assign({},o)),o.hasOwnProperty("original_value")||(o["original_value"]=o.value),t&&(o.coords=t),i&&(o.page=i),o.is_valid=!0,o.is_validated=!0;let a=this.formBuilderModel[e];o.formatted_value=a.formatted_value,o.value=a.formatted_value,o.content=a.formatted_value,a.hasOwnProperty("api_save")&&a.api_save||(o.value=a.formatted_value);const l=this.record.amount_format_locale.split(".");return a.hasOwnProperty("api_save")&&a.api_save||!this.conversionFields.includes(a.name)||"en_US"==l[0]||(o.value=yield this.convertValueAccordingToLocale(o.value,l[0],"en_US"),o.float_value=+o.value),o.color="success-border-left","MD"==o.extraction_method&&(o.color="extraction_method-border-left"),void(!o.is_required||""!=o.formatted_value&&null!=o.formatted_value||(o.color="error-border-left"))}})))),!s){this.record.fields.push({});const s=this.record.fields.length-1;this.record.fields[s].name=e,this.record.fields[s].content=this.formBuilderModel[e].content,this.record.fields[s].formatted_value=this.formBuilderModel[e].formatted_value,this.record.fields[s].value=this.formBuilderModel[e].value,this.record.fields[s].original_value="",this.record.fields[s].validation_code="",this.record.fields[s].extraction_method=o,this.record.fields[s].is_validated=!0,this.record.fields[s].is_valid=!0,this.record.fields[s].color="success-border-left",t&&(this.record.fields[s].coords=t),i&&(this.record.fields[s].page=i)}},initTempFieldDelete(){this.record.fields.forEach(((e,t)=>{if(e.name===this.connectionId){const e={color:null,coords:null,confidence:0,validation_code:null};this.formBuilderModel[this.connectionId]=Object.assign(this.formBuilderModel[this.connectionId],e),this.record.fields[t]=Object.assign(this.record.fields[t],e)}}))},handleScroll(){this.$emit("handleScroll")},getInputType(e){return e.getAttribute("child_type")},onInputValueChanges(e,t){this.removeSelectedAreaOnImage(e),this.isFieldScriptCalculated(e)?this.updateScriptRequest():this.handleScriptForNonCalcField(),setTimeout((()=>{this.inputValueChanges(e)}),0),this.startTimer()},removeSelectedAreaOnImage(e){if(this.isConfirmationBoxDisable){const t=new CustomEvent("removeSelectedAreaOnImage",{});document.dispatchEvent(t),this.connectionId=e,this.initTempFieldDelete()}},getElementBorder(e){let t="";return this.formBuilderConfigModel.hasOwnProperty(e.name)?(t=this.formBuilderConfigModel[e.name].right_border?" border-right":"",t+=this.formBuilderConfigModel[e.name].bottom_border?" border-bottom":"",t):(t=e.right_border?" border-right":"",t+=e.bottom_border?" border-bottom":"",t)},getLayoutTemplateID(){return de(this,void 0,void 0,(function*(){try{let e={};this.record.doc_type&&(e["doc_type_key"]=this.record.doc_type),this.record.sub_doc_type&&(e["sub_doc_type_key"]=this.record.sub_doc_type);const t=yield q.l_.getLayoutTemplates(e);if(!t||t.hasOwnProperty("success")&&!1===t.success)throw t;if(!t.data||!Array.isArray(t.data)||0===t.data.length||!t.data[0].hasOwnProperty("id"))throw{message:"Layout Template ID Not Found"};this.layout_template_id=t.data[0].id}catch(e){const t=ae.w.getErrorMessage(e);this.showErrorToast(t)}}))},getFormBuilderLayout(){return de(this,void 0,void 0,(function*(){let e;this.formLayout=[];try{if(!this.layout_template_id)return;e=yield q.l_.getDocumentLayoutTemplateById(this.layout_template_id);let t=JSON.parse(e.layout_json);t&&(this.formLayout=t.hasOwnProperty("layout")?t.layout:[],this.formLayout&&(yield this.makeModel(),this.prepareLayoutData()),this.isExtenedPanel=!!t.isExtenedPanelEnabled,this.setGeneralSettings(t),this.$emit("setSplitterModel",this.isExtenedPanel?60:100))}catch(t){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},updateModel(e){},isFieldScriptCalculated(e){return!(!this.formBuilderConfigModel[e].hasOwnProperty("run_script_on_change")||!0!==this.formBuilderConfigModel[e].run_script_on_change)},handleScriptCalculatedFields(e){try{if(!this.isFieldScriptCalculated(e))return;this.record.apply_script_triggered_on_field=e,this.createNewScriptRequest()}catch(t){}},handleScriptForNonCalcField(){""!==this.api_request_id&&this.record.hasOwnProperty("apply_script_triggered_on_field")&&this.record.apply_script_triggered_on_field&&(this.updateScriptRequest(),this.createNewScriptRequest())},scriptCalculateFuncWrapper(e){let t="",i="";e.detail.columnName&&(i=e.detail.columnName),e.detail.rowId&&(t=e.detail.rowId),this.record.apply_script_triggered_on_table_row=t,this.record.apply_script_triggered_on_table_field=i,this.debounceScriptCalculateFunc()},applyScript(){return de(this,void 0,void 0,(function*(){try{this.auto_saved_done=!1,this.auto_saving=!0,this.script_api_timestamp=Date.now();const e=yield this.applyScriptOnDocument();if(!e)return;let t=!1;for(const[o,s]of Object.entries(this.formBuilderModel)){let e=0;s.hasOwnProperty("update_timestamp")&&(e=s.update_timestamp),e>this.script_api_timestamp&&(t=!0)}if(t)return this.updateRequestId(),void this.createNewScriptRequest();yield this.updateRecordAfterScript(),this.$emit("setDocVersion"),this.setDataToCache(),this.highlightFieldsMode=!0,yield this.makeModel();const i=new CustomEvent("prepare_rows",{});document.dispatchEvent(i)}catch(e){}finally{this.auto_saving=!1,this.auto_saved_done=!0,setTimeout((()=>{this.auto_saved_done=!1}),1e4)}}))},rejectDocument(){return de(this,void 0,void 0,(function*(){try{if(this.isReadOnly)return;this.showLoading(),yield this.saveData();const e={request_type:"reject"},t=yield q.U0.rejectDocument(e,this.docId);if(!1===t.success)throw t.message;if(this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),!0===t.success)return void this.routeToDashboard()}catch(e){}finally{this.hideLoading()}}))},populateMasterDataFields(){try{this.closeMsDialog(),this.showLoading();let e=JSON.parse(this.master_data_row),t=[];ue.forEach(((i,o)=>{i.forEach(((i,o)=>{e.hasOwnProperty(i)&&(this.formBuilderModel[o].formatted_value=e[i],this.formBuilderModel[o].value=e[i],this.formBuilderModel[o].color="extraction_method-border-left",this.formBuilderModel[o].extraction_method="MD",!this.isCurrentFieldPrimary(o)&&this.isContentChanged(this.formBuilderModel[o].content,e[i])&&(this.formBuilderModel[o].content=e[i],this.formBuilderModel[o].coords=null,this.formBuilderModel[o].confidence=0,this.formBuilderModel[o].validation_code=null),t.push(o))}))})),t.length>0&&this.prepareImportJson(t,[],this.page,"MD"),this.resetMasterDataStore()}catch(e){}finally{this.hideLoading()}},jumpToTable(e){e.preventDefault();for(const[t,i]of this.formLayout.entries())if(this.isGroupTable(t)){this.focusOnTableGroup(t);break}},triggerTableAddRow(e){for(const[t,i]of this.formLayout.entries()){if(!this.isGroupTable(t))continue;const e=this.formLayout[t].rows[0];let i=document.querySelector("."+e.name);if(!i)return;const o=new CustomEvent("trigger_add_row",{detail:{}});i.dispatchEvent(o);break}e.preventDefault()},findGroupShortcutkey(e){const t=e.key,i=["shift","alt"],o=i.find((e=>{const i=e+t;return this.groupShortCutMap.has(i)}));return o},focusOnGroupFromMap(e){if(0===this.groupShortCutMap.size)return;const t=this.findGroupShortcutkey(e);if(!t)return;const i=t+e.key,o=this.groupShortCutMap.get(i);null!==o&&void 0!==o&&""!==o&&(e.preventDefault(),this.focusGroup(o,e))},isGroupTable(e){return!!this.formLayout[e].rows[0]&&"ExtractedTable"===this.formLayout[e].rows[0].fieldType},focusGroup(e,t){if(t.preventDefault(),0===this.formLayout[e].rows.length)return;if(this.isGroupTable(e))return void this.focusOnTableGroup(e);const i=this.getFirstFieldOfGroup(e);i&&this.focusOnField(i)},getFirstFieldOfGroup(e){let t="",i=["CheckBox","TableOfCheckboxes"];i=i.concat(this.excluded_field_types);const o=this.formLayout[e].rows.find((e=>!i.includes(e.fieldType)));return o?(t=o.name,o.hasOwnProperty("field_name")&&(t=o.field_name),t||""):t},focusOnTableGroup(e){const t=this.formLayout[e].rows[0];this.focusOnTable(t.name)},validateAllSectionFields(e){const t=this.formLayout[e];if(t.hasOwnProperty("rows"))for(const i of t.rows)this.validateField(i.field_name)},selectFieldFromNextGroup(e){let t=e.target.closest("[data-group-id]");if(t||(t=document.querySelector("[data-group-id]")),!t)return;const i=t.getAttribute("data-group-id"),o=Number(i)+1;this.focusFirstFieldOnGroup(o)},validateAndSelectNextInvalidField(e){let t=!1,i="";for(const o of this.formLayout)for(const s of o.rows){let o=s.field_name,a=this.formBuilderModel[o];if(a){if(!0===t){if(1==s.is_readonly||1==s.is_hidden)continue;if(1==a.is_valid||a.calculation_formula)continue;return this.focusOnField(o),void(t=!1)}if(o===e){t=!0,this.validateField(o);const e=ce("#"+o);if(i=this.getComponentType(o),""==i)e.blur();else{const t=e.querySelector(i);t.blur()}}}}},focusOnField(e,t=!0,i=!1){const o=ce("#"+e);if(!o)return;const s=this.getComponentType(e);if(""==s)return o.focus(),void(t&&this.startTimer());const a=o.querySelector(s);a&&(a.click(),a.focus(),this.scrollInToViewCenter(a),i&&a.select(),t&&this.startTimer())},selectNextField(e){let t=!1,i="";for(const o of this.formLayout)for(const s of o.rows){let o=s.field_name,a=this.formBuilderModel[o];if(a){if(!0===t){if(1==s.is_readonly||1==s.is_hidden)continue;return this.focusOnField(o),void(t=!1)}if(o===e){const e=ce("#"+o);i=this.getComponentType(o);const s=e.querySelector(i);s.blur(),this.validateField(o),t=!0}}}},getNextTabIndex(e){let t=!1,i=0;for(const[s,a]of Object.entries(this.fields_tabindex_mapping)){const o=Number(s);if(!0===t){i=o;break}e===o&&(t=!0)}const o=this.fields_tabindex_mapping[i];return o&&Array.isArray(o)?i:this.getNextTabIndex(i)},isFieldAvailableToFocus(e){const t=ce("#"+e);return!!t},getNextTabIndexField(e,t){try{const i=this.fields_tabindex_mapping[e],o=i.indexOf(t);if(o===i.length-1){const t=this.getNextTabIndex(e),i=String(this.fields_tabindex_mapping[t][0]),o=this.isFieldAvailableToFocus(i);return o?i:this.getNextTabIndexField(t,i)}const s=o+1,a=String(i[s]),l=this.isFieldAvailableToFocus(a);return l?a:this.getNextTabIndexField(e,a)}catch(i){return""}},findNextField(e){const t=this.formBuilderConfigModel[e],i=Number(t.tabIndex);let o=this.getNextTabIndexField(i,e);return o},isFieldTable(e){return"ExtractedTable"===e.fieldType},focusOnTable(e){let t=document.querySelector("."+e);if(!t)return;const i=new CustomEvent("focus_first_row_column",{detail:{}});t.dispatchEvent(i)},moveToNextFieldEvent(e){if(!e.detail)return;const t=this.findNextField(e.detail);t&&this.focusOnField(t)},getComponentType(e){let t="";const i=ce("#"+e);return i?(t=this.getInputType(i),"checkbox"==t||""==t?"":t):""},validateField(e){if(!this.formBuilderModel[e])return;let t=this.formBuilderConfigModel[e];this.formBuilderModel[e].color="success-border-left",this.formBuilderModel[e].is_valid=!0,this.formBuilderModel[e].validation_code=null,this.formBuilderModel[e].validation_message=null,this.formBuilderModel[e].is_validated=!0,this.setColor(this.formBuilderModel[e],t),this.updateImportJson(e)},getFieldParentDiv(e){let t="";const i=ce("#"+e);if(!i)return!1;if(t=this.getInputType(i),"checkbox"==t||""==t)return!1;const o=i.querySelector(t);return!!o&&(o.blur(),!0)},startTimer(){const e=new CustomEvent("start_time_spent_on_validation",{});document.dispatchEvent(e)},focusFirstFieldOnGroup(e=0){return de(this,void 0,void 0,(function*(){yield this.$nextTick();const t=this.findGroupToFocus(e),i=this.getFirstFieldOfGroup(String(t));i&&this.focusOnField(i,!1)}))},findGroupToFocus(e){if(0===this.formLayout[String(e)].rows.length)return this.findGroupToFocus(e+1);if(this.formLayout[String(e)].is_stcky_group)return this.findGroupToFocus(e+1);const t=this.getFirstFieldOfGroup(String(e));return t?e:this.findGroupToFocus(e+1)},keydownEventWrapper(e){this.open_editor||this.keyDownEvent(e)}},setup(){let e=[],t=new Map;const i=(0,j.Fl)(),{clearStateForExportDialog:o}=i,{display_config_dialog:s}=(0,O.Jk)(i),a=(0,j.nc)(),{formBuilderModel:l,formLayout:n,isExtenedPanel:r,isFormBuilderMode:d,formBuilderConfigModel:c,renderComponent:u,docType:h,fieldListToHighlight:m}=(0,O.Jk)(a),{getElementWidth:p,prepareLayoutData:_,isFieldHidden:g}=a,f=(0,j.H_)(),{record:w,script_response:y,script_api_timestamp:b,layout_template_id:v,get_cached_data_id:x,auto_saving:k,auto_saved_done:C,api_request_id:D}=(0,O.Jk)(f),{saveDocument:E,applyScriptOnDocument:I,updateRecordAfterScript:T,setDataToCache:L,setRecordFromCache:M,updateRequestId:F}=f,q=(0,j.fI)(),{model:Z,advance_filters:R,master_lookup_type:W,selected_row:A,populate_row_to_view:V,master_data_fields_map:z}=(0,O.Jk)(q),{resetMasterDataStore:B,isContentChanged:N,isCurrentFieldPrimary:P}=q,U=(0,j.wr)(),{populateListsAndValues:H,addNameToLovList:$}=U,Q=(0,j.e0)(),{setGeneralSettings:Y}=Q,{isConfirmationBoxDisable:J}=(0,O.Jk)(Q),K=(0,j.TB)(),{releaseDocLock:G}=K,X=(0,j.Eu)(),{open_editor:ee}=(0,O.Jk)(X),te=(0,j.Ln)(),{dashboardFiltersAfterExport:ie}=te,oe=(0,j.VF)(),{getOrgSettings:se}=oe;return{script_api_timestamp:b,script_response:y,updateRecordAfterScript:T,isCurrentFieldPrimary:P,updateRequestId:F,api_request_id:D,addNameToLovList:$,getOrgSettings:se,isFieldHidden:g,dashboardFiltersAfterExport:ie,auto_saving:k,auto_saved_done:C,setRecordFromCache:M,setDataToCache:L,saveDocument:E,releaseDocLock:G,setGeneralSettings:Y,resetMasterDataStore:B,applyScriptOnDocument:I,populateListsAndValues:H,clearStateForExportDialog:o,get_cached_data_id:x,master_lookup_type:W,ms_advance_filters:R,isContentChanged:N,isConfirmationBoxDisable:J,master_data_fields_map:z,populate_row_to_view:V,master_data_row:A,ms_view_model:Z,record:w,apiData:(0,S.iH)(e),tableAreasStr:(0,S.iH)(""),isSelectedAreaFieldsReady:(0,S.iH)(!1),is_sep_view:(0,S.iH)(!1),fuzzyDialog:(0,S.iH)(!1),selectedRow:(0,S.iH)([]),renderKey:0,isReadOnly:(0,S.iH)(!1),display_config_dialog:s,formBuilderModel:l,formLayout:n,isExtenedPanel:r,isFormBuilderMode:d,formBuilderConfigModel:c,layout_template_id:v,renderComponent:u,docType:h,groupShortCutMap:t,fieldListToHighlight:m,getElementWidth:p,prepareLayoutData:_,is_admin:(0,S.iH)(!1),master_data_popup_width:(0,S.iH)("700"),fields_tabindex_mapping:(0,S.iH)({}),script_loading:(0,S.iH)(!1),open_editor:ee}}});var me=i(74260),pe=i(2165),_e=i(5363),ge=i(24554),fe=i(65869),we=i(46778),ye=i(66941),be=i(23282),ve=i(83884),xe=i(86115),ke=i(65735),Ce=i(17132),De=i(7518),Oe=i.n(De);const Ee=(0,me.Z)(he,[["render",k],["__scopeId","data-v-7167db9b"]]),Se=Ee;Oe()(he,"components",{QBtn:pe.Z,QTooltip:_e.Z,QIcon:ge.Z,QSeparator:fe.Z,QDialog:we.Z,QInnerLoading:ye.Z,QSpinnerHourglass:be.Z,QTd:ve.Z,QField:xe.Z,QCheckbox:ke.Z,QTable:Ce.Z})},42051:(e,t,i)=>{"use strict";i.d(t,{Z:()=>He});var o=i(83673),s=i(62323),a=i(98880);const l=(0,o._)("img",{width:"24",src:"keyboard_dark_2.svg"},null,-1);function n(e,t,i,n,r,d){const c=(0,o.up)("q-tooltip"),u=(0,o.up)("q-btn"),h=(0,o.up)("keyboardShortcutInfo"),m=(0,o.up)("q-card-actions"),p=(0,o.up)("q-card"),_=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(u,{flat:"",size:"14px",onClick:t[0]||(t[0]=t=>e.showKeyboardShortcuts=!0)},{default:(0,o.w5)((()=>[l,(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("keyboard_shortcut")),1)])),_:1})])),_:1}),(0,o.Wm)(_,{modelValue:e.showKeyboardShortcuts,"onUpdate:modelValue":t[2]||(t[2]=t=>e.showKeyboardShortcuts=t),onKeydown:t[3]||(t[3]=(0,a.D2)((t=>e.showKeyboardShortcuts=!1),["esc"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h),(0,o.Wm)(m,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{flat:"",color:"primary",label:e.$t("conclude"),class:"float-right",style:{"font-weight":"900"},onClick:t[1]||(t[1]=t=>e.showKeyboardShortcuts=!1)},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var r=i(61959);const d={class:"text-weight-medium text-h6"},c={class:""},u={class:"text-left",style:{"font-weight":"bold"}},h={class:"text-left",style:{"font-weight":"900"}},m=(0,o._)("tr",null,[(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Moves to next fields "),(0,o._)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,o._)("span",{class:"shortcut-Key-box"}," Enter ")])],-1),p=(0,o._)("tr",null,[(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Validate & jump to next red-marked field "),(0,o._)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,o._)("span",{class:"shortcut-Key-box q-mr-sm"}," TAB ")])],-1),_={class:"text-left",style:{"font-weight":"bold"}},g={class:"text-left",style:{"font-weight":"900"}},f=["src"],w=(0,o.Uk)(" + "),y=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," k ",-1),b=(0,o._)("tr",null,[(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Checkbox check/uncheck "),(0,o._)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,o._)("span",{class:"shortcut-Key-box"}," Space ")])],-1),v=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Moves to next group of fields ",-1),x={class:"text-left",style:{"font-weight":"900"}},k=["src"],C=(0,o.Uk)(" + "),D=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," G ",-1),O=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Move To first field of first group ",-1),E={class:"text-left",style:{"font-weight":"900"}},S=["src"],I=(0,o.Uk)(" + "),T=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," F ",-1),L=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Save document ",-1),M={class:"text-left",style:{"font-weight":"900"}},F=["src"],q=(0,o.Uk)(" + "),Z=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," S ",-1),R=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Reject document ",-1),W={class:"text-left",style:{"font-weight":"900"}},A=["src"],V=(0,o.Uk)(" + "),z=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," R ",-1),B=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Export without Sonderwunsch ",-1),N={class:"text-left",style:{"font-weight":"900"}},P=["src"],U=(0,o.Uk)(" + "),j=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," E ",-1),H=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Export with Sonderwunsch ",-1),$={class:"text-left",style:{"font-weight":"900"}},Q=["src"],Y=(0,o.Uk)(" + "),J=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," W ",-1),K=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Jump to Table Section ",-1),G={class:"text-left",style:{"font-weight":"900"}},X=["src"],ee=(0,o.Uk)(" + "),te=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," T ",-1),ie=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Create new line ",-1),oe={class:"text-left",style:{"font-weight":"900"}},se=["src"],ae=(0,o.Uk)(" + "),le=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," plus (+) ",-1),ne=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to Next Column ",-1),re={class:"text-left"},de=(0,o._)("img",{src:"keyboard-left-arrow.svg"},null,-1),ce=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to previous Column ",-1),ue={class:"text-left"},he={class:"q-mr-sm"},me=(0,o._)("img",{src:"keyboard-right-arrow.svg"},null,-1),pe=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to above Row ",-1),_e={class:"text-left"},ge=(0,o._)("img",{src:"keyboard-up-arrow.svg"},null,-1),fe=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to below Row ",-1),we={class:"text-left"},ye=(0,o._)("img",{src:"keyboard-down-arrow.svg"},null,-1),be={key:0},ve={class:"text-left",style:{"font-weight":"bold"}},xe={class:"text-left",style:{"font-weight":"900"}},ke={class:"shortcut-Key-box q-mr-sm"},Ce=(0,o.Uk)(" + "),De={class:"shortcut-Key-box q-ml-sm"};function Oe(e,t,i,a,l,n){const r=(0,o.up)("q-card-section"),Oe=(0,o.up)("q-icon"),Ee=(0,o.up)("q-markup-table");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o._)("div",d,(0,s.zw)(e.$t("keyboard_shortcuts")),1)])),_:1}),(0,o.Wm)(r,{class:"v-p-0"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ee,{class:"full-width",style:{overflow:"scroll","max-height":"60vh"},"virtual-scroll":""},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",c,[(0,o._)("th",u,(0,s.zw)(e.$t("action")),1),(0,o._)("th",h,(0,s.zw)(e.$t("keyboard_shortcut")),1)])]),(0,o._)("tbody",null,[m,p,(0,o._)("tr",null,[(0,o._)("td",_,(0,s.zw)(e.$t("doc2light.descriptions.check_keyboard_shortcut")),1),(0,o._)("td",g,[(0,o.Wm)(Oe,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,f)])),_:1}),w,y])]),b,(0,o._)("tr",null,[v,(0,o._)("td",x,[(0,o.Wm)(Oe,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,k)])),_:1}),C,D])]),(0,o._)("tr",null,[O,(0,o._)("td",E,[(0,o.Wm)(Oe,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,S)])),_:1}),I,T])]),(0,o._)("tr",null,[L,(0,o._)("td",M,[(0,o.Wm)(Oe,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,F)])),_:1}),q,Z])]),(0,o._)("tr",null,[R,(0,o._)("td",W,[(0,o.Wm)(Oe,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,A)])),_:1}),V,z])]),(0,o._)("tr",null,[B,(0,o._)("td",N,[(0,o.Wm)(Oe,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,P)])),_:1}),U,j])]),(0,o._)("tr",null,[H,(0,o._)("td",$,[(0,o.Wm)(Oe,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,Q)])),_:1}),Y,J])]),(0,o._)("tr",null,[K,(0,o._)("td",G,[(0,o.Wm)(Oe,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,X)])),_:1}),ee,te])]),(0,o._)("tr",null,[ie,(0,o._)("td",oe,[(0,o.Wm)(Oe,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,se)])),_:1}),ae,le])]),(0,o._)("tr",null,[ne,(0,o._)("td",re,[(0,o.Wm)(Oe,{size:"36px"},{default:(0,o.w5)((()=>[de])),_:1})])]),(0,o._)("tr",null,[ce,(0,o._)("td",ue,[(0,o._)("span",he,[(0,o.Wm)(Oe,{size:"36px"},{default:(0,o.w5)((()=>[me])),_:1})])])]),(0,o._)("tr",null,[pe,(0,o._)("td",_e,[(0,o.Wm)(Oe,{size:"36px"},{default:(0,o.w5)((()=>[ge])),_:1})])]),(0,o._)("tr",null,[fe,(0,o._)("td",we,[(0,o.Wm)(Oe,{size:"36px"},{default:(0,o.w5)((()=>[ye])),_:1})])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.formLayout,((e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:t},[""!==e.short_cut_key_2&&""!==e.short_cut_key_1?((0,o.wg)(),(0,o.iD)("tr",be,[(0,o._)("td",ve," Move to Group "+(0,s.zw)(e.title),1),(0,o._)("td",xe,[(0,o._)("span",ke,(0,s.zw)(e.short_cut_key_1),1),Ce,(0,o._)("span",De,(0,s.zw)(e.short_cut_key_2),1)])])):(0,o.kq)("",!0)],64)))),128))])])),_:1})])),_:1})],64)}var Ee=i(10321),Se=i(60727),Ie=i(53198);const Te=(0,o.aZ)({el:"#app",mixins:[Ie.Z],props:{},components:{},data(){return{combination_key:""}},mounted:function(){this.combination_key=this.getCombinationKey(null)},setup(){const e=(0,Se.nc)(),{formLayout:t}=(0,Ee.Jk)(e);return{formLayout:t}}});var Le=i(74260),Me=i(25589),Fe=i(30481),qe=i(24554),Ze=i(7518),Re=i.n(Ze);const We=(0,Le.Z)(Te,[["render",Oe]]),Ae=We;Re()(Te,"components",{QCardSection:Me.Z,QMarkupTable:Fe.Z,QIcon:qe.Z});const Ve=(0,o.aZ)({el:"#app",mixins:[Ie.Z],props:{},components:{keyboardShortcutInfo:Ae},mounted:function(){window.addEventListener("keydown",this.keyboardKeyDownEvent)},unmounted:function(){window.removeEventListener("keydown",this.keyboardKeyDownEvent)},methods:{keyboardKeyDownEvent(e){const t=this.isCombinationKey(e);75===e.keyCode&&!0===t&&(e.preventDefault(),this.showKeyboardShortcuts=!0)}},data(){return{}},setup(){return{showKeyboardShortcuts:(0,r.iH)(!1)}}});var ze=i(2165),Be=i(5363),Ne=i(46778),Pe=i(10151),Ue=i(99367);const je=(0,Le.Z)(Ve,[["render",n]]),He=je;Re()(Ve,"components",{QBtn:ze.Z,QTooltip:Be.Z,QDialog:Ne.Z,QCard:Pe.Z,QCardActions:Ue.Z})},83495:(e,t,i)=>{"use strict";i.d(t,{Z:()=>C});var o=i(83673),s=i(62323);const a={class:"q-pa-sm"};function l(e,t,i,l,n,r){const d=(0,o.up)("q-th"),c=(0,o.up)("q-tr"),u=(0,o.up)("q-tooltip"),h=(0,o.up)("q-icon"),m=(0,o.up)("q-td"),p=(0,o.up)("q-table");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(p,{class:(0,s.C_)("sticky-header-table text-uppercase"),rows:e.tableRows,columns:e.tableColumns,"row-key":"id","table-header-style":{backgroundColor:"#d4d4d4"},style:{overflow:"scroll",height:"auto","max-height":"400px"},"rows-per-page-options":[0],"virtual-scroll":"",id:"po-table","no-data-label":e.$t("no_data_found")},{header:(0,o.w5)((t=>[(0,o.Wm)(c,{props:t,class:(0,s.C_)(["back-white",!0===e.allowPOTableDrag?"draggable":""]),draggable:!0===e.allowPOTableDrag?"true":"false"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(i=>((0,o.wg)(),(0,o.j4)(d,{key:i.name,props:t,draggable:"false",class:(0,s.C_)(!0===e.allowPOTableDrag?"draggable":"")},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(i.label),1)])),_:2},1032,["props","class"])))),128))])),_:2},1032,["props","class","draggable"])])),body:(0,o.w5)((t=>[(0,o.Wm)(c,{props:t,id:t.key,class:"draggable po_iterateable_item",tabindex:"0",draggable:1==t.row.connected?"false":"true","data-id":t.key},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(i=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i.name},["connection_status"===i.name?((0,o.wg)(),(0,o.j4)(m,{key:0,"data-id":t.key,class:"draggable actions"},{default:(0,o.w5)((()=>[t.row.connected?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},["success"==t.row.connection_data.connection_status?((0,o.wg)(),(0,o.j4)(h,{key:0,size:"sm",name:"done",class:"success"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("po_connected_match")),1)])),_:1})])),_:1})):((0,o.wg)(),(0,o.j4)(h,{key:1,size:"sm",name:"done",class:"mismatched"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("po_connected_mismatch")),1)])),_:1})])),_:1}))],64)):(0,o.kq)("",!0)])),_:2},1032,["data-id"])):((0,o.wg)(),(0,o.j4)(m,{key:1,"data-id":t.key,class:"draggable"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.colValue(t.row,i.name)),1)])),_:2},1032,["data-id"]))],64)))),128))])),_:2},1032,["props","id","draggable","data-id"])])),_:1},8,["rows","columns","no-data-label"])])}var n=i(77378),r=i(7153),d=i(61959),c=i(77987),u=i(41891);const h=(0,o.aZ)({el:"#app",mixins:[n.Z],props:{apiData:[],po_lines:[],po_number:{type:String,default:""},allowPOTableDrag:{type:Boolean,default:!1}},components:{},data(){return{po_connected_line_items:{},loading_data:!1,additional_columns:["delivery_number","delivery_line_number"]}},mounted:function(){document.addEventListener("init_po_lines",this.loadPurchaseOrderData),document.addEventListener("po_connection_add",this.lineItemConnected),document.addEventListener("po_connection_remove",this.connectionRemoved),document.addEventListener("show_line_highlighted",this.showLineHighlighted),document.addEventListener("removed_highlight",this.removeHighlights),this.loadPurchaseOrderData(),window.po=this,document.addEventListener("dragstart",this.dragstart),document.addEventListener("keydown",this.keyDownEvent)},unmounted:function(){document.removeEventListener("po_connection_add",this.lineItemConnected),document.removeEventListener("po_connection_remove",this.connectionRemoved),document.removeEventListener("show_line_highlighted",this.showLineHighlighted),document.removeEventListener("removed_highlight",this.removeHighlights),document.removeEventListener("dragstart",this.dragstart),document.removeEventListener("keydown",this.keyDownEvent),document.removeEventListener("init_po_lines",this.loadPurchaseOrderData),this.clearDraggingData()},watch:{po_lines:{deep:!0,handler:function(e,t){this.loadPurchaseOrderData()}}},methods:{colValue(e,t){let i=e[t];return e.hasOwnProperty(t+"_formatted_value")&&(i=e[t+"_formatted_value"]),i},dragstart(e){if(e.target&&this.apiData.editable)if(!0===this.allowPOTableDrag)r.Z.set("DRAG_PO_NUMBER",String(this.po_number));else{let t=e.target.dataset.id,i={},o={};for(let[e,s]of this.tableRows.entries())if(s.id==t){i=s;break}for(let[e,s]of this.po_lines.entries())if(s.id==t){o=s;break}i=Object.assign(i,o),i&&0==i.connected&&r.Z.set("Text",JSON.stringify(i))}},loadPurchaseOrderData(){try{if(this.loading_data)return;if(this.loading_data=!0,!(0,u.s_)(this.apiData.doc_type))return;this.setConnectedPoRecords(),this.checkForAdditionalColumns(),this.prepareTableColumn(),this.prepareTableRows(),this.loading_data=!1}catch(e){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}},prepareTableColumn(){this.tableColumns=[];let e={name:"connection_status",field:"connection_status",align:"left",label:""};this.tableColumns.push(e);let t=!1;Array.from(this.apiData.po_columns).forEach((e=>{let i={name:e.name,field:e.name,align:"left",label:this.$t(e.translation_key),sortable:!0};this.tableColumns.push(Object.assign({},i)),"purchase_order_number"==e.name&&this.add_additional_columns&&(t=!0,this.addAdditionalColumns())})),!t&&this.add_additional_columns&&this.addAdditionalColumns()},addAdditionalColumns(){for(let[e,t]of Object.entries(this.additional_columns)){let e={name:t,field:t,align:"left",label:this.$t(t),sortable:!0};this.tableColumns.push(Object.assign({},e))}},prepareTableRows(){this.tableRows=[],0!=this.po_lines.length&&this.po_lines.forEach(((e,t)=>{let i={connection_data:{},connected:!1};i["id"]=e.id,this.po_connected_line_items.hasOwnProperty(e.id)&&(i["connected"]=!0,i["connection_data"]=this.po_connected_line_items[e.id]);for(let[o,s]of Object.entries(this.tableColumns)){const t=s;i[t.name]=this.colValue(e,t.name)}this.tableRows.push(i)}))},checkForAdditionalColumns(){0!=this.po_lines.length&&this.po_lines.forEach(((e,t)=>{for(let[i,o]of Object.entries(this.additional_columns))if(e.hasOwnProperty(o)&&null!=e[o]&&""!=e[o]){this.add_additional_columns=!0;break}}))},lineItemConnected(e){let t=e.detail.data.po_line_id,i=e.detail.data.purchase_order_number;if(this.po_number!==i)return;let o=!1;for(let[s,a]of this.tableRows.entries())if(a.id==t){a.connected=!0,a.connection_data=e.detail.data,this.po_connected_line_items[t]=e.detail.data,o=!0;break}if(o){const t=new CustomEvent("po_connection_success",{detail:e.detail});document.dispatchEvent(t)}},connectionRemoved(e){let t=e.detail.data.po_line_id,i=e.detail.data.purchase_order_number;this.po_number===i&&this.removeConnectionEntryFromPoLine(t)},removeConnectionEntryFromPoLine(e){for(let[t,i]of this.tableRows.entries())if(i.id==e){i.connected=!1,i.connection_data=null,delete this.po_connected_line_items[e];break}},setConnectedPoRecords(){this.po_connected_line_items={};let e=this.getConnectedLineItems();if(0!=e.length)for(let[t,i]of e.entries())this.po_connected_line_items[i.po_line_id]=i},getConnectedLineItems(){let e=[];return this.apiData?(this.apiData.hasOwnProperty("po_matched")&&(e=this.apiData.po_matched),e):e},clearDraggingData(){r.Z.remove("Text")},showConnectedLines(e){for(let[t,i]of this.tableRows.entries())0==i.show&&(i.show=!0)},showLineHighlighted(e){if(!e.detail||!e.detail.po_line_id)return;let t=e.detail.purchase_order_number;if(this.po_number!==t)return;this.removeHighlights();let i=e.detail;if(this.po_number!==i.purchase_order_number){let e=this.$t("line_not_found_in_po")+this.po_number;return void this.showErrorToast(e)}let o=document.querySelector('[data-id="'+i.po_line_id+'"]');o?("success"==i["connection_status"]&&o.classList.add("highlighted","line-success"),"mismatch"==i["connection_status"]&&o.classList.add("highlighted","line-mismatched")):this.showErrorToast(this.$t("pages.messages.PO_LINES_ARE_HIDDEN"))},removeHighlights(e){if(e&&e.detail&&e.detail.purchase_order_number&&this.po_number!==e.detail.purchase_order_number)return;let t=document.querySelectorAll(".highlighted");for(var i=0;i<t.length;i++)t[i].classList.remove("highlighted","line-mismatched","line-success")},keyDownEvent(e){if("c"===e.key&&e.ctrlKey){e.preventDefault();let t=document.activeElement;if(!t||!t.classList.contains("draggable"))return;this.dragstart(e)}else if(e.ctrlKey&&"p"===e.key){e.preventDefault();let t=(0,c.$)("#po-table");if(!t)return;let i=t.querySelector(".q-virtual-scroll__content"),o=null;if(i&&(o=i.querySelector(".q-tr")),!o)return;o.contentEditable="true",o.focus(),o.contentEditable="false"}}},setup(){let e=[];return{tableColumns:(0,d.iH)(e),tableRows:(0,d.iH)(e),add_additional_columns:(0,d.iH)(!1)}}});var m=i(74260),p=i(17132),_=i(18186),g=i(92414),f=i(83884),w=i(24554),y=i(5363),b=i(99698),v=i(7518),x=i.n(v);const k=(0,m.Z)(h,[["render",l],["__scopeId","data-v-c287bcf6"]]),C=k;x()(h,"components",{QTable:p.Z,QTr:_.Z,QTh:g.Z,QTd:f.Z,QIcon:w.Z,QTooltip:y.Z,QVirtualScroll:b.Z})},11813:(e,t,i)=>{"use strict";i.d(t,{Z:()=>S});var o=i(83673),s=i(62323);const a=(0,o.Uk)("Close"),l={class:"highlighted-back"},n={style:{width:"100%"},class:"text-left"},r=["data-id"],d=["data-id"],c=(0,o._)("thead",null,[(0,o._)("tr",{class:"bg-grey-3"},[(0,o._)("th",null,"No Data Found")])],-1);function u(e,t,i,u,h,m){const p=(0,o.up)("q-space"),_=(0,o.up)("q-tooltip"),g=(0,o.up)("q-btn"),f=(0,o.up)("q-bar"),w=(0,o.up)("q-markup-table"),y=(0,o.up)("q-card-section"),b=(0,o.up)("q-separator"),v=(0,o.up)("q-card-actions"),x=(0,o.up)("q-card"),k=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(x,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o._)("div",null,(0,s.zw)(e.$t("purchase_order_preview"))+" : "+(0,s.zw)(e.po_number),1),(0,o.Wm)(p),(0,o.wy)(((0,o.wg)(),(0,o.j4)(g,{dense:"",flat:"",icon:"close"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[a])),_:1})])),_:1})),[[k]])])),_:1}),(0,o.Wm)(y,{style:{"max-height":"50vh"},class:"scroll"},{default:(0,o.w5)((()=>[0!=e.purchaseOrderData.length?((0,o.wg)(),(0,o.j4)(w,{key:0,class:"full-width text-uppercase"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",l,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.po_preview_columns,(t=>((0,o.wg)(),(0,o.iD)("th",{key:t.name,class:"text-left"},[(0,o._)("div",n,(0,s.zw)(e.$t(t.translation_key)),1)])))),128))])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.purchaseOrderData,((i,a)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:a},[i.show?((0,o.wg)(),(0,o.iD)("tr",{key:0,"data-id":i.id},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.tr_data,((a,l)=>((0,o.wg)(),(0,o.iD)("td",{key:l,"data-id":i.id,onPointerdown:t[0]||(t[0]=(...t)=>e.startDrag&&e.startDrag(...t))},(0,s.zw)(a[1]),41,d)))),128))],8,r)):(0,o.kq)("",!0)],64)))),128))])])),_:1})):((0,o.wg)(),(0,o.j4)(w,{key:1,class:"full-width"},{default:(0,o.w5)((()=>[c])),_:1}))])),_:1}),(0,o.Wm)(b),(0,o.Wm)(v,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(g,{flat:"",color:"primary",label:e.$t("cancel")},null,8,["label"]),[[k]]),0!=e.purchaseOrderData.length?((0,o.wg)(),(0,o.j4)(g,{key:0,flat:"",color:"primary",onClick:e.addToList,label:e.$t("add_to_po_list")},null,8,["onClick","label"])):(0,o.kq)("",!0)])),_:1})])),_:1})}var h=i(77378);const m=(0,o.aZ)({el:"#app",mixins:[h.Z],props:{po_lines:[],po_preview_columns:[],po_number:{type:String,default:""}},components:{},emits:["clearSearch","addToPoItemsList"],data(){return{purchaseOrderData:[]}},mounted:function(){this.loadPurchaseOrderData()},methods:{loadPurchaseOrderData(){this.setPoData()},setPoData(){try{if(0==this.po_lines.length)return;this.po_lines.forEach(((e,t)=>{let i=new Map;for(let o of this.po_preview_columns)i.set(o.name,e[o.name]);this.purchaseOrderData.push({tr_data:i,data:e,id:e.id,show:!0,connection_data:{}})}))}catch(e){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}},closePreview(){this.$emit("clearSearch")},addToList(){this.$emit("addToPoItemsList")}},setup(){return{}}});var p=i(74260),_=i(10151),g=i(10846),f=i(62025),w=i(2165),y=i(5363),b=i(25589),v=i(30481),x=i(65869),k=i(99367),C=i(60677),D=i(7518),O=i.n(D);const E=(0,p.Z)(m,[["render",u]]),S=E;O()(m,"components",{QCard:_.Z,QBar:g.Z,QSpace:f.Z,QBtn:w.Z,QTooltip:y.Z,QCardSection:b.Z,QMarkupTable:v.Z,QSeparator:x.Z,QCardActions:k.Z}),O()(m,"directives",{ClosePopup:C.Z})},47845:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var o=i(83673),s=i(62323);const a={class:"container no-padding highlighted-back"},l={class:"row full-width secondary-c-text q-pt-md q-pb-md"},n={class:"col-6 pl-20"},r=(0,o._)("img",{width:"24",src:"back_new.svg"},null,-1),d={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},c={class:"col-6 pr-22"};function u(e,t,i,u,h,m){const p=(0,o.up)("q-icon"),_=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",l,[(0,o._)("div",n,[(0,o.Wm)(_,{flat:"",rounded:"",color:"primary",to:e.back_to_rotue},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"text-red-13",size:"sm"},{default:(0,o.w5)((()=>[r])),_:1}),(0,o._)("label",d,(0,s.zw)(e.$t("layout.settings")),1)])),_:1},8,["to"])]),(0,o._)("div",c,[(0,o.WI)(e.$slots,"default"),e.create_new_btn?((0,o.wg)(),(0,o.j4)(_,{key:0,color:"primary",class:"float-right q-ml-sm",icon:"add",to:e.create_new_btn,label:e.$t("new")},null,8,["to","label"])):(0,o.kq)("",!0)])])])}const h=(0,o.aZ)({props:{back_to_rotue:{type:String,default:"/setting"},create_new_btn:{type:String,default:""}}});var m=i(74260),p=i(2165),_=i(24554),g=i(7518),f=i.n(g);const w=(0,m.Z)(h,[["render",u]]),y=w;f()(h,"components",{QBtn:p.Z,QIcon:_.Z})},47286:(e,t,i)=>{"use strict";i.d(t,{Z:()=>N});var o=i(83673),s=i(62323),a=i(98880);const l=(0,o._)("img",{width:"24",height:"24",src:"logs.svg",class:"icon-black-svg"},null,-1),n={class:"text-weight-bold"},r={class:"q-pl-md q-pr-md q-pt-md"},d={class:"text-item"},c=(0,o._)("div",{class:"row float-right"},null,-1),u={key:0,style:{"text-wrap":"wrap"}},h={key:1},m={class:"q-mt-md row full-width"},p=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function _(e,t,i,_,g,f){const w=(0,o.up)("q-tooltip"),y=(0,o.up)("q-btn"),b=(0,o.up)("q-toolbar-title"),v=(0,o.up)("q-toolbar"),x=(0,o.up)("q-th"),k=(0,o.up)("q-tr"),C=(0,o.up)("q-td"),D=(0,o.up)("q-icon"),O=(0,o.up)("q-table"),E=(0,o.up)("q-pagination"),S=(0,o.up)("q-card-section"),I=(0,o.up)("q-card"),T=(0,o.up)("q-dialog"),L=(0,o.up)("q-inner-loading");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(y,{style:(0,s.j5)({height:e.setheight}),square:"",class:"q-ml-sm",color:"primary",onClick:e.checkConnectionLogs},{default:(0,o.w5)((()=>[l,(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.import.import_log")),1)])),_:1})])),_:1},8,["style","onClick"]),(0,o.Wm)(T,{modelValue:e.show_popup,"onUpdate:modelValue":t[2]||(t[2]=t=>e.show_popup=t),onKeydown:(0,a.D2)(e.cleanupOnhide,["esc"]),onHide:e.cleanupOnhide},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{style:{width:"1060px","max-width":"1060px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{class:"secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o._)("span",n,(0,s.zw)(e.$t("pages.import.import_log")),1)])),_:1}),(0,o.Wm)(y,{flat:"",round:"",dense:"",icon:"close",onClick:e.cleanupOnhide},null,8,["onClick"])])),_:1}),(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.Wm)(O,{class:(0,s.C_)("main-table"),"rows-per-page-options":[0],rows:e.rows,columns:e.columns,"row-key":"id","hide-bottom":"","no-data-label":e.$t("no_data_found"),"no-results-label":"The filter didn't uncover any results",style:{overflow:"scroll",height:"600px"}},{header:(0,o.w5)((t=>[(0,o.Wm)(k,{props:t,class:(0,s.C_)("highlighted-back ")},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,((e,i)=>((0,o.wg)(),(0,o.j4)(x,{key:e.name,props:t,"data-index":i},{default:(0,o.w5)((()=>[(0,o._)("span",d,(0,s.zw)(e.label),1)])),_:2},1032,["props","data-index"])))),128))])),_:2},1032,["props"]),0==e.rows.length?((0,o.wg)(),(0,o.j4)(k,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{colspan:"20",class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("no_data_found")),1)])),_:1})])),_:1})):(0,o.kq)("",!0)])),body:(0,o.w5)((e=>[(0,o.Wm)(k,{props:e,id:e.key},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(t=>((0,o.wg)(),(0,o.iD)(o.HY,{key:t.name},["action"===t.name?((0,o.wg)(),(0,o.j4)(C,{key:0},{default:(0,o.w5)((()=>[c])),_:1})):(0,o.kq)("",!0),"success"===t.name?((0,o.wg)(),(0,o.j4)(C,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{name:!0===e.row[t.name]?"check_circle":"cancel",color:!0===e.row[t.name]?"green":"red",size:"20px"},null,8,["name","color"])])),_:2},1024)):((0,o.wg)(),(0,o.j4)(C,{key:2},{default:(0,o.w5)((()=>["message"===t.name?((0,o.wg)(),(0,o.iD)("span",u,(0,s.zw)(e.row[t.name]),1)):((0,o.wg)(),(0,o.iD)("span",h,(0,s.zw)(e.row[t.name]),1))])),_:2},1024))],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","no-data-label"]),(0,o._)("div",m,[e.total_pages>1?((0,o.wg)(),(0,o.j4)(E,{key:0,modelValue:e.current_page,"onUpdate:modelValue":t[0]||(t[0]=t=>e.current_page=t),max:e.total_pages,"max-pages":6,"direction-links":"",unelevated:"",color:"black","active-color":"black",class:"doc2-pagination q-mb-md q-ml-auto q-mr-auto",onClick:t[1]||(t[1]=t=>e.nexPageClicked())},null,8,["modelValue","max"])):(0,o.kq)("",!0)])])])),_:1})])),_:1})])),_:1},8,["modelValue","onKeydown","onHide"]),(0,o.Wm)(L,{showing:e.loading},{default:(0,o.w5)((()=>[p])),_:1},8,["showing"])],64)}var g=i(61959),f=i(77378),w=i(80579),y=i(9273),b=i(45401),v=i(25616),x=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const k=(0,o.aZ)({mixins:[f.Z,b.Z],props:{setheight:{type:String,required:!0}},components:{},watch:{},computed:{},mounted:function(){this.init()},methods:{init(){window.cl=this,this.prepareColumns()},checkConnectionLogs(){try{this.resetPagination(),this.getDataFromServer()}catch(e){const t=y.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}},getDataFromServer(){return x(this,void 0,void 0,(function*(){try{this.loading=!0;const e=yield w.mX.fetchImportLogs();if(!1===e.success)throw{message:e.message};this.total_records=e.data.length,this.setTotalPages(),this.prepareRows(e.data),this.show_popup=!0}catch(e){const t=y.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}}))},prepareRows(e){this.rows=[],Array.from(e).forEach((e=>{let t=e;t["failed_count"]=t["failed"],t["success_count"]=t["success"],t["success_count"]>>0?t["success"]=!0:t["success"]=!1,this.addNewRow(t)}))},addNewRow(e){let t=Object.assign({},e);return t["date"]=this.formatDate(e["date"],"DD-MM-YYYY HH:mm:ss"),this.rows.push(t),this.rows.length.toString()},formatDate(e,t){return v.ZP.formatDate(e,t)},resetPagination(){this.offset=0,this.total_pages=0,this.current_page=1,this.total_records=0},setTotalPages(){this.total_pages=Math.ceil(this.total_records/this.page_size)},nexPageClicked(){return x(this,void 0,void 0,(function*(){try{this.calculateOffset(),yield this.getDataFromServer()}catch(e){const t=y.w.getErrorMessage(e);this.showErrorToast(t)}}))},calculateOffset(){this.offset=this.page_size*(this.current_page-1)},prepareColumns(){this.columns=[],this.columns.push({name:"success",label:this.$t("status"),field:"status",align:"left"}),this.columns.push({name:"subject",label:this.$t("pages.import.emaillog.subject"),field:"subject",align:"left"}),this.columns.push({name:"sender",label:this.$t("pages.import.emaillog.sender"),field:"sender",align:"left"}),this.columns.push({name:"date",label:this.$t("pages.import.emaillog.arrived_at"),field:"date",align:"left"}),this.columns.push({name:"success_count",label:this.$t("pages.import.emaillog.doc_count"),field:"success_count",align:"left"}),this.columns.push({name:"failed_count",label:this.$t("pages.import.emaillog.failed_count"),field:"failed_count",align:"left"})},cleanupOnhide(){this.show_popup=!1,this.resetPagination()}},setup(){return{loading:(0,g.iH)(!1),request_params:(0,g.iH)({}),current_page:(0,g.iH)(1),total_pages:(0,g.iH)(0),offset:(0,g.iH)(0),page_size:(0,g.iH)(8),total_records:(0,g.iH)(0),show_popup:(0,g.iH)(!1),columns:(0,g.iH)([]),rows:(0,g.iH)([])}}});var C=i(74260),D=i(2165),O=i(5363),E=i(46778),S=i(10151),I=i(39570),T=i(13747),L=i(25589),M=i(17132),F=i(18186),q=i(92414),Z=i(83884),R=i(24554),W=i(87300),A=i(66941),V=i(7518),z=i.n(V);const B=(0,C.Z)(k,[["render",_]]),N=B;z()(k,"components",{QBtn:D.Z,QTooltip:O.Z,QDialog:E.Z,QCard:S.Z,QToolbar:I.Z,QToolbarTitle:T.Z,QCardSection:L.Z,QTable:M.Z,QTr:F.Z,QTh:q.Z,QTd:Z.Z,QIcon:R.Z,QPagination:W.Z,QInnerLoading:A.Z})},42122:(e,t,i)=>{"use strict";i.d(t,{Z:()=>et});var o=i(83673),s=i(62323);const a={class:"table-container col-sm-12 col-md-12 col-lg-12 min-height-300"},l={class:"row q-mb-sm",style:{display:"flex"}},n=(0,o.Uk)("Total Sample Documents"),r=(0,o._)("div",{class:"text-center q-my-sm"},[(0,o._)("span",{class:"text-primary text-subtitle1 text-weight-bold"},"Import Sample Documents")],-1),d=["innerHTML"],c=(0,o._)("div",{class:"text-center q-my-sm"},[(0,o._)("span",{class:"text-subtitle1 text-weight-bold"},"Drag & Drop"),(0,o._)("br"),(0,o._)("span",{class:"text-body2"},"your files here")],-1),u=[c],h={key:3,class:"col-auto q-mr-auto"},m={class:"q-btn highlighted-back text-center count-card q-mr-sm"},p={key:0,class:"q-btn highlighted-back text-center count-card q-mr-sm"},_={key:1,class:"q-btn highlighted-back text-center count-card width-156 q-mr-sm"},g={key:2,class:"q-btn highlighted-back text-center count-card q-mr-sm"},f={class:"col-auto float-right q-ml-auto"},w={class:"row"},y={key:0,class:"col-auto"},b={class:"col-auto"},v=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function x(e,t,i,c,x,k){const C=(0,o.up)("q-tooltip"),D=(0,o.up)("q-circular-progress"),O=(0,o.up)("q-card"),E=(0,o.up)("q-item-label"),S=(0,o.up)("q-item-section"),I=(0,o.up)("q-item"),T=(0,o.up)("q-select"),L=(0,o.up)("UploadTrainingFile"),M=(0,o.up)("TestTrainingFile"),F=(0,o.up)("q-td"),q=(0,o.up)("q-btn"),Z=(0,o.up)("q-table"),R=(0,o.up)("q-inner-loading");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",a,[(0,o._)("div",l,[0!=e.max_value?((0,o.wg)(),(0,o.j4)(O,{key:0,class:"q-pa-md q-mb-md"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(D,{"show-value":"",class:"text-grey-8 doc-create-file-progress",value:e.value,min:e.min_value,max:e.max_value,size:"60px",color:"green","track-color":"grey-4"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.value)+" ",1),(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[n])),_:1})])),_:1},8,["value","min","max"])])])),_:1})):(0,o.kq)("",!0),0!=e.max_value?((0,o.wg)(),(0,o.j4)(O,{key:1,class:"col-5 q-px-md q-mb-md q-ml-lg",style:{width:"43.8%"}},{default:(0,o.w5)((()=>[r,(0,o.Wm)(T,{modelValue:e.language_origin,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.language_origin=t),e.uploadFile],dense:"",outlined:"",options:e.language_origin_list,label:e.$t("amount_date_format"),"error-message":e.$t("field_required"),error:e.origin_error},{option:(0,o.w5)((e=>[(0,o.Wm)(I,(0,s.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(E,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1024),e.opt.description?((0,o.wg)(),(0,o.j4)(C,{key:0},{default:(0,o.w5)((()=>[(0,o._)("span",{innerHTML:e.opt.description},null,8,d)])),_:2},1024)):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","onUpdate:modelValue","label","error-message","error"])])),_:1})):(0,o.kq)("",!0),0!=e.max_value?((0,o.wg)(),(0,o.j4)(O,{key:2,class:"col-5 q-pa-md q-mb-md q-ml-auto float-right"},{default:(0,o.w5)((()=>[(0,o._)("div",{style:{border:"1px dashed"},class:"full-width",onDrop:t[1]||(t[1]=(...t)=>e.drop&&e.drop(...t)),onDragover:t[2]||(t[2]=(...t)=>e.allowDrop&&e.allowDrop(...t)),onDragleave:t[3]||(t[3]=(...t)=>e.dragLeave&&e.dragLeave(...t))},u,32)])),_:1})):(0,o.kq)("",!0),0==e.max_value?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("div",m,[(0,o._)("div",null,(0,s.zw)(e.value),1),(0,o._)("div",null,(0,s.zw)(e.$t("trained_sample")),1)]),e.total_exported?((0,o.wg)(),(0,o.iD)("div",p,[(0,o._)("div",null,(0,s.zw)(e.total_exported),1),(0,o._)("div",null,(0,s.zw)(e.$t("trained_exported")),1)])):(0,o.kq)("",!0),e.total_trained_by_org?((0,o.wg)(),(0,o.iD)("div",_,[(0,o._)("div",null,(0,s.zw)(e.total_trained_by_org),1),(0,o._)("div",null,(0,s.zw)(e.$t("trained_company")),1)])):(0,o.kq)("",!0),e.total_trained?((0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("div",null,(0,s.zw)(e.total_trained),1),(0,o._)("div",null,(0,s.zw)(e.$t("trained_overall")),1)])):(0,o.kq)("",!0)])):(0,o.kq)("",!0),(0,o._)("div",f,[(0,o._)("div",w,[0==e.max_value?((0,o.wg)(),(0,o.iD)("div",y,[(0,o.Wm)(L,{doc_type:e.doc_type,doc_type_key:e.doc_type_key,re_train:!1,language_origin_list:e.language_origin_list,training_doc_limit:e.max_value},null,8,["doc_type","doc_type_key","language_origin_list","training_doc_limit"])])):(0,o.kq)("",!0),(0,o._)("div",b,[(0,o.Wm)(M,{doc_type:e.doc_type,doc_type_key:e.doc_type_key,re_train:!1,list_data:e.list_data,training_doc_limit:e.max_value},null,8,["doc_type","doc_type_key","list_data","training_doc_limit"])])])])]),(0,o.Wm)(Z,{class:"sticky-header-table training-list","table-header-class":"highlighted-back","no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),"table-class":"white-back",rows:e.rows,columns:e.columns,"rows-per-page-options":[0],"row-key":"id",filter:e.filter},{"body-cell-name":(0,o.w5)((e=>[(0,o.Wm)(F,{props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.row.name),1)])),_:2},1032,["props"])])),"body-cell-action":(0,o.w5)((t=>[(0,o.Wm)(F,{props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{color:"grey","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:i=>e.handleDelete(t.row,t.rowIndex)},{default:(0,o.w5)((()=>[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["no-data-label","rows","columns","filter"])]),(0,o.Wm)(R,{showing:e.loading},{default:(0,o.w5)((()=>[v])),_:1},8,["showing"])],64)}var k=i(61959),C=i(30052),D=i.n(C),O=i(77378),E=i(54268),S=i(29938);const I={class:"text-weight-bold"},T={class:"row q-ml-auto q-mr-auto",style:{width:"300px"}},L=["innerHTML"],M=["innerHTML"],F={key:1},q=(0,o._)("img",{src:"settings/export.svg",width:"100","aria-hidden":"true"},null,-1),Z={style:{padding:"20px"}},R={class:"text-white"};function W(e,t,i,a,l,n){const r=(0,o.up)("q-btn"),d=(0,o.up)("q-toolbar-title"),c=(0,o.up)("q-toolbar"),u=(0,o.up)("q-item-label"),h=(0,o.up)("q-tooltip"),m=(0,o.up)("q-item-section"),p=(0,o.up)("q-item"),_=(0,o.up)("q-icon"),g=(0,o.up)("q-select"),f=(0,o.up)("q-file"),w=(0,o.up)("q-card-section"),y=(0,o.up)("q-card"),b=(0,o.up)("q-dialog"),v=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(r,{color:"primary",icon:"file_upload",style:{"margin-right":"10px","margin-left":"10px"},onClick:t[0]||(t[0]=t=>{e.multiUploaderDialog=!0,e.uploadedFiles="",e.language_origin=null}),label:e.$t("pages.settings.import")},null,8,["label"]),(0,o.Wm)(b,{modelValue:e.multiUploaderDialog,"onUpdate:modelValue":t[6]||(t[6]=t=>e.multiUploaderDialog=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{style:{width:"800px","max-width":"80vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o._)("span",I,(0,s.zw)(e.$t("pages.land.heading1")),1),(0,o.Uk)(" "+(0,s.zw)(e.$t("pages.land.heading2")),1)])),_:1}),(0,o.wy)((0,o.Wm)(r,{flat:"",round:"",dense:"",icon:"close"},null,512),[[v]])])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o._)("div",T,[(0,o.Wm)(g,{modelValue:e.language_origin,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.language_origin=t),e.uploadFile],outlined:"",style:{width:"380px"},options:e.language_origin_list,label:e.$t("amount_date_format"),"error-message":e.$t("field_required"),error:e.origin_error},{option:(0,o.w5)((e=>[(0,o.Wm)(p,(0,s.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1024),e.opt.description?((0,o.wg)(),(0,o.j4)(h,{key:0},{default:(0,o.w5)((()=>[(0,o._)("span",{innerHTML:e.opt.description},null,8,L)])),_:2},1024)):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1040)])),after:(0,o.w5)((()=>[(0,o.Wm)(_,{size:"md",name:"info",color:e.language_origin?"primary":"grey",class:"secondary-c-text cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[e.language_origin?((0,o.wg)(),(0,o.iD)("span",{key:0,innerHTML:e.language_origin.description},null,8,M)):((0,o.wg)(),(0,o.iD)("span",F,(0,s.zw)(e.$t("amounts_dates_format")),1))])),_:1})])),_:1},8,["color"])])),_:1},8,["modelValue","options","onUpdate:modelValue","label","error-message","error"])]),(0,o._)("div",{class:"drag-area text-center full-width",style:{padding:"20px"},id:"box-droppable",onDrop:t[3]||(t[3]=(...t)=>e.drop&&e.drop(...t)),onDragover:t[4]||(t[4]=(...t)=>e.allowDrop&&e.allowDrop(...t)),onDragleave:t[5]||(t[5]=(...t)=>e.dragLeave&&e.dragLeave(...t))},[q,(0,o._)("div",Z,(0,s.zw)(e.$t("pages.land.dragndrop")),1),(0,o.Wm)(f,{style:{width:"43% !important",margin:"auto","white-space":"nowrap"},color:"white","label-color":"white","bg-color":"primary",class:"doc-file",filled:"",multiple:"","onUpdate:modelValue":[e.processUploadFiles,t[2]||(t[2]=t=>e.uploadedFiles=t)],modelValue:e.uploadedFiles,label:e.$t("pages.land.upload")},{prepend:(0,o.w5)((()=>[(0,o.Wm)(_,{name:"attachment"})])),file:(0,o.w5)((({index:e,file:t})=>[(0,o._)("div",R,(0,s.zw)(t.name),1),(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.name),1)])),_:2},1024),(0,o.kq)("",!0)])),_:1},8,["onUpdate:modelValue","modelValue","label"])],32)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var A=i(45401),V=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const z=(0,o.aZ)({el:"#app",mixins:[O.Z,A.Z],props:{doc_type:{type:String,default:""},doc_type_key:{type:String,default:""},training_doc_limit:{type:Number,default:0},re_train:{type:Boolean},language_origin_list:[]},watch:{},components:{},data(){return{}},methods:{processUploadFiles(e){this.uploadedFiles=e,this.uploadFile()},uploadFile(){try{this.getOrigin();if(!this.uploadedFiles)return;this.uploadToServer(this.uploadedFiles)}catch(e){}},allowDrop(e){e.preventDefault(),e.currentTarget.classList.add("bg-grey-5"),e.currentTarget.classList.add("bd-shadow")},drop(e){e.preventDefault(),e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow"),this.uploadedFiles=e.dataTransfer.files,this.uploadFile()},dragLeave(e){e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow")},uploadToServer(e){return V(this,void 0,void 0,(function*(){try{this.showLoading(),this.multiUploaderDialog=!1;const t=this.getOrigin();let i,o=new FormData,s=0;for(let l of e)"application/pdf"===l.type?o.append("files",l):s++;if(s>0)throw{message:this.$t("pages.messages.INVALID_FILES")};o.append("doc_locale",t),o.append("doc_type",this.doc_type_key);let a=yield(0,E.O_)();if(i=yield D().post(E.hi.add_sample_document_trainer,o,{headers:{"Content-Type":"multipart/form-data",Authorization:a}}),this.uploadedFiles="",!1===i.data.success)throw{message:this.$t("pages.messages.DOC_UPLOAD_ERROR")};i.data.already_existing_documents&&i.data.already_existing_documents.length>0?this.showErrorToast(i.data.already_existing_documents.length+this.$t("pages.messages.ALREADY_UPLOADED")):!0===i.data.success&&this.showSuccessToast(this.$t("pages.messages.DOC_UPLOAD")),this.$forceUpdate(),this.triggerRefreshEvent()}catch(t){if(null!=t&&"object"==typeof t&&t.hasOwnProperty("message"))return void this.showErrorToast(t.message);this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},getOrigin(){let e="";if(this.origin_error=!1,null===this.language_origin||0==(0,S.v7)(this.language_origin))throw this.origin_error=!0,"Please Select Origin";if(this.language_origin["locale"]){let t=this.language_origin["locale"];e=t.substring(0,5)}if(0==e.length)throw this.origin_error=!0,"Please Select Origin";return e},triggerRefreshEvent(){const e=new CustomEvent("refresh_sample_data",{detail:{}});document.dispatchEvent(e)}},setup(){return{multiUploaderDialog:(0,k.iH)(!1),uploadedFiles:(0,k.iH)(""),language_origin:(0,k.iH)(null),origin_error:(0,k.iH)(!1)}}});var B=i(74260),N=i(2165),P=i(46778),U=i(10151),j=i(39570),H=i(13747),$=i(25589),Q=i(72448),Y=i(83414),J=i(52035),K=i(2350),G=i(5363),X=i(24554),ee=i(64974),te=i(60677),ie=i(7518),oe=i.n(ie);const se=(0,B.Z)(z,[["render",W]]),ae=se;oe()(z,"components",{QBtn:N.Z,QDialog:P.Z,QCard:U.Z,QToolbar:j.Z,QToolbarTitle:H.Z,QCardSection:$.Z,QSelect:Q.Z,QItem:Y.Z,QItemSection:J.Z,QItemLabel:K.Z,QTooltip:G.Z,QIcon:X.Z,QFile:ee.Z}),oe()(z,"directives",{ClosePopup:te.Z});const le={align:"center"},ne=(0,o.Uk)(" Training... "),re={class:"text-weight-bold"},de={class:"row"},ce={class:"col-12"},ue=(0,o._)("img",{src:"settings/export.svg",width:"100","aria-hidden":"true"},null,-1),he={class:"q-mb-md"},me={class:"text-white"},pe={class:"row"},_e={class:"col-12"},ge={class:"text-center full-width"},fe=(0,o._)("span",{class:"text-weight-bold"},"Status: ",-1),we={class:"q-ml-md"},ye={class:"row"},be={class:"col-12"},ve={class:"text-center full-width"},xe=(0,o._)("span",{class:"text-weight-bold"},"Doc Type:",-1),ke={class:"q-ml-md"},Ce={class:"row"},De={class:"col-12"},Oe={class:"full-width flex flex-center"},Ee=(0,o._)("span",{class:"text-weight-bold"},"Doc Type Score:",-1),Se={class:"q-ml-md"},Ie={class:"row"},Te={class:"col-12"},Le={class:"text-center full-width"},Me=(0,o._)("span",{class:"text-weight-bold"},"Doc Locale:",-1),Fe={class:"q-ml-md"},qe={class:"row"},Ze={class:"col-12"},Re={class:"text-center full-width"},We=(0,o._)("span",{class:"text-weight-bold"},"Doc Locale Score:",-1),Ae={class:"q-ml-md"};function Ve(e,t,i,a,l,n){const r=(0,o.up)("q-spinner-hourglass"),d=(0,o.up)("q-btn"),c=(0,o.up)("q-toolbar-title"),u=(0,o.up)("q-toolbar"),h=(0,o.up)("q-icon"),m=(0,o.up)("q-tooltip"),p=(0,o.up)("q-file"),_=(0,o.up)("q-badge"),g=(0,o.up)("q-card-section"),f=(0,o.up)("q-inner-loading"),w=(0,o.up)("q-card"),y=(0,o.up)("q-dialog"),b=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",le,[(0,o.Wm)(d,{color:"primary",class:"q-mb-md",disable:e.list_data.length<10&&0!==e.training_doc_limit,onClick:e.trainModel,loading:e.loading},{loading:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"on-left"}),ne])),default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("train_model"))+" ",1)])),_:1},8,["disable","onClick","loading"]),(0,o.Wm)(d,{color:"primary",class:"q-ml-sm q-mb-md",disable:e.list_data.length<10&&0!==e.training_doc_limit,onClick:t[0]||(t[0]=t=>{e.multiUploaderDialog=!0,e.uploadedFiles=null,e.resetTestResults()}),label:e.$t("test_classification")},null,8,["disable","label"])]),(0,o.Wm)(y,{modelValue:e.multiUploaderDialog,"onUpdate:modelValue":t[5]||(t[5]=t=>e.multiUploaderDialog=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{style:{"min-width":"30vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("span",re,(0,s.zw)(e.$t("test_classification")),1)])),_:1}),(0,o.wy)((0,o.Wm)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[b]])])),_:1}),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o._)("div",de,[(0,o._)("div",ce,[(0,o._)("div",{class:"drag-area text-center full-width q-mb-md",id:"box-droppable",onDrop:t[2]||(t[2]=(...t)=>e.drop&&e.drop(...t)),onDragover:t[3]||(t[3]=(...t)=>e.allowDrop&&e.allowDrop(...t)),onDragleave:t[4]||(t[4]=(...t)=>e.dragLeave&&e.dragLeave(...t))},[ue,(0,o._)("div",he,(0,s.zw)(e.$t("pages.land.dragndrop")),1),(0,o.Wm)(p,{style:{width:"30%",margin:"auto","white-space":"nowrap"},color:"white","label-color":"white","bg-color":"primary",class:"doc-file",filled:"",multiple:"","onUpdate:modelValue":[e.uploadFile,t[1]||(t[1]=t=>e.uploadedFiles=t)],modelValue:e.uploadedFiles,label:e.$t("pages.land.upload")},{prepend:(0,o.w5)((()=>[(0,o.Wm)(h,{name:"attachment"})])),file:(0,o.w5)((({index:e,file:t})=>[(0,o._)("div",me,(0,s.zw)(t.name),1),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.name),1)])),_:2},1024),(0,o.kq)("",!0)])),_:1},8,["onUpdate:modelValue","modelValue","label"])],32)])]),""!==e.test_results_doc_type?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",pe,[(0,o._)("div",_e,[(0,o._)("div",ge,[fe,(0,o._)("span",we,[e.test_results_doc_type==this.doc_type?((0,o.wg)(),(0,o.j4)(_,{key:0,color:"green","text-color":"white",label:"Success"})):((0,o.wg)(),(0,o.j4)(_,{key:1,color:"red","text-color":"white",label:"Failed"}))])])])]),e.test_results_doc_type==this.doc_type?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",ye,[(0,o._)("div",be,[(0,o._)("div",ve,[xe,(0,o._)("span",ke,(0,s.zw)(this.test_results.doc_type),1)])])]),(0,o._)("div",Ce,[(0,o._)("div",De,[(0,o._)("div",Oe,[Ee,(0,o._)("span",Se,(0,s.zw)(e.docTypeScoreLabel),1)])])]),(0,o._)("div",Ie,[(0,o._)("div",Te,[(0,o._)("div",Le,[Me,(0,o._)("span",Fe,(0,s.zw)(this.test_results.doc_locale),1)])])]),(0,o._)("div",qe,[(0,o._)("div",Ze,[(0,o._)("div",Re,[We,(0,o._)("span",Ae,(0,s.zw)(e.docLocaleScoreLabel),1)])])])],64)):(0,o.kq)("",!0)],64)):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(f,{showing:e.processing_classification,class:"z-index-1"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{color:"primary",size:"6em"})])),_:1},8,["showing"])])),_:1})])),_:1},8,["modelValue"])],64)}var ze=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const Be=(0,o.aZ)({el:"#app",mixins:[O.Z],props:{doc_type:{type:String,default:""},doc_type_key:{type:String,default:""},training_doc_limit:{type:Number,default:0},list_data:[]},watch:{},components:{},data(){return{}},mounted(){this.resetTestResults()},methods:{uploadFile(e){this.uploadedFiles=e;let t=this.uploadedFiles;t||this.showErrorToast(this.$t("pages.messages.NO_FILE_SELECTED")),this.uploadToServer(t)},allowDrop(e){e.preventDefault(),e.currentTarget.classList.add("bg-grey-5"),e.currentTarget.classList.add("bd-shadow")},drop(e){e.preventDefault(),e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow"),this.uploadToServer(e.dataTransfer.files)},dragLeave(e){e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow")},resetTestResults(){this.test_results_doc_type="INVOICE",this.test_results={doc_type:"INVOICE",doc_type_score:.9687122862,doc_type_classification_method:"tfidf",doc_locale:"de_DE",doc_locale_score:.9687122862},this.test_results_doc_type="",this.test_results={}},uploadToServer(e){return ze(this,void 0,void 0,(function*(){try{this.processing_classification=!0,this.resetTestResults(),this.uploadedFiles=null;let t,i=new FormData;for(let s of e)i.append("file",s);let o=yield(0,E.O_)();if(t=yield D().post(E.hi.test_classification,i,{headers:{"Content-Type":"multipart/form-data",Authorization:o}}),!1===t.data.success)throw{message:this.$t("pages.messages.DOC_UPLOAD_ERROR")};this.test_results_doc_type=t.data.data.doc_type,this.test_results=t.data.data,this.doc_type_score=t.data.data.doc_type_score,this.doc_locale_score=t.data.data.doc_locale_score}catch(t){if(null!=t&&"object"==typeof t&&t.hasOwnProperty("message"))return void this.showErrorToast(t.message);this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.processing_classification=!1}}))},trainModel(){return ze(this,void 0,void 0,(function*(){try{this.loading=!0,yield this.reTrainModel(),this.showSuccessToast("Model Trained successfully")}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.loading=!1}}))},reTrainModel(){return ze(this,void 0,void 0,(function*(){let e,t=new FormData,i=yield(0,E.O_)();if(e=yield D().post(E.hi.retrain_model,t,{headers:{"Content-Type":"multipart/form-data",Authorization:i}}),!1===e.data.success)throw{message:this.$t("pages.messages.DOC_UPLOAD_ERROR")}}))}},computed:{docTypeScoreLabel:function(){return(100*this.doc_type_score).toFixed(0)+"%"},docLocaleScoreLabel:function(){return(100*this.doc_locale_score).toFixed(0)+"%"}},setup(){return{multiUploaderDialog:(0,k.iH)(!1),uploadedFiles:(0,k.iH)(null),loading:(0,k.iH)(!1),processing_classification:(0,k.iH)(!1),test_results_doc_type:(0,k.iH)(""),test_results:(0,k.iH)({}),doc_type_score:(0,k.iH)(),doc_locale_score:(0,k.iH)()}}});var Ne=i(23282),Pe=i(69721),Ue=i(66941);const je=(0,B.Z)(Be,[["render",Ve]]),He=je;oe()(Be,"components",{QBtn:N.Z,QSpinnerHourglass:Ne.Z,QDialog:P.Z,QCard:U.Z,QToolbar:j.Z,QToolbarTitle:H.Z,QCardSection:$.Z,QFile:ee.Z,QIcon:X.Z,QTooltip:G.Z,QBadge:Pe.Z,QInnerLoading:Ue.Z}),oe()(Be,"directives",{ClosePopup:te.Z});var $e=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const Qe=(0,o.aZ)({mixins:[O.Z,A.Z],components:{UploadTrainingFile:ae,TestTrainingFile:He},props:{total_exported:{type:String,default:""},total_trained_by_org:{type:String,default:""},total_trained:{type:String,default:""},doc_type:{type:String,default:""},doc_type_key:{type:String,default:""},max_value:{type:Number,default:0},language_origin_list:[],list_data:[]},watch:{list_data:{deep:!0,handler:function(e,t){setTimeout((()=>{this.prepareRows(e),this.fileProgress()}),0)}}},data(){return{}},mounted:function(){this.prepareRows(this.list_data),this.fileProgress(),this.prepareColumns()},methods:{uploadFile(){try{this.getOrigin();if(!this.uploadedFiles)return;this.uploadToServer(this.uploadedFiles)}catch(e){}},uploadToServer(e){return $e(this,void 0,void 0,(function*(){try{this.showLoading();const t=this.getOrigin();let i,o=new FormData,s=0;for(let l of e)"application/pdf"===l.type?o.append("files",l):s++;if(s>0)throw{message:this.$t("pages.messages.INVALID_FILES")};o.append("doc_locale",t),o.append("doc_type",this.doc_type_key);let a=yield(0,E.O_)();if(i=yield D().post(E.hi.add_sample_document_trainer,o,{headers:{"Content-Type":"multipart/form-data",Authorization:a}}),this.uploadedFiles="",!1===i.data.success)throw{message:this.$t("pages.messages.DOC_UPLOAD_ERROR")};i.data.already_existing_documents&&i.data.already_existing_documents.length>0?this.showErrorToast(i.data.already_existing_documents.length+this.$t("pages.messages.ALREADY_UPLOADED")):!0===i.data.success&&this.showSuccessToast(this.$t("pages.messages.DOC_UPLOAD")),this.$forceUpdate(),this.triggerRefreshEvent()}catch(t){if(null!=t&&"object"==typeof t&&t.hasOwnProperty("message"))return void this.showErrorToast(t.message);this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},triggerRefreshEvent(){const e=new CustomEvent("refresh_sample_data",{detail:{}});document.dispatchEvent(e)},getOrigin(){let e="";if(this.origin_error=!1,null===this.language_origin||0==(0,S.v7)(this.language_origin))throw this.origin_error=!0,"Please Select Origin";if(this.language_origin["locale"]){let t=this.language_origin["locale"];e=t.substring(0,5)}if(0==e.length)throw this.origin_error=!0,"Please Select Origin";return e},allowDrop(e){e.preventDefault(),e.currentTarget.classList.add("bg-grey-5"),e.currentTarget.classList.add("bd-shadow")},drop(e){e.preventDefault(),e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow"),this.uploadedFiles=e.dataTransfer.files,this.uploadFile()},dragLeave(e){e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow")},prepareColumns(){this.columns=[],this.columns.push(Object.assign({},{name:"name",label:"Name",field:"name",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("pages.export.actions"),field:"action",align:"right"}))},prepareRows(e){this.rows=[],this.columns_list={};for(let[t,i]of Object.entries(e)){const e=i;this.addNewRow(e)}},addNewRow(e){let t=Object.assign({},e);return t["name"]=e.sample_file_name,this.rows.push(t),t},handleDelete(e,t){return $e(this,void 0,void 0,(function*(){try{if(""===e.id)return;let t;this.loading=!0;let i=yield(0,E.O_)();if(t=yield D()["delete"](E.hi.delete_sample_document_trainer+"/"+e.id,{headers:{Authorization:i}}),t.data&&t.data.hasOwnProperty("success")&&!1===t.data.success)throw{message:t.data.message};const o=new CustomEvent("sample_file_delete",{detail:e.id});document.dispatchEvent(o)}catch(t){throw{message:this.$t("pages.messages.ERROR_INTERNAL_OCCUR")}}finally{this.loading=!1}}))},fileProgress(){this.value=this.rows.length}},setup(){const e=(0,k.iH)("");let t=[],i={};const o=(0,k.iH)(t);return{columns:o,filter:e,rows:(0,k.iH)(t),uploadedFiles:(0,k.iH)(""),language_origin:(0,k.iH)(null),origin_error:(0,k.iH)(!1),loading:(0,k.iH)(!1),columns_list:(0,k.iH)(i),selected:(0,k.iH)(t),min_value:(0,k.iH)(0),value:(0,k.iH)(0)}}});var Ye=i(86122),Je=i(17132),Ke=i(83884),Ge=i(86115);const Xe=(0,B.Z)(Qe,[["render",x]]),et=Xe;oe()(Qe,"components",{QCard:U.Z,QCircularProgress:Ye.Z,QTooltip:G.Z,QSelect:Q.Z,QItem:Y.Z,QItemSection:J.Z,QItemLabel:K.Z,QBtn:N.Z,QTable:Je.Z,QTd:Ke.Z,QInnerLoading:Ue.Z,QField:Ge.Z})},8471:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>We});var o=i(83673),s=i(62323);const a=e=>((0,o.dD)("data-v-67a127ab"),e=e(),(0,o.Cn)(),e),l={class:"container text-color-grey"},n={class:"text-weight-bolder text-h6"},r={class:"q-item__label q-item__label--caption text-caption"},d={class:"row model-info ml-50"},c={class:"col-4"},u={class:"text-weight-bolder"},h={class:"col-3"},m={class:"text-weight-bolder"},p={class:"text-lowercase q-ml-sm"},_={class:"col-2"},g={class:"text-weight-bolder"},f={class:"row label-list ml-50"},w={class:"col-12"},y={key:1,class:"row"},b={class:"col-12 text-center"},v={class:"q-ml-sm"},x=a((()=>(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1)));function k(e,t,i,a,k,C){const D=(0,o.up)("q-badge"),O=(0,o.up)("q-icon"),E=(0,o.up)("q-item-section"),S=(0,o.up)("q-btn"),I=(0,o.up)("q-separator"),T=(0,o.up)("LabelsList"),L=(0,o.up)("q-card-section"),M=(0,o.up)("q-card"),F=(0,o.up)("q-expansion-item"),q=(0,o.up)("q-list"),Z=(0,o.up)("q-avatar"),R=(0,o.up)("q-card-actions"),W=(0,o.up)("q-dialog"),A=(0,o.up)("q-inner-loading"),V=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[0!==e.model_list.length?((0,o.wg)(),(0,o.j4)(q,{key:0,bordered:"",class:"rounded-borders"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.model_list,((t,i)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i},[(0,o.Wm)(F,{"switch-toggle-side":"",modelValue:t["expanded"],"onUpdate:modelValue":e=>t["expanded"]=e,"data-expanded":e.setModelState(t)},{header:(0,o.w5)((()=>[(0,o.Wm)(E,null,{default:(0,o.w5)((()=>[(0,o._)("span",n,[(0,o.Uk)((0,s.zw)(t["model_label"])+" ",1),!0===t.is_default?((0,o.wg)(),(0,o.j4)(D,{key:0,transparent:"",align:"middle",color:"orange"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("default")),1)])),_:1})):(0,o.kq)("",!0)]),(0,o._)("div",r,[(0,o.Wm)(O,{name:"sell",size:"18px",color:0==e.getLableCountForModel(t["model_name"])?"grey-7":"primary",class:"cursor-pointer"},null,8,["color"]),(0,o.Uk)(" "+(0,s.zw)(e.getLableCountForModel(t["model_name"]))+" Label ",1)])])),_:2},1024),(0,o.kq)("",!0)])),default:(0,o.w5)((()=>[(0,o.Wm)(I),(0,o.Wm)(M,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[(0,o._)("div",d,[(0,o._)("div",c,[(0,o._)("span",u,(0,s.zw)(e.$t("type")+":"),1),(0,o.Uk)(" "+(0,s.zw)(t["model_type"]),1)]),(0,o._)("div",h,[(0,o._)("span",m,(0,s.zw)(e.$t("first_page_only")+":"),1),(0,o._)("span",p,(0,s.zw)(0==t["first_page_classification_only"]?e.$t("form_builder.no"):e.$t("form_builder.yes")),1)]),(0,o._)("div",_,[(0,o._)("span",g,(0,s.zw)(e.$t("version")+":"),1),(0,o.Uk)(" "+(0,s.zw)(t["model_version"]),1)])]),(0,o._)("div",f,[(0,o._)("div",w,[(0,o.Wm)(T,{model:t["model_name"]},null,8,["model"])])])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","data-expanded"]),(0,o.Wm)(I)],64)))),128))])),_:1})):(0,o.kq)("",!0),e.loading||0!=e.model_list.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",y,[(0,o._)("div",b,(0,s.zw)(e.$t("pages.messages.NO_RECORD_FOUND")),1)]))]),(0,o.Wm)(W,{modelValue:e.deleteConfirm,"onUpdate:modelValue":t[3]||(t[3]=t=>e.deleteConfirm=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(M,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(L,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",v,(0,s.zw)(e.$t("sure")),1)])),_:1}),(0,o.Wm)(R,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(S,{flat:"",label:e.$t("cancel"),"data-cy":"cancel",color:"primary"},null,8,["label"]),[[V]]),(0,o.wy)((0,o.Wm)(S,{flat:"",label:e.$t("delete"),"data-cy":"delete-popup",color:"primary",onClick:t[2]||(t[2]=t=>e.deleteLayout())},null,8,["label"]),[[V]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(A,{showing:e.loading},{default:(0,o.w5)((()=>[x])),_:1},8,["showing"])],64)}var C=i(77378),D=i(61959),O=i(45401),E=i(80579),S=i(9273),I=i(98880);const T={class:"full-width"},L={class:"row q-mt-md"},M={class:"col-lg-12"},F={key:0,class:"row q-mb-md"},q={class:"col-lg-12"},Z={class:"sticky-column"},R={class:"text-h4 text-uppercase"},W=["data-id"],A={class:"text-h4"},V={key:0},z=["colspan"],B={class:"q-ml-sm"},N=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function P(e,t,i,a,l,n){const r=(0,o.up)("q-input"),d=(0,o.up)("q-icon"),c=(0,o.up)("q-badge"),u=(0,o.up)("q-btn"),h=(0,o.up)("q-tooltip"),m=(0,o.up)("q-markup-table"),p=(0,o.up)("q-avatar"),_=(0,o.up)("q-card-section"),g=(0,o.up)("q-card-actions"),f=(0,o.up)("q-card"),w=(0,o.up)("q-dialog"),y=(0,o.up)("editCreateLabel"),b=(0,o.up)("q-inner-loading"),v=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",T,[(0,o._)("div",L,[(0,o._)("div",M,[(0,o.Wm)(r,{dense:"",modelValue:e.search_labels,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.search_labels=t),e.filterLabelsEvent],onKeyup:(0,I.D2)(e.filterLabelsEvent,["enter"]),label:e.$t("pages.settings.search_labels"),outlined:""},null,8,["modelValue","onKeyup","onUpdate:modelValue","label"])])]),e.search_labels?((0,o.wg)(),(0,o.iD)("div",F,[(0,o._)("div",q,[(0,o.Wm)(c,{rounded:"",color:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)("Search By: "+e.search_labels.toLowerCase())+" ",1),(0,o.Wm)(d,{name:"close",color:"white",class:"q-ml-xs cursor-pointer",onClick:t[1]||(t[1]=t=>e.removeFilter())})])),_:1})])])):(0,o.kq)("",!0),(0,o.Wm)(m,{class:"q-mt-md sticky-column-for-table labels-table"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",Z,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.columns,(e=>((0,o.wg)(),(0,o.iD)("th",{key:e.name,class:"text-h4 text-uppercase relative-position"},(0,s.zw)(e.label),1)))),128)),(0,o._)("th",R,(0,s.zw)(e.$t("actions")),1)])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.rows,((t,i)=>((0,o.wg)(),(0,o.iD)("tr",{key:i,class:"sticky-column","data-id":t.id},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.columns,(i=>((0,o.wg)(),(0,o.iD)("td",{key:i.name,class:"text-h4"},["associated_doc_type"===i.name?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)((0,s.zw)(e.docTypeLabel(t)),1)],64)):"associated_sub_doc_type"===i.name?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,s.zw)(e.subDocTypeLabel(t)),1)],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:2},[(0,o.Uk)((0,s.zw)(t[i.name]),1)],64))])))),128)),(0,o._)("td",A,[(0,o.kq)("",!0),(0,o.Wm)(u,{class:"float-right",color:"grey","icon-right":"edit","no-caps":"",flat:"",dense:"",onClick:i=>e.editRow(t)},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("edit")),1)])),_:1})])),_:2},1032,["onClick"])])],8,W)))),128)),e.loading||0!=e.rows.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("tr",V,[(0,o._)("th",{colspan:e.columns.length,class:"text-h4 text-center"},(0,s.zw)(e.$t("pages.messages.NO_RECORD_FOUND")),9,z)]))])])),_:1})]),(0,o.Wm)(w,{modelValue:e.deleteConfirm,"onUpdate:modelValue":t[4]||(t[4]=t=>e.deleteConfirm=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(_,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",B,(0,s.zw)(e.$t("sure")),1)])),_:1}),(0,o.Wm)(g,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(u,{flat:"",label:e.$t("cancel"),"data-cy":"cancel",color:"primary"},null,8,["label"]),[[v]]),(0,o.wy)((0,o.Wm)(u,{flat:"",label:e.$t("delete"),"data-cy":"delete-popup",color:"primary",onClick:t[3]||(t[3]=t=>e.deleteLayout())},null,8,["label"]),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(w,{modelValue:e.display_create_edit_dialog,"onUpdate:modelValue":t[5]||(t[5]=t=>e.display_create_edit_dialog=t),persistent:"",onKeydown:t[6]||(t[6]=(0,I.D2)((t=>e.display_create_dialog=!1),["esc"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{list_data:e.data,model:e.edit_model},null,8,["list_data","model"])])),_:1},8,["modelValue"]),(0,o.Wm)(b,{showing:e.loading},{default:(0,o.w5)((()=>[N])),_:1},8,["showing"])],64)}var U=i(53371),j=i(60727);const H={class:"text-weight-bold"},$=(0,o._)("div",{class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},[(0,o._)("div",{class:"full-width"})],-1),Q={class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},Y={class:"full-width"},J={class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},K={class:"full-width"},G=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function X(e,t,i,a,l,n){const r=(0,o.up)("q-toolbar-title"),d=(0,o.up)("q-btn"),c=(0,o.up)("q-toolbar"),u=(0,o.up)("q-tooltip"),h=(0,o.up)("q-icon"),m=(0,o.up)("q-select"),p=(0,o.up)("q-card-section"),_=(0,o.up)("q-card-actions"),g=(0,o.up)("q-inner-loading"),f=(0,o.up)("q-card"),w=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(f,{style:{width:"600px"}},{default:(0,o.w5)((()=>[(0,o._)("form",{onSubmit:t[4]||(t[4]=(0,I.iM)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.Wm)(c,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o._)("span",H,(0,s.zw)(e.$t("Edit Label")),1)])),_:1}),(0,o.wy)((0,o.Wm)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[w]])])),_:1}),(0,o.Wm)(p,{class:"q-pt-none"},{default:(0,o.w5)((()=>[$,(0,o._)("div",Q,[(0,o._)("div",Y,[(0,o.Wm)(m,{clearable:"",modelValue:e.new_model["further_classification_model"],"onUpdate:modelValue":[t[0]||(t[0]=t=>e.new_model["further_classification_model"]=t),t[1]||(t[1]=t=>e.new_model["associated_doc_type"]="")],"use-input":"",options:e.filteredModels,onFilter:e.filteredModelsEvent,"emit-value":"","map-options":"",label:e.$t("Next Model")},{append:(0,o.w5)((()=>[e.new_model["next_model_or_doc_type_required"]?((0,o.wg)(),(0,o.j4)(h,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[e.new_model["next_model_or_doc_type_required"]?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)((0,s.zw)(e.$t("next_model_or_doc_type_required")),1)],64)):(0,o.kq)("",!0)])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},8,["modelValue","options","onFilter","label"])])]),(0,o._)("div",J,[(0,o._)("div",K,[(0,o.Wm)(m,{clearable:"",modelValue:e.new_model["associated_doc_type"],"onUpdate:modelValue":[t[2]||(t[2]=t=>e.new_model["associated_doc_type"]=t),t[3]||(t[3]=t=>e.new_model["further_classification_model"]="")],"use-input":"",options:e.filterDocTypeList,onFilter:e.filterDocTypeListEvent,"emit-value":"","map-options":"",label:e.$t("pages.screen2a.doctype")},{append:(0,o.w5)((()=>[e.new_model["next_model_or_doc_type_required"]?((0,o.wg)(),(0,o.j4)(h,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[e.new_model["next_model_or_doc_type_required"]?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)((0,s.zw)(e.$t("next_model_or_doc_type_required")),1)],64)):(0,o.kq)("",!0)])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},8,["modelValue","options","onFilter","label"])])])])),_:1}),(0,o.Wm)(_,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(d,{class:"bg-grey-3",label:e.$t("cancel")},null,8,["label"]),[[w]]),(0,o.Wm)(d,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,o.Wm)(g,{showing:e.loading},{default:(0,o.w5)((()=>[G])),_:1},8,["showing"])])),_:1})}var ee=i(10321),te=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const ie=(0,o.aZ)({el:"#app",mixins:[C.Z,O.Z],props:{model:{type:Object}},components:{},data(){return{message:this.$t("only_characters_spaces")}},setup(){let e={};const t=(0,j.At)(),i=(0,D.iH)(t.doc_type_list),{doc_type_list:o}=(0,ee.Jk)(t),s=(0,j.xs)(),{model_list:a}=(0,ee.Jk)(s);return{model_list:a,models:(0,D.iH)([]),filteredModels:(0,D.iH)([]),filterDocTypeList:i,doc_type_list:o,new_model:(0,D.iH)(e),loading:(0,D.iH)(!1),form_error:(0,D.iH)("")}},watch:{},mounted(){this.setNewModel(),this.modelsDropdownList()},methods:{setNewModel(){this.model?this.new_model=this.model:(this.new_model["further_classification_model"]="",this.new_model["associated_doc_type"]=""),this.resetErrors()},resetErrors(){this.new_model["next_model_or_doc_type_required"]=!1},modelsDropdownList(){this.model_list.forEach((e=>{const t=Object.assign({},{value:e.model_name,label:e.model_name});this.models.push(t),this.filteredModels.push(t)}))},filteredModelsEvent(e,t,i){t(e?()=>{const t=e.toLowerCase();this.filteredModels=this.models.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}:()=>{this.filteredModels=this.models})},filterDocTypeListEvent(e,t,i){t(e?()=>{const t=e.toLowerCase();this.filterDocTypeList=this.doc_type_list.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}:()=>{this.filterDocTypeList=this.doc_type_list})},submitNewColumFrom(){return te(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){const t=S.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}}))},saveNewRow(){return te(this,void 0,void 0,(function*(){try{const e=this.setDataForApiRequest();let t;e.hasOwnProperty("id")&&(t=yield E.ZC.updateLabel(e)),this.setNewModel();const i=new CustomEvent("record_saved",{detail:{}});document.dispatchEvent(i),this.showSuccessToast(this.$t("OPERATION_SUCESSFULL"))}catch(e){const t=S.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}}))},setDataForApiRequest(){let e={};for(const[t,i]of Object.entries(this.new_model))e[t]=i||"";return e},validateRow(e){let t=!0;return this.resetErrors(),e["further_classification_model"]||e["associated_doc_type"]||(this.new_model["next_model_or_doc_type_required"]=!0,this.showErrorToast(this.$t("next_model_or_doc_type_required")),t=!1),t}}});var oe=i(74260),se=i(10151),ae=i(39570),le=i(13747),ne=i(2165),re=i(25589),de=i(72448),ce=i(24554),ue=i(5363),he=i(99367),me=i(66941),pe=i(60677),_e=i(7518),ge=i.n(_e);const fe=(0,oe.Z)(ie,[["render",X]]),we=fe;ge()(ie,"components",{QCard:se.Z,QToolbar:ae.Z,QToolbarTitle:le.Z,QBtn:ne.Z,QCardSection:re.Z,QSelect:de.Z,QIcon:ce.Z,QTooltip:ue.Z,QCardActions:he.Z,QInnerLoading:me.Z}),ge()(ie,"directives",{ClosePopup:pe.Z});var ye=i(1903),be=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const ve=(0,o.aZ)({el:"#app",mixins:[O.Z,C.Z,ye.Z],components:{editCreateLabel:we},props:{model:{type:String,default:""}},watch:{model:{handler:function(e,t){this.setModelName(),this.getLabels()}}},data(){return{selectedRowId:(0,D.iH)(""),deleteConfirm:(0,D.iH)(!1)}},mounted(){this.initView(),document.addEventListener("record_saved",this.recordSaved)},unmounted:function(){document.removeEventListener("record_saved",this.recordSaved)},methods:{initView(){return be(this,void 0,void 0,(function*(){try{this.loading=!0,this.setDocType(),this.setModelName(),yield this.getLabels(),this.prepareColumns()}catch(e){const t=S.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}}))},setDocType(){this.doc_type="",this.$route.query&&this.$route.query.doc_type&&(this.doc_type=String(this.$route.query.doc_type),this.search_labels=this.doc_type)},setModelName(){this.model_name=this.model,this.$route.query&&this.$route.query.model&&(this.model_name=String(this.$route.query.model))},getLabels(){return be(this,void 0,void 0,(function*(){try{if(!this.model_name)throw{message:"Cannot load List.Model Name is missing"};this.resetData();const e=yield E.ZC.getModelLabels(this.model_name);if(!1===e.success)throw this.showErrorToast(e.message),{message:e.message};this.label_list=e,this.prepareRows(e),this.setLabelCount()}catch(e){}}))},prepareRows(e,t=!1){this.rows=[],e.sort(((e,t)=>e.priority-t.priority)),this.rows=e,this.setLabelsForModels(this.model_name,this.rows.length),t||""==this.doc_type||this.filterLabelsEvent()},resetData(){this.labels_count=0,this.label_list=[]},setLabelCount(){Array.isArray(this.label_list)&&0!=this.label_list.length&&(this.labels_count=this.label_list.length,this.setLabelsForModels(this.model_name,this.labels_count))},prepareColumns(){this.columns=[],this.columns.push(Object.assign({},{name:"label_name",label:this.$t("name"),field:"label_name",align:"left"})),this.columns.push(Object.assign({},{name:"further_classification_model",label:U.i18n.t("next_model"),field:"further_classification_model",align:"left"})),this.columns.push(Object.assign({},{name:"associated_doc_type",label:this.$t("belegtyp"),field:"associated_doc_type",align:"left"})),this.columns.push(Object.assign({},{name:"associated_sub_doc_type",label:this.$t("sub_doc_type"),field:"associated_sub_doc_type",align:"left"})),this.columns.push(Object.assign({},{name:"priority",label:U.i18n.t("priority"),field:"priority",align:"left"}))},editRow(e){this.edit_model=e,this.display_create_edit_dialog=!0},recordSaved(){this.getLabels(),this.display_create_edit_dialog=!1},filterLabelsEvent(){const e=["model_name"],t=this.search_labels.toLowerCase();let i=this.rows;t&&""!==t?(i=this.label_list.filter(((i,o)=>{let s=!1;for(let[a,l]of Object.entries(i)){let i=l,o=i&&null!==i?i.toString():"";if(i=o.toLowerCase(),i.includes(t)&&!e.includes(a)){s=!0;break}}return s})),this.prepareRows(i,!0)):this.prepareRows(i,!0)},removeFilter(){this.search_labels=""},docTypeLabel(e){return this.getDocTypeLabel({type:e.associated_doc_type||"",title:e.associated_doc_type_title||"",translation_key:e.associated_doc_type_translation_key||""})},subDocTypeLabel(e){return this.getDocTypeLabel({type:e.associated_sub_doc_type||"",title:e.associated_sub_doc_type_title||"",translation_key:e.associated_sub_doc_type_translation_key||""})}},setup(){const e=(0,j.xs)(),{setLabelsForModels:t}=e;return{setLabelsForModels:t,loading:(0,D.iH)(!1),label_list:(0,D.iH)([]),columns:(0,D.iH)([]),rows:(0,D.iH)([]),filter:(0,D.iH)(""),model_name:(0,D.iH)(""),labels_count:(0,D.iH)(0),display_create_edit_dialog:(0,D.iH)(!1),edit_model:(0,D.iH)({}),search_labels:(0,D.iH)(""),doc_type:(0,D.iH)("")}}});var xe=i(64689),ke=i(69721),Ce=i(30481),De=i(46778),Oe=i(75096);const Ee=(0,oe.Z)(ve,[["render",P]]),Se=Ee;ge()(ve,"components",{QInput:xe.Z,QBadge:ke.Z,QIcon:ce.Z,QMarkupTable:Ce.Z,QBtn:ne.Z,QTooltip:ue.Z,QDialog:De.Z,QCard:se.Z,QCardSection:re.Z,QAvatar:Oe.Z,QCardActions:he.Z,QInnerLoading:me.Z}),ge()(ve,"directives",{ClosePopup:pe.Z});var Ie=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const Te=(0,o.aZ)({el:"#app",mixins:[O.Z,C.Z],components:{LabelsList:Se},data(){return{selectedRowId:(0,D.iH)(""),deleteConfirm:(0,D.iH)(!1),selectedRowIndex:(0,D.iH)(0)}},mounted(){this.initView()},methods:{initView(){return Ie(this,void 0,void 0,(function*(){try{this.loading=!0,this.setDocType(),yield this.getAllModels(),this.prepareColumns()}catch(e){const t=S.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}}))},setDocType(){this.doc_type="",this.$route.query&&this.$route.query.doc_type&&(this.doc_type=String(this.$route.query.doc_type))},getAllModels(){return Ie(this,void 0,void 0,(function*(){yield this.getModels()}))},prepareColumns(){this.columns=[],this.columns.push(Object.assign({},{name:"model_name",label:"Name",field:"model_name",align:"left"})),this.columns.push(Object.assign({},{name:"model_type",label:"Type",field:"model_type",align:"left"})),this.columns.push(Object.assign({},{name:"model_version",label:"Version",field:"model_version",align:"left"})),this.columns.push(Object.assign({},{name:"first_page_classification_only",label:"Only First Page Classification",field:"first_page_classification_only",align:"left"}))},setModelState(e){const t=this.getLableCountForModel(e["model_name"]);"0"==t||""==this.doc_type||e["triggered"]||(e["triggered"]=!0,e["expanded"]=!0)},deleteRow(){},handleActive(e,t){return Ie(this,void 0,void 0,(function*(){const i={id:t.id,is_active:String(e)};yield E.ZC.updateModel(i)}))}},setup(){const e=(0,j.xs)(),{setLabelsForModels:t,getLableCountForModel:i,getModels:o}=e,{model_list:s}=(0,ee.Jk)(e);return{getModels:o,getLableCountForModel:i,setLabelsForModels:t,loading:(0,D.iH)(!1),model_list:s,columns:(0,D.iH)([]),doc_type:(0,D.iH)("")}}});var Le=i(27011),Me=i(60429),Fe=i(52035),qe=i(83414),Ze=i(65869);const Re=(0,oe.Z)(Te,[["render",k],["__scopeId","data-v-67a127ab"]]),We=Re;ge()(Te,"components",{QList:Le.Z,QExpansionItem:Me.Z,QItemSection:Fe.Z,QBadge:ke.Z,QItem:qe.Z,QIcon:ce.Z,QBtn:ne.Z,QSeparator:Ze.Z,QCard:se.Z,QCardSection:re.Z,QDialog:De.Z,QAvatar:Oe.Z,QCardActions:he.Z,QInnerLoading:me.Z}),ge()(Te,"directives",{ClosePopup:pe.Z})},13873:(e,t,i)=>{"use strict";i.d(t,{Z:()=>w});var o=i(83673),s=i(62323);const a={key:0,class:"full-width sub-header"},l={class:"row",style:{padding:"10px"}},n={class:"col-4 left-side q-mr-auto",style:{"margin-left":"9px",padding:"4px 18px"}},r={key:0,class:""};function d(e,t,i,d,c,u){const h=(0,o.up)("q-btn"),m=(0,o.up)("SubscriptionAlert");return(0,o.wg)(),(0,o.iD)(o.HY,null,[""!==e.name?((0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",l,[(0,o._)("span",n,(0,s.zw)(e.label),1),(0,o.WI)(e.$slots,"default",{},void 0,!0),e.display_help_link?((0,o.wg)(),(0,o.iD)("span",r,[(0,o.Wm)(h,{flat:"",class:"helpbtn",color:"white",icon:"help",onClick:t[0]||(t[0]=t=>e.goHelp()),target:"_blank"})])):(0,o.kq)("",!0)])])):(0,o.kq)("",!0),e.show_expiry_alert?((0,o.wg)(),(0,o.j4)(m,{key:1})):(0,o.kq)("",!0)],64)}var c=i(12699),u=i(74475);const h=(0,o.aZ)({components:{SubscriptionAlert:u.Z},props:{name:{type:String,default:""},label:{type:String,default:""},show_expiry_alert:{type:Boolean,default:!1},display_help_link:{type:Boolean,default:!0}},mounted:function(){this.initView()},methods:{initView(){},goHelp(){(0,c.Rg)(this.name)&&window.open((0,c.Rg)(this.name))}}});var m=i(74260),p=i(2165),_=i(7518),g=i.n(_);const f=(0,m.Z)(h,[["render",d],["__scopeId","data-v-683f12f2"]]),w=f;g()(h,"components",{QBtn:p.Z})},75592:(e,t,i)=>{"use strict";i.d(t,{Z:()=>Ai});var o=i(83673),s=i(62323);const a=e=>((0,o.dD)("data-v-67ebbb0f"),e=e(),(0,o.Cn)(),e),l={"data-cy":"select-integration",class:"text-h6"},n={style:{"margin-top":"50px"}},r=a((()=>(0,o._)("span",{style:{"letter-spacing":"1px"}},"Webhook",-1))),d={style:{"margin-top":"50px"}},c=a((()=>(0,o._)("img",{width:"30",src:"flow2.svg"},null,-1))),u=a((()=>(0,o._)("span",{style:{"letter-spacing":"1px"}},"Flow",-1))),h={style:{"margin-top":"50px"}},m=a((()=>(0,o._)("img",{width:"53",src:"zugferd-icon.svg"},null,-1))),p=a((()=>(0,o._)("span",{style:{"letter-spacing":"1px"}},"ZUGFeRD",-1))),_={style:{"margin-top":"50px"}},g=a((()=>(0,o._)("img",{src:"infor.jpg"},null,-1))),f=a((()=>(0,o._)("span",{style:{"letter-spacing":"1px"}},"Infor IDM",-1))),w={style:{"margin-top":"50px"}},y=a((()=>(0,o._)("img",{src:"infor.jpg"},null,-1))),b=a((()=>(0,o._)("span",{style:{"letter-spacing":"1px"}},"Infor IDM + ION BOD",-1))),v={style:{"margin-top":"50px"}},x=a((()=>(0,o._)("img",{src:"infor.jpg"},null,-1))),k=a((()=>(0,o._)("span",{style:{"letter-spacing":"1px"}},"Infor IDM + LN",-1))),C={style:{"margin-top":"50px"}},D=a((()=>(0,o._)("img",{src:"infor.jpg"},null,-1))),O=a((()=>(0,o._)("span",{style:{"letter-spacing":"1px"}},"Infor IDM + M3",-1)));function E(e,t,i,a,E,S){const I=(0,o.up)("q-space"),T=(0,o.up)("q-btn"),L=(0,o.up)("q-card-section"),M=(0,o.up)("q-icon"),F=(0,o.up)("q-avatar"),q=(0,o.up)("q-card"),Z=(0,o.up)("InforIdm"),R=(0,o.up)("Webhook"),W=(0,o.up)("Flow2"),A=(0,o.up)("InforIon"),V=(0,o.up)("Zugferd"),z=(0,o.up)("Peppol"),B=(0,o.up)("InforLN"),N=(0,o.up)("InforM3"),P=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[""===e.selected_export?((0,o.wg)(),(0,o.j4)(q,{key:0,style:(0,s.j5)([{width:"1060px","max-width":"1060px"},{"min-height":"300px"}])},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{class:"row items-center q-pb-sm bg-primary"},{default:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o._)("b",null,(0,s.zw)(e.$t("pages.export.selectintegration")),1)]),(0,o.Wm)(I),(0,o.wy)((0,o.Wm)(T,{icon:"close",flat:"",round:"",dense:"",onClick:e.clearStateForExportDialog},null,8,["onClick"]),[[P]])])),_:1}),""===e.selected_export?((0,o.wg)(),(0,o.j4)(L,{key:0,style:{display:"flex","justify-content":"center","padding-bottom":"35px"}},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"rectangle",onClick:t[0]||(t[0]=t=>e.selectedNewExport(e.export_types.WEBHOOK))},[(0,o._)("div",n,[(0,o.Wm)(T,{style:{"margin-bottom":"25px","pointer-events":"none"},size:"25px",round:"",class:"integration-icon","data-cy":"web-hook",icon:"upload"})]),r]),(0,o._)("div",{class:"rectangle",onClick:t[1]||(t[1]=t=>e.selectedNewExport(e.export_types.FLOW2))},[(0,o._)("div",d,[(0,o.Wm)(T,{style:{"margin-bottom":"25px","pointer-events":"none"},size:"25px",round:"",class:"integration-icon"},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{class:"text-red-13",size:"md"},{default:(0,o.w5)((()=>[c])),_:1})])),_:1})]),u]),(0,o._)("div",{class:"rectangle",onClick:t[2]||(t[2]=t=>e.selectedNewExport(e.export_types.ZUGFERD))},[(0,o._)("div",h,[(0,o.Wm)(T,{style:{"margin-bottom":"25px","pointer-events":"none"},size:"25px",round:"",class:"integration-icon"},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{class:"text-red-13",size:"md"},{default:(0,o.w5)((()=>[m])),_:1})])),_:1})]),p]),(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0),""===e.selected_export?((0,o.wg)(),(0,o.j4)(L,{key:1,style:{display:"flex","justify-content":"center","padding-bottom":"35px"}},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"rectangle",onClick:t[4]||(t[4]=t=>e.selectedNewExport(e.export_types.INFOR_IDM_CLOUD))},[(0,o._)("div",_,[(0,o.Wm)(T,{style:{"margin-bottom":"25px","pointer-events":"none"},size:"25px","data-cy":"idm",round:"",class:"integration-icon"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{class:"avatar"},{default:(0,o.w5)((()=>[g])),_:1})])),_:1})]),f]),(0,o._)("div",{class:"rectangle",onClick:t[5]||(t[5]=t=>e.selectedNewExport(e.export_types.INFOR_ION_CLOUD))},[(0,o._)("div",w,[(0,o.Wm)(T,{style:{"margin-bottom":"25px","pointer-events":"none"},size:"25px","data-cy":"ion",round:"",class:"integration-icon"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{class:"avatar"},{default:(0,o.w5)((()=>[y])),_:1})])),_:1})]),b]),(0,o._)("div",{class:"rectangle",onClick:t[6]||(t[6]=t=>e.selectedNewExport(e.export_types.INFOR_LN_CLOUD))},[(0,o._)("div",v,[(0,o.Wm)(T,{style:{"margin-bottom":"25px","pointer-events":"none"},size:"25px","data-cy":"ion",round:"",class:"integration-icon"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{class:"avatar"},{default:(0,o.w5)((()=>[x])),_:1})])),_:1})]),k]),(0,o._)("div",{class:"rectangle",onClick:t[7]||(t[7]=t=>e.selectedNewExport(e.export_types.INFOR_M3_CLOUD))},[(0,o._)("div",C,[(0,o.Wm)(T,{style:{"margin-bottom":"25px","pointer-events":"none"},size:"25px","data-cy":"ion",round:"",class:"integration-icon"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{class:"avatar"},{default:(0,o.w5)((()=>[D])),_:1})])),_:1})]),O])])),_:1})):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(Z),(0,o.Wm)(R),(0,o.Wm)(W),(0,o.Wm)(A),(0,o.Wm)(V),(0,o.Wm)(z),(0,o.Wm)(B),(0,o.Wm)(N)],64)}var S=i(77378),I=i(45401);const T=(0,o._)("div",{"data-cy":"select-integration",class:"text-h6"},[(0,o._)("b",null,"Webhook")],-1),L={class:"row"},M={class:"col-12"},F={class:"row q-mb-sm"},q={class:"col-6 q-pr-sm"},Z={class:"col-6 q-pl-sm"},R={class:"row"},W={style:{"text-align":"center"}};function A(e,t,i,a,l,n){const r=(0,o.up)("q-space"),d=(0,o.up)("q-btn"),c=(0,o.up)("q-card-section"),u=(0,o.up)("q-input"),h=(0,o.up)("SubOrgSelect"),m=(0,o.up)("q-select"),p=(0,o.up)("q-card"),_=(0,o.Q2)("close-popup");return e.allowed_types.includes(e.selected_export)&&e.configuration?((0,o.wg)(),(0,o.j4)(p,{key:0,style:(0,s.j5)([{width:"1060px","max-width":"1060px"},{"min-height":"380px"}])},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"row items-center q-pb-sm bg-primary"},{default:(0,o.w5)((()=>[T,(0,o.Wm)(r),(0,o.wy)((0,o.Wm)(d,{icon:"close",flat:"",round:"",dense:"",onClick:e.clearConfiguration},null,8,["onClick"]),[[_]])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",L,[(0,o._)("div",M,[(0,o.Wm)(u,{class:"export_url","data-cy":"title",outlined:"",modelValue:e.configuration.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.configuration.title=t),label:e.$t("pages.export.title"),"error-message":"Please provide Title",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])])]),(0,o._)("div",F,[(0,o._)("div",q,[(0,o.Wm)(h)]),(0,o._)("div",Z,[(0,o.Wm)(m,{modelValue:e.configuration.doc_type,"onUpdate:modelValue":t[1]||(t[1]=t=>e.configuration.doc_type=t),outlined:"","data-cy":"doc-type",options:e.doc_type_list,"emit-value":"","map-options":"",label:e.$t("pages.screen2a.doctype")},null,8,["modelValue","options","label"])])]),(0,o._)("div",null,[(0,o._)("div",R,[(0,o.Wm)(u,{class:"export_url full-width q-pt-sm","data-cy":"webhook",outlined:"",modelValue:e.configuration.export_url,"onUpdate:modelValue":t[2]||(t[2]=t=>e.configuration.export_url=t),label:"Export URL","error-message":"Please provide valid export URL",rules:[e=>e&&e.length>0]},null,8,["modelValue","rules"])])])])),_:1}),(0,o._)("div",W,[(0,o._)("div",null,[""==e.configuration.id?((0,o.wg)(),(0,o.j4)(d,{key:0,style:{"letter-spacing":"2px",width:"150px"},class:"highlighted-back","data-cy":"back",label:e.$t("back"),onClick:e.clearConfiguration},null,8,["label","onClick"])):(0,o.kq)("",!0),(0,o.Wm)(d,{style:{"letter-spacing":"2px",width:"150px","margin-left":"10px"},color:"primary",label:e.$t("pages.user.save"),"data-cy":"save",disable:e.isSaveDisable(),onClick:e.saveConfig},null,8,["label","disable","onClick"])])])])),_:1})):(0,o.kq)("",!0)}var V=i(60727),z=i(10321),B=i(80579);function N(e,t,i,s,a,l){const n=(0,o.up)("q-select");return(0,o.wg)(),(0,o.j4)(n,{outlined:"",clearable:"",modelValue:e.selected_configuration["sub_org_id"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.selected_configuration["sub_org_id"]=t),"use-input":"",options:e.filterSubOrgsList,onFilter:e.filterSubOrgslistEvent,label:e.$t("sub_organizations"),loading:e.sub_org_list_loading,"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","label","loading"])}var P=i(61959);const U=(0,o.aZ)({mixins:[],props:{},watch:{},methods:{filterSubOrgslistEvent(e,t,i){t(e?()=>{const t=e.toLowerCase();this.filterSubOrgsList=this.subOrgList.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}:()=>{this.filterSubOrgsList=this.subOrgList})}},setup(){const e=(0,V.At)(),t=(0,P.iH)(e.subOrgList),{subOrgList:i,sub_org_list_loading:o}=(0,z.Jk)(e),s=(0,V.Fl)(),{selected_configuration:a}=(0,z.Jk)(s);return{selected_configuration:a,filterSubOrgsList:t,subOrgList:i,sub_org_list_loading:o}}});var j=i(74260),H=i(72448),$=i(7518),Q=i.n($);const Y=(0,j.Z)(U,[["render",N]]),J=Y;Q()(U,"components",{QSelect:H.Z});var K=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const G=(0,o.aZ)({mixins:[S.Z],components:{SubOrgSelect:J},data(){return{}},watch:{configuration:{deep:!0,handler:function(e,t){this.isSaveDisable()}}},methods:{isSaveDisable:function(){return!(this.configuration.export_url&&""!==this.configuration.export_url.trim()&&this.configuration.title&&this.configuration.doc_type)},saveConfig(){return K(this,void 0,void 0,(function*(){try{let e=(this.configuration.id,{});e.export_url=this.configuration.export_url,e.doc_type=this.configuration.doc_type,e.title=this.configuration.title,0!==this.configuration.id&&(e.config_id=this.configuration.id),this.configuration.hasOwnProperty("sub_org_id")&&null!==this.configuration.sub_org_id&&(e.sub_org_id=this.configuration.sub_org_id),this.processing=!0,yield B.xS.saveWebhookConfig(e),this.config_saved=!0}catch(e){if(e&&e.hasOwnProperty("message"))return void this.showErrorToast(e.message);this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.processing=!1}}))}},setup(){const e=(0,V.At)(),{doc_type_list:t}=(0,z.Jk)(e),i=(0,V.Fl)(),{clearConfiguration:o}=i,{selected_export:s,selected_configuration:a,processing:l,config_saved:n,export_types:r}=(0,z.Jk)(i),d=[i.export_types.WEBHOOK];return{export_types:r,processing:l,selected_export:s,configuration:a,doc_type_list:t,clearConfiguration:o,config_saved:n,allowed_types:d}}});var X=i(10151),ee=i(25589),te=i(62025),ie=i(2165),oe=i(64689),se=i(60677);const ae=(0,j.Z)(G,[["render",A]]),le=ae;Q()(G,"components",{QCard:X.Z,QCardSection:ee.Z,QSpace:te.Z,QBtn:ie.Z,QInput:oe.Z,QSelect:H.Z}),Q()(G,"directives",{ClosePopup:se.Z});var ne=i(98880);const re=e=>((0,o.dD)("data-v-59925816"),e=e(),(0,o.Cn)(),e),de=re((()=>(0,o._)("div",{"data-cy":"select-integration",class:"text-h6"},[(0,o._)("b",null,"Infor IDM")],-1))),ce={class:"row"},ue={class:"col-12"},he={class:"row q-pb-md"},me={class:"col-6 q-pr-sm"},pe={class:"col-6"},_e={class:"row"},ge={class:"col-sm-6 q-pr-sm"},fe={class:"col-sm-6"},we={class:"q-mt-md row justify-center"},ye={class:"switch q-mr-sm"},be=["disabled"],ve=re((()=>(0,o._)("div",{class:"slider","data-after":"ONPREM","data-before":"CLOUD"},null,-1))),xe=re((()=>(0,o._)("br",null,null,-1)));function ke(e,t,i,a,l,n){const r=(0,o.up)("q-space"),d=(0,o.up)("q-btn"),c=(0,o.up)("q-card-section"),u=(0,o.up)("q-input"),h=(0,o.up)("SubOrgSelect"),m=(0,o.up)("q-select"),p=(0,o.up)("q-icon"),_=(0,o.up)("q-file"),g=(0,o.up)("q-card"),f=(0,o.Q2)("close-popup");return e.allowed_types.includes(e.selected_export)&&e.configuration?((0,o.wg)(),(0,o.j4)(g,{key:0,style:(0,s.j5)([{width:"1060px","max-width":"1060px"},{"min-height":"390px"}])},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"row items-center q-pb-sm bg-primary"},{default:(0,o.w5)((()=>[de,(0,o.Wm)(r),(0,o.wy)((0,o.Wm)(d,{icon:"close",flat:"",round:"",dense:"",onClick:e.clearConfiguration},null,8,["onClick"]),[[f]])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",ce,[(0,o._)("div",ue,[(0,o.Wm)(u,{"data-cy":"title",outlined:"",modelValue:e.configuration.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.configuration.title=t),label:e.$t("pages.export.title"),"error-message":"Please provide Title",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])])]),(0,o._)("div",he,[(0,o._)("div",me,[(0,o.Wm)(h)]),(0,o._)("div",pe,[(0,o.Wm)(m,{modelValue:e.configuration.doc_type,"onUpdate:modelValue":t[1]||(t[1]=t=>e.configuration.doc_type=t),outlined:"","data-cy":"doc-type",options:e.doc_type_list,"emit-value":"","map-options":"",label:e.$t("pages.screen2a.doctype")},null,8,["modelValue","options","label"])])]),(0,o._)("div",_e,[(0,o._)("div",ge,[(0,o.Wm)(_,{modelValue:e.configuration.ion_file,"onUpdate:modelValue":t[2]||(t[2]=t=>e.configuration.ion_file=t),label:e.$t("pages.export.ion_mapping"),"data-cy":"ion-file",outlined:"","max-files":"1"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","label"]),e.configuration&&e.configuration.infor_ion_api?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",color:"primary",label:e.$t("download"),class:"float-right",onClick:t[3]||(t[3]=t=>e.downloadMappingFile("ION_API","INFOR-DOC2.ionapi",e.configuration.id))},null,8,["label"])):(0,o.kq)("",!0)]),(0,o._)("div",fe,[(0,o.Wm)(_,{modelValue:e.configuration.idm_file,"onUpdate:modelValue":t[4]||(t[4]=t=>e.configuration.idm_file=t),label:e.$t("pages.export.idm_mapping"),outlined:"","max-files":"1"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","label"]),e.configuration&&e.configuration.infor_idm_mapping?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",color:"primary",label:e.$t("download"),class:"float-right",onClick:t[5]||(t[5]=t=>e.downloadMappingFile("IDM_MAPPING","IDM-Mapping.properties",e.configuration.id))},null,8,["label"])):(0,o.kq)("",!0)])]),(0,o._)("div",we,[(0,o._)("div",null,[(0,o._)("label",ye,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=t=>e.configuration.cloud=t),disabled:0!==e.configuration.id},null,8,be),[[ne.e8,e.configuration.cloud]]),ve]),xe,(0,o.wy)((0,o.Wm)(d,{style:{"letter-spacing":"2px",width:"130px"},"data-cy":"back",class:"q-mr-sm highlighted-back q-mt-md",label:e.$t("back"),onClick:e.clearConfiguration},null,8,["label","onClick"]),[[ne.F8,0==e.configuration.id]]),(0,o.Wm)(d,{style:{"letter-spacing":"2px",width:"130px"},class:"q-mt-md",color:"primary",label:e.$t("pages.user.save"),"data-cy":"save",onClick:e.saveConfig},null,8,["label","onClick"])])])])),_:1})])),_:1})):(0,o.kq)("",!0)}var Ce=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const De={methods:{downloadMappingFile(e,t,i){return Ce(this,void 0,void 0,(function*(){try{const o=yield B.xS.getMappingFile(i,e);if(o.error)throw o.error;const s=window.URL.createObjectURL(new Blob([o])),a=document.createElement("a");a.href=s,a.setAttribute("download",t),document.body.appendChild(a),a.click(),a.remove()}catch(o){}}))}}};var Oe=i(9273),Ee=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const Se=(0,o.aZ)({mixins:[S.Z,De],components:{SubOrgSelect:J},data(){return{}},watch:{configuration:{deep:!0,handler:function(e,t){this.isSaveDisable()}}},methods:{isSaveDisable:function(){return!this.configuration.infor_idm_mapping&&!this.configuration.idm_file||!this.configuration.infor_ion_api&&!this.configuration.ion_file},saveConfig(){return Ee(this,void 0,void 0,(function*(){try{let e=(this.configuration.id,{});e.export_method=this.export_types.INFOR_IDM_CLOUD,this.configuration.cloud||(e.export_method=this.export_types.INFOR_IDM_ON_PREMISE),e.doc_type=this.configuration.doc_type,e.title=this.configuration.title,0!==this.configuration.id&&(e.config_id=this.configuration.id),this.configuration.ion_file&&(e.ion_api=this.configuration.ion_file),this.configuration.idm_file&&(e.idm_mapping=this.configuration.idm_file),this.configuration.hasOwnProperty("sub_org_id")&&null!==this.configuration.sub_org_id&&(e.sub_org_id=this.configuration.sub_org_id),this.processing=!0;const t=yield B.xS.saveIdmConfig(e);if(t&&!t.success&&t.exception.detail)throw{message:t.exception.detail};this.config_saved=!0}catch(e){const t=Oe.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.processing=!1}}))}},setup(){const e=(0,V.At)(),{doc_type_list:t}=(0,z.Jk)(e),i=(0,V.Fl)(),{clearConfiguration:o}=i,{selected_export:s,selected_configuration:a,processing:l,config_saved:n,export_types:r}=(0,z.Jk)(i),d=[i.export_types.INFOR_IDM_CLOUD,i.export_types.INFOR_IDM_ON_PREMISE];return{export_types:r,processing:l,selected_export:s,configuration:a,doc_type_list:t,config_saved:n,clearConfiguration:o,allowed_types:d}}});var Ie=i(64974),Te=i(24554);const Le=(0,j.Z)(Se,[["render",ke],["__scopeId","data-v-59925816"]]),Me=Le;Q()(Se,"components",{QCard:X.Z,QCardSection:ee.Z,QSpace:te.Z,QBtn:ie.Z,QInput:oe.Z,QSelect:H.Z,QFile:Ie.Z,QIcon:Te.Z}),Q()(Se,"directives",{ClosePopup:se.Z});const Fe=(0,o._)("div",{"data-cy":"select-integration",class:"text-h6"},[(0,o._)("b",null,"Flow")],-1),qe={style:{"margin-bottom":"20px"},class:"row full-width mb-10"},Ze={class:"col-12"},Re={style:{"margin-bottom":"20px"},class:"row full-width mb-10"},We={class:"col-6"},Ae={class:"col-6 pl-20"},Ve={class:"row full-width"},ze={class:"col-12"},Be={class:"row full-width"},Ne={class:"col-6"},Pe={class:"col-6 pl-20"},Ue={key:0,style:{"margin-bottom":"20px"},class:"row full-width mb-10"},je={style:{width:"30%"}},He={style:{width:"30%"},class:"pl-20"},$e={style:{width:"40%"},class:"pl-20"},Qe={style:{"text-align":"center"}},Ye={class:"q-ml-xl"};function Je(e,t,i,a,l,n){const r=(0,o.up)("q-space"),d=(0,o.up)("q-btn"),c=(0,o.up)("q-card-section"),u=(0,o.up)("q-input"),h=(0,o.up)("SubOrgSelect"),m=(0,o.up)("q-select"),p=(0,o.up)("q-icon"),_=(0,o.up)("q-file"),g=(0,o.up)("q-card"),f=(0,o.Q2)("close-popup");return"flow2"===e.selected_export&&e.configuration?((0,o.wg)(),(0,o.j4)(g,{key:0,style:(0,s.j5)([{width:"1060px","max-width":"1060px"},{height:e.configuration.user_confirmed?"500px":"400px"}])},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"row items-center q-pb-sm bg-primary"},{default:(0,o.w5)((()=>[Fe,(0,o.Wm)(r),(0,o.wy)((0,o.Wm)(d,{icon:"close",flat:"",round:"",dense:"",onClick:e.clearConfiguration},null,8,["onClick"]),[[f]])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",qe,[(0,o._)("div",Ze,[(0,o.Wm)(u,{modelValue:e.configuration["title"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.configuration["title"]=t),label:e.$t("title"),outlined:""},null,8,["modelValue","label"])])]),(0,o._)("div",Re,[(0,o._)("div",We,[(0,o.Wm)(u,{modelValue:e.configuration["username"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.configuration["username"]=t),readonly:e.configuration["user_confirmed"]&&0==e.configuration["id"],label:e.$t("pages.export.flow_user"),outlined:"",class:"full-width"},null,8,["modelValue","readonly","label"])]),(0,o._)("div",Ae,[(0,o.Wm)(u,{modelValue:e.configuration["password"],"onUpdate:modelValue":t[2]||(t[2]=t=>e.configuration["password"]=t),readonly:e.configuration["user_confirmed"]&&0==e.configuration["id"],label:e.$t("pages.export.flow_password"),type:"password",outlined:"",class:"full-width"},null,8,["modelValue","readonly","label"])])]),(0,o._)("div",Ve,[(0,o._)("div",ze,[(0,o.Wm)(u,{class:"export_url full-width",outlined:"",readonly:e.configuration["user_confirmed"]&&0==e.configuration["id"],modelValue:e.configuration["export_url"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.configuration["export_url"]=t),label:e.$t("pages.export.flow_url"),"error-message":"Please provide valid URL",rules:[e=>e&&e.length>0]},null,8,["readonly","modelValue","label","rules"])])]),(0,o._)("div",Be,[(0,o._)("div",Ne,[(0,o.Wm)(h)]),(0,o._)("div",Pe,[(0,o.Wm)(m,{modelValue:e.configuration["doc_type"],"onUpdate:modelValue":t[4]||(t[4]=t=>e.configuration["doc_type"]=t),outlined:"","data-cy":"doc-type",options:e.doc_type_list,"emit-value":"","map-options":"",label:e.$t("pages.screen2a.doctype"),readonly:e.configuration["user_confirmed"]&&0==e.configuration["id"]},null,8,["modelValue","options","label","readonly"])])]),e.configuration["user_confirmed"]?((0,o.wg)(),(0,o.iD)("div",Ue,[(0,o._)("div",je,[(0,o.Wm)(m,{modelValue:e.configuration.cabinet_id,"onUpdate:modelValue":t[5]||(t[5]=t=>e.configuration.cabinet_id=t),outlined:"",options:e.flow_cabinets,"emit-value":"","map-options":"",label:e.$t("pages.export.flow_cabinet")},null,8,["modelValue","options","label"])]),(0,o._)("div",He,[(0,o.Wm)(m,{modelValue:e.configuration.doc_type_id,"onUpdate:modelValue":t[6]||(t[6]=t=>e.configuration.doc_type_id=t),outlined:"",options:e.flow_doc_types,"emit-value":"","map-options":"",label:e.$t("pages.export.flow_doctype")},null,8,["modelValue","options","label"])]),(0,o._)("div",$e,[(0,o.Wm)(_,{modelValue:e.configuration.flow2_mapping_file,"onUpdate:modelValue":t[7]||(t[7]=t=>e.configuration.flow2_mapping_file=t),label:e.$t("pages.export.flow_mapping"),filled:"","max-files":"1",accept:".txt, .properties",style:{"max-width":"300px"}},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","label"]),e.configuration&&e.configuration.flow2_mapping?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",color:"primary",label:e.$t("download"),class:"float-right",onClick:t[8]||(t[8]=t=>e.downloadMappingFile("FLOW_MAPPING","Flow2-Mapping.properties",e.configuration.id))},null,8,["label"])):(0,o.kq)("",!0)])])):(0,o.kq)("",!0)])),_:1}),(0,o._)("div",Qe,[(0,o._)("div",Ye,[(0,o.Wm)(d,{class:"highlighted-back",style:{"letter-spacing":"2px",width:"150px"},"data-cy":"back",label:e.$t("pages.export.back"),onClick:t[9]||(t[9]=t=>{e.clearConfiguration()})},null,8,["label"]),e.configuration["user_confirmed"]?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(d,{key:0,style:{"letter-spacing":"2px",width:"180px","margin-left":"10px"},color:"primary",label:e.$t("pages.export.confirm"),onClick:e.fetchCabinetsAndDocTypes,disable:e.isConfirmBtnDisabled()},null,8,["label","onClick","disable"])),e.configuration["user_confirmed"]?((0,o.wg)(),(0,o.j4)(d,{key:1,style:{"letter-spacing":"2px",width:"180px","margin-left":"10px"},color:"primary",label:e.$t("pages.flow_settings.reset"),onClick:t[10]||(t[10]=t=>e.selectedNewExport("flow2"))},null,8,["label"])):(0,o.kq)("",!0),e.configuration["user_confirmed"]?((0,o.wg)(),(0,o.j4)(d,{key:2,style:{"letter-spacing":"2px",width:"150px","margin-left":"10px"},color:"primary",label:e.$t("pages.user.save"),disable:e.isSaveDisable(),onClick:e.saveConfig},null,8,["label","disable","onClick"])):(0,o.kq)("",!0)])])])),_:1},8,["style"])):(0,o.kq)("",!0)}var Ke=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const Ge=(0,o.aZ)({mixins:[De,S.Z],components:{SubOrgSelect:J},data(){return{}},watch:{configuration:{deep:!0,handler:function(e,t){this.isSaveDisable()}},"configuration.export_url":{deep:!0,handler:function(e,t){e!==t&&this.clearFlowInfo()}},"configuration.username":{deep:!0,handler:function(e,t){e!==t&&this.clearFlowInfo()}},"configuration.password":{deep:!0,handler:function(e,t){e!==t&&this.clearFlowInfo()}}},mounted:function(){"flow2"===this.selected_export&&0!==this.configuration.id&&this.fetchCabinetsAndDocTypes()},methods:{isConfirmBtnDisabled(){return!(this.configuration.export_url&&this.configuration.doc_type&&this.configuration.username&&this.configuration.password)},clearFlowInfo(){this.configuration.user_confirmed=!1,this.configuration.cabinet_id=null,this.configuration.doc_type_id=null},isSaveDisable(){return!(this.configuration.export_url&&this.configuration.doc_type&&this.configuration.title&&this.configuration.cabinet_id&&this.configuration.username&&this.configuration.password&&this.configuration.doc_type_id)||!this.configuration.flow2_mapping_file&&!this.configuration.flow2_mapping},fetchCabinetsAndDocTypes(){return Ke(this,void 0,void 0,(function*(){try{this.processing=!0,this.flow_cabinets=[],this.flow_doc_types=[];let e=yield B.xS.getFlowToken(this.configuration);const t=e.token?e.token:"";if(!t)throw{message:"Flow Connection failed. Please check settings"};yield this.getFlowCabinets(t),yield this.getFlowDocumentTypes(t),this.configuration.user_confirmed=!0}catch(e){if(null!=e&&"object"==typeof e&&e.hasOwnProperty("message"))return void this.showErrorToast(e.message);this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.processing=!1}}))},getFlowCabinets(e){return Ke(this,void 0,void 0,(function*(){try{this.processing=!0;const t=yield B.xS.getFlowCabinets(this.configuration.export_url,e);if(!t||!t.results)throw"Something went wrong while getting data for cabinets";Array.from(t.results).forEach((e=>{this.flow_cabinets.push(Object.assign({},{value:e.id,label:e.label}))})),this.processing=!1}catch(t){throw"Something went wrong while getting data for cabinets"}}))},getFlowDocumentTypes(e){return Ke(this,void 0,void 0,(function*(){try{this.processing=!0;const t=yield B.xS.getFlowDocumentTypes(this.configuration.export_url,e);if(!t||!t.results)throw"Something went wrong while getting data for flow document types";Array.from(t.results).forEach((e=>{this.flow_doc_types.push(Object.assign({},{value:e.id,label:e.label}))}))}catch(t){throw"Something went wrong while getting data for flow document types"}finally{this.processing=!1}}))},saveConfig(){return Ke(this,void 0,void 0,(function*(){try{this.processing=!0;let e=(this.configuration.id,{});e.username=this.configuration.username,e.password=this.configuration.password,e.doc_type_id=String(this.configuration.doc_type_id),e.cabinet_id=String(this.configuration.cabinet_id),e.flow2_url=this.configuration.export_url,e.doc_type=this.configuration.doc_type,e.title=this.configuration.title,0!==this.configuration.id&&(e.config_id=this.configuration.id),this.configuration.flow2_mapping_file&&(e.flow2_mapping=this.configuration.flow2_mapping_file),this.configuration.hasOwnProperty("sub_org_id")&&null!==this.configuration.sub_org_id&&(e.sub_org_id=this.configuration.sub_org_id),yield B.xS.saveFlow2Config(e),this.config_saved=!0}catch(e){if(e&&e.hasOwnProperty("message"))return void this.showErrorToast(e.message);this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.processing=!1}}))}},setup(){const e=(0,V.At)(),{doc_type_list:t}=(0,z.Jk)(e),i=(0,V.Fl)(),{clearConfiguration:o,selectedNewExport:s}=i,{selected_export:a,selected_configuration:l,config_saved:n,processing:r}=(0,z.Jk)(i);return{selected_export:a,configuration:l,doc_type_list:t,clearConfiguration:o,selectedNewExport:s,config_saved:n,processing:r,flow_cabinets:[],flow_doc_types:[]}}}),Xe=(0,j.Z)(Ge,[["render",Je]]),et=Xe;Q()(Ge,"components",{QCard:X.Z,QCardSection:ee.Z,QSpace:te.Z,QBtn:ie.Z,QInput:oe.Z,QSelect:H.Z,QFile:Ie.Z,QIcon:Te.Z}),Q()(Ge,"directives",{ClosePopup:se.Z});const tt=e=>((0,o.dD)("data-v-ca193652"),e=e(),(0,o.Cn)(),e),it=tt((()=>(0,o._)("div",{"data-cy":"select-integration",class:"text-h6"},[(0,o._)("b",null,"Infor ION")],-1))),ot={class:"row"},st={class:"col-12"},at={class:"row q-pb-md"},lt={class:"col-6 q-pr-sm"},nt={class:"col-6"},rt={class:"row"},dt={class:"col-sm-4 q-pr-sm"},ct={class:"col-sm-4 q-pr-sm"},ut={class:"col-sm-4"},ht={class:"q-mt-md row justify-center"},mt={class:"switch q-mr-sm"},pt=["disabled"],_t=tt((()=>(0,o._)("div",{class:"slider","data-after":"ONPREM","data-before":"CLOUD"},null,-1))),gt=tt((()=>(0,o._)("br",null,null,-1)));function ft(e,t,i,a,l,n){const r=(0,o.up)("q-space"),d=(0,o.up)("q-btn"),c=(0,o.up)("q-card-section"),u=(0,o.up)("q-input"),h=(0,o.up)("SubOrgSelect"),m=(0,o.up)("q-select"),p=(0,o.up)("q-icon"),_=(0,o.up)("q-file"),g=(0,o.up)("q-card"),f=(0,o.Q2)("close-popup");return e.allowed_types.includes(e.selected_export)&&e.configuration?((0,o.wg)(),(0,o.j4)(g,{key:0,style:(0,s.j5)([{width:"1060px","max-width":"1060px"},{"min-height":"390px"}])},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"row items-center q-pb-sm bg-primary"},{default:(0,o.w5)((()=>[it,(0,o.Wm)(r),(0,o.wy)((0,o.Wm)(d,{icon:"close",flat:"",round:"",dense:"",onClick:e.clearConfiguration},null,8,["onClick"]),[[f]])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",ot,[(0,o._)("div",st,[(0,o.Wm)(u,{"data-cy":"title",outlined:"",modelValue:e.configuration.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.configuration.title=t),label:e.$t("pages.export.title"),"error-message":"Please provide Title",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])])]),(0,o._)("div",at,[(0,o._)("div",lt,[(0,o.Wm)(h)]),(0,o._)("div",nt,[(0,o.Wm)(m,{modelValue:e.configuration.doc_type,"onUpdate:modelValue":t[1]||(t[1]=t=>e.configuration.doc_type=t),outlined:"","data-cy":"doc-type",options:e.doc_type_list,"emit-value":"","map-options":"",label:e.$t("pages.screen2a.doctype")},null,8,["modelValue","options","label"])])]),(0,o._)("div",rt,[(0,o._)("div",dt,[(0,o.Wm)(_,{modelValue:e.configuration.ion_file,"onUpdate:modelValue":t[2]||(t[2]=t=>e.configuration.ion_file=t),label:e.$t("pages.export.ion_mapping"),"data-cy":"ion-file",outlined:"","max-files":"1"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","label"]),e.configuration&&e.configuration.infor_ion_api?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",color:"primary",label:e.$t("download"),class:"float-right",onClick:t[3]||(t[3]=t=>e.downloadMappingFile("ION_API","INFOR-DOC2.ionapi",e.configuration.id))},null,8,["label"])):(0,o.kq)("",!0)]),(0,o._)("div",ct,[(0,o.Wm)(_,{modelValue:e.configuration.idm_file,"onUpdate:modelValue":t[4]||(t[4]=t=>e.configuration.idm_file=t),label:e.$t("pages.export.idm_mapping"),outlined:"","max-files":"1"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","label"]),e.configuration&&e.configuration.infor_idm_mapping?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",color:"primary",label:e.$t("download"),class:"float-right",onClick:t[5]||(t[5]=t=>e.downloadMappingFile("IDM_MAPPING","IDM-Mapping.properties",e.configuration.id))},null,8,["label"])):(0,o.kq)("",!0)]),(0,o._)("div",ut,[(0,o.Wm)(_,{modelValue:e.configuration.bod_file,"onUpdate:modelValue":t[6]||(t[6]=t=>e.configuration.bod_file=t),label:e.$t("pages.export.bod_mapping"),outlined:"","max-files":"1"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","label"]),e.configuration&&e.configuration.infor_bod_mapping?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",color:"primary",label:e.$t("download"),class:"float-right",onClick:t[7]||(t[7]=t=>e.downloadMappingFile("BOD_MAPPING","BOD-Mapping.properties",e.configuration.id))},null,8,["label"])):(0,o.kq)("",!0)])]),(0,o._)("div",ht,[(0,o._)("div",null,[(0,o._)("label",mt,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=t=>e.configuration.cloud=t),disabled:0!==e.configuration.id},null,8,pt),[[ne.e8,e.configuration.cloud]]),_t]),gt,(0,o.wy)((0,o.Wm)(d,{style:{"letter-spacing":"2px",width:"130px"},"data-cy":"back",class:"q-mr-sm highlighted-back q-mt-md",label:e.$t("back"),onClick:e.clearConfiguration},null,8,["label","onClick"]),[[ne.F8,0==e.configuration.id]]),(0,o.Wm)(d,{style:{"letter-spacing":"2px",width:"130px"},color:"primary",class:"q-mt-md",label:e.$t("pages.user.save"),"data-cy":"save",onClick:e.saveConfig},null,8,["label","onClick"])])])])),_:1})])),_:1})):(0,o.kq)("",!0)}var wt=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const yt=(0,o.aZ)({mixins:[S.Z,De],components:{SubOrgSelect:J},data(){return{}},watch:{configuration:{deep:!0,handler:function(e,t){this.isSaveDisable()}}},methods:{isSaveDisable:function(){return!this.configuration.infor_idm_mapping&&!this.configuration.idm_file||(!this.configuration.infor_ion_api&&!this.configuration.ion_file||!this.configuration.infor_bod_mapping&&!this.configuration.bod_file)},saveConfig(){return wt(this,void 0,void 0,(function*(){try{let e=(this.configuration.id,{});e.export_method=this.export_types.INFOR_ION_CLOUD,this.configuration.cloud||(e.export_method=this.export_types.INFOR_ION_ON_PREMISE),e.doc_type=this.configuration.doc_type,e.title=this.configuration.title,0!==this.configuration.id&&(e.config_id=this.configuration.id),this.configuration.ion_file&&(e.ion_api=this.configuration.ion_file),this.configuration.idm_file&&(e.idm_mapping=this.configuration.idm_file),this.configuration.bod_file&&(e.bod_mapping=this.configuration.bod_file),this.configuration.hasOwnProperty("sub_org_id")&&null!==this.configuration.sub_org_id&&(e.sub_org_id=this.configuration.sub_org_id),this.processing=!0;const t=yield B.xS.saveIonConfig(e);if(t&&!t.success&&t.exception.detail)throw{message:t.exception.detail};this.config_saved=!0}catch(e){const t=Oe.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.processing=!1}}))}},setup(){const e=(0,V.At)(),{doc_type_list:t}=(0,z.Jk)(e),i=(0,V.Fl)(),{clearConfiguration:o}=i,{selected_export:s,selected_configuration:a,processing:l,config_saved:n,export_types:r}=(0,z.Jk)(i),d=[i.export_types.INFOR_ION_CLOUD,i.export_types.INFOR_ION_ON_PREMISE];return{export_types:r,processing:l,selected_export:s,configuration:a,doc_type_list:t,config_saved:n,clearConfiguration:o,allowed_types:d}}}),bt=(0,j.Z)(yt,[["render",ft],["__scopeId","data-v-ca193652"]]),vt=bt;Q()(yt,"components",{QCard:X.Z,QCardSection:ee.Z,QSpace:te.Z,QBtn:ie.Z,QInput:oe.Z,QSelect:H.Z,QFile:Ie.Z,QIcon:Te.Z}),Q()(yt,"directives",{ClosePopup:se.Z});const xt=(0,o._)("div",{"data-cy":"select-integration",class:"text-h6"},[(0,o._)("b",null,"Zugferd")],-1),kt={class:"row q-pt-lg"},Ct={class:"col-sm-12"},Dt={class:"row q-mb-sm"},Ot={class:"col-6 q-pr-sm"},Et={class:"col-6"},St={class:"row"},It={class:"col-6 q-pr-sm"},Tt={class:"col-6"},Lt={key:0,class:"row q-mt-sm"},Mt={class:"col-sm-12"},Ft={style:{"text-align":"center"}};function qt(e,t,i,a,l,n){const r=(0,o.up)("q-space"),d=(0,o.up)("q-btn"),c=(0,o.up)("q-card-section"),u=(0,o.up)("q-input"),h=(0,o.up)("SubOrgSelect"),m=(0,o.up)("q-select"),p=(0,o.up)("q-card"),_=(0,o.Q2)("close-popup");return"zugferd"===e.selected_export&&e.configuration?((0,o.wg)(),(0,o.j4)(p,{key:0,style:(0,s.j5)([{width:"1060px","max-width":"1060px"},{"min-height":"E-Mail"==e.configuration.fileaccess?"450px":"360px"}])},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"row items-center q-pb-sm bg-primary"},{default:(0,o.w5)((()=>[xt,(0,o.Wm)(r),(0,o.wy)((0,o.Wm)(d,{icon:"close",flat:"",round:"",dense:"",onClick:e.clearConfiguration},null,8,["onClick"]),[[_]])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",kt,[(0,o._)("div",Ct,[(0,o.Wm)(u,{class:"export_url","data-cy":"title",outlined:"",modelValue:e.configuration.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.configuration.title=t),label:e.$t("pages.export.title"),"error-message":"Please provide Title",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])])]),(0,o._)("div",Dt,[(0,o._)("div",Ot,[(0,o.Wm)(h)]),(0,o._)("div",Et,[(0,o.Wm)(m,{modelValue:e.configuration.doc_type,"onUpdate:modelValue":t[1]||(t[1]=t=>e.configuration.doc_type=t),outlined:"","data-cy":"doc-type",options:e.doc_type_list,"emit-value":"","map-options":"",label:e.$t("pages.screen2a.doctype")},null,8,["modelValue","options","label"])])]),(0,o._)("div",St,[(0,o._)("div",It,[(0,o.Wm)(m,{modelValue:e.configuration.format,"onUpdate:modelValue":t[2]||(t[2]=t=>e.configuration.format=t),outlined:"","data-cy":"doc-type",options:e.format_list,"emit-value":"","map-options":"",label:e.$t("pages.export.format")},null,8,["modelValue","options","label"])]),(0,o._)("div",Tt,[(0,o.Wm)(m,{modelValue:e.configuration["fileaccess"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.configuration["fileaccess"]=t),outlined:"","data-cy":"doc-type",options:e.fileaccess_list,"emit-value":"","map-options":"",label:e.$t("pages.export.export")},null,8,["modelValue","options","label"])])]),"E-Mail"==e.configuration.fileaccess?((0,o.wg)(),(0,o.iD)("div",Lt,[(0,o._)("div",Mt,[(0,o.Wm)(u,{class:"export_url","data-cy":"title",outlined:"",modelValue:e.configuration.email,"onUpdate:modelValue":t[4]||(t[4]=t=>e.configuration.email=t),label:e.$t("E-Mail to send doc to"),"error-message":"Please provide Email",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])])])):(0,o.kq)("",!0)])),_:1}),(0,o._)("div",Ft,[(0,o._)("div",null,[""==e.configuration.id?((0,o.wg)(),(0,o.j4)(d,{key:0,style:{"letter-spacing":"2px",width:"150px"},class:"highlighted-back","data-cy":"back",label:e.$t("back"),onClick:e.clearConfiguration},null,8,["label","onClick"])):(0,o.kq)("",!0),(0,o.Wm)(d,{style:{"letter-spacing":"2px",width:"150px","margin-left":"10px"},color:"primary",label:e.$t("pages.user.save"),"data-cy":"save",disable:e.isSaveDisable(),onClick:e.saveConfig},null,8,["label","disable","onClick"])])])])),_:1},8,["style"])):(0,o.kq)("",!0)}var Zt=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const Rt=(0,o.aZ)({mixins:[S.Z],components:{SubOrgSelect:J},data(){return{}},watch:{configuration:{deep:!0,handler:function(e,t){this.isSaveDisable()}}},methods:{isSaveDisable:function(){return!(this.configuration.title&&this.configuration.doc_type&&this.configuration.fileaccess&&this.configuration.format)||"E-Mail"==this.configuration.fileaccess&&!this.configuration.email},saveConfig(){return Zt(this,void 0,void 0,(function*(){try{let e=(this.configuration.id,{});e.fileaccess=this.configuration.fileaccess,e.format=this.configuration.format,e.email=this.configuration.email,e.doc_type=this.configuration.doc_type,e.title=this.configuration.title,0!==this.configuration.id&&(e.config_id=this.configuration.id),this.configuration.hasOwnProperty("sub_org_id")&&null!==this.configuration.sub_org_id&&(e.sub_org_id=this.configuration.sub_org_id),this.processing=!0;const t=yield B.xS.saveZugferdConfig(e);if(t&&!t.success&&t.exception.detail)throw{response:{data:t.exception.detail}};this.config_saved=!0}catch(e){if(e&&e.hasOwnProperty("message"))return void this.showErrorToast(e.message);this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.processing=!1}}))}},setup(){const e=(0,V.Fl)(),{clearConfiguration:t}=e,{selected_export:i,selected_configuration:o,processing:s,config_saved:a}=(0,z.Jk)(e);return{processing:s,selected_export:i,configuration:o,doc_type_list:(0,P.iH)(["INVOICE"]),format_list:(0,P.iH)(["Minimum","Basic","Extended"]),fileaccess_list:(0,P.iH)(["E-Mail","Watchdog","Download"]),clearConfiguration:t,config_saved:a}}}),Wt=(0,j.Z)(Rt,[["render",qt]]),At=Wt;Q()(Rt,"components",{QCard:X.Z,QCardSection:ee.Z,QSpace:te.Z,QBtn:ie.Z,QInput:oe.Z,QSelect:H.Z}),Q()(Rt,"directives",{ClosePopup:se.Z});const Vt=(0,o._)("div",{"data-cy":"select-integration",class:"text-h6"},[(0,o._)("b",null,"Peppol")],-1),zt={class:"row q-pt-lg"},Bt={class:"col-sm-12"},Nt={class:"row"},Pt={class:"col-4"},Ut={class:"col-4 q-pl-sm"},jt={class:"col-4 q-pl-sm"},Ht={key:0,class:"row q-pt-lg"},$t={class:"col-sm-12"},Qt={style:{"text-align":"center"}};function Yt(e,t,i,a,l,n){const r=(0,o.up)("q-space"),d=(0,o.up)("q-btn"),c=(0,o.up)("q-card-section"),u=(0,o.up)("q-input"),h=(0,o.up)("q-select"),m=(0,o.up)("SubOrgSelect"),p=(0,o.up)("q-card"),_=(0,o.Q2)("close-popup");return"peppol"===e.selected_export&&e.configuration?((0,o.wg)(),(0,o.j4)(p,{key:0,style:(0,s.j5)([{width:"1060px","max-width":"1060px"},{height:"E-Mail"==e.configuration.fileaccess?"460px":"380px"}])},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"row items-center q-pb-none"},{default:(0,o.w5)((()=>[Vt,(0,o.Wm)(r),(0,o.wy)((0,o.Wm)(d,{icon:"close",flat:"",round:"",dense:"",onClick:e.clearConfiguration},null,8,["onClick"]),[[_]])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",zt,[(0,o._)("div",Bt,[(0,o.Wm)(u,{class:"export_url","data-cy":"title",outlined:"",modelValue:e.configuration.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.configuration.title=t),label:e.$t("pages.export.title"),"error-message":"Please provide Title",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])])]),(0,o._)("div",Nt,[(0,o._)("div",Pt,[(0,o.Wm)(h,{modelValue:e.configuration.doc_type,"onUpdate:modelValue":t[1]||(t[1]=t=>e.configuration.doc_type=t),outlined:"","data-cy":"doc-type",options:e.doc_type_list,"emit-value":"","map-options":"",label:e.$t("pages.screen2a.doctype")},null,8,["modelValue","options","label"])]),(0,o._)("div",Ut,[(0,o.Wm)(h,{modelValue:e.configuration.fileaccess,"onUpdate:modelValue":t[2]||(t[2]=t=>e.configuration.fileaccess=t),outlined:"","data-cy":"doc-type",options:e.fileaccess_list,"emit-value":"","map-options":"",label:e.$t("pages.export.export")},null,8,["modelValue","options","label"])]),(0,o._)("div",jt,[(0,o.Wm)(m)])]),"E-Mail"==e.configuration.fileaccess?((0,o.wg)(),(0,o.iD)("div",Ht,[(0,o._)("div",$t,[(0,o.Wm)(u,{class:"export_url",outlined:"",modelValue:e.configuration.email,"onUpdate:modelValue":t[3]||(t[3]=t=>e.configuration.email=t),label:e.$t("E-Mail to send doc to"),"error-message":"Please provide Email",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])])])):(0,o.kq)("",!0)])),_:1}),(0,o._)("div",Qt,[(0,o._)("div",null,[""==e.configuration.id?((0,o.wg)(),(0,o.j4)(d,{key:0,style:{"letter-spacing":"2px",width:"150px"},color:"primary","data-cy":"back",label:e.$t("back"),onClick:e.clearConfiguration},null,8,["label","onClick"])):(0,o.kq)("",!0),(0,o.Wm)(d,{style:{"letter-spacing":"2px",width:"150px","margin-left":"10px"},color:"primary",label:e.$t("pages.user.save"),"data-cy":"save",disable:e.isSaveDisable(),onClick:e.saveConfig},null,8,["label","disable","onClick"])])])])),_:1},8,["style"])):(0,o.kq)("",!0)}var Jt=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const Kt=(0,o.aZ)({mixins:[S.Z],components:{SubOrgSelect:J},data(){return{}},watch:{configuration:{deep:!0,handler:function(e,t){this.isSaveDisable()}}},methods:{isSaveDisable:function(){return!(this.configuration.title&&this.configuration.doc_type&&this.configuration.fileaccess)||"E-Mail"==this.configuration.fileaccess&&!this.configuration.email},saveConfig(){return Jt(this,void 0,void 0,(function*(){try{let e=(this.configuration.id,{});e.fileaccess=this.configuration.fileaccess,e.email=this.configuration.email,e.doc_type=this.configuration.doc_type,e.title=this.configuration.title,0!==this.configuration.id&&(e.config_id=this.configuration.id),this.configuration.hasOwnProperty("sub_org_id")&&null!==this.configuration.sub_org_id&&(e.sub_org_id=this.configuration.sub_org_id),this.processing=!0;const t=yield B.xS.savePeppolConfig(e);if(t&&!t.success&&t.exception.detail)throw{response:{data:t.exception.detail}};this.config_saved=!0}catch(e){if(e&&e.hasOwnProperty("message"))return void this.showErrorToast(e.message);this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.processing=!1}}))}},setup(){const e=(0,V.Fl)(),{clearConfiguration:t}=e,{selected_export:i,selected_configuration:o,processing:s,config_saved:a}=(0,z.Jk)(e);return{processing:s,selected_export:i,configuration:o,doc_type_list:(0,P.iH)(["INVOICE"]),fileaccess_list:(0,P.iH)(["E-Mail","Watchdog","Download"]),clearConfiguration:t,config_saved:a}}}),Gt=(0,j.Z)(Kt,[["render",Yt]]),Xt=Gt;Q()(Kt,"components",{QCard:X.Z,QCardSection:ee.Z,QSpace:te.Z,QBtn:ie.Z,QInput:oe.Z,QSelect:H.Z}),Q()(Kt,"directives",{ClosePopup:se.Z});const ei=e=>((0,o.dD)("data-v-f48b78d4"),e=e(),(0,o.Cn)(),e),ti=ei((()=>(0,o._)("div",{"data-cy":"select-integration",class:"text-h6"},[(0,o._)("b",null,"Infor LN")],-1))),ii={class:"row"},oi={class:"col-12"},si={class:"row q-pb-md"},ai={class:"col-6 q-pr-sm"},li={class:"col-6"},ni={class:"row"},ri={class:"col-sm-4 q-pr-sm"},di={class:"col-sm-4 q-pr-sm"},ci={class:"col-sm-4"},ui={class:"q-mt-md row justify-center"};function hi(e,t,i,a,l,n){const r=(0,o.up)("q-space"),d=(0,o.up)("q-btn"),c=(0,o.up)("q-card-section"),u=(0,o.up)("q-input"),h=(0,o.up)("SubOrgSelect"),m=(0,o.up)("q-select"),p=(0,o.up)("q-icon"),_=(0,o.up)("q-file"),g=(0,o.up)("q-card"),f=(0,o.Q2)("close-popup");return e.allowed_types.includes(e.selected_export)&&e.configuration?((0,o.wg)(),(0,o.j4)(g,{key:0,style:(0,s.j5)([{width:"1060px","max-width":"1060px"},{"min-height":"390px"}])},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"row items-center q-pb-sm bg-primary"},{default:(0,o.w5)((()=>[ti,(0,o.Wm)(r),(0,o.wy)((0,o.Wm)(d,{icon:"close",flat:"",round:"",dense:"",onClick:e.clearConfiguration},null,8,["onClick"]),[[f]])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",ii,[(0,o._)("div",oi,[(0,o.Wm)(u,{"data-cy":"title",outlined:"",modelValue:e.configuration.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.configuration.title=t),label:e.$t("pages.export.title"),"error-message":"Please provide Title",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])])]),(0,o._)("div",si,[(0,o._)("div",ai,[(0,o.Wm)(h)]),(0,o._)("div",li,[(0,o.Wm)(m,{modelValue:e.configuration.doc_type,"onUpdate:modelValue":t[1]||(t[1]=t=>e.configuration.doc_type=t),outlined:"","data-cy":"doc-type",options:e.doc_type_list,"emit-value":"","map-options":"",label:e.$t("pages.screen2a.doctype")},null,8,["modelValue","options","label"])])]),(0,o._)("div",ni,[(0,o._)("div",ri,[(0,o.Wm)(_,{modelValue:e.configuration.ion_file,"onUpdate:modelValue":t[2]||(t[2]=t=>e.configuration.ion_file=t),label:e.$t("pages.export.ion_mapping"),"data-cy":"ion-file",outlined:"","max-files":"1"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","label"]),e.configuration&&e.configuration.infor_ion_api?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",color:"primary",label:e.$t("download"),class:"float-right",onClick:t[3]||(t[3]=t=>e.downloadMappingFile("ION_API","INFOR-DOC2.ionapi",e.configuration.id))},null,8,["label"])):(0,o.kq)("",!0)]),(0,o._)("div",di,[(0,o.Wm)(_,{modelValue:e.configuration.idm_file,"onUpdate:modelValue":t[4]||(t[4]=t=>e.configuration.idm_file=t),label:e.$t("pages.export.idm_mapping"),outlined:"","max-files":"1"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","label"]),e.configuration&&e.configuration.infor_idm_mapping?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",color:"primary",label:e.$t("download"),class:"float-right",onClick:t[5]||(t[5]=t=>e.downloadMappingFile("IDM_MAPPING","IDM-Mapping.properties",e.configuration.id))},null,8,["label"])):(0,o.kq)("",!0)]),(0,o._)("div",ci,[(0,o.Wm)(_,{modelValue:e.configuration.ln_file,"onUpdate:modelValue":t[6]||(t[6]=t=>e.configuration.ln_file=t),label:e.$t("pages.export.ln_mapping"),outlined:"","max-files":"1"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","label"]),e.configuration&&e.configuration.infor_ln_mapping?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",color:"primary",label:e.$t("download"),class:"float-right",onClick:t[7]||(t[7]=t=>e.downloadMappingFile("LN_MAPPING","LN-Mapping.properties",e.configuration.id))},null,8,["label"])):(0,o.kq)("",!0)])]),(0,o._)("div",ui,[(0,o._)("div",null,[(0,o.wy)((0,o.Wm)(d,{style:{"letter-spacing":"2px",width:"130px"},"data-cy":"back",class:"q-mr-sm highlighted-back q-mt-md",label:e.$t("back"),onClick:e.clearConfiguration},null,8,["label","onClick"]),[[ne.F8,0==e.configuration.id]]),(0,o.Wm)(d,{style:{"letter-spacing":"2px",width:"130px"},color:"primary",class:"q-mt-md",label:e.$t("pages.user.save"),"data-cy":"save",onClick:e.saveConfig},null,8,["label","onClick"])])])])),_:1})])),_:1})):(0,o.kq)("",!0)}var mi=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const pi=(0,o.aZ)({mixins:[S.Z,De],components:{SubOrgSelect:J},data(){return{}},watch:{configuration:{deep:!0,handler:function(e,t){this.isSaveDisable()}}},methods:{isSaveDisable:function(){return!this.configuration.infor_idm_mapping&&!this.configuration.idm_file||(!this.configuration.infor_ion_api&&!this.configuration.ion_file||!this.configuration.infor_ln_mapping&&!this.configuration.ln_file)},saveConfig(){return mi(this,void 0,void 0,(function*(){try{let e=(this.configuration.id,{});e.export_method=this.export_types.INFOR_LN_CLOUD,e.doc_type=this.configuration.doc_type,e.title=this.configuration.title,0!==this.configuration.id&&(e.config_id=this.configuration.id),this.configuration.ion_file&&(e.ion_api=this.configuration.ion_file),this.configuration.idm_file&&(e.idm_mapping=this.configuration.idm_file),this.configuration.ln_file&&(e.ln_mapping=this.configuration.ln_file),this.configuration.hasOwnProperty("sub_org_id")&&null!==this.configuration.sub_org_id&&(e.sub_org_id=this.configuration.sub_org_id),this.processing=!0;const t=yield B.xS.saveLNConfig(e);if(t&&!t.success&&t.exception.detail)throw{message:t.exception.detail};this.config_saved=!0}catch(e){const t=Oe.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.processing=!1}}))}},setup(){const e=(0,V.At)(),{doc_type_list:t}=(0,z.Jk)(e),i=(0,V.Fl)(),{clearConfiguration:o}=i,{selected_export:s,selected_configuration:a,processing:l,config_saved:n,export_types:r}=(0,z.Jk)(i),d=[i.export_types.INFOR_LN_CLOUD];return{export_types:r,processing:l,selected_export:s,configuration:a,doc_type_list:t,config_saved:n,clearConfiguration:o,allowed_types:d}}}),_i=(0,j.Z)(pi,[["render",hi],["__scopeId","data-v-f48b78d4"]]),gi=_i;Q()(pi,"components",{QCard:X.Z,QCardSection:ee.Z,QSpace:te.Z,QBtn:ie.Z,QInput:oe.Z,QSelect:H.Z,QFile:Ie.Z,QIcon:Te.Z}),Q()(pi,"directives",{ClosePopup:se.Z});const fi=e=>((0,o.dD)("data-v-bb8e2764"),e=e(),(0,o.Cn)(),e),wi=fi((()=>(0,o._)("div",{"data-cy":"select-integration",class:"text-h6"},[(0,o._)("b",null,"Infor M3")],-1))),yi={class:"row"},bi={class:"col-12"},vi={class:"row q-pb-md"},xi={class:"col-6 q-pr-sm"},ki={class:"col-6"},Ci={class:"row"},Di={class:"col-sm-4 q-pr-sm"},Oi={class:"col-sm-4 q-pr-sm"},Ei={class:"col-sm-4"},Si={class:"q-mt-md row justify-center"};function Ii(e,t,i,a,l,n){const r=(0,o.up)("q-space"),d=(0,o.up)("q-btn"),c=(0,o.up)("q-card-section"),u=(0,o.up)("q-input"),h=(0,o.up)("SubOrgSelect"),m=(0,o.up)("q-select"),p=(0,o.up)("q-icon"),_=(0,o.up)("q-file"),g=(0,o.up)("q-card"),f=(0,o.Q2)("close-popup");return e.allowed_types.includes(e.selected_export)&&e.configuration?((0,o.wg)(),(0,o.j4)(g,{key:0,style:(0,s.j5)([{width:"1060px","max-width":"1060px"},{"min-height":"390px"}])},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"row items-center q-pb-sm bg-primary"},{default:(0,o.w5)((()=>[wi,(0,o.Wm)(r),(0,o.wy)((0,o.Wm)(d,{icon:"close",flat:"",round:"",dense:"",onClick:e.clearConfiguration},null,8,["onClick"]),[[f]])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",yi,[(0,o._)("div",bi,[(0,o.Wm)(u,{"data-cy":"title",outlined:"",modelValue:e.configuration.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.configuration.title=t),label:e.$t("pages.export.title"),"error-message":"Please provide Title",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])])]),(0,o._)("div",vi,[(0,o._)("div",xi,[(0,o.Wm)(h)]),(0,o._)("div",ki,[(0,o.Wm)(m,{modelValue:e.configuration.doc_type,"onUpdate:modelValue":t[1]||(t[1]=t=>e.configuration.doc_type=t),outlined:"","data-cy":"doc-type",options:e.doc_type_list,"emit-value":"","map-options":"",label:e.$t("pages.screen2a.doctype")},null,8,["modelValue","options","label"])])]),(0,o._)("div",Ci,[(0,o._)("div",Di,[(0,o.Wm)(_,{modelValue:e.configuration.ion_file,"onUpdate:modelValue":t[2]||(t[2]=t=>e.configuration.ion_file=t),label:e.$t("pages.export.ion_mapping"),"data-cy":"ion-file",outlined:"","max-files":"1"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","label"]),e.configuration&&e.configuration.infor_ion_api?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",color:"primary",label:e.$t("download"),class:"float-right",onClick:t[3]||(t[3]=t=>e.downloadMappingFile("ION_API","INFOR-DOC2.ionapi",e.configuration.id))},null,8,["label"])):(0,o.kq)("",!0)]),(0,o._)("div",Oi,[(0,o.Wm)(_,{modelValue:e.configuration.idm_file,"onUpdate:modelValue":t[4]||(t[4]=t=>e.configuration.idm_file=t),label:e.$t("pages.export.idm_mapping"),outlined:"","max-files":"1"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","label"]),e.configuration&&e.configuration.infor_idm_mapping?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",color:"primary",label:e.$t("download"),class:"float-right",onClick:t[5]||(t[5]=t=>e.downloadMappingFile("IDM_MAPPING","IDM-Mapping.properties",e.configuration.id))},null,8,["label"])):(0,o.kq)("",!0)]),(0,o._)("div",Ei,[(0,o.Wm)(_,{modelValue:e.configuration.m3_file,"onUpdate:modelValue":t[6]||(t[6]=t=>e.configuration.m3_file=t),label:e.$t("pages.export.m3_mapping"),outlined:"","max-files":"1"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","label"]),e.configuration&&e.configuration.infor_m3_mapping?((0,o.wg)(),(0,o.j4)(d,{key:0,flat:"",color:"primary",label:e.$t("download"),class:"float-right",onClick:t[7]||(t[7]=t=>e.downloadMappingFile("M3_MAPPING","LN-Mapping.properties",e.configuration.id))},null,8,["label"])):(0,o.kq)("",!0)])]),(0,o._)("div",Si,[(0,o._)("div",null,[(0,o.wy)((0,o.Wm)(d,{style:{"letter-spacing":"2px",width:"130px"},"data-cy":"back",class:"q-mr-sm highlighted-back q-mt-md",label:e.$t("back"),onClick:e.clearConfiguration},null,8,["label","onClick"]),[[ne.F8,0==e.configuration.id]]),(0,o.Wm)(d,{style:{"letter-spacing":"2px",width:"130px"},color:"primary",class:"q-mt-md",label:e.$t("pages.user.save"),"data-cy":"save",onClick:e.saveConfig},null,8,["label","onClick"])])])])),_:1})])),_:1})):(0,o.kq)("",!0)}var Ti=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const Li=(0,o.aZ)({mixins:[S.Z,De],components:{SubOrgSelect:J},data(){return{}},watch:{configuration:{deep:!0,handler:function(e,t){this.isSaveDisable()}}},methods:{isSaveDisable:function(){return!this.configuration.infor_idm_mapping&&!this.configuration.idm_file||(!this.configuration.infor_ion_api&&!this.configuration.ion_file||!this.configuration.infor_m3_mapping&&!this.configuration.m3_file)},saveConfig(){return Ti(this,void 0,void 0,(function*(){try{let e=(this.configuration.id,{});e.export_method=this.export_types.INFOR_M3_CLOUD,e.doc_type=this.configuration.doc_type,e.title=this.configuration.title,0!==this.configuration.id&&(e.config_id=this.configuration.id),this.configuration.ion_file&&(e.ion_api=this.configuration.ion_file),this.configuration.idm_file&&(e.idm_mapping=this.configuration.idm_file),this.configuration.m3_file&&(e.m3_mapping=this.configuration.m3_file),this.configuration.hasOwnProperty("sub_org_id")&&null!==this.configuration.sub_org_id&&(e.sub_org_id=this.configuration.sub_org_id),this.processing=!0;const t=yield B.xS.saveM3Config(e);if(t&&!t.success&&t.exception.detail)throw{message:t.exception.detail};this.config_saved=!0}catch(e){const t=Oe.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.processing=!1}}))}},setup(){const e=(0,V.At)(),{doc_type_list:t}=(0,z.Jk)(e),i=(0,V.Fl)(),{clearConfiguration:o}=i,{selected_export:s,selected_configuration:a,processing:l,config_saved:n,export_types:r}=(0,z.Jk)(i),d=[i.export_types.INFOR_M3_CLOUD];return{export_types:r,processing:l,selected_export:s,configuration:a,doc_type_list:t,config_saved:n,clearConfiguration:o,allowed_types:d}}}),Mi=(0,j.Z)(Li,[["render",Ii],["__scopeId","data-v-bb8e2764"]]),Fi=Mi;Q()(Li,"components",{QCard:X.Z,QCardSection:ee.Z,QSpace:te.Z,QBtn:ie.Z,QInput:oe.Z,QSelect:H.Z,QFile:Ie.Z,QIcon:Te.Z}),Q()(Li,"directives",{ClosePopup:se.Z});const qi=(0,o.aZ)({name:"export-dialog",mixins:[I.Z,S.Z],props:{},components:{Webhook:le,InforIdm:Me,Flow2:et,InforIon:vt,Zugferd:At,Peppol:Xt,InforLN:gi,InforM3:Fi},data(){return{}},methods:{},setup(){const e=(0,V.Fl)(),{selectedNewExport:t,clearStateForExportDialog:i}=e,{selected_export:o,export_types:s}=(0,z.Jk)(e);return{export_types:s,selected_export:o,selectedNewExport:t,clearStateForExportDialog:i}}});var Zi=i(75096),Ri=i(46778);const Wi=(0,j.Z)(qi,[["render",E],["__scopeId","data-v-67ebbb0f"]]),Ai=Wi;Q()(qi,"components",{QCard:X.Z,QCardSection:ee.Z,QSpace:te.Z,QBtn:ie.Z,QIcon:Te.Z,QAvatar:Zi.Z,QDialog:Ri.Z}),Q()(qi,"directives",{ClosePopup:se.Z})},85385:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var o=i(83673),s=i(62323);function a(e,t,i,a,l,n){const r=(0,o.up)("q-spinner-ios");return(0,o.wg)(),(0,o.iD)("span",{class:"action-link no-border",onClick:t[0]||(t[0]=(...t)=>e.navigateToFormBuilder&&e.navigateToFormBuilder(...t))},[e.loading_templates?((0,o.wg)(),(0,o.j4)(r,{key:0,color:"primary",size:"2em"})):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,s.zw)(e.$t("edit_layout")),1)])}var l=i(10321),n=i(61959),r=i(60727),d=i(84815);const c=(0,o.aZ)({el:"#app",mixins:[],components:{},props:{doc_type_key:{type:String,default:""},sub_doc_type_key:{type:String,default:""},extraction_type:{type:String,default:""}},watch:{loading_templates:{handler:function(e,t){this.setTemplateId()}}},data(){return{layout_template_id:(0,n.iH)("")}},mounted:function(){this.setTemplateId()},methods:{setTemplateId(){try{if("function"!==typeof this.document_type_templates.filter)return;let e=this.document_type_templates.filter((e=>{const t=e.doc_type_key==this.doc_type_key;return this.sub_doc_type_key?t&&e.sub_doc_type_key==this.sub_doc_type_key:t&&!e.sub_doc_type_key}));e=e[0]||null,this.layout_template_id=e?e.id:""}catch(e){}},navigateToFormBuilder(){if(this.loading_templates)return;const e=d.V.getDetailViewRoute({doc_type_key:this.doc_type_key||"",layout_template_id:this.layout_template_id||"",sub_doc_type_key:this.sub_doc_type_key||""});this.$router.push(e)}},setup(){const e=(0,r.nc)(),{loading_templates:t,document_type_templates:i}=(0,l.Jk)(e);return{loading_templates:t,document_type_templates:i}}});var u=i(74260),h=i(18506),m=i(7518),p=i.n(m);const _=(0,u.Z)(c,[["render",a]]),g=_;p()(c,"components",{QSpinnerIos:h.Z})},86068:(e,t,i)=>{"use strict";i.d(t,{Z:()=>P});var o=i(83673),s=i(98880),a=i(62323);const l={class:"text-weight-bold"},n={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},r={class:"full-width"},d={class:"row full-width"},c={class:"full-width"},u={class:"row full-width"},h={class:"full-width"},m={key:0,class:"row full-width"},p={class:"full-width"};function _(e,t,i,_,g,f){const w=(0,o.up)("q-toolbar-title"),y=(0,o.up)("q-btn"),b=(0,o.up)("q-toolbar"),v=(0,o.up)("q-input"),x=(0,o.up)("q-checkbox"),k=(0,o.up)("q-icon"),C=(0,o.up)("q-item-label"),D=(0,o.up)("q-item-section"),O=(0,o.up)("q-item"),E=(0,o.up)("q-select"),S=(0,o.up)("q-card-section"),I=(0,o.up)("q-card-actions"),T=(0,o.up)("q-card"),L=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(T,{style:{width:"600px"}},{default:(0,o.w5)((()=>[(0,o._)("form",{onSubmit:t[5]||(t[5]=(0,s.iM)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.Wm)(b,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o._)("span",l,(0,a.zw)(e.$t("add_new_table_column")),1)])),_:1}),(0,o.wy)((0,o.Wm)(y,{flat:"",round:"",dense:"",icon:"close"},null,512),[[L]])])),_:1}),(0,o.Wm)(S,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o._)("div",r,[(0,o.Wm)(v,{label:e.$t("title")+"*",modelValue:e.new_column_model["label"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_column_model["label"]=t),hint:e.$t("custom_column_hint"),outlined:"",class:"full-width"},null,8,["label","modelValue","hint"])])]),(0,o._)("div",d,[(0,o._)("div",c,[(0,o.Wm)(x,{class:"q-mb-sm",label:e.$t("is_it_required"),modelValue:e.new_column_model["column_required"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.new_column_model["column_required"]=t)},null,8,["label","modelValue"])])]),(0,o._)("div",u,[(0,o._)("div",h,[(0,o.Wm)(E,{outlined:"",modelValue:e.new_column_model["type"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.new_column_model["type"]=t),class:"col-sm-6 col-md-6 col-lg-6",options:e.column_type,label:e.$t("select_column_type")+"*","emit-value":"","map-options":"","error-message":e.$t("field_is_required"),error:e.new_column_model["type_error"]},{append:(0,o.w5)((()=>[(0,o.Wm)(k,{name:"close",onClick:t[2]||(t[2]=(0,s.iM)((t=>e.new_column_model["type"]=""),["stop"])),class:"cursor-pointer"})])),option:(0,o.w5)((e=>[(0,o.Wm)(O,(0,a.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","label","error-message","error"])])]),e.isViewColumnListView()?((0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("div",p,[(0,o.Wm)(E,{outlined:"",tabindex:"0",modelValue:e.new_column_model["table_name"],"onUpdate:modelValue":t[4]||(t[4]=t=>e.new_column_model["table_name"]=t),"error-message":"Field is required",error:e.new_column_model["table_name_error"],options:e.tables_list,loading:e.table_list_loading,"emit-value":"","map-options":""},null,8,["modelValue","error","options","loading"])])])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(I,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(y,{class:"highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[L]]),(0,o.Wm)(y,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("pages.line_items.proceed")},null,8,["label"])])),_:1})],32)])),_:1})}var g=i(53371),f=i(30052),w=i.n(f),y=i(61959),b=i(77378),v=i(45401),x=i(54268),k=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const C=(0,o.aZ)({el:"#app",mixins:[v.Z,b.Z],props:{is_table_training_doc:{type:Boolean,default:!1},table_name:{type:String,default:""},parent_view:{type:String,default:"table_extraction"},tables:[],columns_list:{},tables_list:[],table_list_loading:{type:Boolean,default:!1}},components:{},data(){return{}},setup(){let e={};return{new_column_model:(0,y.iH)(e),table_train:(0,y.iH)(!1),token:(0,y.iH)(""),docId:"",column_type:[{label:g.i18n.t("select_column_type"),value:""},{label:g.i18n.t("amount"),value:"AMOUNT"},{label:"STRING",value:"STRING"},{label:g.i18n.t("invoice_date"),value:"DATE"},{label:g.i18n.t("number"),value:"NUMBER"},{label:"BOOLEAN",value:"BOOLEAN"},{label:g.i18n.t("currency"),value:"CURRENCY"}]}},watch:{},mounted(){this.isDocForTraining(),this.setNewModel()},methods:{setNewModel(){this.new_column_model["column_required"]=!1,this.new_column_model["table_name"]=this.$t("select_table"),this.new_column_model["label"]="",this.new_column_model["type"]="",this.new_column_model["type_error"]=!1},submitNewColumFrom(){return k(this,void 0,void 0,(function*(){try{if(!this.new_column_model["type"]||""==this.new_column_model["type"])return void(this.new_column_model["type_error"]=!0);this.vaildateColumnLabel(),yield this.saveNewColumn()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},vaildateColumnLabel(){this.new_column_model["column_name"]="";let e=this.new_column_model["label"];if(e=e.replace(/\ /g,"_"),!e||""==e)throw{message:"Title required"};const t=/^[a-zA-Z0-9\_]+$/;if(!t.test(e))throw{message:"Only use Words and Numbers for title"};if(this.new_column_model["column_name"]=e.replace(/[^0-9a-zA-Z_ ]/g,"").toUpperCase(),this.columns_list.hasOwnProperty(this.new_column_model["column_name"]))throw{message:this.$t("title_already_exists")};if(!this.new_column_model["column_name"]||""==this.new_column_model["column_name"])throw{message:"Title required"};if(this.isViewColumnListView()&&(!this.new_column_model["table_name"]||0==this.new_column_model["table_name"].length))throw{message:"Table required"}},saveNewColumn(){return k(this,void 0,void 0,(function*(){let e;try{let t=new FormData;t.append("column_name",this.new_column_model["column_name"]),t.append("column_type",this.new_column_model["type"]),t.append("title",this.new_column_model["label"]),t.append("is_required",this.new_column_model["column_required"]),t.append("doc_id",this.docId),t.append("table_data",JSON.stringify(this.tables));let i=this.isViewColumnListView()?this.new_column_model["table_name"]:this.table_name;t.append("table_name",i),!0===this.is_table_training_doc&&t.append("is_table_training_doc",(!0).toString());let o=yield this.getToken();if(e=yield w().post(x.hi.create_document_table_column,t,{headers:{Authorization:o}}),!1===e.data.success||!e.data.table_data){if(!e.data.message)throw{message:"Response dont have table_data index/success is set to false"};this.showErrorToast(e.data.message)}this.dispatchSuccessEvent(e.data.table_data)}catch(t){throw{message:this.$t("title_already_exists_switcher")}}this.hideLoading()}))},dispatchSuccessEvent(e){const t=new CustomEvent("custom_column_create",{detail:{tables:e}});document.dispatchEvent(t)},getToken(){return k(this,void 0,void 0,(function*(){let e=this.token&&null!=this.token&&""!=this.token?this.token:yield(0,x.O_)();return e}))},isDocForTraining(){this.$route.params.table_train&&"true"===this.$route.params.table_train?(this.table_train=!0,this.token=String(this.$route.query.token),this.docId=String(this.$route.query.id)):this.docId=String(this.$route.params.id)},isViewColumnListView(){return"columns_list"===this.parent_view}}});var D=i(74260),O=i(10151),E=i(39570),S=i(13747),I=i(2165),T=i(25589),L=i(64689),M=i(65735),F=i(72448),q=i(24554),Z=i(83414),R=i(52035),W=i(2350),A=i(99367),V=i(60677),z=i(7518),B=i.n(z);const N=(0,D.Z)(C,[["render",_]]),P=N;B()(C,"components",{QCard:O.Z,QToolbar:E.Z,QToolbarTitle:S.Z,QBtn:I.Z,QCardSection:T.Z,QInput:L.Z,QCheckbox:M.Z,QSelect:F.Z,QIcon:q.Z,QItem:Z.Z,QItemSection:R.Z,QItemLabel:W.Z,QCardActions:A.Z}),B()(C,"directives",{ClosePopup:V.Z})},23911:(e,t,i)=>{"use strict";i.d(t,{Z:()=>yt});var o=i(83673),s=i(62323),a=i(98880);const l=e=>((0,o.dD)("data-v-55a5cd28"),e=e(),(0,o.Cn)(),e),n={key:0,class:"row bg-grey-2 q-pl-md q-pr-md q-pb-md"},r={key:1,class:"text-center text-h3 q-pl-xl q-pr-md"},d={style:{"padding-left":"5px"}},c={class:"highlighted-back"},u=(0,o.Uk)(". "),h={key:2},m={style:{"padding-left":"5px"}},p={style:{"padding-left":"5px"}},_=l((()=>(0,o._)("span",{style:{"padding-left":"5px"}}," Values are set to auto filled ",-1))),g=l((()=>(0,o._)("span",{style:{"padding-left":"5px"}}," Document has text but cannot be extracted ",-1))),f={key:3,class:"q-pa-md q-gutter-sm"},w={class:"text-weight-bold"},y={class:"row items-center"},b={style:{width:"40%",margin:"auto"}},v={class:"input-text validation-icon",style:{width:"60%"}},x={class:"row items-center q-mb-md"},k={style:{width:"40%",margin:"auto"}},C={style:{width:"60%"}},D={class:"q-pa-md"},O={class:"row items-center"},E={style:{width:"40%",margin:"auto"}},S={style:{width:"60%"}},I={class:"row items-center"},T={style:{width:"40%",margin:"auto"}},L={style:{width:"60%"}},M={class:"row items-center"},F={style:{width:"40%",margin:"auto"}},q={style:{width:"60%"}},Z={class:"row items-center"},R={style:{width:"40%",margin:"auto"}},W={style:{width:"60%"}},A={class:"row items-center"},V={style:{width:"40%",margin:"auto"}},z={style:{width:"60%"}},B={key:0,class:"row items-center"},N={style:{width:"1000%",margin:"auto"}},P={class:"bg-grey-3"},U={class:"text-h4 text-uppercase text-left"},j={class:"text-h4 text-uppercase text-left"},H={class:"text-h4 text-uppercase text-left"},$={class:"text-h4 text-uppercase text-left"},Q=l((()=>(0,o._)("img",{src:"trash-bin-default.svg",width:"20"},null,-1))),Y={class:"text-weight-bold"},J={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},K={style:{width:"50%"}},G=l((()=>(0,o._)("div",{style:{width:"50%"},class:"pl-20"},null,-1))),X={style:{"margin-bottom":"20px"},class:"row full-width mb-10"},ee={style:{width:"50%"}},te={style:{width:"50%"},class:"pl-20"},ie={key:0,style:{"margin-bottom":"20px"},class:"row full-width mb-10"},oe={style:{width:"100%"}},se={style:{"margin-bottom":"20px"},class:"row full-width mb-10"},ae={style:{width:"100%"}},le={class:"q-ml-sm"},ne={class:"q-ml-sm"},re={class:"text-weight-bold"},de={class:"q-ml-sm"},ce={class:"q-ml-sm"};function ue(e,t,i,l,ue,he){const me=(0,o.up)("ErrorDocumentView"),pe=(0,o.up)("q-icon"),_e=(0,o.up)("q-th"),ge=(0,o.up)("q-tooltip"),fe=(0,o.up)("q-fab-action"),we=(0,o.up)("q-fab"),ye=(0,o.up)("q-item-label"),be=(0,o.up)("q-item-section"),ve=(0,o.up)("q-item"),xe=(0,o.up)("q-list"),ke=(0,o.up)("q-btn-dropdown"),Ce=(0,o.up)("q-tr"),De=(0,o.up)("q-btn"),Oe=(0,o.up)("q-td"),Ee=(0,o.up)("q-input"),Se=(0,o.up)("q-table"),Ie=(0,o.up)("q-markup-table"),Te=(0,o.up)("q-toolbar-title"),Le=(0,o.up)("q-toolbar"),Me=(0,o.up)("q-select"),Fe=(0,o.up)("q-separator"),qe=(0,o.up)("q-checkbox"),Ze=(0,o.up)("q-expansion-item"),Re=(0,o.up)("q-card-section"),We=(0,o.up)("q-card-actions"),Ae=(0,o.up)("q-card"),Ve=(0,o.up)("q-dialog"),ze=(0,o.up)("q-avatar"),Be=(0,o.up)("CreateCustomColumn"),Ne=(0,o.up)("BlockedColumns"),Pe=(0,o.up)("ManageRuleRegexes"),Ue=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.doc_fetch_error?((0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(me)])):e.account_block?((0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(pe,{class:"text-blue",style:{"font-size":"32px"},name:"info"}),(0,o._)("span",d,(0,s.zw)(e.$t("block_supplier_warning")),1)])):((0,o.wg)(),(0,o.iD)("div",{class:"row q-pa-sm full-width",key:e.renderKey},[e.hasLineItems()?((0,o.wg)(),(0,o.j4)(Se,{key:0,"no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),rows:e.tableRows,columns:e.tableColumns,"row-key":"id","table-header-style":{backgroundColor:"#d4d4d4"},"hide-bottom":"",style:{overflow:"scroll",height:"auto","min-height":"180px","max-height":"500px"},"rows-per-page-options":[0],id:"line_item_table"},{header:(0,o.w5)((i=>[(0,o.Wm)(Ce,{props:i,class:"bg-grey-3"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.cols,((i,a)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i.name},[""===i.label?((0,o.wg)(),(0,o.j4)(_e,{key:0})):((0,o.wg)(),(0,o.j4)(_e,{key:1},{default:(0,o.w5)((()=>[e.isReadOnly?((0,o.wg)(),(0,o.iD)("span",{key:1,class:(0,s.C_)("gridHeader "+(i.error?"column-error-border":"")+(!0===e.hasOriginalIndex(i.org_index,i)?"non-extractable-column-text ":" extractable-column-text")),style:{width:"100%","box-shadow":"none",padding:"8px 40px 8px 2px"}},(0,s.zw)(i.label),3)):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[e.hasOriginalIndex(i.org_index,i)?((0,o.wg)(),(0,o.j4)(we,{key:0,color:e.hasOriginalIndex(i.org_index,i)&&e.formatting_options.group_column===i.org_index?"primary":"grey-6",class:"column-fab",icon:"more_horiz",direction:"down",padding:"2px",outline:""},{default:(0,o.w5)((()=>[e.hasOriginalIndex(i.org_index,i)?((0,o.wg)(),(0,o.j4)(fe,{key:0,color:"grey-3","text-color":"black",onClick:t=>e.deleteLineItemColumn(i.org_index),width:"20",icon:"img:trash-bin-default.svg"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("delete_column")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),e.hasOriginalIndex(i.org_index,i)&&e.formatting_options.group_column!==i.org_index?((0,o.wg)(),(0,o.j4)(fe,{key:1,color:"grey-3","text-color":i.is_mapped?"non-extractable-column-text":"black",onClick:t=>e.groupByColumn(i.org_index),width:"20",icon:"lar la-object-group"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("group_rows")),1)])),_:1})])),_:2},1032,["text-color","onClick"])):(0,o.kq)("",!0),e.hasOriginalIndex(i.org_index,i)&&e.formatting_options.group_column===i.org_index?((0,o.wg)(),(0,o.j4)(fe,{key:2,color:"grey-3","text-color":"black",onClick:t[0]||(t[0]=t=>e.resetFormating()),width:"20",icon:"lar la-object-ungroup"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("reset_group_rows")),1)])),_:1})])),_:1})):(0,o.kq)("",!0),e.hasOriginalIndex(i.org_index,i)&&!i.is_mapped?((0,o.wg)(),(0,o.j4)(fe,{key:3,color:"grey-3",onClick:t=>{e.prepareRegexData(i.name)},"text-color":"black",width:"20",icon:"las la-infinity"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("regex")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])),_:2},1032,["color"])):(0,o.kq)("",!0),e.hasOriginalIndex(i.org_index,i)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(we,{key:1,color:"grey-6",class:"column-fab",icon:"more_horiz",direction:"down",padding:"2px",outline:""},{default:(0,o.w5)((()=>[(0,o.Wm)(fe,{color:"grey-3","text-color":"black",onClick:t=>e.disableCustomColumn(i.name),width:"20",icon:"img:trash-bin-default.svg"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("disable_column")),1)])),_:1})])),_:2},1032,["onClick"]),i.is_mapped?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(fe,{key:0,color:"grey-3",onClick:t=>{e.prepareRegexData(i.name)},"text-color":"black",width:"20",icon:"las la-infinity"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("regex")),1)])),_:1})])),_:2},1032,["onClick"]))])),_:2},1024)),(0,o.Wm)(ke,{flat:"",disable:1!=e.hasOriginalIndex(i.org_index,i),id:"button_"+a,class:(0,s.C_)("gridHeader "+(i.error?"column-error-border":"")+(!0===e.hasOriginalIndex(i.org_index,i)?"non-extractable-column-text ":" extractable-column-text")),label:i.label},{default:(0,o.w5)((()=>[(0,o.Wm)(xe,{filter:e.filter},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.dropdownColumns,(t=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(ve,{key:t.techName,clickable:"",onClick:o=>e.swapColumn(t,i.org_index,i.name,"button_"+a)},{default:(0,o.w5)((()=>[(0,o.Wm)(be,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.header),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[Ue]]))),128))])),_:2},1032,["filter"])])),_:2},1032,["disable","id","class","label"])],64)),i.error?((0,o.wg)(),(0,o.j4)(pe,{key:2,title:e.$t("pages.screen2b.in_valid_column_error"),name:"priority_high",class:"headerError"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.screen2b.in_valid_column_error")),1)])),_:1})])),_:1},8,["title"])):(0,o.kq)("",!0)])),_:2},1024))],64)))),128))])),_:2},1032,["props"])])),body:(0,o.w5)((t=>[(0,o.Wm)(Ce,{props:t,id:"tbl_row_"+t.key},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cols,(i=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i.name},[""===i.label?((0,o.wg)(),(0,o.j4)(Oe,{key:0,class:"secondary-c-text"},{default:(0,o.w5)((()=>[e.isReadOnly||e.training_mode?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[e.rowHasErrors(t.key)?((0,o.wg)(),(0,o.j4)(pe,{key:0,title:e.$t("pages.screen2b.in_valid_column_error"),name:"priority_high",class:"headerError"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,{class:"bg-red line-error-tooltip"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.lineItemsErrors[t.key],((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t},(0,s.zw)(e),1)))),128))])),_:2},1024)])),_:2},1032,["title"])):(0,o.kq)("",!0),(0,o.Wm)(De,{flat:"",color:"primary",onClick:i=>e.removeLineItem(t.key),icon:"fa fa-times"},null,8,["onClick"])],64))])),_:2},1024)):e.isColumnVisible(i.org_index,i)?((0,o.wg)(),(0,o.j4)(Oe,{key:1,id:"input_"+i.name+"_"+t.key,onClick:o=>e.editColumnData(o,i.field,t.key),"data-score-description":e.getScoreDescription(e.lineDataObj[t.key]["columns"][i.name]),"data-column-value":e.lineDataObj[t.key]["columns"][i.name].formatted_value},{default:(0,o.w5)((()=>[(0,o.Wm)(Ee,{disable:e.isReadOnly,class:(0,s.C_)("input-field "+e.addExtractionMethodClass(e.lineDataObj[t.key]["columns"][i.name])),style:(0,s.j5)("background:"+e.getBackgroundColor(e.lineDataObj[t.key]["columns"][i.name])),borderless:"",onKeydown:e.inputKeyDown,onChange:o=>e.inputValueChanges(i.name,t.key),modelValue:e.lineDataObj[t.key]["columns"][i.name].formatted_value,"onUpdate:modelValue":o=>e.lineDataObj[t.key]["columns"][i.name].formatted_value=o},null,8,["disable","class","style","onKeydown","onChange","modelValue","onUpdate:modelValue"])])),_:2},1032,["id","onClick","data-score-description","data-column-value"])):(0,o.kq)("",!0)],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["no-data-label","rows","columns"])):((0,o.wg)(),(0,o.j4)(Ie,{key:1,class:"full-width"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",c,[(0,o._)("th",null,[e.isFormBuilderMode?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)((0,s.zw)(e.$t("no_columns_found"))+" "+(0,s.zw)(e.$t("please_contact_system_administrator")),1)],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,s.zw)(e.$t("no_columns_found"))+" "+(0,s.zw)(e.$t("please_go_to"))+" ",1),(0,o._)("span",{class:"cursor-pointer link",onClick:t[1]||(t[1]=t=>e.routeToTableTraining())},(0,s.zw)(e.$t("table_training_view")),1),u],64))])])])])),_:1})),e.hasLineItems()?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("div",null,[(0,o.Wm)(pe,{class:"non-extractable-column-text",style:{"font-size":"18px"},name:"rectangle"}),(0,o._)("span",m,(0,s.zw)(e.$t("non_extractable_column_text")),1)]),(0,o._)("div",null,[(0,o.Wm)(pe,{class:"extractable-column-text",style:{"font-size":"18px"},name:"rectangle"}),(0,o._)("span",p,(0,s.zw)(e.$t("extractable_column_text")),1)]),(0,o._)("div",null,[(0,o.Wm)(pe,{style:(0,s.j5)({"font-size":"18px",color:e.is_auto_filled_color}),name:"rectangle"},null,8,["style"]),_]),(0,o._)("div",null,[(0,o.Wm)(pe,{style:(0,s.j5)({"font-size":"18px",color:e.is_missing_color}),name:"rectangle"},null,8,["style"]),g])])):(0,o.kq)("",!0)])),e.openAdvSettings?((0,o.wg)(),(0,o.iD)("div",f,[(0,o.Wm)(Ve,{modelValue:e.openAdvSettings,"onUpdate:modelValue":t[10]||(t[10]=t=>e.openAdvSettings=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Ae,{style:{width:"700px","max-width":"50vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Le,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(Te,null,{default:(0,o.w5)((()=>[(0,o._)("span",w,(0,s.zw)(e.$t("layout.settings")),1)])),_:1}),(0,o.wy)((0,o.Wm)(De,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Ue]])])),_:1}),(0,o.Wm)(Re,{class:""},{default:(0,o.w5)((()=>[(0,o._)("div",y,[(0,o._)("div",b,[(0,o.Uk)((0,s.zw)(e.$t("pages.line_items.header_row_count_field"))+" ",1),(0,o.Wm)(pe,{name:"help_outline",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("header_row_count")),1)])),_:1})])),_:1})]),(0,o._)("div",v,[(0,o.Wm)(Ee,{outlined:"",type:"number",rules:e.headerRowCountRules,modelValue:e.header_rows_count,"onUpdate:modelValue":t[2]||(t[2]=t=>e.header_rows_count=t)},null,8,["rules","modelValue"])])]),(0,o._)("div",x,[(0,o._)("div",k,[(0,o.Uk)((0,s.zw)(e.$t("move_extra_rows_to"))+" ",1),(0,o.Wm)(pe,{name:"help_outline",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("move_extra_rows_to_desc")),1)])),_:1})])),_:1})]),(0,o._)("div",C,[(0,o.Wm)(Me,{outlined:"",modelValue:e.move_extra_rows_to,"onUpdate:modelValue":t[3]||(t[3]=t=>e.move_extra_rows_to=t),options:e.advance_settings_columns,"emit-value":"","map-options":""},{option:(0,o.w5)((e=>[(0,o.Wm)(ve,(0,s.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(be,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye,{class:(0,s.C_)("__trash__"===e.opt.value?"text-red text-weight-bold":"")},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options"])])]),(0,o.Wm)(xe,{bordered:"",class:"rounded-borders"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ze,{"expand-separator":"",icon:"description",label:e.$t("pages.line_items.adv_settings_header"),"header-class":"panel-header","default-closed":""},{default:(0,o.w5)((()=>[(0,o.Wm)(Fe),(0,o._)("div",D,[(0,o._)("div",O,[(0,o._)("div",E,[(0,o.Uk)((0,s.zw)(e.$t("pages.line_items.min_group_rows"))+" ",1),(0,o.Wm)(pe,{name:"help_outline",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("minimum_grouped_rows")),1)])),_:1})])),_:1})]),(0,o._)("div",S,[(0,o.Wm)(Ee,{class:"input-text validation-icon",outlined:"",type:"number",rules:e.headerRowCountRules,modelValue:e.min_group_rows,"onUpdate:modelValue":t[4]||(t[4]=t=>e.min_group_rows=t)},null,8,["rules","modelValue"])])]),(0,o._)("div",I,[(0,o._)("div",T,[(0,o.Uk)((0,s.zw)(e.$t("pages.line_items.max_group_rows"))+" ",1),(0,o.Wm)(pe,{name:"help_outline",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("maximum_grouped_rows")),1)])),_:1})])),_:1})]),(0,o._)("div",L,[(0,o.Wm)(Ee,{class:"input-text validation-icon",outlined:"",type:"number",rules:e.headerRowCountRules,modelValue:e.max_group_rows,"onUpdate:modelValue":t[5]||(t[5]=t=>e.max_group_rows=t)},null,8,["rules","modelValue"])])]),(0,o._)("div",M,[(0,o._)("div",F,[(0,o.Uk)((0,s.zw)(e.$t("pages.line_items.distinct_group_column"))+" ",1),(0,o.Wm)(pe,{name:"help_outline",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("distinct_group_columns")),1)])),_:1})])),_:1})]),(0,o._)("div",q,[(0,o.Wm)(qe,{modelValue:e.distinct_group_column,"onUpdate:modelValue":t[6]||(t[6]=t=>e.distinct_group_column=t)},null,8,["modelValue"])])]),(0,o._)("div",Z,[(0,o._)("div",R,[(0,o.Uk)((0,s.zw)(e.$t("pages.line_items.reverse_grouping"))+" ",1),(0,o.Wm)(pe,{name:"help_outline",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("reverse_grouping")),1)])),_:1})])),_:1})]),(0,o._)("div",W,[(0,o.Wm)(qe,{modelValue:e.reverse_grouping,"onUpdate:modelValue":t[7]||(t[7]=t=>e.reverse_grouping=t)},null,8,["modelValue"])])]),(0,o._)("div",A,[(0,o._)("div",V,[(0,o.Uk)((0,s.zw)(e.$t("split_text"))+" ",1),(0,o.Wm)(pe,{name:"help_outline",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("split_text_desc")),1)])),_:1})])),_:1})]),(0,o._)("div",z,[(0,o.Wm)(qe,{modelValue:e.split_text,"onUpdate:modelValue":t[8]||(t[8]=t=>e.split_text=t),onClick:t[9]||(t[9]=t=>e.split_text_confirm_dialog=!0)},null,8,["modelValue"])])]),e.extra_columns.length>0?((0,o.wg)(),(0,o.iD)("div",B,[(0,o._)("div",N,[(0,o.Wm)(Ie,null,{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",P,[(0,o._)("th",U,(0,s.zw)(e.$t("field_key")),1),(0,o._)("th",j,(0,s.zw)(e.$t("source_field")),1),(0,o._)("th",H,(0,s.zw)(e.$t("pattern")),1),(0,o._)("th",$,(0,s.zw)(e.$t("actions")),1)])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.extra_columns,((t,i)=>((0,o.wg)(),(0,o.iD)("tr",{key:t["key"]},[(0,o._)("td",null,(0,s.zw)(t["field_key"]),1),(0,o._)("td",null,(0,s.zw)(t["source_field"]),1),(0,o._)("td",null,(0,s.zw)(t["pattern"]),1),(0,o._)("td",null,[(0,o.Wm)(De,{flat:"",onClick:t=>{t.stopPropagation(),e.removeFieldFromSettings(i)}},{default:(0,o.w5)((()=>[Q,(0,o.Wm)(ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("remove")),1)])),_:1})])),_:2},1032,["onClick"])])])))),128))])])),_:1})])])):(0,o.kq)("",!0)])])),_:1},8,["label"])])),_:1})])),_:1}),(0,o.Wm)(We,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(De,{class:"bg-grey-3",label:e.$t("cancel")},null,8,["label"]),[[Ue]]),(0,o.Wm)(De,{color:"primary",class:"q-mr-sm","data-cy":"setvatfield",label:e.$t("pages.line_items.proceed"),onClick:e.formatWthAdvSettings},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Ve,{modelValue:e.addFieldsDialog,"onUpdate:modelValue":t[19]||(t[19]=t=>e.addFieldsDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ae,{style:{width:"600px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Le,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(Te,null,{default:(0,o.w5)((()=>[(0,o._)("span",Y,(0,s.zw)(e.$t("add_field_view_header")),1)])),_:1}),(0,o.wy)((0,o.Wm)(De,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Ue]])])),_:1}),(0,o.Wm)(Re,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o._)("div",J,[(0,o._)("div",K,[(0,o.Wm)(Me,{modelValue:e.new_field_model["source"],"onUpdate:modelValue":t[12]||(t[12]=t=>e.new_field_model["source"]=t),class:"col-sm-6 col-md-6 col-lg-6",options:e.adv_column_options,label:"Field Source*","bottom-slots":"","error-message":"Field is required",error:e.new_field_model["source_invalid"],"emit-value":"","map-options":""},{append:(0,o.w5)((()=>[(0,o.Wm)(pe,{name:"close",onClick:t[11]||(t[11]=(0,a.iM)((t=>e.new_field_model["source"]=""),["stop"])),class:"cursor-pointer"})])),option:(0,o.w5)((e=>[(0,o.Wm)(ve,(0,s.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(be,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","error"])]),G]),(0,o._)("div",X,[(0,o._)("div",ee,[(0,o.Wm)(Ee,{label:"Key*",modelValue:e.new_field_model["key"],"onUpdate:modelValue":t[13]||(t[13]=t=>e.new_field_model["key"]=t),outlined:"",class:"full-width","bottom-slots":"","error-message":"Field is required",error:e.new_field_model["key_invalid"]},null,8,["modelValue","error"])]),(0,o._)("div",te,[(0,o.Wm)(Me,{modelValue:e.new_field_model["key_dropdown"],"onUpdate:modelValue":[t[15]||(t[15]=t=>e.new_field_model["key_dropdown"]=t),t[16]||(t[16]=t=>e.advSettingNewFieldColumnSelected("key","key_dropdown"))],class:"col-sm-6 col-md-6 col-lg-6",options:e.adv_column_options,label:e.$t("adv_column_options")},{append:(0,o.w5)((()=>[(0,o.Wm)(pe,{name:"close",onClick:t[14]||(t[14]=(0,a.iM)((t=>{e.new_field_model["key_dropdown"]="",e.advSettingNewFieldColumnSelected("key","key_dropdown")}),["stop"])),class:"cursor-pointer"})])),option:(0,o.w5)((e=>[(0,o.Wm)(ve,(0,s.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(be,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","label"])])]),e.new_field_model["key_dropdown"]?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",ie,[(0,o._)("div",oe,[(0,o.Wm)(Ee,{label:"Label",modelValue:e.new_field_model["label"],"onUpdate:modelValue":t[17]||(t[17]=t=>e.new_field_model["label"]=t),outlined:"",class:"full-width"},null,8,["modelValue"])])])),(0,o._)("div",se,[(0,o._)("div",ae,[(0,o.Wm)(Ee,{label:"Pattern*",modelValue:e.new_field_model["pattern"],"onUpdate:modelValue":t[18]||(t[18]=t=>e.new_field_model["pattern"]=t),outlined:"",class:"full-width","bottom-slots":"","error-message":"Invalid Regex Pattern",error:e.new_field_model["pattern_invalid"]},null,8,["modelValue","error"])])])])),_:1}),(0,o.Wm)(We,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(De,{color:"primary",class:"q-mr-sm","data-cy":"setvatfield",label:e.$t("pages.line_items.proceed"),onClick:e.saveNewFieldForAdvSettings},null,8,["label","onClick"]),(0,o.wy)((0,o.Wm)(De,{class:"bg-grey-3",label:e.$t("cancel")},null,8,["label"]),[[Ue]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Ve,{modelValue:e.split_text_confirm_dialog,"onUpdate:modelValue":t[21]||(t[21]=t=>e.split_text_confirm_dialog=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Ae,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Re,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(ze,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(Re,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",le,(0,s.zw)(e.$t("split_text_confirm")),1)])),_:1}),(0,o.Wm)(We,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(De,{label:e.$t("cancel"),class:"bg-grey-3"},null,8,["label"]),[[Ue]]),(0,o.Wm)(De,{label:e.$t("proceed"),class:"q-mr-sm",color:"primary",onClick:t[20]||(t[20]=t=>e.TriggerSplitText())},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])):(0,o.kq)("",!0),(0,o.Wm)(Ve,{modelValue:e.addColumnDialog,"onUpdate:modelValue":t[22]||(t[22]=t=>e.addColumnDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(Be,{is_table_training_doc:!!e.docStore.record.hasOwnProperty("is_table_training_doc"),table_name:e.tableObj?e.tableObj.name:"",tables:e.tableObj?e.tableObj:{},columns_list:e.lineItemLayout,addColumnDialog:e.addColumnDialog},null,8,["is_table_training_doc","table_name","tables","columns_list","addColumnDialog"])])),_:1},8,["modelValue"]),(0,o.Wm)(Ve,{modelValue:e.poEditRestrictDialog,"onUpdate:modelValue":t[23]||(t[23]=t=>e.poEditRestrictDialog=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Ae,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Re,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",ne,(0,s.zw)(e.poEditRestrictMessage),1)])),_:1}),(0,o.Wm)(We,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(De,{flat:"",label:e.$t("dashboard"),color:"primary",to:"/dashboard"},null,8,["label"]),(0,o.Wm)(De,{flat:"",label:e.$t("table_extraction_view"),color:"primary",to:"/tbl_ext_v3/"+e.docStore.record.doc_id},null,8,["label","to"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Ve,{modelValue:e.openDisableColumnListView,"onUpdate:modelValue":t[24]||(t[24]=t=>e.openDisableColumnListView=t)},{default:(0,o.w5)((()=>[(0,o.Wm)(Ae,{style:{"min-width":"700px",width:"700px","max-width":"50vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Le,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(Te,null,{default:(0,o.w5)((()=>[(0,o._)("span",re,(0,s.zw)(e.$t("diabled_custom_columns")),1)])),_:1}),(0,o.wy)((0,o.Wm)(De,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Ue]])])),_:1}),(0,o.Wm)(Ne,{rows:e.disableColumnList},null,8,["rows"])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Ve,{modelValue:e.revert_changes_confirm_dialog,"onUpdate:modelValue":t[27]||(t[27]=t=>e.revert_changes_confirm_dialog=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Ae,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Re,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(ze,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(Re,{tag:"span",class:"row items-center",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o._)("span",de,(0,s.zw)(e.$t("revert_changes_confirm")),1),(0,o._)("span",ce,(0,s.zw)(e.$t("revert_changes_confirm_2")),1)])),_:1}),(0,o.Wm)(We,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(De,{label:e.$t("cancel"),class:"bg-grey-3",onClick:t[25]||(t[25]=t=>e.revert_changes_confirm_dialog=!1)},null,8,["label"]),[[Ue]]),(0,o.Wm)(De,{label:e.$t("proceed"),class:"q-mr-sm",color:"primary",onClick:t[26]||(t[26]=t=>e.revertChanges(!0))},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Pe,{showRegexDlg:e.showRegexDlg,onSetShowRegexDlg:e.setShowRegexDlg,onUpdateRegexByRule:e.updateRegexByRule},null,8,["showRegexDlg","onSetShowRegexDlg","onUpdateRegexByRule"])],64)}var he=i(30052),me=i.n(he),pe=i(10321),_e=i(77378),ge=i(61959),fe=i(78564),we=i(77987),ye=i(45401),be=i(85985),ve=i(48825),xe=i(7153),ke=i(55276),Ce=i(54268),De=i(75933),Oe=i(89657),Ee=i(2232),Se=i(41891),Ie=i(58116),Te=i(29938),Le=i(93426),Me=i(65864),Fe=i(60727),qe=i(86068),Ze=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};let Re,We=new Map;const Ae=(0,o.aZ)({el:"#app",mixins:[ye.Z,_e.Z,ke.Z,De.Z,be.Z,fe.Z,Le.Z],props:{apiDataProp:{},extractedData:{type:String,default:""},currentPageNo:{type:Number,default:1},isRowMode:{type:Boolean,default:!1},training_mode:{type:Boolean,default:!1},isReadOnly:{type:Boolean,default:!1},currentField:{type:Object,default:new Object},fieldName:{type:String,default:""}},emits:["updateExtractionDataForSave","setTableRowCorrdinates","loadNewPageImage","updateModel"],components:{BlockedColumns:Ee.Z,ManageRuleRegexes:Ie.Z,ErrorDocumentView:Me.Z,CreateCustomColumn:qe.Z},data(){return{docId:"",dropdownColumns:[],rows_to_delete:[],po_dragging:!1,dragging_data:{},coveredLineItem:[],validation_done:!0,connected_line_item:"",confirmDialog:(0,ge.iH)(!1),renderKey:0,is_po_view:!1,selectedColumn:(0,ge.iH)(""),showRegexDlg:(0,ge.iH)(!1),openAdvSettings:(0,ge.iH)(!1),oldSelectedColumnName:(0,ge.iH)(""),po_connected_line_items:{},is_auto_filled_color:"#c2dba6",is_missing_color:"#eed69e",tableObj:{},account_block:""}},mounted:function(){document.addEventListener("revert_changes",(()=>{this.revertChanges().then()})),document.addEventListener("add_new_row",this.createRowJson),document.addEventListener("reset_line_items",this.resetlintItems),document.addEventListener("add_new_column",this.addNewCustomColumn),document.addEventListener("reload_line_items",this.reloadLineItemData),document.addEventListener("get_table_rows_areas",this.getTableRowsAreas),document.addEventListener("enable_custom_column",this.enableCustomColumn),document.addEventListener("display_adv_settings_view",this.openAdvanceSettings),document.addEventListener("open_disabled_custom_columns_view",this.openDisabledCstmColumnsView),document.addEventListener("delete_table",this.deleteTable),document.addEventListener("display_fields_errors",this.displayFieldErrors),this.init(),this.isViewPo(),window.lineItemsV3=this},unmounted:function(){document.removeEventListener("revert_changes",(()=>{this.revertChanges().then()})),document.removeEventListener("add_new_row",this.createRowJson),document.removeEventListener("reset_line_items",this.resetlintItems),document.removeEventListener("add_new_column",this.addNewCustomColumn),document.removeEventListener("reload_line_items",this.reloadLineItemData),document.removeEventListener("get_table_rows_areas",this.getTableRowsAreas),document.removeEventListener("enable_custom_column",this.enableCustomColumn),document.removeEventListener("display_adv_settings_view",this.openAdvanceSettings),document.removeEventListener("open_disabled_custom_columns_view",this.openDisabledCstmColumnsView),document.removeEventListener("delete_table",this.deleteTable),document.removeEventListener("display_fields_errors",this.displayFieldErrors)},watch:{extractedData(e){Re.value=e,Re.parentElement.classList.remove("active"),Re=null},currentPageNo(e){this.highliteFirstRowOfCurrentPage()}},methods:{init(){if(!this.isAI_TableExit(this.record)){if(this.docStore.record.tables&&this.docStore.record.tables[0])for(let e of this.docStore.record.tables)if(e.name===this.fieldName){this.tableObj=e;break}this.lineItemDataLoaded(),this.handleLineItemsVisibilty()}},addExtractionMethodClass(e){let t="";return e&&e.hasOwnProperty("extraction_method")&&""!==e.extraction_method&&(t="extraction_method"),t},reloadLineItemData(e){if(!e||!e.detail)return;this.lineItemsloading=!1;let t=e.detail.apiData;this.resetRows(),this.docStore.record=t,this.docId=this.docStore.record&&this.docStore.record.doc_id?this.docStore.record.doc_id:"",this.refactorApiData();let i={rowId:e.detail.currentRowId,columnName:e.detail.currentColumnName,onlySelectedRow:!0};this.getTableRowsAreas({detail:i}),setTimeout((()=>{const t=new CustomEvent("enable_column_selection",{detail:e.detail.currentRowId});document.dispatchEvent(t)}),10)},deleteTable(){this.tableObj={},this.lineItemDataLoaded()},lineItemDataLoaded(){this.lineItemsloading=!1,this.resetRows(),this.docId=this.docStore.record&&this.docStore.record.doc_id?this.docStore.record.doc_id:"",this.refactorApiData()},isViewEditable(){return!this.is_po_view&&(!!this.training_mode||(this.showErrorToast("Please select training mode"),!1))},getToken(){return Ze(this,void 0,void 0,(function*(){let e=this.docStore.record.token&&null!=this.docStore.record.token&&""!=this.docStore.record.token?this.docStore.record.token:yield(0,Ce.O_)();return e}))},groupByColumn(e){return Ze(this,void 0,void 0,(function*(){""!==e&&void 0!=e&&null!=e&&(this.group_column=e,yield this.requestReformate())}))},getColumnMappingIndexes(){let e={};for(const t in this.column_mapping_indexes){let i=this.column_mapping_indexes[t];e[t]=i}return e},resetFormating(){return Ze(this,void 0,void 0,(function*(){this.group_column="",yield this.requestReformate()}))},validateLineItemColumns(){let e=!1;if(this.docStore.record["table_has_error"]=!1,void 0===this.tableColumns)return;let t=[];for(const o of this.tableColumns){let i=this.isColumnNameValid(o);i||(this.docStore.record["table_has_error"]=!0,o.error=!0,e=!0,t.push(o.name))}let i=!e;this.is_line_item_validated=i,this.missing_mapping_column=t,this.validation_done!==i&&(this.validation_done,this.validation_done=i)},isColumnNameValid(e){let t=!(!this.column_mapping_indexes||null==this.column_mapping_indexes||!(0,Te.fg)(this.column_mapping_indexes)),i=!1;if("id"==e.name)return!0;for(const o of this.dropdownColumns)if(e.name===o.techName){i=!0;break}return i&&t&&!0===this.hasOriginalIndex(e.org_index,e)&&this.addInMapping(e.org_index,e.name),i},addInMapping(e,t){this.column_mapping_indexes[t]=Number(e)},updateLineItemsForApi(){this.isReadOnly||this.$emit("updateExtractionDataForSave","mapping",this.getColumnMappingIndexes())},isColumnGroupBy(e){let t="";return this.group_column&&(t=this.group_column),null===t&&(t=""),t==e},getColumnGroupBy(){let e="";return this.group_column&&(e=this.group_column),null===e&&(e=""),e},isColumnVisible(e,t){let i=!0;return e&&this.columns_to_hide&&0!=this.columns_to_hide.length?((this.columns_to_hide.includes(e)||"UUID"==t.name)&&(i=!1),i):i},isCustomColumnHidden(e){let t=!1;if(!this.custom_columns_to_hide||0==this.custom_columns_to_hide.length)return t;for(const i of this.custom_columns_to_hide)if(i===e){t=!0;break}return t},isRowDeleted(e){let t=this.getLineUuid(e);return!this.rows_to_delete.includes(t)},getLineUuid(e){let t="";for(let[i,o]of e.entries())if("UUID"==o.techName){t=o.value;break}return t},getLineItemRowsToHide(){if(this.rows_to_delete=[],this.tableObj&&this.tableObj.hasOwnProperty("extraction_info")){for(let[e,t]of Object.entries(this.tableObj.extraction_info))this.tableObj.extraction_info[e].hasOwnProperty("rows_to_delete")&&(this.rows_to_delete=this.tableObj.extraction_info[e].rows_to_delete);Array.isArray(this.rows_to_delete)&&this.rows_to_delete.length>0?this.rows_to_delete=this.rows_to_delete[0].split(" "):this.rows_to_delete=[]}},addToRowToDelete(e){for(let[t,i]of e.entries())if("UUID"==i.techName){this.rows_to_delete.push(i.value);break}},setRowToDeleteForApi(){if(!this.tableObj||!this.tableObj.hasOwnProperty("extraction_info"))return;let e=[this.rows_to_delete.join(" ")];this.$emit("updateExtractionDataForSave","rows_to_delete",e)},inputKeyDown(e){if(this.training_mode)return e.preventDefault(),e.target.blur(),void this.showErrorToast(this.$t("manual_change"))},inputValueChanges(e,t){return Ze(this,void 0,void 0,(function*(){const i=this.lineDataObj[t]["columns"][e].formatted_value;this.lineDataObj[t]["columns"][e].value=i;const o=this.docStore.record.amount_format_locale.split(".");"en_US"!=o[0]&&this.lineItemLayout.hasOwnProperty(e)&&"AMOUNT"===this.lineItemLayout[e].column_type&&(this.lineDataObj[t]["columns"][e].value=yield this.convertValueAccordingToLocale(i,o[0],"en_US"),this.lineDataObj[t]["columns"][e].content=i),this.updateJsonForLineItems(e,t)}))},updateJsonForLineItems(e,t){Array.from(this.tableObj.rows).forEach(((i,o)=>{t===i.id&&Array.from(i.columns).forEach(((t,s)=>{t.name!==e||(this.tableObj.rows[o].columns[s]=this.lineDataObj[i.id].columns[e])}))})),this.dispatchEventToSaveTableChanges()},setJsonForLineItems(){Array.from(this.tableObj.rows).forEach(((e,t)=>{const i=e.id,o=this.lineDataObj[i];this.tableObj.rows[t]=o})),this.dispatchEventToSaveTableChanges()},dispatchEventToSaveTableChanges(e=!1){this.docStore.confirmationForPoConnectionReset=!0,this.record.tables&&this.record.tables[0]||(this.record.tables=[]),this.record.tables[0]=this.tableObj},hasLineItems(){return!(!this.tableRows||0===Object.keys(this.tableRows).length)},openAdvanceSettings(){this.adv_column_options=[];for(const e of this.dropdownColumns)this.adv_column_options.push(Object.assign({},{value:e.techName,label:e.header}));this.setAdvSettings(),this.openAdvSettings=!0},setAdvSettings(){this.move_extra_rows_to="",this.header_rows_count=1,this.extra_columns=[],this.formatting_options&&(this.formatting_options.hasOwnProperty("merge_extra_lines_to")&&null!==this.formatting_options.merge_extra_lines_to&&(this.move_extra_rows_to=this.formatting_options.merge_extra_lines_to),this.formatting_options.hasOwnProperty("header_rows_count")&&null!==this.formatting_options.header_rows_count&&(this.header_rows_count=this.formatting_options.header_rows_count),this.formatting_options.hasOwnProperty("extra_cols")&&null!==this.formatting_options.extra_cols&&(this.extra_columns=this.formatting_options.extra_cols),this.formatting_options.hasOwnProperty("group_column")&&null!==this.formatting_options.group_column&&(this.group_column=this.formatting_options.group_column),this.formatting_options.hasOwnProperty("min_group_rows")&&null!==this.formatting_options.min_group_rows&&(this.min_group_rows=this.formatting_options.min_group_rows),this.formatting_options.hasOwnProperty("max_group_rows")&&null!==this.formatting_options.max_group_rows&&(this.max_group_rows=this.formatting_options.max_group_rows),this.formatting_options.hasOwnProperty("distinct_group_column")&&null!==this.formatting_options.distinct_group_column&&(this.distinct_group_column=this.formatting_options.distinct_group_column),this.formatting_options.hasOwnProperty("reverse_grouping")&&null!==this.formatting_options.reverse_grouping&&(this.reverse_grouping=this.formatting_options.reverse_grouping),this.formatting_options.hasOwnProperty("split_text")&&null!==this.formatting_options.split_text&&(this.split_text=this.formatting_options.split_text))},formatWthAdvSettings(){return Ze(this,void 0,void 0,(function*(){yield this.requestReformate(),this.openAdvSettings=!1}))},advSettingNewFieldColumnSelected(e,t){this.new_field_model[t]?this.new_field_model[e]=this.new_field_model[t].value:this.new_field_model[e]=""},saveNewFieldForAdvSettings(){this.new_field_model["pattern_invalid"]=!1,this.new_field_model["key_invalid"]=!1,this.new_field_model["source_invalid"]=!1;let e=!0;if(this.new_field_model["pattern"]&&!(0,Oe.nc)(this.new_field_model["pattern"])&&(this.new_field_model["pattern_invalid"]=!0,e=!1),this.new_field_model["key"]&&""!=this.new_field_model["key"]||(this.new_field_model["key_invalid"]=!0,e=!1),this.new_field_model["source"]&&""!=this.new_field_model["source"]||(this.new_field_model["source_invalid"]=!0,e=!1),!e)return;let t=this.new_field_model["label"];t||(t=this.new_field_model["key"].toUpperCase()),this.extra_columns||(this.extra_columns=[]),this.extra_columns.push({field_key:this.new_field_model["key"].toUpperCase(),source_field:this.new_field_model["source"].toUpperCase(),label:t,pattern:this.new_field_model["pattern"].toUpperCase()}),this.addFieldsDialog=!1},addFieldForAdvSettings(){this.addFieldsDialog=!0,this.new_field_model={}},removeFieldFromSettings(e){e=Number(e),e>-1&&this.extra_columns.splice(e,1)},revertChanges(e=!1){return Ze(this,void 0,void 0,(function*(){!1!==e?(this.revert_changes_confirm_dialog=!1,this.resetFormatSettings(),yield this.requestReformate()):this.revert_changes_confirm_dialog=!0}))},isViewPo(){this.$route.fullPath.match(/po-matching/g)&&(this.is_po_view=!0)},refactorApiData(){this.docStore.has_ai_table||(this.resetFormatSettings(),this.setFormatOptions(),this.setAdvSettings(),this.prepareTableLayoutObj(),this.prepareTableColumn(),this.prepareTableRowsAndRowObj(),this.sortTableColumn(),this.validateLineItemColumns(),this.prepareDisabledCstmColumnsList(),setTimeout((()=>{let e=document.querySelector("#line_item_table");if(e){let t=e.querySelector("table");t&&this.resizableGrid(t)}}),1e3))},setFormatOptions(){this.formatting_options={},this.tableObj&&this.tableObj.hasOwnProperty("formatting_options")&&(this.formatting_options=this.tableObj.formatting_options),this.formatting_options.hasOwnProperty("mapping")&&null!==this.formatting_options.mapping&&(this.column_mapping_indexes=Object.assign({},this.formatting_options.mapping)),this.formatting_options.hasOwnProperty("columns_to_hide")&&null!==this.formatting_options.columns_to_hide&&(this.columns_to_hide=Object.assign([],this.formatting_options.columns_to_hide)),this.formatting_options.hasOwnProperty("custom_columns_to_hide")&&null!==this.formatting_options.custom_columns_to_hide&&(this.custom_columns_to_hide=Object.assign([],this.formatting_options.custom_columns_to_hide))},resetRows(){this.tableRows=[],this.lineDataObj=[],this.lineItemsErrors={}},resetFormatSettings(){this.move_extra_rows_to="",this.header_rows_count=1,this.extra_columns=[],this.group_column="",this.min_group_rows=1,this.max_group_rows=null,this.distinct_group_column=!1,this.reverse_grouping=!1,this.column_mapping_indexes={},this.columns_to_hide=[],this.custom_columns_to_hide=[],this.split_text=!1},setTableData(e){this.tableObj=e},prepareTableRowsAndRowObj(){this.docStore.confirmationForPoConnectionReset=!0,this.tableRows=[],this.lineDataObj=[];let e={};if(this.lineItemsErrors={},this.tableRowsLocationsMap.clear(),!this.tableObj||!this.tableObj.hasOwnProperty("rows")||0==this.tableObj.rows.length)return;this.tableObj.rows[0].id;Array.from(this.tableObj.rows).forEach((t=>{if(!1===t.is_deleted){let i={};e[t.id]=JSON.parse(JSON.stringify(t)),e[t.id].locations_list=[],t.locations_list&&Array.from(t.locations_list).forEach((i=>{e[t.id].locations_list["page_"+i.page]=i,this.tableRowsLocationsMap.has("page_"+i.page)||this.tableRowsLocationsMap.set("page_"+i.page,t.id)})),delete e[t.id].columns,e[t.id]["columns"]=[],Array.from(t.columns).forEach((o=>{e[t.id].columns[o.name]=JSON.parse(JSON.stringify(o)),e[t.id].columns[o.name].locations_list=[],o.locations_list&&Array.from(o.locations_list).forEach((i=>{e[t.id].columns[o.name].locations_list["page_"+i.page]=i})),t.id,(0,Te.Jp)(o.formatted_value)&&(o.formatted_value=""),i[o.name]=o.formatted_value,this.prepareMapOfColumnHavingData(o)})),this.addExtraColumnsInRow(e,i,t.id),i["id"]=t.id,t.id,this.tableRows.push(i),this.setRowErrors(t)}})),Object.assign(this.lineDataObj,e)},prepareMapOfColumnHavingData(e){We.has(e.name)?!1===We.get(e.name)&&e.formatted_value&&null!=e.formatted_value&&""!=e.formatted_value&&We.set(e.name,!0):e.formatted_value&&null!=e.formatted_value&&""!=e.formatted_value?We.set(e.name,!0):We.set(e.name,!1)},addExtraColumnsInRow(e,t,i){for(let o of this.layoutExtraColumns){let s={name:o,value:"",content:"",locations:[],locations_list:[],formatted_value:"",isExtraColumn:!0};e[i].columns[o]=s,We.set(o,!1),t[o]=""}},addExtraColumnsInExportJson(){let e=[];for(let t of this.layoutExtraColumns){let i={name:t,value:"",content:"",locations:[],locations_list:[],formatted_value:"",isExtraColumn:!0};e.push(i)}Array.from(this.docStore.record.tables[0].rows).forEach(((t,i)=>{for(let o of e)this.docStore.record.tables[0].rows[i].columns.push(o)}))},setRowErrors(e){if(this.lineItemsErrors[e.id]={},!e.messages||!Array.isArray(e.messages))return;let t={};for(const i in e.messages){let o=e.messages[i];"COLUMN_NOT_MAPPED"!=o.message_code&&(o.message&&""!=o.message&&(t[o.message_code]=o.message))}this.lineItemsErrors[e.id]=t},rowHasErrors(e){return!(!this.lineItemsErrors.hasOwnProperty(e)||null===this.lineItemsErrors[e]||(0,Te.fg)(this.lineItemsErrors[e]))},prepareTableLayoutObj(){this.dropdownColumns=[];let e={};this.lineItemLayout={},this.initStandardColumns(),this.tableObj&&this.tableObj.hasOwnProperty("layout")&&(Array.from(this.tableObj.layout).forEach((t=>{e.hasOwnProperty(t.column_name)||0!=t.is_hidden||this.isCustomColumnHidden(t.column_name)||(e[t.column_name]=!0,t["lbl_to_display"]=this.getLabelToDisplay(t),this.lineItemLayout[t.column_name]=t,this.addStandardColumns(t),this.dropdownColumns.push({header:t.lbl_to_display,techName:t.column_name}))})),this.sortMappingColumns())},sortMappingColumns(){this.dropdownColumns.length>0&&this.dropdownColumns.sort((function(e,t){return e.header<t.header?-1:e.header>t.header?1:0}))},initStandardColumns(){this.advance_settings_columns=[],this.advance_settings_columns.push(Object.assign({},{value:"",label:this.$t("select")})),this.advance_settings_columns.push(Object.assign({},{value:"__trash__",label:this.$t("trash")}))},addStandardColumns(e){this.advance_settings_columns.push(Object.assign({},{value:e.column_name,label:e.column_name}))},prepareTableColumn(){this.tableColumns=[];let e={};if(this.layoutExtraColumns=[],!(this.tableObj&&this.tableObj.hasOwnProperty("rows")&&this.tableObj.rows.length>0))return;let t={name:"id",field:"id",align:"left",label:"",is_mapped:!0,org_index:""};this.tableColumns.push(t);const i=this.docStore.record.tables[0].rows[0];if(!i)return;let o=JSON.parse(JSON.stringify(this.lineItemLayout));Array.from(i.columns).forEach((t=>{let s=this.isColumnHidden(i,t);if(s){let i=t.name;this.lineItemLayout.hasOwnProperty(t.name)&&(i=this.lineItemLayout[t.name].lbl_to_display,delete o[t.name]);let s="";null!=t.org_index&&void 0!=t.org_index&&(s=String(t.org_index));let a={name:t.name,field:t.name,align:"left",label:i,is_mapped:!!t.is_mapped&&t.is_mapped,org_index:s};t.hasOwnProperty("org_index")&&null!=t.org_index?this.tableColumns.push(a):e[t.name]=a}}));for(let[s,a]of Object.entries(e))this.tableColumns.push(Object.assign({},a));for(let s in o){const e=o[s];let t=!this.isCustomColumnHidden(e.name);if(!t){delete o[e.name];continue}let i={name:e.column_name,field:e.column_name,align:"left",label:e.lbl_to_display,is_mapped:!!e.is_mapped&&e.is_mapped,org_index:"",is_extra_column:!0};this.tableColumns.push(Object.assign({},i)),this.layoutExtraColumns.push(e.column_name)}},sortTableColumn(){let e=JSON.parse(JSON.stringify(this.tableColumns)),t=[];this.tableColumns=[],Array.from(e).forEach(((e,i)=>{1!=this.hasOriginalIndex(e.org_index,e)&&We.has(e.name)&&!1===We.get(e.name)?t.push(Object.assign({},e)):this.tableColumns.push(Object.assign({},e))})),t.sort(((e,t)=>{let i=e.field.toLowerCase(),o=t.field.toLowerCase();return i<o?-1:i>o?1:0})),Array.from(t).forEach(((e,t)=>{this.tableColumns.push(Object.assign({},e))}))},isColumnHidden(e,t){let i="";null!=t.org_index&&void 0!=t.org_index&&(i=String(t.org_index));let o=!0;return""!==i&&(o=this.isColumnVisible(i,t)),""===i&&(o=!this.isCustomColumnHidden(t.name)),o},deleteLineItemColumn(e){return Ze(this,void 0,void 0,(function*(){this.columns_to_hide.push(e),null!=this.group_column&&this.group_column===e&&(this.group_column=""),yield this.requestReformate()}))},getColumnToHide(){return Array.isArray(this.columns_to_hide)?this.columns_to_hide.join():""},removeLineItem(e){Array.from(this.tableObj.rows).forEach((t=>{if(t.id===e)return t.is_deleted=!0,this.$forceUpdate(),void this.prepareTableRowsAndRowObj()})),this.dispatchEventToSaveTableChanges()},swapColumn(e,t,i,o){return Ze(this,void 0,void 0,(function*(){if(!this.isViewEditable())return;if(this.selectedColumnHasData(e.techName))return void this.showErrorToast(this.$t("column_has_value"));let s=!1,a=!1,l=t;if(this.column_mapping_indexes)for(const t in this.column_mapping_indexes){let o=this.column_mapping_indexes[t];if(t==e.techName&&o!=l){s=!0;break}if(t==i&&o==l){a=!0;break}}s?this.showErrorToast(this.$t("pages.messages.COLUMN_ALREADY_MAPPED")):(a&&delete this.column_mapping_indexes[i],this.addInMapping(l,e.techName),yield this.requestReformate(),setTimeout((()=>{this.scrollInToViewCenter(document.getElementById(o))}),10))}))},selectedColumnHasData(e){let t=!1;for(const i in this.tableRows){const o=this.tableRows[i];if(o.hasOwnProperty(e)&&null!=o[e]&&void 0!=o[e]&&""!=o[e]){t=!0;break}}return t},getTableData(){return this.tableObj?this.tableObj:{}},requestReformate(){return Ze(this,void 0,void 0,(function*(){this.lineItemsloading=!0,this.resetRows();try{let e,t=new FormData;t.append("doc_id",this.docId),t.append("group_column",this.getColumnGroupBy()),t.append("min_group_rows",this.min_group_rows.toString()),t.append("max_group_rows",this.max_group_rows?this.max_group_rows.toString():""),t.append("header_rows_count",this.header_rows_count.toString()),t.append("distinct_group_column",this.distinct_group_column.toString()),t.append("reverse_grouping",this.reverse_grouping.toString()),t.append("column_mapping_indexes",JSON.stringify(this.getColumnMappingIndexes())),t.append("move_extra_rows_to",this.move_extra_rows_to),t.append("extra_columns",JSON.stringify(this.extra_columns)),t.append("columns_to_hide",this.getColumnToHide()),t.append("data",JSON.stringify(this.getTableData())),this.docStore.record.hasOwnProperty("is_table_training_doc")&&t.append("is_table_training_doc",(!0).toString());let i=yield this.getToken();if(e=yield me().post(Ce.hi.reformat_table_table_v3,t,{headers:{Authorization:i}}),!1===e.data.success)throw e.data.message;this.setTableData(e.data),this.dispatchEventToSaveTableChanges(),this.refactorApiData(),this.lineItemsloading=!1}catch(e){return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void(this.lineItemsloading=!1)}this.renderKey++}))},addNewCustomColumn(e){this.addColumnDialog=!0},editColumnData(e,t,i){if(!this.lineDataObj[i].hasOwnProperty("custom_row"))if(!0===this.isRowMode){let o,s=10;this.clearOldSelection(),e.target.closest("label")&&e.target.closest("label").classList.add("active-border-2px"),o=this.lineDataObj[i].columns[t];let a=!0;if(o&&o.locations_list){let e=o.locations_list;if(e.hasOwnProperty("page_"+this.currentPageNo))a=!1;else if(0!=Object.entries(e).length){s=200;for(const t in e){a=!1;let i=+e[t].page-1;this.$emit("loadNewPageImage",i);break}}else this.loadAppropriatePage(i)}setTimeout((()=>{if(!1===a){let a={rowId:i,columnName:t};this.getTableRowsAreas({detail:a}),setTimeout((()=>{let i=(0,we.$)("#draw_"+t);if(i){i.querySelector(".select-areas--outline").style.opacity="0";let s=i.querySelector(".select-areas--background_area");s.style.border="2px",s.style.borderStyle="solid",s.style.borderColor="#8800ff",this.oldSelectedColumnName=t,this.scrollInToViewCenter(s),this.removeExistingConfirmationOverlays(),o&&""!==this.addExtractionMethodClass(o)&&setTimeout((()=>{let t=e.target.closest("td").dataset.columnValue,i=e.target.closest("td").dataset.scoreDescription,o={value:t,score:i,selection:s};const a=new CustomEvent("prepare_overlay",{detail:o});document.dispatchEvent(a)}),20)}}),s)}else{this.showNotification(this.$t("pages.messages.SELECT_AREA"));let e={rowId:i,columnName:t,onlySelectedRow:!0};this.getTableRowsAreas({detail:e}),setTimeout((()=>{const e=new CustomEvent("enable_column_selection",{detail:i});document.dispatchEvent(e)}),10)}}),10)}else this.loadAppropriatePage(i),setTimeout((()=>{let e={rowId:i,columnName:t,onlySelectedRow:!0};this.drawSelectedRow({detail:e}),setTimeout((()=>{let e=(0,we.$)("#draw_"+i);if(e){this.oldSelectedColumnName=t;let i=e.querySelector(".select-areas--background_area");this.scrollInToViewCenter(i)}}),40)}),100)},clearOldSelection(){if(""!=this.oldSelectedColumnName){let e=(0,we.$)("#draw_"+this.oldSelectedColumnName);if(e){let t=e.querySelector(".select-areas--background_area"),i=t.style.background.split("100%)");t.style.background=Se.zb+i[1]}}let e=document.querySelector("#line_item_table").querySelectorAll("label.active-border-2px");Array.from(e).forEach((e=>{e.classList.remove("active-border-2px")}));let t=document.querySelector("#screenshot_container"),i=t.querySelectorAll("div.select-areas--outline");Array.from(i).forEach((e=>{e.style.opacity="0.2",e.nextSibling&&(e.nextSibling.style.border="unset")}))},loadAppropriatePage(e){let t=this.lineDataObj[e],i="";for(const o in t.locations_list){if(t.locations_list[o].page===this.currentPageNo){i=o;break}i=o}if(""!=i){let e=+t.locations_list[i].page-1;this.$emit("loadNewPageImage",e)}},drawSelectedRow(e){let t="",i=null;void 0!=e.detail&&e.detail.columnName&&(t=e.detail.rowId,i=e.detail.columnName);let o=[];if(this.lineDataObj[t]){this.lineDataObj[t].locations_list&&this.lineDataObj[t].locations_list["page_"+this.currentPageNo]&&o.push({id:t,type:"row",row_id:"",background:Se.yY,opacity:"1",coord:this.lineDataObj[t].locations_list["page_"+this.currentPageNo].coords[0]});let s=this.lineDataObj[t].columns[i];s&&s.locations_list&&s.locations_list["page_"+this.currentPageNo]&&o.push({id:i,row_id:e.detail.rowId,type:"column",background:Se.yY,opacity:"1",coord:s.locations_list["page_"+this.currentPageNo].coords[0]})}let s={columns:[],table_areas:[]};s.table_areas=o,xe.Z.set("table_rows_data",JSON.stringify(s));const a=new CustomEvent("prepare_customized_areas");document.dispatchEvent(a)},getTableRowsAreas(e){let t="all_rows",i=null;void 0!=e.detail&&e.detail.columnName&&(t=e.detail.rowId,i=e.detail.columnName);let o=[];for(const s in this.lineDataObj)this.lineDataObj[s]&&this.lineDataObj[s].locations_list["page_"+this.currentPageNo]&&o.push({id:s,type:"row",row_id:"",background:void 0!=e.detail&&e.detail.rowId===s?"":"linear-gradient( rgba(211, 211, 211, 0.5) 100%, rgba(0, 0, 0, 0.5)100%),",opacity:(void 0!=e.detail&&e.detail.rowId,"1"),coord:this.lineDataObj[s].locations_list["page_"+this.currentPageNo].coords[0]});if(e.detail&&!e.detail.onlySelectedRow&&this.lineDataObj.hasOwnProperty(e.detail.rowId)){let t=this.lineDataObj[e.detail.rowId].columns;for(const i in t)t[i].locations_list&&t[i].locations_list.hasOwnProperty("page_"+this.currentPageNo)&&o.push({id:i,row_id:e.detail.rowId,type:"column",background:this.columnDefaultBackground(),opacity:1,coord:t[i].locations_list["page_"+this.currentPageNo].coords[0]})}this.$emit("setTableRowCorrdinates",JSON.stringify(o),i,t)},columnDefaultBackground(){return Se.yY},hasOriginalIndex(e,t){let i=!1;return""!==e&&(i=!0),i},getScoreDescription(e){let t="";return e&&e.hasOwnProperty("score_description")&&""!==e.score_description&&null!=e.score_description&&(t=e.score_description),String(t)},TriggerSplitText(){this.split_text_confirm_dialog=!1,this.openAdvSettings=!1;const e=new CustomEvent("perform_split_text",{detail:this.split_text});document.dispatchEvent(e)},disableCustomColumn(e){this.formatting_options.hasOwnProperty("custom_columns_to_hide")&&null!==this.formatting_options.custom_columns_to_hide||(this.formatting_options.custom_columns_to_hide=Object.assign([])),this.formatting_options.custom_columns_to_hide.push(e),this.refactorApiData(),this.$forceUpdate(),this.dispatchEventToSaveTableChanges(!0)},getLabelToDisplay(e){let t=e.title;return this.$t("pages.line_items_columns."+e.translation_key)!=="pages.line_items_columns."+e.translation_key&&(t=this.$t("pages.line_items_columns."+e.translation_key)),t},prepareDisabledCstmColumnsList(){this.disableColumnList=[],this.tableObj&&this.tableObj.hasOwnProperty("layout")&&Array.from(this.tableObj.layout).forEach((e=>{if(!0===this.isCustomColumnHidden(e.column_name)){let t={};t["name"]=e.column_name,t["label"]=this.getLabelToDisplay(e),this.disableColumnList.push(t)}}))},openDisabledCstmColumnsView(){this.tableObj&&this.tableObj.hasOwnProperty("layout")&&(this.openDisableColumnListView=!0)},enableCustomColumn(e){if(e&&e.detail){var t=this.formatting_options.custom_columns_to_hide.indexOf(e.detail);-1!==t&&this.formatting_options.custom_columns_to_hide.splice(t,1),this.refactorApiData(),this.dispatchEventToSaveTableChanges(!0)}},customColumnCreated(e){e&&e.detail&&e.detail.tables&&(this.addColumnDialog=!1,this.setTableData(e.detail.tables),this.dispatchEventToSaveTableChanges(),this.refactorApiData())},createRowJson(){let e=JSON.parse(JSON.stringify(this.tableObj.rows[0]));e.id=Date.now(),e.ids=[],e.content="",e.locations=[],e.locations_list=[],e.is_deleted=!1,e.messages=[],e.custom_row=!0,Array.from(e.columns).forEach(((e,t)=>{e.content="",e.locations=[],e.locations_list=[],e.value="",e.formatted_value=""})),this.tableObj.rows.push(e),this.$forceUpdate(),this.prepareTableRowsAndRowObj()},prepareRegexData(e){this.docStore.regex.clear(),this.selectedColumn=e,Array.from(this.tableObj.rows).forEach(((t,i)=>{Array.from(t.columns).forEach(((t,i)=>{t.name===e&&t.hasOwnProperty("rule")&&t.hasOwnProperty("valuePattern")&&this.docStore.regex.set(t.rule,t.valuePattern)}))})),this.showRegexDlg=!0},updateRegexByRule(){this.showRegexDlg=!1,Array.from(this.tableObj.rows).forEach(((e,t)=>{Array.from(e.columns).forEach(((e,i)=>{e.name===this.selectedColumn&&e.hasOwnProperty("rule")&&e.hasOwnProperty("valuePattern")&&(this.tableObj.rows[t].columns[i].valuePattern=this.docStore.regex.get(e.rule))}))})),this.refactorApiData()},setShowRegexDlg(e){this.showRegexDlg=e},highliteFirstRowOfCurrentPage(){if(this.tableRowsLocationsMap.has("page_"+this.currentPageNo)){const e=this.tableRowsLocationsMap.get("page_"+this.currentPageNo),t=(0,we.$)("#tbl_row_"+e);t&&(this.scrollInToViewStart(t),setTimeout((()=>{t.classList.add("light-grey-with-effect"),setTimeout((()=>{t.classList.remove("light-grey-with-effect")}),1400)}),500))}},getBackgroundColor(e){let t="";return e.hasOwnProperty("is_auto_filled")&&1==e.is_auto_filled?t=this.is_auto_filled_color:e.hasOwnProperty("is_missing")&&1==e.is_missing&&(t=this.is_missing_color),t},routeToTableTraining(){this.$router.push("/tbl_ext_v3/"+this.$route.params.id)},handleLineItemsVisibilty(){this.account_block="",!this.docStore.record.hasOwnProperty("table_blocked")||1!=this.docStore.record.table_blocked&&"true"!=this.docStore.record.table_blocked||(this.account_block="table_blocked"),!this.docStore.record.hasOwnProperty("table_extraction_disabled")||1!=this.docStore.record.table_extraction_disabled&&"true"!=this.docStore.record.table_extraction_disabled||(this.account_block="table_extraction_disabled"),!this.docStore.record.hasOwnProperty("table_not_supported")||1!=this.docStore.record.table_not_supported&&"true"!=this.docStore.record.table_not_supported||(this.account_block="table_not_supported")},displayFieldErrors(){this.init()}},setup(){const e=(0,ve.Z)(),t=(0,Fe.H_)(),i=(0,Fe.nc)(),{isFormBuilderMode:o}=(0,pe.Jk)(i),s=(0,Fe.A)(),{validation_done:a,missing_mapping_column:l}=(0,pe.Jk)(s),n=(0,Fe.H_)(),{record:r}=(0,pe.Jk)(n),{isAI_TableExit:d}=n;let c=[],u={};const h=(0,ge.iH)("");return{isAI_TableExit:d,record:r,doc_fetch_error:(0,ge.iH)(t.error),is_line_item_validated:a,missing_mapping_column:l,filter:h,docStore:t,headers:(0,ge.iH)(),lineitems:(0,ge.iH)(),move_extra_rows_to:(0,ge.iH)(""),header_rows_count:(0,ge.iH)(1),min_group_rows:(0,ge.iH)(1),max_group_rows:(0,ge.iH)(),distinct_group_column:(0,ge.iH)(!1),reverse_grouping:(0,ge.iH)(!1),group_column:(0,ge.iH)(""),column_mapping_indexes:(0,ge.iH)(u),columns_to_hide:(0,ge.iH)(c),custom_columns_to_hide:(0,ge.iH)(c),addFieldsDialog:(0,ge.iH)(!1),extra_columns:(0,ge.iH)(c),poEditRestrictDialog:(0,ge.iH)(!1),poEditRestrictMessage:(0,ge.iH)(""),new_field_model:(0,ge.iH)(u),new_column_model:(0,ge.iH)(u),revert_changes_confirm_dialog:(0,ge.iH)(!1),adv_column_options:c,advance_settings_columns:(0,ge.iH)([]),headerRowCountRules:[e=>null!==e||"Please type number",e=>e>0&&e<100||"Please type number"],showNotification(t){e.notify({message:t,color:"primary",position:"bottom"})},lineDataObj:(0,ge.iH)(c),lineItemsErrors:(0,ge.iH)(u),lineItemLayout:(0,ge.iH)(c),tableColumns:(0,ge.iH)(c),tableRows:(0,ge.iH)(c),formatting_options:(0,ge.iH)(u),addColumnDialog:(0,ge.iH)(!1),headerKey:(0,ge.iH)(""),headerLable:(0,ge.iH)(""),lineItemsloading:(0,ge.iH)(!0),openDisableColumnListView:(0,ge.iH)(!1),disableColumnList:(0,ge.iH)(c),split_text:(0,ge.iH)(!1),split_text_confirm_dialog:(0,ge.iH)(!1),tableRowsLocationsMap:(0,ge.iH)(new Map),layoutExtraColumns:(0,ge.iH)([]),isFormBuilderMode:o}}});var Ve=i(74260),ze=i(24554),Be=i(17132),Ne=i(18186),Pe=i(92414),Ue=i(39200),je=i(39975),He=i(5363),$e=i(82226),Qe=i(27011),Ye=i(83414),Je=i(52035),Ke=i(2350),Ge=i(83884),Xe=i(2165),et=i(64689),tt=i(30481),it=i(46778),ot=i(10151),st=i(39570),at=i(13747),lt=i(25589),nt=i(72448),rt=i(60429),dt=i(65869),ct=i(65735),ut=i(99367),ht=i(75096),mt=i(86115),pt=i(20811),_t=i(60677),gt=i(7518),ft=i.n(gt);const wt=(0,Ve.Z)(Ae,[["render",ue],["__scopeId","data-v-55a5cd28"]]),yt=wt;ft()(Ae,"components",{QIcon:ze.Z,QTable:Be.Z,QTr:Ne.Z,QTh:Pe.Z,QFab:Ue.Z,QFabAction:je.Z,QTooltip:He.Z,QBtnDropdown:$e.Z,QList:Qe.Z,QItem:Ye.Z,QItemSection:Je.Z,QItemLabel:Ke.Z,QTd:Ge.Z,QBtn:Xe.Z,QInput:et.Z,QMarkupTable:tt.Z,QDialog:it.Z,QCard:ot.Z,QToolbar:st.Z,QToolbarTitle:at.Z,QCardSection:lt.Z,QSelect:nt.Z,QExpansionItem:rt.Z,QSeparator:dt.Z,QCheckbox:ct.Z,QCardActions:ut.Z,QAvatar:ht.Z,QField:mt.Z,QMenu:pt.Z}),ft()(Ae,"directives",{ClosePopup:_t.Z})},81243:(e,t,i)=>{"use strict";i.d(t,{Z:()=>k});var o=i(83673),s=i(62323);const a={style:{"align-self":"center"}},l={key:0,class:"text-red-5"},n={key:1,style:{"align-self":"center"},class:"text-green-8"};function r(e,t,i,r,d,c){const u=(0,o.up)("q-spinner-hourglass"),h=(0,o.up)("q-btn"),m=(0,o.up)("q-icon");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(h,{flat:"",loading:e.loading,label:e.$t("pages.register_success.resend_email"),class:"q-mr-sm verify-email-btn",onClick:e.resendVerifyEmail,disable:e.btn_disable||""==e.email,style:{"align-self":"center"}},{loading:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"on-left"}),(0,o.Uk)(" "+(0,s.zw)(e.$t("pages.register_success.resend_email")),1)])),_:1},8,["loading","label","onClick","disable"]),(0,o._)("div",a,[""!=e.error_message?((0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(m,{name:"error",size:"md"}),(0,o.Uk)(" "+(0,s.zw)(e.error_message),1)])):(0,o.kq)("",!0),""!=e.success_message?((0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(m,{size:"md",name:"check_circle"}),(0,o.Uk)(" "+(0,s.zw)(e.success_message),1)])):(0,o.kq)("",!0)])],64)}var d=i(30052),c=i.n(d),u=i(61959),h=i(54268),m=i(29938),p=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const _=(0,o.aZ)({el:"#app",mixins:[],props:{email:{type:String,default:""}},components:{},data(){return{}},computed:{},mounted:function(){},methods:{resendVerifyEmail(){return p(this,void 0,void 0,(function*(){try{if(!this.email||!this.email)return;this.loading=!0,this.btn_disable=!0,this.error_message="",this.success_message="";const e={email:this.email},t=(0,m.XV)(e);yield this.sendEmail(t)}catch(e){e&&e.hasOwnProperty("message")?this.displayError(e.message):this.displayError(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),this.btn_disable=!1}finally{this.loading=!1}}))},displayError(e){let t=e;t||(t=this.$t("general_login_error")),this.error_message=t},sendEmail(e){return p(this,void 0,void 0,(function*(){let t;if(t=yield c().get(h.hi.resend_confirmation_email+"?"+e,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:(0,h.jd)()}}),t.data&&t.data.hasOwnProperty("success")&&!1===t.data.success)throw{message:t.data.message};t.data&&t.data.hasOwnProperty("success")&&!0===t.data.success&&(this.success_message=t.data.message),setTimeout((()=>{this.btn_disable=!1}),6e4)}))}},setup(){return{error_message:(0,u.iH)(""),success_message:(0,u.iH)(""),loading:(0,u.iH)(!1),btn_disable:(0,u.iH)(!1)}}});var g=i(74260),f=i(2165),w=i(23282),y=i(24554),b=i(7518),v=i.n(b);const x=(0,g.Z)(_,[["render",r],["__scopeId","data-v-0f7a794d"]]),k=x;v()(_,"components",{QBtn:f.Z,QSpinnerHourglass:w.Z,QIcon:y.Z})},11765:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var o=i(83673);const s=e=>((0,o.dD)("data-v-12f4db48"),e=e(),(0,o.Cn)(),e),a=s((()=>(0,o._)("img",{src:"google.svg",style:{height:"42px",width:"40px"},alt:""},null,-1)));function l(e,t,i,s,l,n){const r=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.j4)(r,{rounded:"",class:"google-btn",flat:"",onClick:t[0]||(t[0]=t=>e.oauthSignIn())},{default:(0,o.w5)((()=>[a])),_:1})}var n=i(61959),r=i(54268),d=i(77378),c=i(30524);const u=(0,o.aZ)({el:"#app",mixins:[d.Z,c.Z],props:{},components:{},data(){return{current_page_url:"",social_status:(0,n.iH)("")}},mounted:function(){this.setPageRoute(),this.current_page_url=window.location.origin,setTimeout((()=>{this.handleSocialMediaRedirect()}),0)},watch:{},methods:{handleSocialMediaRedirect(){try{let e=this.getAccessTokenCode();if(!e)return;this.setAfterLoginRoute(String(this.$route.query.state));const t=new CustomEvent("social_media_login_after",{detail:{access_type:"google",access_token:e}});document.dispatchEvent(t)}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}},getAccessTokenCode(){let e=this.$route.query.state||"";if(!this.$route.query||!0!==e.includes("google")||!this.$route.query.code)return;let t=this.$route.query.code;return"string"===typeof t?t:""},parseRouteParams(){let e=this.$route.hash,t={},i=e.split("&");for(const[o,s]of Object.entries(i)){let e=s.split("=");if(Array.isArray(e)&&2==e.length){let i=e[0].replace("#","");t[i]=e[1]}}return t},oauthSignIn(){var e=r.hi.google_oauth2_endpoint,t=document.createElement("form");t.setAttribute("method","GET"),t.setAttribute("action",e);var i={client_id:"342434080717-6s9dav2lf660p5cdscbjgomen9mdu9hv.apps.googleusercontent.com",redirect_uri:this.current_page_url,response_type:"code",scope:"email profile openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",include_granted_scopes:"true",state:this.social_status};for(const[s,a]of Object.entries(i)){let e=a;var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",s),o.setAttribute("value",e),t.appendChild(o)}document.body.appendChild(t),t.submit()},setPageRoute(){this.social_status=this.getStatusByRoute(this.$route.path),this.social_status+="google"}},setup(){return{}}});var h=i(74260),m=i(2165),p=i(7518),_=i.n(p);const g=(0,h.Z)(u,[["render",l],["__scopeId","data-v-12f4db48"]]),f=g;_()(u,"components",{QBtn:m.Z})},76621:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var o=i(83673);const s=e=>((0,o.dD)("data-v-384baa48"),e=e(),(0,o.Cn)(),e),a=s((()=>(0,o._)("img",{src:"linkedin.svg",style:{height:"42px",width:"40px"},alt:""},null,-1)));function l(e,t,i,s,l,n){const r=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.j4)(r,{rounded:"",class:"google-btn",flat:"",onClick:t[0]||(t[0]=t=>e.oauthSignIn())},{default:(0,o.w5)((()=>[a])),_:1})}var n=i(61959),r=i(54268),d=i(77378),c=i(30524);const u=(0,o.aZ)({el:"#app",mixins:[d.Z,c.Z],props:{},components:{},data(){return{current_page_url:"",social_status:(0,n.iH)("")}},mounted:function(){this.setPageRoute(),this.current_page_url=window.location.origin,setTimeout((()=>{this.handleSocialMediaRedirect()}),0)},watch:{},methods:{handleSocialMediaRedirect(){try{let e=this.getAccessTokenCode();if(!e)return;this.setAfterLoginRoute(String(this.$route.query.state));const t=new CustomEvent("social_media_login_after",{detail:{access_type:"linkedin",access_token:e}});document.dispatchEvent(t)}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}},getAccessTokenCode(){let e=this.$route.query.state||"";if(!this.$route.query||!0!==e.includes("linkedin")||!this.$route.query.code)return;let t=this.$route.query.code;return"string"===typeof t?t:""},parseRouteParams(){let e=this.$route.hash,t={},i=e.split("&");for(const[o,s]of Object.entries(i)){let e=s.split("=");if(Array.isArray(e)&&2==e.length){let i=e[0].replace("#","");t[i]=e[1]}}return t},oauthSignIn(){var e=r.hi.linkedin_oauth2_endpoint,t=document.createElement("form");t.setAttribute("method","GET"),t.setAttribute("action",e);var i={response_type:"code",client_id:"77cy2pz6ei0afn",redirect_uri:this.current_page_url,scope:"r_liteprofile r_emailaddress",state:this.social_status};for(const[s,a]of Object.entries(i)){let e=a;var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",s),o.setAttribute("value",e),t.appendChild(o)}document.body.appendChild(t),t.submit()},setPageRoute(){this.social_status=this.getStatusByRoute(this.$route.path),this.social_status+="linkedin"}},setup(){return{access_tolen:(0,n.iH)("")}}});var h=i(74260),m=i(2165),p=i(7518),_=i.n(p);const g=(0,h.Z)(u,[["render",l],["__scopeId","data-v-384baa48"]]),f=g;_()(u,"components",{QBtn:m.Z})},2410:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var o=i(83673);const s=e=>((0,o.dD)("data-v-fc42ca7c"),e=e(),(0,o.Cn)(),e),a=s((()=>(0,o._)("img",{src:"microsoft.svg",style:{height:"42px",width:"40px"},alt:""},null,-1)));function l(e,t,i,s,l,n){const r=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.j4)(r,{class:"social-btn",flat:"",onClick:t[0]||(t[0]=t=>e.oauthSignIn())},{default:(0,o.w5)((()=>[a])),_:1})}var n=i(61959),r=i(54268),d=i(77378),c=i(30524);const u=(0,o.aZ)({el:"#app",mixins:[d.Z,c.Z],props:{},components:{},data(){return{current_page_url:"",social_status:(0,n.iH)("")}},mounted:function(){this.setPageRoute(),this.current_page_url=window.location.origin,setTimeout((()=>{this.handleSocialMediaRedirect()}),0)},watch:{},methods:{handleSocialMediaRedirect(){try{let e=this.getAccessTokenCode();if(!e)return;this.setAfterLoginRoute(String(this.$route.query.state));const t=new CustomEvent("social_media_login_after",{detail:{access_type:"microsoft",access_token:e}});document.dispatchEvent(t)}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}},getAccessTokenCode(){let e=this.$route.query.state||"";if(!this.$route.query||!0!==e.includes("microsoft")||!this.$route.query.code)return;let t=this.$route.query.code;return"string"===typeof t?t:""},parseRouteParams(){let e=this.$route.hash,t={},i=e.split("&");for(const[o,s]of Object.entries(i)){let e=s.split("=");if(Array.isArray(e)&&2==e.length){let i=e[0].replace("#","");t[i]=e[1]}}return t},oauthSignIn(){var e=document.createElement("form");e.setAttribute("method","GET"),e.setAttribute("action",r.hi.micorsoft_oauth2_endpoint);var t={client_id:"fde82a54-0120-43ad-b317-0b182cf77ab2",response_type:"code",scope:"User.Read offline_access",redirect_uri:this.current_page_url,state:this.social_status};for(const[o,s]of Object.entries(t)){let t=s;var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",o),i.setAttribute("value",t),e.appendChild(i)}document.body.appendChild(e),e.submit()},setPageRoute(){this.social_status=this.getStatusByRoute(this.$route.path),this.social_status+="microsoft"}},setup(){return{access_token:(0,n.iH)("")}}});var h=i(74260),m=i(2165),p=i(7518),_=i.n(p);const g=(0,h.Z)(u,[["render",l],["__scopeId","data-v-fc42ca7c"]]),f=g;_()(u,"components",{QBtn:m.Z})},74475:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var o=i(83673),s=i(62323);const a={key:0,class:"alert-banner row"},l={class:"message"},n={class:"close"};function r(e,t,i,r,d,c){const u=(0,o.up)("q-btn"),h=(0,o.up)("q-tooltip");return""!==e.message?((0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("span",l,(0,s.zw)(e.message),1),(0,o._)("span",n,[(0,o.Wm)(u,{class:"schedule-meeting text-weight-bold",onClick:e.openCalendly},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("schedule_meeting_alert")),1)])),_:1},8,["onClick"]),(0,o.Wm)(u,{dense:"",flat:"",icon:"close",onClick:t[0]||(t[0]=t=>e.message="")},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.select_app.close")),1)])),_:1})])),_:1})])])):(0,o.kq)("",!0)}var d=i(10321),c=i(61959),u=i(60727),h=i(28741),m=i(91949);const p=(0,o.aZ)({el:"#app",mixins:[h.Z],props:{},components:{},data(){return{}},watch:{subscription_remaining_days:{handler:function(e,t){this.handleAlert()}},ready_to_expire_subscriptions:{handler:function(e,t){this.handleAlert()}}},mounted:function(){this.handleAlert()},methods:{handleAlert(){this.message="";let e=[];for(const t of this.ready_to_expire_subscriptions){const i=this.prepareMessageForAlert(t.days,t.detail.name);""!=i&&e.push(i)}0!=e.length&&(this.message=e.join(", "))},prepareMessageForAlert(e,t){return 0==e?this.$t("subscription_end_today"):-1==e?t+" "+this.$t("subscription_not_found"):e<0?t+" "+this.$t("subscription_ended"):1==e?t+" "+this.$t("subscription_end_days")+e+this.$t("day"):e>0&&e<this.whenToShowAlertDays?t+" "+this.$t("subscription_end_days")+e+this.$t("days"):""},openCalendly(){(0,m.GU)()}},setup(){const e=(0,u.ZO)(),{ready_to_expire_subscriptions:t,whenToShowAlertDays:i}=(0,d.Jk)(e);return{ready_to_expire_subscriptions:t,whenToShowAlertDays:i,message:(0,c.iH)("")}}});var _=i(74260),g=i(2165),f=i(5363),w=i(7518),y=i.n(w);const b=(0,_.Z)(p,[["render",r],["__scopeId","data-v-61be353a"]]),v=b;y()(p,"components",{QBtn:g.Z,QTooltip:f.Z})},12413:(e,t,i)=>{"use strict";i.d(t,{Z:()=>ee});var o=i(83673),s=i(62323),a=i(98880);const l={class:"image-decorator",ref:"image-area",id:"image_area"},n={id:"screenshot_container"},r=["src","width"],d=["onMousedown","onMousemove","onDblclick"],c=["id","onClick"],u={class:"c-crop--hide_main"},h=["src","width"],m={class:"text-weight-bold"},p={class:"row q-pa-sm full-width"},_={style:{"margin-left":"7px","margin-top":"7px"}},g={class:"text-right"},f={class:"row style-items",style:{width:"15%","font-size":"17px","margin-left":"5px"}},w={style:{"margin-left":"7px","margin-top":"7px"}},y={style:{"margin-left":"5px"},class:"style-items"},b={style:{"margin-left":"5px"}},v={class:"q-pa-md q-gutter-sm"};function x(e,t,i,x,k,C){const D=(0,o.up)("q-btn"),O=(0,o.up)("q-separator"),E=(0,o.up)("Resizable"),S=(0,o.up)("q-toolbar-title"),I=(0,o.up)("q-toolbar"),T=(0,o.up)("q-item-section"),L=(0,o.up)("q-item"),M=(0,o.up)("q-list"),F=(0,o.up)("q-menu"),q=(0,o.up)("q-icon"),Z=(0,o.up)("q-color"),R=(0,o.up)("q-popup-proxy"),W=(0,o.up)("q-input"),A=(0,o.up)("q-card-actions"),V=(0,o.up)("q-card"),z=(0,o.up)("q-dialog"),B=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[(0,o._)("div",n,[e.url?((0,o.wg)(),(0,o.iD)("img",{key:0,onLoad:t[0]||(t[0]=(...t)=>e.prepareImageData&&e.prepareImageData(...t)),id:"screenshot2",class:"original-image",src:e.url,alt:"Original Image",width:e.width},null,40,r)):(0,o.kq)("",!0),(0,o._)("div",{class:"select-areas--overlay",style:(0,s.j5)({opacity:e.opacityOverlay,position:"absolute",width:e.originImgSize.w+"px",height:e.originImgSize.h+"px",display:"block"})},null,4),(0,o._)("div",{id:"draw",style:(0,s.j5)({"background-color":"rgb(0, 0, 0)",opacity:0,position:"absolute",width:e.originImgSize.w+"px",height:e.originImgSize.h+"px"}),onMousedown:t[1]||(t[1]=(...t)=>e.mouseDown&&e.mouseDown(...t)),onMousemove:t[2]||(t[2]=(...t)=>e.mouseMove&&e.mouseMove(...t))},null,36),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.areas,(t=>((0,o.wg)(),(0,o.iD)("div",{key:t.id},[(0,o._)("div",{onMousedown:(0,a.iM)((i=>e.startMove(t,i)),["stop","prevent"]),onMousemove:i=>e.doMove(t,i),onDblclick:i=>e.clickedOnArea(t.id)},[(0,o._)("div",{class:"select-areas--outline",style:(0,s.j5)({opacity:e.opacityOutline,position:"absolute",cursor:"default",width:t.width+4+"px",height:t.height+4+"px",left:e.areaDisplayPosX(t)-2+"px",top:e.areaDisplayPosY(t)-2+"px","z-index":t.z})},null,4),(0,o._)("div",{id:"annotation_item_"+t.id,class:"select-areas--background_area",style:(0,s.j5)({background:`#fff url('${e.url}') -${t.x}px -${t.y}px / ${e.originImgSize.w}px ${e.originImgSize.h}px no-repeat`,position:"absolute",cursor:"move",width:t.width+"px",height:t.height+"px",left:e.areaDisplayPosX(t)+"px",top:e.areaDisplayPosY(t)+"px","z-index":t.z+2}),onClick:i=>e.changeResizable(t.id)},null,12,c),(0,o._)("div",{class:"edit-area row back-white",style:(0,s.j5)({display:"edit",left:e.areaDisplayPosX(t)+t.width-120-t.width/2+"px",top:e.areaDisplayLowerPosY(t)+30+"px","z-index":t.z+2})},[(0,o.Wm)(D,{flat:"",icon:"img:edit.svg",onClick:i=>e.clickedOnArea(t.id)},null,8,["onClick"]),(0,o.Wm)(O,{vertical:"",class:"q-mx-sm"}),(0,o.Wm)(D,{flat:"",icon:"img:save.svg",onClick:i=>e.saveAnnotation(t.id)},null,8,["onClick"]),(0,o.Wm)(O,{vertical:"",class:"q-mx-sm"}),(0,o.Wm)(D,{icon:"img:trash-bin-default.svg",flat:"",onClick:i=>e.deleteSelected(t.id)},null,8,["onClick"])],4),t.resizable?((0,o.wg)(),(0,o.j4)(E,{key:0,item:t,posImg:e.posImg,"pos-correction":e.posCorrection,onStartDrag:e.startDrag,onDoDrag:e.doDrag},null,8,["item","posImg","pos-correction","onStartDrag","onDoDrag"])):(0,o.kq)("",!0)],40,d)])))),128))]),(0,o._)("div",u,[(0,o._)("img",{id:"c-crop--hide_img",src:e.url,alt:"",width:e.width},null,8,h)])],512),(0,o.Wm)(z,{modelValue:e.show_annotation_popup,"onUpdate:modelValue":t[11]||(t[11]=t=>e.show_annotation_popup=t),onKeydown:t[12]||(t[12]=(0,a.D2)((t=>e.show_annotation_popup=!1),["esc"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{style:{width:"720px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o._)("span",m,(0,s.zw)(e.$t("annotation.new_annotation")),1)])),_:1}),(0,o.wy)((0,o.Wm)(D,{flat:"",round:"",dense:"",icon:"close"},null,512),[[B]])])),_:1}),(0,o._)("div",p,[(0,o._)("div",{class:"style-items",style:(0,s.j5)({width:"40%","font-size":"18px","font-family":e.selectedItem.fontstyle,"margin-left":"8px"})},[(0,o._)("div",_,(0,s.zw)(e.selectedItem.fontstyle),1),(0,o._)("div",g,[(0,o.Wm)(D,{dense:"",flat:"",icon:"expand_more",style:{height:"39px",bottom:"34px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(F,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M,{style:{"min-width":"80px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.fontlist,(t=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(L,{key:t,clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{onClick:i=>{e.selectedItem.fontstyle=t,e.updateValue(e.selectedItem)},style:(0,s.j5)({"font-family":t})},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t),1)])),_:2},1032,["onClick","style"])])),_:2},1024)),[[B]]))),128))])),_:1})])),_:1})])),_:1})])],4),(0,o._)("div",f,[(0,o._)("div",w,(0,s.zw)(e.selectedItem.fontSize),1),(0,o.Wm)(D,{dense:"",flat:"",icon:"expand_more",style:{left:"8px",height:"39px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(F,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M,{class:"q-pr-sm",dense:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.fontSizes,(t=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(L,{key:t,clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{onClick:i=>{e.selectedItem.fontSize=t,e.updateValue(e.selectedItem)}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t),1)])),_:2},1032,["onClick"])])),_:2},1024)),[[B]]))),128))])),_:1})])),_:1})])),_:1})]),(0,o._)("div",y,[(0,o.Wm)(D,{flat:"",dense:"",style:{height:"38px"},onClick:t[3]||(t[3]=t=>{e.selectedItem.bold=!e.selectedItem.bold,e.updateValue(e.selectedItem)})},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{style:{"margin-top":"2px"},size:"32px",class:(0,s.C_)(1==e.selectedItem.bold?"text-primary":"icon-grey"),name:"format_bold"},null,8,["class"])])),_:1}),(0,o.Wm)(D,{flat:"",dense:"",style:{height:"38px"},onClick:t[4]||(t[4]=t=>{e.selectedItem.italic=!e.selectedItem.italic,e.updateValue(e.selectedItem)})},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{style:{"margin-top":"2px"},size:"32px",class:(0,s.C_)(1==e.selectedItem.italic?"text-primary":"icon-grey"),name:"format_italic"},null,8,["class"])])),_:1})]),(0,o._)("div",b,[(0,o.Wm)(W,{style:{width:"130px"},outlined:"",dense:"",standout:"",modelValue:e.selectedItem.fontColor,"onUpdate:modelValue":[t[7]||(t[7]=t=>e.selectedItem.fontColor=t),t[8]||(t[8]=t=>e.updateValue(e.selectedItem))],rules:["hexColor"],label:e.$t("annotation.color")},{append:(0,o.w5)((()=>[(0,o.Wm)(q,{name:"colorize",class:"cursor-pointer",color:{"background-color":e.selectedItem.fontColor}},{default:(0,o.w5)((()=>[(0,o.Wm)(R,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{modelValue:e.selectedItem.fontColor,"onUpdate:modelValue":[t[5]||(t[5]=t=>e.selectedItem.fontColor=t),t[6]||(t[6]=t=>e.updateValue(e.selectedItem))],"default-view":"palette","no-header-tabs":""},null,8,["modelValue"])])),_:1})])),_:1},8,["color"])])),_:1},8,["modelValue","label"])])]),(0,o.Wm)(O,{style:{"margin-top":"-14px"},inset:""}),(0,o._)("div",v,[(0,o.Wm)(W,{outlined:"",type:"textarea",modelValue:e.annotation_text,"onUpdate:modelValue":t[9]||(t[9]=t=>e.annotation_text=t),label:e.$t("annotation.input"),"input-style":{color:e.selectedItem.fontColor,"font-size":"14pt","font-family":e.selectedItem.fontstyle}},null,8,["modelValue","label","input-style"])]),(0,o.Wm)(A,{align:"right",style:{"margin-right":"10px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{unelevated:"",label:e.$t("cancel"),class:"highlighted-back",onClick:t[10]||(t[10]=t=>e.show_annotation_popup=!1)},null,8,["label"]),(0,o.Wm)(D,{unelevated:"",label:e.$t("save"),color:"primary",onClick:e.save_annotation},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var k=i(10321),C=i(77378),D=i(61959),O=i(60727),E=i(98266),S=i(77987),I=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};let T,L,M;const F=(0,o.aZ)({setup(){const e=(0,O.H_)(),{page:t,doc_annotations:i}=(0,k.Jk)(e),{saveAnnotationOnDocument:o,editAnnotation:s,deleteAnnotation:a,getDocAnnotations:l,saveStampOnDocument:n,editStampOnDocument:r}=e;return{saveAnnotationOnDocument:o,editAnnotation:s,deleteAnnotation:a,getDocAnnotations:l,saveStampOnDocument:n,editStampOnDocument:r,doc_annotations:i,page:t,font_style:(0,D.iH)("Helvetica"),fontlist:["Helvetica","Times New Roman"],color:(0,D.iH)("#000000"),fontSizes:(0,D.iH)([]),selectedItem:(0,D.iH)({}),alwaysShow:!0}},data(){const e=(0,D.iH)({}),t=(0,D.iH)({x:0,y:0}),i=(0,o.Fl)((()=>`transform: translate(${t.value.x}px, ${t.value.y}px); width:${e.value.width}px; height:${e.value.height}px;`));return{mousedown:!1,originImgSize:{w:0,h:0,r:0},url:this.cropUrl,posImg:{top:0,left:0},areas:[{id:1,x:64,y:208,width:556,height:55,z:0,resizable:!1,annot_id:null,editable:!1,type:"normal"}],latestAreaItem:{startX:0,startY:0,endX:0,endY:0},scrollLeft:0,scrollTop:0,moveTempX:0,moveTempY:0,moveCurrentX:0,moveCurrentY:0,temp:0,dragdown:!1,move:!1,imageHeight:0,imageWidth:0,clicked_id:(0,D.iH)(),clicked_item:(0,D.iH)({}),created_item:(0,D.iH)({}),annot_id:(0,D.iH)(),show_annotation_popup:!1,annotation_confirmation:!1,annotation_text:"",dialogArea:e,dialogPos:t,dialogStyle:i}},mixins:[C.Z],props:{cropUrl:{type:String,default:"https://dev.doc2api.cloudintegration.eu/resource/image/1b90b6d5-63b5-446b-92a4-a60d57dc0edd/1.png"},width:{type:Number,default:1500},opacityOutline:{type:Number,default:.2},opacityOverlay:{type:Number,default:.2},posCorrection:{type:Boolean,default:!1},selectFont:{type:String,default:"Helvetica"},selectFontSize:{type:Number,default:12},selectColor:{type:String,default:"#000000"},screenmode:{type:String,default:"annotate"}},components:{Resizable:E.Z},watch:{cropUrl(e){this.url=e,setTimeout((()=>{this.setSize()}),200)},width(e){this.setSize(),this.prepareImageData()},screenmode(e){}},methods:{areaDisplayPosX(e){return e.x+(this.posCorrection?this.posImg.left:0)},areaDisplayPosY(e){return e.y+(this.posCorrection?this.posImg.top:0)},areaDisplayLowerPosY(e){return e.y+e.height},mousePosX(e){return e.pageX-this.posImg.left},mousePosY(e){return e.pageY-this.posImg.top},setSize(){this.url&&(L=(0,S.$)("#image_area"),this.originImgSize={w:L.offsetWidth+40,h:L.offsetHeight+25,r:(L.offsetWidth+40)/(L.offsetHeight+25)})},calcPosOfBox(){let e=this.$refs["image-area"];this.scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,this.scrollTop=window.pageYOffset||document.documentElement.scrollTop;let t=e.getBoundingClientRect().top,i=e.getBoundingClientRect().left;this.posImg.top=t+this.scrollTop,this.posImg.left=i+this.scrollLeft},mouseDown(e){this.mousedown=!0;let t=null;if(t=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,0!=this.latestAreaItem.startX&&0!=this.latestAreaItem.startY){let i=this.latestAreaItem.startX,o=this.latestAreaItem.startY,s=e.pageX,a=e.pageY,l=s-i,n=a-o;(l<0||n<0)&&(s=i,a=o,i=e.pageX,o=e.pageY,l=s-i,n=a-o);let r={id:t,x:i,y:o,width:l,height:n,z:0,fontstyle:"Helvetica",fontSize:"20pt",fontColor:"#000000",resizable:!1,annot_id:null,editable:!0,type:"normal"};return this.areas.push(r),this.temp=r.id,void(this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})}if(t){let i={id:t,x:this.mousePosX(e),y:this.mousePosY(e),width:0,height:0,z:0,fontstyle:"Helvetica",fontSize:"20pt",fontColor:"#000000",resizable:!1,annot_id:null,editable:!0,type:"normal"};this.areas.push(i),this.temp=i.id,this.latestAreaItem.startX=this.mousePosX(e),this.latestAreaItem.startY=this.mousePosY(e),this.latestAreaItem.endX=0,this.latestAreaItem.endY=0}},mouseMove(e){this.mousedown&&(this.areas.filter((e=>e.id===this.temp)).map((t=>{t.width=e.pageX-t.x-this.posImg.left-8,t.height=e.pageY-t.y-this.posImg.top-8})),this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})},mouseUp(){this.mousedown=!1,this.areas=this.areas.filter((e=>e.width>=3&&e.height>=3)),this.endMove(),this.endDrag()},changeResizable(e){this.areas.filter((t=>t.id===e)).map((e=>{e.resizable=!0,e.z=100})),this.areas.filter((t=>t.id!==e)).map((e=>{e.resizable=!1,e.z=0}))},deleteSelected(e){return I(this,void 0,void 0,(function*(){let t=this.areas.find((t=>t.id==e));if(void 0!=t&&null!=t.annot_id&&void 0!=t.annot_id)try{let e=yield this.deleteAnnotation(t.annot_id);1==e.success?this.showSuccessToast(this.$t("annotation.delete_success")):this.showErrorToast(this.$t("annotation.delete_error"))}catch(i){}this.areas=this.areas.filter((t=>t.id!==e))}))},startDrag(){this.dragdown=!0},doDrag(e,t,i){if(this.dragdown)switch(t){case"w":i.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-i.pageX+this.posImg.left,e.x=i.pageX-this.posImg.left),e.width<10&&(e.x=e.x-10,e.width=e.width+10);break;case"sw":i.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-i.pageX+this.posImg.left,e.x=i.pageX-this.posImg.left),i.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=i.pageY-this.posImg.top-e.y),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"s":i.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=i.pageY-this.posImg.top-e.y),e.height<10&&(e.height=e.height+10);break;case"se":i.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=i.pageX-this.posImg.left-e.x),i.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=i.pageY-this.posImg.top-e.y),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"e":i.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=i.pageX-this.posImg.left-e.x),e.width<10&&(e.x=e.x-10,e.width=e.width+10);break;case"ne":i.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=i.pageX-this.posImg.left-e.x),i.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-i.pageY),e.y=i.pageY-this.posImg.top),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"n":i.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-i.pageY),e.y=i.pageY-this.posImg.top),e.height<10&&(e.height=e.height+10);break;case"nw":i.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-i.pageY),e.y=i.pageY-this.posImg.top),i.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-i.pageX+this.posImg.left,e.x=i.pageX-this.posImg.left),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;default:break}},endDrag(){this.dragdown=!1},startMove(e,t){this.move=!0,this.moveTempX=t.clientX,this.moveTempY=t.clientY,this.moveCurrentX=e.x,this.moveCurrentY=e.y},doMove(e,t){if(this.move){let i=this.moveCurrentX+(t.clientX-this.moveTempX),o=this.moveCurrentY+(t.clientY-this.moveTempY),s=this.originImgSize.w-e.width,a=this.originImgSize.h-e.height;i>0&&o>0&&i<s&&o<a&&(e.x=i,e.y=o)}},endMove(){this.move=!1},createReactangle(e,t,i,o){let s=null;if(s=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,s){let a={id:s,x:e,y:t,width:i,height:o,z:0,fontstyle:"Helvetica",fontSize:"20pt",fontColor:"#000000",resizable:!1,annot_id:null,editable:!0,type:"normal"};this.areas.push(a),this.temp=a.id}},initKnownAnnotations(){this.areas=[],this.doc_annotations.length>0&&this.doc_annotations.forEach((e=>{let t=null;if(t=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,t){let i=0,o=0,s=0,a=0,l=0,n=0;l=this.imageWidth/e["overall_x"],i=e["x1"]*l,o=e["x2"]*l,n=this.imageHeight/e["overall_y"],s=e["y1"]*n,a=e["y2"]*n,null!=e["font_size"]&&(e["font_size"]=parseInt(e["font_size"])*n),0==e["font_size"]&&(e["font_size"]=20);let r=0;r=this.imageHeight<s?s-this.imageHeight:this.imageHeight-s;let d=0;if(d=this.imageHeight<a?a-this.imageHeight:this.imageHeight-a,e["text"].includes("_stamp")){let l={id:t,x:i,y:d,width:o-i,height:a-s,z:0,text:"",resizable:!1,annot_id:e["id"],editable:!1,type:"stamp"};this.areas.push(l)}else{let l={id:t,x:i,y:r,width:o-i,height:s-a,z:0,text:e["text"],fontstyle:e["font_style"],fontSize:e["font_size"],fontColor:e["font_color"],italic:e["italic"],bold:e["bold"],resizable:!1,annot_id:e["id"],editable:!0,type:"normal"};this.areas.push(l)}setTimeout((()=>this.addAnnotationInfo(e,t)),10)}}))},addAnnotationInfo(e,t){this.created_item=(0,S.$)("#annotation_item_"+t),e["text"].includes("_stamp_")?e["text"].includes("approved")?"approved_stamp_de"==e["text"]?fetch("annotation/annotation_stamps/approved_stamp_de.svg").then((function(e){return e.text()})).then((e=>{this.created_item.innerHTML=e})):"approved_stamp_en"==e["text"]&&fetch("annotation/annotation_stamps/approved_stamp_en.svg").then((function(e){return e.text()})).then((e=>{this.created_item.innerHTML=e})):e["text"].includes("rejected")&&("rejected_stamp_de"==e["text"]?fetch("annotation/annotation_stamps/rejected_stamp_de.svg").then((function(e){return e.text()})).then((e=>{this.created_item.innerHTML=e})):"rejected_stamp_en"==e["text"]&&fetch("annotation/annotation_stamps/rejected_stamp_en.svg").then((function(e){return e.text()})).then((e=>{this.created_item.innerHTML=e}))):(this.created_item.innerHTML=e["text"],this.created_item.style.fontSize=e["font_size"]+"pt",this.created_item.style.fontFamily=e["font_style"],this.created_item.style.color=this.hexToRGB(e["font_color"]),1==e["bold"]&&(this.created_item.style.weight="bold"),1==e["italic"]&&(this.created_item.style.fontStyle="italic"))},hexToRGB(e){let t=parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),o=parseInt(e.slice(4),16);return"rgb("+t+","+i+","+o+")"},updateValue(e){this.created_item=(0,S.$)("#annotation_item_"+e.id),this.created_item.style.fontFamily=e.fontstyle,this.created_item.style.fontSize=e.fontSize,this.created_item.style.color=e.fontColor,e.bold?this.created_item.style.fontWeight="bold":this.created_item.style.fontWeight="",e.italic?this.created_item.style.fontStyle="italic":this.created_item.style.fontStyle=""},prepareImageData(){M=(0,S.$)("#screenshot2"),M&&(this.imageWidth=M.offsetWidth,this.imageHeight=M.offsetHeight),this.setSize(),setTimeout((()=>this.initKnownAnnotations()),100)},calculateLeftPosition(e){let t=this.areaDisplayPosX(e)+e.width;return t+50>=this.imageWidth&&(t=this.areaDisplayPosX(e)-60),t+"px"},calculatePositionFromTop(e){let t=this.areaDisplayPosY(e)-25;return t<0&&(t=this.areaDisplayPosY(e)),t+"px"},clickedOnArea(e){let t=this.areas.find((t=>t.id==e));void 0!=t?(void 0!=t.annot_id&&null!=t.annot_id&&(this.annot_id=t.annot_id),this.clicked_id=t.id,this.clicked_item=(0,S.$)("#annotation_item_"+t.id),this.annotation_text=this.clicked_item.innerHTML,this.selectedItem=t,this.show_annotation_popup=!0):this.showErrorToast("There was an error, please reload the page")},save_annotation(){this.show_annotation_popup=!1,this.clicked_item.style.fontFamily=this.selectedItem.fontstyle,this.clicked_item.style.fontSize=this.selectedItem.fontSize,this.clicked_item.style.color=this.selectedItem.fontColor,this.clicked_item.innerHTML=this.annotation_text,this.annotation_text=""},saveAnnotation(e){this.clicked_item=(0,S.$)("#annotation_item_"+e);let t=this.areas.findIndex((t=>t.id===e));this.clicked_item.innerHTML.includes("<svg xmlns")?null!=this.areas[t].annot_id?this.moveStamp(e):this.stampDocument(this.areas[t].type):setTimeout((()=>this.save_annotation_on_document()),100)},save_annotation_on_document(){return I(this,void 0,void 0,(function*(){let e="italic"==this.clicked_item.style.fontStyle,t="bold"==this.clicked_item.style.fontWeight;this.clicked_item.style.fontFamily=this.selectedItem.fontstyle,this.clicked_item.style.fontSize=this.selectedItem.fontSize,this.clicked_item.style.color=this.selectedItem.fontColor;let i={note:this.clicked_item.innerHTML,x1:parseFloat(this.clicked_item.style.left),y1:this.imageHeight-parseFloat(this.clicked_item.style.top),x2:parseFloat(this.clicked_item.style.left)+.5*parseFloat(this.clicked_item.style.width),y2:this.imageHeight-parseFloat(this.clicked_item.style.top)-parseFloat(this.clicked_item.style.fontSize)-60,overall_x:this.imageWidth,overall_y:this.imageHeight,rgb:this.clicked_item.style.color.toString().replace("rgb",""),font:this.clicked_item.style.fontFamily,italic:e,bold:t,fontSize:this.clicked_item.style.fontSize+5,page:this.page-1,background_color:"ffffff"},o=1+i.note.length*(2.5*i.fontSize)/this.clicked_item.style.width;if(o>1&&(i.y2=this.imageHeight-this.clicked_item.style.height-(parseFloat(this.clicked_item.style.fontSize)+50)*o),null==this.annot_id)try{let o=this.$route.params.id,s=yield this.saveAnnotationOnDocument(o,i);if(1==s.success){let i=this.areas.findIndex((e=>e.id===this.clicked_id));if(-1!=i){this.areas[i].annot_id=s.id.id;let o={text:this.clicked_item.innerHTML,id:this.areas[i].annot_id,x1:parseFloat(this.clicked_item.style.left),y1:this.imageHeight-parseFloat(this.clicked_item.style.top),x2:parseFloat(this.clicked_item.style.left)+.8*parseFloat(this.clicked_item.style.width),y2:this.imageHeight-parseFloat(this.clicked_item.style.top)-parseFloat(this.clicked_item.style.fontSize)-100,overall_x:this.imageWidth,overall_y:this.imageHeight,font_color:this.clicked_item.style.color.toString().replace("rgb",""),font_style:this.clicked_item.style.fontFamily,italic:e,bold:t,font_size:this.clicked_item.style.fontSize,page:this.page-1,background_color:"ffffff"};this.doc_annotations.push(o)}this.showSuccessToast(this.$t("annotation.save_success"))}else this.showErrorToast(this.$t("annotation.save_error"))}catch(s){}else try{let e=yield this.editAnnotation(this.annot_id,i);1==e.success?this.showSuccessToast(this.$t("annotation.save_success")):this.showErrorToast(this.$t("annotation.save_error"))}catch(s){}}))},moveStamp(e){return I(this,void 0,void 0,(function*(){let t=this.areas.findIndex((t=>t.id===e)),i={id:this.areas[t].annot_id,stampName:this.areas[t].type,x1:parseFloat(this.clicked_item.style.left),y1:this.imageHeight-parseFloat(this.clicked_item.style.top)-110,x2:parseFloat(this.clicked_item.style.left)+parseFloat(this.clicked_item.style.width),y2:this.imageHeight-parseFloat(this.clicked_item.style.top),overall_x:this.imageWidth,overall_y:this.imageHeight,page:this.page-1};try{let e=this.$route.params.id,t=yield this.editStampOnDocument(e,i);if(1==t.success){let e=this.areas.findIndex((e=>e.id===this.clicked_id));-1!=e&&(this.areas[e].annot_id=t.message.id),this.showSuccessToast(this.$t("annotation.save_success"))}else this.showErrorToast(this.$t("annotation.save_error"))}catch(o){}}))},stampDocument(e){return I(this,void 0,void 0,(function*(){let t={stampName:e,x1:parseFloat(this.clicked_item.style.left),y1:this.imageHeight-parseFloat(this.clicked_item.style.top)-110,x2:parseFloat(this.clicked_item.style.left)+parseFloat(this.clicked_item.style.width),y2:this.imageHeight-parseFloat(this.clicked_item.style.top),overall_x:this.imageWidth,overall_y:this.imageHeight,page:this.page-1};try{let e=this.$route.params.id,i=yield this.saveStampOnDocument(e,t);if(1==i.success){let e=this.areas.findIndex((e=>e.id===this.clicked_id));-1!=e&&(this.areas[e].annot_id=i.message.id),this.showSuccessToast(this.$t("annotation.save_success"))}else this.showErrorToast(this.$t("annotation.save_error"))}catch(i){}}))},addTemplateAnnotation(e){let t={id:this.areas.length,x:100,y:100,width:450,height:110,z:0,resizable:!1,annot_id:null,editable:!1,type:"stamp"};this.areas.push(t),this.clicked_id=t.id,setTimeout((()=>this.fillTemplateAnnotation(t,e)),20)},fillTemplateAnnotation(e,t){let i=this.areas.findIndex((t=>t.id===e.id));this.clicked_item=(0,S.$)("#annotation_item_"+e.id),t.includes("approved_stamp")?t.includes("_de.svg")?(fetch("annotation/annotation_stamps/approved_stamp_de.svg").then((function(e){return e.text()})).then((e=>{this.clicked_item.innerHTML=e})),this.areas[i].type="approved_stamp_de"):t.includes("_en.svg")&&(fetch("annotation/annotation_stamps/approved_stamp_en.svg").then((function(e){return e.text()})).then((e=>{this.clicked_item.innerHTML=e})),this.areas[i].type="approved_stamp_en"):t.includes("rejected_stamp")&&(t.includes("_de.svg")?(fetch("annotation/annotation_stamps/rejected_stamp_de.svg").then((function(e){return e.text()})).then((e=>{this.clicked_item.innerHTML=e})),this.areas[i].type="rejected_stamp_de"):t.includes("_en.svg")&&(fetch("annotation/annotation_stamps/rejected_stamp_en.svg").then((function(e){return e.text()})).then((e=>{this.clicked_item.innerHTML=e})),this.areas[i].type="rejected_stamp_en"))},createAnnotationFromColorShortcut(e){let t={id:this.areas.length,x:100,y:100,width:450,height:110,z:0,fontColor:e,resizable:!0,annot_id:null,editable:!0,type:"normal"};this.areas.push(t),this.clicked_id=t.id;let i=this.areas.find((e=>e.id==t.id));this.selectedItem=i,this.selectedItem.color=e,this.selectedItem.fontstyle="Helvetica",this.selectedItem.fontSize="20pt",setTimeout((()=>{this.clicked_item=(0,S.$)("#annotation_item_"+t.id),this.clicked_item.style.fontFamily=this.selectedItem.fontstyle,this.clicked_item.style.fontSize=this.selectedItem.fontSize,this.clicked_item.style.color=this.selectedItem.fontColor})),this.show_annotation_popup=!0},onPan(e){this.dialogPos.x=this.dialogPos.x+e.delta.x,this.dialogPos.y=this.dialogPos.y+e.delta.y},colorConverter(e){let t="#";e=e.replace("rgb(","").replace(")","");let i=e.split(",");return i.forEach((e=>{let i=parseInt(e).toString(16);t+=i})),t},windowResize(){this.setSize()}},mounted(){T=this,window.anno=this,this.setSize(),L=(0,S.$)("#image_area"),L.addEventListener("mousemove",this.calcPosOfBox),L.addEventListener("scroll",this.calcPosOfBox),this.calcPosOfBox(),L.addEventListener("mouseup",this.mouseUp),window.addEventListener("resize",this.windowResize);for(let e=1;e<=80;e++)this.fontSizes.push(e.toString()+"pt")},unmounted:function(){L.removeEventListener("mousemove",this.calcPosOfBox),L.removeEventListener("scroll",this.calcPosOfBox),L.removeEventListener("mouseup",this.mouseUp),window.removeEventListener("resize",this.windowResize)}});var q=i(74260),Z=i(2165),R=i(65869),W=i(46778),A=i(10151),V=i(39570),z=i(13747),B=i(20811),N=i(27011),P=i(83414),U=i(52035),j=i(24554),H=i(64689),$=i(83944),Q=i(83456),Y=i(99367),J=i(60677),K=i(7518),G=i.n(K);const X=(0,q.Z)(F,[["render",x],["__scopeId","data-v-742e030e"]]),ee=X;G()(F,"components",{QBtn:Z.Z,QSeparator:R.Z,QDialog:W.Z,QCard:A.Z,QToolbar:V.Z,QToolbarTitle:z.Z,QMenu:B.Z,QList:N.Z,QItem:P.Z,QItemSection:U.Z,QIcon:j.Z,QInput:H.Z,QPopupProxy:$.Z,QColor:Q.Z,QCardActions:Y.Z}),G()(F,"directives",{ClosePopup:J.Z})},26468:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var o=i(83673),s=i(62323);const a=(0,o._)("img",{width:"26",height:"26",src:"accounting1.svg"},null,-1);function l(e,t,i,l,n,r){const d=(0,o.up)("q-tooltip"),c=(0,o.up)("q-btn");return e.show_button?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[e.show_icon_btn?((0,o.wg)(),(0,o.j4)(c,{key:0,flat:"",class:"pr-6 pl-6",onClick:e.routeToAutoAccounting},{default:(0,o.w5)((()=>[a,(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("auto_accounting")),1)])),_:1})])),_:1},8,["onClick"])):((0,o.wg)(),(0,o.j4)(c,{key:1,flat:"",label:e.$t("auto_accounting"),color:"primary",onClick:e.routeToAutoAccounting},null,8,["label","onClick"]))],64)):(0,o.kq)("",!0)}var n=i(61959),r=i(10321),d=i(60727),c=i(77378),u=i(45401),h=i(41891),m=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const p=(0,o.aZ)({el:"#app",mixins:[u.Z,c.Z],props:{isReadOnly:{type:Boolean,default:!1},show_icon_btn:{type:Boolean,default:!0}},components:{},watch:{loading_settings:{handler:function(e,t){1==e&&0==t||this.initView()}},doc_loaded:{handler:function(e,t){this.initView()}}},mounted:function(){this.initView()},methods:{initView(){this.user_settings[this.auto_accounting_setting]||(this.user_settings[this.auto_accounting_setting]=!1),!0===Boolean(this.user_settings[this.auto_accounting_setting])&&"INVOICE"==this.record.doc_type&&(this.show_button=!0)},routeToAutoAccounting(){return m(this,void 0,void 0,(function*(){try{if(this.isReadOnly)return void this.$router.push("/accounting/"+this.$route.params.id);this.showLoading();const e=yield this.saveAndValidate();if(!1===e.success){const t=new CustomEvent("display_fields_errors",{});return document.dispatchEvent(t),void this.showErrorToast(e.message)}this.$router.push("/accounting/"+this.$route.params.id)}catch(e){}finally{this.hideLoading()}}))}},data(){return{auto_accounting_setting:h.x8}},setup(){const e=(0,d.H_)(),{show_all_menu_btns:t,record:i,doc_loaded:o}=(0,r.Jk)(e),{saveAndValidate:s}=e,a=(0,d.VF)(),{user_settings:l,loading_settings:c}=(0,r.Jk)(a);return{saveAndValidate:s,record:i,doc_loaded:o,user_settings:l,loading_settings:c,show_all_menu_btns:t,show_button:(0,n.iH)(!1),show_icon:(0,n.iH)(!0)}}});var _=i(74260),g=i(2165),f=i(5363),w=i(7518),y=i.n(w);const b=(0,_.Z)(p,[["render",l]]),v=b;y()(p,"components",{QBtn:g.Z,QTooltip:f.Z})},59751:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>je});var o=i(83673),s=i(62323),a=i(98880);const l=e=>((0,o.dD)("data-v-71fa9d0c"),e=e(),(0,o.Cn)(),e),n={class:"mb-4 image_control_panel"},r={class:"row justify-start panel-right"},d={class:"col-auto q-mr-auto medi-classification"},c=l((()=>(0,o._)("img",{width:"24",height:"24",src:"save.svg"},null,-1))),u={key:1,class:"col-auto"},h={class:"col-auto"},m={key:0,class:"full-width"},p=["data-group-id"],_={class:"row q-pl-sm q-pr-sm"},g={class:"col-12 secondary-c-text text-h6 text-weight-bold"},f=l((()=>(0,o._)("img",{width:"24",src:"card-checklist.svg"},null,-1))),w=["data-fields-group-name"],y={key:0,class:"full-width v-m-10 height-7"},b={class:""},v={class:"q-ml-sm"};function x(e,t){const i=(0,o.up)("DocumentClassification"),l=(0,o.up)("q-tooltip"),x=(0,o.up)("q-btn"),k=(0,o.up)("q-icon"),C=(0,o.up)("scriptBtn"),D=(0,o.up)("autoTesting"),O=(0,o.up)("q-separator"),E=(0,o.up)("masterDataLookup"),S=(0,o.up)("dialog-draggable"),I=(0,o.up)("export-dialog"),T=(0,o.up)("q-dialog"),L=(0,o.up)("selection-popup"),M=(0,o.up)("q-avatar"),F=(0,o.up)("q-card-section"),q=(0,o.up)("q-card-actions"),Z=(0,o.up)("q-card"),R=(0,o.up)("Loader"),W=(0,o.up)("q-spinner-hourglass"),A=(0,o.up)("q-inner-loading"),V=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.isModelReady()?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",n,[(0,o._)("div",r,[(0,o._)("div",d,[(0,o.Wm)(i,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])]),(0,o.Wm)(x,{flat:"",class:"pr-6 pl-6",onClick:e.saveData},{default:(0,o.w5)((()=>[c,(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("save")),1)])),_:1})])),_:1},8,["onClick"]),(0,o.kq)("",!0),!0!==e.is_admin||e.isReadOnly?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)(C)])),(0,o._)("div",h,[(0,o.Wm)(D)])])]),(0,o._)("div",{class:(0,s.C_)(["scrolle-y back-white",e.renderOpenWindoIcon?"full-height":"right-content-height"]),"data-section":"fields",id:"field_scrolle"},[e.renderComponent?((0,o.wg)(),(0,o.iD)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.formLayout,((t,i)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:`div-${i}`},[t.is_panel_section_group===e.isPanelSection&&t.rows.length>0?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,s.C_)(["full-width q-mb-lg",t.is_stcky_group?" validation-sticky-area":"not-sticky-area"]),"data-group-id":i},[(0,o._)("div",_,[(0,o._)("div",g,[t.title?((0,o.wg)(),(0,o.j4)(k,{key:0,class:"cursor-pointer",size:"sm",onClick:t=>e.validateAllSectionFields(i)},{default:(0,o.w5)((()=>[f,(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("validate_all_fields")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,s.zw)(e.getLabelForFormBuilder(t,"form_builder.")),1)])]),(0,o._)("div",{class:"full-width","data-fields-group-name":t.name},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.rows,((t,a)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:`div-${a}`},[t.is_hidden||void 0!=t.visibile&&!t.visibile?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:0,class:"display-block medi-field-padding",style:(0,s.j5)("width:"+t.elementWidth+"%")},[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.fieldType),{currentField:t,isReadOnly:e.isReadOnly,fieldName:t.name,groupIndex:i,onInputClicked:e.htmlElementClick,onInputValueChanges:e.onInputValueChanges,onApplyFuzzySearch:e.masterDataSearchByField,onUpdateModel:e.updateModel},null,8,["currentField","isReadOnly","fieldName","groupIndex","onInputClicked","onInputValueChanges","onApplyFuzzySearch","onUpdateModel"]))],4))],64)))),128))],8,w),t.is_stcky_group?((0,o.wg)(),(0,o.iD)("div",y)):(0,o.kq)("",!0)],10,p)):(0,o.kq)("",!0)],64)))),128))])):(0,o.kq)("",!0),(0,o.Wm)(O,{size:"2px",class:"q-mt-lg q-ma-sm"})],2),(0,o._)("div",b,[(0,o.Wm)(S,{modelValue:e.fuzzyDialog,"onUpdate:modelValue":t[0]||(t[0]=t=>e.fuzzyDialog=t),seamless:"","full-width":"",position:"left",persistent:"",onKeydown:(0,a.D2)(e.closeMsDialog,["esc"]),title:e.$t("pages.screen2a.validation"),onOnHide:e.closeMsDialog},{default:(0,o.w5)((()=>[(0,o._)("div",{style:(0,s.j5)({width:e.master_data_popup_width+"px !important"})},[(0,o.Wm)(E)],4)])),_:1},8,["modelValue","onKeydown","title","onOnHide"])])],64)):(0,o.kq)("",!0),(0,o.Wm)(T,{modelValue:e.display_config_dialog,"onUpdate:modelValue":t[1]||(t[1]=t=>e.display_config_dialog=t),position:"top",class:"export-dialog",persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(I)])),_:1},8,["modelValue"]),(0,o.Wm)(T,{modelValue:e.showSelectionPopupDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.showSelectionPopupDialog=t),position:"top",persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{data:e.selection_popup_data},null,8,["data"])])),_:1},8,["modelValue"]),(0,o.Wm)(T,{modelValue:e.showPoMatchWarning,"onUpdate:modelValue":t[4]||(t[4]=t=>e.showPoMatchWarning=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(F,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{icon:"warning",color:"primary"})])),_:1}),(0,o.Wm)(F,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",v,(0,s.zw)(e.$t("pages.messages.WARNING_EXPORT_FROM_PO_MATCH")),1)])),_:1}),(0,o.Wm)(q,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(x,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[V]]),(0,o.wy)((0,o.Wm)(x,{flat:"",label:e.$t("po_matching"),color:"primary",onClick:t[3]||(t[3]=t=>e.navigateToPOMatch())},null,8,["label"]),[[V]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),e.is_sep_view?((0,o.wg)(),(0,o.j4)(R,{key:1})):(0,o.kq)("",!0),(0,o.Wm)(A,{showing:e.script_loading},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{color:"primary",size:"6em"})])),_:1},8,["showing"])],64)}var k=i(30052),C=i.n(k),D=i(10321),O=i(77378),E=i(61959),S=i(78564),I=i(72113),T=i(45401),L=i(29938),M=i(37295),F=i(49405),q=i(7153),Z=i(11185),R=i(28239),W=i(63307),A=i(54268),V=i(98381),z=i(80579),B=i(5029),N=i(91777),P=i(35352),U=i(93426),j=i(75592),H=i(54275),$=i(41891),Q=i(60727),Y=i(57765),J=i(9062),K=i(40386),G=i(27728),X=i(39180),ee=i(81964),te=i(23911),ie=i(71814),oe=i(49629),se=i(20850),ae=i(22102),le=i(83678),ne=i(40925),re=i(49836),de=i(46614),ce=i(12121),ue=i(35627),he=i(56040),me=i(85854),pe=i(70314),_e=i(43783),ge=i(89203),fe=i(67721),we=i(9273),ye=i(91949),be=i(26424),ve=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const xe=document.querySelector.bind(document);let ke=new Map;const Ce=(0,o.aZ)({el:"#app",mixins:[T.Z,S.Z,M.Z,ge.Z,O.Z,V.Z,U.Z,N.Z,W.Z,pe.Z],props:{renderOpenWindoIcon:{type:Boolean,default:!1},isPanelSection:{type:Boolean,default:!1},page:{type:Number,default:1}},emits:["removeOldMapiingsAndDrawNew","showConnectionFromField","setSplitterModel","handleScroll","setApiData","getImageDetails","enableOrDisableExportButton"],components:{ExportDialog:j.Z,autoTesting:B.Z,scriptBtn:Y.Z,Loader:I.Z,Label:J.Z,CheckBox:K.Z,TextInput:X.Z,EnumInput:ee.Z,ExportButton:G.Z,MultiCheckBox:ie.Z,LineItemTable:te.Z,ExtractedTable:le.Z,TableOfCheckboxes:re.Z,AmountButtonsPanel:ne.Z,HorizontalSeparator:he.Z,DocumentClassification:_e.Z,AditionalAmountButtonsPanel:de.Z,masterDataLookup:H.Z,dialogDraggable:fe.Z,PoMatchButton:oe.Z,SaveRulesButton:se.Z,AutoAccountingButton:ae.Z,SelectionPopup:P.Z,InvoiceButtons:ce.Z,QRCodeExtractedFields:ue.Z},watch:{config_saved:{handler:function(e,t){!0===t&&!1===e||(this.display_config_dialog=!1)}},populate_row_to_view:{handler:function(e,t){0!=e&&this.populateMasterDataFields()}}},data(){return{docId:"",imageWidth:0,imageHeight:0,connectionId:"",itemsData:{},conversionFields:[],showPoMatchWarning:(0,E.iH)(!1),highlightFieldsMode:(0,E.iH)(!1),origin_warning_alert:{},showSelectionPopupDialog:!1,selection_popup_data:{},format_warning_dismiss:{},amount_fields_confidence_count:0,debounceScriptCalculateFunc:{},excluded_field_types:["Label","ExportButton","HorizontalSeparator"]}},beforeRouteLeave:function(e,t,i){"function"===typeof this.origin_warning_alert&&this.origin_warning_alert()},mounted:function(){this.isFormBuilderMode=!1,this.formBuilderModel={},this.formBuilderConfigModel={},this.docId=this.$route.params.id,this.is_admin=(0,ye.i5)(),this.isViewSeparateComponent(),this.init(),window.FieldsView=this,document.addEventListener("script_calculate_func",this.scriptCalculateFuncWrapper),document.addEventListener("model_updated",this.updateModelAttribute),document.addEventListener("reload_tables",this.reloadTable),document.addEventListener("keydown",this.keydownEventWrapper),document.addEventListener("move_to_next_field",this.moveToNextFieldEvent),window.addEventListener("resize",this.windowResize),document.body.addEventListener("click",this.mouseClicked,!0),document.addEventListener("selection_popup_closed",this.selectionPopupClosed),document.addEventListener("selection_popup_selected",this.selectionPopupSelected),document.addEventListener("display_fields_errors",this.displayFieldErrors),document.addEventListener("element_click",this.elementClick),document.addEventListener("splitter_changed",this.windowResize)},unmounted:function(){document.removeEventListener("script_calculate_func",this.scriptCalculateFuncWrapper),document.removeEventListener("selection_popup_selected",this.selectionPopupSelected),document.removeEventListener("selection_popup_closed",this.selectionPopupClosed),document.removeEventListener("model_updated",this.updateModelAttribute),document.removeEventListener("reload_tables",this.reloadTable),document.removeEventListener("keydown",this.keydownEventWrapper),document.body.removeEventListener("click",this.mouseClicked,!0),document.removeEventListener("display_fields_errors",this.displayFieldErrors),document.removeEventListener("element_click",this.elementClick),document.removeEventListener("splitter_changed",this.windowResize)},methods:{reloadTable(){this.renderKey++},init(){return ve(this,void 0,void 0,(function*(){if(this.is_sep_view&&this.get_cached_data_id===this.docId&&(yield this.setRecordFromCache()),$.at.includes(this.record.status)&&(this.isReadOnly=!0),yield this.getLayoutTemplateID(),yield this.getFormBuilderLayout(),yield this.populateListsAndValues(),!this.isModelReady())return this.showErrorToast("Document does not have layout. Please contact administrator"),void this.hideLoading();"INVOICE"==this.record.doc_type&&(this.setConversionFields(),this.fieldCaluclations()),this.renderComponent=!0,this.$emit("getImageDetails"),this.setLineItemDetails(),this.debounceScriptCalculateFunc=(0,F.Z)((()=>{this.applyScript()}),1e3),this.$nextTick((function(){this.viewLoadCompleted()}))}))},viewLoadCompleted(){const e=xe(".validation-sticky-area"),t=xe(".not-sticky-area");e&&t&&(t.style.paddingTop=e.clientHeight+20+"px"),this.focusFirstFieldOnGroup();const i=xe("#field_scrolle");i&&i.addEventListener("scroll",this.handleScroll)},prepareMediTable(e){if(this.formBuilderConfigModel[e.name]=Object.assign({},e),!this.record.tables||!this.record.tables[0]){this.record.tables=[];let t={name:e.name,rows:[]};return void(this.formBuilderModel[e.name]=Object.assign({},t))}let t={};this.record.tables.forEach((i=>{(i.name=e.name)&&(t=Object.assign({},i))})),this.formBuilderModel[e.name]=Object.assign({},t)},prepareMultiCheckBox(e,t,i){if(this.formBuilderConfigModel[e.name]=Object.assign({},e),!t)return this.formBuilderModel[i]=[],this.formBuilderModel[i].page="",this.formBuilderModel[i].color="",this.formBuilderModel[i].score="",this.formBuilderModel[i].value="",this.formBuilderModel[i].coords=[],this.formBuilderModel[i].groupList=[],this.formBuilderModel[i].confidence="",void(this.formBuilderModel[i].formatted_value="");t.highlight_field&&(t.highlight_field=!1,this.addFieldToHighlight(i)),this.formBuilderModel[i]=Object.assign({},t)},prepareCheckboxesTable(e,t,i){e.tableBodyRows.forEach(((e,o)=>{e.forEach(((e,o)=>{let s=e.name;i.hasOwnProperty(s)&&Object.assign(e,this.cleanLayoutSettings(i[s])),this.prepareModel(e,t[s],s)}))}))},makeModel(){return this.fieldListToHighlight=[],new Promise(((e,t)=>{let i={};if(void 0!==this.record){this.record.fields.forEach(((e,t)=>{i[e.name]=e,this.fieldsNotDisplayed[e.name]=e}));let e=this.getUpdatedFieldSettings(),t="";for(const[o,s]of this.formLayout.entries()){s.short_cut_key_2&&(t=s.short_cut_key_1+s.short_cut_key_2,this.groupShortCutMap.set(t,o));for(let t of s.rows){let o=t.hasOwnProperty("field_name")?t.field_name:t.name;t.fieldType!==me.oh.TABLE_OF_CHECKBOXES?t.fieldType!==me.oh.EXTRACTED_TABLE?t.fieldType!==me.oh.MULTI_CHECK_BOX?(e.hasOwnProperty(o)&&(t=Object.assign(t,this.cleanLayoutSettings(e[o]))),this.prepareModel(t,i[o],o)):this.prepareMultiCheckBox(t,i[o],o):this.prepareMediTable(t):this.prepareCheckboxesTable(t,i,e)}}"INVOICE"==this.record.doc_type&&(Object.keys(this.fieldsNotDisplayed).length>=0&&this.record.fields.forEach(((e,t)=>{this.fieldsNotDisplayed.hasOwnProperty(e.name)&&(this.record.fields[t].is_valid=!0,delete this.fieldsNotDisplayed[e.name])})),this.prepareLayoutForTemplate(),this.handleConfidenceAlert(),this.$forceUpdate())}this.prepareLayoutData(),e("done"),this.highlightFieldsMode&&setTimeout((()=>{this.highlightFields()}),500)}))},prepareModel(e,t,i){t?this.setColor(t,e):t=this.createEmptyField(i,e.input_type);let o=e.input_type?e.input_type:e.fieldType;if(o){if("INVOICE"==this.record.doc_type&&this.countAmountFieldsConfidence(t),this.cleanCheckboxValue(t,o.toLowerCase()),e.fuzzy_field&&null!=e.fuzzy_field){let t=e.fuzzy_field.split(":");const o=t[1].toLowerCase();if(ke.has(t[0]))ke.get(t[0]).set(i,o);else{let e=new Map;e.set(i,o),ke.set(t[0],e)}e.fuzzy_name=t[0]}e.hasOwnProperty("tabIndex")&&!(0,L.Jp)(e.tabIndex)||(e.tabIndex=0),t.highlight_field&&(t.highlight_field=!1,this.addFieldToHighlight(i)),this.formBuilderModel[i]=[],this.formBuilderConfigModel[i]=[],this.formBuilderModel[i]=Object.assign({},t),this.formBuilderConfigModel[i]=Object.assign({},e),this.setTabIndexInList(e),this.handleListofValues(i),this.broadcastFieldChange(i),"INVOICE"==this.record.doc_type&&!1===e.is_hidden&&this.fieldsNotDisplayed.hasOwnProperty(i)&&delete this.fieldsNotDisplayed[i]}},handleListofValues(e){this.formBuilderConfigModel[e].hasOwnProperty("list_of_values")&&this.addNameToLovList(this.formBuilderConfigModel[e].list_of_values)},addFieldToHighlight(e){this.fieldListToHighlight.push(e)},highlightFields(){var e;this.highlightFieldsMode=!1;for(const t of this.fieldListToHighlight){let i=xe("#"+t);(null===(e=i.parentElement)||void 0===e?void 0:e.classList.contains("q-td"))&&(i=i.parentElement),i&&(i.classList.add("light-yellow-with-effect"),setTimeout((()=>{i.classList.remove("light-yellow-with-effect")}),4e3))}},getUpdatedFieldSettings(){let e={},t=JSON.parse(JSON.stringify(this.record.layout.groups));return t.forEach(((t,i)=>{t.rows.forEach(((t,i)=>{t.forEach(((t,i)=>{let o=t.field_name;e[o]=t}))}))})),e},cleanLayoutSettings(e){return delete e.name,delete e.field,delete e.field_name,delete e.field_type,delete e.title,delete e.translation_key,e},setTabIndexInList(e){if(this.excluded_field_types.includes(e.fieldType)||1==e.is_readonly||1==e.is_hidden||1==e.isDisabled)return;let t=e.field_name||e.name;const i=Number(e.tabIndex);this.fields_tabindex_mapping.hasOwnProperty(i)||(this.fields_tabindex_mapping[i]=[]),this.fields_tabindex_mapping[i].push(t)},cleanCheckboxValue(e,t){"checkbox"!=t&&"CheckBox"!=e.fieldType||("true"==e.formatted_value||1==e.formatted_value||"Y"==e.formatted_value?e.formatted_value=!0:e.formatted_value=!1)},setColor(e,t){e.hasOwnProperty("is_valid")?"MD"==e.extraction_method?t.color="extraction_method-border-left":e.is_valid?t.color="success-border-left":t.color="error-border-left":t.color=""},setConversionFields(){this.conversionFields=this.getConversionFields()},getField(e){let t={};if(void 0!==this.record)for(const i in this.record.fields){let o=this.record.fields[i];if(o.name==e){t=o;break}}return t},createEmptyField(e,t){let i="checkbox"!=t&&"";return{confidence:0,name:e,field_name:e,value:i,formatted_value:i,content:i}},saveMediImageFields(){let e={};if(q.Z.has("table_data")&&null!=q.Z.getItem("table_data")&&""!=q.Z.getItem("table_data")){let t=q.Z.getItem("table_data");e=JSON.parse(t)}else e={columns:[],table_areas:[]}},prepareTableJson(){Object.keys(this.formBuilderModel).forEach((e=>{this.formBuilderConfigModel[e].fieldType===me.oh.EXTRACTED_TABLE?(this.record["tables"]=[],this.record.tables.push(Object.assign({},this.formBuilderModel[e]))):this.formBuilderConfigModel[e].fieldType===me.oh.MULTI_CHECK_BOX&&(this.record.fields.push(Object.assign({},this.formBuilderModel[e])),this.record.fields[this.record.fields.length-1].name=e)}))},saveData(){return ve(this,void 0,void 0,(function*(){try{if(this.isReadOnly)return;this.prepareTableJson(),this.saveMediImageFields(),this.showLoading();const e=yield this.saveDocument(this.docId);if(!1===e.success)return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void this.showErrorToast(e.message);this.setDataToCache(),yield this.makeModel();const t=new CustomEvent("prepare_rows",{});document.dispatchEvent(t),this.$forceUpdate(),this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(e){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},exportData(){return ve(this,void 0,void 0,(function*(){if(!this.isReadOnly)try{const e=yield this.confirmExportConfiguration();if(!e)return void(this.display_config_dialog=!0);yield this.callExportApi()}catch(e){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},confirmExportConfiguration(){return ve(this,void 0,void 0,(function*(){let e,t=new FormData;t.append("doc_type",this.record.doc_type);let i=yield(0,A.O_)();const o=yield C().post(A.hi.export_configuration_existence,t,{headers:{Authorization:i}});return e=o.data.valid,e}))},validateRequiredFieldRules(){let e=!0;return this.record.hasOwnProperty("required_field_pairs")&&Array.isArray(this.record.required_field_pairs)&&0!=this.record.required_field_pairs.length?(Array.from(this.record.required_field_pairs).forEach((t=>{let i=!1;for(let e of t)this.formBuilderModel[e].formatted_value&&(i=!0);if(!i){e=!1;const i=this.getRequirdFieldsErrorMessage(t);for(let e of t)this.formBuilderModel[e].input_error=i}})),e):e},getRequirdFieldsErrorMessage(e){const t=[];for(let o of e)t.push(this.getLabelForFormBuilder(this.formBuilderConfigModel[o],"form_builder."));let i=this.$t("atleast_fill_one_field");return i=i.replace("#",t.join(", ")),i},callExportApi(){return ve(this,void 0,void 0,(function*(){let e;try{if(yield this.validateExportData())return;if(this.isPoSettingActivate())return void(this.showPoMatchWarning=!0);let t=this.record;this.showLoading(),t.hasOwnProperty("table_data_copy")&&delete t["table_data_copy"];let i=new FormData;i.append("data",JSON.stringify(t));let o=yield(0,A.O_)();if(e=yield C().post(A.hi.validate_and_export+this.docId,i,{headers:{Authorization:o}}),!0===e.data.success)return yield this.dashboardFiltersAfterExport(),void this.routeToDashboard();this.showErrorToast(e.data.message),this.record=e.data.data,this.setDocDataVariables(),yield this.handleExportError()}catch(t){const e=we.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.hideLoading()}}))},navigateToPOMatch(){return ve(this,void 0,void 0,(function*(){if(!this.validateLineItemTable(this.record.tables,this.record.doc_type))return;const e=yield this.saveAndValidate();if(!1===e.success){const t=new CustomEvent("display_fields_errors",{});return document.dispatchEvent(t),void this.showErrorToast(e.message)}this.$router.push("/po-matching-v3/"+this.record.doc_id)}))},setLineItemDetails(){let e="";"XML_INVOICE"!=this.record.doc_type&&(e=(0,R.$8)("TBL_EXT_VERSION")),this.record.tables&&0!=this.record.tables.length&&!(0,L.fg)(this.record.tables)?this.record.tables[0].hasOwnProperty("version")&&"v3"==this.record.tables[0].version&&(this.tb_version="v3"):void 0!==e&&""!=e&&"Version3"==e&&(this.tb_version="v3")},routeToDashboard(){this.$router.push("/dashboard")},displayFieldErrors(){this.handleExportError()},validateExportData(){return ve(this,void 0,void 0,(function*(){this.handleScroll(),this.updateFieldErrors();const e=this.setFieldErrors(!0),t=yield this.checkValidationError(),i=!this.validateRequiredFieldRules();return(e||t||i)&&this.focusFirstErrorField(),e||t||i}))},handleExportError(){return ve(this,void 0,void 0,(function*(){this.setDataToCache(),yield this.makeModel();const e=this.setFieldErrors(!1);e&&this.focusFirstErrorField()}))},updateFieldErrors(){for(const[e,t]of Object.entries(this.formBuilderModel))this.formBuilderConfigModel[e].is_required&&t.formatted_value&&"REQUIRED"===t.validation_code&&(t.validation_code="")},setFieldErrors(e){let t=!1;for(const[i,o]of Object.entries(this.formBuilderModel)){if(this.formBuilderModel[i].input_error="",this.formBuilderConfigModel[i].is_required&&!o.formatted_value){t=!0,this.formBuilderModel[i].input_error=this.$t("field_required");continue}if(o.is_valid)continue;if(!o.validation_code||e&&$.s1.includes(o.validation_code))continue;let s=this.formBuilderModel[i].validation_message;s||(s=this.$t("pages.api_user_messages."+o.validation_code)),t=!0,this.formBuilderModel[i].input_error=s}return t},focusFirstErrorField(){let e="";for(const[t,i]of Object.entries(this.formBuilderModel))if(i.input_error){e=t;break}this.focusOnField(e)},checkValidationError(){return ve(this,void 0,void 0,(function*(){let e=!1;for(const[t,i]of Object.entries(this.formBuilderModel)){if("TextInput"!==this.formBuilderConfigModel[t].fieldType)continue;let o=i.formatted_value;if(!o||""==o)continue;const s=this.formBuilderConfigModel[t];let a=!0,l="";({is_valid:a,input_error:l}=yield be.b.init(i,s)),a||(this.formBuilderModel[t].formatted_value="",this.formBuilderModel[t].input_error=l,e=!0)}return e}))},isModelReady(){return 0!==(0,L.v7)(this.formBuilderModel)},getLowerConfidence(e){if(e.confidence&&e.score){let t=e.confidence<1?(100*e.confidence.toFixed(2)).toFixed(0):e.confidence.toFixed(2),i=e.score<=1?(100*e.score.toFixed(2)).toFixed(0):e.score.toFixed(2);return t=Number(t),i=Math.floor(Number(i)),t<i?t:i}return e.confidence?e.confidence<1?(100*e.confidence.toFixed(2)).toFixed(0):e.confidence.toFixed(2):null},openComponentInSeparateWindow(){this.setDataToCache();let e=this.$router.resolve({path:"/simple_fields_comp/"+this.docId});window.open(e.href,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,left=500,width=1500,height=1000")},isViewSeparateComponent(){this.$route.fullPath.match(/simple_fields_comp/g)&&(this.is_sep_view=!0)},updateModelAttribute(e){e.detail&&e.detail.field_name&&this.updateImportJson(e.detail.field_name)},inputValueChanges(e){this.updateLocalModel(e),this.updateImportJson(e),this.handleScriptCalculatedFields(e),this.fieldCaluclations(),this.broadcastFieldChange(e)},updateLocalModel(e){this.formBuilderModel[e].value=this.formBuilderModel[e].formatted_value},broadcastFieldChange(e){const t=new CustomEvent("field_value_updated",{detail:{field_name:e}});document.dispatchEvent(t)},masterDataSearchByField(e){try{const t=e.name,i=this.formBuilderConfigModel[t];if(!i)return;let o=i.fuzzy_field.split(":")||{};const s=(0,Z.Z)();this.ms_advance_filters[s]={fuzzy_field:i.fuzzy_field,search_text:this.formBuilderModel[t].formatted_value,field_name:t,primary:!0},this.master_lookup_type=o[0],this.ms_view_model=this.formBuilderConfigModel,this.master_data_fields_map=ke,this.master_data_popup_width=this.calculateWidthForMSPopuup();for(let[e,a]of Object.entries(this.formBuilderConfigModel))if(a.hasOwnProperty("fuzzy_primary_field")&&!0===a.fuzzy_primary_field&&t!==a.name){const e=(0,Z.Z)();this.ms_advance_filters[e]={fuzzy_field:a.fuzzy_field,search_text:this.formBuilderModel[a.name].formatted_value,field_name:a.name,primary:!1}}this.fuzzyDialog=!0}catch(t){}},closeMsDialog(){this.fuzzyDialog=!1,this.ms_advance_filters={}},calculateWidthForMSPopuup(){let e="700";const t=document.querySelector(".field_validation");if(!t)return e;const i=document.querySelector("#field_scrolle");if(!i)return e;const o=i.offsetWidth;return o<=0?e:String(o)},windowResize(){this.fuzzyDialog&&(this.master_data_popup_width=this.calculateWidthForMSPopuup())},handleSingleSelection(e){let t=["stuck_checkbox","paar_checkbox","hose_checkbox"];t.includes(e)&&t.forEach(((t,i)=>{t!==e&&(this.formBuilderModel[t].formatted_value=!1,this.formBuilderModel[t].value=!1)}))},showConnectionFromField(e){me.P8.includes(this.formBuilderConfigModel[e].fieldType)&&(this.connectionId=e,this.$emit("showConnectionFromField",e))},exportWithSonderWunsch(){this.record["export_parameters"]={doc_export_status:"export_with_sonderwunsche",validate:!1},this.exportData()},clickExport(){this.record["export_parameters"]={doc_export_status:"export",validate:!1},this.exportData()},elementClick(e){this.htmlElementClick(e.detail)},htmlElementClick(e){if(this.formBuilderConfigModel[e].fieldType===me.oh.EXPORT_BUTTON)return void this.handleButtons(e);const t=xe("#"+e);t&&t.closest(".validation-sticky-area")?this.handleScroll():this.showConnectionFromField(e)},handleButtons(e){this.formBuilderConfigModel[e].exportType!=$.tl.reject?this.formBuilderConfigModel[e].exportType!=$.tl.save?this.formBuilderConfigModel[e].exportType!=$.tl.po_match?this.formBuilderConfigModel[e].exportType!=$.tl.save_rules&&(this.record["export_parameters"]={doc_export_status:this.formBuilderConfigModel[e].exportType,validate:!1},this.exportData()):this.$router.push("/po-matching-v3/"+this.record.doc_id):this.saveData():this.rejectDocument()},poMatchButtonClicked(){this.tb_version},updateFieldInFormBuilder(e,t){let i=e.querySelector("."+this.connectionId+"_input");if(!i)return;const o=new CustomEvent("update_field_value",{detail:{input_class:this.connectionId+"_input",val:t.formatted_value}});i.dispatchEvent(o)},updateFieldData(e){let t=xe("#"+this.connectionId);if(t.setAttribute("pageno",this.page.toString()),"INVOICE"==this.record.doc_type&&e.extracted_value&&0!==Object.keys(e.extracted_value).length)return void this.openSelectionPopup(JSON.parse(JSON.stringify(e)));t&&this.updateFieldInFormBuilder(t,e);const i=this.getInputType(t);this.formBuilderModel[this.connectionId].value=e.value,this.formBuilderModel[this.connectionId].formatted_value=e.formatted_value,this.formBuilderModel[this.connectionId].content=e.text,this.formBuilderModel[this.connectionId].api_save=!0,this.formBuilderModel[this.connectionId].score_description="",this.formBuilderModel[this.connectionId].coords=e.coords,e&&!0===e.multi_line?this.formBuilderModel[this.connectionId].multi_line=!0:this.formBuilderModel[this.connectionId].multi_line=!1,"checkbox"===i&&(this.formBuilderModel[this.connectionId].value=!1,this.formBuilderModel[this.connectionId].formatted_value=!1,this.formBuilderModel[this.connectionId].content=!1,e.formatted_value&&"x"===e.formatted_value.toLowerCase()&&(this.handleSingleSelection(this.connectionId),this.formBuilderModel[this.connectionId].value=!0,this.formBuilderModel[this.connectionId].content=!0,this.formBuilderModel[this.connectionId].formatted_value=!0)),this.valueChangesOnRedraw(this.connectionId,e.coords,this.page),this.$emit("enableOrDisableExportButton"),this.$forceUpdate()},valueChangesOnRedraw(e,t,i){let o=["stuck_checkbox","paar_checkbox","hose_checkbox"],s=[];o.includes(e)?s=o:s.push(e),t&&i?this.prepareImportJson(s,t,i,"AI"):this.prepareImportJson(s),this.$emit("removeOldMapiingsAndDrawNew",e),this.$forceUpdate()},prepareImportJson(e,t,i,o){e.forEach((e=>{this.updateImportJson(e,t,i,o)}))},updateImportJson(e,t,i,o=""){let s=!1;if(this.record.fields.forEach(((a,l)=>ve(this,void 0,void 0,(function*(){if(a.name===e){s=!0,a.hasOwnProperty("original")||(a["original"]=Object.assign({},a)),a.hasOwnProperty("original_value")||(a["original_value"]=a.value),(t||null===t)&&(a.coords=t),i&&(a.page=i),o&&(a.extraction_method=o),a.is_valid=!0,a.is_validated=!0;let l=this.formBuilderModel[e];return a.formatted_value=l.formatted_value,a.value=l.value?l.value:l.formatted_value,a.content=l.content,l.hasOwnProperty("api_save")&&l.api_save||(a.value=l.formatted_value),""==a.value||l.hasOwnProperty("api_save")&&l.api_save||!this.conversionFields.includes(l.name)||"en_US"==this.amount_format_locale||(a.value=yield this.convertValueAccordingToLocale(a.value,this.amount_format_locale,"en_US"),a.float_value=+a.value),a.color="success-border-left","MD"==a.extraction_method&&(a.color="extraction_method-border-left"),!a.is_required||""!=a.formatted_value&&null!=a.formatted_value||(a.color="error-border-left"),void(this.formBuilderModel[this.connectionId]&&this.formBuilderModel[this.connectionId].hasOwnProperty("multi_line")&&!0===this.formBuilderModel[this.connectionId].multi_line?a.multi_line=!0:a.multi_line=!1)}})))),!s){this.record.fields.push({});const s=this.record.fields.length-1;this.record.fields[s].name=e,this.record.fields[s].content=this.formBuilderModel[e].content,this.record.fields[s].formatted_value=this.formBuilderModel[e].formatted_value,this.record.fields[s].value=this.formBuilderModel[e].value,this.record.fields[s].original_value="",this.record.fields[s].validation_code="",this.record.fields[s].extraction_method=o,this.record.fields[s].is_validated=!0,this.record.fields[s].is_valid=!0,this.record.fields[s].color="success-border-left",!0===this.formBuilderModel[this.connectionId].multi_line?this.record.fields[s].multi_line=!0:this.record.fields[s].multi_line=!1,t&&(this.record.fields[s].coords=t),i&&(this.record.fields[s].page=i)}},initTempFieldDelete(){this.record.fields.forEach(((e,t)=>{if(e.name===this.connectionId){const e={color:null,coords:null,confidence:0,validation_code:null,value:"",formatted_value:"",content:"",page:null};this.formBuilderModel[this.connectionId]=Object.assign(this.formBuilderModel[this.connectionId],e),this.record.fields[t]=Object.assign(this.record.fields[t],e)}})),this.fieldCaluclations();let e=xe("#"+this.connectionId);e&&e.setAttribute("pageno","")},handleScroll(){this.$emit("handleScroll")},getInputType(e){return e.getAttribute("child_type")},onInputValueChanges(e,t){"delete_rule"!==t?("calculated"===t&&this.updateImportJson(e,null,this.page,"calculated"),this.removeSelectedAreaOnImage(e),this.inputValueChanges(e),this.startTimer()):this.deleteRule(e)},removeSelectedAreaOnImage(e){if(this.isConfirmationBoxDisable){const t=new CustomEvent("removeSelectedAreaOnImage",{});document.dispatchEvent(t),this.connectionId=e,this.initTempFieldDelete()}},getLayoutTemplateID(){return ve(this,void 0,void 0,(function*(){try{let e={};this.record.doc_type&&(e["doc_type_key"]=this.record.doc_type),this.record.sub_doc_type&&(e["sub_doc_type_key"]=this.record.sub_doc_type);const t=yield z.l_.getLayoutTemplates(e);if(!t||t.hasOwnProperty("success")&&!1===t.success)throw t;if(!t.data||!Array.isArray(t.data)||0===t.data.length||!t.data[0].hasOwnProperty("id"))throw{message:"Layout Template ID Not Found"};this.layout_template_id=t.data[0].id}catch(e){const t=we.w.getErrorMessage(e);this.showErrorToast(t)}}))},getFormBuilderLayout(){return ve(this,void 0,void 0,(function*(){let e;this.formLayout=[];try{if(!this.layout_template_id)return;e=yield z.l_.getDocumentLayoutTemplateById(this.layout_template_id);let t=JSON.parse(e.layout_json);t&&(this.formLayout=t.hasOwnProperty("layout")?t.layout:[],this.formLayout&&(yield this.makeModel()),this.isExtenedPanel=!!t.isExtenedPanelEnabled,this.setGeneralSettings(t),this.$emit("setSplitterModel",this.isExtenedPanel))}catch(t){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},updateModel(e){},isFieldScriptCalculated(e){return!(!this.formBuilderConfigModel[e].hasOwnProperty("run_script_on_change")||!0!==this.formBuilderConfigModel[e].run_script_on_change)},handleScriptCalculatedFields(e){try{if(!this.isFieldScriptCalculated(e))return;this.record.apply_script_triggered_on_field=e,this.applyScript()}catch(t){}},scriptCalculateFuncWrapper(e){let t="",i="";e.detail.columnName&&(i=e.detail.columnName),e.detail.rowId&&(t=e.detail.rowId),this.record.apply_script_triggered_on_table_row=t,this.record.apply_script_triggered_on_table_field=i,this.debounceScriptCalculateFunc()},applyScript(){return ve(this,void 0,void 0,(function*(){try{this.auto_saved_done=!1,this.auto_saving=!0;const e=yield this.applyScriptOnDocument();if(!e)return;this.setDataToCache(),this.highlightFieldsMode=!0,yield this.makeModel();const t=new CustomEvent("prepare_rows",{});document.dispatchEvent(t)}catch(e){}finally{this.auto_saving=!1,this.auto_saved_done=!0,setTimeout((()=>{this.auto_saved_done=!1}),1e4)}}))},rejectDocument(){return ve(this,void 0,void 0,(function*(){try{if(this.isReadOnly)return;this.showLoading(),yield this.saveData();const e={request_type:"reject"},t=yield z.U0.rejectDocument(e,this.docId);if(!1===t.success)throw t.message;this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),!0===t.success&&this.routeToDashboard()}catch(e){}finally{this.hideLoading()}}))},populateMasterDataFields(){return ve(this,void 0,void 0,(function*(){try{this.closeMsDialog(),this.showLoading();let e=JSON.parse(this.master_data_row);const t=[];for(const[s,a]of ke.entries())for(const[i,o]of a.entries())e.hasOwnProperty(o)&&this.conversionFields.includes(i)&&null!=e[o]&&t.push({key:e[o],value:e[o]});let i=[];t.length>0&&(i=yield this.formatMultiValues(t,"en_US",this.amount_format_locale));const o="MD";ke.forEach(((t,s)=>{t.forEach(((t,s)=>{if(e.hasOwnProperty(t)){let a=e[t];this.conversionFields.includes(s)&&null!=e[t]&&(a=this.searchValueByKey(a,i)),this.formBuilderModel[s].formatted_value=a,this.formBuilderModel[s].value=e[t],this.formBuilderModel[s].color="extraction_method-border-left",this.formBuilderModel[s].extraction_method=o,!this.isCurrentFieldPrimary(s)&&this.isContentChanged(this.formBuilderModel[s].content,e[t])&&(this.formBuilderModel[s].content=e[t],this.formBuilderModel[s].confidence=0,this.formBuilderModel[s].validation_code=null,this.formBuilderModel[s].coords=null),this.updateImportJson(s,this.formBuilderModel[s].coords,this.page,o)}}))})),this.resetMasterDataStore(),this.refreshCanvas(),setTimeout((()=>{this.$emit("enableOrDisableExportButton")}),5)}catch(e){}finally{this.hideLoading()}}))},jumpToTable(e){e.preventDefault();for(const[t,i]of this.formLayout.entries())if(this.isGroupTable(t)){this.focusOnTableGroup(t);break}},triggerTableAddRow(e){for(const[t,i]of this.formLayout.entries()){if(!this.isGroupTable(t))continue;const e=this.formLayout[t].rows[0];let i=document.querySelector("."+e.name);if(!i)return;const o=new CustomEvent("trigger_add_row",{detail:{}});i.dispatchEvent(o);break}e.preventDefault()},findGroupShortcutkey(e){const t=e.key,i=["shift","alt"],o=i.find((e=>{const i=e+t;return this.groupShortCutMap.has(i)}));return o},focusOnGroupFromMap(e){if(0===this.groupShortCutMap.size)return;const t=this.findGroupShortcutkey(e);if(!t)return;const i=t+e.key,o=this.groupShortCutMap.get(i);null!==o&&void 0!==o&&""!==o&&(e.preventDefault(),this.focusGroup(o,e))},isGroupTable(e){return!!this.formLayout[e].rows[0]&&"ExtractedTable"===this.formLayout[e].rows[0].fieldType},focusGroup(e,t){if(t.preventDefault(),0===this.formLayout[e].rows.length)return;if(this.isGroupTable(e))return void this.focusOnTableGroup(e);const i=this.getFirstFieldOfGroup(e);i&&this.focusOnField(i)},getFirstFieldOfGroup(e){let t="",i=["CheckBox","TableOfCheckboxes"];i=i.concat(this.excluded_field_types);const o=this.formLayout[e].rows.find((e=>!i.includes(e.fieldType)));return o?(t=o.name,o.hasOwnProperty("field_name")&&(t=o.field_name),t||""):t},focusOnTableGroup(e){const t=this.formLayout[e].rows[0];this.focusOnTable(t.name)},validateAllSectionFields(e){const t=this.formLayout[e];if(t.hasOwnProperty("rows"))for(const i of t.rows)this.validateField(i.field_name)},selectFieldFromNextGroup(e){let t=e.target.closest("[data-group-id]");if(t||(t=document.querySelector("[data-group-id]")),!t)return;const i=t.getAttribute("data-group-id"),o=Number(i)+1;this.focusFirstFieldOnGroup(o)},validateAndSelectNextInvalidField(e){let t=!1,i="";for(const o of this.formLayout)for(const s of o.rows){let o=s.field_name,a=this.formBuilderModel[o];if(a)if(!0===t){if(1==s.is_readonly||1==s.is_hidden)continue;if(0==a.is_valid||a.calculation_formula)return this.focusOnField(o),void(t=!1)}else if(o===e){t=!0,this.validateField(o);const e=xe("#"+o);if(i=this.getComponentType(o),""==i)e.blur();else{const t=e.querySelector(i);t.blur()}}}},focusOnField(e,t=!0,i=!1){const o=xe("#"+e);if(!o)return;const s=this.getComponentType(e);if(""==s)return o.focus(),void(t&&this.startTimer());const a=o.querySelector(s);a&&(a.click(),a.focus(),this.scrollInToViewCenter(a),i&&a.select(),t&&this.startTimer())},selectNextField(e){let t=!1,i="";for(const o of this.formLayout)for(const s of o.rows){let o=s.field_name,a=this.formBuilderModel[o];if(a){if(!0===t){if(1==s.is_readonly||1==s.is_hidden)continue;return this.focusOnField(o),void(t=!1)}if(o===e){const e=xe("#"+o);i=this.getComponentType(o);const s=e.querySelector(i);s.blur(),this.validateField(o),t=!0}}}},getNextTabIndex(e){let t=!1,i=0;for(const[s,a]of Object.entries(this.fields_tabindex_mapping)){const o=Number(s);if(!0===t){i=o;break}e===o&&(t=!0)}const o=this.fields_tabindex_mapping[i];return o&&Array.isArray(o)?i:this.getNextTabIndex(i)},isFieldAvailableToFocus(e){const t=xe("#"+e);return!!t},getNextTabIndexField(e,t){try{const i=this.fields_tabindex_mapping[e],o=i.indexOf(t);if(o===i.length-1){const t=this.getNextTabIndex(e),i=String(this.fields_tabindex_mapping[t][0]),o=this.isFieldAvailableToFocus(i);return o?i:this.getNextTabIndexField(t,i)}const s=o+1,a=String(i[s]),l=this.isFieldAvailableToFocus(a);return l?a:this.getNextTabIndexField(e,a)}catch(i){return""}},findNextField(e){this.validateAndSelectNextInvalidField(e),setTimeout((()=>{this.$emit("enableOrDisableExportButton")}),5)},focusOnTable(e){let t=document.querySelector("."+e);if(!t)return;const i=new CustomEvent("focus_first_row_column",{detail:{}});t.dispatchEvent(i)},moveToNextFieldEvent(e){e.detail&&this.findNextField(e.detail)},getComponentType(e){let t="";const i=xe("#"+e);return i?(t=this.getInputType(i),"checkbox"==t||""==t?"":t):""},validateField(e){if(!this.formBuilderModel[e])return;let t=this.formBuilderConfigModel[e];this.formBuilderModel[e].color="success-border-left",this.formBuilderModel[e].is_valid=!0,this.formBuilderModel[e].validation_code=null,this.formBuilderModel[e].validation_message=null,this.formBuilderModel[e].input_error="",this.formBuilderModel[e].is_validated=!0,this.setColor(this.formBuilderModel[e],t),this.updateImportJson(e)},startTimer(){const e=new CustomEvent("start_time_spent_on_validation",{});document.dispatchEvent(e)},focusFirstFieldOnGroup(e=0){return ve(this,void 0,void 0,(function*(){yield this.$nextTick();const t=this.findGroupToFocus(e),i=this.getFirstFieldOfGroup(String(t));i&&this.focusOnField(i,!1)}))},findGroupToFocus(e){if(0===this.formLayout[String(e)].rows.length)return this.findGroupToFocus(e+1);if(this.formLayout[String(e)].is_stcky_group)return this.findGroupToFocus(e+1);const t=this.getFirstFieldOfGroup(String(e));return t?e:this.findGroupToFocus(e+1)},keydownEventWrapper(e){this.open_editor||this.keyDownEvent(e)},getConfidence(e){return e?e<1?(100*+e.toFixed(2)).toFixed(0):+e.toFixed(2):""},fieldCaluclations(){return ve(this,void 0,void 0,(function*(){for(const e of this.formLayout)for(const t of e.rows)t.calculation_formula&&(yield this.performCalulations(t.field_name,t.calculation_formula,this.amount_format_locale,t.field_type),this.updateImportJson(t.field_name))}))},countAmountFieldsConfidence(e){let t=["net_amount","tax_amount","tax_rate","net_amount_2","tax_amount_2","tax_rate_2","net_amount_3","tax_amount_3","tax_rate_3","total_amount","total_amount","total_net_amount","total_tax_amount"];t.includes(e.name)&&1==+e.confidence&&this.amount_fields_confidence_count++},addAdditionalAmountPanelInRows(){let e=!1,t={},i={};const o=[{selected:!1,is_hidden:!1,name:"additional_amount",icon:"AdditionalAmount.svg",field:"additional_amount",label:"additional_amount"},{selected:!1,is_hidden:!1,name:"additional_amount_2",icon:"AdditionalAmount.svg",field:"additional_amount_2",label:"additional_amount_2"},{selected:!1,is_hidden:!1,name:"additional_amount_3",icon:"AdditionalAmount.svg",field:"additional_amount_3",label:"additional_amount_3"},{selected:!1,is_hidden:!1,name:"negative_amount",icon:"NegativeAmount.svg",field:"negative_amount",label:"negative_amount"},{selected:!1,is_hidden:!1,name:"negative_amount_2",icon:"NegativeAmount.svg",field:"negative_amount_2",label:"negative_amount_2"},{selected:!1,is_hidden:!1,name:"negative_amount_3",icon:"NegativeAmount.svg",field:"negative_amount_3",label:"negative_amount_3"}];for(const[s,a]of this.formLayout.entries())if("tax_details"===a.name)for(const[l,n]of a.rows.entries()){const s=n.field_name;"fields_group"==s&&(e=!0),"additional_amount"!=s||e||(a.rows.splice(l,0,{field_name:"fields_group",def:o}),e=!0);for(const[e,a]of o.entries()){let e=a.field;e===s&&(a.label=this.displayFieldLabelFor2a(n),n.is_hidden?i[a.name]=s:this.formBuilderModel[s].value?(n.visibile=!0,t[a.name]=!0,this.formBuilderConfigModel[s].visibile=!0):(n.visibile=!1,this.formBuilderConfigModel[s].visibile=!1))}}for(const[s,a]of this.formLayout.entries())if("tax_details"===a.name)for(const[e,o]of a.rows.entries()){const e=o.field_name;if("fields_group"==e)for(const[s,a]of o.def.entries())!0===t[a.name]?a.selected=!0:a.selected=!1,i[a.name]||(a.is_hidden=!0)}},handleConfidenceAlert(){this.amount_fields_confidence_count>1&&(this.origin_warning_alert=this.showWarningAlert(this.$t("selection_popup_origin_warning")))},toggleGroupFieldsVisibility(e,t,i,o,s){if(!this.isButtonToggleDisable(this.record.status)){for(const a of this.formLayout)if(a.name==s)for(const s of a.rows){let a=s.field_name;a==t.field_name&&(s.def[i].selected=!o),e===a&&(s.visibile=!o)}this.prepareLayoutForTemplate()}},handleTabGroupLabels(e,t){let i=!1,o={};if(0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype||"tax_details"!==t)return o;for(let s of e.buttons)if("full"==s.name&&!0===s.selected){i=!0;break}if(i)return o;for(let s of e.buttons)if("full"!==s.name&&!0===s.selected){o=s.alt_translation_keys;break}return o},openSelectionPopup(e){this.selection_popup_data["title"]=this.$t("selection_popup_heading"),this.selection_popup_data["data"]=e,this.selection_popup_data["value_1"]={key:"suggested",value:e.formatted_value,disable:!e.value||""==e.value,label:this.$t("suggested_value")};let t=e.extracted_value;this.selection_popup_data["value_2"]={key:"extracted",value:t.formatted_value,disable:!t.value||""==t.value,message:t.message&&""!=t.message?t.message:"",label:this.$t("extracted_value")},this.showSelectionPopupDialog=!0},selectionPopupSelected(e){if(!e.detail||!e.detail.data||!e.detail.data.data||!e.detail.selected)return;this.showSelectionPopupDialog=!1;let t=e.detail.data.data;t.coords;"extracted"==e.detail.selected&&(t=t.extracted_value),this.formBuilderModel[this.connectionId].value=t.value,this.formBuilderModel[this.connectionId].formatted_value=t.formatted_value,this.formBuilderModel[this.connectionId].content=t.text,this.formBuilderModel[this.connectionId].api_save=!0,this.inputValueChanges(this.connectionId),this.$forceUpdate(),this.hideLoading()},selectionPopupClosed(){this.showSelectionPopupDialog=!1},deleteRule(e){this.record.hasOwnProperty("clear_rules_fields_for_user")||(this.record.clear_rules_fields_for_user=[]),this.record.fields.forEach(((t,i)=>{t.name===e&&(this.record.clear_rules_fields_for_user.push(e),this.record.fields.splice(i,1))})),this.formBuilderConfigModel[e].color=null,this.formBuilderModel[e]=Object.assign({},{deleted:!0,color:null,value:"",confidence:0,formatted_value:"",content:null,validation_code:null,coords:null}),this.refreshCanvas(),this.handleScroll(),setTimeout((()=>{this.$emit("enableOrDisableExportButton")}),5)},refreshCanvas(){const e=new CustomEvent("refresh_canvas",{});document.dispatchEvent(e)}},setup(){let e=[],t=new Map;const i=(0,Q.Fl)(),{clearStateForExportDialog:o}=i,{display_config_dialog:s,config_saved:a}=(0,D.Jk)(i),l=(0,Q.nc)(),{formBuilderModel:n,formLayout:r,isExtenedPanel:d,isFormBuilderMode:c,formBuilderConfigModel:u,renderComponent:h,docType:m,fieldListToHighlight:p}=(0,D.Jk)(l),{getElementWidth:_,prepareLayoutData:g,performCalulations:f,isFieldHidden:w}=l,y=(0,Q.H_)(),{record:b,doc_loaded:v,layout_template_id:x,get_cached_data_id:k,auto_saving:C,auto_saved_done:O,amount_format_locale:S}=(0,D.Jk)(y),{saveDocument:I,applyScriptOnDocument:T,setDataToCache:L,setRecordFromCache:M,saveAndValidate:F,setDocDataVariables:q}=y,Z=(0,Q.fI)(),{model:R,advance_filters:W,master_lookup_type:A,selected_row:V,populate_row_to_view:z,master_data_fields_map:B}=(0,D.Jk)(Z),{resetMasterDataStore:N,isContentChanged:P,isCurrentFieldPrimary:U}=Z,j=(0,Q.wr)(),{populateListsAndValues:H,getListOfValuesAsSelectList:$,addNameToLovList:Y}=j,J=(0,Q.e0)(),{setGeneralSettings:K}=J,{isConfirmationBoxDisable:G}=(0,D.Jk)(J),X=(0,Q.TB)(),{releaseDocLock:ee}=X,te=(0,Q.Eu)(),{open_editor:ie}=(0,D.Jk)(te),oe=(0,Q.Ln)(),{dashboardFiltersAfterExport:se}=oe,ae=(0,Q.V_)(),{formatMultiValues:le,searchValueByKey:ne}=ae;return{isCurrentFieldPrimary:U,formatMultiValues:le,searchValueByKey:ne,config_saved:a,addNameToLovList:Y,isFieldHidden:w,doc_loaded:v,setDocDataVariables:q,saveAndValidate:F,performCalulations:f,amount_format_locale:S,dashboardFiltersAfterExport:se,setRecordFromCache:M,setDataToCache:L,saveDocument:I,releaseDocLock:ee,setGeneralSettings:K,resetMasterDataStore:N,applyScriptOnDocument:T,populateListsAndValues:H,clearStateForExportDialog:o,getListOfValuesAsSelectList:$,master_lookup_type:A,ms_advance_filters:W,isConfirmationBoxDisable:G,master_data_fields_map:B,populate_row_to_view:z,isContentChanged:P,master_data_row:V,ms_view_model:R,record:b,apiData:(0,E.iH)(e),tableAreasStr:(0,E.iH)(""),is_sep_view:(0,E.iH)(!1),fuzzyDialog:(0,E.iH)(!1),selectedRow:(0,E.iH)([]),renderKey:0,isReadOnly:(0,E.iH)(!1),display_config_dialog:s,formBuilderModel:n,formLayout:r,isExtenedPanel:d,isFormBuilderMode:c,formBuilderConfigModel:u,layout_template_id:x,get_cached_data_id:k,renderComponent:h,docType:m,groupShortCutMap:t,fieldListToHighlight:p,fieldsNotDisplayed:(0,E.iH)(e),tb_version:"default",getElementWidth:_,prepareLayoutData:g,is_admin:(0,E.iH)(!1),master_data_popup_width:(0,E.iH)("700"),fields_tabindex_mapping:(0,E.iH)({}),script_loading:(0,E.iH)(!1),open_editor:ie,auto_saving:C,auto_saved_done:O}}});var De=i(74260),Oe=i(2165),Ee=i(5363),Se=i(24554),Ie=i(65869),Te=i(46778),Le=i(10151),Me=i(25589),Fe=i(75096),qe=i(99367),Ze=i(66941),Re=i(23282),We=i(83884),Ae=i(86115),Ve=i(65735),ze=i(17132),Be=i(60677),Ne=i(7518),Pe=i.n(Ne);const Ue=(0,De.Z)(Ce,[["render",x],["__scopeId","data-v-71fa9d0c"]]),je=Ue;Pe()(Ce,"components",{QBtn:Oe.Z,QTooltip:Ee.Z,QIcon:Se.Z,QSeparator:Ie.Z,QDialog:Te.Z,QCard:Le.Z,QCardSection:Me.Z,QAvatar:Fe.Z,QCardActions:qe.Z,QInnerLoading:Ze.Z,QSpinnerHourglass:Re.Z,QTd:We.Z,QField:Ae.Z,QCheckbox:Ve.Z,QTable:ze.Z}),Pe()(Ce,"directives",{ClosePopup:Be.Z})},110:(e,t,i)=>{"use strict";i.d(t,{Z:()=>z});var o=i(83673),s=i(62323);const a={class:"row"},l=["innerHTML"],n=(0,o._)("img",{width:"24",height:"24",src:"merge.svg"},null,-1),r={class:"text-weight-bold"},d=(0,o._)("img",{src:"settings/export.svg",width:"100","aria-hidden":"true"},null,-1),c={style:{padding:"20px"}},u={class:"text-white"},h={class:"q-ml-sm"};function m(e,t,i,m,p,_){const g=(0,o.up)("q-icon"),f=(0,o.up)("q-tooltip"),w=(0,o.up)("q-btn"),y=(0,o.up)("q-toolbar-title"),b=(0,o.up)("q-toolbar"),v=(0,o.up)("q-file"),x=(0,o.up)("q-card-section"),k=(0,o.up)("q-card"),C=(0,o.up)("q-dialog"),D=(0,o.up)("q-avatar"),O=(0,o.up)("q-card-actions"),E=(0,o.up)("Loader"),S=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.isDashboard?((0,o.wg)(),(0,o.j4)(w,{key:0,color:"primary",class:"mt-20",style:{"min-width":"160px"},icon:"img:settings/export-white.svg",onClick:t[0]||(t[0]=t=>{e.multiUploaderDialog=!0,e.uploadedFiles=null}),label:e.$t("upload")},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o._)("div",a,[(0,o.Wm)(g,{name:"img:settings/export-white.svg",size:"26px",class:"items-center q-ml-auto q-mr-auto"})]),(0,o._)("div",{innerHTML:e.$t("import_files_info")},null,8,l)])),_:1})])),_:1},8,["label"])):((0,o.wg)(),(0,o.j4)(w,{key:1,flat:"",class:"float-right pr-6 pl-6",onClick:t[1]||(t[1]=t=>e.multiUploaderDialog=!0)},{default:(0,o.w5)((()=>[n,(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("merge")),1)])),_:1})])),_:1})),(0,o.Wm)(C,{modelValue:e.multiUploaderDialog,"onUpdate:modelValue":t[6]||(t[6]=t=>e.multiUploaderDialog=t)},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{style:{width:"50vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o._)("span",r,(0,s.zw)(e.$t("pages.land.heading1")),1),(0,o.Uk)(" "+(0,s.zw)(e.$t("pages.land.heading2")),1)])),_:1}),(0,o.wy)((0,o.Wm)(w,{flat:"",round:"",dense:"",icon:"close"},null,512),[[S]])])),_:1}),(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o._)("div",{class:"drag-area text-center full-width",style:{padding:"20px"},id:"box-droppable",onDrop:t[3]||(t[3]=(...t)=>e.drop&&e.drop(...t)),onDragover:t[4]||(t[4]=(...t)=>e.allowDrop&&e.allowDrop(...t)),onDragleave:t[5]||(t[5]=(...t)=>e.dragLeave&&e.dragLeave(...t))},[d,(0,o._)("div",c,(0,s.zw)(e.$t("pages.land.dragndrop")),1),(0,o.Wm)(v,{style:{width:"70% !important",margin:"auto","white-space":"nowrap"},color:"white","data-cy":"upload-multiple-docs","label-color":"white","bg-color":"primary",class:"doc-file",filled:"",multiple:"","onUpdate:modelValue":[e.uploadFile,t[2]||(t[2]=t=>e.uploadedFiles=t)],modelValue:e.uploadedFiles,label:e.$t("pages.land.upload")},{prepend:(0,o.w5)((()=>[(0,o.Wm)(g,{name:"attachment"})])),file:(0,o.w5)((({index:e,file:t})=>[(0,o._)("div",u,(0,s.zw)(t.name),1),(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.name),1)])),_:2},1024),(0,o.kq)("",!0)])),_:1},8,["onUpdate:modelValue","modelValue","label"])],32)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(C,{modelValue:e.confirmMergeDialog,"onUpdate:modelValue":t[8]||(t[8]=t=>e.confirmMergeDialog=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(x,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(x,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",h,(0,s.zw)(e.$t("append_files_to_document")),1)])),_:1}),(0,o.Wm)(O,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(w,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[S]]),(0,o.wy)((0,o.Wm)(w,{flat:"",label:e.$t("done"),color:"primary",onClick:t[7]||(t[7]=t=>e.uploadFilesForValidation())},null,8,["label"]),[[S]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(E)],64)}var p=i(10321),_=i(77378),g=i(61959),f=i(72113),w=i(45401),y=i(80579),b=i(60727),v=i(41891),x=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const k=(0,o.aZ)({el:"#app",mixins:[w.Z,_.Z],props:{isDashboard:{type:Boolean,default:!0},docId:{type:String,default:""}},emits:["setImages"],components:{Loader:f.Z},data(){return{filters_reset_after_upload_setting:v.yN,confirmMergeDialog:(0,g.iH)(!1)}},mounted(){document.removeEventListener("upload_files",this.uploadFilesEventHandler),document.addEventListener("upload_files",this.uploadFilesEventHandler)},unmounted:function(){document.removeEventListener("upload_files",this.uploadFilesEventHandler)},methods:{uploadFile(e){this.uploadedFiles=e;let t=this.uploadedFiles;t||this.showErrorToast(this.$t("pages.messages.NO_FILE_SELECTED")),this.uploadFiles(t)},allowDrop(e){e.preventDefault(),e.currentTarget.classList.add("bg-grey-5"),e.currentTarget.classList.add("bd-shadow")},drop(e){e.preventDefault(),e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow"),this.uploadFiles(e.dataTransfer.files)},dragLeave(e){e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow")},uploadFilesEventHandler(e){e&&e.detail.files&&this.uploadFiles(e.detail.files)},uploadFiles(e){return x(this,void 0,void 0,(function*(){try{if(this.multiUploaderDialog=!1,this.uploadedFiles=null,e&&e.length>10)return void this.showErrorToast(this.$t("pages.messages.MAX_DOC_UPLOAD_LIMIT"));this.processing=!0,this.formData=new FormData;let t=0;for(let i of e)"application/pdf"===i.type||"image/tiff"===i.type||"text/xml"===i.type?this.formData.append("files",i):t++;if(t>0)return void this.showErrorToast(this.$t("pages.messages.INVALID_FILES"));this.isDashboard?yield this.uploadFilesForDashBoard(this.formData):(this.formData.append("doc_id",this.docId),this.confirmMergeDialog=!0)}catch(t){}finally{this.processing=!1}}))},uploadFilesForDashBoard(e){return x(this,void 0,void 0,(function*(){try{const t=yield y.Zj.uploadFiles(e);if(!1===t.success)return this.showErrorToast(this.$t("pages.messages.DOC_UPLOAD_ERROR")),void this.showErrorToast(t.message);setTimeout((()=>{this.refreshDashboard()}),100)}catch(t){}finally{this.processing=!1}}))},uploadFilesForValidation(){return x(this,void 0,void 0,(function*(){try{this.showLoading();const e=yield y.Zj.uploadFilesForValidation(this.formData);if(!1===e.success)return this.showErrorToast(this.$t("pages.messages.DOC_UPLOAD_ERROR")),void this.showErrorToast(e.message);yield this.setDataToStoreAndStorage(e.data),setTimeout((()=>{this.$emit("setImages")}),100)}catch(e){}finally{this.hideLoading(),this.processing=!1}}))},refreshDashboard(){return x(this,void 0,void 0,(function*(){const e=yield this.getSettingWithExpiry(this.filters_reset_after_upload_setting);if(e){const e=new CustomEvent("reset_filters",{});return void document.dispatchEvent(e)}const t=new CustomEvent("dashboard_refresh",{});document.dispatchEvent(t)}))}},setup(){const e=(0,b.Ln)(),{processing:t}=(0,p.Jk)(e),i=(0,b.VF)(),{user_settings:o}=(0,p.Jk)(i),{getSettingWithExpiry:s}=i,a=(0,b.H_)(),{setDataToStoreAndStorage:l}=a;return{user_settings:o,getSettingWithExpiry:s,setDataToStoreAndStorage:l,multiUploaderDialog:(0,g.iH)(!1),uploadedFiles:(0,g.iH)(null),processing:t,formData:{}}}});var C=i(74260),D=i(2165),O=i(5363),E=i(24554),S=i(46778),I=i(10151),T=i(39570),L=i(13747),M=i(25589),F=i(64974),q=i(75096),Z=i(99367),R=i(60677),W=i(7518),A=i.n(W);const V=(0,C.Z)(k,[["render",m]]),z=V;A()(k,"components",{QBtn:D.Z,QTooltip:O.Z,QIcon:E.Z,QDialog:S.Z,QCard:I.Z,QToolbar:T.Z,QToolbarTitle:L.Z,QCardSection:M.Z,QFile:F.Z,QAvatar:q.Z,QCardActions:Z.Z}),A()(k,"directives",{ClosePopup:R.Z})},47253:(e,t,i)=>{"use strict";i.d(t,{Z:()=>le});var o=i(83673),s=i(62323);const a={key:1,class:"row q-pt-xl full-width",style:{display:"flex"}},l={key:0,class:"col-sm-12 col-md-12 col-lg-12 q-pb-sm q-pl-sm"},n={class:"col-sm-12 col-md-4 col-lg-4 q-pb-sm q-pl-sm"},r={class:"col-sm-12 col-md-4 col-lg-4 q-pl-sm q-pb-sm"},d={class:"col-sm-12 col-md-4 col-lg-4 q-pl-sm q-pb-sm"},c={key:2,class:"col-sm-12 col-md-5 col-lg-5 q-pb-sm q-pl-sm"},u=(0,o.Uk)(" Following fields need to be validated before export:"),h=(0,o._)("br",null,null,-1),m=(0,o._)("br",null,null,-1),p={class:"q-ml-sm"},_={class:"q-ml-sm"},g={class:"q-ml-sm"},f=(0,o._)("span",{class:"q-ml-sm"},"You have made some changes related to line Item/PO on saving you may lost PO connections",-1),w=(0,o._)("span",{class:"q-ml-sm"},"You have Some Unmapped PO. Do you still want to continue with export?",-1),y={class:"q-ml-sm"},b=(0,o._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function v(e,t,i,v,x,k){const C=(0,o.up)("q-tooltip"),D=(0,o.up)("q-btn"),O=(0,o.up)("q-item-label"),E=(0,o.up)("q-item-section"),S=(0,o.up)("q-item"),I=(0,o.up)("q-list"),T=(0,o.up)("q-btn-dropdown"),L=(0,o.up)("DeleteRulesBtn"),M=(0,o.up)("export-dialog"),F=(0,o.up)("q-dialog"),q=(0,o.up)("q-avatar"),Z=(0,o.up)("q-card-section"),R=(0,o.up)("q-card-actions"),W=(0,o.up)("q-card"),A=(0,o.up)("q-toolbar-title"),V=(0,o.up)("q-toolbar"),z=(0,o.up)("q-inner-loading"),B=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.isPOView?((0,o.wg)(),(0,o.j4)(D,{key:0,round:"",color:"amber-9",padding:"xs",id:"export_po_btn",onClick:t[0]||(t[0]=t=>e.confirmAndExport()),icon:"import_export",class:"q-ma-sm po_iterateable_item"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("confirm_export")),1)])),_:1})])),_:1})):((0,o.wg)(),(0,o.iD)("div",a,[e.isValidationView?((0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(T,{split:"",class:"glossy full-width",color:"primary",label:e.$t("pages.screen2a.save"),onClick:t[3]||(t[3]=t=>e.confirmationForSave(!1))},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{class:"text-center"},{default:(0,o.w5)((()=>[(0,o.wy)(((0,o.wg)(),(0,o.j4)(S,{clickable:"",onClick:t[1]||(t[1]=t=>{e.confirmRuleSave=!0}),class:"border-bottom-bdbdbd min-height-38"},{default:(0,o.w5)((()=>[(0,o.Wm)(E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(O,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.screen2a.saveRules")),1)])),_:1})])),_:1})])),_:1})),[[B]]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(S,{clickable:"",onClick:t[2]||(t[2]=t=>e.confirmationForSave(!0)),class:"border-bottom-bdbdbd min-height-38"},{default:(0,o.w5)((()=>[(0,o.Wm)(E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(O,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("save_and_close")),1)])),_:1})])),_:1})])),_:1})),[[B]])])),_:1})])),_:1},8,["label"])])):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o._)("div",n,[(0,o.Wm)(D,{color:"primary",label:e.$t("pages.screen2a.save"),class:"full-width",onClick:t[4]||(t[4]=t=>e.confirmationForSave(!1))},null,8,["label"])]),(0,o._)("div",r,[(0,o.Wm)(D,{color:"primary",label:e.$t("pages.screen2a.saveRules"),class:(0,s.C_)((e.is_line_item_validated?"":"btn-disabled")+" full-width"),onClick:t[5]||(t[5]=t=>e.confirmationRuleSave())},{default:(0,o.w5)((()=>[e.is_line_item_validated?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(C,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("missing_mapping_warning")),1)])),_:1}))])),_:1},8,["label","class"])]),(0,o._)("div",d,[(0,o.Wm)(L,{docId:e.docId,onAutoDetectTables:e.autoDetectTables},null,8,["docId","onAutoDetectTables"])])],64)),e.po_enable?((0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(D,{color:"primary",label:e.$t("po_matching"),class:"full-width",onClick:t[6]||(t[6]=t=>{e.isPoView=!0,e.confirmationForSave()})},null,8,["label"])])):(0,o.kq)("",!0),(0,o._)("div",{class:(0,s.C_)([e.po_enable?"col-sm-12 col-md-7 col-lg-7":"col-sm-12 col-md-12 col-lg-12","q-pl-sm"])},[(0,o.Wm)(T,{split:"",class:(0,s.C_)(["full-width",e.enableExportButton?"":"disabled"]),color:"primary",onClick:t[8]||(t[8]=t=>e.confirmAndExport())},{label:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.screen2a.confirm"))+" ",1),e.fieldsErrorArray.length>0?((0,o.wg)(),(0,o.j4)(C,{key:0},{default:(0,o.w5)((()=>[u,h,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.fieldsErrorArray,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e},[(0,o.Uk)((0,s.zw)(e),1),m])))),128))])),_:1})):(0,o.kq)("",!0)])),default:(0,o.w5)((()=>[(0,o.Wm)(I,{class:"text-center"},{default:(0,o.w5)((()=>[(0,o.wy)(((0,o.wg)(),(0,o.j4)(S,{clickable:"",onClick:t[7]||(t[7]=t=>e.validateConfigurationAndExport(1)),class:"border-bottom-bdbdbd min-height-38"},{default:(0,o.w5)((()=>[(0,o.Wm)(E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(O,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("confirm_export_next")),1)])),_:1})])),_:1})])),_:1})),[[B]])])),_:1})])),_:1},8,["class"])],2)])),(0,o.Wm)(F,{modelValue:e.display_config_dialog,"onUpdate:modelValue":t[9]||(t[9]=t=>e.display_config_dialog=t),position:"top",class:"export-dialog",persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(M)])),_:1},8,["modelValue"]),(0,o.Wm)(F,{modelValue:e.confirmRuleSave,"onUpdate:modelValue":t[11]||(t[11]=t=>e.confirmRuleSave=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(Z,{class:"row items-center",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o._)("span",p,(0,s.zw)(e.$t("pages.messages.SAVE_RULES_WARNING")),1),(0,o._)("span",_,(0,s.zw)(e.$t("pages.messages.SAVE_RULES_WARNING_2")),1)])),_:1}),(0,o.Wm)(R,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(D,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[B]]),(0,o.wy)((0,o.Wm)(D,{flat:"",label:e.$t("done"),color:"primary",onClick:t[10]||(t[10]=t=>e.saveRules())},null,8,["label"]),[[B]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(F,{modelValue:e.confirmRedirection,"onUpdate:modelValue":t[13]||(t[13]=t=>e.confirmRedirection=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(A,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("confirm")),1)])),_:1}),(0,o.wy)((0,o.Wm)(D,{flat:"",round:"",dense:"",icon:"close"},null,512),[[B]])])),_:1}),(0,o.Wm)(Z,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",g,(0,s.zw)(e.$t("pages.messages.NO_NEXT_DOCUMENT")),1)])),_:1}),(0,o.Wm)(R,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(D,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[B]]),(0,o.wy)((0,o.Wm)(D,{flat:"",label:e.$t("done"),color:"primary",onClick:t[12]||(t[12]=t=>e.routeToDashboard())},null,8,["label"]),[[B]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(F,{modelValue:e.showConfirmation,"onUpdate:modelValue":t[15]||(t[15]=t=>e.showConfirmation=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(A,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("confirm")),1)])),_:1}),(0,o.wy)((0,o.Wm)(D,{flat:"",round:"",dense:"",icon:"close"},null,512),[[B]])])),_:1}),(0,o.Wm)(Z,{class:"row items-center"},{default:(0,o.w5)((()=>[f])),_:1}),(0,o.Wm)(R,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(D,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[B]]),(0,o.wy)((0,o.Wm)(D,{flat:"",label:e.$t("done"),color:"primary",onClick:t[14]||(t[14]=t=>e.proceedToSave())},null,8,["label"]),[[B]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(F,{modelValue:e.showUnmatchedPoWarring,"onUpdate:modelValue":t[17]||(t[17]=t=>e.showUnmatchedPoWarring=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(A,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("confirm")),1)])),_:1}),(0,o.wy)((0,o.Wm)(D,{flat:"",round:"",dense:"",icon:"close"},null,512),[[B]])])),_:1}),(0,o.Wm)(Z,{class:"row items-center"},{default:(0,o.w5)((()=>[w])),_:1}),(0,o.Wm)(R,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(D,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[B]]),(0,o.wy)((0,o.Wm)(D,{flat:"",label:e.$t("done"),color:"primary",onClick:t[16]||(t[16]=t=>{e.validateConfigurationAndExport(e.routeType)})},null,8,["label"]),[[B]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(F,{modelValue:e.showPoMatchWarning,"onUpdate:modelValue":t[19]||(t[19]=t=>e.showPoMatchWarning=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{icon:"warning",color:"primary"})])),_:1}),(0,o.Wm)(Z,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",y,(0,s.zw)(e.$t("pages.messages.WARNING_EXPORT_FROM_PO_MATCH")),1)])),_:1}),(0,o.Wm)(R,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(D,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[B]]),(0,o.wy)((0,o.Wm)(D,{flat:"",label:e.$t("po_matching"),color:"primary",onClick:t[18]||(t[18]=t=>e.navigateToPOMatch())},null,8,["label"]),[[B]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(z,{showing:e.export_config_processing},{default:(0,o.w5)((()=>[b])),_:1},8,["showing"])],64)}var x=i(30052),k=i.n(x),C=i(28741),D=i(10321),O=i(77378),E=i(7153),S=i(61959),I=i(29938),T=i(45401),L=i(41891),M=i(37295),F=i(54268),q=i(91777),Z=i(42691),R=i(75592),W=i(60727),A=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,n)}r((o=o.apply(e,t||[])).next())}))};const V=(0,o.aZ)({el:"#app",mixins:[T.Z,O.Z,M.Z,q.Z,C.Z],props:{enableExportButton:Boolean,isValidationView:{type:Boolean,default:!1},isPOView:{type:Boolean,default:!1}},components:{ExportDialog:R.Z,DeleteRulesBtn:Z.Z},watch:{config_saved:{handler:function(e,t){!0===t&&!1===e||(this.display_config_dialog=!1)}}},data(){return{docId:"",routeType:(0,S.iH)(0),isPoView:(0,S.iH)(!1),moveToDashboard:(0,S.iH)(!1),showConfirmation:(0,S.iH)(!1),allowedDoctypes:L.rf,po_module_activate:(0,S.iH)(!1),showPoMatchWarning:(0,S.iH)(!1),showUnmatchedPoWarring:(0,S.iH)(!1)}},mounted:function(){window.addEventListener("beforeunload",this.onTabClose),document.addEventListener("save_data",this.triggerSaveData),this.docId=this.$route.params.id},unmounted:function(){window.removeEventListener("beforeunload",this.onTabClose),document.removeEventListener("save_data",this.triggerSaveData)},methods:{cleanupDataforApi(e){e&&e.hasOwnProperty("doc_type")&&-1===this.allowedDoctypes.indexOf(e.doc_type)&&e.hasOwnProperty("tables")},cleanupTableData(e){if(!(e.tables&&e.tables.length>0&&e.tables[0].hasOwnProperty("rows")&&e.tables[0].rows.length>0))return;let t=new Map;Array.from(e.tables[0].rows).forEach((e=>{Array.from(e.columns).forEach((e=>{e.isExtraColumn&&(t.has(e.name)?!1===t.get(e.name)&&e.formatted_value&&t.set(e.name,!0):e.formatted_value?t.set(e.name,!0):t.set(e.name,!1))}))})),Array.from(e.tables[0].rows).forEach((e=>{e.columns=e.columns.filter((e=>!(t.has(e.name)&&!1===t.get(e.name))))}))},triggerSaveData(e){this.confirmationForSave()},confirmationForSave(e=!1){this.confirmationForPoConnectionReset?(this.moveToDashboard=e,this.showConfirmation=!0):this.decideNextOperation()},proceedToSave(){this.record.po_matched=[],this.decideNextOperation()},decideNextOperation(){this.confirmationForPoConnectionReset=!1,this.isPoView?this.viewPurchaseOrder():this.saveData(this.moveToDashboard)},saveData(e){return A(this,void 0,void 0,(function*(){const t=yield this.hasActionAcquiredLock();if(!t)return;let i=this.record;this.showLoading(),this.cleanupDataforApi(i),this.cleanupTableData(i),i.hasOwnProperty("table_data_copy")&&delete i["table_data_copy"];let o,s=new FormData;s.append("data",JSON.stringify(this.record));try{let e=yield(0,F.O_)();o=yield k().post(F.hi.save_document+this.docId,s,{headers:{Authorization:e}})}catch(a){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}if(this.hideLoading(),!1===o.data.success)this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),this.showErrorToast(o.data.message);else{this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),e&&this.routeToDashboard();const t=o.data.data;t.hasOwnProperty("layout")||(t.layout=this.record.layout),this.record=t}}))},routeToDashboard(){window.removeEventListener("beforeunload",this.onTabClose),this.releaseDocLock({doc_id:this.record.doc_id}),this.$router.push("/dashboard")},confirmationRuleSave(){this.is_line_item_validated&&(this.confirmRuleSave=!0)},saveRules(){return A(this,void 0,void 0,(function*(){const e=yield this.hasActionAcquiredLock();if(!e)return;let t=this.record;this.confirmRuleSave=!1,this.showLoading(),t.hasOwnProperty("table_data_copy")&&delete t["table_data_copy"];let i,o=yield(0,F.O_)(),s=new FormData;s.append("data",JSON.stringify(t));try{i=yield k().post(F.hi.save_rules,s,{headers:{Authorization:o}})}catch(a){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}this.hideLoading(),!1===i.data.success?(this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),this.showErrorToast(i.data.message)):(this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),this.$emit("autoDetectTables"))}))},validateConfigurationAndExport(e){return A(this,void 0,void 0,(function*(){const t=yield this.hasActionAcquiredLock();if(!t)return;let i;try{let e=new FormData;e.append("doc_type",this.record.doc_type);let t=yield(0,F.O_)();const o=yield k().post(F.hi.export_configuration_existence,e,{headers:{Authorization:t}});i=o.data.valid}catch(o){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}i?this.exportData(e).catch():this.display_config_dialog=!0}))},exportData(e){return A(this,void 0,void 0,(function*(){let t,i=this.record;if(this.cleanupDataforApi(i),this.cleanupTableData(i),this.display_config_dialog=!1,this.isPoSettingActivate()&&!this.isPOView)return void(this.showPoMatchWarning=!0);this.showLoading(),i.hasOwnProperty("table_data_copy")&&delete i["table_data_copy"];try{this.removeAllNotifications();let e=new FormData;e.append("data",JSON.stringify(i));let o=yield(0,F.O_)();t=yield k().post(F.hi.validate_and_export+this.docId,e,{headers:{Authorization:o}})}catch(s){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}if(!0===t.data.success)return void(0===e?(yield this.dashboardFiltersAfterExport(),this.routeToDashboard()):this.routeToNextInvoice(i.doc_type));let o=t.data.validation_error_codes;o?o.forEach((e=>{let t=e.split(":"),i=this.displayFieldLabelFor2a({translation_key:t[0]});this.showErrorToast(i+" "+this.$t("pages.api_user_messages."+t[1]),!0)})):this.showErrorToast(t.data.message),this.$emit("setApiData",t.data.data),this.$emit("handleExportError")}))},routeToNextInvoice(e){return A(this,void 0,void 0,(function*(){let t;this.showLoading();try{let i=yield(0,F.O_)();t=yield k().get(F.hi.get_next_document+this.docId+"?doc_type="+e+"&sort_attr=created_on",{headers:{Authorization:i}})}catch(i){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}!0===t.data.success?!0===t.data.has_next?(this.showSuccessToast(this.$t("pages.messages.NEXT_DOC_LOADED")),window.removeEventListener("beforeunload",this.onTabClose),this.$router.push("/2a/"+t.data.next_id)):this.confirmRedirection=!0:this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}))},viewPurchaseOrder(){this.isPoView=!1,null!==this.tb_version&&this.decidePORoute()},navigateToPOMatch(){this.validateLineItemTable(this.record.tables,this.record.doc_type)&&this.decidePORoute()},decidePORoute(){return A(this,void 0,void 0,(function*(){const e=yield this.saveAndValidate();if(!1===e.success){const t=new CustomEvent("display_fields_errors",{});return document.dispatchEvent(t),void this.showErrorToast(e.message)}this.$router.push("/po-matching-v3/"+this.record.doc_id)}))},onTabClose(e){let t=E.Z.has("event_name")?E.Z.getItem("event_name"):null;t&&"language_change"===t||(e.preventDefault(),e.returnValue="",this.clearSelectedSessionStorage())},autoDetectTables(){this.$emit("autoDetectTables")},validateUnmatchedPoWarring(e){if(this.routeType=e,this.po_module_activate=this.isPoSettingActivate(),!1===this.po_module_activate||!0===this.record.po_all_matched)return void this.validateConfigurationAndExport(e);if(!(this.record.tables&&this.record.tables[0]&&this.record.tables[0].rows&&this.record.po_matched))return void(this.showUnmatchedPoWarring=!0);let t=0;if((0,I.v7)(this.record.po_items)>0)for(const[i,o]of Object.entries(this.record.po_items))t+=o.length;this.record.tables[0].rows.length>=t?t===this.record.po_matched.length?this.validateConfigurationAndExport(e):this.showUnmatchedPoWarring=!0:this.record.tables[0].rows.length===this.record.po_matched.length?this.validateConfigurationAndExport(e):this.showUnmatchedPoWarring=!0},confirmAndExport(){this.enableExportButton&&this.validateConfigurationAndExport(0)}},setup(){const e=(0,W.H_)(),{record:t,tb_version:i,po_enable:o,doctype:s,language_origin:a,confirmationForPoConnectionReset:l,notifications:n,fieldsErrorArray:r}=(0,D.Jk)(e),{saveAndValidate:d}=e,c=(0,W.TB)(),{hasActionAcquiredLock:u,releaseDocLock:h}=c,m=(0,W.Fl)(),{clearStateForExportDialog:p}=m,{display_config_dialog:_,processing:g,config_saved:f}=(0,D.Jk)(m),w=(0,W.A)(),{validation_done:y}=(0,D.Jk)(w),b=(0,W.Ln)(),{dashboardFiltersAfterExport:v}=b;return{saveAndValidate:d,fieldsErrorArray:r,dashboardFiltersAfterExport:v,is_line_item_validated:y,record:t,doctype:s,language_origin:a,confirmationForPoConnectionReset:l,notifications:n,releaseDocLock:h,exportButtonWidth:(0,S.iH)("61"),confirmRuleSave:(0,S.iH)(!1),po_enable:o,tb_version:i,hasActionAcquiredLock:u,clearStateForExportDialog:p,display_config_dialog:_,export_config_processing:g,config_saved:f,confirmRedirection:(0,S.iH)(!1)}}});var z=i(74260),B=i(2165),N=i(5363),P=i(82226),U=i(27011),j=i(83414),H=i(52035),$=i(2350),Q=i(46778),Y=i(10151),J=i(25589),K=i(75096),G=i(99367),X=i(39570),ee=i(13747),te=i(66941),ie=i(60677),oe=i(7518),se=i.n(oe);const ae=(0,z.Z)(V,[["render",v]]),le=ae;se()(V,"components",{QBtn:B.Z,QTooltip:N.Z,QBtnDropdown:P.Z,QList:U.Z,QItem:j.Z,QItemSection:H.Z,QItemLabel:$.Z,QDialog:Q.Z,QCard:Y.Z,QCardSection:J.Z,QAvatar:K.Z,QCardActions:G.Z,QToolbar:X.Z,QToolbarTitle:ee.Z,QInnerLoading:te.Z}),se()(V,"directives",{ClosePopup:ie.Z})},98663:(e,t,i)=>{e.exports=i.p+"img/autotesting.d397931b.png"},68394:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDAgMTAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzAwN0VFNTt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yOS41LDMuNEwwLDIyLjVMMjAuNSwzOUw1MCwyMC42QzUwLDIwLjYsMjkuNSwzLjQsMjkuNSwzLjR6IE0wLDU1LjFsMjkuNSwxOS4zTDUwLDU3LjJMMjAuNSwzOQoJQzIwLjUsMzksMCw1NS4xLDAsNTUuMXogTTUwLDU3LjJsMjAuOCwxNy4yTDEwMCw1NS4zTDc5LjcsMzlDNzkuNywzOSw1MCw1Ny4yLDUwLDU3LjJ6IE0xMDAsMjIuNUw3MC44LDMuNEw1MCwyMC42TDc5LjcsMzkKCUwxMDAsMjIuNXogTTUwLjIsNjFMMjkuNSw3OC4ybC04LjctNS45djYuNmwyOS41LDE3LjdsMjkuNS0xNy43di02LjZsLTksNS45QzcwLjgsNzguMiw1MC4yLDYxLDUwLjIsNjF6Ii8+Cjwvc3ZnPgo="},49498:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDAgMTAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzAwNjZEQTt9Cgkuc3Qxe2ZpbGw6IzAwQUM0Nzt9Cgkuc3Qye2ZpbGw6I0VBNDMzNTt9Cgkuc3Qze2ZpbGw6IzAwODMyRDt9Cgkuc3Q0e2ZpbGw6IzI2ODRGQzt9Cgkuc3Q1e2ZpbGw6I0ZGQkEwMDt9Cjwvc3R5bGU+CjxnPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTcuNiw4MS45bDQuNCw3LjZjMC45LDEuNiwyLjIsMi45LDMuOCwzLjhMMzEuNSw2NkgwYzAsMS44LDAuNSwzLjYsMS40LDUuMkw3LjYsODEuOXoiLz4KCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik01MCwzNEwzNC4yLDYuN2MtMS41LDAuOS0yLjksMi4yLTMuOCwzLjhMMS40LDYwLjlDMC41LDYyLjUsMCw2NC4yLDAsNjZoMzEuNUw1MCwzNHoiLz4KCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik04NC4yLDkzLjNjMS41LTAuOSwyLjktMi4yLDMuOC0zLjhsMS44LTMuMmw4LjgtMTUuMmMwLjktMS42LDEuNC0zLjQsMS40LTUuMkg2OC41bDYuNywxMy4yTDg0LjIsOTMuM3oiLz4KCTxwYXRoIGNsYXNzPSJzdDMiIGQ9Ik01MCwzNEw2NS44LDYuN2MtMS41LTAuOS0zLjMtMS40LTUuMi0xLjRIMzkuNGMtMS44LDAtMy42LDAuNS01LjIsMS40TDUwLDM0eiIvPgoJPHBhdGggY2xhc3M9InN0NCIgZD0iTTY4LjUsNjZoLTM3TDE1LjgsOTMuM2MxLjUsMC45LDMuMywxLjQsNS4yLDEuNGg1OC4yYzEuOCwwLDMuNi0wLjUsNS4yLTEuNEw2OC41LDY2eiIvPgoJPHBhdGggY2xhc3M9InN0NSIgZD0iTTg0LjEsMzUuN0w2OS41LDEwLjVjLTAuOS0xLjYtMi4yLTIuOS0zLjgtMy44TDUwLDM0TDY4LjUsNjZoMzEuNGMwLTEuOC0wLjUtMy42LTEuNC01LjJMODQuMSwzNS43eiIvPgo8L2c+Cjwvc3ZnPgo="},9520:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDAgMTAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzAzNjRCODt9Cgkuc3Qxe2ZpbGw6IzAwNzhENDt9Cgkuc3Qye2ZpbGw6IzE0OTBERjt9Cgkuc3Qze2ZpbGw6IzI4QThFQTt9Cjwvc3R5bGU+CjxnIGlkPSJTVFlMRV9DT0xPUiI+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzguMSwzNS44TDM4LjEsMzUuOGwyMSwxMi42bDEyLjUtNS4zbDAsMGMyLjUtMS4xLDUuMy0xLjcsOC4xLTEuN2MwLjUsMCwwLjksMCwxLjQsMC4xCgkJQzc2LjgsMjQuNyw1OS43LDE0LjcsNDMsMTlDMzUuNSwyMC45LDI5LDI1LjYsMjQuNywzMmMwLjEsMCwwLjIsMCwwLjMsMEMyOS42LDMyLDM0LjIsMzMuMywzOC4xLDM1Ljh6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzguMSwzNS44TDM4LjEsMzUuOEMzNC4yLDMzLjMsMjkuNiwzMiwyNSwzMmMtMC4xLDAtMC4yLDAtMC4zLDBDMTAuOSwzMi4yLTAuMiw0My41LDAsNTcuMwoJCWMwLjEsNSwxLjYsOS45LDQuNSwxNEwyMyw2My41bDguMi0zLjVsMTguMy03LjdsOS42LTRMMzguMSwzNS44eiIvPgoJPHBhdGggY2xhc3M9InN0MiIgZD0iTTgxLjEsNDEuNWMtMC41LDAtMC45LTAuMS0xLjQtMC4xYy0yLjgsMC01LjUsMC42LTguMSwxLjdsMCwwbC0xMi41LDUuM2wzLjYsMi4ybDExLjksNy4xbDUuMiwzLjFsMTcuNywxMC42CgkJYzUuMy05LjksMS42LTIyLjItOC4yLTI3LjVDODYuOCw0Mi41LDgzLjksNDEuNyw4MS4xLDQxLjV6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QzIiBkPSJNNzkuOCw2MC43bC01LjItMy4xbC0xMS45LTcuMWwtMy42LTIuMmwtOS42LDRsLTE4LjMsNy43TDIzLDYzLjVMNC41LDcxLjNDOS4yLDc4LDE2LjgsODIsMjUsODJoNTQuNwoJCWM3LjUsMCwxNC4zLTQuMSwxNy45LTEwLjdMNzkuOCw2MC43eiIvPgo8L2c+Cjwvc3ZnPgo="}}]);