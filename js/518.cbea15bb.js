"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[518],{90518:(e,t,s)=>{s.r(t),s.d(t,{default:()=>M});var r=s(59835),o=s(86970);const i=e=>((0,r.dD)("data-v-373ecdb2"),e=e(),(0,r.Cn)(),e),a={class:"row q-pl-md q-pr-md highlighted-back"},n={class:"secondary-c-text text-h6"},c=i((()=>(0,r._)("img",{width:"24",src:"back-primary.svg"},null,-1))),d={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},l={class:"row full-width",style:{"padding-left":"35px"}},h={class:"col-9"},u={class:"full-width"},p=["src"],g={class:"col-3"},m={class:"images-list",style:{"margin-left":"33px","margin-right":"33px"}},_={class:"row q-pl-md q-mt-sm"},f={class:"secondary-c-text text-h6 q-ml-auto"},v={class:"full-width q-ma-sm scroll-area-height"},y=i((()=>(0,r._)("div",{class:"row justify-center q-pl-md q-pr-md q-pt-md"},[(0,r._)("span",{class:"text-red-13 text-h6 text-weight-bold"}," ERROR ")],-1))),w={class:"q-pl-md q-pr-md full-width left-scroll-area-height scrolle-y"},x=i((()=>(0,r._)("div",{class:"text-weight-bold"},"Message: ",-1))),b={class:"tab1"},k=i((()=>(0,r._)("div",{class:"text-weight-bold"},"Exception: ",-1))),I={class:"tab1"},q=i((()=>(0,r._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1)));function E(e,t,s,i,E,D){const T=(0,r.up)("MessageBanner"),R=(0,r.up)("q-icon"),C=(0,r.up)("q-btn"),P=(0,r.up)("q-inner-loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[e.is_status_not_error?((0,r.wg)(),(0,r.j4)(T,{key:0,message:e.$t("status_updated_from_error"),messageCategoryClass:"error-banner"},null,8,["message"])):(0,r.kq)("",!0),(0,r._)("div",a,[(0,r._)("div",n,[(0,r.Wm)(C,{flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/dashboard"},{default:(0,r.w5)((()=>[(0,r.Wm)(R,{class:"text-red-13",size:"sm"},{default:(0,r.w5)((()=>[c])),_:1}),(0,r._)("label",d,(0,o.zw)(e.$t("pages.screen2a.dashboard")),1)])),_:1})])]),(0,r._)("div",l,[(0,r._)("div",h,[(0,r._)("div",u,[(0,r._)("iframe",{src:e.path,title:"Main menu",width:"100%",height:"900px"},null,8,p)])]),(0,r._)("div",g,[(0,r._)("div",m,[(0,r._)("div",_,[(0,r._)("div",f,[e.is_export_error?((0,r.wg)(),(0,r.j4)(C,{key:0,unelevated:"",class:"bg-primary text-white",tabindex:"1",onClick:e.goToFieldValidation,label:e.$t("fields_validation")},null,8,["onClick","label"])):(0,r.kq)("",!0)])]),(0,r._)("div",v,[y,(0,r._)("div",w,[x,(0,r._)("pre",b," "+(0,o.zw)(e.message),1),k,(0,r._)("pre",I," "+(0,o.zw)(e.exception),1)])])])])]),(0,r.Wm)(P,{showing:e.processing},{default:(0,r.w5)((()=>[q])),_:1},8,["showing"])],64)}var D=s(7363),T=s(49990),R=s(60499),C=s(49341),P=s(9008),Q=s(46624),H=function(e,t,s,r){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function n(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?s(e.value):o(e.value).then(a,n)}c((r=r.apply(e,t||[])).next())}))};const Z=(0,r.aZ)({el:"#app",mixins:[T.Z],components:{MessageBanner:P.Z},mounted(){this.init()},beforeRouteLeave:function(e,t,s){this.resetDocStore(e.fullPath),s()},unmounted:function(){},data(){return{docId:"",filename:""}},methods:{init(){return H(this,void 0,void 0,(function*(){try{yield this.getTokenQueryParam(),this.processing=!0,this.docId=this.$route.params.id,this.path="https://dev.api.docbits.com/resource/document/"+this.docId+"/"+this.docId+".pdf?download=false&"+this.tokenQueryParam,this.path,this.getErrorInfos(),yield this.getDocumentById(this.docId),this.checkExportError()}catch(e){}finally{this.processing=!1}}))},getErrorInfos(){return H(this,void 0,void 0,(function*(){const e=yield C.U0.getDocumentError(this.docId);null!==e.message?(this.message=String(e.message),this.exception=e.exception||"",this.exception=String(this.exception)):this.is_status_not_error=!0}))},checkExportError(){"export_error"===this.record.status&&(this.is_export_error=!0)},goToFieldValidation(){return H(this,void 0,void 0,(function*(){if(!this.record||0===Object.keys(this.record).length||!1===this.record.success||!1===this.is_export_error)return;const e=yield C.U0.setDocToReadyForValidation(this.docId);if(!1===e.success)return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void this.showErrorToast(e.message);this.record.hasOwnProperty("has_layout")&&"true"===String(this.record.has_layout)?this.$router.push("/field_validation_v1/"+this.docId):this.$router.push("/2a/"+this.docId)}))}},setup(){const e=(0,Q.H_)(),{record:t,doc_loaded:s,processing:r}=(0,D.Jk)(e),{getDocumentById:o,saveDocument:i,resetDocStore:a}=e,n=(0,Q.wX)(),{tokenQueryParam:c}=(0,D.Jk)(n),{getTokenQueryParam:d}=n;return{record:t,doc_loaded:s,processing:r,getDocumentById:o,saveDocument:i,resetDocStore:a,path:(0,R.iH)(""),message:(0,R.iH)(""),exception:(0,R.iH)(""),is_status_not_error:(0,R.iH)(!1),is_export_error:(0,R.iH)(!1),tokenQueryParam:c,getTokenQueryParam:d}}});var $=s(7683),B=s(68879),S=s(22857),z=s(60854),O=s(69984),j=s.n(O);const L=(0,$.Z)(Z,[["render",E],["__scopeId","data-v-373ecdb2"]]),M=L;j()(Z,"components",{QBtn:B.Z,QIcon:S.Z,QInnerLoading:z.Z})}}]);