"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[4491],{44491:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var i=n(61758),s=n(58790);const o={class:"container no-padding back highlighted-back"},a={class:"secondary-c-text text-h6 q-pt-md q-pb-md"},r=(0,i.Lk)("img",{width:"24",src:"images/back_new.svg"},null,-1),c={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},l={class:"container p-b-0 settings"},d={class:"q-mt-md"},_=(0,i.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function g(e,t,n,g,u,p){const h=(0,i.g2)("SubHeader"),m=(0,i.g2)("q-icon"),f=(0,i.g2)("q-btn"),y=(0,i.g2)("TrainingList"),v=(0,i.g2)("q-inner-loading");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(h,{name:"settings_document_types",label:e.$t("model_training")},null,8,["label"]),(0,i.Lk)("div",o,[(0,i.Lk)("div",a,[(0,i.bF)(f,{flat:"",rounded:"",color:"primary",to:"/settings/document"},{default:(0,i.k6)((()=>[(0,i.bF)(m,{class:"text-red-13",size:"sm"},{default:(0,i.k6)((()=>[r])),_:1}),(0,i.Lk)("label",c,(0,s.v_)(e.$t("pages.settings.document_types")),1)])),_:1})])]),(0,i.Lk)("div",l,[(0,i.Lk)("div",d,[(0,i.bF)(y,{doc_type_key:e.doc_type_key,doc_type:e.doc_type,language_origin_list:e.language_origins,max_value:e.training_doc_limit,list_data:e.sample_files,total_exported:e.trained_docs_count.org_exported_documents,total_trained_by_org:e.trained_docs_count.org_trained_documents,total_trained:e.trained_docs_count.total_trained_documents},null,8,["doc_type_key","doc_type","language_origin_list","max_value","list_data","total_exported","total_trained_by_org","total_trained"])])]),(0,i.bF)(v,{showing:e.processing||e.language_origins_loading,class:"z-index-1"},{default:(0,i.k6)((()=>[_])),_:1},8,["showing"])],64)}var u=n(38734),p=n(94124),h=n(91236),m=n(76527),f=n(1659),y=n(68450),v=n(11470),k=n(64775),b=n(24622),L=function(e,t,n,i){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{c(i.next(e))}catch(t){o(t)}}function r(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):s(e.value).then(a,r)}c((i=i.apply(e,t||[])).next())}))};const w=(0,i.pM)({el:"#app",mixins:[b.A],components:{SubHeader:h.A,TrainingList:m.A},mounted(){this.init(),document.addEventListener("refresh_sample_data",this.refreshSampleData),document.addEventListener("sample_file_delete",this.sampleFileDeleted)},unmounted:function(){document.removeEventListener("refresh_sample_data",this.refreshSampleData),document.removeEventListener("sample_file_delete",this.sampleFileDeleted)},methods:{init(){return L(this,void 0,void 0,(function*(){try{this.processing=!0,this.doc_type_key=String(this.$route.params.doc_key),this.doc_type=String(this.$route.params.doc_type),yield this.getLanguageIfEmpty(),yield this.fetchSamplesFiles(),yield this.fetchTrainedDocCount()}catch(e){}finally{this.processing=!1}}))},refreshSampleData(){this.fetchSamplesFiles(),this.fetchTrainedDocCount()},sampleFileDeleted(e){if(!e||!e.detail)return;let t=e.detail;for(let[n,i]of Object.entries(this.sample_files)){const e=i;e.id===t&&this.sample_files.splice(n,1)}this.fetchTrainedDocCount()},fetchSamplesFiles(){return L(this,void 0,void 0,(function*(){try{if((0,y.jw)(this.doc_type_key))return;const e={doc_type:this.doc_type_key},t=yield v.M8.getModelTrainingSamplesFiles(e);if(!t||t.hasOwnProperty("success")&&!1===t.success)throw t;let n=[];for(let[i,s]of Object.entries(t)){const e=s;let t=Object.assign({},e);n.push(t)}this.sample_files=n}catch(e){const t=k.t.getErrorMessage(e);this.showErrorToast(t)}}))},fetchTrainedDocCount(){return L(this,void 0,void 0,(function*(){try{if((0,y.jw)(this.doc_type_key))return;const e={doc_type:this.doc_type_key},t=yield v.M8.getTrainedDocCount(e);if(!t||t.hasOwnProperty("success")&&!1===t.success)throw t;if(0==t.length)return;this.trained_docs_count=t[0]}catch(e){const t=k.t.getErrorMessage(e);this.showErrorToast(t)}}))}},setup(){const e=(0,p.QJ)(),{getLanguageIfEmpty:t}=e,{language_origins:n,language_origins_loading:i}=(0,f.bP)(e);return{language_origins:n,language_origins_loading:i,getLanguageIfEmpty:t,doc_type_key:(0,u.KR)(""),doc_type:(0,u.KR)(""),training_doc_limit:0,sample_files:(0,u.KR)([]),processing:(0,u.KR)(!1),trained_docs_count:(0,u.KR)({org_exported_documents:0,org_sample_documents:0,org_trained_documents:0,total_trained_documents:0,doc_type:""})}}});var x=n(12807),F=n(56384),E=n(50492),T=n(39035),D=n(98582),S=n.n(D);const C=(0,x.A)(w,[["render",g]]),A=C;S()(w,"components",{QBtn:F.A,QIcon:E.A,QInnerLoading:T.A})}}]);