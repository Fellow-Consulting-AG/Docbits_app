"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[5826],{55826:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ee});var o=l(83673),s=l(62323),a=l(98880);const i={class:"row q-pa-xl"},n={class:"col-sm-12 col-md-12 col-lg-12 q-pb-md"},d={class:"row"},r={class:"col-sm-8 col-md-6 col-lg-4"},c={class:"col-sm-4 col-md-6 col-lg-8"},u={class:"col-sm-12 col-md-12 col-lg-12 q-pb-md"},h={class:"highlighted-back table-header-text"},w={class:"text-left q-pl-md"},p={class:"text-center width-160"},m=["onClick"],g={class:"text-left"},f={class:"text-center"},_={class:"text-red"},b={class:"q-ml-sm"};function k(e,t,l,k,y,W){const v=(0,o.up)("SubHeader"),C=(0,o.up)("q-icon"),R=(0,o.up)("q-input"),D=(0,o.up)("q-btn"),x=(0,o.up)("q-item-section"),I=(0,o.up)("q-item"),q=(0,o.up)("q-separator"),Z=(0,o.up)("q-list"),E=(0,o.up)("q-menu"),L=(0,o.up)("q-markup-table"),S=(0,o.up)("q-avatar"),$=(0,o.up)("q-card-section"),T=(0,o.up)("q-card-actions"),Q=(0,o.up)("q-card"),A=(0,o.up)("q-dialog"),O=(0,o.up)("Loader"),U=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(v,{name:"dashboard",label:e.$t("my_workflows"),show_expiry_alert:!0,display_help_link:!1},null,8,["label"]),(0,o._)("div",i,[(0,o._)("div",n,[(0,o._)("div",d,[(0,o._)("div",r,[(0,o.Wm)(R,{modelValue:e.searchBy,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.searchBy=t),t[1]||(t[1]=t=>e.inputValueChanges())],dense:"",class:(0,s.C_)(0===e.searchBy.length?"search-in-active":"search-active"),autofocus:"",placeholder:e.$t("search_workflow"),outlined:""},{append:(0,o.w5)((()=>[(0,o.Wm)(C,{flat:"",dense:"",name:"search",size:"24px",color:"primary"})])),_:1},8,["modelValue","class","placeholder"])]),(0,o._)("div",c,[(0,o.Wm)(D,{style:{height:"39px"},color:"primary",icon:"add",label:e.$t("add_workflow"),class:"float-right",to:"/workflow_designer"},null,8,["label"])])])]),(0,o._)("div",u,[(0,o.Wm)(L,{flat:"",class:"workflow-table-style"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",h,[(0,o._)("th",w,(0,s.zw)(e.$t("name")),1),(0,o._)("th",p,(0,s.zw)(e.$t("actions")),1)])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.tableData,((l,i)=>((0,o.wg)(),(0,o.iD)("tr",{class:"cursor-pointer workflow-name",key:i,onClick:t=>e.openWorkflowDesigner(l.id)},[(0,o._)("td",g,[l.enabled?((0,o.wg)(),(0,o.j4)(C,{key:0,class:"q-mr-md black_to_white",name:"img:workflow/flow-enabled.svg"})):(0,o.kq)("",!0),l.enabled?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(C,{key:1,class:"q-mr-md black_to_white",name:"img:workflow/flow-disabled.svg"})),(0,o._)("span",{style:{"font-size":"16px"},class:(0,s.C_)(1==l.enabled?"enabled-name":"disabled-name")},(0,s.zw)(l.name),3)]),(0,o._)("td",f,[(0,o.Wm)(D,{flat:"",dense:"",round:"",onClick:t[2]||(t[2]=(0,a.iM)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{persistent:"","auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{dense:"",style:{"min-width":"100px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{clickable:""},{default:(0,o.w5)((()=>[l.enabled?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(x,{key:0,onClick:t=>e.handleActive(l,!0)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("activate")),1)])),_:2},1032,["onClick"])),l.enabled?((0,o.wg)(),(0,o.j4)(x,{key:1,onClick:t=>e.handleActive(l,!1)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("deactivate")),1)])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])),_:2},1024),(0,o.Wm)(I,{clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{onClick:t=>e.openWorkflowDesigner(l.id)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("edit")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,o.Wm)(q,{inset:""}),(0,o.Wm)(I,{clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{onClick:t=>{e.workflowId=l.id,e.confirmDelete=!0,e.selectedRecordIndex=i}},{default:(0,o.w5)((()=>[(0,o._)("span",_,(0,s.zw)(e.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])],8,m)))),128))])])),_:1})])]),(0,o.Wm)(A,{modelValue:e.confirmDelete,"onUpdate:modelValue":t[4]||(t[4]=t=>e.confirmDelete=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,null,{default:(0,o.w5)((()=>[(0,o.Wm)($,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{icon:"warning",color:"primary"})])),_:1}),(0,o.Wm)($,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",b,(0,s.zw)(e.$t("pages.messages.MSG_DELETE")),1)])),_:1}),(0,o.Wm)(T,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(D,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[U]]),(0,o.wy)((0,o.Wm)(D,{flat:"",label:e.$t("delete"),color:"primary",onClick:t[3]||(t[3]=t=>{e.deleteWorkflow()})},null,8,["label"]),[[U]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(O)],64)}var y=l(49405),W=l(10321),v=l(77378),C=l(61959),R=l(78564),D=l(72113),x=l(45401),I=l(80579),q=l(60727),Z=l(13873),E=function(e,t,l,o){function s(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,a){function i(e){try{d(o.next(e))}catch(t){a(t)}}function n(e){try{d(o["throw"](e))}catch(t){a(t)}}function d(e){e.done?l(e.value):s(e.value).then(i,n)}d((o=o.apply(e,t||[])).next())}))};const L=(0,o.aZ)({name:"workFlow",mixins:[v.Z,R.Z,x.Z],components:{Loader:D.Z,SubHeader:Z.Z},data(){return{workflowId:(0,C.iH)(""),searchBy:(0,C.iH)(""),tableData:{},confirmDelete:(0,C.iH)(!1),selectedRecordIndex:(0,C.iH)()}},mounted(){this.debounceSearchInputFunc=(0,y.Z)((()=>{this.loadWokFlow()}),1e3),this.loadWokFlow()},unmounted:function(){},methods:{inputValueChanges(){this.debounceSearchInputFunc()},loadWokFlow(){return E(this,void 0,void 0,(function*(){let e;try{this.showLoading(),e=yield I.fo.getWorkflows(this.searchBy),e.entries&&(this.tableData=e.entries)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},handleActive(e,t){return E(this,void 0,void 0,(function*(){let l,o=null;try{let s={};s.id=e.id,s.enabled=t,l=yield I.fo.updateWorkflow(s),l&&(this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),e.enabled=t),o=!1}catch(s){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),o=null}}))},saveOrUpdateWorkflow(){return E(this,void 0,void 0,(function*(){if(this.openAddWorkflowDialog)return;let e;try{if(this.showLoading(),this.workflowModel["id"])e=yield I.fo.updateWorkflow(this.workflowModel),this.tableData[this.selectedRecordIndex].id=e.id,this.tableData[this.selectedRecordIndex].name=e.name,this.tableData[this.selectedRecordIndex].org_id=e.org_id,this.tableData[this.selectedRecordIndex].enabled=e.enabled,this.tableData[this.selectedRecordIndex].trigger=e.trigger,this.tableData[this.selectedRecordIndex].doc_type=e.doc_type,this.tableData[this.selectedRecordIndex].sub_org_id=e.sub_org_id,this.tableData[this.selectedRecordIndex].description=e.description;else{e=yield I.fo.createWorkflow(this.workflowModel);const t={id:e.id,name:e.name,org_id:e.org_id,enabled:e.enabled,trigger:e.trigger,doc_type:e.doc_type,sub_org_id:e.sub_org_id,description:e.description};this.tableData.splice(0,0,t)}this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},deleteWorkflow(){return E(this,void 0,void 0,(function*(){let e;try{this.showLoading(),e=yield I.fo.deleteWorkflow(this.workflowId),this.showSuccessToast(this.$t("pages.messages.DELETED_SUCCESSFULLY")),this.tableData.splice(this.selectedRecordIndex,1)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},openWorkflowDesigner(e){this.$router.push("/workflow_designer/"+e)}},setup(){const e=(0,q.At)(),{doc_type_list:t,trigger_list:l,subOrgList:o}=(0,W.Jk)(e),{getSubOrgsList:s,getDocumentTriggers:a}=e;return{subOrgList:o,trigger_list:l,doc_type_list:t,debounceSearchInputFunc:{},getSubOrgsList:s,getDocumentTriggers:a}}});var S=l(74260),$=l(64689),T=l(24554),Q=l(2165),A=l(30481),O=l(65735),U=l(20811),z=l(27011),V=l(83414),M=l(52035),F=l(65869),H=l(46778),N=l(10151),j=l(25589),B=l(75096),G=l(99367),Y=l(17132),P=l(60677),J=l(7518),K=l.n(J);const X=(0,S.Z)(L,[["render",k],["__scopeId","data-v-364449ec"]]),ee=X;K()(L,"components",{QInput:$.Z,QIcon:T.Z,QBtn:Q.Z,QMarkupTable:A.Z,QCheckbox:O.Z,QMenu:U.Z,QList:z.Z,QItem:V.Z,QItemSection:M.Z,QSeparator:F.Z,QDialog:H.Z,QCard:N.Z,QCardSection:j.Z,QAvatar:B.Z,QCardActions:G.Z,QTable:Y.Z}),K()(L,"directives",{ClosePopup:P.Z})}}]);