"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[2984],{32984:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ll});var s=o(61758),l=o(58790);const i={class:"container page-height-limit"},a={style:{width:"100%"}},r={style:{"margin-top":"3px"}},n={style:{"margin-top":"3px"}},d={style:{"margin-top":"3px"}},c={style:{"margin-top":"3px"}};function u(e,t,o,u,m,p){const _=(0,s.g2)("SubHeader"),h=(0,s.g2)("BackToSettings"),g=(0,s.g2)("q-separator"),f=(0,s.g2)("q-icon"),b=(0,s.g2)("q-space"),v=(0,s.g2)("PageRestriction"),k=(0,s.g2)("q-card-section"),y=(0,s.g2)("q-card"),w=(0,s.g2)("q-expansion-item"),E=(0,s.g2)("FtpImportList"),L=(0,s.g2)("EmailImportList"),F=(0,s.g2)("InboundEmails"),C=(0,s.g2)("q-list");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(_,{name:"import_settings",label:e.$t("Import"),onSearch:!1},null,8,["label"]),(0,s.bF)(h),(0,s.Lk)("div",i,[(0,s.Lk)("div",a,[(0,s.Lk)("div",null,[(0,s.bF)(C,{bordered:"",class:"rounded-borders"},{default:(0,s.k6)((()=>[(0,s.bF)(w,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,s.k6)((()=>[(0,s.bF)(f,{size:"25px",class:"q-mr-lg black_to_white",name:"img:settings/doc.svg"}),(0,s.Lk)("span",r,(0,l.v_)(e.$t("pages.import.email_import")),1),(0,s.bF)(b)])),default:(0,s.k6)((()=>[(0,s.bF)(g),(0,s.bF)(y,{class:"page-background"},{default:(0,s.k6)((()=>[(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.bF)(v)])),_:1})])),_:1})])),_:1}),(0,s.bF)(w,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,s.k6)((()=>[(0,s.bF)(f,{size:"25px",class:"q-mr-lg icon-grey q-mt-xs",name:"cloud_download"}),(0,s.Lk)("span",n,(0,l.v_)(e.$t("ftp_import")),1),(0,s.bF)(b)])),default:(0,s.k6)((()=>[(0,s.bF)(g),(0,s.bF)(y,{class:"page-background"},{default:(0,s.k6)((()=>[(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.bF)(E)])),_:1})])),_:1})])),_:1}),(0,s.bF)(w,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,s.k6)((()=>[(0,s.bF)(f,{size:"25px",class:"q-mr-lg black_to_white",name:"img:settings/email-import.svg"}),(0,s.Lk)("span",d,(0,l.v_)(e.$t("pages.settings.email_import")),1),(0,s.bF)(b)])),default:(0,s.k6)((()=>[(0,s.bF)(g),(0,s.bF)(y,{class:"page-background"},{default:(0,s.k6)((()=>[(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.bF)(L)])),_:1})])),_:1})])),_:1}),e.user_settings[e.inbound_emails_setting]?((0,s.uX)(),(0,s.Wv)(w,{key:0,"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,s.k6)((()=>[(0,s.bF)(f,{size:"25px",class:"q-mr-lg black_to_white",name:"img:settings/email-import.svg"}),(0,s.Lk)("span",c,(0,l.v_)(e.$t("pages.import.inbound_emails.name")),1),(0,s.bF)(b)])),default:(0,s.k6)((()=>[(0,s.bF)(g),(0,s.bF)(y,{class:"page-background"},{default:(0,s.k6)((()=>[(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.bF)(F)])),_:1})])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1})])])])],64)}var m=o(77362),p=o(25773);const _={class:"import-container q-pa-xl"},h={class:"row"},g={style:{width:"30%",margin:"auto","padding-right":"5%"}},f={style:{width:"30%"}},b=(0,s.Lk)("div",{style:{width:"40%",margin:"auto","padding-left":"5%"}},null,-1),v={class:"row q-py-sm"},k={style:{width:"30%",margin:"auto","padding-right":"5%"}},y={style:{width:"30%"}},w=(0,s.Lk)("div",{style:{width:"40%"}},null,-1),E={class:"row"},L={style:{width:"30%",margin:"auto","padding-right":"5%"}},F={style:{width:"30%"}},C=(0,s.Lk)("div",{style:{width:"40%"}},null,-1);function A(e,t,o,i,a,r){const n=(0,s.g2)("q-tooltip"),d=(0,s.g2)("q-input"),c=(0,s.g2)("q-select");return(0,s.uX)(),(0,s.CE)("div",_,[(0,s.Lk)("div",h,[(0,s.Lk)("div",g,(0,l.v_)(e.$t("restrict_to_pages")),1),(0,s.Lk)("div",f,[(0,s.bF)(d,{outlined:"",dense:"","data-cy":"restrict_to_pages",tabindex:"0",type:"number",class:(0,l.C4)("full-width back-white"),modelValue:e.user_settings["RESTRICT_TO_PAGES"],"onUpdate:modelValue":[t[0]||(t[0]=t=>e.user_settings["RESTRICT_TO_PAGES"]=t),t[1]||(t[1]=t=>{e.saveSettings("RESTRICT_TO_PAGES",t)})]},{default:(0,s.k6)((()=>[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.eW)(" Only process given number of pages every further page will be ignored. ")])),_:1})])),_:1},8,["modelValue"])]),b]),(0,s.Lk)("div",v,[(0,s.Lk)("div",k,(0,l.v_)(e.$t("payment_terms_days")),1),(0,s.Lk)("div",y,[(0,s.bF)(d,{outlined:"",dense:"","data-cy":"payment_terms_days",tabindex:"0",type:"number",class:(0,l.C4)("full-width back-white"),modelValue:e.user_settings["PAYMENT_TERMS_DAYS"],"onUpdate:modelValue":[t[2]||(t[2]=t=>e.user_settings["PAYMENT_TERMS_DAYS"]=t),t[3]||(t[3]=t=>{e.saveSettings("PAYMENT_TERMS_DAYS",t)})]},null,8,["modelValue"])]),w]),(0,s.Lk)("div",E,[(0,s.Lk)("div",L,(0,l.v_)(e.$t("date_pattern")),1),(0,s.Lk)("div",F,[(0,s.bF)(c,{outlined:"",dense:"",class:"back-white","data-cy":"date_pattern",modelValue:e.user_settings["DATE_PATTERN"],"onUpdate:modelValue":[t[4]||(t[4]=t=>e.user_settings["DATE_PATTERN"]=t),t[5]||(t[5]=t=>{e.saveSettings("DATE_PATTERN",t)})],options:[{label:e.$t("select"),value:""},{label:"%d/%m/%Y",value:"%d/%m/%Y"},{label:"%d.%m.%Y",value:"%d.%m.%Y"},{label:"%m %d, %Y",value:"%m %d, %Y"},{label:"%Y %m, %d",value:"%Y %m, %d"}],"emit-value":"","map-options":"",label:e.$t("date_pattern")},null,8,["modelValue","options","label"])]),C])])}var R=o(1659),V=o(24622),$=o(38734),q=o(83319),T=o(18505),x=function(e,t,o,s){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function a(e){try{n(s.next(e))}catch(t){i(t)}}function r(e){try{n(s["throw"](e))}catch(t){i(t)}}function n(e){e.done?o(e.value):l(e.value).then(a,r)}n((s=s.apply(e,t||[])).next())}))};const I=(0,s.pM)({mixins:[T.A,V.A],methods:{saveSettings(e,t){return x(this,void 0,void 0,(function*(){if(e){this.showLoading();try{yield this.updateSetting(e,t)}catch(o){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.hideLoading()}}}))}},setup(){const e=(0,q.Bu)(),{user_settings:t}=(0,R.bP)(e),{updateSetting:o}=e;return{user_settings:t,updateSetting:o}},data(){return{userDialog:(0,$.KR)(!1),api_key:""}}});var D=o(12807),S=o(67837),O=o(97410),Q=o(94940),K=o(98582),P=o.n(K);const X=(0,D.A)(I,[["render",A]]),W=X;P()(I,"components",{QInput:S.A,QTooltip:O.A,QSelect:Q.A});var M=o(29104);const U={class:"container q-pa-xl"},N={class:"row",style:{"margin-bottom":"15px"}},Y={style:{width:"20%",margin:"auto"}},z={style:{width:"80%"}},j={class:"row"},B={key:0,class:"cursor-default"},J={key:1},G={class:"row float-right"},H={class:"text-red-14"},Z=(0,s.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function ee(e,t,o,i,a,r){const n=(0,s.g2)("f-btn"),d=(0,s.g2)("q-tooltip"),c=(0,s.g2)("q-th"),u=(0,s.g2)("q-tr"),m=(0,s.g2)("q-item-section"),p=(0,s.g2)("q-item"),_=(0,s.g2)("q-separator"),h=(0,s.g2)("q-list"),g=(0,s.g2)("q-menu"),f=(0,s.g2)("q-btn"),b=(0,s.g2)("q-td"),v=(0,s.g2)("q-table"),k=(0,s.g2)("q-inner-loading"),y=(0,s.g2)("EditCreate"),w=(0,s.g2)("q-dialog"),E=(0,s.g2)("ConnectionLogs"),L=(0,s.g2)("ImportLogs");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",U,[(0,s.Lk)("div",N,[(0,s.Lk)("div",Y,(0,l.v_)(e.$t("pages.import.email")),1),(0,s.Lk)("div",z,[(0,s.eW)((0,l.v_)(e.$t("pages.import.email_info"))+" ",1),(0,s.Lk)("a",{onClick:t[0]||(t[0]=(...t)=>e.webSiteLink&&e.webSiteLink(...t)),class:"cursor-pointer color-primary",target:"_blank"},(0,l.v_)(e.$t("pages.import.email_link")),1)]),(0,s.bF)(n,{class:"q-ml-auto",icon:"add",label:e.$t("new"),onClick:e.createNewRecord},null,8,["label","onClick"]),(0,s.bF)(n,{square:"",class:"q-ml-sm",onClick:t[1]||(t[1]=t=>e.showMailImportLogs(0)),icon:"img:images/logs.svg",invert:""},{default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.import.import_log")),1)])),_:1})])),_:1})]),(0,s.Lk)("div",j,[(0,s.bF)(v,{"no-data-label":e.$t("pages.messages.no_record_found"),style:{width:"100%",height:"100%"},class:"dashboard-table-style back-white",rows:e.rows,columns:e.columns,"row-key":"name",flat:"","rows-per-page-options":[0],id:"email_import_table"},{header:(0,s.k6)((t=>[(0,s.bF)(u,{props:t},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.cols,((o,i)=>((0,s.uX)(),(0,s.Wv)(c,{key:o.name,props:t,"data-index":i,draggable:e.canDragDropColumn(o),dropzone:e.canDragDropColumn(o),direction:"horizontal",onDragstart:t=>e.onDragStart(t,e.columns,i),onDrop:(0,M.D$)((t=>e.handleDrop(t,i)),["prevent"]),onDragover:(0,M.D$)((t=>e.onDragOver(t,i)),["prevent"]),onDragenter:(0,M.D$)(e.onDragEnter,["prevent"]),onDragleave:(0,M.D$)(e.onDragLeave,["prevent"]),style:(0,l.Tr)({cursor:e.getIsDragging?"pointer":"move"})},{default:(0,s.k6)((()=>["action"==o.name?((0,s.uX)(),(0,s.CE)("span",B,(0,l.v_)(o.label),1)):((0,s.uX)(),(0,s.CE)("span",J,(0,l.v_)(o.label),1))])),_:2},1032,["props","data-index","draggable","dropzone","onDragstart","onDrop","onDragover","onDragenter","onDragleave","style"])))),128))])),_:2},1032,["props"])])),body:(0,s.k6)((o=>[(0,s.bF)(u,{props:o,id:o.key},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.cols,(i=>((0,s.uX)(),(0,s.CE)(s.FK,{key:i.name},["action"===i.name?((0,s.uX)(),(0,s.Wv)(b,{key:0,style:{width:"350px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",G,[(0,s.bF)(f,{flat:"",dense:"",round:"",onClick:t[2]||(t[2]=(0,M.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,s.k6)((()=>[(0,s.bF)(h,{dense:"",style:{"min-width":"100px"}},{default:(0,s.k6)((()=>["IMAP"===o.row.protocol||"POP3"===o.row.protocol?((0,s.uX)(),(0,s.Wv)(p,{key:0,clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(m,{onClick:t=>e.checkLogin(o.row)},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("test_connection")),1)])),_:2},1032,["onClick"])])),_:2},1024)):(0,s.Q3)("",!0),(0,s.bF)(p,{clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(m,{onClick:t=>e.showMailConnectionLogs(o.row.id)},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.import.connection_logs")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,s.bF)(p,{clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(m,{onClick:t=>e.showMailImportLogs(o.row.id)},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.import.import_log")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,s.bF)(_,{inset:""}),(0,s.bF)(p,{clickable:""},{default:(0,s.k6)((()=>[o.row.is_active?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(m,{key:0,onClick:t=>{o.row.is_active=!0,e.de_activateEmail(o.row)}},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("activate")),1)])),_:2},1032,["onClick"])),o.row.is_active?((0,s.uX)(),(0,s.Wv)(m,{key:1,onClick:t=>{o.row.is_active=!1,e.de_activateEmail(o.row)}},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("deactivate")),1)])),_:2},1032,["onClick"])):(0,s.Q3)("",!0)])),_:2},1024),(0,s.bF)(p,{clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(m,{onClick:t=>e.editRow(o.rowIndex,o.row)},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("edit")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,s.bF)(_,{inset:""}),(0,s.bF)(p,{clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(m,{onClick:t=>e.deleteClicked(o.rowIndex,o.row.id)},{default:(0,s.k6)((()=>[(0,s.Lk)("span",H,(0,l.v_)(e.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])])),_:2},1024)):"sub_org_id"===i.name?((0,s.uX)(),(0,s.Wv)(b,{key:1,class:(0,l.C4)(o.row.is_active?"":"email-import-deactive-column")},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.sub_orgs_flattened[o.row[i.name]]),1)])),_:2},1032,["class"])):((0,s.uX)(),(0,s.Wv)(b,{key:2,class:(0,l.C4)(1==o.row.is_active?"":"email-import-deactive-column")},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)("null"===o.row[i.name]?"":o.row[i.name]),1)])),_:2},1032,["class"]))],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["no-data-label","rows","columns"])])]),(0,s.bF)(k,{showing:e.loading,class:"z-index-1",style:{"z-index":"1000"}},{default:(0,s.k6)((()=>[Z])),_:1},8,["showing"]),(0,s.bF)(w,{modelValue:e.show_edit_create,"onUpdate:modelValue":t[3]||(t[3]=t=>e.show_edit_create=t),persistent:"",onKeydown:t[4]||(t[4]=(0,M.jR)((t=>e.show_edit_create=!1),["esc"]))},{default:(0,s.k6)((()=>[(0,s.bF)(y,{selected_model:e.selected_row,api_key:e.api_key},null,8,["selected_model","api_key"])])),_:1},8,["modelValue"]),(0,s.bF)(w,{modelValue:e.show_connection_logs,"onUpdate:modelValue":t[5]||(t[5]=t=>e.show_connection_logs=t)},{default:(0,s.k6)((()=>[(0,s.bF)(E,{connection_id:e.connection_id,connection_type:e.connection_type},null,8,["connection_id","connection_type"])])),_:1},8,["modelValue"]),(0,s.bF)(L,{connection_id:e.connection_id,show_import_logs:e.show_import_logs,setheight:"36px"},null,8,["connection_id","show_import_logs"])],64)}var te=o(10739),oe=o(11470),se=o(64775);const le={key:0,class:"text-weight-bold"},ie={key:1,class:"text-weight-bold"},ae={class:"row q-mt-md"},re={class:"col-2"},ne={key:0,class:"col-7"},de={class:"col-3"},ce={class:"row q-mt-md"},ue=(0,s.Lk)("div",{class:"col-2"},null,-1),me={class:"col-3"},pe={class:"col-1"},_e=(0,s.Lk)("div",{class:"col-3"},null,-1),he={key:0,class:"row q-mt-md"},ge=(0,s.Lk)("div",{class:"col-2"},null,-1),fe={class:"col-7"},be={class:"row"},ve={class:"col-4"},ke={style:{"margin-top":"8px"}},ye={class:"col"},we=(0,s.Lk)("div",{class:"col-3"},null,-1),Ee={key:1,class:"row q-mt-md"},Le=(0,s.Lk)("div",{class:"col-2"},null,-1),Fe={class:"col-7"},Ce={class:"row"},Ae={class:"col-4"},Re={style:{"margin-top":"8px"}},Ve={class:"col"},$e=(0,s.Lk)("div",{class:"col-3"},null,-1),qe={key:2,class:"row q-mt-md"},Te=(0,s.Lk)("div",{class:"col-2"},null,-1),xe={class:"col-7"},Ie={class:"row"},De={class:"col-6"},Se={style:{"margin-top":"8px"}},Oe={class:"col"},Qe=(0,s.Lk)("div",{class:"col-3"},null,-1),Ke={key:3,class:"row q-mt-md"},Pe=(0,s.Lk)("div",{class:"col-2"},null,-1),Xe={class:"col-7"},We=(0,s.Lk)("div",{class:"col-3"},null,-1),Me={class:"row q-mt-md"},Ue={class:"col-2"},Ne={class:"col-7"},Ye={class:"col-3"},ze={class:"row q-mt-md"},je={class:"col-2"},Be={class:"col-7"},Je={class:"col-3"},Ge={class:"row q-mt-md"},He=(0,s.Lk)("div",{class:"col-2"},null,-1),Ze={class:"col-7"},et={key:0,class:"col-3",style:{"margin-top":"-5px"}},tt={class:"row q-mt-md"},ot=(0,s.Lk)("div",{class:"col-2"},null,-1),st={class:"col-7"},lt={class:"col-3",style:{"margin-top":"-5px"}},it={style:{"margin-top":"5px"}},at={style:{"margin-top":"15px"}},rt={class:"row q-mt-sm"},nt=(0,s.Lk)("div",{class:"col-2"},null,-1),dt={class:"col-7"},ct={class:"col-3"},ut={class:"row q-mt-md"},mt=(0,s.Lk)("div",{class:"col-2"},null,-1),pt={class:"col-7"},_t={class:"col-3"},ht={class:"row q-mt-md"},gt=(0,s.Lk)("div",{class:"col-2"},null,-1),ft={class:"col-7"},bt={class:"col-3"},vt={style:{"margin-top":"15px"}},kt={class:"row q-mt-md"},yt=(0,s.Lk)("div",{class:"col-2"},null,-1),wt=(0,s.Lk)("div",{class:"col-6"},null,-1),Et={class:"col-4"},Lt=(0,s.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function Ft(e,t,o,i,a,r){const n=(0,s.g2)("q-toolbar-title"),d=(0,s.g2)("q-btn"),c=(0,s.g2)("q-toolbar"),u=(0,s.g2)("q-tooltip"),m=(0,s.g2)("q-icon"),p=(0,s.g2)("q-select"),_=(0,s.g2)("f-btn"),h=(0,s.g2)("q-input"),g=(0,s.g2)("q-toggle"),f=(0,s.g2)("q-card-section"),b=(0,s.g2)("q-inner-loading"),v=(0,s.g2)("q-card"),k=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(v,{style:{width:"1200px","max-width":"1200px",height:"650px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("form",{onSubmit:t[32]||(t[32]=(0,M.D$)(((...t)=>e.submitFrom&&e.submitFrom(...t)),["prevent","stop"]))},[(0,s.bF)(c,{class:"text-white secondary-toolbar"},{default:(0,s.k6)((()=>[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[e.row_id?((0,s.uX)(),(0,s.CE)("span",le,(0,l.v_)(e.$t("pages.settings.master_data_lookup.edit_row")),1)):((0,s.uX)(),(0,s.CE)("span",ie,(0,l.v_)(e.$t("pages.settings.master_data_lookup.create_row")),1))])),_:1}),(0,s.bo)((0,s.bF)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[k]])])),_:1}),e.Office365_selected?((0,s.uX)(),(0,s.Wv)(f,{key:0},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ae,[(0,s.Lk)("div",re,[(0,s.bF)(p,{modelValue:e.model["protocol"],"onUpdate:modelValue":[t[0]||(t[0]=t=>e.model["protocol"]=t),e.protocolUpdated],outlined:"",options:e.protocols,label:e.$t("pages.import.protocol")},{append:(0,s.k6)((()=>[e.errors["protocol"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","options","label","onUpdate:modelValue"])]),e.loading||1!=e.ms_is_authenticated?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",ne,[(0,s.bF)(p,{class:"full q-ml-sm",outlined:"",clearable:"",modelValue:e.model["sub_org_id"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.model["sub_org_id"]=t),"use-input":"",options:e.filterSubOrgsList,onFilter:e.filterSubOrgslistEvent,label:e.$t("sub_organizations"),loading:e.sub_org_list_loading,"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","label","loading"])])),(0,s.Lk)("div",de,[0==e.ms_authenticate&&0==e.ms_is_authenticated?((0,s.uX)(),(0,s.Wv)(_,{key:0,class:"q-ml-sm",appearance:"secondary",label:e.$t("pages.import.authenticate"),onClick:t[2]||(t[2]=t=>e.submitFrom()),style:{height:"56px"}},null,8,["label"])):1==e.ms_authenticate&&0==e.ms_is_authenticated?((0,s.uX)(),(0,s.Wv)(_,{key:1,class:"q-ml-sm",style:{height:"56px"},label:e.$t("pages.import.finish_authentication"),onClick:t[3]||(t[3]=t=>e.msfinish())},null,8,["label"])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",ce,[ue,(0,s.Lk)("div",me,[1==e.ms_authenticate&&0==e.ms_is_authenticated?((0,s.uX)(),(0,s.Wv)(h,{key:0,modelValue:e.ms_code,"onUpdate:modelValue":t[4]||(t[4]=t=>e.ms_code=t),label:e.$t("pages.import.microsoft_code"),outlined:"",readonly:"",onClick:e.copyText,id:"mscode",style:{"margin-left":"10px",width:"90%"}},null,8,["modelValue","label","onClick"])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",pe,[1==e.ms_authenticate&&0==e.ms_is_authenticated?((0,s.uX)(),(0,s.Wv)(_,{key:0,style:{"margin-left":"4px","margin-top":"8px"},icon:"fas fa-copy",onClick:e.copyText},null,8,["onClick"])):(0,s.Q3)("",!0)]),_e]),e.loading||1!=e.ms_is_authenticated?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",he,[ge,(0,s.Lk)("div",fe,[(0,s.Lk)("div",be,[(0,s.Lk)("div",ve,[(0,s.bF)(g,{modelValue:e.use_folder,"onUpdate:modelValue":t[5]||(t[5]=t=>e.use_folder=t)},null,8,["modelValue"]),(0,s.Lk)("span",ke,(0,l.v_)(e.$t("Use Folder")),1)]),(0,s.Lk)("div",ye,[1==e.use_folder&&""!=e.row_id?((0,s.uX)(),(0,s.Wv)(p,{key:0,modelValue:e.model["folder"],"onUpdate:modelValue":t[6]||(t[6]=t=>e.model["folder"]=t),label:e.$t("pages.import.folder"),options:e.folder_list,outlined:"","data-cy":"folder",style:{"margin-left":"10px"}},null,8,["modelValue","label","options"])):(0,s.Q3)("",!0)])])]),we])),e.loading||1!=e.ms_is_authenticated?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ee,[Le,(0,s.Lk)("div",Fe,[(0,s.Lk)("div",Ce,[(0,s.Lk)("div",Ae,[(0,s.bF)(g,{modelValue:e.use_email,"onUpdate:modelValue":t[7]||(t[7]=t=>e.use_email=t)},null,8,["modelValue"]),(0,s.Lk)("span",Re,(0,l.v_)(e.$t("Use shared Mailbox")),1),(0,s.bF)(m,{name:"help",style:{"margin-top":"-8px","margin-left":"2px"}},{default:(0,s.k6)((()=>[(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("Seperate, shared Email-Adress you want to import from.")),1)])),_:1})])),_:1})]),(0,s.Lk)("div",Ve,[1==e.use_email?((0,s.uX)(),(0,s.Wv)(h,{key:0,modelValue:e.model["shared_email"],"onUpdate:modelValue":t[8]||(t[8]=t=>e.model["shared_email"]=t),label:e.$t("pages.import.shared_email"),outlined:"","data-cy":"shared_email",style:{"margin-left":"10px"}},null,8,["modelValue","label"])):(0,s.Q3)("",!0)])])]),$e])),e.loading||1!=e.ms_is_authenticated?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",qe,[Te,(0,s.Lk)("div",xe,[(0,s.Lk)("div",Ie,[(0,s.Lk)("div",De,[(0,s.bF)(g,{dense:"",style:{"margin-left":"5px","margin-right":"5px"},modelValue:e.model["delete_after_import"],"onUpdate:modelValue":t[9]||(t[9]=t=>e.model["delete_after_import"]=t)},null,8,["modelValue"]),(0,s.Lk)("span",Se,(0,l.v_)(e.$t("Move Emails to other folder")),1)]),(0,s.Lk)("div",Oe,[1==e.model["delete_after_import"]?((0,s.uX)(),(0,s.Wv)(p,{key:0,modelValue:e.model["move_to_folder"],"onUpdate:modelValue":t[10]||(t[10]=t=>e.model["move_to_folder"]=t),label:e.$t("pages.import.folder"),options:e.folder_list,outlined:"","data-cy":"folder"},null,8,["modelValue","label","options"])):(0,s.Q3)("",!0)])])]),Qe])),e.loading||1!=e.ms_is_authenticated?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ke,[Pe,(0,s.Lk)("div",Xe,[(0,s.bF)(h,{modelValue:e.model["error_notification_email"],"onUpdate:modelValue":t[11]||(t[11]=t=>e.model["error_notification_email"]=t),label:e.$t("pages.import.error_notification_email"),outlined:"",class:(0,l.C4)("full q-ml-sm")},null,8,["modelValue","label"])]),We]))])),_:1})):((0,s.uX)(),(0,s.Wv)(f,{key:1},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Me,[(0,s.Lk)("div",Ue,[(0,s.bF)(p,{modelValue:e.model["protocol"],"onUpdate:modelValue":[t[12]||(t[12]=t=>e.model["protocol"]=t),e.protocolUpdated],outlined:"",options:e.protocols,label:e.$t("pages.import.protocol")},{append:(0,s.k6)((()=>[e.errors["protocol"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","options","label","onUpdate:modelValue"])]),(0,s.Lk)("div",Ne,[(0,s.bF)(h,{modelValue:e.model["server"],"onUpdate:modelValue":t[13]||(t[13]=t=>e.model["server"]=t),label:e.$t("pages.import.server"),outlined:"",class:(0,l.C4)("full q-ml-sm")},{append:(0,s.k6)((()=>[e.errors["server"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","label"])]),(0,s.Lk)("div",Ye,[(0,s.bF)(h,{modelValue:e.model["port"],"onUpdate:modelValue":t[14]||(t[14]=t=>e.model["port"]=t),label:e.$t("pages.import.port"),outlined:"","data-cy":"port",class:(0,l.C4)("full q-ml-sm")},{append:(0,s.k6)((()=>[e.errors["port"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","label"])])]),(0,s.Lk)("div",ze,[(0,s.Lk)("div",je,[(0,s.bF)(p,{modelValue:e.model["encryption"],"onUpdate:modelValue":t[15]||(t[15]=t=>e.model["encryption"]=t),outlined:"","data-cy":"encryption",options:e.encryptions,class:(0,l.C4)("full-width "),label:e.$t("pages.import.encryption")},{append:(0,s.k6)((()=>[e.errors["encryption"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","options","label"])]),(0,s.Lk)("div",Be,[(0,s.bF)(h,{modelValue:e.model["username"],"onUpdate:modelValue":t[16]||(t[16]=t=>e.model["username"]=t),class:(0,l.C4)(["full q-ml-sm","full q-ml-sm"]),label:e.$t("pages.import.username"),outlined:"","data-cy":"username"},{append:(0,s.k6)((()=>[e.errors["username"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","label"])]),(0,s.Lk)("div",Je,["IMAP"==e.model["protocol"]&&""!=e.row_id?((0,s.uX)(),(0,s.Wv)(p,{key:0,modelValue:e.model["folder"],"onUpdate:modelValue":t[17]||(t[17]=t=>e.model["folder"]=t),label:e.$t("pages.import.folder"),options:e.folder_list,outlined:"","data-cy":"folder",class:"full q-ml-sm"},null,8,["modelValue","label","options"])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Ge,[He,(0,s.Lk)("div",Ze,[(0,s.bF)(h,{modelValue:e.model["email"],"onUpdate:modelValue":t[18]||(t[18]=t=>e.model["email"]=t),label:e.$t("pages.import.email"),outlined:"","data-cy":"email",class:(0,l.C4)("full q-ml-sm")},{append:(0,s.k6)((()=>[e.errors["email"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","label"])]),e.row_id?((0,s.uX)(),(0,s.CE)("div",et,[(0,s.bF)(g,{dense:"",style:{"margin-top":"-3px","margin-left":"5px","margin-right":"5px"},modelValue:e.model.delete_after_import,"onUpdate:modelValue":t[19]||(t[19]=t=>e.model.delete_after_import=t)},null,8,["modelValue"]),(0,s.Lk)("span",null,(0,l.v_)(e.$t("Move Emails to other folder")),1),"IMAP"==e.model["protocol"]&&""!=e.row_id&&1==e.model["delete_after_import"]?((0,s.uX)(),(0,s.Wv)(p,{key:0,modelValue:e.model["move_to_folder"],"onUpdate:modelValue":t[20]||(t[20]=t=>e.model["move_to_folder"]=t),label:e.$t("pages.import.folder"),options:e.folder_list,outlined:"",dense:"","data-cy":"folder",class:"full q-ml-sm"},null,8,["modelValue","label","options"])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",tt,[ot,(0,s.Lk)("div",st,[(0,s.bF)(h,{modelValue:e.model["password"],"onUpdate:modelValue":t[21]||(t[21]=t=>e.model["password"]=t),type:"password",label:e.$t("pages.import.password"),outlined:"","data-cy":"password",class:(0,l.C4)("full q-ml-sm")},{append:(0,s.k6)((()=>[e.errors["password"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","label"])]),(0,s.Lk)("div",lt,[(0,s.Lk)("div",it,[(0,s.bF)(g,{dense:"",style:{"margin-left":"5px","margin-right":"5px"},modelValue:e.model["merge_pdf_files"],"onUpdate:modelValue":t[22]||(t[22]=t=>e.model["merge_pdf_files"]=t)},null,8,["modelValue"]),(0,s.Lk)("span",null,(0,l.v_)(e.$t("pages.import.merge_attached_documents")),1)]),(0,s.Lk)("div",at,[(0,s.bF)(g,{dense:"",style:{"margin-left":"5px","margin-right":"5px"},modelValue:e.model["send_email_after_import"],"onUpdate:modelValue":t[23]||(t[23]=t=>e.model["send_email_after_import"]=t)},null,8,["modelValue"]),(0,s.Lk)("span",null,(0,l.v_)(e.$t("pages.import.send_email")),1)])])]),(0,s.Lk)("div",rt,[nt,(0,s.Lk)("div",dt,[(0,s.bF)(p,{class:"full q-ml-sm",outlined:"",clearable:"",modelValue:e.model["sub_org_id"],"onUpdate:modelValue":t[24]||(t[24]=t=>e.model["sub_org_id"]=t),"use-input":"",options:e.filterSubOrgsList,onFilter:e.filterSubOrgslistEvent,label:e.$t("sub_organizations"),loading:e.sub_org_list_loading,"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","label","loading"])]),(0,s.Lk)("div",ct,[e.model["send_email_after_import"]?((0,s.uX)(),(0,s.Wv)(h,{key:0,modelValue:e.model["email_subject"],"onUpdate:modelValue":t[25]||(t[25]=t=>e.model["email_subject"]=t),label:e.$t("pages.import.email_subject"),outlined:"",class:(0,l.C4)("full q-ml-sm")},null,8,["modelValue","label"])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",ut,[mt,(0,s.Lk)("div",pt,[(0,s.bF)(h,{class:(0,l.C4)(["full q-ml-sm","bg-disable"]),id:"apiKey",outlined:"",modelValue:e.api_key_ref,"onUpdate:modelValue":t[26]||(t[26]=t=>e.api_key_ref=t),readonly:"",label:e.$t("pages.import.token")},null,8,["modelValue","label"])]),(0,s.Lk)("div",_t,[e.model["send_email_after_import"]?((0,s.uX)(),(0,s.Wv)(h,{key:0,modelValue:e.model["email_body"],"onUpdate:modelValue":t[27]||(t[27]=t=>e.model["email_body"]=t),label:e.$t("pages.import.email_body"),outlined:"",class:(0,l.C4)("full q-ml-sm")},null,8,["modelValue","label"])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",ht,[gt,(0,s.Lk)("div",ft,[(0,s.bF)(h,{modelValue:e.model["error_notification_email"],"onUpdate:modelValue":t[28]||(t[28]=t=>e.model["error_notification_email"]=t),label:e.$t("pages.import.error_notification_email"),outlined:"",class:(0,l.C4)("full q-ml-sm")},null,8,["modelValue","label"])]),(0,s.Lk)("div",bt,[(0,s.Lk)("div",vt,[(0,s.bF)(g,{dense:"",style:{"margin-left":"5px","margin-right":"5px"},modelValue:e.model["use_filename_filter"],"onUpdate:modelValue":t[29]||(t[29]=t=>e.model["use_filename_filter"]=t)},null,8,["modelValue"]),(0,s.Lk)("span",null,(0,l.v_)(e.$t("pages.import.use_filename_filter")),1)])])])])),_:1})),e.Office365_selected&&1!=e.ms_is_authenticated?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(f,{key:2,class:"p-t-0"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",kt,[yt,wt,(0,s.Lk)("div",Et,[1==e.ms_is_authenticated?((0,s.uX)(),(0,s.Wv)(_,{key:0,class:"q-ml-sm float-right",label:e.$t("pages.import.save"),onClick:t[30]||(t[30]=t=>e.saveFolder())},null,8,["label"])):(0,s.Q3)("",!0),e.row_id?((0,s.uX)(),(0,s.Wv)(_,{key:1,appearance:"secondary",class:"q-ml-sm float-right",label:e.$t("pages.import.import"),onClick:t[31]||(t[31]=t=>e.manual_import())},null,8,["label"])):(0,s.Q3)("",!0),e.Office365_selected?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(_,{key:2,type:"submit",class:"q-ml-sm float-right",label:e.$t("save")},null,8,["label"])),(0,s.bo)((0,s.bF)(_,{class:"float-right",appearance:"cancel",label:e.$t("cancel")},null,8,["label"]),[[k]])])])])),_:1}))],32),(0,s.bF)(b,{showing:e.loading,class:"z-index-1"},{default:(0,s.k6)((()=>[Lt])),_:1},8,["showing"])])),_:1})}var Ct=o(78652),At=o(7813),Rt=function(e,t,o,s){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function a(e){try{n(s.next(e))}catch(t){i(t)}}function r(e){try{n(s["throw"](e))}catch(t){i(t)}}function n(e){e.done?o(e.value):l(e.value).then(a,r)}n((s=s.apply(e,t||[])).next())}))};const Vt=(0,s.pM)({el:"#app",mixins:[T.A,V.A],props:{selected_model:{},api_key:{type:String,default:""}},components:{},data(){return{}},setup(){const e=(0,q.cY)(),{encryptions:t,protocols:o,subOrgList:s,sub_org_list_loading:l}=(0,R.bP)(e),i=(0,$.KR)(e.subOrgList);return{EMAIL_ENCRYPTION_KEY:(0,$.KR)(""),subOrgList:s,sub_org_list_loading:l,filterSubOrgsList:i,protocols:o,encryptions:t,loading:(0,$.KR)(!1),model:(0,$.KR)({}),row_id:(0,$.KR)(""),errors:(0,$.KR)({}),Office365_selected:(0,$.KR)(!1),use_folder:(0,$.KR)(!1),use_email:(0,$.KR)(!1),delete_after_import:(0,$.KR)(!1),send_email_after_import:(0,$.KR)(!1),ms_url:(0,$.KR)("https://microsoft.com/devicelogin"),ms_code:(0,$.KR)(""),ms_authenticate:(0,$.KR)(!1),ms_is_authenticated:(0,$.KR)(!1),ms_message:(0,$.KR)("Microsoft o365 is authenticated already."),api_key_ref:(0,$.KR)(""),folder_list:(0,$.KR)([])}},mounted:function(){const e="thi5i5@very5ecurehardc0d3denCrIp";if(void 0==e)throw"Missing EMAIL_ENCRYPTION_KEY env - unable to load";this.EMAIL_ENCRYPTION_KEY=e,this.initView()},methods:{initView(){return Rt(this,void 0,void 0,(function*(){this.api_key_ref=this.api_key,this.row_id=this.selected_model.hasOwnProperty("id")?this.selected_model.id:"",""!=this.row_id&&(yield this.getFolders()),this.folder_list,this.model=JSON.parse(JSON.stringify(this.selected_model));for(let[e,t]of Object.entries(this.model))(t||"merge_pdf_files"!=e)&&(t||"delete_after_import"!=e)&&(t||"is_active"!=e)&&(t||"send_email_after_import"!=e)&&(t||"use_filename_filter"!=e)?t||(this.model[e]=""):this.model[e]=!1;this.protocolUpdated(),"OAuth Office365"==this.model.protocol&&(this.ms_is_authenticated=!0,"null"!=this.model.shared_email&&null!=this.model.shared_email?this.use_email=!0:(this.model.shared_email="",this.use_email=!1)),this.model.hasOwnProperty("service_type")||(this.model.service_type="Other"),null!=this.model["password"]&&""!=this.model["password"]&&(this.model["password"]=this.decryptPassword(this.model["password"]).toString(At.fk.Utf8)),this.row_id||this.resetForm()}))},resetForm(){this.model={port:"",email:"",server:"",folder:"",skip:!1,username:"",password:"",protocol:"",active:!1,encryption:"",sub_org_id:"",email_body:"",shared_email:"",email_subject:"",whole_email:!1,service_type:"Other",merge_pdf_files:!1,use_filename_filter:!1,delete_after_import:!1,error_notification_email:"",send_email_after_import:!1}},submitFrom(){return Rt(this,void 0,void 0,(function*(){try{this.loading=!0,"OAuth Office365"==this.model.protocol&&this.updateModel();const e=yield oe.D.AddUpdateEmail(this.prepareApiData());if(!e.success)throw e.message;if(this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),"OAuth Office365"!==this.model.protocol)return this.resetForm(),void this.updateEmailImportEvent();"OAuth Office365"==this.model.protocol&&e.hasOwnProperty("code")&&(this.model=e.data,this.row_id=this.model.id,this.ms_code=e.code,this.openMsPage(),this.ms_authenticate=!0);const t=new CustomEvent("record_saved",{detail:{}});document.dispatchEvent(t)}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}}))},prepareApiData(){let e=this.encryptPassword(),t={email:this.model.email,shared_email:this.model.shared_email,password:e,username:this.model.username,server:this.model.server,port:this.model.port,encryption:this.model.encryption,protocol:this.model.protocol,whole_email:""!==this.model.whole_email&&this.model.whole_email,skip:""!==this.model.skip&&this.model.skip,api_key:this.api_key,sub_org_id:this.model.sub_org_id,folder:"SSL"!=this.model.encryption||"IMAP"!=this.model.protocol?"":this.model.folder,email_body:this.model.email_body,email_subject:this.model.email_subject,merge_pdf_files:this.model.merge_pdf_files,use_filename_filter:this.model.use_filename_filter,delete_after_import:this.model.delete_after_import,send_email_after_import:this.model.send_email_after_import,error_notification_email:this.model.error_notification_email,move_to_folder:1==this.model.delete_after_import?this.model.move_to_folder:""};return this.row_id&&(t["id"]=this.row_id),t},encryptPassword(){var e=At.fk.Utf8.parse(this.EMAIL_ENCRYPTION_KEY),t=At.c5.encrypt(this.model.password,e,{mode:At.Mq.ECB,padding:At.eV.PKCS7});return t},decryptPassword(e){var t=At.fk.Utf8.parse(this.EMAIL_ENCRYPTION_KEY),o=At.c5.decrypt(e,t,{mode:At.Mq.ECB});return o},updateModel(){this.model.password="",this.model.username="",this.model.server="",this.model.port="",this.model.encryption="",this.model.folder="",this.model.email_body="",this.model.email_subject="",this.model.shared_email=null,this.model.sub_org_id=null},copyText(){(0,Ct.A)(this.ms_code).then((()=>{this.showSuccessToast("Copied!")}))},updateEmailImportEvent(){const e=new CustomEvent("email_import_updated",{});document.dispatchEvent(e)},openMsPage(){window.open(this.ms_url,"_blank")},protocolUpdated(){"OAuth Office365"==this.model.protocol?this.Office365_selected=!0:this.Office365_selected=!1},msfinish(){return Rt(this,void 0,void 0,(function*(){try{this.loading=!0;const e=yield oe.D.finishMsAuth(this.row_id);1==e.success&&(this.ms_is_authenticated=!0,this.showSuccessToast(this.$t("Authentication completed")))}catch(e){this.showErrorToast(this.$t("Something failed on the transmission. Please try again."))}finally{this.loading=!1}}))},manual_import(){return Rt(this,void 0,void 0,(function*(){this.loading=!0,yield oe.D.performManuelImportMail(this.row_id),this.loading=!1,this.showSuccessToast(this.$t("pages.messages.import_try")),this.$router.push("/dashboard")}))},validateLoginTest(){let e=!0;this.resetErrors();const t=["folder","whole_email","skip","active"];if("OAuth Office365"===this.model.protocol)return e=!1,this.showErrorToast(this.$t("service_type_not_supported")),e;for(const[o,s]of Object.entries(this.model))t.includes(o)||s&&0!=String(s).length||(e=!1,this.errors[o]=!0);return e},resetErrors(){for(const[e,t]of Object.entries(this.model))this.errors[e]=!1},saveFolder(){return Rt(this,void 0,void 0,(function*(){try{this.loading=!0;const e={id:this.row_id,folder:1==this.use_folder?this.model.folder:"null",shared_email:1==this.use_email?this.model.shared_email:"null",sub_org_id:this.model.sub_org_id,delete_after_import:this.model.delete_after_import,move_to_folder:this.model.move_to_folder};let t=yield oe.D.saveFolder(e);if(!t.success)throw t;this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),this.resetForm(),this.updateEmailImportEvent()}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(e)}finally{this.loading=!1}}))},getFolders(){return Rt(this,void 0,void 0,(function*(){try{this.loading=!0;let e=yield oe.D.getFolders(this.row_id);if(!e.success)throw e;this.folder_list=e.data}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(e)}finally{this.loading=!1}}))},filterSubOrgslistEvent(e,t,o){t(e?()=>{const t=e.toLowerCase();this.filterSubOrgsList=this.subOrgList.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}:()=>{this.filterSubOrgsList=this.subOrgList})},copyToClipboard(){navigator.clipboard.writeText(this.receiveEmail).then((()=>{this.showSuccessToast(this.$t("success_copy_to_clipboard"))})).catch((e=>{this.showErrorToast(this.$t("error_copy_to_clipboard"))}))}}});var $t=o(23316),qt=o(36914),Tt=o(39150),xt=o(56384),It=o(44189),Dt=o(50492),St=o(66908),Ot=o(39035),Qt=o(88672);const Kt=(0,D.A)(Vt,[["render",Ft]]),Pt=Kt;P()(Vt,"components",{QCard:$t.A,QToolbar:qt.A,QToolbarTitle:Tt.A,QBtn:xt.A,QCardSection:It.A,QSelect:Q.A,QIcon:Dt.A,QTooltip:O.A,QInput:S.A,QToggle:St.A,QInnerLoading:Ot.A}),P()(Vt,"directives",{ClosePopup:Qt.A});const Xt={class:"text-weight-bold primary-bg-text"},Wt={class:"q-pl-md q-pr-md q-pt-md"},Mt={class:"text-item"},Ut=(0,s.Lk)("div",{class:"row float-right"},null,-1),Nt={key:0,style:{"text-wrap":"wrap"}},Yt={key:1},zt={class:"q-mt-md row full-width"};function jt(e,t,o,i,a,r){const n=(0,s.g2)("q-toolbar-title"),d=(0,s.g2)("q-btn"),c=(0,s.g2)("q-toolbar"),u=(0,s.g2)("q-th"),m=(0,s.g2)("q-tr"),p=(0,s.g2)("q-td"),_=(0,s.g2)("q-icon"),h=(0,s.g2)("q-table"),g=(0,s.g2)("q-pagination"),f=(0,s.g2)("q-card-section"),b=(0,s.g2)("q-card"),v=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(b,{style:{width:"1060px","max-width":"1060px"}},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"secondary-toolbar"},{default:(0,s.k6)((()=>[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.Lk)("span",Xt,(0,l.v_)(e.$t("pages.import.connection_logs")),1)])),_:1}),(0,s.bo)((0,s.bF)(d,{flat:"",round:"",dense:"",class:"primary-bg-text",icon:"close",onClick:e.cleanupOnhide},null,8,["onClick"]),[[v]])])),_:1}),(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Wt,[(0,s.bF)(h,{class:"dashboard-table-style dashboard-table-height back-white","rows-per-page-options":[0],rows:e.rows,columns:e.columns,"row-key":"id","hide-bottom":"",flat:"","table-header-class":"table-header-text back-white","no-data-label":e.$t("no_data_found"),"no-results-label":"The filter didn't uncover any results",style:{overflow:"auto",height:"550px"}},{header:(0,s.k6)((t=>[(0,s.bF)(m,{props:t},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.cols,((e,o)=>((0,s.uX)(),(0,s.Wv)(u,{key:e.name,props:t,"data-index":o},{default:(0,s.k6)((()=>[(0,s.Lk)("span",Mt,(0,l.v_)(e.label),1)])),_:2},1032,["props","data-index"])))),128))])),_:2},1032,["props"]),0==e.rows.length?((0,s.uX)(),(0,s.Wv)(m,{key:0},{default:(0,s.k6)((()=>[(0,s.bF)(p,{colspan:"20",class:"text-center"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("no_data_found")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),body:(0,s.k6)((e=>[(0,s.bF)(m,{props:e,id:e.key},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.cols,(t=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t.name},["action"===t.name?((0,s.uX)(),(0,s.Wv)(p,{key:0},{default:(0,s.k6)((()=>[Ut])),_:1})):(0,s.Q3)("",!0),"success"===t.name?((0,s.uX)(),(0,s.Wv)(p,{key:1},{default:(0,s.k6)((()=>[(0,s.bF)(_,{name:!0===e.row[t.name]?"check_circle":"cancel",color:!0===e.row[t.name]?"green":"red",size:"20px"},null,8,["name","color"])])),_:2},1024)):((0,s.uX)(),(0,s.Wv)(p,{key:2},{default:(0,s.k6)((()=>["message"===t.name?((0,s.uX)(),(0,s.CE)("span",Nt,(0,l.v_)(e.row[t.name]),1)):((0,s.uX)(),(0,s.CE)("span",Yt,(0,l.v_)(e.row[t.name]),1))])),_:2},1024))],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","no-data-label"]),(0,s.Lk)("div",zt,[e.total_pages>1?((0,s.uX)(),(0,s.Wv)(g,{key:0,modelValue:e.current_page,"onUpdate:modelValue":t[0]||(t[0]=t=>e.current_page=t),max:3,"max-pages":3,"direction-links":"",unelevated:"",color:"black","active-color":"black",class:"doc2-pagination q-mb-md q-ml-auto q-mr-auto",onClick:t[1]||(t[1]=t=>e.nexPageClicked())},null,8,["modelValue"])):(0,s.Q3)("",!0)])])])),_:1})])),_:1})}var Bt=o(36246),Jt=function(e,t,o,s){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function a(e){try{n(s.next(e))}catch(t){i(t)}}function r(e){try{n(s["throw"](e))}catch(t){i(t)}}function n(e){e.done?o(e.value):l(e.value).then(a,r)}n((s=s.apply(e,t||[])).next())}))};const Gt=(0,s.pM)({mixins:[V.A,T.A],props:{connection_id:{type:String,required:!0},connection_type:{type:String,required:!0}},components:{},watch:{},computed:{},mounted:function(){this.init(),this.checkConnectionLogs()},unmounted:function(){this.cleanupOnhide()},methods:{init(){this.prepareColumns()},checkConnectionLogs(){try{this.resetPagination(),this.getDataFromServer()}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}},getDataFromServer(){return Jt(this,void 0,void 0,(function*(){try{this.loading=!0,this.request_params={},this.request_params["offset"]=this.offset,this.request_params["limit"]=10,this.request_params["connection_type"]=this.connection_type,this.request_params["connection_id"]=this.connection_id,this.request_params["order_by_direction"]="desc";const e=yield oe.D.fetchConnectionLogs(this.request_params);if(!1===e.success)throw{message:e.message};this.total_records=e.total_records_count,this.setTotalPages(),this.prepareRows(e.elements)}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}}))},prepareRows(e){this.rows=[],Array.from(e).forEach((e=>{const t=e;this.addNewRow(t)})),logInfo(this.rows.length)},addNewRow(e){let t=Object.assign({},e);return t["created_on"]=this.formateDate(e["created_on"],"DD-MM-YYYY HH:mm:ss"),this.rows.push(t),this.rows.length.toString()},formateDate(e,t){return Bt.Ay.formatDate(e,t)},resetPagination(){this.offset=0,this.total_pages=0,this.current_page=1,this.total_records=0},setTotalPages(){this.total_pages=Math.ceil(this.total_records/this.page_size)},nexPageClicked(){return Jt(this,void 0,void 0,(function*(){try{this.calculateOffset(),yield this.getDataFromServer()}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}}))},calculateOffset(){this.offset=10*(this.current_page-1),logInfo(this.offset)},prepareColumns(){this.columns=[],this.columns.push({name:"success",label:this.$t("status"),field:"status",align:"left"}),this.columns.push({name:"created_on",label:this.$t("pages.import.attempted_on"),field:"created_on",align:"left"}),this.columns.push({name:"message",label:this.$t("pages.support.message"),field:"message",align:"left"})},cleanupOnhide(){this.resetPagination()}},setup(){return{loading:(0,$.KR)(!1),request_params:(0,$.KR)({}),current_page:(0,$.KR)(1),total_pages:(0,$.KR)(0),offset:(0,$.KR)(0),page_size:(0,$.KR)(8),total_records:(0,$.KR)(0),columns:(0,$.KR)([]),rows:(0,$.KR)([])}}});var Ht=o(42315),Zt=o(44488),eo=o(57722),to=o(45262),oo=o(54700);const so=(0,D.A)(Gt,[["render",jt]]),lo=so;P()(Gt,"components",{QCard:$t.A,QToolbar:qt.A,QToolbarTitle:Tt.A,QBtn:xt.A,QCardSection:It.A,QTable:Ht.A,QTr:Zt.A,QTh:eo.A,QTd:to.A,QIcon:Dt.A,QPagination:oo.A,QInnerLoading:Ot.A}),P()(Gt,"directives",{ClosePopup:Qt.A});var io=o(29508),ao=o(51476);const ro="sub_app",no={methods:{async getSubscriptionFromServer(){try{const e=await oe.jD.getSubscription();if(!e||!e||!Array.isArray(e)||0==e.length)return;(0,ao._Y)(ro,this.getDoc2AppSubscription(e))}catch(e){logInfo(e)}},getDoc2AppSubscription(e){let t=!1,o={};for(let s of e){const e=s.apps;for(let l of e)if("FELLOW_DOC2"===l.app_key){t=!0,o=s;break}if(!0===t)break}return o},getRemainingDays(){let e=-1,t=this.getSubscription();if(!t)return null;let o=this.getDateFromServerDate(t.end_date);const s=(new Date).setHours(0,0,0,0);return e=this.datediff(s,o),e},datediff(e,t){return Math.round((t-e)/864e5)},getDateFromServerDate(e){var t=e.split(" ");return new Date(t[0]).setHours(0,0,0,0)},async getsubscriptionRemainingDays(){let e=0;try{e=this.getRemainingDays(),null==e&&(await this.getSubscriptionFromServer(),e=this.getRemainingDays())}catch(t){logInfo(t)}return e},subscriptionAlertShowDays(){return 30},getSubscription(){let e=(0,ao.KW)(ro);return e&&e.hasOwnProperty("start_date")&&e.hasOwnProperty("end_date")?e:null}}};var co=o(41498),uo=o(45022),mo=function(e,t,o,s){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function a(e){try{n(s.next(e))}catch(t){i(t)}}function r(e){try{n(s["throw"](e))}catch(t){i(t)}}function n(e){e.done?o(e.value):l(e.value).then(a,r)}n((s=s.apply(e,t||[])).next())}))};const po=(0,s.pM)({mixins:[T.A,V.A,no,te.A],components:{EditCreate:Pt,ConnectionLogs:lo,ImportLogs:io.A},watch:{sub_org_list_loading(e,t){!1===e&&this.initView()}},mounted:function(){const e="thi5i5@very5ecurehardc0d3denCrIp";void 0!=e?(this.EMAIL_ENCRYPTION_KEY=e,this.initDragDropColumns("email_import_table","label",["action"]),document.addEventListener("email_import_table-column-drop",this.onDropColumns),document.addEventListener("email_import_updated",this.emailImportUpdated),document.addEventListener("hide_import_logs",this.onImportLogPopupClose),this.handleSubOrgs()):this.showErrorToast("Missing an important value - unable to load email import")},unmounted:function(){document.removeEventListener("email_import_updated",this.emailImportUpdated),document.removeEventListener("email_import_table-column-drop",this.onDropColumns),document.removeEventListener("hide_import_logs",this.onImportLogPopupClose)},methods:{showMailConnectionLogs(e){this.connection_type="email_import",this.connection_id=e,this.show_connection_logs=!0},showMailImportLogs(e){this.show_import_logs=!1,this.connection_id=e,this.show_import_logs=!0},onImportLogPopupClose(){this.show_import_logs=!1},initView(){return mo(this,void 0,void 0,(function*(){try{this.loading=!0,this.prepareColumns(),yield this.getAppKey(),this.flattenSubOrgs(),this.getList()}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}}))},handleSubOrgs(){this.subOrgList.length>1&&this.initView(),this.sub_org_list_loading&&(this.loading=!0)},getList(){return mo(this,void 0,void 0,(function*(){try{this.loading=!0,this.prepareColumns();const e=yield oe.D.getList();if(0==e.data.length)return;this.prepareRows(e.data)}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}}))},prepareRows(e){this.rows=[],Array.from(e).forEach((e=>{const t=e;this.addNewRow(t)}))},addNewRow(e){let t=Object.assign({},e);return this.rows.push(t),this.rows.length.toString()},createNewRecord(){this.selected_row={},this.show_edit_create=!0},emailImportUpdated(){this.show_edit_create=!1,this.getList()},editRow(e,t){this.selected_row=JSON.parse(JSON.stringify(t)),this.show_edit_create=!0},deleteClicked(e,t){return mo(this,void 0,void 0,(function*(){try{this.loading=!0;const o=yield oe.D.deleteRecord(t);!0===o.success&&this.rows.splice(e,1),this.showSuccessToast(this.$t("success"))}catch(o){const e=se.t.getErrorMessage(o);this.showErrorToast(e),logError(o)}finally{this.loading=!1}}))},getAppKey(){return mo(this,void 0,void 0,(function*(){try{this.loading=!0;const e={app_key:"FELLOW_DOC2"},t=yield oe.jD.getAppSubscription(e);this.api_key=t[0].token}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}}))},de_activateEmail(e){return mo(this,void 0,void 0,(function*(){try{this.loading=!0;const t=e.id,o=e.is_active;yield oe.D.DeActivateEmail(t,o);this.showSuccessToast(this.$t("success"))}catch(t){const e=se.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}finally{this.loading=!1}}))},checkLogin(e){return mo(this,void 0,void 0,(function*(){try{this.loading=!0;const t=yield oe.D.testEmailLogin(String(e.id));if(!t||t.hasOwnProperty("success")&&!1===t.success)throw t;this.showSuccessToast(this.$t("check_login_success"))}catch(t){const e=se.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}finally{this.loading=!1}}))},flattenSubOrgs(){this.subOrgList.forEach((e=>{this.sub_orgs_flattened[e.value]=e.label}))},prepareColumns(){this.columns=[],this.columns.push({name:"username",label:this.$t("username"),field:"username",align:"left"}),this.columns.push({name:"email",label:this.$t("email"),field:"email",align:"left"}),this.columns.push({name:"shared_email",label:this.$t("shared_email"),field:"shared_email",align:"left"}),this.columns.push({name:"protocol",label:this.$t("protocol"),field:"protocol",align:"left"}),this.columns.push({name:"encryption",label:this.$t("encryption"),field:"encryption",align:"left"}),this.columns.push({name:"sub_org_id",label:this.$t("sub_organizations"),field:"sub_org_id",align:"left"}),this.columns.push({name:"folder",label:this.$t("folder"),field:"folder",align:"left"}),this.columns.push({name:"action",label:this.$t("action"),field:"action",align:"right"});const e=uo.A.getItem("EMAIL_IMPORT_SETTING_COLUMNS");this.columns=e&&""!=e?JSON.parse(e):this.columns},onDropColumns(){uo.A.set("EMAIL_IMPORT_SETTING_COLUMNS",JSON.stringify(this.columns))},webSiteLink(){const e=(0,co.TEc)("import_settings");e&&window.open(e)}},setup(){const e=(0,q.cY)(),{subOrgList:t,sub_org_list_loading:o}=(0,R.bP)(e);let s=(0,$.KR)({});const l=(0,$.KR)(null);return{sub_org_list_loading:o,subOrgList:t,myForm:l,import_email:s,errors:(0,$.KR)({}),show_connection_logs:(0,$.KR)(!1),show_import_logs:(0,$.KR)(!1),connection_type:(0,$.KR)(""),connection_id:(0,$.KR)({}),sub_orgs_flattened:(0,$.KR)({}),processing:(0,$.KR)(!1),ms_url:(0,$.KR)("https://microsoft.com/devicelogin"),ms_code:(0,$.KR)(""),ms_authenticate:(0,$.KR)(!1),ms_is_authenticated:(0,$.KR)(!1),ms_message:(0,$.KR)("Microsoft o365 is authenticated already."),loading:(0,$.KR)(!1),userDialog:(0,$.KR)(!1),columns:(0,$.KR)([]),rows:(0,$.KR)([]),show_edit_create:(0,$.KR)(!1),selected_row:(0,$.KR)({}),api_key:(0,$.KR)(""),EMAIL_ENCRYPTION_KEY:(0,$.KR)("")}},data(){return{}}});var _o=o(84436),ho=o(53999),go=o(90124),fo=o(25173),bo=o(10386),vo=o(82156);const ko=(0,D.A)(po,[["render",ee]]),yo=ko;P()(po,"components",{QTooltip:O.A,QTable:Ht.A,QTr:Zt.A,QTh:eo.A,QTd:to.A,QBtn:xt.A,QMenu:_o.A,QList:ho.A,QItem:go.A,QItemSection:fo.A,QSeparator:bo.A,QInnerLoading:Ot.A,QDialog:vo.A});const wo={class:"container"},Eo={class:"row mt-8 mb-25"},Lo={class:"row"},Fo={key:0,class:"cursor-default"},Co={key:1},Ao={class:"row float-right"},Ro={class:"text-red-14"},Vo=(0,s.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function $o(e,t,o,i,a,r){const n=(0,s.g2)("f-btn"),d=(0,s.g2)("q-th"),c=(0,s.g2)("q-tr"),u=(0,s.g2)("q-item-section"),m=(0,s.g2)("q-item"),p=(0,s.g2)("q-separator"),_=(0,s.g2)("q-list"),h=(0,s.g2)("q-menu"),g=(0,s.g2)("q-btn"),f=(0,s.g2)("q-td"),b=(0,s.g2)("q-table"),v=(0,s.g2)("q-inner-loading"),k=(0,s.g2)("EditCreate"),y=(0,s.g2)("q-dialog"),w=(0,s.g2)("ConnectionLogs");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",wo,[(0,s.Lk)("div",Eo,[(0,s.bF)(n,{class:"q-ml-auto float-right",icon:"add",label:e.$t("new"),id:"create_new_ftp",onClick:e.createNewRecord},null,8,["label","onClick"])]),(0,s.Lk)("div",Lo,[(0,s.bF)(b,{style:{width:"100%",height:"100%"},class:"dashboard-table-style dashboard-table-height back-white",rows:e.rows,columns:e.columns,"row-key":"name",flat:"","no-data-label":e.$t("pages.messages.no_record_found"),"table-header-class":"table-header-text","rows-per-page-options":[0],id:"ftp_import_table"},{header:(0,s.k6)((t=>[(0,s.bF)(c,{props:t},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.cols,((o,i)=>((0,s.uX)(),(0,s.Wv)(d,{key:o.name,props:t,"data-index":i,draggable:e.canDragDropColumn(o),dropzone:e.canDragDropColumn(o),direction:"horizontal",onDragstart:t=>e.onDragStart(t,e.columns,i),onDrop:(0,M.D$)((t=>e.handleDrop(t,i)),["prevent"]),onDragover:(0,M.D$)((t=>e.onDragOver(t,i)),["prevent"]),onDragenter:(0,M.D$)(e.onDragEnter,["prevent"]),onDragleave:(0,M.D$)(e.onDragLeave,["prevent"]),style:(0,l.Tr)({cursor:e.getIsDragging?"pointer":"move"})},{default:(0,s.k6)((()=>["action"==o.name?((0,s.uX)(),(0,s.CE)("span",Fo,(0,l.v_)(o.label),1)):((0,s.uX)(),(0,s.CE)("span",Co,(0,l.v_)(o.label),1))])),_:2},1032,["props","data-index","draggable","dropzone","onDragstart","onDrop","onDragover","onDragenter","onDragleave","style"])))),128))])),_:2},1032,["props"])])),body:(0,s.k6)((o=>[(0,s.bF)(c,{props:o,id:o.key},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.cols,(i=>((0,s.uX)(),(0,s.CE)(s.FK,{key:i.name},["action"===i.name?((0,s.uX)(),(0,s.Wv)(f,{key:0,style:{width:"236px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ao,[(0,s.bF)(g,{flat:"",dense:"",round:"",onClick:t[0]||(t[0]=(0,M.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,s.k6)((()=>[(0,s.bF)(h,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,s.k6)((()=>[(0,s.bF)(_,{dense:"",style:{"min-width":"100px"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,{clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(u,{onClick:t=>e.checkConnection(o.row.id)},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("test_connection")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,s.bF)(m,{clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(u,{onClick:t=>e.showFtpConnectionLogs(o.row.id)},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.import.connection_logs")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,s.bF)(p,{inset:""}),(0,s.bF)(m,{clickable:""},{default:(0,s.k6)((()=>[o.row.is_active?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(u,{key:0,onClick:t=>{o.row.is_active=!0,e.de_activate(o.row)}},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("activate")),1)])),_:2},1032,["onClick"])),o.row.is_active?((0,s.uX)(),(0,s.Wv)(u,{key:1,onClick:t=>{o.row.is_active=!1,e.de_activate(o.row)}},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("deactivate")),1)])),_:2},1032,["onClick"])):(0,s.Q3)("",!0)])),_:2},1024),(0,s.bF)(m,{clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(u,{onClick:t=>e.editRow(o.rowIndex,o.row)},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("edit")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,s.bF)(p,{inset:""}),(0,s.bF)(m,{clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(u,{onClick:t=>e.deleteClicked(o.rowIndex,o.row.id)},{default:(0,s.k6)((()=>[(0,s.Lk)("span",Ro,(0,l.v_)(e.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])])),_:2},1024)):"sub_org_id"===i.name?((0,s.uX)(),(0,s.Wv)(f,{key:1,class:(0,l.C4)(o.row.is_active?"":"email-import-deactive-column")},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.sub_orgs_flattened[o.row[i.name]]),1)])),_:2},1032,["class"])):((0,s.uX)(),(0,s.Wv)(f,{key:2,class:(0,l.C4)(1==o.row.is_active?"":"email-import-deactive-column")},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)("null"===o.row[i.name]?"":o.row[i.name]),1)])),_:2},1032,["class"]))],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","no-data-label"])])]),(0,s.bF)(v,{showing:e.loading,class:"z-index-1",style:{"z-index":"1000"}},{default:(0,s.k6)((()=>[Vo])),_:1},8,["showing"]),(0,s.bF)(y,{modelValue:e.show_edit_create,"onUpdate:modelValue":t[1]||(t[1]=t=>e.show_edit_create=t),persistent:"",onKeydown:t[2]||(t[2]=(0,M.jR)((t=>e.show_edit_create=!1),["esc"]))},{default:(0,s.k6)((()=>[(0,s.bF)(k,{selected_model:e.selected_row,api_key:e.api_key},null,8,["selected_model","api_key"])])),_:1},8,["modelValue"]),(0,s.bF)(y,{modelValue:e.show_connection_logs,"onUpdate:modelValue":t[3]||(t[3]=t=>e.show_connection_logs=t)},{default:(0,s.k6)((()=>[(0,s.bF)(w,{connection_id:e.connection_id,connection_type:"ftp_import"},null,8,["connection_id"])])),_:1},8,["modelValue"])],64)}const qo={key:0,class:"text-weight-bold"},To={key:1,class:"text-weight-bold"},xo={class:"row q-mt-md"},Io={class:"col-2"},Do={class:"col-7"},So={class:"col-3"},Oo={class:"row q-mt-md"},Qo={class:"col-2"},Ko={class:"col-7"},Po={class:"col-3"},Xo={class:"row q-mt-md"},Wo={class:"col-2"},Mo={key:1},Uo={class:"col-7"},No={class:"col-3"},Yo={style:{"margin-top":"15px"}},zo={class:"row q-mt-md"},jo=(0,s.Lk)("div",{class:"col-2"},null,-1),Bo={class:"col-7"},Jo={class:"col-3"},Go={class:"row q-mt-md"},Ho=(0,s.Lk)("div",{class:"col-2"},null,-1),Zo={class:"col-7"},es={class:"col-3"},ts={style:{"margin-top":"15px"}},os={class:"row q-mt-md"},ss=(0,s.Lk)("div",{class:"col-2"},null,-1),ls={class:"col-7"},is=(0,s.Lk)("div",{class:"col-3"},null,-1),as={class:"row q-mt-md"},rs=(0,s.Lk)("div",{class:"col-2"},null,-1),ns={class:"col-7"},ds=(0,s.Lk)("div",{class:"col-3"},null,-1),cs=(0,s.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function us(e,t,o,i,a,r){const n=(0,s.g2)("q-toolbar-title"),d=(0,s.g2)("q-btn"),c=(0,s.g2)("q-toolbar"),u=(0,s.g2)("q-tooltip"),m=(0,s.g2)("q-icon"),p=(0,s.g2)("q-select"),_=(0,s.g2)("q-input"),h=(0,s.g2)("q-toggle"),g=(0,s.g2)("q-card-section"),f=(0,s.g2)("q-inner-loading"),b=(0,s.g2)("q-card"),v=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(b,{style:{width:"1200px","max-width":"1200px",height:"600px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("form",{onSubmit:t[16]||(t[16]=(0,M.D$)(((...t)=>e.submitFrom&&e.submitFrom(...t)),["prevent","stop"]))},[(0,s.bF)(c,{class:"text-white secondary-toolbar"},{default:(0,s.k6)((()=>[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[e.row_id?((0,s.uX)(),(0,s.CE)("span",qo,(0,l.v_)(e.$t("pages.settings.master_data_lookup.edit_row")),1)):((0,s.uX)(),(0,s.CE)("span",To,(0,l.v_)(e.$t("pages.settings.master_data_lookup.create_row")),1))])),_:1}),(0,s.bo)((0,s.bF)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[v]])])),_:1}),(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",xo,[(0,s.Lk)("div",Io,[(0,s.bF)(p,{"data-cy":"ftp_type",modelValue:e.model["ftp_type"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.model["ftp_type"]=t),outlined:"",options:e.ftp_types,label:e.$t("type")},{append:(0,s.k6)((()=>[e.errors["ftp_type"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","options","label"])]),(0,s.Lk)("div",Do,[(0,s.bF)(_,{"data-cy":"ftp_server",modelValue:e.model["server"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.model["server"]=t),label:e.$t("pages.import.server"),outlined:"",class:(0,l.C4)("full q-ml-sm")},{append:(0,s.k6)((()=>[e.errors["server"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","label"])]),(0,s.Lk)("div",So,[(0,s.bF)(_,{modelValue:e.model["default_directory"],"onUpdate:modelValue":t[2]||(t[2]=t=>e.model["default_directory"]=t),label:e.$t("default_directory"),outlined:"","data-cy":"ftp_default_directory",class:"full q-ml-sm"},null,8,["modelValue","label"])])]),(0,s.Lk)("div",Oo,[(0,s.Lk)("div",Qo,[(0,s.bF)(_,{modelValue:e.model["port"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.model["port"]=t),label:e.$t("pages.import.port"),outlined:"","data-cy":"ftp_port",class:(0,l.C4)("full")},{append:(0,s.k6)((()=>[e.errors["port"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","label"])]),(0,s.Lk)("div",Ko,[(0,s.bF)(_,{modelValue:e.model["username"],"onUpdate:modelValue":t[4]||(t[4]=t=>e.model["username"]=t),class:(0,l.C4)(["full q-ml-sm","full q-ml-sm"]),label:e.$t("username"),outlined:"","data-cy":"ftp_username"},{append:(0,s.k6)((()=>[e.errors["username"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","label"])]),(0,s.Lk)("div",Po,[(0,s.bF)(p,{modelValue:e.model["import_directory"],"onUpdate:modelValue":t[5]||(t[5]=t=>e.model["import_directory"]=t),label:e.$t("import_directory"),options:e.folderOptions,loading:e.folderOptionsLoading,outlined:"","data-cy":"ftp_import_directory",class:"full q-ml-sm"},null,8,["modelValue","label","options","loading"])])]),(0,s.Lk)("div",Xo,[(0,s.Lk)("div",Wo,["FTP"==e.model["ftp_type"]||"FTPS"==e.model["ftp_type"]?((0,s.uX)(),(0,s.Wv)(h,{key:0,dense:"",class:"h-m-5",modelValue:e.model["ignore_certificate"],"onUpdate:modelValue":t[6]||(t[6]=t=>e.model["ignore_certificate"]=t),onInput:t[7]||(t[7]=t=>e.toggleIgnoreCertificate())},null,8,["modelValue"])):(0,s.Q3)("",!0),"FTP"==e.model["ftp_type"]||"FTPS"==e.model["ftp_type"]?((0,s.uX)(),(0,s.CE)("span",Mo,(0,l.v_)(e.$t("ignore_certificate")),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Uo,[(0,s.bF)(_,{modelValue:e.model["password"],"onUpdate:modelValue":t[8]||(t[8]=t=>e.model["password"]=t),type:"password",label:e.$t("pages.import.password"),outlined:"","data-cy":"ftp_password",class:(0,l.C4)("full q-ml-sm")},{append:(0,s.k6)((()=>[e.errors["password"]?((0,s.uX)(),(0,s.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red line-error-tooltip"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","label"])]),(0,s.Lk)("div",No,[(0,s.Lk)("div",Yo,[(0,s.bF)(h,{dense:"",class:"h-m-5",modelValue:e.model["move_after_import"],"onUpdate:modelValue":t[9]||(t[9]=t=>e.model["move_after_import"]=t),onInput:e.toggleArchiveImport},null,8,["modelValue","onInput"]),(0,s.Lk)("span",null,(0,l.v_)(e.$t("archive_after_import")),1)])])]),(0,s.Lk)("div",zo,[jo,(0,s.Lk)("div",Bo,[(0,s.bF)(_,{modelValue:e.model["file_name_matching_patterns"],"onUpdate:modelValue":t[10]||(t[10]=t=>e.model["file_name_matching_patterns"]=t),label:e.$t("file_name_matching_patterns"),outlined:"","data-cy":"ftp_file_name_matching_patterns",class:"full q-ml-sm"},null,8,["modelValue","label"])]),(0,s.Lk)("div",Jo,[e.model["move_after_import"]?((0,s.uX)(),(0,s.Wv)(p,{key:0,modelValue:e.model["destination_directory"],"onUpdate:modelValue":t[11]||(t[11]=t=>e.model["destination_directory"]=t),label:e.$t("archive_directory"),options:e.folderOptions,loading:e.folderOptionsLoading,outlined:"","data-cy":"ftp_archive_directory",class:"full q-ml-sm"},{append:(0,s.k6)((()=>[e.validationTriggered&&!e.model["destination_directory"].trim()?((0,s.uX)(),(0,s.Wv)(m,{key:0,name:"error",color:"red",class:"cursor-pointer"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"bg-red"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.messages.CAN_NOT_PROCEED_ON_EMPTY_FIELD")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["modelValue","label","options","loading"])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Go,[Ho,(0,s.Lk)("div",Zo,[(0,s.bF)(p,{"data-cy":"ftp_sub_org",class:"full q-ml-sm",outlined:"",clearable:"",modelValue:e.model["sub_org_id"],"onUpdate:modelValue":t[12]||(t[12]=t=>e.model["sub_org_id"]=t),"use-input":"",options:e.filterSubOrgsList,onFilter:e.filterSubOrgslistEvent,label:e.$t("sub_organizations"),loading:e.sub_org_list_loading,"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","label","loading"])]),(0,s.Lk)("div",es,[(0,s.Lk)("div",ts,[(0,s.bF)(h,{dense:"",class:"h-m-5",modelValue:e.model["include_subfolder_content"],"onUpdate:modelValue":t[13]||(t[13]=t=>e.model["include_subfolder_content"]=t),onInput:e.toggleSubfolderContentSetting},null,8,["modelValue","onInput"]),(0,s.Lk)("span",null,(0,l.v_)(e.$t("include_subfolder_content")),1)])])]),(0,s.Lk)("div",os,[ss,(0,s.Lk)("div",ls,[(0,s.bF)(_,{class:(0,l.C4)(["full q-ml-sm","bg-disable"]),"data-cy":"ftp_apiKey",outlined:"",modelValue:e.api_key_ref,"onUpdate:modelValue":t[14]||(t[14]=t=>e.api_key_ref=t),readonly:"",label:e.$t("pages.import.token")},null,8,["modelValue","label"])]),is])])),_:1}),(0,s.bF)(g,{class:"p-t-0"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",as,[rs,(0,s.Lk)("div",ns,[(0,s.bF)(d,{type:"submit",color:"primary",class:"q-ml-sm float-right",id:"ftp_btn_save",label:e.$t("save")},null,8,["label"]),e.row_id?((0,s.uX)(),(0,s.Wv)(d,{key:0,class:"q-ml-sm float-right",color:"primary",label:e.$t("test_connection"),id:"ftp_btn_test_connection",onClick:t[15]||(t[15]=t=>e.checkConnection())},{default:(0,s.k6)((()=>[e.row_id?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(u,{key:0},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("available_after_save")),1)])),_:1}))])),_:1},8,["label"])):(0,s.Q3)("",!0),(0,s.bo)((0,s.bF)(d,{id:"ftp_btn_cancel",class:"float-right highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[v]])]),ds])])),_:1})],32),(0,s.bF)(f,{showing:e.loading,class:"z-index-1"},{default:(0,s.k6)((()=>[cs])),_:1},8,["showing"])])),_:1})}var ms=function(e,t,o,s){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function a(e){try{n(s.next(e))}catch(t){i(t)}}function r(e){try{n(s["throw"](e))}catch(t){i(t)}}function n(e){e.done?o(e.value):l(e.value).then(a,r)}n((s=s.apply(e,t||[])).next())}))};const ps=(0,s.pM)({el:"#app",mixins:[T.A,V.A],props:{selected_model:{},api_key:{type:String,default:""}},components:{},data(){return{}},setup(){const e=(0,q.cY)(),{ftp_types:t,subOrgList:o,sub_org_list_loading:s}=(0,R.bP)(e),l=(0,$.KR)(e.subOrgList);return{EMAIL_ENCRYPTION_KEY:(0,$.KR)(""),subOrgList:o,sub_org_list_loading:s,filterSubOrgsList:l,ftp_types:t,loading:(0,$.KR)(!1),model:(0,$.KR)({}),row_id:(0,$.KR)(""),errors:(0,$.KR)({}),api_key_ref:(0,$.KR)(""),validationTriggered:(0,$.KR)(!1),folderOptions:(0,$.KR)([]),folderOptionsLoading:(0,$.KR)(!1)}},mounted:function(){const e="thi5i5@very5ecurehardc0d3denCrIp";if(void 0==e)throw"Missing EMAIL_ENCRYPTION_KEY env - unable to load";this.EMAIL_ENCRYPTION_KEY=e,this.initView()},methods:{initView(){this.api_key_ref=this.api_key,this.row_id=this.selected_model.hasOwnProperty("id")?this.selected_model.id:"",this.model=JSON.parse(JSON.stringify(this.selected_model));for(let[e,t]of Object.entries(this.model))t||(this.model[e]="");null!=this.model["password"]&&""!=this.model["password"]&&(this.model["password"]=this.decryptPassword(this.model["password"]).toString(At.fk.Utf8)),this.model["move_after_import"]=!!this.model["move_after_import"],this.model["ignore_certificate"]=!!this.model["ignore_certificate"],this.model["include_subfolder_content"]=!!this.model["include_subfolder_content"],this.model["server"]=this.model["server_url"],this.fetchFolders(),this.row_id||this.resetForm()},resetForm(){this.model={username:"",password:"",server:"",port:"22",default_directory:"",file_name_matching_patterns:"",ftp_type:"SFTP",ignore_certificate:!1,sub_org_id:"",move_after_import:!1,destination_directory:""}},submitFrom(){return ms(this,void 0,void 0,(function*(){try{if(!this.validateForm())return;this.loading=!0;const e=yield oe.D.ftpImportAddUpdate(this.prepareApiData());if(!e.success)throw e;e.data.hasOwnProperty("id")&&(this.row_id=e.data.id),this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),yield this.checkConnection();const t=new CustomEvent("ftp_import_updated",{detail:{}});document.dispatchEvent(t)}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}}))},validateForm(){let e=!0;this.validationTriggered=!0,this.resetErrors(),this.model["default_directory"]||(e=!1,this.errors["default_directory"]=!0);const t=["default_directory","file_name_matching_patterns","sub_org_id","destination_directory","move_after_import","ignore_certificate","import_directory","include_subfolder_content"];for(const[o,s]of Object.entries(this.model))t.includes(o)||"is_active"===o||s&&0!=String(s).length||(e=!1,this.errors[o]=!0);return this.validateArchiveDirectory()||(e=!1),e},validateArchiveDirectory(){var e;if(!this.model.destination_directory)return!0;const t=this.model.destination_directory.trim(),o=(null===(e=this.model.import_directory)||void 0===e?void 0:e.trim())||"",s=this.model.default_directory.trim();if(this.model.include_subfolder_content){if(o&&this.isSubPath(t,o))return this.errors["destination_directory"]=!0,this.showErrorToast(this.$t("archive_inside_import_path")),!1;if(!o&&this.isSubPath(t,s))return this.errors["destination_directory"]=!0,this.showErrorToast(this.$t("archive_inside_default_path")),!1}return!0},isSubPath(e,t){return e.startsWith(t+"/")},prepareApiData(){let e=this.encryptPassword();return this.model.ignore_certificate=!!this.model.ignore_certificate,{password:e,username:this.model.username,server:this.model.server,port:this.model.port,ftp_type:this.model.ftp_type,file_name_matching_patterns:this.model.file_name_matching_patterns,api_key:this.api_key,sub_org_id:this.model.sub_org_id,id:this.row_id,ignore_certificate:this.model.ignore_certificate,default_directory:this.model.default_directory,move_after_import:this.model.move_after_import,destination_directory:this.model.destination_directory,include_subfolder_content:this.model.include_subfolder_content,import_directory:this.model.import_directory}},encryptPassword(){var e=At.fk.Utf8.parse(this.EMAIL_ENCRYPTION_KEY),t=At.c5.encrypt(this.model.password,e,{mode:At.Mq.ECB,padding:At.eV.PKCS7});return t},decryptPassword(e){var t=At.fk.Utf8.parse(this.EMAIL_ENCRYPTION_KEY),o=At.c5.decrypt(e,t,{mode:At.Mq.ECB});return o},updateFTPImportEvent(){const e=new CustomEvent("email_import_updated",{});document.dispatchEvent(e)},checkConnection(){return ms(this,void 0,void 0,(function*(){try{if(!this.row_id)return;this.loading=!0;const e=yield oe.D.ftpConnectionTest(this.row_id);if(!e||e.hasOwnProperty("success")&&!1===e.success)throw e;this.showSuccessToast(this.$t("test_connection_success"))}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}}))},resetErrors(){for(const[e,t]of Object.entries(this.model))this.errors[e]=!1},filterSubOrgslistEvent(e,t,o){t(e?()=>{const t=e.toLowerCase();this.filterSubOrgsList=this.subOrgList.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}:()=>{this.filterSubOrgsList=this.subOrgList})},toggleArchiveImport(){this.model.move_after_import=!this.model.move_after_import},toggleIgnoreCertificate(){this.model.ignore_certificate=!this.model.ignore_certificate},toggleSubfolderContentSetting(){this.model.include_subfolder_content=!this.model.include_subfolder_content},fetchFolders(){return ms(this,void 0,void 0,(function*(){this.folderOptionsLoading=!0;try{const e=yield oe.D.getFTPFolders(this.row_id);this.folderOptions=e}catch(e){logError("Error fetching folders:",e)}finally{this.folderOptionsLoading=!1}}))}}}),_s=(0,D.A)(ps,[["render",us]]),hs=_s;P()(ps,"components",{QCard:$t.A,QToolbar:qt.A,QToolbarTitle:Tt.A,QBtn:xt.A,QCardSection:It.A,QSelect:Q.A,QIcon:Dt.A,QTooltip:O.A,QInput:S.A,QToggle:St.A,QInnerLoading:Ot.A}),P()(ps,"directives",{ClosePopup:Qt.A});var gs=function(e,t,o,s){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function a(e){try{n(s.next(e))}catch(t){i(t)}}function r(e){try{n(s["throw"](e))}catch(t){i(t)}}function n(e){e.done?o(e.value):l(e.value).then(a,r)}n((s=s.apply(e,t||[])).next())}))};const fs=(0,s.pM)({mixins:[T.A,V.A,no,te.A],components:{EditCreate:hs,ConnectionLogs:lo},watch:{sub_org_list_loading(e,t){!1===e&&this.initView()}},mounted:function(){const e="thi5i5@very5ecurehardc0d3denCrIp";void 0!=e?(this.initDragDropColumns("ftp_import_table","label",["action"]),document.addEventListener("ftp_import_table-column-drop",this.onDropColumns),document.addEventListener("ftp_import_updated",this.emailImportUpdated),this.handleSubOrgs()):this.showErrorToast("Missing an important value - unable to load email import")},unmounted:function(){document.removeEventListener("ftp_import_updated",this.emailImportUpdated),document.removeEventListener("ftp_import_table-column-drop",this.onDropColumns)},methods:{showFtpConnectionLogs(e){this.connection_id=e,this.show_connection_logs=!0},initView(){return gs(this,void 0,void 0,(function*(){try{this.loading=!0,this.prepareColumns(),yield this.getAppKey(),this.flattenSubOrgs(),this.getList()}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}}))},handleSubOrgs(){this.subOrgList.length>1&&this.initView(),this.sub_org_list_loading&&(this.loading=!0)},getList(){return gs(this,void 0,void 0,(function*(){try{this.loading=!0,this.prepareColumns();const e=yield oe.D.getFTPImport_List();if(0==e.data.length)return;this.prepareRows(e.data)}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}}))},prepareRows(e){this.rows=[],Array.from(e).forEach((e=>{const t=e;this.addNewRow(t)}))},addNewRow(e){let t=Object.assign({},e);return this.rows.push(t),this.rows.length.toString()},createNewRecord(){this.selected_row={},this.show_edit_create=!0},emailImportUpdated(){this.show_edit_create=!1,this.getList()},editRow(e,t){this.selected_row=JSON.parse(JSON.stringify(t)),this.show_edit_create=!0},deleteClicked(e,t){return gs(this,void 0,void 0,(function*(){try{this.loading=!0;const o=yield oe.D.ftpImportDelete(t);!0===o.success&&this.rows.splice(e,1),this.showSuccessToast(this.$t("success"))}catch(o){const e=se.t.getErrorMessage(o);this.showErrorToast(e),logError(o)}finally{this.loading=!1}}))},checkConnection(e){return gs(this,void 0,void 0,(function*(){try{this.loading=!0;const t=yield oe.D.ftpConnectionTest(e);if(!t||t.hasOwnProperty("success")&&!1===t.success)throw t;this.showSuccessToast(this.$t("test_connection_success"))}catch(t){const e=se.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}finally{this.loading=!1}}))},getAppKey(){return gs(this,void 0,void 0,(function*(){try{this.loading=!0;const e={app_key:"FELLOW_DOC2"},t=yield oe.jD.getAppSubscription(e);this.api_key=t[0].token}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}}))},de_activate(e){return gs(this,void 0,void 0,(function*(){try{this.loading=!0;const t=e.id,o=e.is_active;yield oe.D.setFTPImportActiveDeactive(t,o);this.showSuccessToast(this.$t("success"))}catch(t){const e=se.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}finally{this.loading=!1}}))},flattenSubOrgs(){this.subOrgList.forEach((e=>{this.sub_orgs_flattened[e.value]=e.label}))},prepareColumns(){this.columns=[],this.columns.push({name:"ftp_type",label:this.$t("type"),field:"ftp_type",align:"left"}),this.columns.push({name:"server_url",label:this.$t("server_url"),field:"server_url",align:"left"}),this.columns.push({name:"username",label:this.$t("username"),field:"username",align:"left"}),this.columns.push({name:"port",label:this.$t("port"),field:"port",align:"left"}),this.columns.push({name:"sub_org_id",label:this.$t("sub_organizations"),field:"sub_org_id",align:"left"}),this.columns.push({name:"default_directory",label:this.$t("default_directory"),field:"default_directory",align:"left"}),this.columns.push({name:"action",label:this.$t("action"),field:"action",align:"right"});const e=uo.A.getItem("FTP_IMPORT_SETTING_COLUMNS");this.columns=e&&""!=e?JSON.parse(e):this.columns},onDropColumns(){uo.A.set("FTP_IMPORT_SETTING_COLUMNS",JSON.stringify(this.columns))}},setup(){const e=(0,q.cY)(),{subOrgList:t,sub_org_list_loading:o}=(0,R.bP)(e);let s=(0,$.KR)({});const l=(0,$.KR)(null);return{sub_org_list_loading:o,subOrgList:t,myForm:l,import_email:s,show_connection_logs:(0,$.KR)(!1),connection_id:(0,$.KR)(""),errors:(0,$.KR)({}),sub_orgs_flattened:(0,$.KR)({}),processing:(0,$.KR)(!1),ms_url:(0,$.KR)("https://microsoft.com/devicelogin"),ms_code:(0,$.KR)(""),ms_authenticate:(0,$.KR)(!1),ms_is_authenticated:(0,$.KR)(!1),ms_message:(0,$.KR)("Microsoft o365 is authenticated already."),loading:(0,$.KR)(!1),userDialog:(0,$.KR)(!1),columns:(0,$.KR)([]),rows:(0,$.KR)([]),show_edit_create:(0,$.KR)(!1),selected_row:(0,$.KR)({}),api_key:(0,$.KR)("")}},data(){return{}}}),bs=(0,D.A)(fs,[["render",$o]]),vs=bs;P()(fs,"components",{QTable:Ht.A,QTr:Zt.A,QTh:eo.A,QTd:to.A,QBtn:xt.A,QMenu:_o.A,QList:ho.A,QItem:go.A,QItemSection:fo.A,QSeparator:bo.A,QTooltip:O.A,QInnerLoading:Ot.A,QDialog:vo.A});const ks=e=>((0,s.Qi)("data-v-ae160870"),e=e(),(0,s.jt)(),e),ys={class:"base-wrapper"},ws={style:{width:"30%","padding-right":"5%"}},Es={style:{width:"30%"}},Ls={class:"base-wrapper",style:{"margin-top":"1%"}},Fs={style:{width:"30%","padding-right":"5%"}},Cs={style:{display:"flex","flex-direction":"column",width:"60%"}},As={key:0},Rs={class:"input-select-container",style:{width:"50%"}},Vs={class:"button-container",style:{width:"50%"}},$s={class:"base-wrapper",style:{"margin-top":"1%"}},qs={style:{width:"30%","padding-right":"5%"}},Ts={style:{display:"flex","flex-direction":"column",width:"30%"}},xs={key:0},Is={class:"row",style:{gap:"8px",display:"flex","justify-content":"right"}},Ds={class:"text-weight-bold text-white"},Ss={class:"text-weight-bold"},Os={key:0,class:"orderByParent arrow-color"},Qs=["data-name","onClick"],Ks=["data-name","onClick"],Ps={key:0,style:{display:"flex","align-items":"center"}},Xs={key:1,class:"wrapped-text"},Ws={key:2,style:{display:"flex","align-items":"center"}},Ms={class:"q-mt-sm row full-width"},Us=ks((()=>(0,s.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1)));function Ns(e,t,o,i,a,r){const n=(0,s.g2)("q-input"),d=(0,s.g2)("q-toggle"),c=(0,s.g2)("q-tooltip"),u=(0,s.g2)("q-icon"),m=(0,s.g2)("q-select"),p=(0,s.g2)("f-btn"),_=(0,s.g2)("q-toolbar-title"),h=(0,s.g2)("q-btn"),g=(0,s.g2)("q-toolbar"),f=(0,s.g2)("q-markup-table"),b=(0,s.g2)("q-pagination"),v=(0,s.g2)("q-card-section"),k=(0,s.g2)("q-card"),y=(0,s.g2)("q-dialog"),w=(0,s.g2)("q-inner-loading");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",ys,[(0,s.Lk)("div",ws,(0,l.v_)(e.$t("pages.import.inbound_emails.info")),1),(0,s.Lk)("div",Es,[(0,s.bF)(n,{class:"full",readonly:"",outlined:"",modelValue:e.receiveEmail,"onUpdate:modelValue":t[0]||(t[0]=t=>e.receiveEmail=t),label:e.$t("email"),onClick:e.copyToClipboard},null,8,["modelValue","label","onClick"])])]),(0,s.Lk)("div",Ls,[(0,s.Lk)("div",Fs,(0,l.v_)(e.$t("pages.import.inbound_emails.senders")),1),(0,s.Lk)("div",Cs,[(0,s.bF)(d,{style:{"margin-left":"-13px"},modelValue:e.showEmailInputs,"onUpdate:modelValue":t[1]||(t[1]=t=>e.showEmailInputs=t)},null,8,["modelValue"]),e.showEmailInputs?((0,s.uX)(),(0,s.CE)("div",As,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.inputEmails,((t,o)=>((0,s.uX)(),(0,s.CE)("div",{key:o,class:"input-row"},[(0,s.Lk)("div",Rs,[(0,s.bF)(n,{outlined:"",label:e.$t("pages.import.inbound_emails.input"),modelValue:t.email,"onUpdate:modelValue":e=>t.email=e,style:{flex:"1"}},{append:(0,s.k6)((()=>[e.validationTriggered&&!t.email.trim()?((0,s.uX)(),(0,s.Wv)(u,{key:0,name:"error",color:"red",class:"cursor-pointer"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"bg-red"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.messages.CAN_NOT_PROCEED_ON_EMPTY_FIELD")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:2},1032,["label","modelValue","onUpdate:modelValue"]),(0,s.bF)(m,{outlined:"",modelValue:t.sub_org,"onUpdate:modelValue":e=>t.sub_org=e,options:e.filterSubOrgsList,onFilter:e.filterSubOrgslistEvent,label:e.$t("sub_organizations"),loading:e.sub_org_list_loading,"emit-value":"","map-options":"",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue","options","onFilter","label","loading"])]),(0,s.Lk)("div",Vs,[(0,s.bF)(p,{label:e.$t("add_new"),onClick:e.addInputEmailField},null,8,["label","onClick"]),0!==o?((0,s.uX)(),(0,s.Wv)(p,{key:0,label:e.$t("delete"),onClick:t=>e.deleteInputEmailField(o),style:{"margin-left":"4px"}},null,8,["label","onClick"])):(0,s.Q3)("",!0)])])))),128))])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",$s,[(0,s.Lk)("div",qs,(0,l.v_)(e.$t("pages.import.inbound_emails.receiver")),1),(0,s.Lk)("div",Ts,[(0,s.bF)(d,{style:{"margin-left":"-13px"},modelValue:e.showEmailReceiver,"onUpdate:modelValue":t[2]||(t[2]=t=>e.showEmailReceiver=t)},null,8,["modelValue"]),e.showEmailReceiver?((0,s.uX)(),(0,s.CE)("div",xs,[(0,s.bF)(n,{outlined:"",label:e.$t("pages.import.inbound_emails.input"),modelValue:e.receiverEmail,"onUpdate:modelValue":t[3]||(t[3]=t=>e.receiverEmail=t)},{append:(0,s.k6)((()=>[e.validationTriggered&&!e.receiverEmail.trim()?((0,s.uX)(),(0,s.Wv)(u,{key:0,name:"error",color:"red",class:"cursor-pointer"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"bg-red"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("pages.messages.CAN_NOT_PROCEED_ON_EMPTY_FIELD")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["label","modelValue"])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Is,[(0,s.bF)(p,{label:e.$t("pages.import.inbound_emails.logs"),onClick:e.showInboundEmailLogs},null,8,["label","onClick"]),(0,s.bF)(p,{label:e.$t("save"),onClick:e.save},null,8,["label","onClick"])]),(0,s.bF)(y,{"model-value":e.showEmailLogs,"onUpdate:modelValue":t[7]||(t[7]=t=>e.showEmailLogs=t)},{default:(0,s.k6)((()=>[(0,s.bF)(k,{style:{width:"90%","max-width":"90%",height:"95%"}},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"secondary-toolbar sticky-toolbar"},{default:(0,s.k6)((()=>[(0,s.bF)(_,null,{default:(0,s.k6)((()=>[(0,s.Lk)("span",Ds,(0,l.v_)(e.$t("pages.import.import_log")),1)])),_:1}),(0,s.bF)(h,{flat:"",round:"",dense:"",icon:"close",color:"white",onClick:e.cleanupOnhide},null,8,["onClick"])])),_:1}),(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.bF)(n,{outlined:"",dense:"",modelValue:e.filter,"onUpdate:modelValue":[t[4]||(t[4]=t=>e.filter=t),t[5]||(t[5]=t=>e.loadLogData())],placeholder:e.$t("Filter by Subject or Sender"),debounce:"300",class:"q-mb-sm",style:{width:"25%"}},null,8,["modelValue","placeholder"]),(0,s.bF)(f,{flat:""},{default:(0,s.k6)((()=>[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.logColumns,((t,o)=>((0,s.uX)(),(0,s.CE)("th",{key:o,class:"text-left"},[(0,s.Lk)("span",Ss,(0,l.v_)(t.label),1),"success"!==t.field?((0,s.uX)(),(0,s.CE)("span",Os,[(0,s.Lk)("span",{class:(0,l.C4)(["up-arrow absolute",e.sort_by==t.field&&"asc"==e.sort_order?"selected":""]),"data-name":t.field,"data-direction":"asc",onClick:o=>e.loadLogData(t.field,"asc")},null,10,Qs),(0,s.Lk)("span",{class:(0,l.C4)(["down-arrow absolute",e.sort_by==t.field&&"desc"==e.sort_order?"selected":""]),"data-name":t.field,"data-direction":"desc",onClick:o=>e.loadLogData(t.field,"desc")},null,10,Ks)])):(0,s.Q3)("",!0)])))),128))])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.logRows,((t,o)=>((0,s.uX)(),(0,s.CE)("tr",{key:o},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.logColumns,((e,o)=>((0,s.uX)(),(0,s.CE)("td",{key:o},["success"===e.field?((0,s.uX)(),(0,s.CE)("span",Ps,[(0,s.bF)(u,{name:!0===t[e.field]?"check_circle":"cancel",color:!0===t[e.field]?"green":"red",size:"20px"},null,8,["name","color"])])):"attachment_names"===e.field?((0,s.uX)(),(0,s.CE)("span",Xs,(0,l.v_)(t[e.field]),1)):((0,s.uX)(),(0,s.CE)("span",Ws,(0,l.v_)(t[e.field]),1))])))),128))])))),128))])])),_:1}),(0,s.Lk)("div",Ms,[e.total_pages>1?((0,s.uX)(),(0,s.Wv)(b,{key:0,modelValue:e.current_page,"onUpdate:modelValue":t[6]||(t[6]=t=>e.current_page=t),max:e.total_pages,"max-pages":5,"direction-links":"",unelevated:"",color:"black",class:"doc2-pagination q-mb-md q-ml-auto q-mr-auto",onClick:e.pageChanged},null,8,["modelValue","max","onClick"])):(0,s.Q3)("",!0)])])),_:1})])),_:1})])),_:1},8,["model-value"]),(0,s.bF)(w,{showing:e.loading,class:"z-index-1",style:{"z-index":"1000"}},{default:(0,s.k6)((()=>[Us])),_:1},8,["showing"])],64)}var Ys=o(85487),zs=o(46736),js=function(e,t,o,s){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function a(e){try{n(s.next(e))}catch(t){i(t)}}function r(e){try{n(s["throw"](e))}catch(t){i(t)}}function n(e){e.done?o(e.value):l(e.value).then(a,r)}n((s=s.apply(e,t||[])).next())}))};const Bs=(0,s.pM)({mixins:[T.A,V.A,zs.A],mounted:function(){return js(this,void 0,void 0,(function*(){yield this.initView()}))},methods:{initView(){return js(this,void 0,void 0,(function*(){try{this.receiveEmail=(0,Ys.I)()+"@"+this.branch_name+"inbound.docbits.com",yield this.loadData()}catch(e){const t=se.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.loading=!1}}))},copyToClipboard(){navigator.clipboard.writeText(this.receiveEmail).then((()=>{this.showSuccessToast(this.$t("success_copy_to_clipboard"))})).catch((e=>{this.showErrorToast(this.$t("error_copy_to_clipboard"))}))},addInputEmailField(){this.inputEmails.push({email:"",sub_org:""})},deleteInputEmailField(e){this.inputEmails.splice(e,1)},filterSubOrgslistEvent(e,t){t(e?()=>{const t=e.toLowerCase();this.filterSubOrgsList=this.subOrgList.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}:()=>{this.filterSubOrgsList=this.subOrgList})},save(){return js(this,void 0,void 0,(function*(){try{if(this.validationTriggered=!0,!this.validateEmails())return;const e={org_id:(0,Ys.I)(),senders:this.inputEmails,receiver:this.receiverEmail,senders_active:this.showEmailInputs,receiver_active:this.showEmailReceiver};yield oe.D.inboundSave(e),this.showSuccessToast(this.$t("success"))}catch(e){this.showErrorToast(this.$t("error"))}}))},loadData(){return js(this,void 0,void 0,(function*(){try{const e=yield oe.D.inboundLoad();if(!e.success){if(e.message)return void this.showErrorToast(this.$t("pages.import.inbound_emails.name")+": "+e.message);throw{message:this.$t("pages.messages.error_internal_occur")}}this.inputEmails=e.data.email_senders,this.receiverEmail=e.data.email_receiver,""===this.inputEmails[0].email?this.showEmailInputs=!1:this.showEmailInputs=!0,""===this.receiverEmail?this.showEmailReceiver=!1:this.showEmailReceiver=!0}catch(e){this.showErrorToast(this.$t("pages.import.inbound_emails.name")+": "+this.$t("pages.messages.error_internal_occur")),logError("Error loading data:",e)}}))},validateEmails(){if(!this.showEmailInputs||!this.showEmailReceiver)return!0;const e=this.inputEmails.some((e=>!e.email.trim())),t=!this.receiverEmail.trim();return!(e||t)},showInboundEmailLogs(){return js(this,void 0,void 0,(function*(){try{this.loading=!0,this.showEmailLogs=!0,this.prepareTable(),yield this.loadLogData()}catch(e){logError("Error loading email logs:",e),this.showErrorToast(this.$t("error"))}finally{this.loading=!1}}))},cleanupOnhide(){this.showEmailLogs=!1},setTotalPages(){this.total_pages=Math.ceil(this.total_records/this.page_size)},prepareTable(){this.logRows=[],this.logColumns=[{label:this.$t("status"),field:"success"},{label:this.$t("subject"),field:"subject"},{label:this.$t("email"),field:"from_email"},{label:this.$t("pages.import.emaillog.arrived_at"),field:"created_on"},{label:this.$t("pages.import.emaillog.doc_count"),field:"success_count"},{label:this.$t("pages.import.emaillog.failed_count"),field:"failed_count"},{label:this.$t("pages.import.emaillog.filename"),field:"attachment_names"}]},loadLogData(e,t){return js(this,void 0,void 0,(function*(){this.loading=!0,this.sort_by=e||"created_on",this.sort_order=t||"desc",this.request_params={},this.request_params["org_id"]=(0,Ys.I)(),this.request_params["offset"]=this.offset,this.request_params["limit"]=this.page_size,this.request_params["order_by_direction"]=t||"desc",this.request_params["order_by_field"]=e||"created_on",this.request_params["filter"]=this.filter;try{const e=yield oe.D.inbounLoadLogs(this.request_params);if(!e.data)throw{message:e.message};this.total_records=e.element_count||0,this.total_pages=Math.ceil(this.total_records/this.page_size),this.logRows=e.data.map((e=>({from_email:e.sender||"-",subject:e.subject||"-",attachment_names:Array.isArray(e.attachment_names)?e.attachment_names.join(", "):e.attachment_names||"-",created_on:e.created_on?this.formatDateAccordingToPreference(e.created_on):"-",success_count:e.success_count||0,failed_count:e.failed_count||0,success:e.success_count>0||!1})))}catch(o){const e=se.t.getErrorMessage(o);this.showErrorToast(e),logError(o)}finally{this.loading=!1}}))},pageChanged(){return js(this,void 0,void 0,(function*(){this.offset=this.page_size*(this.current_page-1),yield this.loadLogData(this.sort_by,this.sort_order)}))}},setup(){const e="sandbox.",t=(0,q.cY)(),{subOrgList:o}=(0,R.bP)(t),s=(0,$.KR)(t.subOrgList);return{loading:(0,$.KR)(!1),receiveEmail:(0,$.KR)(""),branch_name:e,showEmailInputs:(0,$.KR)(!1),inputEmails:(0,$.KR)([{email:"",sub_org:""}]),showEmailReceiver:(0,$.KR)(!1),receiverEmail:(0,$.KR)(""),filterSubOrgsList:s,subOrgList:o,validationTriggered:(0,$.KR)(!1),showEmailLogs:(0,$.KR)(!1),logRows:(0,$.KR)([]),logColumns:(0,$.KR)([]),total_pages:(0,$.KR)(0),total_records:(0,$.KR)(0),request_params:(0,$.KR)({}),offset:(0,$.KR)(0),page_size:(0,$.KR)(10),current_page:(0,$.KR)(1),sort_by:(0,$.KR)(""),sort_order:(0,$.KR)(""),filter:(0,$.KR)("")}}});var Js=o(857);const Gs=(0,D.A)(Bs,[["render",Ns],["__scopeId","data-v-ae160870"]]),Hs=Gs;P()(Bs,"components",{QInput:S.A,QToggle:St.A,QIcon:Dt.A,QTooltip:O.A,QSelect:Q.A,QDialog:vo.A,QCard:$t.A,QToolbar:qt.A,QToolbarTitle:Tt.A,QBtn:xt.A,QCardSection:It.A,QMarkupTable:Js.A,QPagination:oo.A,QInnerLoading:Ot.A});var Zs=o(76956);const el=(0,s.pM)({el:"#app",components:{SubHeader:m.A,BackToSettings:p.A,PageRestriction:W,EmailImportList:yo,FtpImportList:vs,InboundEmails:Hs},mounted:function(){this.getSubOrgsList()},setup(){const e=(0,q.cY)(),{getSubOrgsList:t}=e,o=(0,q.Bu)(),{getSetting:s}=o,{user_settings:l}=(0,R.bP)(o);return{getSubOrgsList:t,getSetting:s,inbound_emails_setting:Zs.No,user_settings:l}}});var tl=o(88841),ol=o(93676);const sl=(0,D.A)(el,[["render",u]]),ll=sl;P()(el,"components",{QList:ho.A,QExpansionItem:tl.A,QSeparator:bo.A,QIcon:Dt.A,QSpace:ol.A,QCard:$t.A,QCardSection:It.A})}}]);