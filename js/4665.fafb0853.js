"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[4665],{84665:(t,e,a)=>{a.r(e),a.d(e,{default:()=>wt});var l=a(61758),o=a(58790),d=a(29104),i=a(8793),n=a.n(i),s=a(31296),c=a.n(s),h=a(1267),p=a.n(h);const r=t=>((0,l.Qi)("data-v-de1ef972"),t=t(),(0,l.jt)(),t),u={class:"row"},_={class:"col-11",style:{padding:"20px","margin-left":"50px"}},b={class:"row text-weight-bolder top-row"},v={class:"full-width",style:{"margin-top":"10px"}},m={style:{"text-align":"left",color:"white",background:"#0e3341"}},g=r((()=>(0,l.Lk)("th",null,null,-1))),y={style:{"max-height":"70vh","overflow-y":"scroll"}},k={style:{width:"100px"}},f=["onClick"],w={class:"chip"},F=["onClick"],x=["onClick"],C=["onClick"];function L(t,e,a,i,s,h){const r=(0,l.g2)("BackToSettings"),L=(0,l.g2)("q-input"),A=(0,l.g2)("q-space"),V=(0,l.g2)("DefaultBtn"),R=(0,l.g2)("q-checkbox"),K=(0,l.g2)("DeleteQfab"),Q=(0,l.g2)("q-fab"),E=(0,l.g2)("q-chip"),S=(0,l.g2)("q-img"),q=(0,l.g2)("q-markup-table"),$=(0,l.g2)("AddEditSpacepath"),D=(0,l.g2)("q-dialog");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(r),(0,l.Lk)("div",u,[(0,l.Lk)("div",_,[(0,l.Lk)("div",b,[(0,l.bF)(L,{style:{width:"40%"},outlined:"",dense:"",debounce:"500",modelValue:t.filter,"onUpdate:modelValue":[e[0]||(e[0]=e=>t.filter=e),t.applyFilter],label:t.$t("name")},null,8,["modelValue","label","onUpdate:modelValue"]),(0,l.bF)(A),(0,l.bF)(V,{label:t.$t("doc2light.pages.add"),onClick:e[1]||(e[1]=e=>t.add_path=!0)},null,8,["label"])]),(0,l.Lk)("div",v,[(0,l.bF)(q,{class:"sticky-column-for-table white-back",style:{"max-height":"49vh","overflow-y":"auto"},dense:"",flat:""},{default:(0,l.k6)((()=>[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",m,[(0,l.Lk)("th",null,[(0,l.bF)(R,{dark:"",modelValue:t.headerCheckbox,"onUpdate:modelValue":[e[2]||(e[2]=e=>t.headerCheckbox=e),e[3]||(e[3]=e=>t.changeAction())]},null,8,["modelValue"]),(0,l.bF)(Q,{flat:"",modelValue:t.headerFabIcon,"onUpdate:modelValue":e[4]||(e[4]=e=>t.headerFabIcon=e),disable:t.selection.length<1,"label-position":"top","data-cy":"actions","external-label":"",icon:"more_vert",direction:"down",padding:"xs"},{default:(0,l.k6)((()=>[(0,l.bF)(K,{info:t.$t("doc2light.table.path"),tooltip:t.$t("delete"),function:t.deleteMarked,argument:t.selection},null,8,["info","tooltip","function","argument"])])),_:1},8,["modelValue","disable"])]),(0,l.Lk)("th",null,(0,o.v_)(t.$t("doc2light.table.name")),1),(0,l.Lk)("th",null,(0,o.v_)(t.$t("doc2light.popups.condition")),1),g,(0,l.Lk)("th",null,(0,o.v_)(t.$t("doc2light.pages.store")),1),(0,l.Lk)("th",null,(0,o.v_)(t.$t("doc2light.table.path")),1)])]),(0,l.Lk)("tbody",y,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.apidata.pathData.data,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",k,[(0,l.bF)(R,{modelValue:e.rowSelection,"onUpdate:modelValue":[t=>e.rowSelection=t,a=>t.selectionList(e)]},null,8,["modelValue","onUpdate:modelValue"])]),(0,l.Lk)("td",{style:{width:"15vw"},onClick:a=>t.EditDirectory(e.id)},(0,o.v_)(e.name),9,f),(0,l.Lk)("td",null,[(0,l.Lk)("div",w,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.conditions,(t=>((0,l.uX)(),(0,l.Wv)(E,{key:t.id,class:"chip-bg",dense:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(t.value_1)+" "+(0,o.v_)(t.value_2)+" "+(0,o.v_)(t.value_3),1)])),_:2},1024)))),128))])]),(0,l.Lk)("td",{style:{width:"25px"},onClick:a=>t.EditDirectory(e.id)},["dropbox"==e.store.store_type?((0,l.uX)(),(0,l.Wv)(S,{key:0,src:n(),height:"20px",width:"20px"})):(0,l.Q3)("",!0),"google_drive"==e.store.store_type?((0,l.uX)(),(0,l.Wv)(S,{key:1,src:c(),height:"20px",width:"20px"})):(0,l.Q3)("",!0),"onedrive"==e.store.store_type?((0,l.uX)(),(0,l.Wv)(S,{key:2,src:p(),height:"20px",width:"20px"})):(0,l.Q3)("",!0)],8,F),(0,l.Lk)("td",{onClick:a=>t.EditDirectory(e.id),style:{width:"10vw"}},(0,o.v_)(e.store.name),9,x),(0,l.Lk)("td",{onClick:a=>t.EditDirectory(e.id)},(0,o.v_)(e.path),9,C)])))),128))])])),_:1})])])]),(0,l.bF)(D,{modelValue:t.add_path,"onUpdate:modelValue":e[5]||(e[5]=e=>t.add_path=e),onKeydown:e[6]||(e[6]=(0,d.jR)((e=>t.add_path=!1),["esc"]))},{default:(0,l.k6)((()=>[(0,l.bF)($,{mode:"add"})])),_:1},8,["modelValue"]),(0,l.bF)(D,{modelValue:t.edit_path,"onUpdate:modelValue":e[7]||(e[7]=e=>t.edit_path=e),onKeydown:e[8]||(e[8]=(0,d.jR)((e=>t.edit_path=!1),["esc"]))},{default:(0,l.k6)((()=>[(0,l.bF)($,{mode:"edit",directory_id:t.current_directory_id},null,8,["directory_id"])])),_:1},8,["modelValue"])],64)}var A=a(38734),V=a(24622);const R=t=>((0,l.Qi)("data-v-298006ec"),t=t(),(0,l.jt)(),t),K={key:0,class:"popup-heading",style:{width:"250px"}},Q={key:1,class:"popup-heading"},E=R((()=>(0,l.Lk)("hr",{style:{color:"#cecece"}},null,-1))),S={class:"row full-width"},q={class:"full-width"},$={class:"text-subtitle2",style:{"text-transform":"uppercase","margin-bottom":"10px"}},D={class:"full-width row"},I={style:{"text-align":"left",color:"white",background:"#0e3341"}},T={class:"text-subtitle2",style:{"text-transform":"uppercase","margin-bottom":"10px"}},X={class:"full-width row"};function U(t,e,a,d,i,n){const s=(0,l.g2)("q-toolbar-title"),c=(0,l.g2)("q-space"),h=(0,l.g2)("CancelBtn"),p=(0,l.g2)("SaveBtn"),r=(0,l.g2)("q-toolbar"),u=(0,l.g2)("q-input"),_=(0,l.g2)("q-card-section"),b=(0,l.g2)("q-select"),v=(0,l.g2)("q-btn"),m=(0,l.g2)("q-markup-table"),g=(0,l.g2)("q-card"),y=(0,l.g2)("Loader");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g,{style:{"min-width":"35vw","min-height":"36vh"}},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"primary-toolbar row"},{default:(0,l.k6)((()=>[(0,l.bF)(s,null,{default:(0,l.k6)((()=>["add"==t.mode?((0,l.uX)(),(0,l.CE)("span",K,(0,o.v_)(t.$t("doc2light.popups.add_path")),1)):"edit"==t.mode?((0,l.uX)(),(0,l.CE)("span",Q,(0,o.v_)(t.$t("doc2light.popups.add_path")),1)):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(c),(0,l.bF)(h,{onClick:e[0]||(e[0]=e=>t.add_spacepath={})}),(0,l.bF)(p,{onClick:t.saveChanges,style:{"margin-left":"10px"}},null,8,["onClick"])])),_:1}),E,(0,l.bF)(_,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",S,[(0,l.Lk)("div",q,[(0,l.bF)(u,{type:"text",square:"",outlined:"",dense:"",tabindex:"0",label:t.$t("name"),modelValue:t.add_spacepath["name"],"onUpdate:modelValue":e[1]||(e[1]=e=>t.add_spacepath["name"]=e)},null,8,["label","modelValue"])])])])),_:1}),(0,l.bF)(_,{class:"row full-width"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",$,(0,o.v_)(t.$t("doc2light.pages.condition")),1),(0,l.Lk)("div",D,[(0,l.bF)(b,{square:"",outlined:"",dense:"",options:t.condition_types,style:{width:"30%"},label:t.$t("doc2light.popups.type"),modelValue:t.add_spacepath["condition_type"],"onUpdate:modelValue":e[2]||(e[2]=e=>t.add_spacepath["condition_type"]=e)},null,8,["options","label","modelValue"]),(0,l.bF)(b,{square:"",outlined:"",dense:"",options:t.conditions,style:{width:"30%","margin-left":"4.5%","margin-right":"4.5%"},label:t.$t("doc2light.popups.condition"),modelValue:t.add_spacepath["condition_condition"],"onUpdate:modelValue":e[3]||(e[3]=e=>t.add_spacepath["condition_condition"]=e)},null,8,["options","label","modelValue"]),(0,l.bF)(u,{square:"",outlined:"",dense:"",style:{width:"30%"},label:t.$t("doc2light.popups.value"),modelValue:t.add_spacepath["condition_value"],"onUpdate:modelValue":e[4]||(e[4]=e=>t.add_spacepath["condition_value"]=e)},null,8,["label","modelValue"])]),(0,l.bF)(v,{square:"",color:"primary",icon:"add",unelevated:"",style:{"margin-top":"15px"},onClick:e[5]||(e[5]=e=>t.addEntry())})])),_:1}),(0,l.bF)(_,{class:"full-width"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{flat:"",style:{"max-height":"20vh",overflow:"auto","margin-bottom":"5vh"},dense:""},{default:(0,l.k6)((()=>[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",I,[(0,l.Lk)("th",null,(0,o.v_)(t.$t("doc2light.table.type")),1),(0,l.Lk)("th",null,(0,o.v_)(t.$t("doc2light.popups.condition")),1),(0,l.Lk)("th",null,(0,o.v_)(t.$t("doc2light.popups.value")),1),(0,l.Lk)("th",null,(0,o.v_)(t.$t("doc2light.table.actions")),1)])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.table_data,((e,a)=>((0,l.uX)(),(0,l.CE)("tr",{key:a,style:{height:"25px"}},[(0,l.Lk)("td",null,(0,o.v_)(e.value_1),1),(0,l.Lk)("td",null,(0,o.v_)(e.value_2),1),(0,l.Lk)("td",null,(0,o.v_)(e.value_3),1),(0,l.Lk)("td",null,[(0,l.bF)(v,{flat:"",round:"",color:"red",icon:"delete_outline",onClick:e=>t.removeRow(a)},null,8,["onClick"])])])))),128))])])),_:1})])),_:1}),(0,l.bF)(_,{class:"row full-width"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",T,(0,o.v_)(t.$t("doc2light.pages.store")),1),(0,l.Lk)("div",X,[(0,l.bF)(b,{square:"",outlined:"",dense:"",options:t.available_stores,style:{width:"48%","margin-right":"4%"},label:t.$t("doc2light.pages.store"),modelValue:t.add_spacepath["store"],"onUpdate:modelValue":e[6]||(e[6]=e=>t.add_spacepath["store"]=e)},null,8,["options","label","modelValue"]),(0,l.bF)(u,{square:"",outlined:"",dense:"",style:{width:"48%"},label:t.$t("doc2light.table.path"),modelValue:t.add_spacepath["path"],"onUpdate:modelValue":e[7]||(e[7]=e=>t.add_spacepath["path"]=e)},null,8,["label","modelValue"])])])),_:1})])),_:1}),(0,l.bF)(y)],64)}var B=a(8420),M=a(18505),j=a(63008),W=a(1659),P=a(34300),G=a(99976),O=a(5255),z=function(t,e,a,l){function o(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,d){function i(t){try{s(l.next(t))}catch(e){d(e)}}function n(t){try{s(l["throw"](t))}catch(e){d(e)}}function s(t){t.done?a(t.value):o(t.value).then(i,n)}s((l=l.apply(t,e||[])).next())}))};const H=(0,l.pM)({el:"#app",mixins:[M.A,V.A],props:["mode","directory_id"],components:{CancelBtn:G.A,Loader:B.A,SaveBtn:O.A},data(){return{}},mounted(){this.getStores(),"edit"==this.mode&&this.FillFields()},methods:{saveChanges(){return z(this,void 0,void 0,(function*(){if("edit"==this.mode){this.apidata.pathData.data[this.directory_id];yield this.edit_pathdirectory(this.directory_id,this.add_spacepath["store"].value,this.add_spacepath["name"],this.add_spacepath["path"]).then((t=>{this.showSuccessToast("Successfull edited Conditions")}))}else"add"==this.mode&&(yield this.add_pathdirectory(this.add_spacepath["store"].value,this.add_spacepath["name"],this.add_spacepath["path"]).then((t=>{this.table_data.forEach((e=>z(this,void 0,void 0,(function*(){yield this.create_path_condition_pair(e.value_1,e.value_2,e.value_3,t.directory.id)}))))})))}))},FillFields(){const t=this.apidata.pathData.data[this.directory_id];this.add_spacepath["name"]=t.name,this.add_spacepath["store"]={label:t.store.name,value:t.store.id},this.add_spacepath["path"]=t.path,Object.values(t.conditions).forEach((t=>{this.table_data.push(t)}))},getStores(){return z(this,void 0,void 0,(function*(){try{yield P.iT.getAccessableStores().then((t=>{t.exports.forEach((t=>{this.available_stores.push({label:t.name,value:t.id})}))}))}catch(t){this.showErrorToast("Failed getting authenticated Stores")}}))},removeRow(t){"edit"==this.mode?(this.remove_path_condition_pair(this.directory_id,this.table_data[t].id),"0"==t?this.table_data.shift():this.table_data.splice(1,t)):"0"==t?this.table_data.shift():this.table_data.splice(1,t)},addEntry(){return z(this,void 0,void 0,(function*(){"edit"==this.mode&&(yield this.create_path_condition_pair(this.add_spacepath["condition_type"].value,this.add_spacepath["condition_condition"].value,this.add_spacepath["condition_value"],this.directory_id)),this.table_data.push({value_1:this.add_spacepath["condition_type"].label,value_2:this.add_spacepath["condition_condition"].label,value_3:this.add_spacepath["condition_value"]}),this.add_spacepath["condition_type"]=null,this.add_spacepath["condition_condition"]=null,this.add_spacepath["condition_value"]=""}))}},setup(){const t=(0,j.GX)(),e=(0,W.bP)(t),{remove_path_condition_pair:a,edit_pathdirectory:l,create_path_condition_pair:o,add_pathdirectory:d}=t,i=[{label:"Is",value:"=="},{label:"Is not",value:"!="}],n=[{label:"Tag",value:"tag"},{label:"Doc Type",value:"doc_type"},{label:"Corresp",value:"correspondent"}];return{add_pathdirectory:d,create_path_condition_pair:o,remove_path_condition_pair:a,edit_pathdirectory:l,available_stores:(0,A.KR)([]),apidata:(0,A.KR)(e),condition_types:(0,A.KR)(n),conditions:(0,A.KR)(i),add_spacepath:(0,A.KR)({}),table_data:(0,A.KR)([])}}});var J=a(12807),N=a(23316),Y=a(36914),Z=a(39150),tt=a(93676),et=a(44189),at=a(67837),lt=a(94940),ot=a(56384),dt=a(857),it=a(98582),nt=a.n(it);const st=(0,J.A)(H,[["render",U],["__scopeId","data-v-298006ec"]]),ct=st;nt()(H,"components",{QCard:N.A,QToolbar:Y.A,QToolbarTitle:Z.A,QSpace:tt.A,QCardSection:et.A,QInput:at.A,QSelect:lt.A,QBtn:ot.A,QMarkupTable:dt.A});var ht=a(55166),pt=a(93760),rt=a(31123),ut=function(t,e,a,l){function o(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,d){function i(t){try{s(l.next(t))}catch(e){d(e)}}function n(t){try{s(l["throw"](t))}catch(e){d(e)}}function s(t){t.done?a(t.value):o(t.value).then(i,n)}s((l=l.apply(t,e||[])).next())}))};const _t=(0,l.pM)({data(){return{}},components:{DeleteQfab:pt.A,BackToSettings:ht.A,AddEditSpacepath:ct,DefaultBtn:rt.A},mixins:[V.A],mounted(){return ut(this,void 0,void 0,(function*(){yield this.loadFromServer()}))},methods:{EditDirectory(t){this.current_directory_id=t,this.edit_path=!0},deleteMarked(t){t.forEach((t=>ut(this,void 0,void 0,(function*(){yield this.delete_pathdirectory(t)}))))},handleActions(t){this.path_list[t].fabaction,this.path_list[t].fabaction},selectionList(t){this.selection.push(t.id)},changeAction(){!0===this.headerCheckbox?this.selectAllRows():(this.resetAllSelectedRows(),this.headerFabIcon=!1)},selectAllRows(){this.headerCheckbox=!0,this.path_list.forEach((t=>{this.path_list[t].rowSelection=!0,this.selection.push(t)}))},resetAllSelectedRows(){this.selection=[],this.headerCheckbox=!1,this.path_list.forEach((t=>{this.path_list[t].rowSelection=!1}))}},setup(){const t=[{value:"doctype",label:"Doctype"},{value:"correspondent",label:"Correspondent"}],e=(0,j.GX)(),a=(0,W.bP)(e),{loadFromServer:l,delete_pathdirectory:o}=e;return{apidata:(0,A.KR)(a),loadFromServer:l,delete_pathdirectory:o,showMenu:(0,A.KR)(!1),showIcons:(0,A.KR)(!0),filter:(0,A.KR)(""),view:(0,A.KR)("list"),headerCheckbox:(0,A.KR)(!1),headerFabIcon:(0,A.KR)(!1),add_path:(0,A.KR)(!1),edit_path:(0,A.KR)(!1),current_directory_id:(0,A.KR)(""),selection:(0,A.KR)([]),path_list:(0,A.KR)([]),dropdowns:(0,A.KR)(t),setting:(0,A.KR)({}),path:(0,A.KR)(""),path_id:(0,A.KR)("")}}});var bt=a(80460),vt=a(54782),mt=a(66760),gt=a(15046),yt=a(82156),kt=a(42315);const ft=(0,J.A)(_t,[["render",L],["__scopeId","data-v-de1ef972"]]),wt=ft;nt()(_t,"components",{QInput:at.A,QSpace:tt.A,QMarkupTable:dt.A,QCheckbox:bt.A,QFab:vt.A,QChip:mt.A,QImg:gt.A,QDialog:yt.A,QTable:kt.A,QBtn:ot.A})}}]);