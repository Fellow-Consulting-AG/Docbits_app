"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[5270],{95270:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ee});var l=a(61758),n=a(29104),i=a(58790);const o=e=>((0,l.Qi)("data-v-18bf1061"),e=e(),(0,l.jt)(),e),s={class:"grid-container"},r={class:"full-width"},d={class:"table-header-text"},c=["data-index","draggable","dropzone","onDragstart","onDrop","onDragover"],u={key:0,class:"cursor-default"},m={key:1,class:"q-pr-md"},p=["onClick"],g={key:0},_={key:1},b={key:2},h={key:3},f={key:4,class:"text-center"},k={class:"q-ml-sm"},v=o((()=>(0,l.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1)));function D(e,t,a,o,D,C){const E=(0,l.g2)("SubHeader"),y=(0,l.g2)("f-btn"),T=(0,l.g2)("BackToSettings"),A=(0,l.g2)("q-item-section"),w=(0,l.g2)("q-item"),F=(0,l.g2)("q-list"),L=(0,l.g2)("q-menu"),$=(0,l.g2)("q-btn"),I=(0,l.g2)("q-markup-table"),S=(0,l.g2)("q-avatar"),x=(0,l.g2)("q-card-section"),q=(0,l.g2)("q-card-actions"),Q=(0,l.g2)("q-card"),X=(0,l.g2)("q-dialog"),M=(0,l.g2)("q-inner-loading"),j=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(E,{name:"email_templates",label:e.$t("email_templates")},null,8,["label"]),(0,l.bF)(T,null,{default:(0,l.k6)((()=>[(0,l.bF)(y,{class:"float-right",label:e.$t("new"),icon:"add",onClick:e.addNew},null,8,["label","onClick"])])),_:1}),(0,l.Lk)("div",s,[(0,l.Lk)("div",r,[(0,l.bF)(I,{flat:"",class:"dashboard-table-height back-white",style:{"z-index":"1"},id:"email_teplate_table"},{default:(0,l.k6)((()=>[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",d,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.table_columns,((a,o)=>((0,l.uX)(),(0,l.CE)("th",{key:a.name,"data-index":o,draggable:e.canDragDropColumn(a),dropzone:e.canDragDropColumn(a),direction:"horizontal",onDragstart:t=>e.onDragStart(t,e.table_columns,o),onDrop:(0,n.D$)((t=>e.handleDrop(t,o)),["prevent"]),onDragover:(0,n.D$)((t=>e.onDragOver(t,o)),["prevent"]),onDragenter:t[0]||(t[0]=(0,n.D$)(((...t)=>e.onDragEnter&&e.onDragEnter(...t)),["prevent"])),onDragleave:t[1]||(t[1]=(0,n.D$)(((...t)=>e.onDragLeave&&e.onDragLeave(...t)),["prevent"])),style:(0,i.Tr)({cursor:e.getIsDragging?"pointer":"move"}),class:(0,i.C4)(a.class||"")},["actions"==a.name?((0,l.uX)(),(0,l.CE)("span",u,(0,i.v_)(e.$t(a.label)),1)):((0,l.uX)(),(0,l.CE)("span",m,(0,i.v_)(e.$t(a.label)),1))],46,c)))),128))])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.display_data,(a=>((0,l.uX)(),(0,l.CE)("tr",{key:a.index,onClick:t=>e.editTemplate(null===a||void 0===a?void 0:a.id)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.table_columns,(o=>((0,l.uX)(),(0,l.CE)(l.FK,{key:o.name},["name"==o.name?((0,l.uX)(),(0,l.CE)("td",g,(0,i.v_)(a.name),1)):"type"==o.name?((0,l.uX)(),(0,l.CE)("td",_,(0,i.v_)(e.emailTypeValue(a.email_type)),1)):"subject"==o.name?((0,l.uX)(),(0,l.CE)("td",b,(0,i.v_)(a.subject),1)):"last_modified_at"==o.name?((0,l.uX)(),(0,l.CE)("td",h,(0,i.v_)(a.last_modified_on?e.formatDateAccordingToPreference(a.last_modified_on):e.formatDateAccordingToPreference(a.created_on)),1)):((0,l.uX)(),(0,l.CE)("td",f,[(0,l.bF)($,{flat:"",dense:"",round:"",onClick:t[2]||(t[2]=(0,n.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,l.k6)((()=>[(0,l.bF)(L,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{dense:"",style:{"min-width":"100px"}},{default:(0,l.k6)((()=>[(0,l.bF)(w,{clickable:"",onClick:t=>e.editTemplate(null===a||void 0===a?void 0:a.id)},{default:(0,l.k6)((()=>[(0,l.bF)(A,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("edit")),1)])),_:1})])),_:2},1032,["onClick"]),(0,l.bF)(w,{clickable:"",onClick:t=>e.confirmDialog(null===a||void 0===a?void 0:a.id)},{default:(0,l.k6)((()=>[(0,l.bF)(A,{class:"text-red"},{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)]))],64)))),128))],8,p)))),128))])])),_:1})])]),(0,l.bF)(X,{modelValue:e.confirmDelete,"onUpdate:modelValue":t[3]||(t[3]=t=>e.confirmDelete=t),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(Q,null,{default:(0,l.k6)((()=>[(0,l.bF)(x,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,l.k6)((()=>[(0,l.bF)(S,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,l.bF)(x,{class:"row items-center"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",k,(0,i.v_)(e.$t("pages.messages.msg_delete")),1)])),_:1}),(0,l.bF)(q,{align:"right"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(y,{appearance:"cancel",label:e.$t("pages.user.cancel")},null,8,["label"]),[[j]]),(0,l.bo)((0,l.bF)(y,{label:e.$t("pages.user.done"),onClick:e.deleteTemplate},null,8,["label","onClick"]),[[j]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(M,{showing:e.loading,style:{"z-index":"2"}},{default:(0,l.k6)((()=>[v])),_:1},8,["showing"])],64)}var C=a(38734),E=a(91236),y=a(60894),T=a(94124),A=a(1659),w=a(24681),F=a(10739),L=a(45022),$=a(24622),I=a(64775),S=a(11470),x=a(46736),q=function(e,t,a,l){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,i){function o(e){try{r(l.next(e))}catch(t){i(t)}}function s(e){try{r(l["throw"](e))}catch(t){i(t)}}function r(e){e.done?a(e.value):n(e.value).then(o,s)}r((l=l.apply(e,t||[])).next())}))};const Q=(0,l.pM)({el:"#app",mixins:[F.A,$.A,x.A],components:{SubHeader:E.A,BackToSettings:y.A},mounted(){this.init(),this.prepareTableColumn(),this.initDragDropColumns("email_teplate_table","label",["actions"]),document.addEventListener("email_teplate_table-column-drop",this.onDropColumns)},unmounted(){document.removeEventListener("email_teplate_table-column-drop",this.onDropColumns)},data(){return{table_columns:[{label:"name",name:"name"},{label:"type",name:"type"},{label:"subject",name:"subject"},{label:"last_modified_at",name:"last_modified_at"},{label:"actions",name:"actions",class:"text-center"}],confirmDelete:(0,C.KR)(!1),templateId:(0,C.KR)("")}},setup(){const e=(0,T.M_)(),{loading:t,display_data:a}=(0,A.bP)(e),{getEmailTemplateData:l,deleteEmailTemplate:n}=e,i=(0,w.B)(),{datePattern:o}=i;return{loading:t,display_data:a,getEmailTemplateData:l,deleteEmailTemplate:n,datePattern:o}},methods:{init(){return q(this,void 0,void 0,(function*(){yield this.getEmailData()}))},getEmailData(){return q(this,void 0,void 0,(function*(){try{this.loading=!0,yield this.getEmailTemplateData()}catch(e){}finally{this.loading=!1}}))},prepareTableColumn(){const e=L.A.getItem("EMAIL_TEMPLATE_SETTING_COLUMNS");e&&(this.table_columns=JSON.parse(e))},onDropColumns(){L.A.set("EMAIL_TEMPLATE_SETTING_COLUMNS",JSON.stringify(this.table_columns))},addNew(){this.$router.push("/settings/supplier/add_email_templates")},editTemplate(e){this.$router.push(`/settings/supplier/edit_email_templates/${e}`)},confirmDialog(e){this.templateId=e,this.confirmDelete=!0},deleteTemplate(){return q(this,void 0,void 0,(function*(){try{if(this.loading=!0,!this.templateId)return void this.showErrorToast(this.$t("email_template_not_found"));const e=yield S.wP.delete(this.templateId);if(!e||!1===e.success)throw null===e||void 0===e?void 0:e.message;yield this.getEmailData(),this.showSuccessToast(this.$t("email_template_deleted_success")),this.confirmDelete=!1}catch(e){const t=I.t.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}}))},emailTypeValue(e){let t;switch(e){case"supplier_invite":t="Supplier Invitation Email";break;case"supplier_register":t="Supplier Registration Completion Email";break;case"supplier_approve":t="Supplier Approval Email";break;case"supplier_reject":t="Supplier Rejection Email";break}return t}}});var X=a(12807),M=a(857),j=a(56384),P=a(84436),N=a(53999),K=a(90124),z=a(25173),O=a(82156),V=a(23316),B=a(44189),R=a(3952),U=a(62669),G=a(39035),H=a(42315),J=a(88672),W=a(98582),Y=a.n(W);const Z=(0,X.A)(Q,[["render",D],["__scopeId","data-v-18bf1061"]]),ee=Z;Y()(Q,"components",{QMarkupTable:M.A,QBtn:j.A,QMenu:P.A,QList:N.A,QItem:K.A,QItemSection:z.A,QDialog:O.A,QCard:V.A,QCardSection:B.A,QAvatar:R.A,QCardActions:U.A,QInnerLoading:G.A,QTable:H.A}),Y()(Q,"directives",{ClosePopup:J.A})}}]);