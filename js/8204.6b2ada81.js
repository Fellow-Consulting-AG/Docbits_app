"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[8204],{88204:(e,l,t)=>{t.r(l),t.d(l,{default:()=>gt});var o=t(61758),i=t(58790);const a=e=>((0,o.Qi)("data-v-084d4f06"),e=e(),(0,o.jt)(),e),s={class:"row q-pl-md q-pr-md highlighted-back"},d={class:"col-12 q-pa-xs"},r={class:"float-right"},n=["innerHTML"],m=a((()=>(0,o.Lk)("img",{width:"20",src:"images/globe.svg",class:"black_to_white"},null,-1))),u={class:"row q-pl-md q-pr-md"},c={class:"col-xs-12 col-sm-2 col-md-2 col-lg-2 q-pt-sm"},p={class:"full-width scroll-area-height-form-builder scrolle-y"},f={class:"full-width",style:{position:"relative"}},g={class:"col-xs-12 col-sm-10 col-md-10 col-lg-10 padding-8-0-8-8"},h={class:"full-width"},_={class:"full-width"},b={class:"p-t-b-6 highlighted-back image_control_panel"},v={class:"row"},y={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},F={class:"row form-builder-image-container",id:"image_scrolle"},k={class:"image_container overflow-scroll",id:"image_container"},L=["width"],C=a((()=>(0,o.Lk)("div",{class:"max-width-80 q-pl-sm q-pr-sm"},[(0,o.Lk)("div",{class:"justify-center form-builder-image-container"},[(0,o.Lk)("img",{src:"images/Banana_invoice.svg",width:"50",class:"active cursor-pointer q-ma-sm shadow-2 solid-border-1px bg-white",draggable:"false"})])],-1))),T={class:"row"},B={class:"col-sm-12 col-md-12 col-lg-12"},M={class:"row"},N={class:"col-sm-12 col-md-12 col-lg-12"},V={class:"col-sm-12 col-md-12 col-lg-12"},A=a((()=>(0,o.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},null,-1))),E={class:"col-sm-12 col-md-12 col-lg-12"};function w(e,l,t,a,w,O){const q=(0,o.g2)("SubHeader"),I=(0,o.g2)("helpLayoutbuilder"),x=(0,o.g2)("f-btn"),S=(0,o.g2)("q-item-label"),D=(0,o.g2)("q-tooltip"),P=(0,o.g2)("q-item-section"),R=(0,o.g2)("q-item"),U=(0,o.g2)("q-icon"),$=(0,o.g2)("q-select"),Q=(0,o.g2)("q-tab"),W=(0,o.g2)("q-tabs"),X=(0,o.g2)("q-separator"),H=(0,o.g2)("DefaultElements"),K=(0,o.g2)("q-expansion-item"),J=(0,o.g2)("Elements"),z=(0,o.g2)("q-tab-panel"),j=(0,o.g2)("Properties"),Z=(0,o.g2)("q-tab-panels"),G=(0,o.g2)("FieldsDesigner"),Y=(0,o.g2)("q-splitter"),ee=(0,o.g2)("q-toolbar-title"),le=(0,o.g2)("q-btn"),te=(0,o.g2)("q-toolbar"),oe=(0,o.g2)("q-input"),ie=(0,o.g2)("q-form"),ae=(0,o.g2)("q-card-section"),se=(0,o.g2)("q-card"),de=(0,o.g2)("q-dialog"),re=(0,o.g2)("Loader"),ne=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(q,{name:"layout_builder_module",label:e.$t("layout_builder_module"),show_expiry_alert:!0,onSearch:!1},null,8,["label"]),(0,o.Lk)("div",s,[(0,o.Lk)("div",d,[(0,o.Lk)("div",r,[(0,o.bF)(I)]),(0,o.bF)(x,{label:e.$t("copy_json"),class:"float-right",icon:"content_copy",onClick:l[0]||(l[0]=l=>e.copyTemplate())},null,8,["label"]),(0,o.bF)(x,{label:e.$t("edit_json"),class:"float-right q-mr-md",icon:"visibility",onClick:l[1]||(l[1]=l=>e.openJsonForm())},null,8,["label"]),(0,o.bF)(x,{label:e.$t("use_default_template"),class:"float-right q-mr-md",onClick:l[2]||(l[2]=l=>e.restoreDefaults())},null,8,["label"]),(0,o.bF)($,{outlined:"",dense:"",class:"language-select float-right q-mr-md width-200",modelValue:e.language_origin,"onUpdate:modelValue":[l[3]||(l[3]=l=>e.language_origin=l),l[4]||(l[4]=l=>e.createTemplateAccordingToOrigin())],options:e.language_origin_list,"emit-value":"","map-options":""},{option:(0,o.k6)((e=>[(0,o.bF)(R,(0,i._B)((0,o.Ng)(e.itemProps)),{default:(0,o.k6)((()=>[(0,o.bF)(P,null,{default:(0,o.k6)((()=>[(0,o.bF)(S,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.opt.label),1)])),_:2},1024),e.opt.description?((0,o.uX)(),(0,o.Wv)(D,{key:0},{default:(0,o.k6)((()=>[(0,o.Lk)("span",{innerHTML:e.opt.description},null,8,n)])),_:2},1024)):(0,o.Q3)("",!0)])),_:2},1024)])),_:2},1040)])),prepend:(0,o.k6)((()=>[(0,o.bF)(U,{flat:"",dense:"",color:"primary"},{default:(0,o.k6)((()=>[m])),_:1})])),_:1},8,["modelValue","options"])])]),(0,o.Lk)("div",u,[(0,o.Lk)("div",c,[(0,o.Lk)("div",p,[(0,o.Lk)("div",f,[(0,o.bF)(W,{modelValue:e.activeTab,"onUpdate:modelValue":l[5]||(l[5]=l=>e.activeTab=l),dense:"","active-class":"highlighted-back","indicator-color":"primary","active-color":"primary",align:"justify"},{default:(0,o.k6)((()=>[(0,o.bF)(Q,{name:"form_elements",label:e.$t("form_builder.elements")},null,8,["label"]),(0,o.bF)(Q,{name:"element_properties",label:e.$t("form_builder.properties")},null,8,["label"])])),_:1},8,["modelValue"]),(0,o.bF)(X),(0,o.bF)(Z,{modelValue:e.activeTab,"onUpdate:modelValue":l[6]||(l[6]=l=>e.activeTab=l),animated:""},{default:(0,o.k6)((()=>[(0,o.bF)(z,{name:"form_elements"},{default:(0,o.k6)((()=>[(0,o.bF)(K,{"expand-separator":"","default-opened":"",label:e.$t("fields"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px q-mt-sm",class:"q-mb-sm"},{default:(0,o.k6)((()=>[(0,o.bF)(H)])),_:1},8,["label"]),(0,o.bF)(K,{"expand-separator":"",label:e.$t("form_builder.form_elements"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px"},{default:(0,o.k6)((()=>[e.renderComponent?((0,o.uX)(),(0,o.Wv)(J,{key:e.keyToUpdateComponnets})):(0,o.Q3)("",!0)])),_:1},8,["label"]),(0,o.bF)(X)])),_:1}),(0,o.bF)(z,{name:"element_properties"},{default:(0,o.k6)((()=>[e.renderComponent?((0,o.uX)(),(0,o.Wv)(j,{key:e.keyToUpdateComponnets})):(0,o.Q3)("",!0)])),_:1})])),_:1},8,["modelValue"])])])]),(0,o.Lk)("div",g,[(0,o.bF)(Y,{limits:[30,95],modelValue:e.formSplitterModel,"onUpdate:modelValue":l[7]||(l[7]=l=>e.formSplitterModel=l),class:"scroll-area-height-form-builder"},{before:(0,o.k6)((()=>[(0,o.Lk)("div",h,[(0,o.bF)(G,{onSaveTemplate:e.saveTemplate},null,8,["onSaveTemplate"])])])),after:(0,o.k6)((()=>[(0,o.Lk)("div",_,[(0,o.Lk)("div",b,[(0,o.Lk)("div",v,[(0,o.Lk)("div",y,[(0,o.bF)(U,{name:"img:images/zoom_in.svg",size:"24px",class:"q-mr-sm cursor-pointer",onClick:e.zoomIn},{default:(0,o.k6)((()=>[(0,o.bF)(D,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("zoom_in")),1)])),_:1})])),_:1},8,["onClick"]),(0,o.bF)(U,{name:"img:images/zoom_out.svg",size:"24px",class:"q-mr-sm cursor-pointer",onClick:e.zoomOut},{default:(0,o.k6)((()=>[(0,o.bF)(D,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("zoom_out")),1)])),_:1})])),_:1},8,["onClick"])])])]),(0,o.Lk)("div",F,[(0,o.Lk)("div",k,[(0,o.Lk)("img",{src:"images/Banana_invoice.svg",width:e.imageWidth,draggable:"false",class:"bg-white"},null,8,L)]),C])])])),_:1},8,["modelValue"])])]),(0,o.bF)(de,{modelValue:e.showJsonForm,"onUpdate:modelValue":l[11]||(l[11]=l=>e.showJsonForm=l)},{default:(0,o.k6)((()=>[(0,o.bF)(se,null,{default:(0,o.k6)((()=>[(0,o.bF)(te,{class:"secondary-toolbar"},{default:(0,o.k6)((()=>[(0,o.bF)(ee,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("edit_json")),1)])),_:1}),(0,o.bo)((0,o.bF)(le,{flat:"",round:"",dense:"",icon:"close"},null,512),[[ne]])])),_:1}),(0,o.bF)(ae,{class:"width-500"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",T,[(0,o.Lk)("div",B,[(0,o.Lk)("div",M,[(0,o.bF)(ie,{class:"full-width"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",N,(0,i.v_)(e.$t("pages.fields_settings.formula")),1),(0,o.Lk)("div",V,[(0,o.bF)(oe,{outlined:"",modelValue:this.strFormLayout,"onUpdate:modelValue":l[8]||(l[8]=e=>this.strFormLayout=e),type:"textarea"},null,8,["modelValue"])]),A,(0,o.Lk)("div",E,[(0,o.bo)((0,o.bF)(le,{label:e.$t("pages.user.save"),onClick:l[9]||(l[9]=l=>e.savePastedJson()),color:"primary",icon:"done"},null,8,["label"]),[[ne]]),(0,o.bF)(le,{outline:"",color:"primary",label:"Copy Json",class:"float-right",icon:"content_copy",onClick:l[10]||(l[10]=l=>e.copyTemplate())})])])),_:1})])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(re)],64)}var O=t(92162),q=t(1659),I=t(24622),x=t(38734),S=t(46162),D=t(96056),P=t(89156),R=t(64233);const U={class:"p-t-b-6 image_control_panel highlighted-back"},$={class:"row"},Q={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},W={id:"field_scrolle",class:"form-builder-middle-section-height scrolle-y"},X={class:"section-block dashed-border q-mb-md q-pa-sm display-inline-block full-width"},H={key:0,class:"row meta"},K=["onClick"],J={key:1,class:"full-width q-pa-xs height-24"};function z(e,l,t,a,s,d){const r=(0,o.g2)("q-tooltip"),n=(0,o.g2)("q-icon"),m=(0,o.g2)("q-btn"),u=(0,o.g2)("draggable");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",U,[(0,o.Lk)("div",$,[(0,o.Lk)("div",Q,[(0,o.bF)(n,{name:"img:images/save.svg",size:"24px",class:"float-right q-mr-sm cursor-pointer",onClick:l[0]||(l[0]=l=>e.$emit("saveTemplate",!0))},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("save")),1)])),_:1})])),_:1})])])]),(0,o.Lk)("div",W,[(0,o.Lk)("div",X,[e.isDefaultFieldLoaded?((0,o.uX)(),(0,o.CE)("div",H,[(0,o.bF)(u,{modelValue:e.formLayout,"onUpdate:modelValue":l[1]||(l[1]=l=>e.formLayout=l),class:"dragArea","item-key":"name",group:{name:"formbuilder",pull:!1,put:!0},sort:!0,"ghost-class":"sortable__ghost",onChange:e.itemAdded},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.formLayout,((l,t)=>((0,o.uX)(),(0,o.CE)("div",(0,o.v6)({key:t,ref_for:!0},l,{onClick:t=>e.inputClicked(l.name),class:["element_parent q-pa-sm cursor-move",(l.name==e.activeFieldName?"is--active  dashed-border":" ")+" display-block "+(l.tr_ocr_model_id?" text-primary ":" ")],style:"width:"+e.getElementWidth(l)+"%"}),[e.renderComponent?((0,o.uX)(),(0,o.Wv)((0,o.$y)(l.fieldType),{key:0,currentField:l,isReadOnly:!1,fieldName:l.name,groupIndex:t,onInputClicked:e.inputClicked,onInputValueChanges:e.inputValueChanges,onUpdateModel:e.updateModel,class:"form__field"},null,40,["currentField","fieldName","groupIndex","onInputClicked","onInputValueChanges","onUpdateModel"])):(0,o.Q3)("",!0),l.name===e.activeFieldName?((0,o.uX)(),(0,o.CE)("div",J,[(0,o.bF)(m,{round:"",color:"primary",icon:"delete",size:"xs",class:"float-right delete-ele",onClick:l=>e.removeField(l,t)},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])):(0,o.Q3)("",!0)],16,K)))),128))])),_:1},8,["modelValue","onChange"])])):(0,o.Q3)("",!0)])])],64)}var j=t(18505),Z=t(83319),G=t(39231),Y=t(1133),ee=t(41162),le=t(36488),te=t(32162),oe=t(86306),ie=t(4225),ae=t(96284),se=t(31986),de=t(68278);const re=(0,o.pM)({el:"fields_designer",mixins:[j.A,I.A],emits:["showConnectionFromField","saveTemplate","markTableColumns"],props:{},data(){return{}},components:{Label:Y.A,Button:ee.A,CheckBox:le.A,TextInput:te.A,SecondApprover:oe.A,DocumentApprover:ae.A,HorizontalSeparator:se.A,ExtractedTableTabPanels:de.A,draggable:G.H},mounted:function(){document.addEventListener("add_field_to_designer",this.addFieldToDesigner),document.addEventListener("element_click",this.triggerFieldFocus)},unmounted:function(){document.removeEventListener("add_field_to_designer",this.addFieldToDesigner),document.removeEventListener("element_click",this.triggerFieldFocus)},methods:{itemAdded(e){if(!e.added)return;let l=e.added.element;this.keyToUpdateComponnets++,this.formBuilderConfigModel[l.name]||this.updateModel(l)},calculateRowColSize(e){return e>1?100/e:100},removeField(e,l){if(e.stopPropagation(),this.formBuilderConfigModel[this.activeFieldName]&&this.formBuilderConfigModel[this.activeFieldName].isDefaultField)for(let t of this.defaultFields)if(t.name===this.activeFieldName){t.isAlreadyAdded=!1;break}this.formLayout.splice(l,1),delete this.formBuilderConfigModel[this.activeFieldName],delete this.formBuilderModel[this.activeFieldName],this.activeFieldName="",this.activeTab="form_elements"},triggerFieldFocus(e){this.inputClicked(e.detail)},inputClicked(e){logInfo("step 2 =========> inputClicked"),this.activeTab="element_properties",this.activeFieldName=e,this.setTrOcrModeld(e)},setTrOcrModeld(e){this.formBuilderConfigModel[e].hasOwnProperty("tr_ocr_model_id")||(this.formBuilderConfigModel[e].tr_ocr_model_id="")},inputValueChanges(e,l){"checkbox"===l&&this.inputClicked(e),setTimeout((()=>{this.formBuilderModel[e].formatted_value=!1}),50)},updateModel(e,l=!1){if(this.formBuilderConfigModel[e.name]=JSON.parse(JSON.stringify(e)),e.hasOwnProperty("is_readonly")||(this.formBuilderConfigModel[e.name].is_readonly=!1),this.formBuilderModel[e.name]=[],this.formBuilderModel[e.name].page="",this.formBuilderModel[e.name].color="",this.formBuilderModel[e.name].score="",this.formBuilderModel[e.name].coords=[],this.formBuilderModel[e.name].confidence="",e.fieldType===ie.VV.CHECK_BOX?(this.formBuilderModel[e.name].value=!1,this.formBuilderModel[e.name].formatted_value=!1):(this.formBuilderModel[e.name].value="",this.formBuilderModel[e.name].formatted_value=""),e.isDefaultField)for(let t of this.defaultFields)if(t.name===e.name){t.isAlreadyAdded=!0;break}l||(this.renderChildElements(e.name),this.activeFieldName=e.name)}},setup(){const e=(0,Z.uL)(),{docType:l,activeTab:t,formLayout:o,defaultFields:i,formBuilderModel:a,formBuilderConfigModel:s,activeFieldName:d,keyToUpdateComponnets:r,renderComponent:n,isDefaultFieldLoaded:m}=(0,q.bP)(e),{getElementWidth:u,renderChildElements:c}=e;return{renderChildElements:c,docType:l,activeTab:t,formLayout:o,defaultFields:i,activeFieldName:d,renderComponent:n,formBuilderModel:a,isDefaultFieldLoaded:m,keyToUpdateComponnets:r,formBuilderConfigModel:s,getElementWidth:u}}});var ne=t(12807),me=t(50492),ue=t(97410),ce=t(56384),pe=t(67156),fe=t(98582),ge=t.n(fe);const he=(0,ne.A)(re,[["render",z],["__scopeId","data-v-489b9b9a"]]),_e=he;ge()(re,"components",{QIcon:me.A,QTooltip:ue.A,QBtn:ce.A,QField:pe.A});var be=t(14907),ve=t(78652);const ye={key:0,class:"full-width"},Fe={class:"row"},ke=["src"],Le={class:""};function Ce(e,l,t,a,s,d){const r=(0,o.g2)("draggable");return e.filteredFields.length>0?((0,o.uX)(),(0,o.CE)("div",ye,[(0,o.bF)(r,{list:e.filteredFields,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.filteredFields,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l,class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm cursor-pointer mt-5 border-radius-5px"},[(0,o.Lk)("div",Fe,[(0,o.Lk)("img",{src:e.icon,width:"14",class:"q-mr-sm"},null,8,ke),(0,o.Lk)("div",Le,(0,i.v_)(e.text),1)])])))),128))])),_:1},8,["list"])])):(0,o.Q3)("",!0)}var Te=t(85192),Be=t(76956),Me=t(86366);const Ne={components:{},data(){return{fields:[{fieldType:Me.VV.TEXT_INPUT,icon:"images/text_icon.svg",label:"Label",name:"input_"+(0,Te.A)(),text:"Text",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:33,isDisabled:!1,clearable:!1,hideLabel:!1,translation_key:"Label",is_textarea:!1,run_script_on_change:!1,run_workflow_on_change:!1,tr_ocr_model_id:"",tabIndex:0,classes:""},{fieldType:Me.VV.LABEL,icon:"images/text_icon.svg",label:"Label",name:"input_"+(0,Te.A)(),text:"Label",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:30,isDisabled:!1,clearable:!1,hideLabel:!1,translation_key:"Label",classes:""},{fieldType:Me.VV.CHECK_BOX,icon:"images/check_box_icon.svg",label:"Label",name:"input_"+(0,Te.A)(),text:"Check Box",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:33,isDisabled:!1,clearable:!1,hideLabel:!1,translation_key:"Label",tr_ocr_model_id:"",field_group:"",field_threshold:"",tabIndex:0,run_script_on_change:!1},{fieldType:Me.VV.HORIZONTAL_SEPARATOR,icon:"images/horizontal_line.svg",name:"input_"+(0,Te.A)(),text:"Horizontal Separator",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:100,isDisabled:!1,clearable:!1,hideLabel:!1,space_from_top:"q-mt-lg",space_from_bottom:"",translation_key:"",classes:""},{fieldType:Me.VV.EXTRACTED_TABLE_TAB_PANELS,icon:"images/table.svg",name:"tab_panel_tables_"+(0,Te.A)(),label:"Label",text:"PO Tables",isDefaultField:!1,elementWidth:100,translation_key:"po_panel_tables"},{fieldType:Me.VV.DOCUMENT_APPROVER,icon:"settings/user.svg",name:"first_approver",text:"Document Approver",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:100,isDisabled:!1,clearable:!1,hideLabel:!1,space_from_top:"q-mt-lg",space_from_bottom:"",translation_key:"approver",classes:""},{fieldType:Me.VV.SECOND_APPROVER,icon:"settings/user.svg",name:"assigned_to",text:"Second Approver",coords:[],hide_label:!1,isRequired:!1,displayLabelOnLeft:!1,isPlaceholderVisible:!0,isDefaultField:!1,isUnique:!1,labelWidth:20,elementWidth:100,isDisabled:!1,clearable:!1,hideLabel:!1,space_from_top:"q-mt-lg",space_from_bottom:"",translation_key:"releases_person",classes:""},{fieldType:Me.VV.BUTTON,icon:"images/button.svg",name:"button_"+(0,Te.A)(),label:"Button",text:"Button",type:Be.aH.save,isDefaultField:!1,elementWidth:50,translation_key:"BUTTON",appearance:"",classes:""}],sortElementOptions:{group:{name:"formbuilder",pull:!1,put:!0},sort:!0},dropElementOptions:{group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,filter:".is-disabled"}}},methods:{}},Ve=(0,o.pM)({name:"Elements",components:{draggable:G.H},data(){return{fields:(0,x.KR)(Ne.data().fields),dropElementOptions:Ne.data().dropElementOptions}},mounted(){this.init()},methods:{init(){this.filteredFields=this.fields.filter((e=>0==e.hide_in_panel_list||void 0==e.hide_in_panel_list))},checkStopDragCondition(e){}},setup(){const e=(0,Z.uL)(),{documentTables:l,documentTableNames:t}=(0,q.bP)(e),{getDocumentTables:o}=e;return{documentTables:l,documentTableNames:t,getDocumentTables:o,filteredFields:(0,x.KR)([])}}}),Ae=(0,ne.A)(Ve,[["render",Ce],["__scopeId","data-v-129f2a27"]]),Ee=Ae;ge()(Ve,"components",{QBtn:ce.A});var we=t(11470),Oe=t(64775);const qe={class:"full-width"},Ie={class:"full-width"},xe={class:"row"},Se={class:"width-20px"},De=["src"],Pe={class:"width-100-10px"},Re={class:"full-width"},Ue={class:"full-width text-grey-6"};function $e(e,l,t,a,s,d){const r=(0,o.g2)("q-input"),n=(0,o.g2)("draggable");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",qe,[(0,o.bF)(r,{modelValue:e.searchInput,"onUpdate:modelValue":l[0]||(l[0]=l=>e.searchInput=l),class:"q-pt-md q-pb-md",dense:"",autofocus:"",label:e.$t("pages.user.search"),outlined:""},null,8,["modelValue","label"])]),(0,o.Lk)("div",Ie,[(0,o.bF)(n,{list:e.filteredFields,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.filteredFields,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l,class:"col-sm-12 col-md-12 col-lg-12 cursor-pointer q-pa-sm mt-5 border-radius-5px"},[(0,o.Lk)("div",xe,[(0,o.Lk)("div",Se,[(0,o.Lk)("img",{src:e.icon,width:"14"},null,8,De)]),(0,o.Lk)("div",Pe,[(0,o.Lk)("div",Re,(0,i.v_)(e.label),1),(0,o.Lk)("div",Ue,(0,i.v_)(" ("+e.field_name+")"),1)])])])))),128))])),_:1},8,["list"])])],64)}var Qe=t(25891),We=function(e,l,t,o){function i(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,a){function s(e){try{r(o.next(e))}catch(l){a(l)}}function d(e){try{r(o["throw"](e))}catch(l){a(l)}}function r(e){e.done?t(e.value):i(e.value).then(s,d)}r((o=o.apply(e,l||[])).next())}))};const Xe=(0,o.pM)({name:"DefaultElements",mixins:[j.A,I.A,Qe.A],components:{draggable:G.H},data(){return{searchInput:"",componentsForApproval:Me.pj}},watch:{searchInput(e){for(let l of this.defaultFields)l.isSearched=""===e||null==e||l.label.toLowerCase().includes(e.toLowerCase())}},computed:{filteredFields(){return this.defaultFields.filter((e=>!e.isHidden&&e.isSearched&&!e.isAlreadyAdded))}},mounted(){this.init()},methods:{init(){return We(this,void 0,void 0,(function*(){this.hideLoading();try{yield this.loadDocumentDefaultFields(this.$route.params.doc_type),this.isDefaultFieldLoaded=!0}catch(e){return this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(e)}finally{this.hideLoading()}}))}},setup(){const e=(0,Z.uL)(),{defaultFields:l,isDefaultFieldLoaded:t}=(0,q.bP)(e),{loadDocumentDefaultFields:o}=e;return{defaultFields:l,isDefaultFieldLoaded:t,loadDocumentDefaultFields:o}}});var He=t(67837);const Ke=(0,ne.A)(Xe,[["render",$e],["__scopeId","data-v-2248b8be"]]),Je=Ke;ge()(Xe,"components",{QInput:He.A,QBtn:ce.A});const ze=e=>((0,o.Qi)("data-v-60413a5e"),e=e(),(0,o.jt)(),e),je={key:0,class:"row"},Ze={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Ge={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Ye={key:1,class:"col-sm-12 col-md-12 col-lg-12"},el={class:"row"},ll={class:"row"},tl={key:2,class:"col-sm-12 col-md-12 col-lg-12"},ol={class:"row"},il={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},al={class:"col-sm-12 col-md-12 col-lg-12"},sl={class:"col-sm-12 col-md-12 col-lg-12"},dl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},rl={class:"col-sm-12 col-md-12 col-lg-12"},nl={class:"col-sm-12 col-md-12 col-lg-12"},ml={key:3,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},ul={class:"col-sm-12 col-md-12 col-lg-12"},cl={class:"col-sm-12 col-md-12 col-lg-12"},pl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},fl={class:"col-sm-12 col-md-12 col-lg-12"},gl={class:"col-sm-12 col-md-12 col-lg-12"},hl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},_l={class:"col-sm-12 col-md-12 col-lg-12"},bl={class:"col-sm-12 col-md-12 col-lg-12"},vl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},yl={class:"col-sm-12 col-md-12 col-lg-12"},Fl={class:"col-sm-12 col-md-12 col-lg-12"},kl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Ll={class:"col-sm-12 col-md-12 col-lg-12"},Cl={class:"col-sm-12 col-md-12 col-lg-12"},Tl={key:5,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Bl=ze((()=>(0,o.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Tab Index ",-1))),Ml={class:"col-sm-12 col-md-12 col-lg-12"},Nl={key:6,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Vl=ze((()=>(0,o.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Field Group ",-1))),Al={class:"col-sm-12 col-md-12 col-lg-12"},El={key:7,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},wl=ze((()=>(0,o.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Field Threshold ",-1))),Ol={class:"col-sm-12 col-md-12 col-lg-12"},ql={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Il={class:"col-sm-12 col-md-12 col-lg-12"},xl={class:"col-sm-12 col-md-12 col-lg-12"},Sl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Dl={class:"col-sm-12 col-md-12 col-lg-12"},Pl={class:"col-sm-12 col-md-12 col-lg-12"};function Rl(e,l,t,a,s,d){const r=(0,o.g2)("q-select"),n=(0,o.g2)("q-checkbox"),m=(0,o.g2)("q-input");return(0,o.uX)(),(0,o.CE)(o.FK,null,[e.activeFieldName?((0,o.uX)(),(0,o.CE)("div",je,[e.isButtonType()?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("div",Ze,[(0,o.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].type,"onUpdate:modelValue":l[0]||(l[0]=l=>e.formBuilderConfigModel[e.activeFieldName].type=l),options:e.buttonTypes,label:"Select Button Type",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])]),(0,o.Lk)("div",Ge,[(0,o.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].appearance,"onUpdate:modelValue":l[1]||(l[1]=l=>e.formBuilderConfigModel[e.activeFieldName].appearance=l),options:e.appearanceList,label:"Select Button Appearance",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])],64)):(0,o.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT?((0,o.uX)(),(0,o.CE)("div",Ye,[(0,o.Lk)("div",el,[(0,o.bF)(n,{modelValue:e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft,"onUpdate:modelValue":l[2]||(l[2]=l=>e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft=l),label:e.$t("display_label_left")},null,8,["modelValue","label"])]),(0,o.Lk)("div",ll,[(0,o.bF)(n,{modelValue:e.formBuilderConfigModel[e.activeFieldName].is_textarea,"onUpdate:modelValue":l[3]||(l[3]=l=>e.formBuilderConfigModel[e.activeFieldName].is_textarea=l),label:e.$t("is_textarea")},null,8,["modelValue","label"])])])):(0,o.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT||e.formBuilderConfigModel[e.activeFieldName].fieldType===e.DOCUMENT_APPROVER||e.formBuilderConfigModel[e.activeFieldName].fieldType===e.SECOND_APPROVER?((0,o.uX)(),(0,o.CE)("div",tl,[(0,o.Lk)("div",ol,[(0,o.bF)(n,{modelValue:e.formBuilderConfigModel[e.activeFieldName].is_readonly,"onUpdate:modelValue":l[4]||(l[4]=l=>e.formBuilderConfigModel[e.activeFieldName].is_readonly=l),label:e.$t("is_readonly")},null,8,["modelValue","label"])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",il,[(0,o.Lk)("div",al,(0,i.v_)(e.$t("label")),1),(0,o.Lk)("div",sl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].label,"onUpdate:modelValue":l[5]||(l[5]=l=>e.formBuilderConfigModel[e.activeFieldName].label=l),disable:e.formBuilderConfigModel[e.activeFieldName].isDefaultField,onBlur:l[6]||(l[6]=l=>e.updateFieldName(e.activeFieldName))},null,8,["modelValue","disable"])])]),(0,o.Lk)("div",dl,[(0,o.Lk)("div",rl,(0,i.v_)(e.$t("field_name")),1),(0,o.Lk)("div",nl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].name,"onUpdate:modelValue":l[7]||(l[7]=l=>e.formBuilderConfigModel[e.activeFieldName].name=l),disable:e.formBuilderConfigModel[e.activeFieldName].isDefaultField,onBlur:l[8]||(l[8]=l=>e.onFieldNameFocusLose(e.activeFieldName))},null,8,["modelValue","disable"])])]),e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft?((0,o.uX)(),(0,o.CE)("div",ml,[(0,o.Lk)("div",ul,(0,i.v_)(e.$t("label_width_percentage")),1),(0,o.Lk)("div",cl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].labelWidth,"onUpdate:modelValue":l[9]||(l[9]=l=>e.formBuilderConfigModel[e.activeFieldName].labelWidth=l),type:"number",rules:[l=>l>=3&&l<=100||e.$t("label_length_between_3_100")]},null,8,["modelValue","rules"])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",pl,[(0,o.Lk)("div",fl,(0,i.v_)(e.$t("element_width_percentage")),1),(0,o.Lk)("div",gl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].elementWidth,"onUpdate:modelValue":[l[10]||(l[10]=l=>e.formBuilderConfigModel[e.activeFieldName].elementWidth=l),l[11]||(l[11]=l=>{e.handleElementWidth(l)})],disable:e.formBuilderConfigModel[e.activeFieldName].fieldType===e.HORIZONTAL_SEPARATOR,type:"number",rules:[l=>l>=3&&l<=100||e.$t("field_length_between_3_100")]},null,8,["modelValue","disable","rules"])])]),(0,o.Lk)("div",hl,[(0,o.Lk)("div",_l,(0,i.v_)(e.$t("element_width_percentage")),1),(0,o.Lk)("div",bl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].classes,"onUpdate:modelValue":l[12]||(l[12]=l=>e.formBuilderConfigModel[e.activeFieldName].classes=l),label:"Enter style classes with space"},null,8,["modelValue"])])]),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.HORIZONTAL_SEPARATOR?((0,o.uX)(),(0,o.CE)(o.FK,{key:4},[(0,o.Lk)("div",vl,[(0,o.Lk)("div",yl,(0,i.v_)(e.$t("space_from_top")),1),(0,o.Lk)("div",Fl,[(0,o.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].space_from_top,"onUpdate:modelValue":l[13]||(l[13]=l=>e.formBuilderConfigModel[e.activeFieldName].space_from_top=l),options:e.spaceFromTopList,label:e.$t("space_from_top"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])]),(0,o.Lk)("div",kl,[(0,o.Lk)("div",Ll,(0,i.v_)(e.$t("space_from_bottom")),1),(0,o.Lk)("div",Cl,[(0,o.bF)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].space_from_bottom,"onUpdate:modelValue":l[14]||(l[14]=l=>e.formBuilderConfigModel[e.activeFieldName].space_from_bottom=l),options:e.spaceFromBottomList,label:e.$t("space_from_bottom"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])])],64)):(0,o.Q3)("",!0),e.renderTabIndexField()?((0,o.uX)(),(0,o.CE)("div",Tl,[Bl,(0,o.Lk)("div",Ml,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tabIndex,"onUpdate:modelValue":l[15]||(l[15]=l=>e.formBuilderConfigModel[e.activeFieldName].tabIndex=l),type:"number"},null,8,["modelValue"])])])):(0,o.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.CHECK_BOX?((0,o.uX)(),(0,o.CE)("div",Nl,[Vl,(0,o.Lk)("div",Al,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].field_group,"onUpdate:modelValue":l[16]||(l[16]=l=>e.formBuilderConfigModel[e.activeFieldName].field_group=l)},null,8,["modelValue"])])])):(0,o.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.CHECK_BOX?((0,o.uX)(),(0,o.CE)("div",El,[wl,(0,o.Lk)("div",Ol,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].field_threshold,"onUpdate:modelValue":l[17]||(l[17]=l=>e.formBuilderConfigModel[e.activeFieldName].field_threshold=l)},null,8,["modelValue"])])])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("div",ql,[(0,o.Lk)("div",Il,(0,i.v_)(e.$t("field_length")),1),(0,o.Lk)("div",xl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].length,"onUpdate:modelValue":l[18]||(l[18]=l=>e.formBuilderConfigModel[e.activeFieldName].length=l),type:"number"},null,8,["modelValue"])])]),(0,o.Lk)("div",Sl,[(0,o.Lk)("div",Dl,(0,i.v_)(e.$t("banned_keywords")),1),(0,o.Lk)("div",Pl,[(0,o.bF)(m,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].banned_keywords,"onUpdate:modelValue":l[19]||(l[19]=l=>e.formBuilderConfigModel[e.activeFieldName].banned_keywords=l),label:e.$t("comma_seperated_keywords")},null,8,["modelValue","label"])])])],64)):(0,o.Q3)("",!0)],64)}const Ul=(0,o.pM)({name:"Properties",mixins:[D.A,I.A],components:{},data(){return{rowIndex:(0,x.KR)(0),columnIndex:(0,x.KR)(0),isColumnMode:(0,x.KR)(!0),selectedInput:(0,x.KR)(""),BUTTON:Me.VV.BUTTON,CHECK_BOX:Me.VV.CHECK_BOX,TEXT_INPUT:Me.VV.TEXT_INPUT,HORIZONTAL_SEPARATOR:Me.VV.HORIZONTAL_SEPARATOR,DOCUMENT_APPROVER:Me.VV.DOCUMENT_APPROVER,SECOND_APPROVER:Me.VV.SECOND_APPROVER}},watch:{activeFieldName(e,l){e!=l&&(this.rowIndex=0,this.columnIndex=0,this.isColumnMode=!1)}},mounted:function(){logInfo("step 3 =========> mounted"),this.getModelList(),this.prepareButtonTypes(),document.addEventListener("load_settings",this.loadSettings),document.addEventListener("load_settings_for_series",this.loadSettingsForSeries)},unmounted:function(){document.removeEventListener("load_settings",this.loadSettings),document.removeEventListener("load_settings_for_series",this.loadSettingsForSeries)},methods:{addOption(){const e={label:"Option",value:"op"};this.formBuilderConfigModel[this.activeFieldName].options.push(e)},removeOption(e){this.formBuilderConfigModel[this.activeFieldName].options.splice(e,1)},setOptionValue(e){this.formBuilderConfigModel[this.activeFieldName].options[e].value=this.stringReplaceWithString(this.formBuilderConfigModel[this.activeFieldName].options[e].label," ","")},loadSettings(e){this.rowIndex=e.detail.rowIndex,this.columnIndex=e.detail.columnIndex,this.isColumnMode=e.detail.isColumnMode},loadSettingsForSeries(e){const l=e.detail;if(l)for(const[t,o]of Object.entries(this.formBuilderConfigModel[this.activeFieldName].columns)){const e=o;if(e.col_id===l){this.columnIndex=+t;break}}},onFieldNameFocusLose(e){const l=this.formBuilderConfigModel[e].name;if(l!==e)if(this.validateField(l)){for(const t of this.formLayout)if(t.name===e){t.name=l;for(const[l,o]of Object.entries(this.formBuilderConfigModel[e]))"name"!==l&&(t[l]=o);break}this.formBuilderConfigModel[l]={},this.formBuilderConfigModel[l]=JSON.parse(JSON.stringify(this.formBuilderConfigModel[e])),this.formBuilderModel[l]={},this.formBuilderModel[l]=JSON.parse(JSON.stringify(this.formBuilderModel[e])),this.activeFieldName=l,delete this.formBuilderModel[e],delete this.formBuilderConfigModel[e]}else this.formBuilderConfigModel[e].name=e},validateField(e){let l=!0;return""===e||null===e?(l=!1,this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY"))):this.hasWhiteSpace(e)?(l=!1,this.showErrorToast(this.$t("pages.messages.SPACES_NOT_ALLOWED"))):this.checkFirstLetterIsSpecialOrNumber(e)&&(l=!1,this.showErrorToast(this.$t("errors.special_letter_number_not_allowed"))),l},updateFieldName(e){const l=this.stringReplaceWithString(this.formBuilderConfigModel[e].label," ","_");l!==e&&(this.formBuilderConfigModel[e].name=l,this.onFieldNameFocusLose(e))},handleElementWidth(e){e>100?(this.formBuilderConfigModel[this.activeFieldName].elementWidth=100,this.showErrorToast(this.$t("field_length_between_3_100"))):e<3&&(this.formBuilderConfigModel[this.activeFieldName].elementWidth=3,this.showErrorToast(this.$t("field_length_between_3_100")))},renderModelDropdown(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.TEXT_INPUT||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.CHECK_BOX},onUpdateTROCRModel(){var e;const l=(0,O.$)("#"+this.activeFieldName);l&&(null===(e=l.closest(".element_parent"))||void 0===e||e.classList.toggle("text-primary"))},onColumnUpdateTROCRModel(e,l){const t=(0,O.$)("#col_"+e);t&&(l?t.classList.add("text-primary"):t.classList.remove("text-primary"))},renderTabIndexField(){return this.TEXT_INPUT===this.formBuilderConfigModel[this.activeFieldName].fieldType||this.CHECK_BOX===this.formBuilderConfigModel[this.activeFieldName].fieldType},onListOfValueSelect(e){e||(this.formBuilderConfigModel[this.activeFieldName].enforce_list_of_values=!1)},isRunScriptEnabled(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.TEXT_INPUT||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.CHECK_BOX},isButtonType(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.BUTTON},prepareButtonTypes(){this.buttonTypes=[{label:this.$t("save"),value:Be.aH.save},{label:this.$t("request_release"),value:Be.aH.request_release},{label:this.$t("reject"),value:Be.aH.reject},{label:this.$t("in_review"),value:Be.aH.in_review},{label:this.$t("restart_workflow"),value:Be.aH.restart_workflow}]}},setup(){const e=(0,Z.uL)(),{activeFieldName:l,formBuilderModel:t,formBuilderConfigModel:o,formLayout:i}=(0,q.bP)(e),a=(0,Z.cY)(),{getModelList:s}=a,{model_list:d}=(0,q.bP)(a);return{model_list:d,formLayout:i,activeFieldName:l,formBuilderModel:t,formBuilderConfigModel:o,buttonTypes:(0,x.KR)([]),appearanceList:[{label:"Filled Button",value:""},{label:"Outline",value:"secondary"},{label:"Danger",value:"negative-tertiary"}],shortCutKeyList:[{label:"Shift",value:"shift"},{label:"Alt",value:"alt"}],spaceFromTopList:[{label:"None",value:""},{label:"Extra Small",value:"q-mt-xs"},{label:"Small",value:"q-mt-sm"},{label:"Medium",value:"q-mt-md"},{label:"Large",value:"q-mt-lg"},{label:"Extra Large",value:"q-mt-xl"}],spaceFromBottomList:[{label:"None",value:""},{label:"Extra Small",value:"q-mb-xs"},{label:"Small",value:"q-mb-sm"},{label:"Medium",value:"q-mb-md"},{label:"Large",value:"q-mb-lg"},{label:"Extra Large",value:"q-mb-xl"}],getModelList:s}}});var $l=t(94940),Ql=t(80460);const Wl=(0,ne.A)(Ul,[["render",Rl],["__scopeId","data-v-60413a5e"]]),Xl=Wl;ge()(Ul,"components",{QSelect:$l.A,QCheckbox:Ql.A,QInput:He.A});var Hl=t(78035),Kl=t(77362);const Jl={getDetailViewRoute(e){let l="";try{l="/manage_approval_layout_builder/"+e.doc_type_key,e.layout_type&&(l+="/"+e.layout_type),e.layout_template_id&&(l+="/"+e.layout_template_id),e.sub_doc_type_key&&(l+="?sub_doc_type="+e.sub_doc_type_key)}catch(t){logError(t)}return l}};var zl=function(e,l,t,o){function i(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,a){function s(e){try{r(o.next(e))}catch(l){a(l)}}function d(e){try{r(o["throw"](e))}catch(l){a(l)}}function r(e){e.done?t(e.value):i(e.value).then(s,d)}r((o=o.apply(e,l||[])).next())}))};const jl=(0,o.pM)({el:"#main",mixins:[j.A,I.A,R.A,D.A],components:{helpLayoutbuilder:Hl.A,DefaultElements:Je,FieldsDesigner:_e,Properties:Xl,SubHeader:Kl.A,Elements:Ee,Loader:P.A},watch:{$route(e,l){this.renderComponent=!1,this.isFormBuilderMode=!1,this.defaultFields=[],this.formBuilderModel=[],this.formBuilderConfigModel=[],this.activeTab="form_elements",this.activeFieldName=""}},data(){return{imageIndex:0,templateId:(0,x.KR)(""),subDocType:(0,x.KR)(""),baseUrl:"",page:(0,x.KR)(1),imageHeight:0,imageWidth:200,connectionId:"",componentType:"input",keyImageChange:(0,x.KR)(0),formSplitterModel:(0,x.KR)(50),showJsonForm:(0,x.KR)(!1),strFormLayout:(0,x.KR)(""),markedAreasStr:"",allowMultiSelection:!1,language_origin:(0,x.KR)("")}},mounted:function(){this.keyToUpdateComponnets=0,this.renderComponent=!0,this.isFormBuilderMode=!0,this.formBuilderModel=[],this.formBuilderConfigModel=[],this.docType=this.$route.params.doc_type,this.templateId=this.$route.params.id,this.setSubDocType(),this.baseUrl=S.VA,this.prepareLanguageOriginList(),this.formLayout=[],this.templateId?this.init():(this.formLayoutImages=[],this.saveTemplate(!0))},methods:{init(){return zl(this,void 0,void 0,(function*(){this.templateId=this.$route.params.id,this.templateId&&(yield this.loadLayoutTemplateById(),this.initImage())}))},loadLayoutTemplateById(){return zl(this,void 0,void 0,(function*(){let e;try{this.showLoading(),e=yield we.H7.getDocumentLayoutTemplateById(this.templateId),this.language_origin=e.doc_origin;let l=JSON.parse(e.layout_json);l&&(this.formLayout=l.hasOwnProperty("layout")?l.layout:[],l.hasOwnProperty("images")&&l.images.length>0&&(this.formLayoutImages=l.images),this.proximityTokens=l.proximity_tokens)}catch(l){return this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(l)}finally{this.hideLoading()}}))},initImage(){let e=(0,O.$)("#image_container");this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight},setSubDocType(){this.$route.query&&this.$route.query.sub_doc_type&&(this.subDocType=String(this.$route.query.sub_doc_type||""))},zoomOut(){this.imageWidth>200&&(this.imageWidth=this.imageWidth-100)},zoomIn(){this.imageWidth=this.imageWidth+100},prepareFormBuilderJson(){for(let[e,l]of this.formLayout.entries())Object.assign(l,this.formBuilderConfigModel[l.name]);this.$forceUpdate()},getLayoutJsonStr(){const e={layout:this.formLayout,images:this.formLayoutImages,proximity_tokens:this.proximityTokens};return JSON.stringify(e)},copyTemplate(){(0,ve.A)(this.getLayoutJsonStr()).then((()=>{this.showSuccessToast("Copied!")}))},openJsonForm(){this.strFormLayout=this.getLayoutJsonStr(),this.showJsonForm=!0},savePastedJson(){if(this.strFormLayout){let e=JSON.parse(this.strFormLayout);this.formLayout=e.hasOwnProperty("layout")?e.layout:[],e.hasOwnProperty("images")&&e.images.length>0&&(this.formLayoutImages=e.images),this.proximityTokens=e.proximity_tokens}this.saveTemplate(!1)},createTemplateAccordingToOrigin(){this.templateId="",this.saveTemplate(!0)},saveTemplate(e,l=!0){return zl(this,void 0,void 0,(function*(){let t;e&&this.prepareFormBuilderJson();try{this.showLoading();const e=this.$route.params.layout_type;let o={doc_type_key:this.docType,sub_doc_type_key:this.subDocType||"",title:"form builder",layout_json:this.getLayoutJsonStr(),layout_type:e};this.templateId?t=yield we.H7.updateDocumentLayoutTemplateById(o,this.templateId):(o.doc_origin=this.language_origin,t=yield we.H7.createDocumentLayoutTemplate(o)),t&&l&&this.showSuccessToast("Template Sucessfully saved"),this.templateId=t.id,this.$forceUpdate(),this.refreshView(e)}catch(o){return this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(o)}finally{this.hideLoading()}}))},refreshView(e){const l=Jl.getDetailViewRoute({doc_type_key:this.docType||"",layout_template_id:this.templateId||"",sub_doc_type_key:this.subDocType||"",layout_type:e});l||logInfo("missing params for url"),this.$router.push(l)},restoreDefaults(){return zl(this,void 0,void 0,(function*(){try{if(!this.templateId)return void logError("templateId not found");this.showLoading();const e=yield we.H7.deleteDocumentLayoutTemplate(this.templateId);if(!1===e.success)throw{message:e.message};this.showSuccessToast(this.$t("pages.messages.operation_sucessfull")),this.templateId="",this.saveTemplate(!0,!1)}catch(e){const l=Oe.t.getErrorMessage(e);this.showErrorToast(l),logError(e)}finally{this.hideLoading()}}))},prepareLanguageOriginList(){return zl(this,void 0,void 0,(function*(){yield this.getLanguageIfEmpty(),this.language_origin_list=JSON.parse(JSON.stringify(this.language_origins)),this.language_origin_list[0].label=this.$t("default")}))}},setup(){const e=(0,be.A)(),l=(0,Z.uL)(),{activeTab:t,isFormBuilderMode:o,keyToUpdateComponnets:i,renderComponent:a,defaultFields:s,formLayout:d,formLayoutImages:r,formBuilderModel:n,formBuilderConfigModel:m,activeFieldName:u,proximityTokens:c,docType:p}=(0,q.bP)(l),f=(0,Z.QJ)(),{language_origins:g}=(0,q.bP)(f),{getLanguageIfEmpty:h}=f,_=(0,Z._6)(),{tokenQueryParam:b}=(0,q.bP)(_);return _.getTokenQueryParam(),{getLanguageIfEmpty:h,docType:p,activeTab:t,formLayout:d,defaultFields:s,activeFieldName:u,renderComponent:a,formLayoutImages:r,formBuilderModel:n,isFormBuilderMode:o,keyToUpdateComponnets:i,formBuilderConfigModel:m,proximityTokens:c,language_origins:g,language_origin_list:(0,x.KR)([]),tokenQueryParam:b,showNotification(l){e.notify({message:l,color:"primary",position:"top"})}}}});var Zl=t(90124),Gl=t(25173),Yl=t(13796),et=t(42980),lt=t(10327),tt=t(10386),ot=t(39041),it=t(71746),at=t(88841),st=t(98072),dt=t(82156),rt=t(23316),nt=t(36914),mt=t(39150),ut=t(44189),ct=t(49200),pt=t(88672);const ft=(0,ne.A)(jl,[["render",w],["__scopeId","data-v-084d4f06"]]),gt=ft;ge()(jl,"components",{QSelect:$l.A,QItem:Zl.A,QItemSection:Gl.A,QItemLabel:Yl.A,QTooltip:ue.A,QIcon:me.A,QTabs:et.A,QTab:lt.A,QSeparator:tt.A,QTabPanels:ot.A,QTabPanel:it.A,QExpansionItem:at.A,QSplitter:st.A,QDialog:dt.A,QCard:rt.A,QToolbar:nt.A,QToolbarTitle:mt.A,QBtn:ce.A,QCardSection:ut.A,QForm:ct.A,QInput:He.A,QField:pe.A}),ge()(jl,"directives",{ClosePopup:pt.A})}}]);