"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[9437],{79437:(t,e,i)=>{i.r(e),i.d(e,{default:()=>j});var s=i(83673);const n={class:"container p-b-0 q-pb-sm settings mt-mb-8"};function o(t,e,i,o,r,c){const a=(0,s.up)("SubHeader"),d=(0,s.up)("BackToSettings"),l=(0,s.up)("settingsEditor");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(a,{name:"doc_type_script",label:t.$t("add_special_rules"),display_help_link:!1},null,8,["label"]),(0,s.Wm)(d,{back_to_rotue:"/settings/document"}),(0,s._)("div",n,[t.load_script?((0,s.wg)(),(0,s.j4)(l,{key:0})):(0,s.kq)("",!0)])],64)}var r=i(61959),c=i(60727),a=i(10321),d=i(62323);const l=(0,s._)("div",{class:"col-1"},"Result:",-1),p={class:"col-11 bg-grey-3 script-output"},u=(0,s._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function _(t,e,i,n,o,r){const c=(0,s.up)("q-btn"),a=(0,s.up)("q-card-actions"),_=(0,s.up)("editor"),h=(0,s.up)("q-card-section"),m=(0,s.up)("q-inner-loading"),g=(0,s.up)("q-card");return(0,s.wg)(),(0,s.j4)(g,{class:"settings-script-editor"},{default:(0,s.w5)((()=>[(0,s.Wm)(a,{align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{color:"primary",class:"q-mr-sm",onClick:t.saveRecord,label:t.$t("save")},null,8,["onClick","label"])])),_:1}),(0,s.Wm)(h,{class:"row items-center q-pb-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(_)])),_:1}),t.display_output_view?((0,s.wg)(),(0,s.j4)(h,{key:0,class:"row items-center q-pb-none full-width",style:{"min-height":"100px"}},{default:(0,s.w5)((()=>[l,(0,s._)("pre",p,(0,d.zw)(t.script_output),1)])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(m,{showing:t.processing},{default:(0,s.w5)((()=>[u])),_:1},8,["showing"])])),_:1})}var h=i(77378),m=i(9273);const g={id:"app"};function y(t,e,i,n,o,r){const c=(0,s.up)("prism-editor");return(0,s.wg)(),(0,s.iD)("div",g,[(0,s.Wm)(c,{class:"special-rules-editor",modelValue:this.current_model["script_data"],"onUpdate:modelValue":e[0]||(e[0]=t=>this.current_model["script_data"]=t),highlight:t.highlighter,"line-numbers":"",tabSize:"4"},null,8,["modelValue","highlight"])])}var w=i(21221),f=i(60407);i(3106),i(68561);const v=(0,s.aZ)({el:"#app",mixins:[],props:{},components:{PrismEditor:w.h},data(){return{}},mounted:function(){window.pyCodeEditor=this,""===this.current_model["script_data"]&&this.addExampleCode()},unmounted:function(){},watch:{current_model:{handler:function(t,e){""===t["script_data"]&&this.addExampleCode()}}},methods:{highlighter(t){return(0,f.highlight)(t,f.languages.py,"py")},addExampleCode(){this.current_model["script_data"]="\n# This is an Example Code\ndef median(pool):\n    copy = sorted(pool)\n    size = len(copy)\n    if size % 2 == 1:\n        return copy[(size - 1) / 2]\n    else:\n        return (copy[size/2 - 1] + copy[size/2]) / 2\nif __name__ == '__main__':\n    import doctest\n    doctest.testmod()\n      "}},setup(){const t=(0,c.Eu)(),{current_model:e}=(0,a.Jk)(t);return{current_model:e}}});var b=i(74260);const E=(0,b.Z)(v,[["render",y],["__scopeId","data-v-5bc8c171"]]),k=E;var C=function(t,e,i,s){function n(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,o){function r(t){try{a(s.next(t))}catch(e){o(e)}}function c(t){try{a(s["throw"](t))}catch(e){o(e)}}function a(t){t.done?i(t.value):n(t.value).then(r,c)}a((s=s.apply(t,e||[])).next())}))};const Z=(0,s.aZ)({el:"#app",mixins:[h.Z],props:{},components:{editor:k},watch:{selected_doc_type:{handler:function(t,e){this.initView()}}},data(){return{}},mounted:function(){this.initView()},methods:{initView(){return C(this,void 0,void 0,(function*(){try{if(!this.selected_doc_type)return;this.setEmptyModel(),this.processing=!0,yield this.getScript()}catch(t){const e=m.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.processing=!1}}))},saveRecord(){return C(this,void 0,void 0,(function*(){try{this.processing=!0,yield this.saveCurrentModel(),this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),this.open_editor=!1}catch(t){const e=m.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.processing=!1}}))}},setup(){const t=(0,c.Eu)(),{getScript:e,saveCurrentModel:i,resetByDocType:s,setEmptyModel:n}=t,{current_model:o,open_editor:d,selected_doc_type:l,display_output_view:p,script_output:u,processing:_,is_script_editor_available:h}=(0,a.Jk)(t);return{is_script_editor_available:h,script_output:u,display_output_view:p,selected_doc_type:l,setEmptyModel:n,resetByDocType:s,saveCurrentModel:i,getScript:e,open_editor:d,current_model:o,processing:_,CalHeight:(0,r.iH)("600")}}});var S=i(10151),q=i(99367),x=i(2165),T=i(25589),M=i(66941),V=i(7518),W=i.n(V);const z=(0,b.Z)(Z,[["render",_]]),H=z;W()(Z,"components",{QCard:S.Z,QCardActions:q.Z,QBtn:x.Z,QCardSection:T.Z,QInnerLoading:M.Z});var B=i(47845),Q=i(13873);const D=(0,s.aZ)({el:"#app",mixins:[],props:{},components:{settingsEditor:H,BackToSettings:B.Z,SubHeader:Q.Z},data(){return{}},mounted:function(){this.initView()},methods:{initView(){this.load_script=!1,this.selected_doc_type=String(this.$route.params.type||""),this.load_script=!0}},setup(){const t=(0,c.Eu)(),{selected_doc_type:e}=(0,a.Jk)(t);return{selected_doc_type:e,load_script:(0,r.iH)(!1)}}}),$=(0,b.Z)(D,[["render",o]]),j=$}}]);