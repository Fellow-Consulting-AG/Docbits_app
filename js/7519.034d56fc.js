"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[7519],{17519:(t,e,i)=>{i.r(e),i.d(e,{default:()=>Pt});var a=i(59835),n=i(86970);const s={class:"container"},l={style:{width:"100%"}},o={style:{"margin-top":"3px"}},d={key:0},r={style:{"margin-top":"3px"}},c={style:{"margin-top":"3px"}};function u(t,e,i,u,p,_){const m=(0,a.up)("SubHeader"),g=(0,a.up)("BackToSettings"),h=(0,a.up)("q-icon"),f=(0,a.up)("q-space"),w=(0,a.up)("q-separator"),y=(0,a.up)("API"),v=(0,a.up)("q-card-section"),x=(0,a.up)("q-card"),k=(0,a.up)("q-expansion-item"),W=(0,a.up)("SSOProvider"),q=(0,a.up)("IdentityProvider"),b=(0,a.up)("q-list");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(m,{name:"integration",label:t.$t("pages.settings.integration")},null,8,["label"]),(0,a.Wm)(g),(0,a._)("div",s,[(0,a._)("div",l,[(0,a._)("div",null,[(0,a.Wm)(b,{bordered:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,a.w5)((()=>[(0,a.Wm)(h,{size:"25px",style:{"margin-top":"3px"},class:"q-mr-lg icon-grey",name:"api"}),(0,a._)("span",o,(0,n.zw)(t.$t("pages.settings.api_key")),1),(0,a.Wm)(f)])),default:(0,a.w5)((()=>[(0,a.Wm)(w),(0,a.Wm)(x,{class:"page-background"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y)])),_:1})])),_:1})])),_:1}),t.isAdmin?((0,a.wg)(),(0,a.iD)("div",d,[(0,a.Wm)(k,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,a.w5)((()=>[(0,a.Wm)(h,{size:"25px",class:"q-mr-lg icon-grey-svg",name:"img:settings/key.svg"}),(0,a._)("span",r,(0,n.zw)(t.$t("pages.integration_settings.general")),1),(0,a.Wm)(f)])),default:(0,a.w5)((()=>[(0,a.Wm)(w),(0,a.Wm)(x,{class:"page-background"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(k,{"expand-separator":"","header-class":"highlighted-back","default-opened":""},{header:(0,a.w5)((()=>[(0,a.Wm)(h,{size:"25px",class:"q-mr-lg icon-grey",name:"fingerprint"}),(0,a._)("span",c,(0,n.zw)(t.$t("pages.integration_settings.saml_metadata")),1),(0,a.Wm)(f)])),default:(0,a.w5)((()=>[(0,a.Wm)(w),(0,a.Wm)(x,{class:"page-background"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(q)])),_:1})])),_:1})])),_:1})])):(0,a.kq)("",!0)])),_:1})])])])],64)}var p=i(60499),_=i(16308),m=i(17256);const g={class:"container q-pa-xl"},h={style:{width:"100%"}},f={class:"row mt-30"},w=(0,a._)("div",{class:"col-2"},null,-1),y={class:"col-9"},v={class:"col-1"};function x(t,e,i,s,l,o){const d=(0,a.up)("q-input"),r=(0,a.up)("q-tooltip"),c=(0,a.up)("f-btn"),u=(0,a.up)("q-form");return(0,a.wg)(),(0,a.iD)("div",g,[(0,a._)("div",h,[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a._)("div",f,[w,(0,a._)("div",y,[(0,a.Wm)(d,{class:"api",id:"apiKey",outlined:"",modelValue:t.api_key,"onUpdate:modelValue":e[0]||(e[0]=e=>t.api_key=e),readonly:"",label:"Key","error-message":t.$t("pages.api_settings.invalid_key"),rules:[t=>t&&t.length>0]},null,8,["modelValue","error-message","rules"])]),(0,a._)("div",v,[(0,a.Wm)(c,{class:"q-ml-sm q-mt-sm",icon:"fas fa-copy",onClick:e[1]||(e[1]=e=>t.copyText(t.api_key))},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.$t("pages.api_settings.api_key_tooltip")),1)])),_:1})])),_:1})])])])),_:1})])])}var k=i(70501),W=i(49990),q=i(49341),b=i(65054),Z=i(6827);const E={methods:{copyText(t){0!=t.trim().length&&(0,b.Z)(t).then((()=>{Z.Z.create({color:"primary",message:"Copied!"})}))}}};var C=function(t,e,i,a){function n(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,s){function l(t){try{d(a.next(t))}catch(e){s(e)}}function o(t){try{d(a["throw"](t))}catch(e){s(e)}}function d(t){t.done?i(t.value):n(t.value).then(l,o)}d((a=a.apply(t,e||[])).next())}))};const T=(0,a.aZ)({el:"#app",mixins:[k.Z,W.Z,E],props:["showSpinner"],data(){return{api_key:""}},mounted:function(){this.getAppKey()},methods:{getAppKey(){return C(this,void 0,void 0,(function*(){try{this.showLoading();const t={app_key:"FELLOW_DOC2"},e=yield q.FT.getAppSubscription(t);this.api_key=e[0].token}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))}}});var L=i(7683),S=i(8326),$=i(13119),I=i(46858),A=i(18149),V=i(69984),z=i.n(V);const U=(0,L.Z)(T,[["render",x]]),O=U;z()(T,"components",{QForm:S.Z,QInput:$.Z,QTooltip:I.Z,QField:A.Z});const Q={class:"container q-pa-xl"},D={style:{width:"100%"}},R={class:"row"},M={class:"col-2"},F={class:"col-9"},H={class:"col-1"},P={class:"row mt-30"},N={class:"col-2"},B={class:"col-9"},Y={class:"col-1"},K={class:"row mt-30"},j={class:"col-2"},G={class:"col-9"},J={class:"col-1"},X={class:"row mt-30"},tt=(0,a._)("div",{class:"col-2"},null,-1),et={class:"col-9"};function it(t,e,i,s,l,o){const d=(0,a.up)("q-input"),r=(0,a.up)("q-tooltip"),c=(0,a.up)("f-btn");return(0,a.wg)(),(0,a.iD)("div",Q,[(0,a._)("div",D,[(0,a._)("div",R,[(0,a._)("div",M,(0,n.zw)(t.$t("pages.integration_settings.entity_id")),1),(0,a._)("div",F,[(0,a.Wm)(d,{class:"api",id:"entity_id",outlined:"",modelValue:t.entity_id,"onUpdate:modelValue":e[0]||(e[0]=e=>t.entity_id=e),readonly:""},null,8,["modelValue"])]),(0,a._)("div",H,[(0,a.Wm)(c,{class:"q-ml-sm q-mt-sm",icon:"fas fa-copy",onClick:e[1]||(e[1]=e=>t.copyText(t.entity_id))},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.$t("copy")),1)])),_:1})])),_:1})])]),(0,a._)("div",P,[(0,a._)("div",N,(0,n.zw)(t.$t("pages.integration_settings.slo_url")),1),(0,a._)("div",B,[(0,a.Wm)(d,{class:"api",id:"slo_url",outlined:"",modelValue:t.slo_url,"onUpdate:modelValue":e[2]||(e[2]=e=>t.slo_url=e),readonly:""},null,8,["modelValue"])]),(0,a._)("div",Y,[(0,a.Wm)(c,{class:"q-ml-sm q-mt-sm",icon:"fas fa-copy",onClick:e[3]||(e[3]=e=>t.copyText(t.slo_url))},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.$t("copy")),1)])),_:1})])),_:1})])]),(0,a._)("div",K,[(0,a._)("div",j,(0,n.zw)(t.$t("pages.integration_settings.sso_url")),1),(0,a._)("div",G,[(0,a.Wm)(d,{class:"api",id:"sso_url",outlined:"",modelValue:t.sso_url,"onUpdate:modelValue":e[4]||(e[4]=e=>t.sso_url=e),readonly:""},null,8,["modelValue"])]),(0,a._)("div",J,[(0,a.Wm)(c,{class:"q-ml-sm q-mt-sm",icon:"fas fa-copy",onClick:e[5]||(e[5]=e=>t.copyText(t.sso_url))},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.$t("copy")),1)])),_:1})])),_:1})])])]),(0,a._)("div",X,[tt,(0,a._)("div",et,[(0,a.Wm)(c,{onClick:e[6]||(e[6]=e=>t.downloadInstaller(t.certificate_url)),label:t.$t("pages.integration_settings.download_certificate")},null,8,["label"]),(0,a.Wm)(c,{style:{"margin-left":"10px"},onClick:e[7]||(e[7]=e=>t.downloadInstaller(t.metadata_url)),label:t.$t("pages.integration_settings.download_certificate")},null,8,["label"])])])])}var at=i(39981),nt=i.n(at),st=i(37744),lt=function(t,e,i,a){function n(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,s){function l(t){try{d(a.next(t))}catch(e){s(e)}}function o(t){try{d(a["throw"](t))}catch(e){s(e)}}function d(t){t.done?i(t.value):n(t.value).then(l,o)}d((a=a.apply(t,e||[])).next())}))};const ot=(0,a.aZ)({el:"#app",mixins:[k.Z,W.Z,E],props:["showSpinner"],data(){return{api_key:"",entity_id:"",slo_url:"",sso_url:"",certificate_url:"",metadata_url:"",file:null}},mounted:function(){this.getSAMLInfo()},setup(){return{}},methods:{downloadInstaller(t){window.open(t,"_self")},getSAMLInfo(){return lt(this,void 0,void 0,(function*(){this.showLoading();try{let t=yield(0,st.O_)();this.fetchConfiguration(t),this.hideLoading()}catch(t){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},fetchConfiguration(t){return lt(this,void 0,void 0,(function*(){let e=yield nt().get(st.hi.fetch_saml_configurations,{headers:{Authorization:t}});this.entity_id=e.data.ENTITY_ID,this.sso_url=e.data.SSO,this.slo_url=e.data.SLO,this.certificate_url=e.data.CERTIFICATE,this.metadata_url=e.data.METADATA_URL}))}}});var dt=i(68879);const rt=(0,L.Z)(ot,[["render",it]]),ct=rt;z()(ot,"components",{QInput:$.Z,QTooltip:I.Z,QBtn:dt.Z});const ut={class:"container q-pa-xl"},pt={style:{width:"100%"}},_t={class:"row"},mt={class:"col-2"},gt={class:"col-9"},ht={class:"row mt-30"},ft={class:"col-2"},wt={class:"col-9"},yt={key:0,class:"row mt-30",style:{position:"relative"}},vt={class:"col-2"},xt={class:"col-9"},kt={class:"col-1"},Wt={class:"row mt-30"},qt=(0,a._)("div",{class:"col-2"},null,-1),bt={class:"col-9"},Zt=(0,a._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function Et(t,e,i,s,l,o){const d=(0,a.up)("q-input"),r=(0,a.up)("q-icon"),c=(0,a.up)("q-file"),u=(0,a.up)("q-tooltip"),p=(0,a.up)("f-btn"),_=(0,a.up)("q-inner-loading");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",ut,[(0,a._)("div",pt,[(0,a._)("div",_t,[(0,a._)("div",mt,(0,n.zw)(t.$t("pages.integration_settings.infor_tenant_id")),1),(0,a._)("div",gt,[(0,a.Wm)(d,{class:"api",id:"infor_tenant_id",outlined:"",modelValue:t.infor_tenant_id,"onUpdate:modelValue":e[0]||(e[0]=e=>t.infor_tenant_id=e)},null,8,["modelValue"])])]),(0,a._)("div",ht,[(0,a._)("div",ft,(0,n.zw)(t.$t("pages.integration_settings.upload_file")),1),(0,a._)("div",wt,[(0,a.Wm)(c,{style:{width:"20% !important","white-space":"nowrap"},class:"select-field",outlined:"",counter:"",multiple:"",modelValue:t.file,"onUpdate:modelValue":e[1]||(e[1]=e=>t.file=e),label:t.$t("pages.integration_settings.upload_button")},{prepend:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"attach_file"})])),_:1},8,["modelValue","label"])])]),t.exiting_metadate_url?((0,a.wg)(),(0,a.iD)("div",yt,[(0,a._)("div",vt,(0,n.zw)(t.$t("pages.integration_settings.existing_upload_file")),1),(0,a._)("div",xt,[(0,a.Wm)(d,{class:"api",outlined:"",modelValue:t.existing_tenant_id,"onUpdate:modelValue":e[2]||(e[2]=e=>t.existing_tenant_id=e),readonly:""},null,8,["modelValue"])]),(0,a._)("div",kt,[(0,a.Wm)(p,{color:"primary",class:"q-ml-sm q-mt-sm",icon:"fas fa-download",onClick:t.downloadMetadata},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.$t("pages.integration_settings.export")),1)])),_:1})])),_:1},8,["onClick"])])])):(0,a.kq)("",!0),(0,a._)("div",Wt,[qt,(0,a._)("div",bt,[(0,a.Wm)(p,{label:t.$t("pages.integration_settings.configure_save_button"),class:"q-mr-lg",onClick:t.saveConfiguration},null,8,["label","onClick"]),t.exiting_metadate_url?((0,a.wg)(),(0,a.j4)(p,{key:0,label:t.$t("delete"),onClick:t.deleteConfig},null,8,["label","onClick"])):(0,a.kq)("",!0)])])])]),(0,a.Wm)(_,{showing:t.loading},{default:(0,a.w5)((()=>[Zt])),_:1},8,["showing"])],64)}var Ct=i(37446),Tt=function(t,e,i,a){function n(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,s){function l(t){try{d(a.next(t))}catch(e){s(e)}}function o(t){try{d(a["throw"](t))}catch(e){s(e)}}function d(t){t.done?i(t.value):n(t.value).then(l,o)}d((a=a.apply(t,e||[])).next())}))};const Lt=(0,a.aZ)({el:"#app",mixins:[k.Z,W.Z],data(){return{}},mounted:function(){this.init(),window.ip=this},methods:{init(){return Tt(this,void 0,void 0,(function*(){try{this.loading=!0;let t=yield(0,st.O_)();this.fetchMetaDataInfo(t)}catch(t){const e=Ct.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.loading=!1}}))},fetchMetaDataInfo(t){return Tt(this,void 0,void 0,(function*(){let e=yield nt().get(st.hi.fetch_saml_meta,{headers:{Authorization:t}});const i=e.data.tennant_id;i&&"undefined"!==i&&(this.existing_tenant_id=i);const a=e.data.saml_download_path;a&&"undefined"!==a&&(this.exiting_metadate_url=a||"")}))},openFileExplorer(){const t=document.getElementById("uploadfile");t&&t.click()},saveConfiguration(){this.file?this.uploadFile(this.file[0]):this.showErrorToast(this.$t("pages.messages.NO_FILE_SELECTED"))},downloadMetadata(){return Tt(this,void 0,void 0,(function*(){try{this.loading=!0;let t=yield(0,st.O_)(),e=yield nt().get(this.exiting_metadate_url,{headers:{Authorization:t}});this.decodeRequest(e.data)}catch(t){const e=Ct.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.loading=!1}}))},uploadFile(t){return Tt(this,void 0,void 0,(function*(){try{if("text/xml"!==t.type)return void this.showErrorToast(this.$t("pages.messages.ONLY_XML_ALLOWED"));this.loading=!0;let e=new FormData;e.append("file",t),e.append("tenant_id",this.infor_tenant_id);let i=yield(0,st.O_)();yield nt().post(st.hi.save_saml_configurations,e,{headers:{"Content-Type":"multipart/form-data",Authorization:i}}),yield this.init(),this.file=null,this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(e){const t=Ct.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}}))},decodeRequest(t){var e="configured_metadata.xml",i=document.createElement("a"),a=new Blob([t],{type:"text/xml"});i.setAttribute("href",window.URL.createObjectURL(a)),i.setAttribute("download",e),i.dataset.downloadurl=["text/xml",i.download,i.href].join(":"),i.draggable=!0,i.classList.add("dragout"),i.click()},deleteConfig(){return Tt(this,void 0,void 0,(function*(){try{this.loading=!0,yield q.U2["delete"](),this.resetViewData(),this.showSuccessToast(this.$t("pages.messages.DELETED_SUCCESSFULLY"))}catch(t){const e=Ct.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.loading=!1}}))},resetViewData(){this.infor_tenant_id="",this.exiting_metadate_url="",this.existing_tenant_id="",this.file=null}},setup(){return{loading:(0,p.iH)(!1),infor_tenant_id:(0,p.iH)(""),existing_tenant_id:(0,p.iH)(""),exiting_metadate_url:(0,p.iH)(""),file:(0,p.iH)(null)}}});var St=i(29420),$t=i(22857),It=i(60854);const At=(0,L.Z)(Lt,[["render",Et]]),Vt=At;z()(Lt,"components",{QInput:$.Z,QFile:St.Z,QIcon:$t.Z,QTooltip:I.Z,QInnerLoading:It.Z});var zt=i(11494);const Ut=(0,a.aZ)({el:"#app",components:{SubHeader:_.Z,BackToSettings:m.Z,API:O,SSOProvider:ct,IdentityProvider:Vt},data(){return{isAdmin:(0,p.iH)(!1)}},mounted(){this.isAdmin=Boolean(JSON.parse((0,zt.Y4)("is_organisation_admin")))}});var Ot=i(13246),Qt=i(50651),Dt=i(90136),Rt=i(50926),Mt=i(44458),Ft=i(63190);const Ht=(0,L.Z)(Ut,[["render",u]]),Pt=Ht;z()(Ut,"components",{QList:Ot.Z,QExpansionItem:Qt.Z,QIcon:$t.Z,QSpace:Dt.Z,QSeparator:Rt.Z,QCard:Mt.Z,QCardSection:Ft.Z})}}]);