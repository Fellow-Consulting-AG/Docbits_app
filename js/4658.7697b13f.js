"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[4658],{74658:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Me});var i=a(61758),s=a(58790);const n=e=>((0,i.Qi)("data-v-b65a7d42"),e=e(),(0,i.jt)(),e),o={class:"col-5"},l={class:"container page-height-limit"},r={class:"full-width"},d=n((()=>(0,i.Lk)("img",{src:"images/fields-default.svg",class:"black_to_white",width:"24"},null,-1))),c=["onClick"],u=n((()=>(0,i.Lk)("img",{class:"img-fluid mb-14",width:"24",height:"24",src:"images/Trash-Block.svg",alt:""},null,-1))),g=n((()=>(0,i.Lk)("img",{class:"img-fluid mb-14 black_to_white",width:"24",height:"24",src:"images/trash-bin-default.svg",alt:""},null,-1))),_={class:"row"},p=["onClick"],h=["onClick"],m=["onClick"],y=["onClick"],f=["onClick"],b=["disable","onClick"],k=["onClick"],v=["onClick"],w=["onClick"],x={class:"q-ml-sm"};function F(e,t,a,n,F,L){const T=(0,i.g2)("ModelTrainingCounter"),C=(0,i.g2)("SubHeader"),E=(0,i.g2)("f-btn"),A=(0,i.g2)("BackToSettings"),D=(0,i.g2)("q-item-section"),S=(0,i.g2)("q-badge"),q=(0,i.g2)("q-tooltip"),V=(0,i.g2)("q-toggle"),O=(0,i.g2)("q-separator"),R=(0,i.g2)("q-btn"),Q=(0,i.g2)("q-item"),$=(0,i.g2)("LayoutBuilderBtn"),P=(0,i.g2)("ManageRegexes"),U=(0,i.g2)("q-list"),K=(0,i.g2)("q-avatar"),X=(0,i.g2)("q-card-section"),M=(0,i.g2)("q-card-actions"),W=(0,i.g2)("q-card"),I=(0,i.g2)("q-dialog"),N=(0,i.g2)("Loader"),B=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(C,{name:"settings_document_types",label:e.$t("pages.settings.document_types")},{default:(0,i.k6)((()=>[(0,i.Lk)("span",o,[(0,i.bF)(T)])])),_:1},8,["label"]),(0,i.bF)(A,null,{default:(0,i.k6)((()=>[(0,i.bF)(E,{class:"float-right",icon:"add",to:"/settings/document-create",label:e.$t("new")},null,8,["label"])])),_:1}),(0,i.Lk)("div",l,[(0,i.Lk)("div",r,[(0,i.bF)(U,null,{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.apiData,((t,a)=>((0,i.uX)(),(0,i.CE)("div",{key:a,class:"q-mb-md q-pa-md p-b-0 grey-border doc-type-list back-white"},[(0,i.bF)(Q,{class:"v-p-0"},{default:(0,i.k6)((()=>[(0,i.bF)(D,{avatar:""},{default:(0,i.k6)((()=>[d])),_:1}),(0,i.bF)(D,{class:"text-weight-bold"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",null,[(0,i.eW)((0,s.v_)(t.label)+" ",1),"DEFAULT"===t.org_id?((0,i.uX)(),(0,i.Wv)(S,{key:0,transparent:"",align:"middle",color:"orange"},{default:(0,i.k6)((()=>[(0,i.eW)(" Standard ")])),_:1})):(0,i.Q3)("",!0)])])),_:2},1024),(0,i.bF)(D,{avatar:""},{default:(0,i.k6)((()=>[(0,i.bF)(V,{"left-label":"",label:e.$t("activate"),modelValue:t.is_active,"onUpdate:modelValue":[e=>t.is_active=e,a=>{e.handleVisibilty(a,t)}],color:"primary"},{default:(0,i.k6)((()=>[t.is_active?((0,i.uX)(),(0,i.Wv)(q,{key:0},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("pages.settings.currently_activated")),1)])),_:1})):(0,i.Q3)("",!0),t.is_active?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(q,{key:1},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("pages.settings.currently_deactivated")),1)])),_:1}))])),_:2},1032,["label","modelValue","onUpdate:modelValue"])])),_:2},1024),(0,i.bF)(O,{vertical:"",inset:""}),(0,i.bF)(D,{avatar:""},{default:(0,i.k6)((()=>[(0,i.bF)(V,{"left-label":"",label:"Extraction Type",modelValue:t.extraction_type_model,"onUpdate:modelValue":[e=>t.extraction_type_model=e,a=>{e.handleExtractionType(a,t)}]},{default:(0,i.k6)((()=>[t.extraction_type_model?((0,i.uX)(),(0,i.Wv)(q,{key:0},{default:(0,i.k6)((()=>[(0,i.eW)("Flex")])),_:1})):(0,i.Q3)("",!0),t.extraction_type_model?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(q,{key:1},{default:(0,i.k6)((()=>[(0,i.eW)("Fix")])),_:1}))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,i.bF)(D,{class:"no-padding-left-right q-mr-sm",style:{"min-width":"24px"},avatar:""},{default:(0,i.k6)((()=>[(0,i.bF)(R,{flat:"",color:"black",class:"no-padding-left-right cursor-pointer",style:{cursor:"default"}},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{class:"img-fluid mb-14",width:"24",height:"24",src:"images/settings_dark.svg",alt:"",onClick:a=>e.manageSettings("/settings/doc_type_settings/"+t.document_key)},null,8,c),(0,i.bF)(q,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("more_settings")),1)])),_:1})])),_:2},1024)])),_:2},1024),(0,i.bF)(D,{class:"no-padding-left-right",style:{"min-width":"24px"},avatar:""},{default:(0,i.k6)((()=>["DEFAULT"===t.org_id?((0,i.uX)(),(0,i.Wv)(R,{key:0,flat:"",color:"black",class:"no-padding-left-right",style:{cursor:"default"}},{default:(0,i.k6)((()=>[u,(0,i.bF)(q,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("pages.fields_settings.not_trash")),1)])),_:1})])),_:1})):((0,i.uX)(),(0,i.Wv)(R,{key:1,flat:"",color:"primary",class:"no-padding-left-right",onClick:a=>{e.deleteConfirm=!0,e.deleting_row=t}},{default:(0,i.k6)((()=>[g])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1024),(0,i.bF)(Q,{class:"v-p-0"},{default:(0,i.k6)((()=>[(0,i.bF)(D,{avatar:""},{default:(0,i.k6)((()=>[(0,i.Lk)("div",_,[e.MODELS_LABELS_MODULE?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.Lk)("span",{class:"action-link no-border",onClick:a=>e.manageSettings("/settings/classify-extract?doc_type="+t.document_key)},(0,s.v_)(e.$t("Labels")),9,p),(0,i.bF)(O,{class:"q-ml-sm q-mr-sm bg-primary",vertical:"",inset:""})],64)):(0,i.Q3)("",!0),e.LAYOUT_BUILDER_MODULE?((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.bF)($,{doc_type_key:t.document_key,extraction_type:t.extraction_type},null,8,["doc_type_key","extraction_type"]),(0,i.bF)(O,{class:"q-ml-sm q-mr-sm bg-primary",vertical:"",inset:""})],64)):(0,i.Q3)("",!0),(0,i.Lk)("span",{class:"action-link no-border",onClick:a=>e.manageSettings("/settings/sub_doc_type/"+t.document_key)},(0,s.v_)(e.$t("sub_doc_type")),9,h),(0,i.bF)(O,{class:"q-ml-sm q-mr-sm bg-primary",vertical:"",inset:""}),(0,i.Lk)("span",{class:"action-link no-border",onClick:a=>e.manageSettings("/settings/custom_columns/"+t.document_key)},(0,s.v_)(e.$t("custom_columns")),9,m),(0,i.bF)(O,{class:"q-ml-sm q-mr-sm bg-primary",vertical:"",inset:""}),(0,i.Lk)("span",{class:"action-link no-border",onClick:a=>e.manageSettings("/settings/fields/"+t.document_key)},(0,s.v_)(e.$t("fields")),9,y),(0,i.bF)(O,{class:"q-ml-sm q-mr-sm bg-primary",vertical:"",inset:""}),(0,i.Lk)("span",{class:"action-link no-border",onClick:a=>e.manageSettings("/settings/model_training/"+t.document_name+"/"+t.document_key)},(0,s.v_)(e.$t("model_training")),9,f),(0,i.bF)(O,{class:"q-ml-sm q-mr-sm bg-primary",vertical:"",inset:""}),e.hasRegexData(t.document_name)?((0,i.uX)(),(0,i.CE)(i.FK,{key:2},[(0,i.Lk)("span",{class:"action-link no-border",disable:e.doc_type_regexes[t.document_name]["regexes"]["loading_data"],onClick:a=>e.showRegexesListView(t.document_name)},(0,s.v_)(e.$t("Regex")),9,b),(0,i.bF)(P,{doctype:t.document_name,display:e.doc_type_regexes[t.document_name]["regexes"]["display_list"],list_data:e.doc_type_regexes[t.document_name]["regexes"]["data"],language_origin_list:e.language_origin_list,loading_new_data:e.doc_type_regexes[t.document_name]["regexes"]["loading_data"]},null,8,["doctype","display","list_data","language_origin_list","loading_new_data"])],64)):(0,i.Q3)("",!0),e.DOC_SCRIPT_MODULE?((0,i.uX)(),(0,i.CE)(i.FK,{key:3},[(0,i.bF)(O,{class:"q-ml-sm q-mr-sm bg-primary",vertical:"",inset:""}),(0,i.Lk)("span",{class:"action-link no-border",onClick:a=>e.manageSettings("/settings/manage_scripts/"+t.document_key)},(0,s.v_)(e.$t("scripts")),9,k)],64)):(0,i.Q3)("",!0),t.has_electronic_document?((0,i.uX)(),(0,i.CE)(i.FK,{key:4},["DEFAULT"==t.org_id?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.bF)(O,{class:"q-ml-sm q-mr-sm bg-primary",vertical:"",inset:""}),(0,i.Lk)("span",{class:"action-link no-border",onClick:a=>e.manageSettings(`/settings/manage_xslt/${t.document_key}?tab=edi`)},(0,s.v_)(e.$t("e_doc_attributes")),9,v)],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.bF)(O,{class:"q-ml-sm q-mr-sm bg-primary",vertical:"",inset:""}),(0,i.Lk)("span",{class:"action-link no-border",onClick:a=>e.manageSettings(`/settings/manage_xslt/${t.document_key}?tab=edi&title=${t.label}`)},(0,s.v_)(e.$t("e_doc_attributes")),9,w)],64))],64)):(0,i.Q3)("",!0)])])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])]),(0,i.bF)(I,{modelValue:e.deleteConfirm,"onUpdate:modelValue":t[1]||(t[1]=t=>e.deleteConfirm=t),persistent:""},{default:(0,i.k6)((()=>[(0,i.bF)(W,null,{default:(0,i.k6)((()=>[(0,i.bF)(X,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,i.k6)((()=>[(0,i.bF)(K,{icon:"warning",color:"primary"})])),_:1}),(0,i.bF)(X,{class:"row items-center"},{default:(0,i.k6)((()=>[(0,i.Lk)("span",x,(0,s.v_)(e.$t("sure")),1)])),_:1}),(0,i.bF)(M,{align:"right"},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.bF)(R,{flat:"",label:e.$t("cancel"),"data-cy":"cancel",color:"primary"},null,8,["label"]),[[B]]),(0,i.bo)((0,i.bF)(R,{flat:"",label:e.$t("delete"),"data-cy":"delete-popup",color:"primary",onClick:t[0]||(t[0]=t=>e.deleteDocumentType(this.deleting_row))},null,8,["label"]),[[B]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.bF)(N)],64)}var L=a(82303),T=a(1659),C=a(45022),E=a(24622),A=a(38734),D=a(8420),S=a(68450),q=a(18505),V=a(36801),O=a(46162),R=a(25891),Q=a(29104);const $={class:"text-weight-bold"},P={class:"table-container col-sm-12 col-md-12 col-lg-12 min-height-300"},U={key:0,class:"q-ml-auto"},K={class:"q-ml-sm"};function X(e,t,a,n,o,l){const r=(0,i.g2)("q-toolbar-title"),d=(0,i.g2)("q-btn"),c=(0,i.g2)("q-toolbar"),u=(0,i.g2)("q-card-section"),g=(0,i.g2)("q-icon"),_=(0,i.g2)("q-input"),p=(0,i.g2)("q-space"),h=(0,i.g2)("q-tooltip"),m=(0,i.g2)("q-td"),y=(0,i.g2)("q-select"),f=(0,i.g2)("q-tr"),b=(0,i.g2)("q-table"),k=(0,i.g2)("q-card"),v=(0,i.g2)("q-dialog"),w=(0,i.g2)("q-avatar"),x=(0,i.g2)("f-btn"),F=(0,i.g2)("q-card-actions"),L=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(v,{modelValue:e.display_list,"onUpdate:modelValue":t[5]||(t[5]=t=>e.display_list=t),persistent:"","transition-show":"scale","transition-hide":"scale",onKeydown:t[6]||(t[6]=(0,Q.jR)((t=>e.display_list=!1),["esc"]))},{default:(0,i.k6)((()=>[(0,i.bF)(k,{style:{width:"1000px","max-width":"1060px",height:"600px"}},{default:(0,i.k6)((()=>[(0,i.bF)(c,{class:"text-white secondary-toolbar"},{default:(0,i.k6)((()=>[(0,i.bF)(r,null,{default:(0,i.k6)((()=>[(0,i.Lk)("span",$,(0,s.v_)(e.$t("manage_regexes")),1)])),_:1}),(0,i.bF)(d,{flat:"",round:"",dense:"",icon:"close",onClick:t[0]||(t[0]=t=>e.checkForUnSaveChanges())})])),_:1}),(0,i.bF)(u,{class:"row items-center q-pb-none"}),(0,i.bF)(u,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",P,[(0,i.bF)(b,{ref:"tableRef",style:{height:"500px"},class:(0,s.C4)("sticky-header-table table-regexex-"+e.doctype),"table-header-class":"back-white",rows:e.rows,"no-data-label":e.$t("pages.messages.no_record_found"),columns:e.columns,"rows-per-page-options":[0],"row-key":"id",filter:e.filter,loading:e.loading,"filter-method":e.customFilter},{top:(0,i.k6)((()=>[(0,i.bF)(_,{outlined:"",debounce:"300",dense:"",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter=t),label:e.$t("search")},{append:(0,i.k6)((()=>[(0,i.bF)(g,{name:"search"})])),_:1},8,["modelValue","label"]),(0,i.bF)(p),(0,i.bF)(d,{color:"primary",class:"mr-6",style:{height:"40px"},label:e.$t("add_new"),onClick:t[2]||(t[2]=t=>e.addNew())},null,8,["label"]),!0===e.validate_pattern?((0,i.uX)(),(0,i.Wv)(d,{key:0,color:"orange",class:"mr-6",style:{height:"40px"},label:e.$t("validate"),onClick:t[3]||(t[3]=t=>e.validatePattern())},null,8,["label"])):(0,i.Q3)("",!0),e.hasPendingUpdate()?((0,i.uX)(),(0,i.Wv)(d,{key:1,color:"red",class:"mr-6",style:{height:"40px"},label:e.$t("save_changes"),onClick:t[4]||(t[4]=t=>e.saveAll())},null,8,["label"])):(0,i.Q3)("",!0)])),body:(0,i.k6)((t=>[!1===t.row.is_deleted?((0,i.uX)(),(0,i.Wv)(f,{key:0,props:t,id:t.key},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.cols,(a=>((0,i.uX)(),(0,i.CE)(i.FK,{key:a.name},["action"===a.name?((0,i.uX)(),(0,i.Wv)(m,{key:0,style:{width:"10%"}},{default:(0,i.k6)((()=>[""!==t.row.id?((0,i.uX)(),(0,i.CE)("span",U,[(0,i.bF)(d,{color:!1===t.row.disabled?"positive":"negative","icon-right":!1===t.row.disabled?"visibility":"visibility_off","no-caps":"",flat:"",dense:"",onClick:a=>e.handleDisable(t.row,t.rowIndex)},{default:(0,i.k6)((()=>[(0,i.bF)(h,null,{default:(0,i.k6)((()=>["DEFAULT"!==t.row.org_id?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.eW)((0,s.v_)(!1===t.row.disabled?e.$t("click_to_disable"):e.$t("click_to_enable")),1)],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)((0,s.v_)(e.$t("cannot_edit_default_type")),1)],64))])),_:2},1024)])),_:2},1032,["color","icon-right","onClick"]),"DEFAULT"!==t.row.org_id?((0,i.uX)(),(0,i.Wv)(d,{key:0,color:"grey","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>e.handleDelete(t.row,t.rowIndex)},{default:(0,i.k6)((()=>[(0,i.bF)(h,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),""===t.row.id?((0,i.uX)(),(0,i.Wv)(d,{key:1,class:"float-right",color:"grey","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>e.deleteNewRow(t.rowIndex)},{default:(0,i.k6)((()=>[(0,i.bF)(h,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,i.Q3)("",!0)])),_:2},1024)):(0,i.Q3)("",!0),"regexValuePattern"===a.name?((0,i.uX)(),(0,i.Wv)(m,{key:1,style:{width:"70%"}},{default:(0,i.k6)((()=>[(0,i.bF)(_,{borderless:"",tabindex:"0","data-id":t.key,class:(0,s.C4)("input-field "+(!t.row.validate||t.row.required_error?"column-error-border":"")),modelValue:t.row.regexValuePattern,"onUpdate:modelValue":[e=>t.row.regexValuePattern=e,a=>{e.inputValueChanges("regexValuePattern",t.key,a,t.rowIndex)}],disable:"DEFAULT"==t.row.org_id},{append:(0,i.k6)((()=>[!t.row.validate||t.row.required_error?((0,i.uX)(),(0,i.Wv)(g,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,i.k6)((()=>[(0,i.bF)(h,{class:"bg-red line-error-tooltip"},{default:(0,i.k6)((()=>[t.row.validate?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.eW)((0,s.v_)(e.$t("pattern_invalid")),1)],64)),t.row.required_error?((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)((0,s.v_)(e.$t("pattern_empty")),1)],64)):(0,i.Q3)("",!0)])),_:2},1024)])),_:2},1024)):(0,i.Q3)("",!0)])),default:(0,i.k6)((()=>["DEFAULT"==t.row.org_id?((0,i.uX)(),(0,i.Wv)(h,{key:0,class:"bg-red"},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("cannot_edit_default_type")),1)])),_:1})):(0,i.Q3)("",!0)])),_:2},1032,["data-id","class","modelValue","onUpdate:modelValue","disable"])])),_:2},1024)):(0,i.Q3)("",!0),"regexOrigin"===a.name?((0,i.uX)(),(0,i.Wv)(m,{key:2,style:{width:"20%"}},{default:(0,i.k6)((()=>[(0,i.bF)(y,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.regexOrigin,"onUpdate:modelValue":[e=>t.row.regexOrigin=e,a=>{e.inputValueChanges("regexOrigin",t.key,a,t.rowIndex)}],options:e.language_origin_list,disable:"DEFAULT"==t.row.org_id,"emit-value":"","map-options":""},{default:(0,i.k6)((()=>["DEFAULT"==t.row.org_id?((0,i.uX)(),(0,i.Wv)(h,{key:0,class:"bg-red"},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("cannot_edit_default_type")),1)])),_:1})):(0,i.Q3)("",!0)])),_:2},1032,["data-id","modelValue","onUpdate:modelValue","options","disable"])])),_:2},1024)):(0,i.Q3)("",!0)],64)))),128))])),_:2},1032,["props","id"])):(0,i.Q3)("",!0)])),_:1},8,["class","rows","no-data-label","columns","filter","loading","filter-method"])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.bF)(v,{modelValue:e.unsave_warning,"onUpdate:modelValue":t[9]||(t[9]=t=>e.unsave_warning=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,i.k6)((()=>[(0,i.bF)(k,null,{default:(0,i.k6)((()=>[(0,i.bF)(u,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,i.k6)((()=>[(0,i.bF)(w,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,i.bF)(u,{class:"row items-center"},{default:(0,i.k6)((()=>[(0,i.Lk)("span",K,(0,s.v_)(e.$t("unsave_changes_warning")),1)])),_:1}),(0,i.bF)(F,{align:"right"},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.bF)(x,{appearance:"cancel",label:e.$t("cancel"),onClick:t[7]||(t[7]=t=>e.unsave_warning=!1)},null,8,["label"]),[[L]]),(0,i.bF)(x,{"data-cy":"done",label:e.$t("proceed"),onClick:t[8]||(t[8]=t=>e.proceedWithOutSave())},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var M=a(73937),W=a(85487),I=function(e,t,a,i){function s(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,n){function o(e){try{r(i.next(e))}catch(t){n(t)}}function l(e){try{r(i["throw"](e))}catch(t){n(t)}}function r(e){e.done?a(e.value):s(e.value).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const N=(0,i.pM)({el:"#app",mixins:[q.A,E.A],props:{type:{type:String,default:"document"},loading_new_data:{type:Boolean,default:!1},doctype:{type:String,default:""},display:{type:Boolean,default:!1},list_data:{},language_origin_list:{type:Array,default:()=>[]}},components:{},data(){return{docId:""}},setup(){let e=[];const t=(0,A.KR)(e);return{display_list:(0,A.KR)(!1),loading:(0,A.KR)(!0),columns:t,rows:(0,A.KR)(e),filter:(0,A.KR)(""),pending_update:(0,A.KR)({}),original_data:{},unsave_warning:(0,A.KR)(!1),validate_pattern:(0,A.KR)(!1),flat_language_list:(0,A.KR)({})}},watch:{loading_new_data:{handler:function(e,t){!0===e&&(this.loading=e)}},display:{handler:function(e,t){!0===e&&(this.display_list=e,this.loading=!e,this.prepareListView(this.list_data))}},list_data:{handler:function(e,t){this.prepareListView(e),this.flatLanguageList()}}},mounted:function(){this.docId=this.$route.params.id,this.prepareColumns()},methods:{flatLanguageList(){if((0,S.dd)(this.flat_language_list))for(let[e,t]of Object.entries(this.language_origin_list)){let e=t;this.flat_language_list[e.value]=e.label}},showListView(){this.display_list=!0},prepareListView(e){this.original_data=JSON.parse(JSON.stringify(e)),this.prepareRows()},prepareColumns(){this.columns.push(Object.assign({},{name:"regexOrigin",label:this.$t("origin"),field:"regexOrigin",align:"left"})),this.columns.push(Object.assign({},{name:"regexValuePattern",label:this.$t("pattern"),field:"regexValuePattern",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(){this.rows=[];for(let[e,t]of Object.entries(this.list_data)){const e=t;this.addNewRow(e)}},addNewRow(e){let t=Object.assign({},e);return t["validate"]=!0,t["required_error"]=!1,this.rows.push(t),this.rows.length.toString()},addNew(){const e=this.addNewRow({id:"",regexType:this.doctype,regexValuePattern:"",regexOrigin:"",is_deleted:!1,org_id:(0,M.Ky)("org_id")});this.pending_update[e]=!0,setTimeout((()=>{this.scrollToBottom()}),0)},scrollToBottom(){let e=document.querySelector(".table-regexex-"+this.doctype);if(!e)return;let t=e.querySelector(".q-table__middle");t&&(t.scrollTop=t.scrollHeight)},handleDisable(e,t){try{if(""===e.id||"DEFAULT"==e.org_id)return;this.rows[t].disabled=!e.disabled,this.pending_update[t.toString()]=!0}catch(a){logError(a),this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}},handleDelete(e,t){try{if(""===e.id)return;this.rows[t].is_deleted=!0,this.pending_update[t.toString()]=!0}catch(a){logError(a),this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}},deleteNewRow(e){this.rows.splice(e,1);const t=e.toString();this.pending_update.hasOwnProperty(t)&&delete this.pending_update[t]},inputValueChanges(e,t,a,i){if(""!==t||"regexValuePattern"!=e||""===a)for(let[s,n]of Object.entries(this.original_data)){const i=n;t===i.id&&(i[e]!==a&&("regexValuePattern"!=e||""===a?this.pending_update[s.toString()]=!0:this.validate_pattern=!0))}else this.validate_pattern=!0},saveAll(){return I(this,void 0,void 0,(function*(){try{if(!this.validateData())return;let e;this.cleanUpDataBeforeSave(),this.showLoading();let t=yield(0,O.L3)(),a=new FormData;if(a.append("data",JSON.stringify(this.rows)),a.append("org_id",(0,W.I)()),e=yield L.A.post(O.FH.post_data_fellowkv+(0,O.CW)(this.type),a,{headers:{Authorization:t}}),!1===e.data.success)throw{message:e.data.message};this.pending_update={},this.dispatchSuccessEvent()}catch(e){logError(e),this.showErrorToast("Something went wrong while loading data. Please try again.")}finally{this.hideLoading()}}))},validateData(){let e=!0;return this.validate_pattern&&(e=!1,this.showErrorToast("Please validate Before save.")),this.regexValuePatternsEmpty()&&(e=!1,this.showErrorToast("Pattern field is required")),e},regexValuePatternsEmpty(){let e=!1;return this.rows.forEach(((t,a)=>{t["regexValuePattern"]&&""!==t["regexValuePattern"]?t.required_error=!1:(t.required_error=!0,e=!0)})),e},cleanUpDataBeforeSave(){this.rows.forEach(((e,t)=>{e["id"]&&""!==e["id"]||delete e["id"]}))},dispatchSuccessEvent(){const e=new CustomEvent("regexes_saved",{detail:this.doctype});document.dispatchEvent(e)},checkForUnSaveChanges(){this.hasPendingUpdate()?this.unsave_warning=!0:this.display_list=!1},hasPendingUpdate(){return!(0,S.dd)(this.pending_update)},proceedWithOutSave(){this.unsave_warning=!1,this.display_list=!1,this.pending_update={},this.validate_pattern=!1},validatePattern(){return I(this,void 0,void 0,(function*(){try{if(this.regexValuePatternsEmpty())return void this.showErrorToast("Pattern field is required");let e;this.showLoading();let t=yield(0,O.L3)(),a=new FormData;if(a.append("patterns",JSON.stringify(this.getValidatePatternData())),a.append("org_id",(0,W.I)()),e=yield L.A.post(O.FH.validate_patterns,a,{headers:{Authorization:t}}),!1===e.data.success)throw{message:e.data.message};this.validate_pattern=!1,this.updateRows(e.data.data)}catch(e){logError(e),this.showErrorToast("Something went wrong while loading data. Please try again.")}finally{this.hideLoading()}}))},updateRows(e){for(let[t,a]of Object.entries(e))this.rows.forEach(((e,i)=>{if(e["regexValuePattern"]==t){const t=!1!==a;e.validate=t,!1===t&&(this.pending_update[i.toString()]=!0,this.validate_pattern=!0)}}))},getValidatePatternData(){let e=[];return this.rows.forEach(((t,a)=>{const i=t["regexValuePattern"]&&""!==t["regexValuePattern"]?t["regexValuePattern"].toString():"";e.push(i)})),e},customFilter(e,t){const a=t.toLowerCase();let i=e;return a&&""!==a?(i=e.filter(((e,t)=>{let i=!1;for(let[s,n]of Object.entries(e)){let e=n,t=e&&null!==e?e.toString():"";if(e=t.toLowerCase(),e.includes(a)){i=!0;break}if("regexOrigin"===s&&e&&this.flat_language_list[t]&&(e=this.flat_language_list[t].toLowerCase(),e.includes(a))){i=!0;break}}return i})),i):i}}});var B=a(12807),j=a(82156),H=a(23316),z=a(36914),J=a(39150),Y=a(56384),G=a(44189),Z=a(42315),ee=a(67837),te=a(50492),ae=a(93676),ie=a(44488),se=a(45262),ne=a(97410),oe=a(94940),le=a(3952),re=a(62669),de=a(88672),ce=a(98582),ue=a.n(ce);const ge=(0,B.A)(N,[["render",X],["__scopeId","data-v-169fcce3"]]),_e=ge;ue()(N,"components",{QDialog:j.A,QCard:H.A,QToolbar:z.A,QToolbarTitle:J.A,QBtn:Y.A,QCardSection:G.A,QTable:Z.A,QInput:ee.A,QIcon:te.A,QSpace:ae.A,QTr:ie.A,QTd:se.A,QTooltip:ne.A,QSelect:oe.A,QAvatar:le.A,QCardActions:re.A}),ue()(N,"directives",{ClosePopup:de.A});var pe=a(66693),he=a(25773),me=a(47414),ye=a(1595);const fe=e=>((0,i.Qi)("data-v-12976e3f"),e=e(),(0,i.jt)(),e),be={class:"row"},ke=fe((()=>(0,i.Lk)("div",{class:"col-6 text-white text-uppercase title q-ml-auto text-right"},"Next Model Training update:",-1))),ve=fe((()=>(0,i.Lk)("div",{class:"col-4 secondary-c-text next_model_training_time",style:{width:"150px"}},null,-1))),we=[ke,ve];function xe(e,t,a,s,n,o){return(0,i.uX)(),(0,i.CE)("div",be,we)}function Fe(e,t){var a=document.createElement("span");a.className="flip-clock__piece",a.innerHTML='<b class="flip-clock__card card"><b class="card__top"></b><b class="card__bottom"></b><b class="card__back"><b class="card__bottom"></b></b></b>',a.innerHTML+='<span class="flip-clock__dot"></span>',this.el=a;var i=a.querySelector(".card__top"),s=a.querySelector(".card__bottom"),n=a.querySelector(".card__back"),o=a.querySelector(".card__back .card__bottom");this.update=function(e){e=("0"+e).slice(-2),e!==this.currentValue&&(this.currentValue>=0&&(n.setAttribute("data-value",this.currentValue),s.setAttribute("data-value",this.currentValue)),this.currentValue=e,i.innerText=this.currentValue,o.setAttribute("data-value",this.currentValue),this.el.classList.remove("flip"),this.el.offsetWidth,this.el.classList.add("flip"))},this.update(t)}function Le(e){var t=Date.parse(e)-Date.parse(new Date);return{Total:t,Hours:Math.floor(t/36e5%24),Minutes:Math.floor(t/1e3/60%60),Seconds:Math.floor(t/1e3%60)}}function Te(){var e=new Date;return{Total:e,Hours:e.getHours()%12,Minutes:e.getMinutes(),Seconds:e.getSeconds()}}function Ce(e,t){e=!!e&&new Date(Date.parse(e)),t=t||function(){};var a=e?Le:Te;this.el=document.createElement("div"),this.el.className="flip-clock";var i,s,n={},o=a(e);for(i in o)o[i]<0&&(o[i]=0),"Total"!==i&&(n[i]=new Fe(i,o[i]),this.el.appendChild(n[i].el));var l=0;function r(){if(s=requestAnimationFrame(r),!(l++%10)){var o=a(e);if(o.Total<0){for(i in cancelAnimationFrame(s),n)n[i].update(0);t()}else for(i in n)n[i].update(o[i])}}setTimeout(r,500)}var Ee=function(e,t,a,i){function s(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,n){function o(e){try{r(i.next(e))}catch(t){n(t)}}function l(e){try{r(i["throw"](e))}catch(t){n(t)}}function r(e){e.done?a(e.value):s(e.value).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const Ae=(0,i.pM)({el:"#app",props:{},watch:{next_model_training_time:{handler:function(e,t){this.setCounter()}}},mounted(){this.initView()},methods:{initView(){return Ee(this,void 0,void 0,(function*(){this.next_model_training_time=yield this.getNextModelTrainingTime(),this.setCounter()}))},makeCounter(){let e=document.querySelector(".next_model_training_time");e.innerHTML="";var t=new Date(this.counter_dateTime),a=new Ce(t);e.appendChild(a.el)},getDistance(){const e=(new Date).getTime(),t=this.counter_time-e;return t},setCounter(){try{if(!this.next_model_training_time)return;this.counter_dateTime=new Date(this.next_model_training_time),this.counter_time=this.counter_dateTime.getTime();const e=this.getDistance();e<0&&this.expired_tries++,this.makeCounter()}catch(e){}}},setup(){const e=(0,ye.Bu)(),{getNextModelTrainingTime:t}=e,{loading_next_model_training_time:a,next_model_training_time:i}=(0,T.bP)(e);return{getNextModelTrainingTime:t,loading_next_model_training_time:a,next_model_training_time:i,counter_value:(0,A.KR)(""),counter_time:(0,A.KR)(0),counter_dateTime:(0,A.KR)({}),counter_interval:(0,A.KR)(0),expired_tries:(0,A.KR)(0)}}}),De=(0,B.A)(Ae,[["render",xe],["__scopeId","data-v-12976e3f"]]),Se=De;var qe=a(76956),Ve=function(e,t,a,i){function s(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,n){function o(e){try{r(i.next(e))}catch(t){n(t)}}function l(e){try{r(i["throw"](e))}catch(t){n(t)}}function r(e){e.done?a(e.value):s(e.value).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const Oe=(0,i.pM)({el:"#app",mixins:[q.A,E.A,R.A],components:{Loader:D.A,SubHeader:pe.A,ManageRegexes:_e,LayoutBuilderBtn:me.A,ModelTrainingCounter:Se,BackToSettings:he.A},watch:{loading_settings:{handler:function(e,t){0==e&&1==t&&this.setAutoAccountingSettings()}}},mounted(){this.getDocumentTypes(!0),this.getTemplatesForDocuments(),this.MODELS_LABELS_MODULE=(0,V.PL)("MODELS_LABELS_MODULE_SETTING"),this.DOC_SCRIPT_MODULE=(0,V.PL)("DOC_SCRIPT_MODULE_SETTING"),document.addEventListener("regexes_saved",this.newChangesSavedForRegexes)},unmounted:function(){document.removeEventListener("regexes_saved",this.newChangesSavedForRegexes)},methods:{getDocumentTypes(e){return Ve(this,void 0,void 0,(function*(){let t;try{e&&this.showLoading();let a=yield(0,O.L3)();if(t=yield L.A.get((0,W.MV)(O.FH.get_document_types),{headers:{Authorization:a}}),!1===t.data.success)throw{message:t.data.message};if(t.data&&t.data.data){this.doc_type_list=[];const e=t.data.data.filter((e=>!qe.gh.includes(e.document_key)));e.forEach(((e,t)=>{let a=this.displayFieldLabel(e);e["document_key"]&&(e["auto_accounting"]=!!e["auto_accounting"],e["label"]=a,e["extraction_type_model"]=this.setExtractionTypeModel(e),this.apiData[e["document_key"]]=e,this.doc_type_auto_accounting_setting[e["document_key"]+"_auto_accounting"]=!1),this.doc_type_list.push(Object.assign({},{value:e.document_key,label:a}))})),C.A.set("doc_types",this.doc_type_list)}this.resetDocTypeRegexData()}catch(a){return this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(a)}finally{e&&this.hideLoading()}}))},setAutoAccountingSettings(){this.user_settings[this.setting_name]=!1;for(const[e,t]of Object.entries(this.doc_type_auto_accounting_setting))this.user_settings.hasOwnProperty(e)&&(this.doc_type_auto_accounting_setting[e]=this.user_settings[e])},setExtractionTypeModel(e){return"FIX_COORDINATES"!==e.extraction_type},manageSettings(e){this.$router.push(e)},hasRegexData(e){return!(0,S.dd)(this.doc_type_regexes)&&!(0,S.dd)(this.doc_type_regexes[e])},showRegexesListView(e){return Ve(this,void 0,void 0,(function*(){if(!this.doc_type_regexes||!this.doc_type_regexes[e]||!this.doc_type_regexes[e]["regexes"]||this.doc_type_regexes[e]["regexes"]["loading_data"])return;let t=this.doc_type_regexes[e]["regexes"];try{0===this.language_origin_list.length&&(yield this.fetchLanguageOptions()),t["loading_data"]=!0,this.showLoading(),!1===t["api_data"]&&(yield this.getDocumentTypeRegexes(e)),t["display_list"]=!0,setTimeout((()=>{t["display_list"]=!1}),0)}catch(a){logError(a),this.showErrorToast("Something went wrong while loading data. Please try again.")}finally{t["loading_data"]=!1,this.hideLoading()}}))},getDocumentTypeRegexes(e){return Ve(this,void 0,void 0,(function*(){if(!e||""===e)throw{message:"Document Type is missing"};let t,a=yield(0,O.L3)(),i=new FormData,s={regexType:e};i.append("data",JSON.stringify(s)),i.append("org_id",(0,W.I)()),t=yield L.A.post(O.FH.post_data_fellowkv+O.FH.get_document_type_regexes,i,{headers:{Authorization:a}});let n=this.doc_type_regexes[e]["regexes"];if(n["api_data"]=!0,n["data"]=[],!t.data)throw{message:"No Data return from api"};if(t.data.hasOwnProperty("message"))throw t.data;t.data.forEach(((e,t)=>{n["data"].push(e)}))}))},newChangesSavedForRegexes(e){if(!e||!e.detail)return;let t=e.detail;this.doc_type_regexes[t]["regexes"]["api_data"]=!1,this.showRegexesListView(t)},resetDocTypeRegexData(){this.doc_type_regexes={};for(const e in this.apiData){const t=this.apiData[e],a=t.document_name;this.doc_type_regexes[a]={},this.doc_type_regexes[a]["regexes"]={data:[],display_list:!1,api_data:!1,loading_data:!1}}},fetchLanguageOptions(){return Ve(this,void 0,void 0,(function*(){let e,t=yield(0,O.L3)();if(e=yield L.A.get((0,W.MV)(O.FH.get_items_from_dictionary+"DOC_ORIGIN"),{headers:{Authorization:t}}),!e.data||0===Object.keys(e.data).length)throw{message:"No language origin list found"};this.language_origin_list=[];for(const a in e.data){let t=e.data[a];this.language_origin_list.push(Object.assign({},{value:t.value,label:t.label}))}}))},deleteDocumentType(e){return Ve(this,void 0,void 0,(function*(){let t;try{if("DEFAULT"===e.org_id)return void this.showErrorToast("Standard document cannot be deleted");this.showLoading();let a=yield(0,O.L3)();if(t=yield L.A.delete((0,W.MV)(O.FH.delete_document_type+e.id),{headers:{Authorization:a}}),!1===t.data.success)return this.showErrorToast(t.data.message),void this.hideLoading();delete this.apiData[e.document_key],this.deleting_row={}}catch(a){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(a)}finally{this.hideLoading()}}))},handleVisibilty(e,t){return Ve(this,void 0,void 0,(function*(){let a;try{this.showLoading();let i=yield(0,O.L3)(),s=new FormData;s.append("id",t.id),s.append("activate",e.toString()),s.append("org_id",(0,W.I)()),a=yield L.A.post(O.FH.activate_deactivate_document_type,s,{headers:{Authorization:i}}),!0===a.data.success?(yield this.getDocTypesSubTypes(),this.showSuccessToast(a.data.message)):this.showErrorToast(a.data.message),this.apiData[t.document_key]["is_active"]=e}catch(i){this.apiData[t.document_key]["is_active"]=!e,this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(i)}finally{this.hideLoading()}}))},handleExtractionType(e,t){return Ve(this,void 0,void 0,(function*(){let a;try{this.showLoading();let i=yield(0,O.L3)(),s=new FormData;s.append("id",t.id),s.append("extraction_type",e?"FLEX_COORDINATES":"FIX_COORDINATES"),s.append("org_id",(0,W.I)()),a=yield L.A.post(O.FH.set_extraction_type,s,{headers:{Authorization:i}}),!0===a.data.success?this.showSuccessToast(a.data.message):this.showErrorToast(a.data.message)}catch(i){this.apiData[t.document_key]["extraction_type_model"]=!e,this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(i)}finally{this.hideLoading()}}))},handleAutoAccountingSetting(e,t){logInfo(this.doc_type_auto_accounting_setting,e)}},setup(){let e=[];const t=(0,ye.cY)(),{getDocTypesSubTypes:a}=t,{doc_type_list:i}=(0,T.bP)(t);let s={};const n=(0,ye.uL)(),{getTemplatesForDocuments:o}=n,l=(0,ye.Bu)(),{getOrgSettings:r}=l,{user_settings:d,loading_settings:c}=(0,T.bP)(l);return{user_settings:d,getOrgSettings:r,doc_type_list:i,getDocTypesSubTypes:a,getTemplatesForDocuments:o,apiData:(0,A.KR)(s),loading_doc_type_regex_data:(0,A.KR)(!0),doc_type_regexes:(0,A.KR)(s),language_origin_list:e,deleteConfirm:(0,A.KR)(!1),deleting_row:(0,A.KR)({}),doc_type_auto_accounting_setting:(0,A.KR)({}),currentDocType:(0,A.KR)(""),LAYOUT_BUILDER_MODULE:(0,A.KR)(!0),MODELS_LABELS_MODULE:(0,A.KR)(!1),DOC_SCRIPT_MODULE:(0,A.KR)(!1),options:[{label:"Yes",value:"true"},{label:"No",value:"false"}]}}});var Re=a(53999),Qe=a(90124),$e=a(25173),Pe=a(23954),Ue=a(66908),Ke=a(10386);const Xe=(0,B.A)(Oe,[["render",F],["__scopeId","data-v-b65a7d42"]]),Me=Xe;ue()(Oe,"components",{QList:Re.A,QItem:Qe.A,QItemSection:$e.A,QBadge:Pe.A,QToggle:Ue.A,QTooltip:ne.A,QSeparator:Ke.A,QBtn:Y.A,QDialog:j.A,QCard:H.A,QCardSection:G.A,QAvatar:le.A,QCardActions:re.A}),ue()(Oe,"directives",{ClosePopup:de.A})}}]);