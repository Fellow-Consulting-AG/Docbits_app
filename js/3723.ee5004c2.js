"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[3723],{93723:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Al});var o=l(61758),a=l(58790);const s=e=>((0,o.Qi)("data-v-01362b3b"),e=e(),(0,o.jt)(),e),n={class:"general-container create-doc-type"},i={class:"row"},r={class:"text-h6 q-mb-md q-mx-auto"},d={class:"row"},u={class:"full-width"},c={class:"row",style:{"margin-top":"20px"}},m={style:{width:"80%","margin-top":"10px"}},p={class:"row"},_={class:"full-width"},h={class:"row",style:{"margin-top":"30px"}},g=s((()=>(0,o.Lk)("div",{class:"col-2"},null,-1))),b={class:"items-center q-ml-lg"},w={class:"row q-mt-md"},f={class:"q-mr-auto text-uppercase"},y=s((()=>(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1)));function v(e,t,l,s,v,k){const F=(0,o.g2)("SubHeader"),A=(0,o.g2)("BackToDocuments"),L=(0,o.g2)("q-tooltip"),x=(0,o.g2)("q-icon"),q=(0,o.g2)("q-input"),C=(0,o.g2)("q-checkbox"),V=(0,o.g2)("q-btn"),T=(0,o.g2)("q-form"),Q=(0,o.g2)("q-step"),R=(0,o.g2)("Regexes"),E=(0,o.g2)("TrainingList"),D=(0,o.g2)("q-tab"),N=(0,o.g2)("q-tabs"),$=(0,o.g2)("q-separator"),O=(0,o.g2)("Groups"),S=(0,o.g2)("q-tab-panel"),K=(0,o.g2)("Fields"),j=(0,o.g2)("q-tab-panels"),I=(0,o.g2)("Tables"),P=(0,o.g2)("TableColumns"),U=(0,o.g2)("q-stepper"),X=(0,o.g2)("q-inner-loading"),W=(0,o.g2)("Loader");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(F,{name:"settings_new_doc_type",label:e.$t("pages.settings.new_doc_type")},null,8,["label"]),(0,o.bF)(A),(0,o.Lk)("div",n,[(0,o.Lk)("div",null,[(0,o.Lk)("div",i,[(0,o.Lk)("span",r,(0,a.v_)(this.step_labels[e.step]),1)]),(0,o.bF)(U,{class:"white-back",modelValue:e.step,"onUpdate:modelValue":t[9]||(t[9]=t=>e.step=t),ref:"stepper",flat:"","alternative-labels":"",color:"primary",animated:""},{default:(0,o.k6)((()=>[(0,o.bF)(Q,{name:"doc",title:e.$t("create"),icon:"img:images/pencil.svg","done-icon":"img:images/pencil-white.svg","active-icon":"img:images/pencil-white.svg","done-color":"green",done:e.done_steps["doc"]},{default:(0,o.k6)((()=>[(0,o.bF)(T,{class:"create-doc-form"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",d,[(0,o.Lk)("div",u,[(0,o.bF)(q,{modelValue:e.step1_model["name"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.step1_model["name"]=t),placeholder:e.$t("name"),readonly:e.isDocStep1Saved(),outlined:"",dense:""},{append:(0,o.k6)((()=>[""!==e.error_model["doc_name"]?((0,o.uX)(),(0,o.Wv)(x,{key:0,name:"error",color:"red",tabindex:"0",class:"cursor-pointer"},{default:(0,o.k6)((()=>[(0,o.bF)(L,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.error_model["doc_name"]),1)])),_:1})])),_:1})):(0,o.Q3)("",!0)])),_:1},8,["modelValue","placeholder","readonly"])])]),(0,o.Lk)("div",c,[(0,o.bF)(C,{modelValue:e.step1_model["has_table"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.step1_model["has_table"]=t),disable:e.isDocStep1Saved(),class:"q-mb-md"},null,8,["modelValue","disable"]),(0,o.Lk)("div",m,(0,a.v_)(e.$t("has_table")),1)]),(0,o.Lk)("div",p,[(0,o.Lk)("div",_,[(0,o.bF)(q,{modelValue:e.step1_model["description"],"onUpdate:modelValue":t[2]||(t[2]=t=>e.step1_model["description"]=t),readonly:e.isDocStep1Saved(),placeholder:e.$t("description"),outlined:"",dense:""},null,8,["modelValue","readonly","placeholder"])])]),(0,o.Lk)("div",h,[g,(0,o.Lk)("div",b,[(0,o.bF)(V,{style:{width:"10vw"},onClick:t[3]||(t[3]=t=>e.step1_model["doc_type"]="auto"),class:(0,a.C4)("doc-type-btn highlighted-back "+("auto"==e.step1_model["doc_type"]?"selected":"")),padding:"lg",label:e.$t("auto")},null,8,["class","label"]),(0,o.bF)(V,{style:{width:"10vw"},class:(0,a.C4)("q-ml-xl doc-type-btn highlighted-back "+("regex"==e.step1_model["doc_type"]?"selected":"")),onClick:t[4]||(t[4]=t=>e.step1_model["doc_type"]="regex"),padding:"lg",label:e.$t("regex")},null,8,["class","label"])])])])),_:1})])),_:1},8,["title","done"]),"regex"==e.step1_model["doc_type"]?((0,o.uX)(),(0,o.Wv)(Q,{key:0,name:"regex",title:e.$t("create_regex"),icon:"img:images/regex.svg","done-color":"green",done:e.done_steps["regex"]},{default:(0,o.k6)((()=>[(0,o.bF)(R,{doc_type:e.getDocTypeName(),list_data:e.regexes,language_origin_list:e.language_origin_list,table_height:430},null,8,["doc_type","list_data","language_origin_list"])])),_:1},8,["title","done"])):(0,o.Q3)("",!0),"auto"==e.step1_model["doc_type"]?((0,o.uX)(),(0,o.Wv)(Q,{key:1,name:"upload",title:e.$t("upload"),icon:"img:settings/export-white.svg","done-icon":"img:settings/export-white.svg","active-icon":"img:settings/export-white.svg","done-color":"green",done:e.done_steps["upload"]},{default:(0,o.k6)((()=>[(0,o.bF)(E,{doc_type:e.getDocTypeName(),doc_type_key:e.getDocTypeKey(),language_origin_list:e.language_origin_list,max_value:e.training_doc_limit,list_data:e.sample_files},null,8,["doc_type","doc_type_key","language_origin_list","max_value","list_data"])])),_:1},8,["title","done"])):(0,o.Q3)("",!0),(0,o.bF)(Q,{name:"fields_groups",title:e.$t("fields_groups"),icon:"img:images/fields_and_groups-white.svg","done-icon":"img:images/fields_and_groups-white.svg","active-icon":"img:images/fields_and_groups-white.svg","done-color":"green",done:e.done_steps["fields_groups"]},{default:(0,o.k6)((()=>[(0,o.bF)(N,{modelValue:e.tab,"onUpdate:modelValue":t[5]||(t[5]=t=>e.tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","active-class":"highlighted-back"},{default:(0,o.k6)((()=>[(0,o.bF)(D,{name:"groups",label:e.$t("groups")},null,8,["label"]),(0,o.bF)(D,{name:"fields",label:e.$t("fields")},null,8,["label"])])),_:1},8,["modelValue"]),(0,o.bF)($),(0,o.bF)(j,{modelValue:e.tab,"onUpdate:modelValue":t[6]||(t[6]=t=>e.tab=t),animated:""},{default:(0,o.k6)((()=>[(0,o.bF)(S,{name:"groups",class:"white-back"},{default:(0,o.k6)((()=>[(0,o.bF)(O,{doc_type:e.getDocTypeName(),list_data:e.groups},null,8,["doc_type","list_data"])])),_:1}),(0,o.bF)(S,{name:"fields",class:"white-back"},{default:(0,o.k6)((()=>[(0,o.bF)(K,{doc_type:e.getDocTypeName(),list_data:e.fields,groups:e.groups},null,8,["doc_type","list_data","groups"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["title","done"]),!0===e.step1_model["has_table"]?((0,o.uX)(),(0,o.Wv)(Q,{key:2,name:"table_columns",title:e.$t("table_columns"),icon:"table_chart","done-icon":"table_chart","active-icon":"table_chart","done-color":"green",done:e.done_steps["table_columns"]},{default:(0,o.k6)((()=>[(0,o.bF)(N,{modelValue:e.table_column_tab,"onUpdate:modelValue":t[7]||(t[7]=t=>e.table_column_tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","active-class":"highlighted-back"},{default:(0,o.k6)((()=>[(0,o.bF)(D,{name:"tables",label:e.$t("tables")},null,8,["label"]),(0,o.bF)(D,{name:"columns",label:e.$t("columns")},null,8,["label"])])),_:1},8,["modelValue"]),(0,o.bF)($),(0,o.bF)(j,{modelValue:e.table_column_tab,"onUpdate:modelValue":t[8]||(t[8]=t=>e.table_column_tab=t),animated:""},{default:(0,o.k6)((()=>[(0,o.bF)(S,{name:"tables",class:"white-back"},{default:(0,o.k6)((()=>[(0,o.bF)(I,{doc_type:e.getDocTypeKey(),list_data:e.tables},null,8,["doc_type","list_data"])])),_:1}),(0,o.bF)(S,{name:"columns",class:"white-back"},{default:(0,o.k6)((()=>[(0,o.bF)(P,{table_height:430,tables:e.tables,list_data:e.table_columns},null,8,["tables","list_data"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["title","done"])):(0,o.Q3)("",!0)])),_:1},8,["modelValue"]),(0,o.Lk)("div",w,[(0,o.Lk)("div",f,["doc"!=e.step?((0,o.uX)(),(0,o.Wv)(V,{key:0,icon:"arrow_back",onClick:t[10]||(t[10]=t=>e.$refs.stepper.previous()),label:e.$t("back"),class:"q-ml-sm highlighted-back"},null,8,["label"])):(0,o.Q3)("",!0)]),(0,o.bF)(V,{"icon-right":"arrow_forward",class:"q-ml-sm q-ml-auto",onClick:e.validateAndNext,color:"primary",label:e.$t(e.wizardNextButtonLabel())},null,8,["onClick","label"])])])]),(0,o.bF)(X,{showing:e.loading},{default:(0,o.k6)((()=>[y])),_:1},8,["showing"]),(0,o.bF)(W)],64)}var k=l(82303),F=l(24622),A=l(38734),L=l(18505),x=l(46162);const q=e=>((0,o.Qi)("data-v-0bac3068"),e=e(),(0,o.jt)(),e),C={key:0,class:"q-ml-auto"},V=q((()=>(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1))),T=q((()=>(0,o.Lk)("span",{class:"text-weight-bold"},"Clone Groups and Fields",-1))),Q={class:"row"},R={class:"col-sm-12 col-md-12 col-lg-12"};function E(e,t,l,s,n,i){const r=(0,o.g2)("q-btn"),d=(0,o.g2)("q-space"),u=(0,o.g2)("q-icon"),c=(0,o.g2)("q-input"),m=(0,o.g2)("q-tooltip"),p=(0,o.g2)("q-td"),_=(0,o.g2)("q-tr"),h=(0,o.g2)("q-table"),g=(0,o.g2)("q-inner-loading"),b=(0,o.g2)("CreateGroup"),w=(0,o.g2)("q-dialog"),f=(0,o.g2)("q-toolbar-title"),y=(0,o.g2)("q-toolbar"),v=(0,o.g2)("q-select"),k=(0,o.g2)("q-card-section"),F=(0,o.g2)("q-card-actions"),A=(0,o.g2)("q-card"),L=(0,o.g2)("Loader"),x=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(h,{ref:"tableRef",style:{height:"360px"},flat:"",class:(0,a.C4)("sticky-header-table groups-list white-back"),rows:e.rows,columns:e.columns,"no-data-label":e.$t("pages.messages.no_record_found"),"rows-per-page-options":[0],"row-key":"id",filter:e.filter,"filter-method":e.customFilter},{top:(0,o.k6)((()=>[(0,o.bF)(r,{color:"primary",class:"mr-6",label:e.$t("add_new"),onClick:t[0]||(t[0]=t=>e.addNewDialog=!0)},null,8,["label"]),(0,o.bF)(r,{color:"primary",class:"mr-6",label:e.$t("clone_document_type"),onClick:t[1]||(t[1]=t=>e.cloneGroupsAndFieldsDlg=!0)},null,8,["label"]),(0,o.bF)(d),(0,o.bF)(c,{outlined:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[2]||(t[2]=t=>e.filter=t)},{append:(0,o.k6)((()=>[(0,o.bF)(u,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,o.k6)((t=>[(0,o.bF)(_,{props:t,id:t.key},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.cols,(l=>((0,o.uX)(),(0,o.CE)(o.FK,{key:l.name},["action"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:0,style:{width:"12%"}},{default:(0,o.k6)((()=>[""!==t.row.id?((0,o.uX)(),(0,o.CE)("span",C,["DEFAULT"!==t.row.org_id?((0,o.uX)(),(0,o.Wv)(r,{key:0,class:"float-right","icon-right":"img:images/trash-bin-default.svg","no-caps":"",flat:"",dense:"",onClick:l=>e.handleDelete(t.row.id,t.rowIndex)},{default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])),_:2},1024)):(0,o.Q3)("",!0),"name"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:1,style:{width:"70%"}},{default:(0,o.k6)((()=>[(0,o.bF)(c,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.name,"onUpdate:modelValue":e=>t.row.name=e,readonly:""!==t.row.id},null,8,["data-id","modelValue","onUpdate:modelValue","readonly"])])),_:2},1024)):(0,o.Q3)("",!0)],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","no-data-label","filter","filter-method"]),(0,o.bF)(g,{showing:e.loading},{default:(0,o.k6)((()=>[V])),_:1},8,["showing"]),(0,o.bF)(w,{modelValue:e.addNewDialog,"onUpdate:modelValue":t[3]||(t[3]=t=>e.addNewDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(b,{doc_type:e.doc_type},null,8,["doc_type"])])),_:1},8,["modelValue"]),(0,o.bF)(w,{modelValue:e.cloneGroupsAndFieldsDlg,"onUpdate:modelValue":t[6]||(t[6]=t=>e.cloneGroupsAndFieldsDlg=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(A,{style:{width:"600px"}},{default:(0,o.k6)((()=>[(0,o.bF)(y,{class:"secondary-toolbar"},{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[T])),_:1}),(0,o.bo)((0,o.bF)(r,{flat:"",round:"",dense:"",icon:"close"},null,512),[[x]])])),_:1}),(0,o.bF)(k,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",Q,[(0,o.Lk)("div",R,[(0,o.bF)(v,{modelValue:e.copyFromDocType,"onUpdate:modelValue":t[4]||(t[4]=t=>e.copyFromDocType=t),outlined:"","data-cy":"doc-type",options:this.doc_type_list,"emit-value":"","map-options":"",label:e.$t("pages.screen2a.doctype")},null,8,["modelValue","options","label"])])])])),_:1}),(0,o.bF)(F,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(r,{flat:"",label:e.$t("cancel"),"data-cy":"cancel",color:"primary"},null,8,["label"]),[[x]]),(0,o.bo)((0,o.bF)(r,{flat:"",label:e.$t("proceed"),"data-cy":"delete-popup",color:"primary",onClick:t[5]||(t[5]=t=>e.cloneGroupsAndFields())},null,8,["label"]),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(L)],64)}var D=l(89156),N=l(1595),$=l(25891),O=l(29104);const S=(0,o.Lk)("span",{class:"text-weight-bold"},"Create New Group",-1),K={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},j={class:"full-width"},I=(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function P(e,t,l,s,n,i){const r=(0,o.g2)("q-toolbar-title"),d=(0,o.g2)("q-btn"),u=(0,o.g2)("q-toolbar"),c=(0,o.g2)("q-tooltip"),m=(0,o.g2)("q-icon"),p=(0,o.g2)("q-input"),_=(0,o.g2)("q-card-section"),h=(0,o.g2)("q-card-actions"),g=(0,o.g2)("q-inner-loading"),b=(0,o.g2)("q-card"),w=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.Wv)(b,{style:{width:"600px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("form",{onSubmit:t[1]||(t[1]=(0,O.D$)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.bF)(u,{class:"secondary-toolbar"},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[S])),_:1}),(0,o.bo)((0,o.bF)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[w]])])),_:1}),(0,o.bF)(_,{class:"q-pt-none"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",K,[(0,o.Lk)("div",j,[(0,o.bF)(p,{outlined:"",tabindex:"0",class:(0,a.C4)("full-width "+(!e.new_model["validate"]||e.new_model["required_error"]?"column-error-border":"")),modelValue:e.new_model["name"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["name"]=t),placeholder:"Group Name",hint:e.message},{append:(0,o.k6)((()=>[!e.new_model["validate"]||e.new_model["required_error"]?((0,o.uX)(),(0,o.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"bg-red line-error-tooltip"},{default:(0,o.k6)((()=>[e.new_model["validate"]?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,a.v_)(e.message),1)],64)),e.new_model["required_error"]?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)(" Field is Required ")],64)):(0,o.Q3)("",!0)])),_:1})])),_:1})):(0,o.Q3)("",!0)])),_:1},8,["class","modelValue","hint"])])])])),_:1}),(0,o.bF)(h,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(d,{class:"highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[w]]),(0,o.bF)(d,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,o.bF)(g,{showing:e.loading},{default:(0,o.k6)((()=>[I])),_:1},8,["showing"])])),_:1})}var U=l(68450),X=l(85487),W=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function n(e){try{r(o.next(e))}catch(t){s(t)}}function i(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?l(e.value):a(e.value).then(n,i)}r((o=o.apply(e,t||[])).next())}))};const M=(0,o.pM)({el:"#app",mixins:[F.A],props:{doc_type:{type:String,default:""}},components:{},data(){return{message:this.$t("only_characters_numbers")}},setup(){let e={};return{new_model:(0,A.KR)(e),token:(0,A.KR)(""),loading:(0,A.KR)(!1)}},watch:{},mounted(){this.setNewModel()},methods:{setNewModel(){this.new_model["name"]="",this.new_model["validate"]=!0,this.new_model["required_error"]=!1},submitNewColumFrom(){return W(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):(this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(e))}finally{this.loading=!1}}))},saveNewRow(){return W(this,void 0,void 0,(function*(){let e,t=new FormData;t.append("title",this.new_model["name"]),t.append("group_name",(0,U.GX)(this.new_model["name"])),t.append("doc_type_name",this.doc_type),t.append("translation_key",this.new_model["name"]),t.append("org_id",(0,X.I)());let l=yield(0,x.L3)();if(e=yield k.A.post(x.FH.create_document_field_group,t,{headers:{Authorization:l}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};const o=new CustomEvent("group_added",{detail:{data:e.data}});document.dispatchEvent(o),this.showSuccessToast("Group Created successfully"),this.setNewModel()}))},validateRow(e){let t=!0;return e["name"]&&0!=e["name"].length?(0,U.oI)(e["name"])?t:(e.validate=!1,!1):(e.required_error=!0,!1)},getToken(){return W(this,void 0,void 0,(function*(){let e=this.token&&null!=this.token&&""!=this.token?this.token:yield(0,x.L3)();return e}))}}});var G=l(12807),z=l(23316),B=l(36914),H=l(39150),J=l(56384),Z=l(44189),Y=l(67837),ee=l(50492),te=l(97410),le=l(62669),oe=l(39035),ae=l(88672),se=l(98582),ne=l.n(se);const ie=(0,G.A)(M,[["render",P]]),re=ie;ne()(M,"components",{QCard:z.A,QToolbar:B.A,QToolbarTitle:H.A,QBtn:J.A,QCardSection:Z.A,QInput:Y.A,QIcon:ee.A,QTooltip:te.A,QCardActions:le.A,QInnerLoading:oe.A}),ne()(M,"directives",{ClosePopup:ae.A});var de=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function n(e){try{r(o.next(e))}catch(t){s(t)}}function i(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?l(e.value):a(e.value).then(n,i)}r((o=o.apply(e,t||[])).next())}))};const ue=(0,o.pM)({el:"#app",mixins:[F.A,$.A,L.A],props:{doc_type:{type:String,default:""},list_data:{}},components:{CreateGroup:re,Loader:D.A},data(){return{}},setup(){let e=[];const t=(0,A.KR)(e),l=(0,N.cY)(),{doc_type_list:o}=l;return{columns:t,filter:(0,A.KR)(""),rows:(0,A.KR)(e),doc_type_list:o,loading:(0,A.KR)(!1),copyFromDocType:(0,A.KR)(),addNewDialog:(0,A.KR)(!1),cloneGroupsAndFieldsDlg:(0,A.KR)(!1)}},watch:{list_data:{deep:!0,handler:function(e,t){setTimeout((()=>{this.prepareRows(e)}),0)}}},mounted:function(){this.prepareColumns(),this.prepareRows(this.list_data),document.addEventListener("group_added",this.recordAdded)},unmounted:function(){document.removeEventListener("group_added",this.recordAdded)},methods:{prepareListView(e){this.prepareRows(e)},prepareColumns(){this.columns.push(Object.assign({},{name:"name",label:this.$t("groups"),field:"name",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(e){this.rows=[];for(let[t,l]of Object.entries(e)){const e=l;this.addNewRow(e)}},addNewRow(e){let t=Object.assign({},e);return t["name"]=this.displayFieldLabel(e),this.rows.push(t),this.rows.length.toString()},scrollToBottom(){let e=document.querySelector(".groups-list");if(!e)return;let t=e.querySelector(".q-table__middle");t&&(t.scrollTop=t.scrollHeight)},handleDelete(e,t){return de(this,void 0,void 0,(function*(){try{if(""===e)return;let l;this.loading=!0;let o=yield(0,x.L3)();if(l=yield k.A.delete((0,X.MV)(x.FH.delete_document_field_group+"/"+e),{headers:{Authorization:o}}),l.data&&l.data.hasOwnProperty("success")&&!1===l.data.success)throw{message:l.data.message};const a=new CustomEvent("group_deleted",{detail:{index:t}});document.dispatchEvent(a)}catch(l){throw logError(l),{message:this.$t("pages.messages.error_internal_occur")}}finally{this.loading=!1}}))},recordAdded(e){this.addNewDialog=!1,setTimeout((()=>{this.scrollToBottom()}),0)},customFilter(e,t){const l=t.toLowerCase();let o=e;return l&&""!==l?(o=e.filter(((e,t)=>{let o=!1;for(let[a,s]of Object.entries(e)){let e=s,t=e&&null!==e?e.toString():"";if(e=t.toLowerCase(),e.includes(l)){o=!0;break}}return o})),o):o},cloneGroupsAndFields(){return de(this,void 0,void 0,(function*(){let e;this.cloneGroupsAndFieldsDlg=!1,this.showLoading();try{let t=yield(0,x.L3)(),l="?copy_from_doc_type="+this.copyFromDocType+"&copy_to_doc_type="+this.doc_type;e=yield k.A.get((0,X.MV)(x.FH.copy_fields_setting_from_doc_type+l),{headers:{Authorization:t}})}catch(l){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(l)}finally{this.hideLoading()}if(!1===e.data.success)return this.showErrorToast(e.data.message),void this.hideLoading();this.showSuccessToast(this.$t("pages.messages.DOC_TYPE_FIELDS_CLONED"));const t=new CustomEvent("fetch_Groups_Fields_event",{});document.dispatchEvent(t)}))}}});var ce=l(42315),me=l(93676),pe=l(44488),_e=l(45262),he=l(82156),ge=l(94940),be=l(67156);const we=(0,G.A)(ue,[["render",E],["__scopeId","data-v-0bac3068"]]),fe=we;ne()(ue,"components",{QTable:ce.A,QBtn:J.A,QSpace:me.A,QInput:Y.A,QIcon:ee.A,QTr:pe.A,QTd:_e.A,QTooltip:te.A,QInnerLoading:oe.A,QDialog:he.A,QCard:z.A,QToolbar:B.A,QToolbarTitle:H.A,QCardSection:Z.A,QSelect:ge.A,QCardActions:le.A,QField:be.A}),ne()(ue,"directives",{ClosePopup:ae.A});const ye=e=>((0,o.Qi)("data-v-823e1c48"),e=e(),(0,o.jt)(),e),ve={key:0,class:"q-ml-auto"},ke=ye((()=>(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1)));function Fe(e,t,l,s,n,i){const r=(0,o.g2)("q-btn"),d=(0,o.g2)("q-space"),u=(0,o.g2)("q-icon"),c=(0,o.g2)("q-input"),m=(0,o.g2)("q-tooltip"),p=(0,o.g2)("q-td"),_=(0,o.g2)("q-select"),h=(0,o.g2)("q-tr"),g=(0,o.g2)("q-table"),b=(0,o.g2)("q-inner-loading"),w=(0,o.g2)("CreateField"),f=(0,o.g2)("q-dialog");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(g,{ref:"tableRef",style:{height:"360px"},class:(0,a.C4)("sticky-header-table fields-list white-back"),flat:"",rows:e.rows,columns:e.columns,"rows-per-page-options":[0],"row-key":"id","no-data-label":e.$t("pages.messages.no_record_found"),filter:e.filter,"filter-method":e.customFilter},{top:(0,o.k6)((()=>[(0,o.bF)(r,{color:"primary",class:"mr-6",label:e.$t("add_new"),onClick:t[0]||(t[0]=t=>e.addNewDialog=!0)},null,8,["label"]),(0,o.bF)(d),(0,o.bF)(c,{outlined:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter=t)},{append:(0,o.k6)((()=>[(0,o.bF)(u,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,o.k6)((t=>[(0,o.bF)(h,{props:t,id:t.key},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.cols,(l=>((0,o.uX)(),(0,o.CE)(o.FK,{key:l.name},["action"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:0,style:{width:"12%"}},{default:(0,o.k6)((()=>[""!==t.row.id?((0,o.uX)(),(0,o.CE)("span",ve,["DEFAULT"!==t.row.org_id?((0,o.uX)(),(0,o.Wv)(r,{key:0,class:"float-right","icon-right":"img:images/trash-bin-default.svg","no-caps":"",flat:"",dense:"",onClick:l=>e.handleDelete(t.row.id,t.rowIndex)},{default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])),_:2},1024)):(0,o.Q3)("",!0),"group_name"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:1,style:{width:"14%"}},{default:(0,o.k6)((()=>[(0,o.bF)(_,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.group_name,"onUpdate:modelValue":e=>t.row.group_name=e,readonly:""!==t.row.id,options:e.group_list,"emit-value":"","map-options":""},null,8,["data-id","modelValue","onUpdate:modelValue","readonly","options"])])),_:2},1024)):(0,o.Q3)("",!0),"field_type"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:2,style:{width:"14%"}},{default:(0,o.k6)((()=>[(0,o.bF)(_,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.field_type,"onUpdate:modelValue":e=>t.row.field_type=e,readonly:""!==t.row.id,options:e.data_types,"emit-value":"","map-options":""},null,8,["data-id","modelValue","onUpdate:modelValue","readonly","options"])])),_:2},1024)):(0,o.Q3)("",!0),"title"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:3,style:{width:"35%"}},{default:(0,o.k6)((()=>[(0,o.bF)(c,{borderless:"",tabindex:"0","data-id":t.key,class:(0,a.C4)("input-field "),modelValue:t.row.title,"onUpdate:modelValue":e=>t.row.title=e,readonly:""!==t.row.id},null,8,["data-id","modelValue","onUpdate:modelValue","readonly"])])),_:2},1024)):(0,o.Q3)("",!0),"field_name"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:4,style:{width:"25%"}},{default:(0,o.k6)((()=>[(0,o.bF)(c,{borderless:"",tabindex:"0","data-id":t.key,class:(0,a.C4)("input-field "),modelValue:t.row.field_name,"onUpdate:modelValue":e=>t.row.field_name=e,readonly:""!==t.row.id},null,8,["data-id","modelValue","onUpdate:modelValue","readonly"])])),_:2},1024)):(0,o.Q3)("",!0)],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","no-data-label","filter","filter-method"]),(0,o.bF)(b,{showing:e.loading},{default:(0,o.k6)((()=>[ke])),_:1},8,["showing"]),(0,o.bF)(f,{modelValue:e.addNewDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.addNewDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(w,{doc_type:e.doc_type,group_list:e.group_list},null,8,["doc_type","group_list"])])),_:1},8,["modelValue"])],64)}const Ae=(0,o.Lk)("span",{class:"text-weight-bold"},"Create New Field",-1),Le={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},xe={class:"full-width"},qe={class:"row full-width"},Ce={class:"full-width"},Ve={class:"row full-width"},Te={class:"full-width"},Qe={class:"row full-width"},Re={class:"full-width"},Ee={class:"row full-width"},De={class:"full-width"},Ne=(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function $e(e,t,l,s,n,i){const r=(0,o.g2)("q-toolbar-title"),d=(0,o.g2)("q-btn"),u=(0,o.g2)("q-toolbar"),c=(0,o.g2)("q-input"),m=(0,o.g2)("q-select"),p=(0,o.g2)("q-checkbox"),_=(0,o.g2)("q-card-section"),h=(0,o.g2)("q-card-actions"),g=(0,o.g2)("q-inner-loading"),b=(0,o.g2)("q-card"),w=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.Wv)(b,{style:{width:"600px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("form",{onSubmit:t[8]||(t[8]=(0,O.D$)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.bF)(u,{class:"secondary-toolbar"},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[Ae])),_:1}),(0,o.bo)((0,o.bF)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[w]])])),_:1}),(0,o.bF)(_,{class:"q-pt-none"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Le,[(0,o.Lk)("div",xe,[(0,o.bF)(c,{outlined:"",tabindex:"0",class:(0,a.C4)("full-width "),modelValue:e.new_model["title"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["title"]=t),placeholder:"Field Title","error-message":e.new_model["title_error_msg"],error:e.new_model["title_error"]},null,8,["modelValue","error-message","error"])])]),(0,o.Lk)("div",qe,[(0,o.Lk)("div",Ce,[(0,o.bF)(c,{outlined:"",tabindex:"0",class:(0,a.C4)("full-width "),modelValue:e.new_model["field_name"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.new_model["field_name"]=t),placeholder:"Field Name","error-message":e.new_model["name_error_msg"],error:e.new_model["name_error"]},null,8,["modelValue","error-message","error"])])]),(0,o.Lk)("div",Ve,[(0,o.Lk)("div",Te,[(0,o.bF)(m,{modelValue:e.new_model["field_type"],"onUpdate:modelValue":t[2]||(t[2]=t=>e.new_model["field_type"]=t),tabindex:"0",options:e.data_types,"error-message":"Field is required",error:e.new_model["type_error"],"emit-value":"","map-options":""},null,8,["modelValue","options","error"])])]),(0,o.Lk)("div",Qe,[(0,o.Lk)("div",Re,[(0,o.bF)(m,{tabindex:"0",modelValue:e.new_model["group_name"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.new_model["group_name"]=t),"error-message":"Field is required",error:e.new_model["group_error"],options:e.group_list,"emit-value":"","map-options":""},null,8,["modelValue","error","options"])])]),(0,o.Lk)("div",Ee,[(0,o.Lk)("div",De,[(0,o.bF)(p,{label:e.$t("required"),modelValue:e.new_model["is_required"],"onUpdate:modelValue":t[4]||(t[4]=t=>e.new_model["is_required"]=t),size:"30px"},null,8,["label","modelValue"]),(0,o.bF)(p,{label:e.$t("readonly"),modelValue:e.new_model["is_readonly"],"onUpdate:modelValue":t[5]||(t[5]=t=>e.new_model["is_readonly"]=t),size:"30px"},null,8,["label","modelValue"]),(0,o.bF)(p,{label:e.$t("hidden"),modelValue:e.new_model["is_hidden"],"onUpdate:modelValue":t[6]||(t[6]=t=>e.new_model["is_hidden"]=t),size:"30px"},null,8,["label","modelValue"]),(0,o.bF)(p,{label:e.$t("force_validation"),modelValue:e.new_model["force_validation"],"onUpdate:modelValue":t[7]||(t[7]=t=>e.new_model["force_validation"]=t),size:"30px"},null,8,["label","modelValue"])])])])),_:1}),(0,o.bF)(h,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(d,{class:"highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[w]]),(0,o.bF)(d,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,o.bF)(g,{showing:e.loading},{default:(0,o.k6)((()=>[Ne])),_:1},8,["showing"])])),_:1})}var Oe=l(16332),Se=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function n(e){try{r(o.next(e))}catch(t){s(t)}}function i(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?l(e.value):a(e.value).then(n,i)}r((o=o.apply(e,t||[])).next())}))};const Ke=(0,o.pM)({el:"#app",mixins:[F.A],props:{doc_type:{type:String,default:""},group_list:[]},components:{},data(){return{}},setup(){let e={};return{new_model:(0,A.KR)(e),token:(0,A.KR)(""),data_types:(0,A.KR)([]),loading:(0,A.KR)(!1)}},watch:{},mounted(){this.setNewModel(),this.setFieldTypes()},methods:{setFieldTypes(){this.data_types=[{label:"Select Type",value:""}].concat((0,U.Zv)())},setNewModel(){this.new_model["field_name"]="",this.new_model["group_name"]="",this.new_model["field_type"]="",this.new_model["title"]="",this.new_model["is_required"]=!1,this.new_model["is_readonly"]=!1,this.new_model["is_hidden"]=!1,this.new_model["force_validation"]=!1,this.new_model["type_error"]=!1,this.new_model["group_error"]=!1,this.new_model["type_error"]=!1,this.new_model["group_error"]=!1,this.new_model["title_error"]=!1,this.new_model["name_error"]=!1,this.new_model["name_error_msg"]="",this.new_model["title_error_msg"]=""},submitNewColumFrom(){return Se(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):(this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(e))}finally{this.loading=!1}}))},saveNewRow(){return Se(this,void 0,void 0,(function*(){let e,t=new FormData;t.append("title",this.new_model["title"]),t.append("field_name",this.new_model["field_name"]),t.append("group_name",this.new_model["group_name"]),t.append("doc_type_name",this.doc_type),t.append("field_type",this.new_model["field_type"]),t.append("is_required",this.new_model["is_required"]),t.append("is_readonly",this.new_model["is_readonly"]),t.append("is_hidden",this.new_model["is_hidden"]),t.append("force_validation",this.new_model["force_validation"]),t.append("org_id",(0,X.I)());let l=yield(0,x.L3)();if(e=yield k.A.post(x.FH.create_document_field,t,{headers:{Authorization:l}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};this.showSuccessToast("Field Created successfully"),e.data["group_name"]=this.new_model["group_name"];const o=new CustomEvent("field_added",{detail:{data:e.data}});document.dispatchEvent(o)}))},validateRow(e){let t=!1;return this.new_model["type_error"]=!1,this.new_model["group_error"]=!1,this.new_model["title_error"]=!1,this.new_model["name_error"]=!1,this.new_model["name_error_msg"]="",this.new_model["title_error_msg"]="",e["title"]&&0!=e["title"].length?(0,U.oI)(e["title"])||(this.new_model["title_error_msg"]=Oe.i18n.t("field_only_characters"),t=!0,this.new_model["title_error"]=!0):(t=!0,this.new_model["title_error_msg"]="Field Title is required",this.new_model["title_error"]=!0),e["field_name"]&&0!=e["field_name"].length?(0,U.Z9)(e["field_name"])||(this.new_model["name_error_msg"]="Field Name can only contain characters, numbers, hyphen and underscore",t=!0,this.new_model["name_error"]=!0):(this.new_model["name_error_msg"]="Field Name is required",t=!0,this.new_model["name_error"]=!0),e["field_type"]&&0!=e["field_type"].length||(this.new_model["type_error"]=!0),e["group_name"]&&0!=e["group_name"].length||(this.new_model["group_error"]=!0),!t},getToken(){return Se(this,void 0,void 0,(function*(){let e=this.token&&null!=this.token&&""!=this.token?this.token:yield(0,x.L3)();return e}))}}});var je=l(80460);const Ie=(0,G.A)(Ke,[["render",$e]]),Pe=Ie;ne()(Ke,"components",{QCard:z.A,QToolbar:B.A,QToolbarTitle:H.A,QBtn:J.A,QCardSection:Z.A,QInput:Y.A,QSelect:ge.A,QCheckbox:je.A,QCardActions:le.A,QInnerLoading:oe.A}),ne()(Ke,"directives",{ClosePopup:ae.A});var Ue=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function n(e){try{r(o.next(e))}catch(t){s(t)}}function i(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?l(e.value):a(e.value).then(n,i)}r((o=o.apply(e,t||[])).next())}))};const Xe=(0,o.pM)({el:"#app",mixins:[F.A,$.A],props:{doc_type:{type:String,default:""},list_data:{},groups:{}},components:{CreateField:Pe},data(){return{}},setup(){let e=[];const t=(0,A.KR)(e);let l={};return{loading:(0,A.KR)(!1),columns:t,rows:(0,A.KR)(e),filter:(0,A.KR)(""),group_list:(0,A.KR)(e),group_list_flat:(0,A.KR)(l),addNewDialog:(0,A.KR)(!1)}},watch:{list_data:{deep:!0,handler:function(e,t){setTimeout((()=>{this.prepareRows(e)}),0)}},groups:{deep:!0,handler:function(e,t){setTimeout((()=>{this.fetchGroups(e)}),0)}}},mounted:function(){this.prepareColumns(),this.fetchGroups(this.groups),this.prepareRows(this.list_data),document.addEventListener("field_added",this.recordAdded)},unmounted:function(){document.removeEventListener("field_added",this.recordAdded)},methods:{recordAdded(e){this.addNewDialog=!1,setTimeout((()=>{this.scrollToBottom()}),0)},fetchGroups(e){this.group_list=[],this.group_list.push(Object.assign({},{value:"",label:"Select Group"}));for(let[t,l]of Object.entries(e)){const e=l;this.group_list.push(Object.assign({},{value:e.group_name,label:this.displayFieldLabel(e)}))}this.flatLanguageList()},flatLanguageList(){if((0,U.dd)(this.group_list_flat))for(let[e,t]of Object.entries(this.group_list)){let e=t;this.group_list_flat[e.value]=e.label}},prepareColumns(){this.columns.push(Object.assign({},{name:"title",label:this.$t("field_title"),field:"title",align:"left"})),this.columns.push(Object.assign({},{name:"field_name",label:this.$t("field_name"),field:"field_name",align:"left"})),this.columns.push(Object.assign({},{name:"field_type",label:this.$t("type"),field:"field_type",align:"left"})),this.columns.push(Object.assign({},{name:"group_name",label:this.$t("groups"),field:"group_name",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(e){this.rows=[];for(let[t,l]of Object.entries(e)){const e=l;this.addNewRow(e)}},addNewRow(e){let t=Object.assign({},e);return t["title"]=this.displayFieldLabel(e),t["error"]=!1,t["error_messages"]="",this.rows.push(t),this.rows.length.toString()},scrollToBottom(){let e=document.querySelector(".fields-list");if(!e)return;let t=e.querySelector(".q-table__middle");t&&(t.scrollTop=t.scrollHeight)},handleDelete(e,t){return Ue(this,void 0,void 0,(function*(){try{if(""===e)return;let l;this.loading=!0;let o=yield(0,x.L3)();if(l=yield k.A.delete((0,X.MV)(x.FH.delete_document_field+"/"+e),{headers:{Authorization:o}}),l.data&&l.data.hasOwnProperty("success")&&!1===l.data.success)throw{message:l.data.message};const a=new CustomEvent("field_deleted",{detail:{index:t}});document.dispatchEvent(a)}catch(l){throw logError(l),{message:this.$t("pages.messages.error_internal_occur")}}finally{this.loading=!1}}))},customFilter(e,t){const l=t.toLowerCase();let o=e;return l&&""!==l?(o=e.filter(((e,t)=>{let o=!1;for(let[a,s]of Object.entries(e)){let e=s,t=e&&null!==e?e.toString():"";if(e=t.toLowerCase(),e.includes(l)){o=!0;break}if("group_name"===a&&e&&this.group_list_flat[t]&&(e=this.group_list_flat[t].toLowerCase(),e.includes(l))){o=!0;break}}return o})),o):o}}}),We=(0,G.A)(Xe,[["render",Fe],["__scopeId","data-v-823e1c48"]]),Me=We;ne()(Xe,"components",{QTable:ce.A,QBtn:J.A,QSpace:me.A,QInput:Y.A,QIcon:ee.A,QTr:pe.A,QTd:_e.A,QTooltip:te.A,QSelect:ge.A,QInnerLoading:oe.A,QDialog:he.A,QField:be.A});const Ge=e=>((0,o.Qi)("data-v-2b03b170"),e=e(),(0,o.jt)(),e),ze={key:0,class:"q-ml-auto"},Be=Ge((()=>(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1)));function He(e,t,l,s,n,i){const r=(0,o.g2)("q-icon"),d=(0,o.g2)("q-input"),u=(0,o.g2)("q-space"),c=(0,o.g2)("q-btn"),m=(0,o.g2)("q-tooltip"),p=(0,o.g2)("q-td"),_=(0,o.g2)("q-tr"),h=(0,o.g2)("q-table"),g=(0,o.g2)("q-inner-loading"),b=(0,o.g2)("CreateTable"),w=(0,o.g2)("q-dialog");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(h,{ref:"tableRef",style:{height:"360px"},class:(0,a.C4)("sticky-header-table tables-list"),rows:e.rows,columns:e.columns,"rows-per-page-options":[0],"no-data-label":e.$t("pages.messages.no_record_found"),"row-key":"id",filter:e.filter,"filter-method":e.customFilter},{top:(0,o.k6)((()=>[(0,o.bF)(d,{outlined:"",debounce:"300",color:"primary",dense:"",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t)},{append:(0,o.k6)((()=>[(0,o.bF)(r,{name:"search"})])),_:1},8,["modelValue"]),(0,o.bF)(u),(0,o.bF)(c,{color:"primary",class:"mr-6",label:e.$t("add_new"),onClick:t[1]||(t[1]=t=>e.addNewDialog=!0)},null,8,["label"])])),body:(0,o.k6)((t=>[(0,o.bF)(_,{props:t,id:t.key},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.cols,(l=>((0,o.uX)(),(0,o.CE)(o.FK,{key:l.name},["action"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:0,style:{width:"12%"}},{default:(0,o.k6)((()=>[""!==t.row.id?((0,o.uX)(),(0,o.CE)("span",ze,[(0,o.bF)(c,{class:"float-right","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:l=>e.handleDelete(t.row.id,t.rowIndex)},{default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])):(0,o.Q3)("",!0)])),_:2},1024)):(0,o.Q3)("",!0),"table_name"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:1,style:{width:"70%"}},{default:(0,o.k6)((()=>[(0,o.bF)(d,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.table_name,"onUpdate:modelValue":e=>t.row.table_name=e,readonly:""!==t.row.id},null,8,["data-id","modelValue","onUpdate:modelValue","readonly"])])),_:2},1024)):(0,o.Q3)("",!0)],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","no-data-label","filter","filter-method"]),(0,o.bF)(g,{showing:e.loading},{default:(0,o.k6)((()=>[Be])),_:1},8,["showing"]),(0,o.bF)(w,{modelValue:e.addNewDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.addNewDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(b,{doc_type:e.doc_type},null,8,["doc_type"])])),_:1},8,["modelValue"])],64)}const Je={class:"text-weight-bold"},Ze={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},Ye={class:"full-width"},et=(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function tt(e,t,l,s,n,i){const r=(0,o.g2)("q-toolbar-title"),d=(0,o.g2)("q-btn"),u=(0,o.g2)("q-toolbar"),c=(0,o.g2)("q-input"),m=(0,o.g2)("q-card-section"),p=(0,o.g2)("q-card-actions"),_=(0,o.g2)("q-inner-loading"),h=(0,o.g2)("q-card"),g=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.Wv)(h,{style:{width:"600px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("form",{onSubmit:t[1]||(t[1]=(0,O.D$)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.bF)(u,{class:"secondary-toolbar"},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.Lk)("span",Je,(0,a.v_)(e.$t("create_new_table")),1)])),_:1}),(0,o.bo)((0,o.bF)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[g]])])),_:1}),(0,o.bF)(m,{class:"q-pt-none"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Ze,[(0,o.Lk)("div",Ye,[(0,o.bF)(c,{outlined:"",tabindex:"0",class:(0,a.C4)("full-width "),modelValue:e.new_model["table_name"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["table_name"]=t),label:e.$t("table_name"),hint:e.message,"error-message":e.new_model["name_error_msg"],error:e.new_model["name_error"]},null,8,["modelValue","label","hint","error-message","error"])])])])),_:1}),(0,o.bF)(p,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(d,{class:"highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[g]]),(0,o.bF)(d,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,o.bF)(_,{showing:e.loading},{default:(0,o.k6)((()=>[et])),_:1},8,["showing"])])),_:1})}var lt=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function n(e){try{r(o.next(e))}catch(t){s(t)}}function i(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?l(e.value):a(e.value).then(n,i)}r((o=o.apply(e,t||[])).next())}))};const ot=(0,o.pM)({el:"#app",mixins:[F.A],props:{doc_type:{type:String,default:""}},components:{},data(){return{message:Oe.i18n.t("field_only_characters")}},setup(){let e={};return{new_model:(0,A.KR)(e),token:(0,A.KR)(""),loading:(0,A.KR)(!1)}},watch:{},mounted(){this.setNewModel()},methods:{setNewModel(){this.new_model["table_name"]="",this.new_model["name_error"]=!1,this.new_model["name_error_msg"]=""},submitNewColumFrom(){return lt(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):(this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(e))}finally{this.loading=!1}}))},saveNewRow(){return lt(this,void 0,void 0,(function*(){let e,t=new FormData;t.append("table_name",this.new_model["table_name"]),t.append("doc_type_name",this.doc_type),t.append("is_default","false"),t.append("org_id",(0,X.I)());let l=yield(0,x.L3)();if(e=yield k.A.post(x.FH.create_document_table,t,{headers:{Authorization:l}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};const o=new CustomEvent("table_added",{detail:{data:e.data}});document.dispatchEvent(o),this.showSuccessToast("Table Created successfully"),this.setNewModel()}))},validateRow(e){let t=!0;return this.new_model["name_error"]=!1,this.new_model["name_error_msg"]="",e["table_name"]&&0!=e["table_name"].length?(0,U.Z9)(e["table_name"])?t:(this.new_model["name_error_msg"]="Field Name can only contain characters, numbers, hyphen and underscore",this.new_model["name_error"]=!0,!1):(this.new_model["name_error_msg"]="Table Name is required",this.new_model["name_error"]=!0,!1)},getToken(){return lt(this,void 0,void 0,(function*(){let e=this.token&&null!=this.token&&""!=this.token?this.token:yield(0,x.L3)();return e}))}}}),at=(0,G.A)(ot,[["render",tt]]),st=at;ne()(ot,"components",{QCard:z.A,QToolbar:B.A,QToolbarTitle:H.A,QBtn:J.A,QCardSection:Z.A,QInput:Y.A,QCardActions:le.A,QInnerLoading:oe.A}),ne()(ot,"directives",{ClosePopup:ae.A});var nt=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function n(e){try{r(o.next(e))}catch(t){s(t)}}function i(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?l(e.value):a(e.value).then(n,i)}r((o=o.apply(e,t||[])).next())}))};const it=(0,o.pM)({el:"#app",mixins:[F.A,$.A],props:{doc_type:{type:String,default:""},list_data:{}},components:{CreateTable:st},data(){return{}},setup(){let e=[];const t=(0,A.KR)(e);return{loading:(0,A.KR)(!1),columns:t,rows:(0,A.KR)(e),filter:(0,A.KR)(""),addNewDialog:(0,A.KR)(!1)}},watch:{list_data:{deep:!0,handler:function(e,t){setTimeout((()=>{this.prepareRows(e)}),0)}}},mounted:function(){this.prepareColumns(),this.prepareRows(this.list_data),document.addEventListener("table_added",this.recordAdded)},unmounted:function(){document.removeEventListener("table_added",this.recordAdded)},methods:{prepareListView(e){this.prepareRows(e)},prepareColumns(){this.columns.push(Object.assign({},{name:"table_name",label:this.$t("table"),field:"table_name",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(e){this.rows=[];for(let[t,l]of Object.entries(e)){const e=l;this.addNewRow(e)}},addNewRow(e){let t=Object.assign({},e);return this.rows.push(t),this.rows.length.toString()},scrollToBottom(){let e=document.querySelector(".tables-list");if(!e)return;let t=e.querySelector(".q-table__middle");t&&(t.scrollTop=t.scrollHeight)},handleDelete(e,t){return nt(this,void 0,void 0,(function*(){try{if(""===e)return;let l;this.loading=!0;let o=yield(0,x.L3)();if(l=yield k.A.delete((0,X.MV)(x.FH.delete_document_table+"/"+e),{headers:{Authorization:o}}),l.data&&l.data.hasOwnProperty("success")&&!1===l.data.success)throw{message:l.data.message};const a=new CustomEvent("table_deleted",{detail:{index:t}});document.dispatchEvent(a)}catch(l){throw logError(l),{message:this.$t("pages.messages.error_internal_occur")}}finally{this.loading=!1}}))},recordAdded(e){this.addNewDialog=!1,setTimeout((()=>{this.scrollToBottom()}),0)},customFilter(e,t){const l=t.toLowerCase();let o=e;return l&&""!==l?(o=e.filter(((e,t)=>{let o=!1;for(let[a,s]of Object.entries(e)){let e=s,t=e&&null!==e?e.toString():"";if(e=t.toLowerCase(),e.includes(l)){o=!0;break}}return o})),o):o}}}),rt=(0,G.A)(it,[["render",He],["__scopeId","data-v-2b03b170"]]),dt=rt;ne()(it,"components",{QTable:ce.A,QInput:Y.A,QIcon:ee.A,QSpace:me.A,QBtn:J.A,QTr:pe.A,QTd:_e.A,QTooltip:te.A,QInnerLoading:oe.A,QDialog:he.A,QField:be.A});var ut=l(68180);const ct=e=>((0,o.Qi)("data-v-37577a9d"),e=e(),(0,o.jt)(),e),mt={key:0,class:"q-ml-auto"},pt=ct((()=>(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1)));function _t(e,t,l,s,n,i){const r=(0,o.g2)("q-btn"),d=(0,o.g2)("q-space"),u=(0,o.g2)("q-icon"),c=(0,o.g2)("q-input"),m=(0,o.g2)("q-tooltip"),p=(0,o.g2)("q-td"),_=(0,o.g2)("q-select"),h=(0,o.g2)("q-tr"),g=(0,o.g2)("q-table"),b=(0,o.g2)("q-inner-loading"),w=(0,o.g2)("CreateRegex"),f=(0,o.g2)("q-dialog");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(g,{ref:"tableRef",style:{height:"360px"},class:(0,a.C4)("sticky-header-table regexes-list white-back"),rows:e.rows,columns:e.columns,"rows-per-page-options":[0],"row-key":"id",filter:e.filter,"no-data-label":e.$t("pages.messages.no_record_found"),"filter-method":e.customFilter},{top:(0,o.k6)((()=>[(0,o.bF)(r,{color:"primary",class:"mr-6",label:e.$t("add_new"),onClick:t[0]||(t[0]=t=>e.addNewDialog=!0)},null,8,["label"]),(0,o.bF)(d),(0,o.bF)(c,{outlined:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter=t)},{append:(0,o.k6)((()=>[(0,o.bF)(u,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,o.k6)((t=>[(0,o.bF)(h,{props:t,id:t.key},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.cols,(l=>((0,o.uX)(),(0,o.CE)(o.FK,{key:l.name},["action"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:0,style:{width:"12%"}},{default:(0,o.k6)((()=>[""!==t.row.id?((0,o.uX)(),(0,o.CE)("span",mt,["DEFAULT"!==t.row.org_id?((0,o.uX)(),(0,o.Wv)(r,{key:0,class:"float-right","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:l=>e.handleDelete(t.row,t.rowIndex)},{default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])),_:2},1024)):(0,o.Q3)("",!0),"regexValuePattern"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:1,style:{width:"70%"}},{default:(0,o.k6)((()=>[(0,o.bF)(c,{borderless:"",tabindex:"0","data-id":t.key,readonly:!0,class:(0,a.C4)("input-field "),modelValue:t.row.regexValuePattern,"onUpdate:modelValue":e=>t.row.regexValuePattern=e},null,8,["data-id","modelValue","onUpdate:modelValue"])])),_:2},1024)):(0,o.Q3)("",!0),"regexOrigin"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:2,style:{width:"20%"}},{default:(0,o.k6)((()=>[(0,o.bF)(_,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.regexOrigin,"onUpdate:modelValue":e=>t.row.regexOrigin=e,options:e.language_origin_list,readonly:!0,"emit-value":"","map-options":""},null,8,["data-id","modelValue","onUpdate:modelValue","options"])])),_:2},1024)):(0,o.Q3)("",!0)],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","filter","no-data-label","filter-method"]),(0,o.bF)(b,{showing:e.loading},{default:(0,o.k6)((()=>[pt])),_:1},8,["showing"]),(0,o.bF)(f,{modelValue:e.addNewDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.addNewDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(w,{doc_type:e.doc_type,language_origin_list:e.language_origin_list,rows:e.rows},null,8,["doc_type","language_origin_list","rows"])])),_:1},8,["modelValue"])],64)}const ht=(0,o.Lk)("span",{class:"text-weight-bold"},"Create New Regex",-1),gt={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},bt={class:"full-width"},wt={class:"row full-width"},ft={class:"full-width"},yt=(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function vt(e,t,l,s,n,i){const r=(0,o.g2)("q-toolbar-title"),d=(0,o.g2)("q-btn"),u=(0,o.g2)("q-toolbar"),c=(0,o.g2)("q-input"),m=(0,o.g2)("q-select"),p=(0,o.g2)("q-card-section"),_=(0,o.g2)("q-card-actions"),h=(0,o.g2)("q-inner-loading"),g=(0,o.g2)("q-card"),b=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.Wv)(g,{style:{width:"600px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,O.D$)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.bF)(u,{class:"secondary-toolbar"},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[ht])),_:1}),(0,o.bo)((0,o.bF)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[b]])])),_:1}),(0,o.bF)(p,{class:"q-pt-none"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",gt,[(0,o.Lk)("div",bt,[(0,o.bF)(c,{outlined:"",tabindex:"0",class:(0,a.C4)("full-width "),modelValue:e.new_model["regexValuePattern"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["regexValuePattern"]=t),placeholder:"Pattern","error-message":e.new_model["pattern_error_msg"],error:e.new_model["pattern_error"]},null,8,["modelValue","error-message","error"])])]),(0,o.Lk)("div",wt,[(0,o.Lk)("div",ft,[(0,o.bF)(m,{tabindex:"0",modelValue:e.new_model["regexOrigin"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.new_model["regexOrigin"]=t),"error-message":"Field is required",error:e.new_model["origin_error"],options:e.language_origin_list,"emit-value":"","map-options":""},null,8,["modelValue","error","options"])])])])),_:1}),(0,o.bF)(_,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(d,{class:"highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[b]]),(0,o.bF)(d,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("save")},null,8,["label"]),e.new_model["regex_validated"]?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(d,{key:0,color:"orange",class:"mr-6",label:e.$t("validate"),onClick:t[2]||(t[2]=t=>e.validatePattern())},null,8,["label"]))])),_:1})],32),(0,o.bF)(h,{showing:e.loading},{default:(0,o.k6)((()=>[yt])),_:1},8,["showing"])])),_:1})}var kt=l(73937),Ft=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function n(e){try{r(o.next(e))}catch(t){s(t)}}function i(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?l(e.value):a(e.value).then(n,i)}r((o=o.apply(e,t||[])).next())}))};const At=(0,o.pM)({el:"#app",mixins:[F.A],props:{doc_type:{type:String,default:""},language_origin_list:{type:Array,default:()=>[]},type:{type:String,default:"document"},rows:[]},components:{},data(){return{}},setup(){let e={};return{new_model:(0,A.KR)(e),token:(0,A.KR)(""),loading:(0,A.KR)(!1)}},watch:{},mounted(){this.setNewModel()},methods:{setNewModel(){this.new_model["regexType"]=this.doc_type,this.new_model["regexValuePattern"]="",this.new_model["regexOrigin"]="",this.new_model["org_id"]=(0,kt.Ky)("org_id"),this.new_model["regex_validated"]=!1,this.new_model["origin_error"]=!1,this.new_model["pattern_error"]=!1,this.new_model["pattern_error_msg"]=""},submitNewColumFrom(){return Ft(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):(this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(e))}finally{this.loading=!1}}))},saveNewRow(){return Ft(this,void 0,void 0,(function*(){let e,t=yield(0,x.L3)(),l=JSON.parse(JSON.stringify(this.rows));l.push(this.new_model);let o=new FormData;if(o.append("data",JSON.stringify(l)),o.append("org_id",(0,X.I)()),e=yield k.A.post(x.FH.post_data_fellowkv+(0,x.CW)(this.type),o,{headers:{Authorization:t}}),!1===e.data.success)throw{message:e.data.message};const a=new CustomEvent("regex_added",{detail:{}});document.dispatchEvent(a)}))},validateRow(e){let t=!1;return this.resetErrors(),this.isPatternEmpty(e)?t=!0:this.new_model["regex_validated"]||(t=!0,this.new_model["pattern_error_msg"]="Please validate Pattern",this.new_model["pattern_error"]=!0),e["regexOrigin"]&&0!=e["regexOrigin"].length||(this.new_model["origin_error"]=!0,t=!0),!t},isPatternEmpty(e){let t=!1;return e["regexValuePattern"]&&0!=e["regexValuePattern"].length||(t=!0,this.new_model["pattern_error_msg"]="Pattern is required",this.new_model["pattern_error"]=!0),t},resetErrors(){this.new_model["pattern_error"]=!1,this.new_model["pattern_error_msg"]="",this.new_model["origin_error"]=!1},validatePattern(){return Ft(this,void 0,void 0,(function*(){try{if(this.resetErrors(),this.isPatternEmpty(this.new_model))return;let e;this.loading=!0;let t=yield(0,x.L3)(),l=new FormData;if(l.append("patterns",JSON.stringify(this.getValidatePatternData())),l.append("org_id",(0,X.I)()),e=yield k.A.post(x.FH.validate_patterns,l,{headers:{Authorization:t}}),!1===e.data.success)throw{message:e.data.message};this.updateRows(e.data.data)}catch(e){logError(e),this.showErrorToast("Something went wrong while loading data. Please try again.")}finally{this.loading=!1}}))},updateRows(e){for(let[t,l]of Object.entries(e)){const e=!1!==l;this.new_model["regex_validated"]=e,!1===e&&(this.new_model["pattern_error_msg"]="Valid pattern is required",this.new_model["pattern_error"]=!0)}},getValidatePatternData(){let e=[];const t=this.new_model["regexValuePattern"]&&""!==this.new_model["regexValuePattern"]?this.new_model["regexValuePattern"].toString():"";return e.push(t),e},getToken(){return Ft(this,void 0,void 0,(function*(){let e=this.token&&null!=this.token&&""!=this.token?this.token:yield(0,x.L3)();return e}))}}}),Lt=(0,G.A)(At,[["render",vt]]),xt=Lt;ne()(At,"components",{QCard:z.A,QToolbar:B.A,QToolbarTitle:H.A,QBtn:J.A,QCardSection:Z.A,QInput:Y.A,QSelect:ge.A,QCardActions:le.A,QInnerLoading:oe.A}),ne()(At,"directives",{ClosePopup:ae.A});var qt=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function n(e){try{r(o.next(e))}catch(t){s(t)}}function i(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?l(e.value):a(e.value).then(n,i)}r((o=o.apply(e,t||[])).next())}))};const Ct=(0,o.pM)({el:"#app",mixins:[F.A],props:{doc_type:{type:String,default:""},list_data:[],language_origin_list:{type:Array,default:()=>[]}},components:{CreateRegex:xt},data(){return{}},setup(){let e=[];const t=(0,A.KR)(e);return{loading:(0,A.KR)(!1),columns:t,rows:(0,A.KR)(e),filter:(0,A.KR)(""),addNewDialog:(0,A.KR)(!1)}},watch:{list_data:{deep:!0,handler:function(e,t){setTimeout((()=>{this.prepareRows(e)}),0)}}},mounted:function(){this.prepareColumns(),this.prepareRows(this.list_data),document.addEventListener("regex_added",this.recordAdded)},unmounted:function(){document.removeEventListener("regex_added",this.recordAdded)},methods:{prepareListView(e){this.prepareRows(e)},prepareColumns(){this.columns.push(Object.assign({},{name:"regexOrigin",label:this.$t("origin"),field:"regexOrigin",align:"left"})),this.columns.push(Object.assign({},{name:"regexValuePattern",label:this.$t("pattern"),field:"regexValuePattern",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(e){this.rows=[];for(let[t,l]of Object.entries(e)){const e=l;this.addNewRow(e)}},addNewRow(e){let t=Object.assign({},e);return this.rows.push(t),this.rows.length.toString()},scrollToBottom(){let e=document.querySelector(".regexes-list");if(!e)return;let t=e.querySelector(".q-table__middle");t&&(t.scrollTop=t.scrollHeight)},handleDelete(e,t){return qt(this,void 0,void 0,(function*(){try{let e;this.loading=!0,this.rows[t].is_deleted=!0;let l=yield(0,x.L3)(),o=new FormData;if(o.append("data",JSON.stringify(this.rows)),o.append("org_id",(0,X.I)()),e=yield k.A.post(x.FH.post_data_fellowkv+(0,x.CW)(this.type),o,{headers:{Authorization:l}}),!1===e.data.success)throw{message:e.data.message};const a=new CustomEvent("regex_deleted",{detail:{index:t}});document.dispatchEvent(a)}catch(e){throw logError(e),{message:this.$t("pages.messages.error_internal_occur")}}finally{this.loading=!1}}))},recordAdded(e){this.addNewDialog=!1},customFilter(e,t){const l=t.toLowerCase();let o=e;return l&&""!==l?(o=e.filter(((e,t)=>{let o=!1;for(let[a,s]of Object.entries(e)){let e=s,t=e&&null!==e?e.toString():"";if(e=t.toLowerCase(),e.includes(l)){o=!0;break}}return o})),o):o}}}),Vt=(0,G.A)(Ct,[["render",_t],["__scopeId","data-v-37577a9d"]]),Tt=Vt;ne()(Ct,"components",{QTable:ce.A,QBtn:J.A,QSpace:me.A,QInput:Y.A,QIcon:ee.A,QTr:pe.A,QTd:_e.A,QTooltip:te.A,QSelect:ge.A,QInnerLoading:oe.A,QDialog:he.A,QField:be.A});const Qt={class:"container no-padding"},Rt={class:"row full-width secondary-c-text q-pt-md q-pb-md"},Et={class:"col-6 pl-20"},Dt={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},Nt={class:"col-6 pr-22"};function $t(e,t,l,s,n,i){const r=(0,o.g2)("q-icon"),d=(0,o.g2)("q-btn");return(0,o.uX)(),(0,o.CE)("div",Qt,[(0,o.Lk)("div",Rt,[(0,o.Lk)("div",Et,[(0,o.bF)(d,{flat:"",rounded:"",color:"primary",to:e.back_to_rotue},{default:(0,o.k6)((()=>[(0,o.bF)(r,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,o.Lk)("label",Dt,(0,a.v_)(e.$t("back_to_list")),1)])),_:1},8,["to"])]),(0,o.Lk)("div",Nt,[(0,o.RG)(e.$slots,"default"),e.create_new_btn?((0,o.uX)(),(0,o.Wv)(d,{key:0,color:"primary",class:"float-right q-ml-sm",icon:"add",to:e.create_new_btn,label:e.$t("new")},null,8,["to","label"])):(0,o.Q3)("",!0)])])])}const Ot=(0,o.pM)({props:{back_to_rotue:{type:String,default:"/settings/document"},create_new_btn:{type:String,default:""}}}),St=(0,G.A)(Ot,[["render",$t]]),Kt=St;ne()(Ot,"components",{QBtn:J.A,QIcon:ee.A});var jt=l(78431);const It=e=>((0,o.Qi)("data-v-035e868d"),e=e(),(0,o.jt)(),e),Pt={key:0,class:"q-ml-auto"},Ut=It((()=>(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1)));function Xt(e,t,l,s,n,i){const r=(0,o.g2)("q-icon"),d=(0,o.g2)("q-input"),u=(0,o.g2)("q-space"),c=(0,o.g2)("q-btn"),m=(0,o.g2)("q-tooltip"),p=(0,o.g2)("q-td"),_=(0,o.g2)("q-select"),h=(0,o.g2)("q-tr"),g=(0,o.g2)("q-table"),b=(0,o.g2)("q-inner-loading"),w=(0,o.g2)("CreateColumn"),f=(0,o.g2)("q-dialog");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(g,{ref:"tableRef",style:{height:"360px"},class:(0,a.C4)("table-columns-list"),rows:e.rows,columns:e.columns,"no-data-label":e.$t("pages.messages.no_record_found"),"rows-per-page-options":[0],"row-key":"id",filter:e.filter,"filter-method":e.customFilter},{top:(0,o.k6)((()=>[(0,o.bF)(d,{dense:"",outlined:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t)},{append:(0,o.k6)((()=>[(0,o.bF)(r,{name:"search"})])),_:1},8,["modelValue"]),(0,o.bF)(u),(0,o.bF)(c,{color:"primary",class:"mr-6",label:e.$t("add_new"),onClick:t[1]||(t[1]=t=>e.addNewDialog=!0)},null,8,["label"])])),body:(0,o.k6)((t=>[(0,o.bF)(h,{props:t,id:t.key},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.cols,(l=>((0,o.uX)(),(0,o.CE)(o.FK,{key:l.name},["action"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:0,style:{width:"12%"}},{default:(0,o.k6)((()=>[""!==t.row.id?((0,o.uX)(),(0,o.CE)("span",Pt,["DEFAULT"!==t.row.org_id?((0,o.uX)(),(0,o.Wv)(c,{key:0,class:"float-right","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:l=>e.handleDelete(t.row,t.rowIndex)},{default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])),_:2},1024)):(0,o.Q3)("",!0),"column_name"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:1,style:{width:"70%"}},{default:(0,o.k6)((()=>[(0,o.bF)(d,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.column_name,"onUpdate:modelValue":e=>t.row.column_name=e,readonly:""!==t.row.id},null,8,["data-id","modelValue","onUpdate:modelValue","readonly"])])),_:2},1024)):(0,o.Q3)("",!0),"table_name"===l.name?((0,o.uX)(),(0,o.Wv)(p,{key:2,style:{width:"70%"}},{default:(0,o.k6)((()=>[(0,o.bF)(_,{borderless:"",tabindex:"0","data-id":t.key,modelValue:t.row.table_name,"onUpdate:modelValue":e=>t.row.table_name=e,readonly:""!==t.row.id,options:e.tables_list,"emit-value":"","map-options":""},null,8,["data-id","modelValue","onUpdate:modelValue","readonly","options"])])),_:2},1024)):(0,o.Q3)("",!0)],64)))),128))])),_:2},1032,["props","id"])])),_:1},8,["rows","columns","no-data-label","filter","filter-method"]),(0,o.bF)(b,{showing:e.loading},{default:(0,o.k6)((()=>[Ut])),_:1},8,["showing"]),(0,o.bF)(f,{modelValue:e.addNewDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.addNewDialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(w,{doc_type:e.doc_type,columns_list:e.columns_list,tables_list:e.tables_list},null,8,["doc_type","columns_list","tables_list"])])),_:1},8,["modelValue"])],64)}const Wt=(0,o.Lk)("span",{class:"text-weight-bold"},"Create New Column",-1),Mt={style:{"margin-bottom":"20px"},class:"row full-width mb-10 mt-8"},Gt={class:"full-width"},zt={class:"row full-width"},Bt={class:"full-width"},Ht={class:"row full-width"},Jt={class:"full-width"},Zt={class:"row full-width"},Yt={class:"full-width"},el=(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1);function tl(e,t,l,s,n,i){const r=(0,o.g2)("q-toolbar-title"),d=(0,o.g2)("q-btn"),u=(0,o.g2)("q-toolbar"),c=(0,o.g2)("q-input"),m=(0,o.g2)("q-checkbox"),p=(0,o.g2)("q-icon"),_=(0,o.g2)("q-item-label"),h=(0,o.g2)("q-item-section"),g=(0,o.g2)("q-item"),b=(0,o.g2)("q-select"),w=(0,o.g2)("q-card-section"),f=(0,o.g2)("q-card-actions"),y=(0,o.g2)("q-inner-loading"),v=(0,o.g2)("q-card"),k=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.Wv)(v,{style:{width:"600px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,O.D$)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"]))},[(0,o.bF)(u,{class:"secondary-toolbar"},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[Wt])),_:1}),(0,o.bo)((0,o.bF)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[k]])])),_:1}),(0,o.bF)(w,{class:"q-pt-none"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Mt,[(0,o.Lk)("div",Gt,[(0,o.bF)(c,{label:"Title*",modelValue:e.new_model["title"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_model["title"]=t),hint:"Only use Words and numbers",outlined:"",class:"full-width"},null,8,["modelValue"])])]),(0,o.Lk)("div",zt,[(0,o.Lk)("div",Bt,[(0,o.bF)(m,{label:e.$t("is_it_required"),modelValue:e.new_model["column_required"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.new_model["column_required"]=t),size:"30px"},null,8,["label","modelValue"])])]),(0,o.Lk)("div",Ht,[(0,o.Lk)("div",Jt,[(0,o.bF)(b,{modelValue:e.new_model["type"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.new_model["type"]=t),class:"col-sm-6 col-md-6 col-lg-6",options:e.column_type,label:e.$t("select_column_type")+"*","emit-value":"","map-options":"","error-message":"Field is required",error:e.new_model["type_error"]},{append:(0,o.k6)((()=>[(0,o.bF)(p,{name:"close",onClick:t[2]||(t[2]=(0,O.D$)((t=>e.new_model["type"]=""),["stop"])),class:"cursor-pointer"})])),option:(0,o.k6)((e=>[(0,o.bF)(g,(0,a._B)((0,o.Ng)(e.itemProps)),{default:(0,o.k6)((()=>[(0,o.bF)(h,null,{default:(0,o.k6)((()=>[(0,o.bF)(_,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","label","error"])])]),(0,o.Lk)("div",Zt,[(0,o.Lk)("div",Yt,[(0,o.bF)(b,{tabindex:"0",modelValue:e.new_model["table_name"],"onUpdate:modelValue":t[4]||(t[4]=t=>e.new_model["table_name"]=t),"error-message":"Field is required",error:e.new_model["table_name_error"],options:e.tables_list,"emit-value":"","map-options":""},null,8,["modelValue","error","options"])])])])),_:1}),(0,o.bF)(f,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(d,{class:"highlighted-back",label:e.$t("cancel")},null,8,["label"]),[[k]]),(0,o.bF)(d,{type:"submit",color:"primary",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1})],32),(0,o.bF)(y,{showing:e.loading},{default:(0,o.k6)((()=>[el])),_:1},8,["showing"])])),_:1})}var ll=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function n(e){try{r(o.next(e))}catch(t){s(t)}}function i(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?l(e.value):a(e.value).then(n,i)}r((o=o.apply(e,t||[])).next())}))};const ol=(0,o.pM)({el:"#app",mixins:[F.A],props:{doc_type:{type:String,default:""},tables_list:[],columns_list:{}},components:{},data(){return{column_type:[{label:"Select Type",value:""},{label:this.$t("amount"),value:"AMOUNT"},{label:"STRING",value:"STRING"},{label:this.$t("invoice_date"),value:"DATE"},{label:this.$t("number"),value:"NUMBER"},{label:"BOOLEAN",value:"BOOLEAN"},{label:this.$t("currency"),value:"CURRENCY"}]}},setup(){let e={};return{new_model:(0,A.KR)(e),token:(0,A.KR)(""),data_types:(0,A.KR)([]),loading:(0,A.KR)(!1)}},watch:{},mounted(){this.setNewModel()},methods:{setNewModel(){this.new_model["column_required"]=!1,this.new_model["title"]="",this.new_model["type"]="",this.new_model["table_name"]="",this.new_model["type_error"]=!1,this.new_model["title_error"]=!1,this.new_model["table_name_error"]=!1,this.new_model["title_error_msg"]=""},submitNewColumFrom(){return ll(this,void 0,void 0,(function*(){try{if(!this.validateRow(this.new_model))return;this.loading=!0,yield this.saveNewRow()}catch(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("message")?void this.showErrorToast(e.message):(this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(e))}finally{this.loading=!1}}))},saveNewRow(){return ll(this,void 0,void 0,(function*(){let e;this.setColumnName();let t=new FormData;t.append("column_name",this.new_model["column_name"]),t.append("column_type",this.new_model["type"]),t.append("title",this.new_model["title"]),t.append("is_required",this.new_model["column_required"]),t.append("table_name",this.new_model["table_name"]),t.append("org_id",(0,X.I)());let l=yield this.getToken();if(e=yield k.A.post(x.FH.create_table_column,t,{headers:{Authorization:l}}),!1===e.data.success)throw{message:e.data.message};this.showSuccessToast("Column Created successfully"),this.new_model["id"]=e.data.data.id;const o=new CustomEvent("column_added",{detail:{data:this.new_model}});document.dispatchEvent(o)}))},validateRow(e){let t=!1;this.new_model["title_error"]=!1,this.new_model["type_error"]=!1,this.new_model["title_error_msg"]="",this.new_model["table_name_error"]=!1;let l=e["title"].replace(/[^0-9a-zA-Z_ ]/g,"").toUpperCase();return e["title"]&&0!=e["title"].length?(0,U.mK)(e["title"])?this.columns_list.hasOwnProperty(l)&&(this.new_model["title_error_msg"]="Title already exists",t=!0,this.new_model["title_error"]=!0):(this.new_model["title_error_msg"]="Title can only contain characters, numbers",t=!0,this.new_model["title_error"]=!0):(t=!0,this.new_model["title_error_msg"]="Title is required",this.new_model["title_error"]=!0),e["type"]&&0!=e["type"].length||(this.new_model["type_error"]=!0),e["table_name"]&&0!=e["table_name"].length||(this.new_model["table_name_error"]=!0),!t},setColumnName(){this.new_model["column_name"]="";let e=this.new_model["title"];this.new_model["column_name"]=e.replace(/[^0-9a-zA-Z_ ]/g,"").toUpperCase()},getToken(){return ll(this,void 0,void 0,(function*(){let e=this.token&&null!=this.token&&""!=this.token?this.token:yield(0,x.L3)();return e}))}}});var al=l(90124),sl=l(25173),nl=l(13796);const il=(0,G.A)(ol,[["render",tl]]),rl=il;ne()(ol,"components",{QCard:z.A,QToolbar:B.A,QToolbarTitle:H.A,QBtn:J.A,QCardSection:Z.A,QInput:Y.A,QCheckbox:je.A,QSelect:ge.A,QIcon:ee.A,QItem:al.A,QItemSection:sl.A,QItemLabel:nl.A,QCardActions:le.A,QInnerLoading:oe.A}),ne()(ol,"directives",{ClosePopup:ae.A});var dl=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function n(e){try{r(o.next(e))}catch(t){s(t)}}function i(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?l(e.value):a(e.value).then(n,i)}r((o=o.apply(e,t||[])).next())}))};const ul=(0,o.pM)({el:"#app",mixins:[F.A,$.A],props:{doc_type:{type:String,default:""},list_data:{},tables:[]},components:{CreateColumn:rl},data(){return{}},setup(){let e=[];const t=(0,A.KR)(e);let l={};return{loading:(0,A.KR)(!1),columns:t,rows:(0,A.KR)(e),filter:(0,A.KR)(""),addNewDialog:(0,A.KR)(!1),columns_list:(0,A.KR)(l),tables_list:(0,A.KR)([])}},watch:{list_data:{deep:!0,handler:function(e,t){setTimeout((()=>{this.prepareRows(e)}),0)}}},mounted:function(){this.prepareColumns(),this.prepareRows(this.list_data),this.prepareTableList(),document.addEventListener("column_added",this.recordAdded)},unmounted:function(){document.removeEventListener("column_added",this.recordAdded)},methods:{prepareTableList(){this.tables_list=[],this.tables_list.push(Object.assign({},{value:"",label:this.$t("select_table")}));for(let[e,t]of Object.entries(this.tables)){const e=t;this.tables_list.push(Object.assign({},{value:e.table_name,label:e.table_name}))}},prepareListView(e){this.prepareRows(e)},prepareColumns(){this.columns.push(Object.assign({},{name:"column_name",label:this.$t("column_name"),field:"column_name",align:"left"})),this.columns.push(Object.assign({},{name:"table_name",label:this.$t("table_name"),field:"table_name",align:"left"})),this.columns.push(Object.assign({},{name:"action",label:this.$t("action"),field:"action",align:"right"}))},prepareRows(e){this.rows=[];for(let[t,l]of Object.entries(e)){const e=l;this.addNewRow(e),e&&e.hasOwnProperty("column_name")&&this.addToColumnList(e.column_name)}},addNewRow(e){let t=Object.assign({},e);return this.rows.push(t),this.rows.length.toString()},addToColumnList(e){this.columns_list[e]=e},scrollToBottom(){let e=document.querySelector(".table-columns-list");if(!e)return;let t=e.querySelector(".q-table__middle");t&&(t.scrollTop=t.scrollHeight)},handleDelete(e,t){return dl(this,void 0,void 0,(function*(){try{let l;this.loading=!0;let o=yield(0,x.L3)();if(l=yield k.A.delete((0,X.MV)(x.FH.delete_table_column+"/"+e.id),{headers:{Authorization:o}}),!l.data.success||!0!==l.data.success)throw l.data.message?l.data.message:{message:"Response dont have table_data index/success is set to false"};const a=new CustomEvent("column_deleted",{detail:{index:t}});document.dispatchEvent(a)}catch(l){throw logError(l),{message:this.$t("pages.messages.error_internal_occur")}}finally{this.loading=!1}}))},recordAdded(e){this.addNewDialog=!1,setTimeout((()=>{this.scrollToBottom()}),0)},customFilter(e,t){const l=t.toLowerCase();let o=e;return l&&""!==l?(o=e.filter(((e,t)=>{let o=!1;for(let[a,s]of Object.entries(e)){let e=s,t=e&&null!==e?e.toString():"";if(e=t.toLowerCase(),e.includes(l)){o=!0;break}}return o})),o):o}}}),cl=(0,G.A)(ul,[["render",Xt],["__scopeId","data-v-035e868d"]]),ml=cl;ne()(ul,"components",{QTable:ce.A,QInput:Y.A,QIcon:ee.A,QSpace:me.A,QBtn:J.A,QTr:pe.A,QTd:_e.A,QTooltip:te.A,QSelect:ge.A,QInnerLoading:oe.A,QDialog:he.A,QField:be.A});var pl=function(e,t,l,o){function a(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,s){function n(e){try{r(o.next(e))}catch(t){s(t)}}function i(e){try{r(o["throw"](e))}catch(t){s(t)}}function r(e){e.done?l(e.value):a(e.value).then(n,i)}r((o=o.apply(e,t||[])).next())}))};const _l=(0,o.pM)({el:"#app",mixins:[F.A,L.A],components:{TrainingList:jt.A,Groups:fe,Fields:Me,TableColumns:ml,Regexes:Tt,BackToDocuments:Kt,Tables:dt,Loader:D.A,SubHeader:ut.A},data(){return{}},setup(){let e={doc_type:"auto",has_table:!1,id:"",name:"",doc_type_name:""};const t=(0,N.cY)(),{resetDocTypesSubDocTypes:l}=t;return{resetDocTypesSubDocTypes:l,step1_model:(0,A.KR)(e),step:(0,A.KR)("doc"),done_steps:(0,A.KR)({}),step_labels:(0,A.KR)({}),error_model:(0,A.KR)({doc_name:""}),language_origin_list:(0,A.KR)([]),training_doc_count:(0,A.KR)(0),training_doc_limit:10,fields_count:(0,A.KR)(0),tab:(0,A.KR)("groups"),sample_files:(0,A.KR)([]),groups:(0,A.KR)([]),fields:(0,A.KR)([]),doc_type:(0,A.KR)(""),regexes:(0,A.KR)([]),regex_limit:2,tables:(0,A.KR)([]),table_columns:(0,A.KR)([]),table_column_tab:(0,A.KR)("tables"),loading:(0,A.KR)(!1)}},watch:{doc_type:{handler:function(e,t){this.fetchSamplesFiles(),this.fetchGroups(),this.fetchFields(),this.getDocumentTypeRegexes(),this.fetchTables(),this.fetchTableColumns()}}},mounted(){this.prepareSteps(),this.handleLanguageOptions(),document.addEventListener("group_added",this.groupAdded),document.addEventListener("group_deleted",this.groupDeleted),document.addEventListener("field_added",this.fieldAdded),document.addEventListener("field_deleted",this.fieldDeleted),document.addEventListener("refresh_sample_data",this.refreshSampleData),document.addEventListener("sample_file_delete",this.sampleFileDeleted),document.addEventListener("table_added",this.tableAdded),document.addEventListener("table_deleted",this.tableDeleted),document.addEventListener("regex_added",this.regexAdded),document.addEventListener("regex_deleted",this.regexDeleted),document.addEventListener("column_added",this.tableColumnAdded),document.addEventListener("column_deleted",this.tableColumnDeleted),document.addEventListener("fetch_Groups_Fields_event",this.getGroupsAndFields)},unmounted:function(){document.removeEventListener("refresh_sample_data",this.refreshSampleData),document.removeEventListener("sample_file_delete",this.sampleFileDeleted),document.removeEventListener("group_added",this.groupAdded),document.removeEventListener("group_deleted",this.groupDeleted),document.removeEventListener("field_added",this.fieldAdded),document.removeEventListener("field_deleted",this.fieldDeleted),document.removeEventListener("table_added",this.tableAdded),document.removeEventListener("table_deleted",this.tableDeleted),document.removeEventListener("regex_added",this.regexAdded),document.removeEventListener("regex_deleted",this.regexAdded),document.removeEventListener("column_added",this.tableColumnAdded),document.removeEventListener("column_deleted",this.tableColumnDeleted),document.removeEventListener("fetch_Groups_Fields_event",this.getGroupsAndFields)},methods:{handleLanguageOptions(){return pl(this,void 0,void 0,(function*(){yield this.fetchLanguageOptions()}))},fetchLanguageOptions(){return pl(this,void 0,void 0,(function*(){let e;try{let t=yield(0,x.L3)();e=yield k.A.get((0,X.MV)(x.FH.get_items_from_dictionary+"DOC_ORIGIN"),{headers:{Authorization:t}})}catch(t){return this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(t)}if(e.data&&0!==Object.keys(e.data).length){this.language_origin_list=[],this.language_origin_list.push(Object.assign({},{value:"",label:this.$t("amount_date_format_select")}));for(const t in e.data){let l=e.data[t],o=l.description?l.description:"";this.language_origin_list.push(Object.assign({},{value:l.value,label:l.label,locale:l.locale,description:o.replaceAll("\\n","<br />")}))}}}))},validateAndNext(){return pl(this,void 0,void 0,(function*(){try{if(this.loading=!0,"doc"!=this.step||this.isDocStep1Saved()||(this.validateDocCreateForm(),yield this.saveDocumnetType(),yield this.resetDocTypesSubDocTypes()),"upload"==this.step&&this.sample_files.length<this.training_doc_limit)throw{message:this.$t("pages.messages.ERROR_UPLOAD")+this.training_doc_limit+this.$t("pages.messages.ERROR_UPLOAD_2")};if("regex"==this.step&&this.regexes.length<this.regex_limit)throw{message:this.$t("pages.messages.ERROR_PATTERN_REQUIRED")};if("fields_groups"==this.step&&this.fields.length<1)throw{message:this.$t("pages.messages.ERROR_CREATE_FIELDS")};let e=this.$refs["stepper"];const t=this.wizardNextButtonLabel(),l="finsih"===t;l&&this.$router.push("/settings/document"),e&&(this.done_steps[this.step]=!0,e.next())}catch(e){if(logError(e),null!=e&&"object"==typeof e&&e.hasOwnProperty("message"))return void this.showErrorToast(e.message)}finally{this.loading=!1}}))},isDocStep1Saved(){return""!==this.step1_model["id"]},validateDocCreateForm(){let e=!0;if(this.error_model["doc_name"]="",this.step1_model["name"]&&0!=this.step1_model["name"].length||(this.error_model["doc_name"]="Field is Required",e=!1),(0,U.oI)(this.step1_model["name"])||(this.error_model["doc_name"]=this.$t("only_characters_numbers"),e=!1),!e)throw"Step 1 failed"},prepareSteps(){setTimeout((()=>{this.step_labels={doc:this.$t("create_doc"),upload:this.$t("upload_training_doc"),regex:this.$t("create_regex"),fields_groups:this.$t("create_fields_groups"),table_columns:this.$t("table_columns")}}),10),this.done_steps={doc:!1,upload:!1,regex:!1,fields_groups:!1,table_columns:!1}},saveDocumnetType(){return pl(this,void 0,void 0,(function*(){this.step1_model["doc_type_name"]=(0,U.GX)(this.step1_model["name"]);let e,t=new FormData;t.append("doc_type_name",this.step1_model["doc_type_name"]),t.append("has_table",this.step1_model["has_table"].toString()),t.append("title",this.step1_model["name"]),t.append("org_id",(0,X.I)());let l=yield(0,x.L3)();if(e=yield k.A.post(x.FH.create_document_type,t,{headers:{Authorization:"Bearer "+l}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};this.step1_model["document_key"]=e.data.document_key,this.step1_model["doc_type_name"]=e.data.document_name,this.step1_model["id"]=e.data.id,this.doc_type=this.step1_model["doc_type_name"]}))},getDocTypeName(){return this.step1_model["doc_type_name"]},getDocTypeKey(){return this.step1_model["document_key"]},setFieldsCount(e){e&&(this.fields_count=e.detail)},wizardNextButtonLabel(){let e="next";return"fields_groups"===this.step&&!1===this.step1_model["has_table"]&&(e="finsih"),"table_columns"===this.step&&!0===this.step1_model["has_table"]&&(e="finsih"),e},refreshSampleData(){this.fetchSamplesFiles()},sampleFileDeleted(e){if(!e||!e.detail)return;let t=e.detail;for(let[l,o]of Object.entries(this.sample_files)){const e=o;e.id===t&&this.sample_files.splice(l,1)}},fetchSamplesFiles(){return pl(this,void 0,void 0,(function*(){let e;try{if((0,U.jw)(this.getDocTypeName()))return;let t=new FormData;t.append("doc_type",this.getDocTypeKey()),t.append("org_id",(0,X.I)());let l=yield(0,x.L3)();if(e=yield k.A.post(x.FH.get_sample_documents_trainer,t,{headers:{Authorization:l}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};let o=[];for(let[a,s]of Object.entries(e.data)){const e=s;let t=Object.assign({},e);o.push(t)}this.sample_files=o}catch(t){throw logError(t),{message:this.$t("pages.messages.error_internal_occur")}}}))},groupAdded(e){e&&e.detail&&this.groups.push(e.detail.data)},groupDeleted(e){if(!e||!e.detail)return;let t=e.detail.index;this.groups.splice(t,1),this.fetchFields()},fetchGroups(){return pl(this,void 0,void 0,(function*(){let e;try{if((0,U.jw)(this.doc_type))return;let t=yield(0,x.L3)();if(e=yield k.A.get((0,X.MV)(x.FH.get_document_field_groups+"?doc_type_name="+this.getDocTypeName()),{headers:{Authorization:t}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};let l=new Map,o=[];for(let[a,s]of Object.entries(e.data.data)){const e=s;let t=Object.assign({},e);o.push(t),l.set(t.id,t)}o=[],l.forEach(((e,t)=>{o.push(e)})),this.groups=o}catch(t){throw logError(t),{message:this.$t("pages.messages.error_internal_occur")}}}))},getGroupsAndFields(e){this.fetchGroups(),this.fetchFields()},fieldAdded(e){e&&e.detail&&this.fields.push(e.detail.data)},fieldDeleted(e){if(!e||!e.detail)return;let t=e.detail.index;this.fields.splice(t,1)},fetchFields(){return pl(this,void 0,void 0,(function*(){let e;try{if((0,U.jw)(this.doc_type))return;let t=yield(0,x.L3)();if(e=yield k.A.get((0,X.MV)(x.FH.get_field_settings_by_type),{params:{doc_type:this.getDocTypeKey(),profile:""},headers:{Authorization:t}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};let l=e.data.field_setting,o=[];Array.from(l).forEach((e=>{Array.from(e.rows).forEach((t=>{Array.from(t).forEach((t=>{t["group_name"]=e.name,t["field_type"]=t.field_type.toUpperCase();let l=Object.assign({},t);o.push(l)}))}))})),this.fields=o}catch(t){throw logError(t),{message:this.$t("pages.messages.error_internal_occur")}}}))},regexAdded(e){this.getDocumentTypeRegexes()},regexDeleted(e){if(!e||!e.detail)return;let t=e.detail.index;this.regexes.splice(t,1)},getDocumentTypeRegexes(){return pl(this,void 0,void 0,(function*(){if((0,U.jw)(this.getDocTypeName()))throw{message:"Document Type is missing"};let e;this.loading=!0,this.regexes=[];let t=yield(0,x.L3)(),l=new FormData,o={regexType:this.getDocTypeName()};if(l.append("data",JSON.stringify(o)),l.append("org_id",(0,X.I)()),e=yield k.A.post(x.FH.post_data_fellowkv+x.FH.get_document_type_regexes,l,{headers:{Authorization:t}}),!e.data)throw{message:"No Data return from api"};if(e.data.hasOwnProperty("message"))throw e.data;e.data.forEach(((e,t)=>{this.regexes.push(e)})),this.loading=!1}))},tableAdded(e){e&&e.detail&&this.tables.push(e.detail.data)},tableDeleted(e){if(!e||!e.detail)return;let t=e.detail.index;this.tables.splice(t,1)},fetchTables(){return pl(this,void 0,void 0,(function*(){let e;try{if((0,U.jw)(this.doc_type))return;let t=yield(0,x.L3)();if(e=yield k.A.get((0,X.MV)(x.FH.get_document_tables+"?doc_type="+this.getDocTypeKey()),{headers:{Authorization:t}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};let l=[];for(let[o,a]of Object.entries(e.data.data)){const e=a;let t=Object.assign({},e);l.push(t)}this.tables=l}catch(t){throw logError(t),{message:this.$t("pages.messages.error_internal_occur")}}}))},tableColumnAdded(e){e&&e.detail&&this.table_columns.push(e.detail.data)},tableColumnDeleted(e){if(!e||!e.detail)return;let t=e.detail.index;this.table_columns.splice(t,1)},fetchTableColumns(){return pl(this,void 0,void 0,(function*(){let e;try{if((0,U.jw)(this.doc_type))return;let t=yield(0,x.L3)();if(e=yield k.A.get((0,X.MV)(x.FH.get_document_tables_with_columns+"?doc_type="+this.getDocTypeKey()),{headers:{Authorization:t}}),e.data&&e.data.hasOwnProperty("success")&&!1===e.data.success)throw{message:e.data.message};let l=[];for(let[o,a]of Object.entries(e.data.data)){const e=a;for(let[t,a]of Object.entries(e)){const e=a;let t=Object.assign({},e);t["table_name"]=o,l.push(t)}}this.table_columns=l}catch(t){throw logError(t),{message:this.$t("pages.messages.error_internal_occur")}}}))}}});var hl=l(37222),gl=l(78577),bl=l(49200),wl=l(42980),fl=l(10327),yl=l(10386),vl=l(39041),kl=l(71746);const Fl=(0,G.A)(_l,[["render",v],["__scopeId","data-v-01362b3b"]]),Al=Fl;ne()(_l,"components",{QStepper:hl.A,QStep:gl.A,QForm:bl.A,QInput:Y.A,QIcon:ee.A,QTooltip:te.A,QCheckbox:je.A,QBtn:J.A,QTabs:wl.A,QTab:fl.A,QSeparator:yl.A,QTabPanels:vl.A,QTabPanel:kl.A,QInnerLoading:oe.A})}}]);