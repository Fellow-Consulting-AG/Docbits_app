"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[8731],{48731:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ks});var a=s(61758),i=s(58790),n=s(29104);const o=e=>((0,a.Qi)("data-v-02bfa9a9"),e=e(),(0,a.jt)(),e),r={key:0},l={key:0,class:"full-width"},d={class:"bg-grey-3"},c={class:"q-pa-lg flex flex-center"},u={key:0},h={class:"text-center",colspan:"10"},p={key:1,class:"dashboard-container dashboard-text-color dashboard-main-tasks"},m={key:0,class:"full-width dashboard-list-area"},k={class:"table-header-text back-white"},g={class:"text-red"},_=["props","draggable","dropzone","data-index","onDragstart","onDrop","onDragover"],v={class:"",style:{width:"91px"}},b=["data-index"],f={class:"table-body",style:{width:"50px"}},y={class:"row",style:{width:"50px"}},w=["onClick"],C={style:{padding:"2px"},class:"dashboard-status-text"},F={class:""},E={class:"text-red"},S=o((()=>(0,a.Lk)("div",{class:"box loading-shimmer"},null,-1))),L=[S],A={key:1},D={class:"text-center",colspan:"12"},I={key:1,class:"back-white flex justify-end"},x={class:"row",style:{"margin-right":"0"}};function M(e,t,s,o,S,M){const T=(0,a.g2)("SubHeader"),R=(0,a.g2)("MobileGrid"),q=(0,a.g2)("q-markup-table"),P=(0,a.g2)("q-pagination"),$=(0,a.g2)("Header"),K=(0,a.g2)("q-separator"),X=(0,a.g2)("q-checkbox"),O=(0,a.g2)("q-item-section"),W=(0,a.g2)("q-item"),Q=(0,a.g2)("q-list"),U=(0,a.g2)("q-menu"),B=(0,a.g2)("q-btn"),V=(0,a.g2)("ColumnOrderBy"),z=(0,a.g2)("q-badge"),j=(0,a.g2)("q-tooltip"),H=(0,a.g2)("q-icon"),J=(0,a.g2)("TaskBoard"),G=(0,a.g2)("Loader");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(T,{name:"tasks",label:e.$t("tasks"),show_expiry_alert:!0,onSearch:!1},null,8,["label"]),e.isMobile()?((0,a.uX)(),(0,a.CE)("div",r,[e.tasks&&e.tasks.length>0?((0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(R,{onRowClick:e.rowClick},null,8,["onRowClick"])])):((0,a.uX)(),(0,a.Wv)(q,{key:1,class:"full-width"},{default:(0,a.k6)((()=>[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",d,[(0,a.Lk)("th",null,(0,i.v_)(e.$t("no_data_found")),1)])])])),_:1})),(0,a.Lk)("div",c,[e.total_pages>0?((0,a.uX)(),(0,a.CE)("tr",u,[(0,a.Lk)("td",h,[(0,a.bF)(P,{modelValue:e.current_page,"onUpdate:modelValue":t[0]||(t[0]=t=>e.current_page=t),color:"primary",max:e.total_pages,"max-pages":6,"boundary-links":"",onClick:t[1]||(t[1]=t=>e.nexPageClicked())},null,8,["modelValue","max"])])])):(0,a.Q3)("",!0)])])):((0,a.uX)(),(0,a.CE)("div",p,[(0,a.bF)($),(0,a.bF)(K,{class:"seperator"}),e.list_mode?((0,a.uX)(),(0,a.CE)("div",m,[e.table_columns.length>0?((0,a.uX)(),(0,a.Wv)(q,{key:0,flat:"",class:(0,i.C4)(["dashboard-table-style back-white dashboard-table-height dashboard-table-header-sticky",e.tasks.length>0?"dashboard-min-height":""]),id:"tasks-table"},{default:(0,a.k6)((()=>[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",k,[(0,a.Lk)("th",null,[(0,a.bF)(X,{modelValue:e.headerCheckbox,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.headerCheckbox=t),t[3]||(t[3]=t=>e.changeAction())],dense:""},null,8,["modelValue"]),(0,a.bF)(B,{flat:"",dense:"",round:"",onClick:t[6]||(t[6]=(0,n.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz",disable:0===this.selectionList.length},{default:(0,a.k6)((()=>[(0,a.bF)(U,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,a.k6)((()=>[(0,a.bF)(Q,{dense:"",style:{"min-width":"100px"}},{default:(0,a.k6)((()=>[(0,a.bF)(K,{inset:""}),(0,a.bF)(W,{clickable:""},{default:(0,a.k6)((()=>[(0,a.bF)(O,{onClick:e.deleteSelection},{default:(0,a.k6)((()=>[(0,a.Lk)("span",g,(0,i.v_)(e.$t("delete")),1)])),_:1},8,["onClick"])])),_:1}),e.canBulkMarkAsDone?((0,a.uX)(),(0,a.Wv)(W,{key:0,clickable:e.canBulkMarkAsDone},{default:(0,a.k6)((()=>[(0,a.bF)(O,{onClick:t[4]||(t[4]=t=>e.bulkUpdateStatusTasks(e.selectionList,"done"))},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,i.v_)(e.$t("mark_as_done")),1)])),_:1})])),_:1},8,["clickable"])):(0,a.Q3)("",!0),e.canBulkMarkAsUnDone?((0,a.uX)(),(0,a.Wv)(W,{key:1,clickable:e.canBulkMarkAsUnDone},{default:(0,a.k6)((()=>[(0,a.bF)(O,{onClick:t[5]||(t[5]=t=>e.bulkUpdateStatusTasks(e.selectionList,"open"))},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,i.v_)(e.$t("mark_as_open")),1)])),_:1})])),_:1},8,["clickable"])):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["disable"])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.table_columns,((s,o)=>((0,a.uX)(),(0,a.CE)("th",{key:o,class:(0,i.C4)(["documnetCol",e.indexToMove==o?"dragging":""]),props:e.props,draggable:e.canDragDropColumn(s),dropzone:e.canDragDropColumn(s),"data-index":o,direction:"horizontal",onDragstart:t=>e.onDragStart(t,e.table_columns,o),onDrop:(0,n.D$)((t=>e.handleDrop(t,o)),["prevent"]),onDragover:(0,n.D$)((t=>e.onDragOver(t,o)),["prevent"]),onDragenter:t[7]||(t[7]=(0,n.D$)(((...t)=>e.onDragEnter&&e.onDragEnter(...t)),["prevent"])),onDragleave:t[8]||(t[8]=(0,n.D$)(((...t)=>e.onDragLeave&&e.onDragLeave(...t)),["prevent"])),style:(0,i.Tr)({cursor:e.getIsDragging?"pointer":"move"})},[(0,a.Lk)("span",null,(0,i.v_)(e.$t(s.translation_key)),1),s.sortable?((0,a.uX)(),(0,a.Wv)(V,{key:0,column_name:s.name},null,8,["column_name"])):(0,a.Q3)("",!0)],46,_)))),128)),(0,a.Lk)("th",v,(0,i.v_)(e.$t("actions")),1)])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.tasks,((s,o)=>((0,a.uX)(),(0,a.CE)("tr",{key:s["id"],class:(0,i.C4)(e.setRowStyle(s)),"data-index":o},[(0,a.Lk)("td",f,[(0,a.Lk)("div",y,[(0,a.bF)(X,{dense:"",modelValue:s["rowSelection"],"onUpdate:modelValue":[e=>s["rowSelection"]=e,t[9]||(t[9]=e=>this.checkRowExistance())]},null,8,["modelValue","onUpdate:modelValue"])])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.table_columns,((t,n)=>((0,a.uX)(),(0,a.CE)("td",{key:n,onClick:a=>e.rowClick(t.name,s),class:(0,i.C4)([e.getClassesForColumn(t.name),"text-weight-regular TaskCol table-body"])},["status"===t.name?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("span",null,[(0,a.bF)(z,{align:"middle",class:(0,i.C4)(e.getStatusClass(s["status"]))},{default:(0,a.k6)((()=>[(0,a.Lk)("span",C,(0,i.v_)(e.getLabelTranslation(s["status"])),1)])),_:2},1032,["class"])]),(0,a.bF)(j,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(e.getLabelTranslation(s["status"])),1)])),_:2},1024)],64)):"deadline"===t.name||"created_on"===t.name?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)((0,i.v_)(s[t.name]?e.formateDate(s[t.name])+" "+e.formateDate(s[t.name],"HH:mm:ss"):"-"),1)],64)):"assigned_to_user"===t.name?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[null!=s.assigned_to_group?((0,a.uX)(),(0,a.Wv)(H,{key:0,name:"img:settings/gruppen.svg"})):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,i.v_)(s[t.name]?s[t.name]:s["assigned_to_group"]?s["assigned_to_group"]:"-"),1)],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:3},[(0,a.eW)((0,i.v_)(s[t.name]?e.$t(s[t.name]):"-")+" ",1),s[t.name]?((0,a.uX)(),(0,a.Wv)(j,{key:0},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(e.$t(s[t.name])),1)])),_:2},1024)):(0,a.Q3)("",!0)],64))],10,w)))),128)),(0,a.Lk)("td",F,[(0,a.bF)(B,{flat:"",dense:"",round:"",onClick:t[10]||(t[10]=(0,n.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,a.k6)((()=>[(0,a.bF)(U,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,a.k6)((()=>[(0,a.bF)(Q,{dense:"",style:{"min-width":"100px"}},{default:(0,a.k6)((()=>[(0,a.bF)(W,{clickable:""},{default:(0,a.k6)((()=>[(0,a.bF)(O,{onClick:t=>e.bulkUpdateStatusTasks([s.id],"done"==s.status?"open":"done")},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,["done"==s.status?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)((0,i.v_)(e.$t("mark_as_open")),1)],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)((0,i.v_)(e.$t("mark_as_done")),1)],64))])])),_:2},1032,["onClick"])])),_:2},1024),(0,a.bF)(K,{inset:""}),(0,a.bF)(W,{clickable:""},{default:(0,a.k6)((()=>[(0,a.bF)(O,{onClick:t=>e.deleteRecord(s.id)},{default:(0,a.k6)((()=>[(0,a.Lk)("span",E,(0,i.v_)(e.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])],10,b)))),128)),!0===e.show_table_loader?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(e.page_size,(t=>((0,a.uX)(),(0,a.CE)("tr",{key:t},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.table_columns.length+2,(e=>((0,a.uX)(),(0,a.CE)("td",{key:e},L)))),128))])))),128)):0===e.tasks.length&&!1===e.processing?((0,a.uX)(),(0,a.CE)("tr",A,[(0,a.Lk)("td",D,(0,i.v_)(e.$t("no_document_found")),1)])):(0,a.Q3)("",!0)])])),_:1},8,["class"])):(0,a.Q3)("",!0),e.total_pages>0?((0,a.uX)(),(0,a.CE)("div",I,[(0,a.Lk)("div",x,[(0,a.bF)(P,{modelValue:e.current_page,"onUpdate:modelValue":[t[11]||(t[11]=t=>e.current_page=t),t[12]||(t[12]=t=>e.nexPageClicked())],color:"primary",max:e.total_pages,class:"q-py-xs q-mx-md","max-pages":6,input:"","boundary-links":""},null,8,["modelValue","max"])])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),e.list_mode?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(J,{key:1}))])),(0,a.bF)(G)],64)}var T=s(46162),R=s(1659),q=s(24622);const P={class:"row q-mb-md"},$={style:{"margin-top":"40px"},class:"dashboard-title dark-readable"},K={class:"col"},X={class:"row justify-start"},O={class:"dashboard-search-box q-ml-md mt-20"},W={class:"dashboard-search-box q-ml-md mt-20"},Q={class:"q-mt-sm"};function U(e,t,s,n,o,r){const l=(0,a.g2)("quickSearch"),d=(0,a.g2)("UserFilter"),c=(0,a.g2)("q-space"),u=(0,a.g2)("q-tooltip"),h=(0,a.g2)("f-btn"),p=(0,a.g2)("filterBadges");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",P,[(0,a.Lk)("div",$,(0,i.v_)(e.$t("all_tasks"))+" ("+(0,i.v_)(e.total_records)+")",1),(0,a.Lk)("div",K,[(0,a.Lk)("div",X,[(0,a.Lk)("div",O,[(0,a.bF)(l)]),(0,a.Lk)("div",W,[(0,a.bF)(d)]),(0,a.bF)(c),(0,a.bF)(h,{square:"",class:"q-mr-sm mt-20",icon:"img:images/refresh.svg",onClick:e.refreshFilters},{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(e.$t("refresh_list")),1)])),_:1})])),_:1},8,["onClick"]),(0,a.bF)(h,{square:"",class:"q-mr-sm mt-20",icon:"dashboard",onClick:t[0]||(t[0]=t=>e.list_mode=!e.list_mode)},{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(e.$t("change_view")),1)])),_:1})])),_:1})])])]),(0,a.Lk)("div",Q,[(0,a.bF)(p)])],64)}var B=s(1595);const V={class:"q-pa-md"},z={class:"row q-my-sm"},j={style:{"margin-top":"10px"}},H={class:"row q-my-sm"},J={style:{"margin-top":"10px"}},G={class:"row q-my-sm"},N={style:{"margin-top":"10px"}},Y={class:"row q-my-sm"},Z={style:{"margin-top":"10px"}},ee={class:"float-right q-ml-auto"};function te(e,t,s,o,r,l){const d=(0,a.g2)("q-space"),c=(0,a.g2)("StatusFilter"),u=(0,a.g2)("PriorityFilter"),h=(0,a.g2)("UserFilter"),p=(0,a.g2)("PaginationSettings"),m=(0,a.g2)("f-btn"),k=(0,a.g2)("q-menu"),g=(0,a.g2)("q-input");return(0,a.uX)(),(0,a.Wv)(g,{dense:"",modelValue:e.searchInput,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.searchInput=t),t[2]||(t[2]=t=>e.inputValueChanges())],class:(0,i.C4)(["search-invoices",0===e.searchInput.length?"search-in-active":"search-active"]),autofocus:"",placeholder:e.$t("task_quick_search_placeholder"),outlined:"",onKeyup:(0,n.jR)(e.triggerSearchOnEnter,["enter"])},{append:(0,a.k6)((()=>[(0,a.bF)(m,{icon:"tune",appearance:"flat"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{style:{width:"500px","min-height":"250px"},anchor:"bottom start",self:"top left",offset:[453,10]},{default:(0,a.k6)((()=>[(0,a.Lk)("div",V,[(0,a.Lk)("div",z,[(0,a.Lk)("span",j,(0,i.v_)(e.$t("status")),1),(0,a.bF)(d),(0,a.bF)(c)]),(0,a.Lk)("div",H,[(0,a.Lk)("span",J,(0,i.v_)(e.$t("priority")),1),(0,a.bF)(d),(0,a.bF)(u)]),(0,a.Lk)("div",G,[(0,a.Lk)("span",N,(0,i.v_)(e.$t("assigned_to")),1),(0,a.bF)(d),(0,a.bF)(h)]),(0,a.Lk)("div",Y,[(0,a.Lk)("span",Z,(0,i.v_)(e.$t("pagination_size")),1),(0,a.bF)(d),(0,a.bF)(p)]),(0,a.Lk)("div",ee,[(0,a.bF)(m,{appearance:"secondary",class:"q-mr-sm mt-20 q-mb-md",label:e.$t("clear_filters"),onClick:t[0]||(t[0]=t=>e.resetFilters())},null,8,["label"])])])])),_:1})])),_:1})])),_:1},8,["modelValue","class","placeholder","onKeyup"])}var se=s(38734),ae=s(53500);function ie(e,t,s,i,n,o){const r=(0,a.g2)("q-select");return(0,a.uX)(),(0,a.Wv)(r,{outlined:"",dense:"",class:"q-mr-sm user-select",modelValue:e.page_size,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.page_size=t),t[1]||(t[1]=t=>{e.update(t)})],options:e.pagination_options,label:e.$t("pagination_size")},null,8,["modelValue","options","label"])}const ne=(0,a.pM)({mixins:[],props:{},watch:{},methods:{update(e){this.setPaginationSize(e),this.triggerApplyFilters()},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{});document.dispatchEvent(e)},validatePaginationSize(){this.page_size<=50||(this.page_size=50)}},mounted(){this.validatePaginationSize()},setup(){const e=(0,B.OP)(),{page_size:t}=(0,R.bP)(e),{setPaginationSize:s}=e;return{setPaginationSize:s,page_size:t,pagination_options:(0,se.KR)(["10","25","50"])}}});var oe=s(12807),re=s(94940),le=s(98582),de=s.n(le);const ce=(0,oe.A)(ne,[["render",ie]]),ue=ce;function he(e,t,s,n,o,r){const l=(0,a.g2)("q-checkbox"),d=(0,a.g2)("q-item-section"),c=(0,a.g2)("q-item"),u=(0,a.g2)("q-select");return(0,a.uX)(),(0,a.Wv)(u,{class:"q-mr-sm",dense:"",style:{width:"227px"},outlined:"",multiple:"",options:e.statusOptions,modelValue:e.selected_value,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.selected_value=t),t[1]||(t[1]=t=>{e.valueUpdated(t)})],label:e.$t("status")},{option:(0,a.k6)((({itemProps:t,selected:s,opt:n,toggleOption:o})=>[(0,a.bF)(c,(0,i._B)((0,a.Ng)(t)),{default:(0,a.k6)((()=>[(0,a.bF)(d,{side:""},{default:(0,a.k6)((()=>[(0,a.bF)(l,{"model-value":s,"onUpdate:modelValue":e=>o(n)},null,8,["model-value","onUpdate:modelValue"])])),_:2},1024),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,i.v_)(e.$t(n.label)),1)])),_:2},1024)])),_:2},1040)])),_:1},8,["options","modelValue","label"])}de()(ne,"components",{QSelect:re.A});var pe=s(68450),me=s(91486);const ke=(0,a.pM)({mixins:[],props:{},watch:{taskfiltersMap:{deep:!0,handler:function(e,t){this.loadSavedFiler()}}},data(){return{}},mounted(){this.statusOptions=me.E.map((e=>({label:this.$t(e),value:e}))),this.loadSavedFiler()},unmounted:function(){},methods:{loadSavedFiler(){const e=this.taskfiltersMap.get("status");(0,pe.z)(e)||""==e?this.selected_value=[]:this.selected_value=e},valueUpdated(e){logInfo("valueUpdated",e),this.selected_value=e,this.handleEmptyValue()||(this.setItemInFiltersMap("status",this.selected_value),this.triggerApplyFilters())},handleEmptyValue(){return!(!(0,pe.z)(this.selected_value)&&0!=this.selected_value.length)&&(this.deleteItemInFiltersMap("status"),this.triggerApplyFilters(),!0)},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)}},setup(){const e=(0,B.OP)(),{taskfiltersMap:t}=(0,R.bP)(e),{setItemInFiltersMap:s,deleteItemInFiltersMap:a}=e;return{selected_value:(0,se.KR)([]),statusOptions:(0,se.KR)([]),taskfiltersMap:t,setItemInFiltersMap:s,deleteItemInFiltersMap:a}}});var ge=s(90124),_e=s(25173),ve=s(80460);const be=(0,oe.A)(ke,[["render",he]]),fe=be;function ye(e,t,s,i,n,o){const r=(0,a.g2)("q-select");return(0,a.uX)(),(0,a.Wv)(r,{class:"q-mr-sm",dense:"",style:{width:"227px"},outlined:"",options:e.priorityOptions,modelValue:e.selected_value,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.selected_value=t),t[1]||(t[1]=t=>{e.valueUpdated(t)})],label:e.$t("priority")},null,8,["options","modelValue","label"])}de()(ke,"components",{QSelect:re.A,QItem:ge.A,QItemSection:_e.A,QCheckbox:ve.A});const we=(0,a.pM)({mixins:[],props:{},watch:{taskfiltersMap:{deep:!0,handler:function(e,t){this.loadSavedFiler()}}},data(){return{}},mounted(){this.priorityOptions=me.G.map((e=>({label:this.$t(e),value:e}))),this.loadSavedFiler()},unmounted:function(){},methods:{loadSavedFiler(){const e=this.taskfiltersMap.get("priority");this.selected_value=e||""},valueUpdated(e){this.selected_value=e,this.handleEmptyValue()||(this.setItemInFiltersMap("priority",this.selected_value),this.triggerApplyFilters())},handleEmptyValue(){return!(""!==this.selected_value&&!(0,pe.z)(this.selected_value))&&(this.deleteItemInFiltersMap("priority"),this.triggerApplyFilters(),!0)},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)}},setup(){const e=(0,B.OP)(),{taskfiltersMap:t}=(0,R.bP)(e),{setItemInFiltersMap:s,deleteItemInFiltersMap:a}=e;return{selected_value:(0,se.KR)(""),priorityOptions:(0,se.KR)([]),taskfiltersMap:t,setItemInFiltersMap:s,deleteItemInFiltersMap:a}}}),Ce=(0,oe.A)(we,[["render",ye]]),Fe=Ce;de()(we,"components",{QSelect:re.A});const Ee={class:"ellipsis"};function Se(e,t,s,n,o,r){const l=(0,a.g2)("q-select");return(0,a.uX)(),(0,a.Wv)(l,{ref:"q-select",class:"q-mr-sm user-filter-select",dense:"",outlined:"",modelValue:e.selected_value,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.selected_value=t),t[1]||(t[1]=t=>{e.valueUpdated(t)})],options:e.user_options,label:e.$t("assigned_to")},{"selected-item":(0,a.k6)((e=>[(0,a.Lk)("div",Ee,(0,i.v_)(e.opt.label),1)])),_:1},8,["modelValue","options","label"])}const Le=(0,a.pM)({mixins:[],props:{},watch:{taskfiltersMap:{deep:!0,handler:function(e,t){this.loadFilters()}}},mounted(){this.setUserOptions(),this.loadFilters()},methods:{loadFilters(){const e=this.taskfiltersMap.get(this.filter_name);this.selected_value=e||""},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)},valueUpdated(e){this.selected_value=e,this.handleEmptyValue()||(this.setItemInFiltersMap(this.filter_name,this.selected_value),this.triggerApplyFilters())},handleEmptyValue(){return!(""!==this.selected_value&&!(0,pe.z)(this.selected_value))&&(this.deleteItemInFiltersMap(this.filter_name),this.triggerApplyFilters(),!0)},setUserOptions(){this.user_options=[{label:this.$t("all"),value:!1},{label:this.$t("assigned_to_me"),value:!0}]}},setup(){const e=(0,B.OP)(),{taskfiltersMap:t}=(0,R.bP)(e),{setItemInFiltersMap:s,deleteItemInFiltersMap:a}=e;return{setItemInFiltersMap:s,deleteItemInFiltersMap:a,taskfiltersMap:t,selected_value:(0,se.KR)(""),user_options:(0,se.KR)([]),filter_name:"only_for_current_user"}}}),Ae=(0,oe.A)(Le,[["render",Se]]),De=Ae;de()(Le,"components",{QSelect:re.A});const Ie=(0,a.pM)({mixins:[],props:{},components:{StatusFilter:fe,PaginationSettings:ue,PriorityFilter:Fe,UserFilter:De},watch:{taskfiltersMap:{deep:!0,handler:function(e,t){this.loadSavedFiler()}}},mounted(){this.debounceSearchInputFunc=(0,ae.A)((()=>{this.triggerApplyFilters()}),1e3),document.addEventListener("delete_input_text",this.clearSearchInput)},methods:{clearSearchInput(){this.searchInput=""},resetFilters(){const e=new CustomEvent("reset_filters",{});document.dispatchEvent(e)},loadSavedFiler(){let e=this.taskfiltersMap.get("keyword");e||(e=""),this.searchInput=e},triggerSearchOnEnter(e){13===e.keyCode&&this.inputValueChanges()},inputValueChanges(){if(this.searchInput&&(this.searchInput=this.searchInput.trim()),0==this.searchInput.length)return this.deleteItemInFiltersMap("keyword"),void this.debounceSearchInputFunc();this.oldSearchInput=this.searchInput,this.setItemInFiltersMap("keyword",this.searchInput),this.debounceSearchInputFunc()},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{reset_pagination:this.reset_pagination}});document.dispatchEvent(e)}},setup(){const e=(0,B.OP)(),{taskfiltersMap:t}=(0,R.bP)(e),{setItemInFiltersMap:s,deleteItemInFiltersMap:a}=e;return{deleteItemInFiltersMap:a,setItemInFiltersMap:s,searchInput:(0,se.KR)(""),oldSearchInput:(0,se.KR)(""),taskfiltersMap:t,debounceSearchInputFunc:{},reset_pagination:(0,se.KR)(!0)}}});var xe=s(67837),Me=s(84436),Te=s(93676),Re=s(67156);const qe=(0,oe.A)(Ie,[["render",te]]),Pe=qe;de()(Ie,"components",{QInput:xe.A,QMenu:Me.A,QSpace:Te.A,QField:Re.A});var $e=s(16588);const Ke={class:"filter-badges row q-ml-md q-mb-sm"},Xe={key:0,class:"row"},Oe={key:1},We={class:"row"},Qe={key:2},Ue={class:"row"};function Be(e,t,s,n,o,r){const l=(0,a.g2)("q-icon"),d=(0,a.g2)("q-badge");return(0,a.uX)(),(0,a.CE)("div",Ke,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.taskfiltersMap,(t=>((0,a.uX)(),(0,a.CE)(a.FK,{key:t},["status"==t[0]?((0,a.uX)(),(0,a.CE)("div",Xe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t[1],((s,n)=>((0,a.uX)(),(0,a.CE)("div",{key:s},[(0,a.bF)(d,{rounded:"",color:"primary",class:"q-mr-sm capitalize"},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(e.$t(s.label))+" ",1),(0,a.bF)(l,{name:"close",color:"white",class:"q-ml-xs cursor-pointer",onClick:a=>e.removeFilterForArray(s,t[0],n)},null,8,["onClick"])])),_:2},1024)])))),128))])):"keyword"==t[0]?((0,a.uX)(),(0,a.CE)("div",Oe,[(0,a.Lk)("div",We,[(0,a.bF)(d,{rounded:"",color:"primary",class:"q-mr-sm capitalize"},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(t[1])+" ",1),(0,a.bF)(l,{name:"close",color:"white",class:"q-ml-xs cursor-pointer",onClick:s=>e.removeFilter(t[0])},null,8,["onClick"])])),_:2},1024)])])):"priority"==t[0]?((0,a.uX)(),(0,a.CE)("div",Qe,[(0,a.Lk)("div",Ue,[(0,a.bF)(d,{rounded:"",color:"primary",class:"q-mr-sm capitalize"},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(t[1]["value"])+" ",1),(0,a.bF)(l,{name:"close",color:"white",class:"q-ml-xs cursor-pointer",onClick:s=>e.removeFilter(t[0])},null,8,["onClick"])])),_:2},1024)])])):(0,a.Q3)("",!0)],64)))),128))])}const Ve=(0,a.pM)({props:{},mounted(){this.init()},unmounted:function(){},methods:{init(){},removeFilterForArray(e,t,s){const a=this.taskfiltersMap.get(t);Array.isArray(a)&&(a.splice(s,1),0==a.length&&this.removeFilter(t)),this.setItemInFiltersMap(t,a),this.triggerApplyFilters()},removeFilter(e,t){if(this.deleteItemInFiltersMap(e),"keyword"==e){const e=new CustomEvent("delete_input_text",{detail:{}});document.dispatchEvent(e)}this.triggerApplyFilters()},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)}},setup(){const e=(0,B.OP)(),{taskfiltersMap:t,taskListSettingsMap:s}=(0,R.bP)(e),{deleteItemInFiltersMap:a,setItemInFiltersMap:i}=e;return{deleteItemInFiltersMap:a,setItemInFiltersMap:i,taskfiltersMap:t,taskListSettingsMap:s}}});var ze=s(23954),je=s(50492);const He=(0,oe.A)(Ve,[["render",Be]]),Je=He;de()(Ve,"components",{QBadge:ze.A,QIcon:je.A});const Ge=(0,a.pM)({mixins:[$e.A],props:{},watch:{},components:{quickSearch:Pe,filterBadges:Je,UserFilter:De},mounted:function(){},unmounted:function(){},methods:{refreshFilters(){const e=new CustomEvent("refresh_view",{detail:{show_shimmer_loader:!0}});document.dispatchEvent(e)}},setup(){const e=(0,B.OP)(),{total_records:t,list_mode:s}=(0,R.bP)(e);return{total_records:t,list_mode:s}}});var Ne=s(97410);const Ye=(0,oe.A)(Ge,[["render",U]]),Ze=Ye;de()(Ge,"components",{QSpace:Te.A,QTooltip:Ne.A});var et=s(96056),tt=s(89156);const st={class:"full-width q-pa-md text-grey-8"},at={key:0,class:"row"},it={class:"col-11"},nt=["onClick"],ot={class:"col-1"},rt={class:"col-4"},lt={key:0,class:"q-pr-md"},dt={class:"col-8"},ct=(0,a.Lk)("div",{class:"full-width border-bottom q-mt-sm q-mb-sm"},null,-1);function ut(e,t,s,n,o,r){const l=(0,a.g2)("q-icon");return(0,a.uX)(),(0,a.CE)("div",st,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.tasks,((t,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.table_columns,((s,n)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:n},["title"===s.name?((0,a.uX)(),(0,a.CE)("div",at,[(0,a.Lk)("div",it,[(0,a.Lk)("div",{class:"text-primary ellipsify",onClick:a=>{e.$emit("rowClick",s.name,t)}},(0,i.v_)(t[s.name]),9,nt)]),(0,a.Lk)("div",ot,[(0,a.bF)(l,{name:"expand_more",size:"md",id:"expand_more_"+t["id"],onClick:s=>e.expand(t["id"])},null,8,["id","onClick"]),(0,a.bF)(l,{name:"expand_less",size:"md",class:"hidden",id:"expand_less_"+t["id"],onClick:s=>e.expand(t["id"])},null,8,["id","onClick"])])])):((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,i.C4)(["row",s.hidden?" hidden mark_hidden_"+t["id"]:""])},[(0,a.Lk)("div",rt,[s.hasOwnProperty("label")?((0,a.uX)(),(0,a.CE)("span",lt,(0,i.v_)(e.$t(s.label)),1)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)((0,i.v_)(e.getLabelTranslation(s.translation_key)),1)],64))]),(0,a.Lk)("div",dt,(0,i.v_)(t[s.name]?t[s.name]:"-"),1)],2))],64)))),128)),ct],64)))),128))])}var ht=s(64233);const pt={title:{name:"title",translation_key:"task",sortable:!0,order:0},document_name:{name:"document_name",translation_key:"document_name",order:1},supplier_name:{name:"supplier_name",translation_key:"supplier_name",order:2},supplier_id:{name:"supplier_id",translation_key:"supplier_id",order:3},priority:{name:"priority",translation_key:"priority",sortable:!0,order:4},status:{name:"status",translation_key:"status",sortable:!0,order:5},deadline:{name:"deadline",translation_key:"deadline",sortable:!0,order:6},assigned_to:{name:"assigned_to_user",translation_key:"assigned_to",sortable:!0,order:7},created_on:{name:"created_on",translation_key:"created_on",sortable:!0,order:8}},mt={title:{name:"title",translation_key:"task",hidden:!1},document_name:{name:"document_name",translation_key:"document_name",hidden:!1},priority:{name:"priority",translation_key:"priority",hidden:!1},status:{name:"status",translation_key:"status",hidden:!1},assigned_to:{name:"assigned_to_user",translation_key:"assigned_to",hidden:!0,marked_hidden:!0},created_on:{name:"created_on",translation_key:"created_on",hidden:!0,marked_hidden:!0}};var kt=s(92162);const gt=(0,a.pM)({mixins:[ht.A],props:{},data(){return{mobile_table_columns:mt}},emits:["rowClick"],mounted:function(){this.handleTableColumns()},methods:{expand(e){const t=(0,kt.$)("#expand_more_"+e),s=(0,kt.$)("#expand_less_"+e);t&&t.classList.toggle("hidden"),s&&s.classList.toggle("hidden"),this.displayHiddenColumns(e)},displayHiddenColumns(e){const t=document.querySelectorAll(".mark_hidden_"+e);t&&t.forEach((e=>{e.classList.toggle("hidden")}))},handleTableColumns(e=!0){try{this.table_columns=[];for(const[e,t]of Object.entries(mt))this.table_columns.push(t);this.table_columns.sort(((e,t)=>e.order-t.order))}catch(t){logError(t)}}},setup(){const e=(0,B.OP)(),{tasks:t}=(0,R.bP)(e);return{tasks:t,table_columns:(0,se.KR)([])}}}),_t=(0,oe.A)(gt,[["render",ut]]),vt=_t;de()(gt,"components",{QIcon:je.A});var bt=s(18505),ft=s(64775);const yt={class:"orderByParentSpan arrow-color"},wt=["data-name"],Ct=["data-name"];function Ft(e,t,s,n,o,r){return(0,a.uX)(),(0,a.CE)("span",yt,[(0,a.Lk)("span",{class:(0,i.C4)(["up-arrow orderBy absolute",e.sort_by==e.column_name&&"asc"==e.sort_order?"selected":""]),"data-name":e.column_name,"data-direction":"asc",onClick:t[0]||(t[0]=t=>e.OrderBy(e.column_name,"asc"))},null,10,wt),(0,a.Lk)("span",{class:(0,i.C4)(["down-arrow orderBy absolute",e.sort_by==e.column_name&&"desc"==e.sort_order?"selected":""]),"data-name":e.column_name,"data-direction":"desc",onClick:t[1]||(t[1]=t=>e.OrderBy(e.column_name,"desc"))},null,10,Ct)])}const Et=(0,a.pM)({mixins:[],props:{column_name:{type:String,required:!0}},components:{},watch:{},mounted:function(){},unmounted:function(){},methods:{is_order_by_selected(e){return this.sort_by==this.column_name&&this.sort_order==e},resetFilters(){let e=document.getElementsByClassName("orderBy selected");Array.from(e).forEach((e=>{e.classList.remove("selected")}))},OrderBy(e,t){logInfo("OrderBy",e,t),this.setOrderBy(e,t),this.triggerApplyFilters()},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)}},setup(){const e=(0,B.OP)(),{sort_by:t,sort_order:s}=(0,R.bP)(e),{setOrderBy:a}=e;return{sort_by:t,sort_order:s,setOrderBy:a,order_by_field:(0,se.KR)(""),order_by_direction:(0,se.KR)("")}}}),St=(0,oe.A)(Et,[["render",Ft],["__scopeId","data-v-a1a4328a"]]),Lt=St;var At=s(10739),Dt=s(76956),It=s(11470),xt=s(68180),Mt=s(36246),Tt=s(45022);const Rt={class:"full-width dashboard-list-area"},qt={class:""},Pt={class:"row q-gutter-md"},$t={class:"text-weight-bold text-lg q-mt-sm q-pb-md"};function Kt(e,t,s,n,o,r){const l=(0,a.g2)("task-card"),d=(0,a.g2)("draggable");return(0,a.uX)(),(0,a.CE)("div",Rt,[(0,a.Lk)("div",qt,[(0,a.Lk)("div",Pt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.columns,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.title,class:"highlighted-back rounded-lg px-3 py-3 column-width rounded"},[(0,a.Lk)("p",$t,(0,i.v_)(e.$t(t.title)),1),(0,a.bF)(d,{onChange:e.dragEnd,list:t.tasks,animation:200,"ghost-class":"ghost-card",group:"tasks",class:"task-board-height"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.tasks,(t=>((0,a.uX)(),(0,a.Wv)(l,{onDeleteRecord:e.deleteRecord,onDocumentClick:e.documentClick,onCardClick:e.rowClick,onUpdateStatusTaskClick:e.updateStatusTaskClick,key:t.id,task:t,class:"q-mt-sm cursor-move"},null,8,["onDeleteRecord","onDocumentClick","onCardClick","onUpdateStatusTaskClick","task"])))),128))])),_:2},1032,["onChange","list"])])))),128))])])])}var Xt=s(39231);const Ot={class:"row justify-between"},Wt={class:"task-description text-weight-medium task-title"},Qt={class:"user-item-initials initials-text-color"},Ut={class:"q-mt-sm full-width no-paragraph-space"},Bt={key:0,class:"text-sm task-description"},Vt={class:"row mt-4 justify-between items-center"},zt={class:"text-sm"},jt={class:"hidden-child no-padding"},Ht={class:"text-red"};function Jt(e,t,s,o,r,l){const d=(0,a.g2)("q-tooltip"),c=(0,a.g2)("q-icon"),u=(0,a.g2)("q-avatar"),h=(0,a.g2)("q-item-section"),p=(0,a.g2)("q-item"),m=(0,a.g2)("q-separator"),k=(0,a.g2)("q-list"),g=(0,a.g2)("q-menu"),_=(0,a.g2)("q-btn");return(0,a.uX)(),(0,a.CE)("div",{class:"task-card back-white shadow-1 rounded px-3 pt-3 pb-3 gray-border border-white",onClick:t[4]||(t[4]=(...e)=>l.clickCard&&l.clickCard(...e))},[(0,a.Lk)("div",Ot,[(0,a.Lk)("span",Wt,(0,i.v_)(s.task.title),1),(0,a.Lk)("div",null,[s.task.status?((0,a.uX)(),(0,a.Wv)(c,{key:0,class:"on-left",name:"img:images/"+l.priorityIcon,size:"sm"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(e.$t(s.task.priority)),1)])),_:1})])),_:1},8,["name"])):(0,a.Q3)("",!0),s.task.assigned_to_user?((0,a.uX)(),(0,a.Wv)(u,{key:1,size:"24px",class:"user-avatar-background"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",Qt,(0,i.v_)(l.getInitials(s.task.assigned_to_user)),1),(0,a.bF)(d,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(s.task.assigned_to_user),1)])),_:1})])),_:1})):s.task.assigned_to_group?((0,a.uX)(),(0,a.Wv)(u,{key:2,size:"24px",class:"user-avatar-background"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{name:"group",class:"text-white"}),(0,a.bF)(d,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(s.task.assigned_to_group),1)])),_:1})])),_:1})):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Ut,[(0,a.Lk)("p",{class:"text-sm link task-document-link",onClick:[t[0]||(t[0]=(...e)=>l.clickDocument&&l.clickDocument(...e)),t[1]||(t[1]=(0,n.D$)((()=>{}),["stop","prevent"]))]},[(0,a.bF)(c,{name:"description",class:"q-mr-xs"}),(0,a.eW)(" "+(0,i.v_)(s.task.document_name)+" ",1),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(e.$t("open_document")),1)])),_:1})]),s.task.description?((0,a.uX)(),(0,a.CE)("span",Bt,(0,i.v_)(s.task.description),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Vt,[(0,a.Lk)("span",zt,(0,i.v_)(e.formatDateAccordingToPreference(s.task.created_on)),1),(0,a.Lk)("div",jt,[(0,a.bF)(_,{flat:"",dense:"",round:"",onClick:t[3]||(t[3]=(0,n.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz",size:"12px"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{dense:"",style:{"min-width":"100px"}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{clickable:""},{default:(0,a.k6)((()=>[(0,a.bF)(h,{onClick:l.clickUpdateStatus},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,["done"==s.task.status?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)((0,i.v_)(e.$t("mark_as_open")),1)],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)((0,i.v_)(e.$t("mark_as_done")),1)],64))])])),_:1},8,["onClick"])])),_:1}),(0,a.bF)(m,{inset:""}),(0,a.bF)(p,{clickable:""},{default:(0,a.k6)((()=>[(0,a.bF)(h,{onClick:t[2]||(t[2]=e=>l.clickRemove(s.task.id))},{default:(0,a.k6)((()=>[(0,a.Lk)("span",Ht,(0,i.v_)(e.$t("delete")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])])])}var Gt=s(46736);const Nt={mixins:[Gt.A],components:{},props:{task:{type:Object,default:()=>({})}},emits:["cardClick","documentClick","deleteRecord","updateStatusTaskClick"],methods:{getInitials(e){var t=e.split(" "),s=t[0].substring(0,1).toUpperCase();return t.length>1&&(s+=t[t.length-1].substring(0,1).toUpperCase()),s},clickCard(){this.$emit("cardClick",this.task)},clickDocument(){this.$emit("documentClick",this.task)},clickRemove(){this.$emit("deleteRecord",this.task.id)},clickUpdateStatus(){let e;e="done"==this.task.status?"open":"done",this.$emit("updateStatusTaskClick",[this.task.id],e)}},computed:{priorityIcon(){const e={medium:"priority_medium.svg",high:"priority_high.svg",low:"priority_low.svg"};return e[this.task.priority]||e.default}}};var Yt=s(3952),Zt=s(56384),es=s(53999),ts=s(10386);const ss=(0,oe.A)(Nt,[["render",Jt]]),as=ss;de()(Nt,"components",{QIcon:je.A,QTooltip:Ne.A,QAvatar:Yt.A,QBtn:Zt.A,QMenu:Me.A,QList:es.A,QItem:ge.A,QItemSection:_e.A,QSeparator:ts.A});var is=s(21279),ns=function(e,t,s,a){function i(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,n){function o(e){try{l(a.next(e))}catch(t){n(t)}}function r(e){try{l(a["throw"](e))}catch(t){n(t)}}function l(e){e.done?s(e.value):i(e.value).then(o,r)}l((a=a.apply(e,t||[])).next())}))};const os=(0,a.pM)({el:"#app",mixins:[bt.A,q.A,et.A,ht.A,At.A],components:{draggable:Xt.H,TaskCard:as},data(){return{InvoicesClearInterval:0,debounceSearchInputFunc:{},columns:(0,se.KR)([{title:"open",tasks:[]},{title:"in_progress",tasks:[]},{title:"done",tasks:[]},{title:"rejected",tasks:[]}])}},beforeRouteLeave:function(e,t,s){this.intervalManager(!1),this.unsubscribeToChannel("dashboard"),s()},mounted(){try{window.dash=this,this.showLoading(),this.headerCheckbox=!1,this.getSavedListSettings(),this.loadData(),this.intervalManager(!0),this.getDocTypeSettings(),this.initDragDropColumns("tasks-table","translation_key"),document.addEventListener("apply_filters",this.applyFilterEvent),document.addEventListener("reset_filters",this.resetFilters),document.addEventListener("refresh_view",this.refreshFilters),this.debounceSearchInputFunc=(0,ae.A)((()=>{this.applyFilter()}),1e3),document.addEventListener("tasks-table-column-drop",this.saveSortedColumns),this.prepareStatusList()}catch(e){logError(e)}finally{this.hideLoading()}},unmounted:function(){document.removeEventListener("apply_filters",this.applyFilterEvent),document.removeEventListener("reset_filters",this.resetFilters),document.removeEventListener("refresh_view",this.refreshFilters),document.removeEventListener("tasks-table-column-drop",this.saveSortedColumns)},computed:{},watch:{headerCheckbox(){!1===this.headerCheckbox&&(this.headerFabIcon=!1)},tasks:{handler:function(e,t){this.selectionList.forEach((e=>{const t=this.tasks.find((t=>t.id===e));t&&(t.rowSelection=!0)}))}},processing:{handler:function(e,t){1==e?this.showLoading():this.hideLoading()}},websocketHasError:{handler:function(e,t){1==e&&(this.use_websocket=!1)}}},methods:{dragEnd(e,t){if(!e.added)return;const s=e.added.element.id,a=e.added.element;let i="";this.columns.forEach((e=>{e.tasks.forEach((t=>{t.id===s&&(i=e.title)}))})),this.updateTaskStatus(a,i)},updateTaskStatus(e,t){return ns(this,void 0,void 0,(function*(){try{if(logInfo("What do you have again? ",e),!e)return;e.status=t;const s=yield It.Hg.editTask(e.id,e);if(!1===s.success)throw s;const a=new CustomEvent("refresh_view",{detail:{show_shimmer_loader:!0}});document.dispatchEvent(a),this.showSuccessToast(this.$t("status_updated_successfully"))}catch(s){const e=ft.t.getErrorMessage(s);this.showErrorToast(e),logError(s)}}))},getStatusClass(e){let t="bg-grey";const s=this.statusList.hasOwnProperty(e);return s&&(t=this.statusList[e]["class"]),t+=" dashboard-status-badge",t},prepareStatusList(){this.statusList["open"]=[],this.statusList["open"]["value"]="open",this.statusList["open"]["class"]="bg-blue-14",this.statusList["in_progress"]=[],this.statusList["in_progress"]["value"]="in_progress",this.statusList["in_progress"]["class"]="bg-amber-7",this.statusList["done"]=[],this.statusList["done"]["value"]="done",this.statusList["done"]["class"]="bg-light-green-6",this.statusList["rejected"]=[],this.statusList["rejected"]["value"]="rejected",this.statusList["rejected"]["class"]="bg-red-13"},saveSortedColumns(e){const t={};this.table_columns.forEach(((e,s)=>{t[e.name]={name:e.name,order:s,sortable:!!e.sortable,translation_key:e.translation_key}})),this.saveTaskColumns(t)},deleteSelection(){this.bulkDeleteRecords(this.selectionList);const e=new CustomEvent("refresh_view",{});document.dispatchEvent(e)},bulkUpdateStatusTasks(e,t){return ns(this,void 0,void 0,(function*(){try{this.processing=!0;const s=yield It.Hg.bulkUpdateStatusTasks(e,t);if(!1===s.success)throw s;const a=new CustomEvent("refreshTasks",{});document.dispatchEvent(a),e.forEach((e=>{const s=this.tasks.find((t=>t.id===e));s&&(s.status=t,s.rowSelection=!1)})),this.selectionList=[],this.showSuccessToast(this.$t("status_updated_successfully"))}catch(s){const e=ft.t.getErrorMessage(s);this.showErrorToast(e),logError(s)}finally{this.processing=!1;const e=new CustomEvent("refresh_view",{});document.dispatchEvent(e)}}))},formatTaskDate(e,t){const s=Mt.Ay.formatDate(e,t);return s},formateDate(e,t=""){return this.isDate(e)?(t||(t=is.v.getFormat(this.getDocDateFormat())),Mt.Ay.formatDate(e,t)):e},applyFilterEvent(e){this.resetPagination(),this.applyFilter()},intervalManager(e){clearInterval(this.InvoicesClearInterval),!0===e&&(this.InvoicesClearInterval=setInterval((()=>{this.is_any_checked||this.fetchData(!1)}),6e4))},handleActions(e){return this.tasks.forEach(((t,s)=>{s!==e&&(t["fabAction"]=!1)})),!0},resetPages(){this.resetPagination(),this.fetchData()},applyFilter(){this.processing=!0,this.resetAllSelectedRows(),this.fetchData()},refreshFilters(e){this.tasks=[],this.selectionList=[],this.headerCheckbox=!1,this.fetchData()},fetchData(e=!0){return ns(this,void 0,void 0,(function*(){try{e&&(this.processing=!0,this.show_table_loader=!0),this.selectionList=[],this.headerCheckbox=!1;const t=this.getSavedFiltersAsJson();if(this.list_mode||(t["limit"]=100),t["document_fields"]="supplier_name,supplier_id",t["cache"]=!1,this.use_websocket){let e=yield this.getWebSocketDashboard();return void(1!=e&&setTimeout((()=>{this.handleWebsocketDelay}),5e3))}yield this.getTasks(t),this.formatTaskList(),setTimeout((()=>{this.turnOnWebSocket}),5e3)}catch(t){const e=ft.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}finally{this.processing=!1}}))},handleWebsocketDelay(){"received"!==this.data_status&&(logInfo("turning off websocket and switching to https",this.data_status),this.use_websocket=!1,this.fetchData(),setTimeout((()=>{this.turnOnWebSocket}),5e3))},turnOnWebSocket(){this.websocketHasError||(this.use_websocket=!1)},resetColumns(){this.columns.forEach((e=>{e.tasks=[]}))},formatTaskList(){this.resetColumns(),this.tasks.forEach((e=>{const t=e.status;this.columns.find((s=>{s.title===t&&s.tasks.push(e)}))}))},updateTableData(){this.setPagination(),this.applyCustomFormatOnRows(),this.show_table_loader=!1,this.processing=!1},setPagination(){this.total_records>0&&this.setTotalPages()},resetPagination(){this.total_pages=0,this.current_page=1,this.total_records=0,this.offset=0},setTotalPages(){this.total_pages=Math.ceil(this.total_records/this.page_size)},calculateOffset(){this.offset=this.page_size*(this.current_page-1)},nexPageClicked(){this.calculateOffset(),this.fetchData()},applyCustomFormatOnRows(){this.tasks.forEach((e=>{e["fabAction"]=!1,e["rowSelection"]=!1;const{formatted_deadline:t}=this.getDisplayDeadline(e["deadline"]);e["deadline"]=t}))},loadData(){this.resetPagination(),this.applyFilter()},bulkDeleteRecords(e){return ns(this,void 0,void 0,(function*(){try{this.processing=!0;const t=yield It.Hg.bulkDeleteTasks(e);if(!1===t.success)throw t;yield this.fetchData()}catch(t){const e=ft.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}finally{this.processing=!1;const e=new CustomEvent("refresh_view",{});document.dispatchEvent(e)}}))},deleteRecord(e){return ns(this,void 0,void 0,(function*(){try{this.processing=!0;const t=yield It.Hg.deleteTask(e);if(!1===t.success)throw t;yield this.fetchData()}catch(t){const e=ft.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}finally{this.processing=!1;const e=new CustomEvent("refresh_view",{});document.dispatchEvent(e)}}))},rowClick(e){this.$router.push("/task/"+e["id"])},updateStatusTaskClick(e,t){return ns(this,void 0,void 0,(function*(){yield this.bulkUpdateStatusTasks(e,t)}))},documentClick(e){let t=e["document_status"];if("validated_pending_approval"===t)return void this.toPendingApprovalScreen(e);if("approved_pending_second_approval"===t)return void this.toPendingSecondApprovalScreen(e);if("rejected"===t)return void this.toRejectedScreen(e["document_id"]);if("in_review"===t)return void this.toInReviewScreen(e["document_id"],e);if(this.isStatusError(t))return void this.toDocumentErrorView(e);let s=this.$router.resolve({path:"/field_validation_v1/"+e["document_id"]});window.open(s.href,"_blank")},isStatusError(e){return"error"===e||"export_error"===e},toPendingApprovalScreen(e){if(this.model[Dt.WE]){let t=this.$router.resolve({path:"/ready_for_approval_v3/"+e["document_id"]});window.open(t.href,"_blank")}else{let t=this.$router.resolve({path:"/ready-for-approval-v2/"+e["document_id"]});window.open(t.href,"_blank")}},toPendingSecondApprovalScreen(e){let t=this.$router.resolve({path:"/ready-for-second-approval-v2/"+e["document_id"]});window.open(t.href,"_blank")},toRejectedScreen(e){let t=this.$router.resolve({path:"/rejected/"+e});window.open(t.href,"_blank")},toInReviewScreen(e,t){let s=this.$router.resolve({path:"/in_review/"+e});window.open(s.href,"_blank")},toDocumentErrorView(e){let t=this.$router.resolve({path:"/document_error/"+e["id"]});window.open(t.href,"_blank")},getClassesForColumn(e){let t=" cursor-pointer ";const s=["document_name","title"];return t+=s.includes(e)?" text-primary ":"",t},resetFilters(){this.resetPagination(),this.setDefaultSettings(),this.applyFilter()},changeAction(){!0===this.headerCheckbox?this.selectAllRows():this.resetAllSelectedRows(),this.checkRowExistance()},selectAllRows(){this.selectionList=[],this.tasks.forEach((e=>{e["rowSelection"]=!0,this.selectionList.push(e.id)}))},resetAllSelectedRows(){this.selectionList=[],this.headerCheckbox=!1,this.tasks.forEach((e=>{e["rowSelection"]=!1}))},checkRowExistance(){let e=0;this.selectionList=[],this.headerCheckbox=!1,this.is_any_checked=!1,this.canBulkMarkAsDone=!0,this.canBulkMarkAsUnDone=!0,this.tasks.forEach((t=>{!0===t["rowSelection"]&&(this.is_any_checked=!0,e++,this.selectionList.push(t.id),"done"===t.status&&(this.canBulkMarkAsDone=!1),"open"===t.status&&(this.canBulkMarkAsUnDone=!1))})),0===e?this.headerCheckbox=!1:this.tasks.length===e?this.headerCheckbox=!0:this.headerCheckbox=!1},setRowStyle(e){if(e.hasOwnProperty("export_data_fetched")&&!0===e["export_data_fetched"])return"exported-row"},deleteMultipalDocument(){return ns(this,void 0,void 0,(function*(){if(!this.selectionList)return;let e;this.processing=!0;try{let t=new Map;if(t.set("doc_ids",this.selectionList.join(",")),e=yield It.v1.deleteRequest(T.FH.delete_documents,t),!1===e.success)return void this.showErrorToast(e.data.message);this.headerCheckbox=!1,this.resetAllSelectedRows(),this.loadData()}catch(t){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(t)}finally{this.processing=!1;const e=new CustomEvent("refresh_view",{});document.dispatchEvent(e)}}))},removeQuickFilter(e){this.taskListSettingsMap.delete(e),this.applyFilter()},handleWebSocketResult(e){e&&(this.use_websocket=!0,this.updateTableData())},getWebSocketDashboard(){return ns(this,void 0,void 0,(function*(){try{const e={type:"dashboard",data:{}};let t=this.queryParams;t=t.replace("?","");const s=t.split("&");s.forEach((t=>{t=t.split("="),2===t.length&&(e.data[t[0]]=t[1])})),this.data_status="fetching";yield this.sendMessageToSocket(e.type,e.data);return this.updateTableData(),this.processing=!1,!0}catch(e){this.handleWebsocketDelay()}}))}},setup(){const e=(0,B.G6)(),{dashboard_data:t,isConnected:s,hasError:a}=(0,R.bP)(e),i=(0,B.Bu)(),{user_settings:n}=(0,R.bP)(i),{subscribeToChannel:o,unsubscribeToChannel:r,sendMessageByType:l}=e,d=(0,B.OP)(),{tasks:c,total_records:u,data_fetched:h,offset:p,page_size:m,taskListSettingsMap:k,processing:g,columnKey:_}=(0,R.bP)(d),{getTasks:v,getSavedListSettings:b,getSavedFiltersAsJson:f,setDefaultSettings:y,getDisplayDeadline:w,saveTaskColumns:C}=d,F=(0,B.wt)(),{getDocTypeSettings:E}=F,{model:S}=(0,R.bP)(F);return{taskListSettingsMap:k,user_settings:n,columnKey:_,getTasks:v,tasks:c,total_records:u,current_page:(0,se.KR)(1),total_pages:(0,se.KR)(0),offset:p,page_size:m,processing:g,getSavedListSettings:b,getSavedFiltersAsJson:f,setDefaultSettings:y,getDisplayDeadline:w,canBulkMarkAsDone:(0,se.KR)(!1),websocketHasError:a,sendMessageToSocket:l,isConnected:s,unsubscribeToChannel:r,subscribeToChannel:o,dashboard_data:t,table_columns:(0,se.KR)([]),queryParams:"",model:S,recordId:"",headerCheckbox:(0,se.KR)(!1),is_any_checked:(0,se.KR)(!1),headerFabIcon:(0,se.KR)(!1),selectionList:(0,se.KR)([]),canBulkMarkAsUnDone:(0,se.KR)(!1),use_websocket:(0,se.KR)(!1),show_table_loader:(0,se.KR)(!1),data_status:(0,se.KR)(""),saveTaskColumns:C,statusList:(0,se.KR)([]),getDocTypeSettings:E}}});var rs=s(42315);const ls=(0,oe.A)(os,[["render",Kt],["__scopeId","data-v-6503a37e"]]),ds=ls;de()(os,"components",{QTable:rs.A});var cs=function(e,t,s,a){function i(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,n){function o(e){try{l(a.next(e))}catch(t){n(t)}}function r(e){try{l(a["throw"](e))}catch(t){n(t)}}function l(e){e.done?s(e.value):i(e.value).then(o,r)}l((a=a.apply(e,t||[])).next())}))};const us=(0,a.pM)({el:"#app",mixins:[bt.A,q.A,et.A,ht.A,At.A],components:{Header:Ze,ColumnOrderBy:Lt,MobileGrid:vt,SubHeader:xt.A,Loader:tt.A,TaskBoard:ds},data(){return{InvoicesClearInterval:0,debounceSearchInputFunc:{}}},beforeRouteLeave:function(e,t,s){this.intervalManager(!1),this.unsubscribeToChannel("dashboard"),s()},mounted(){try{window.dash=this,this.showLoading(),this.headerCheckbox=!1,this.handleTableColumns(!1),this.getSavedListSettings(),this.loadData(),this.intervalManager(!0),this.getDocTypeSettings(),this.initDragDropColumns("tasks-table","translation_key"),document.addEventListener("apply_filters",this.applyFilterEvent),document.addEventListener("reset_filters",this.resetFilters),document.addEventListener("refresh_view",this.refreshFilters),this.debounceSearchInputFunc=(0,ae.A)((()=>{this.applyFilter()}),1e3),document.addEventListener("tasks-table-column-drop",this.saveSortedColumns),this.prepareStatusList()}catch(e){logError(e)}finally{this.hideLoading()}},unmounted:function(){document.removeEventListener("apply_filters",this.applyFilterEvent),document.removeEventListener("reset_filters",this.resetFilters),document.removeEventListener("refresh_view",this.refreshFilters),document.removeEventListener("tasks-table-column-drop",this.saveSortedColumns)},computed:{},watch:{headerCheckbox(){!1===this.headerCheckbox&&(this.headerFabIcon=!1)},tasks:{handler:function(e,t){this.selectionList.forEach((e=>{const t=this.tasks.find((t=>t.id===e));t&&(t.rowSelection=!0)}))}},processing:{handler:function(e,t){1==e?this.showLoading():this.hideLoading()}},websocketHasError:{handler:function(e,t){1==e&&(this.use_websocket=!1)}}},methods:{getStatusClass(e){let t="bg-grey";const s=this.statusList.hasOwnProperty(e);return s&&(t=this.statusList[e]["class"]),t+=" dashboard-status-badge",t},prepareStatusList(){this.statusList["open"]=[],this.statusList["open"]["value"]="open",this.statusList["open"]["class"]="bg-blue-14",this.statusList["in_progress"]=[],this.statusList["in_progress"]["value"]="in_progress",this.statusList["in_progress"]["class"]="bg-amber-7",this.statusList["done"]=[],this.statusList["done"]["value"]="done",this.statusList["done"]["class"]="bg-light-green-6",this.statusList["rejected"]=[],this.statusList["rejected"]["value"]="rejected",this.statusList["rejected"]["class"]="bg-red-13"},saveSortedColumns(e){const t={};this.table_columns.forEach(((e,s)=>{t[e.name]={name:e.name,order:s,sortable:!!e.sortable,translation_key:e.translation_key}})),this.saveTaskColumns(t)},deleteSelection(){this.bulkDeleteRecords(this.selectionList);const e=new CustomEvent("refresh_view",{});document.dispatchEvent(e)},bulkUpdateStatusTasks(e,t){return cs(this,void 0,void 0,(function*(){try{this.processing=!0;const s=yield It.Hg.bulkUpdateStatusTasks(e,t);if(!1===s.success)throw s;const a=new CustomEvent("refreshTasks",{});document.dispatchEvent(a),e.forEach((e=>{const s=this.tasks.find((t=>t.id===e));s&&(s.status=t,s.rowSelection=!1)})),this.selectionList=[],this.showSuccessToast(this.$t("status_updated_successfully"))}catch(s){const e=ft.t.getErrorMessage(s);this.showErrorToast(e),logError(s)}finally{this.processing=!1}}))},formatTaskDate(e,t){const s=Mt.Ay.formatDate(e,t);return s},formateDate(e,t=""){return this.isDate(e)?(t||(t=is.v.getFormat(this.getDocDateFormat())),Mt.Ay.formatDate(e,t)):e},applyFilterEvent(e){this.resetPagination(),this.applyFilter()},handleTableColumns(e=!0){try{let e=pt,t=this.user_settings[this.columnKey];Object.keys(this.user_settings).length||(t=Tt.A.getItem(this.columnKey)),t&&(t=JSON.parse(t)),t&&Object.keys(t).length==Object.keys(e).length&&(e=t),Tt.A.set(this.columnKey,JSON.stringify(e)),this.processing=!0,this.table_columns=[];for(const[s,a]of Object.entries(e))this.table_columns.push(a);this.table_columns.sort(((e,t)=>e.order-t.order))}catch(t){logError(t)}finally{e&&(this.processing=!1)}},intervalManager(e){clearInterval(this.InvoicesClearInterval),!0===e&&(this.InvoicesClearInterval=setInterval((()=>{this.is_any_checked||this.fetchData(!1)}),6e4))},handleActions(e){return this.tasks.forEach(((t,s)=>{s!==e&&(t["fabAction"]=!1)})),!0},resetPages(){this.resetPagination(),this.fetchData()},applyFilter(){this.processing=!0,this.resetAllSelectedRows(),this.fetchData()},refreshFilters(e){this.tasks=[],this.selectionList=[],this.headerCheckbox=!1,this.fetchData()},fetchData(e=!0){return cs(this,void 0,void 0,(function*(){try{e&&(this.processing=!0,this.show_table_loader=!0),this.selectionList=[],this.headerCheckbox=!1;const t=this.getSavedFiltersAsJson();if(this.list_mode||(t["limit"]=100),t["document_fields"]="supplier_name,supplier_id",t["cache"]=!1,this.use_websocket){let e=yield this.getWebSocketDashboard();return void(1!=e&&setTimeout(this.handleWebsocketDelay,5e3))}yield this.getTasks(t),this.updateTableData(),setTimeout(this.turnOnWebSocket,5e3)}catch(t){const e=ft.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}finally{this.processing=!1}}))},handleWebsocketDelay(){"received"!==this.data_status&&(logInfo("turning off websocket and switching to https",this.data_status),this.use_websocket=!1,this.fetchData(),setTimeout(this.turnOnWebSocket,5e3))},turnOnWebSocket(){this.websocketHasError||(this.use_websocket=!1)},updateTableData(){this.setPagination(),this.applyCustomFormatOnRows(),this.show_table_loader=!1,this.processing=!1},setPagination(){this.total_records>0&&this.setTotalPages()},resetPagination(){this.total_pages=0,this.current_page=1,this.total_records=0,this.offset=0},setTotalPages(){this.total_pages=Math.ceil(this.total_records/this.page_size)},calculateOffset(){this.offset=this.page_size*(this.current_page-1)},nexPageClicked(){this.calculateOffset(),this.fetchData()},applyCustomFormatOnRows(){this.tasks.forEach((e=>{e["fabAction"]=!1,e["rowSelection"]=!1;const{formatted_deadline:t}=this.getDisplayDeadline(e["deadline"]);e["deadline"]=t}))},loadData(){this.resetPagination(),this.applyFilter()},bulkDeleteRecords(e){return cs(this,void 0,void 0,(function*(){try{this.processing=!0;const t=yield It.Hg.bulkDeleteTasks(e);if(!1===t.success)throw t;yield this.fetchData()}catch(t){const e=ft.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}finally{this.processing=!1;const e=new CustomEvent("refresh_view",{});document.dispatchEvent(e)}}))},deleteRecord(e){return cs(this,void 0,void 0,(function*(){try{this.processing=!0;const t=yield It.Hg.deleteTask(e);if(!1===t.success)throw t;yield this.fetchData()}catch(t){const e=ft.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}finally{this.processing=!1;const e=new CustomEvent("refresh_view",{});document.dispatchEvent(e)}}))},rowClick(e,t){if("title"!==e){if("document_name"===e&&t["document_id"]){let e=t["document_status"];return"validated_pending_approval"===e?void this.toPendingApprovalScreen(t):"approved_pending_second_approval"===e?void this.toPendingSecondApprovalScreen(t):"rejected"===e?void this.toRejectedScreen(t["document_id"]):"in_review"===e?void this.toInReviewScreen(t["document_id"],t):this.isStatusError(e)?void this.toDocumentErrorView(t):void this.$router.push("/field_validation_v1/"+t["document_id"])}}else this.$router.push("/task/"+t["id"])},isStatusError(e){return"error"===e||"export_error"===e},toPendingApprovalScreen(e){return this.model[Dt.WE]?void this.$router.push("/ready_for_approval_v3/"+e["document_id"]):void this.$router.push("/ready-for-approval-v2/"+e["document_id"])},toPendingSecondApprovalScreen(e){this.$router.push("/ready-for-second-approval-v2/"+e["document_id"])},toRejectedScreen(e){this.$router.push("/rejected/"+e)},toInReviewScreen(e,t){this.$router.push("/in_review/"+e)},toDocumentErrorView(e){this.$router.push("/document_error/"+e["id"])},getClassesForColumn(e){let t=" cursor-pointer ";const s=["document_name","title"];return t+=s.includes(e)?" text-primary ":"",t},resetFilters(){this.resetPagination(),this.setDefaultSettings(),this.applyFilter()},changeAction(){!0===this.headerCheckbox?this.selectAllRows():this.resetAllSelectedRows(),this.checkRowExistance()},selectAllRows(){this.selectionList=[],this.tasks.forEach((e=>{e["rowSelection"]=!0,this.selectionList.push(e.id)}))},resetAllSelectedRows(){this.selectionList=[],this.headerCheckbox=!1,this.tasks.forEach((e=>{e["rowSelection"]=!1}))},checkRowExistance(){let e=0;this.selectionList=[],this.headerCheckbox=!1,this.is_any_checked=!1,this.canBulkMarkAsDone=!0,this.canBulkMarkAsUnDone=!0,this.tasks.forEach((t=>{!0===t["rowSelection"]&&(this.is_any_checked=!0,e++,this.selectionList.push(t.id),"done"===t.status&&(this.canBulkMarkAsDone=!1),"open"===t.status&&(this.canBulkMarkAsUnDone=!1))})),0===e?this.headerCheckbox=!1:this.tasks.length===e?this.headerCheckbox=!0:this.headerCheckbox=!1},setRowStyle(e){if(e.hasOwnProperty("export_data_fetched")&&!0===e["export_data_fetched"])return"exported-row"},deleteMultipalDocument(){return cs(this,void 0,void 0,(function*(){if(!this.selectionList)return;let e;this.processing=!0;try{let t=new Map;if(t.set("doc_ids",this.selectionList.join(",")),e=yield It.v1.deleteRequest(T.FH.delete_documents,t),!1===e.success)return void this.showErrorToast(e.data.message);this.headerCheckbox=!1,this.resetAllSelectedRows(),this.loadData()}catch(t){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(t)}finally{this.processing=!1;const e=new CustomEvent("refresh_view",{});document.dispatchEvent(e)}}))},removeQuickFilter(e){this.taskListSettingsMap.delete(e),this.applyFilter()},handleWebSocketResult(e){e&&(this.use_websocket=!0,this.updateTableData())},getWebSocketDashboard(){return cs(this,void 0,void 0,(function*(){try{const e={type:"dashboard",data:{}};let t=this.queryParams;t=t.replace("?","");const s=t.split("&");s.forEach((t=>{t=t.split("="),2===t.length&&(e.data[t[0]]=t[1])})),this.data_status="fetching";yield this.sendMessageToSocket(e.type,e.data);return this.updateTableData(),this.processing=!1,!0}catch(e){this.handleWebsocketDelay()}}))}},setup(){const e=(0,B.G6)(),{dashboard_data:t,isConnected:s,hasError:a}=(0,R.bP)(e),i=(0,B.Bu)(),{user_settings:n}=(0,R.bP)(i),{subscribeToChannel:o,unsubscribeToChannel:r,sendMessageByType:l}=e,d=(0,B.OP)(),{tasks:c,total_records:u,data_fetched:h,list_mode:p,offset:m,page_size:k,taskListSettingsMap:g,processing:_,columnKey:v}=(0,R.bP)(d),{getTasks:b,getSavedListSettings:f,getSavedFiltersAsJson:y,setDefaultSettings:w,getDisplayDeadline:C,saveTaskColumns:F}=d,E=(0,B.wt)(),{getDocTypeSettings:S}=E,{model:L}=(0,R.bP)(E);return{taskListSettingsMap:g,user_settings:n,columnKey:v,getTasks:b,list_mode:p,tasks:c,total_records:u,current_page:(0,se.KR)(1),total_pages:(0,se.KR)(0),offset:m,page_size:k,processing:_,getSavedListSettings:f,getSavedFiltersAsJson:y,setDefaultSettings:w,getDisplayDeadline:C,canBulkMarkAsDone:(0,se.KR)(!1),websocketHasError:a,sendMessageToSocket:l,isConnected:s,unsubscribeToChannel:r,subscribeToChannel:o,dashboard_data:t,table_columns:(0,se.KR)([]),queryParams:"",model:L,recordId:"",headerCheckbox:(0,se.KR)(!1),is_any_checked:(0,se.KR)(!1),headerFabIcon:(0,se.KR)(!1),selectionList:(0,se.KR)([]),canBulkMarkAsUnDone:(0,se.KR)(!1),use_websocket:(0,se.KR)(!1),show_table_loader:(0,se.KR)(!1),data_status:(0,se.KR)(""),saveTaskColumns:F,statusList:(0,se.KR)([]),getDocTypeSettings:S}}});var hs=s(857),ps=s(54700);const ms=(0,oe.A)(us,[["render",M],["__scopeId","data-v-02bfa9a9"]]),ks=ms;de()(us,"components",{QMarkupTable:hs.A,QPagination:ps.A,QSeparator:ts.A,QCheckbox:ve.A,QBtn:Zt.A,QMenu:Me.A,QList:es.A,QItem:ge.A,QItemSection:_e.A,QBadge:ze.A,QTooltip:Ne.A,QIcon:je.A,QTable:rs.A})}}]);