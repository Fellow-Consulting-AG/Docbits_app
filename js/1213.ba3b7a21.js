"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[1213],{81213:(e,t,i)=>{i.r(t),i.d(t,{default:()=>zt});var o=i(83673);const a={style:{margin:"20px 50px 20px 50px"}},l={style:{"font-size":"30px","margin-top":"5px"}},s={class:"row text-weight-bolder"},n={key:1,align:"center",style:{"margin-top":"15px"}},r={key:0};function d(e,t,i,d,c,p){const u=(0,o.up)("q-btn"),h=(0,o.up)("q-input"),m=(0,o.up)("q-select"),_=(0,o.up)("DefaultBtn"),g=(0,o.up)("q-space"),f=(0,o.up)("q-icon"),w=(0,o.up)("q-item"),v=(0,o.up)("q-list"),b=(0,o.up)("q-menu"),y=(0,o.up)("Dashboard_Middle_List"),k=(0,o.up)("q-pagination"),x=(0,o.up)("Dashboard_Middle_Preview"),D=(0,o.up)("Dashboard_Middle_Preview_Text"),C=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)("section",{id:"services",class:"services section-bg",style:{height:"75vh"},onDrop:t[20]||(t[20]=(...t)=>e.drop&&e.drop(...t)),onDragover:t[21]||(t[21]=(...t)=>e.allowDrop&&e.allowDrop(...t)),onDragleave:t[22]||(t[22]=(...t)=>e.dragLeave&&e.dragLeave(...t))},[(0,o._)("div",null,[(0,o._)("div",a,[(0,o._)("div",l,[(0,o._)("div",s,[(0,o.Wm)(h,{class:"searchbar",outlined:"",dense:"",debounce:"500",modelValue:e.search_filter,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.search_filter=t),t[2]||(t[2]=t=>e.applyFilter())],label:e.$t("doc2light.pages.search_by_title")},{after:(0,o.w5)((()=>[(0,o.Wm)(u,{round:"",dense:"",flat:"",icon:"filter_alt",onClick:t[0]||(t[0]=t=>e.showFilter=!e.showFilter)})])),_:1},8,["modelValue","label"]),e.showFilter?((0,o.wg)(),(0,o.j4)(m,{key:0,style:{"min-width":"10vw","margin-right":"5px",height:"40px","margin-left":"15px"},outlined:"",dense:"","label-color":"primary",modelValue:e.doc_type_filter,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.doc_type_filter=t),t[4]||(t[4]=t=>e.applyFilter())],options:e.doc_types,label:e.$t("doc2light.pages.doc_type")},null,8,["modelValue","options","label"])):(0,o.kq)("",!0),e.showFilter?((0,o.wg)(),(0,o.j4)(m,{key:1,style:{"min-width":"7vw","margin-right":"5px",height:"40px"},outlined:"",dense:"","label-color":"primary",modelValue:e.tag_filter,"onUpdate:modelValue":[t[5]||(t[5]=t=>e.tag_filter=t),t[6]||(t[6]=t=>e.applyFilter())],options:e.tags,label:e.$t("doc2light.pages.tags")},null,8,["modelValue","options","label"])):(0,o.kq)("",!0),e.showFilter?((0,o.wg)(),(0,o.j4)(m,{key:2,style:{"min-width":"10vw","margin-right":"5px",height:"40px"},outlined:"",dense:"","label-color":"primary",modelValue:e.assignee_filter,"onUpdate:modelValue":[t[7]||(t[7]=t=>e.assignee_filter=t),t[8]||(t[8]=t=>e.applyFilter())],options:e.correspondents,label:e.$t("doc2light.pages.assignee")},null,8,["modelValue","options","label"])):(0,o.kq)("",!0),e.showFilter?((0,o.wg)(),(0,o.j4)(m,{key:3,style:{"min-width":"10vw","margin-right":"5px",height:"40px"},outlined:"",dense:"","label-color":"primary",modelValue:e.time_period_filter,"onUpdate:modelValue":[t[9]||(t[9]=t=>e.time_period_filter=t),t[10]||(t[10]=t=>e.applyFilter())],options:[{label:e.$t("today"),value:"today"},{label:e.$t("week"),value:"current-week"},{label:e.$t("month"),value:"current-month"},{label:e.$t("year"),value:"current-year"},{label:e.$t("total"),value:"all"}],label:e.$t("doc2light.pages.time_periods")},null,8,["modelValue","options","label"])):(0,o.kq)("",!0),e.showFilter?((0,o.wg)(),(0,o.j4)(_,{key:4,onClick:t[11]||(t[11]=t=>e.resetFilter()),label:e.$t("doc2light.pages.reset_filter")},null,8,["label"])):(0,o.kq)("",!0),(0,o.Wm)(g),"list"==e.view?((0,o.wg)(),(0,o.j4)(u,{key:5,class:"default-btn-alfred",flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"black-icon",name:"img:list-ul.svg"}),(0,o.Wm)(b,{fit:"",align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{style:{"max-width":"100%"},bordered:"",separator:""},{default:(0,o.w5)((()=>[(0,o.wy)(((0,o.wg)(),(0,o.j4)(w,{clickable:"",onClick:t[12]||(t[12]=t=>e.view="preview")},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{style:{position:"absolute"},name:"img:grid.svg",size:"2em",class:"center black-icon"})])),_:1})),[[C]]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(w,{clickable:"",onClick:t[13]||(t[13]=t=>e.view="prev_text")},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{style:{position:"absolute"},name:"img:view-stacked.svg",size:"2em",class:"center black-icon"})])),_:1})),[[C]])])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),"preview"==e.view?((0,o.wg)(),(0,o.j4)(u,{key:6,unelevated:"",class:"default-btn-alfred"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"black-icon",name:"img:grid.svg"}),(0,o.Wm)(b,{fit:"",align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{style:{"max-width":"100%"},bordered:"",separator:""},{default:(0,o.w5)((()=>[(0,o.wy)(((0,o.wg)(),(0,o.j4)(w,{clickable:"",onClick:t[14]||(t[14]=t=>e.view="prev_text")},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{style:{position:"absolute"},name:"img:view-stacked.svg",size:"2em",class:"center black-icon"})])),_:1})),[[C]]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(w,{clickable:"",onClick:t[15]||(t[15]=t=>e.view="list")},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{style:{position:"absolute"},name:"img:list-ul.svg",size:"2em",class:"center black-icon"})])),_:1})),[[C]])])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),"prev_text"==e.view?((0,o.wg)(),(0,o.j4)(u,{key:7,unelevated:"",class:"default-btn-alfred"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"black-icon",name:"img:view-stacked.svg"}),(0,o.Wm)(b,{fit:"",align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{style:{"max-width":"100%"},bordered:"",separator:""},{default:(0,o.w5)((()=>[(0,o.wy)(((0,o.wg)(),(0,o.j4)(w,{clickable:"",onClick:t[16]||(t[16]=t=>e.view="list")},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{style:{position:"absolute"},name:"img:list-ul.svg",size:"2em",class:"center black-icon"})])),_:1})),[[C]]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(w,{clickable:"",onClick:t[17]||(t[17]=t=>e.view="preview")},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{style:{position:"absolute"},name:"img:grid.svg",size:"2em",class:"center black-icon"})])),_:1})),[[C]])])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0)])]),"list"==e.view?((0,o.wg)(),(0,o.j4)(y,{key:0,onDrop:e.drop,onDragover:e.allowDrop,onDragleave:e.dragLeave},null,8,["onDrop","onDragover","onDragleave"])):(0,o.kq)("",!0),"list"==e.view?((0,o.wg)(),(0,o.iD)("div",n,[e.apidata.documentData.doc_count>18?((0,o.wg)(),(0,o.iD)("tr",r,[(0,o._)("td",null,[(0,o.Wm)(k,{modelValue:e.paginationCount,"onUpdate:modelValue":[t[18]||(t[18]=t=>e.paginationCount=t),t[19]||(t[19]=t=>e.loadNext())],color:"primary",max:Math.ceil(e.apidata.documentData.doc_count/18),"boundary-links":""},null,8,["modelValue","max"])])])):(0,o.kq)("",!0)])):(0,o.kq)("",!0),"preview"==e.view?((0,o.wg)(),(0,o.j4)(x,{key:2,onDrop:e.drop,onDragover:e.allowDrop,onDragleave:e.dragLeave},null,8,["onDrop","onDragover","onDragleave"])):(0,o.kq)("",!0),"prev_text"==e.view?((0,o.wg)(),(0,o.j4)(D,{key:3,onDrop:e.drop,onDragover:e.allowDrop,onDragleave:e.dragLeave},null,8,["onDrop","onDragover","onDragleave"])):(0,o.kq)("",!0)])])],32)}var c=i(77378),p=i(61959),u=i(45401),h=i(62323),m=i(98880);const _={class:"full-width",style:{"margin-top":"10px"}},g={style:{"text-align":"left",color:"white",background:"#0E3341"}},f={class:"tablebody"},w=["onClick"],v=["onClick"],b=["onClick"],y=["onClick"],k=["onClick"],x=["onClick"],D=["onClick"],C={style:{width:"55vw","min-height":"65vh"}},q={style:{width:"23vw"}},H={style:{"min-width":"30vw","min-height":"70vh"}};function W(e,t,i,a,l,s){const n=(0,o.up)("q-checkbox"),r=(0,o.up)("DeleteQfab"),d=(0,o.up)("q-tooltip"),c=(0,o.up)("q-fab-action"),p=(0,o.up)("q-fab"),u=(0,o.up)("q-chip"),W=(0,o.up)("q-scroll-area"),F=(0,o.up)("q-markup-table"),Z=(0,o.up)("FolderView"),P=(0,o.up)("q-dialog"),S=(0,o.up)("LexOfficeExport"),T=(0,o.up)("DocumentPreview");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",_,[(0,o.Wm)(F,{flat:"",class:"sticky-column-for-table q-table-seperator",style:{"max-height":"65vh",overflow:"auto"},dense:"",id:"primary-table"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",g,[(0,o._)("th",null,[(0,o.Wm)(n,{dark:"",modelValue:e.headerCheckbox,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.headerCheckbox=t),t[1]||(t[1]=t=>e.changeAction())]},null,8,["modelValue"]),(0,o.Wm)(p,{modelValue:e.headerFabIcon,"onUpdate:modelValue":t[4]||(t[4]=t=>e.headerFabIcon=t),disable:e.selection.length<1,"label-position":"top","data-cy":"actions","external-label":"",icon:"more_vert",direction:"down",padding:"xs",flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{info:e.$t("doc2light.pages.document"),tooltip:e.$t("delete"),function:e.deleteMarked,argument:e.selection},null,8,["info","tooltip","function","argument"]),(0,o.Wm)(c,{padding:"5px","external-label":"","label-position":"top","data-cy":"upload",color:"purple",icon:"outbox",onClick:t[2]||(t[2]=t=>e.getOrgStoreData())},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,h.zw)(e.$t("upload_to_store")),1)])),_:1})])),_:1}),(0,o.Wm)(c,{padding:"5px","external-label":"","label-position":"top","data-cy":"upload",color:"orange",icon:"upload_file",onClick:t[3]||(t[3]=t=>e.lexofficepopup=!0)},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,h.zw)(e.$t("doc2light.popups.export_lexoffice")),1)])),_:1})])),_:1})])),_:1},8,["modelValue","disable"])]),(0,o._)("th",null,(0,h.zw)(e.$t("doc2light.table.asn")),1),(0,o._)("th",null,(0,h.zw)(e.$t("doc2light.table.title")),1),(0,o._)("th",null,(0,h.zw)(e.$t("doc2light.pages.doc_type")),1),(0,o._)("th",null,(0,h.zw)(e.$t("doc2light.pages.tags")),1),(0,o._)("th",null,(0,h.zw)(e.$t("doc2light.pages.assignee")),1),(0,o._)("th",null,(0,h.zw)(e.$t("doc2light.table.created_on")),1),(0,o._)("th",null,(0,h.zw)(e.$t("doc2light.table.modified_at")),1),(0,o._)("th",null,(0,h.zw)(e.$t("doc2light.table.actions")),1)])]),(0,o._)("tbody",f,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.apidata.dashboardDocs.docs,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id},[(0,o._)("td",null,[(0,o.Wm)(n,{modelValue:t.rowSelection,"onUpdate:modelValue":[e=>t.rowSelection=e,i=>e.selectionList(t)]},null,8,["modelValue","onUpdate:modelValue"])]),(0,o._)("td",{onClick:i=>{e.onRowClick(t.id)}},(0,h.zw)(e.replaceEmpty(t.asi)),9,w),(0,o._)("td",{onClick:i=>{e.onRowClick(t.id)},class:"documnetCol"},(0,h.zw)(e.replaceEmpty(t.name)),9,v),(0,o._)("td",{onClick:i=>{e.onRowClick(t.id)}},(0,h.zw)(e.replaceEmpty(t.doc_type.name)),9,b),(0,o._)("td",{onClick:i=>{e.onRowClick(t.id)},class:"tags"},[(0,o.Wm)(W,{style:{height:"40px","min-width":"200px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.tags,(t=>((0,o.wg)(),(0,o.j4)(u,{key:t.id,dense:"",style:(0,h.j5)({"background-color":t.color,color:e.color_check(t.color)})},{default:(0,o.w5)((()=>[(0,o.Uk)((0,h.zw)(e.replaceEmpty(t.name)),1)])),_:2},1032,["style"])))),128))])),_:2},1024)],8,y),(0,o._)("td",{onClick:i=>{e.onRowClick(t.id)}},(0,h.zw)(e.replaceEmpty(t.correspondent.name)),9,k),(0,o._)("td",{onClick:i=>{e.onRowClick(t.id)}},(0,h.zw)(e.replaceEmpty(e.formateDate(t.created_on,"YYYY-MM-DD HH:mm:ss"))),9,x),(0,o._)("td",{onClick:i=>{e.onRowClick(t.id)}},(0,h.zw)(e.replaceEmpty(e.formateDate(t.last_modified,"YYYY-MM-DD HH:mm:ss"))),9,D),(0,o._)("td",null,[(0,o.Wm)(p,{modelValue:t["fabaction"],"onUpdate:modelValue":e=>t["fabaction"]=e,"label-position":"bottom","data-cy":"actions","external-label":"",icon:"more_vert",direction:"left",padding:"xs",flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{info:e.$t("doc2light.pages.document"),tooltip:e.$t("delete"),function:e.onTrashbinClick,argument:t.id},null,8,["info","tooltip","function","argument"]),(0,o.Wm)(c,{padding:"5px","external-label":"","label-position":"bottom","data-cy":"upload",color:"orange",icon:"mode_edit_outline",onClick:i=>e.onRowClick(t.id)},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,h.zw)(e.$t("edit")),1)])),_:1})])),_:2},1032,["onClick"]),(0,o.Wm)(c,{padding:"5px","external-label":"","label-position":"bottom","data-cy":"upload",color:"blue",icon:"file_download",onClick:i=>e.onDownloadClick(t)},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,h.zw)(e.$t("download")),1)])),_:1})])),_:2},1032,["onClick"]),(0,o.Wm)(c,{padding:"5px","external-label":"","label-position":"bottom","data-cy":"preview",color:"green",icon:"visibility",onClick:i=>e.ShowDocPreview(t)},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,h.zw)(e.$t("doc2light.pages.view")),1)])),_:1})])),_:2},1032,["onClick"]),(0,o.Wm)(c,{padding:"5px","external-label":"","label-position":"bottom","data-cy":"account_tree",color:"yellow",icon:"account_tree"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,h.zw)(e.$t("account_tree")),1)])),_:1})])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])])])))),128))])])),_:1})]),(0,o.Wm)(P,{modelValue:e.uploadpopup,"onUpdate:modelValue":t[5]||(t[5]=t=>e.uploadpopup=t),onKeydown:t[6]||(t[6]=(0,m.D2)((t=>e.uploadpopup=!1),["esc"]))},{default:(0,o.w5)((()=>[(0,o._)("div",C,[(0,o.Wm)(Z,{mode:"popup",selection:e.selection},null,8,["selection"])])])),_:1},8,["modelValue"]),(0,o.Wm)(P,{modelValue:e.lexofficepopup,"onUpdate:modelValue":t[7]||(t[7]=t=>e.lexofficepopup=t),onKeydown:t[8]||(t[8]=(0,m.D2)((t=>e.lexofficepopup=!1),["esc"]))},{default:(0,o.w5)((()=>[(0,o._)("div",q,[(0,o.Wm)(S,{selection:e.selection},null,8,["selection"])])])),_:1},8,["modelValue"]),(0,o.Wm)(P,{modelValue:e.preview_doc,"onUpdate:modelValue":t[9]||(t[9]=t=>e.preview_doc=t),onKeydown:t[10]||(t[10]=(0,m.D2)((t=>e.preview_doc=!1),["esc"]))},{default:(0,o.w5)((()=>[(0,o._)("div",H,[(0,o.Wm)(T,{id:e.preview_doc_id},null,8,["id"])])])),_:1},8,["modelValue"])],64)}var F=i(25616),Z=i(7883),P=i(79261),S=i(10321);const T={class:"text-weight-bold"};function z(e,t,i,a,l,s){const n=(0,o.up)("q-toolbar-title"),r=(0,o.up)("q-btn"),d=(0,o.up)("q-toolbar"),c=(0,o.up)("q-select"),p=(0,o.up)("q-card-section"),u=(0,o.up)("CancelBtn"),m=(0,o.up)("SaveBtn"),_=(0,o.up)("q-card-actions"),g=(0,o.up)("q-card"),f=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(g,null,{default:(0,o.w5)((()=>[(0,o._)("form",null,[(0,o.Wm)(d,{class:"text-white secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o._)("span",T,(0,h.zw)(e.$t("doc2light.popups.export_lexoffice")),1)])),_:1}),(0,o.wy)((0,o.Wm)(r,{flat:"",round:"",dense:"",icon:"close"},null,512),[[f]])])),_:1}),(0,o.Wm)(p,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{filled:"",style:{"margin-top":"15px"},modelValue:e.store_selection,"onUpdate:modelValue":t[0]||(t[0]=t=>e.store_selection=t),options:e.store_options,label:"Store"},null,8,["modelValue","options"])])),_:1}),(0,o.Wm)(_,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(u),(0,o.Wm)(m,{onClick:t[1]||(t[1]=t=>e.uploadToSpace()),class:"q-mr-sm"})])),_:1})])])),_:1})}var V=i(64252),Q=i(65536),M=i(97767),U=i(50442),R=function(e,t,i,o){function a(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,l){function s(e){try{r(o.next(e))}catch(t){l(t)}}function n(e){try{r(o["throw"](e))}catch(t){l(t)}}function r(e){e.done?i(e.value):a(e.value).then(s,n)}r((o=o.apply(e,t||[])).next())}))};const j=(0,o.aZ)({el:"#app",mixins:[u.Z,c.Z],props:["selection"],components:{SaveBtn:U.Z,CancelBtn:M.Z},mounted(){this.getStores()},data(){return{}},setup(){const e=(0,Q.p)(),{uploadFiletoSpace:t}=((0,S.Jk)(e),e);return{uploadFiletoSpace:t,add_row:(0,p.iH)({}),store_selection:(0,p.iH)({label:"Select Store",value:""}),store_options:(0,p.iH)([])}},methods:{getStores(){return R(this,void 0,void 0,(function*(){try{yield V.wk.getAccessableStores().then((e=>{e.exports.forEach((e=>{if("lexoffice"==e.store_type){const t={label:e.name,value:e.id};this.store_options.push(t)}})),this.store_selection=this.store_options[0]}))}catch(e){this.showErrorToast("Failed getting authenticated Stores")}}))},uploadToSpace(){return R(this,void 0,void 0,(function*(){try{const e={label:"",path:"Fake Path",id:"Fake ID"};this.showLoading(),yield this.uploadFiletoSpace(this.selection,e,this.overwrite,this.store_selection.value,"lexoffice").then((e=>{this.showSuccessToast("Files Uploaded to Space")})),this.hideLoading()}catch(e){this.hideLoading(),this.showErrorToast("Files could not be uploaded. Please try again")}}))},init_view(){}}});var L=i(74260),$=i(10151),O=i(39570),I=i(13747),E=i(2165),Y=i(25589),A=i(72448),B=i(99367),N=i(60677),J=i(7518),K=i.n(J);const G=(0,L.Z)(j,[["render",z]]),X=G;K()(j,"components",{QCard:$.Z,QToolbar:O.Z,QToolbarTitle:I.Z,QBtn:E.Z,QCardSection:Y.Z,QSelect:A.Z,QCardActions:B.Z}),K()(j,"directives",{ClosePopup:N.Z});const ee=e=>((0,o.dD)("data-v-6a906b9f"),e=e(),(0,o.Cn)(),e),te={class:"popup-heading",style:{color:"#2388AE"}},ie={class:"row",style:{border:"1px solid","margin-right":"20px","min-width":"130px"}},oe={style:{margin:"auto 5px auto 5px",width:"40px"},align:"center"},ae={style:{margin:"auto 10px auto 5px","min-width":"30px"},align:"center"},le=ee((()=>(0,o._)("hr",{style:{color:"#cecece"}},null,-1))),se={key:0,class:"image"};function ne(e,t,i,a,l,s){const n=(0,o.up)("q-toolbar-title"),r=(0,o.up)("q-separator"),d=(0,o.up)("q-input"),c=(0,o.up)("q-btn"),p=(0,o.up)("CancelBtn"),u=(0,o.up)("q-card-actions"),m=(0,o.up)("q-toolbar"),_=(0,o.up)("vue-pdf-embed"),g=(0,o.up)("q-card-section"),f=(0,o.up)("q-card"),w=(0,o.up)("Loader"),v=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"primary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o._)("span",te,(0,h.zw)(e.$t("preview")),1)])),_:1}),(0,o.Wm)(u,{align:"right"},{default:(0,o.w5)((()=>[(0,o._)("div",ie,[(0,o._)("span",oe,(0,h.zw)(e.$t("doc2light.pages.page")),1),(0,o.Wm)(r,{vertical:""}),(0,o.Wm)(d,{dense:"",borderless:"",modelValue:e.inputPage,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.inputPage=t),t[1]||(t[1]=e=>{this.changePage(e)})],style:{width:"30px","margin-left":"5px"}},null,8,["modelValue"]),(0,o.Wm)(r,{vertical:""}),(0,o._)("span",ae,(0,h.zw)(e.$t("doc2light.pages.of")+" "+e.pageCount),1),(0,o.Wm)(r,{vertical:""}),(0,o.Wm)(c,{flat:"",icon:"navigate_before",style:{width:"20px"},onClick:t[2]||(t[2]=t=>this.changePage(e.inputPage-1))}),(0,o.Wm)(r,{vertical:""}),(0,o.Wm)(c,{flat:"",icon:"navigate_next",style:{width:"20px"},onClick:t[3]||(t[3]=t=>this.changePage(e.inputPage+1))})]),(0,o.Wm)(p),(0,o.wy)((0,o.Wm)(c,{label:e.$t("edit"),onClick:e.goToDocument,color:"primary",class:"q-mr-sm primary-gradient",unelevated:""},null,8,["label","onClick"]),[[v]])])),_:1})])),_:1}),le,(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[e.image?((0,o.wg)(),(0,o.iD)("div",se,[(0,o.Wm)(_,{ref:"pdfRef",source:e.image,style:{"max-height":"72vh"},page:e.page,onRendered:t[4]||(t[4]=t=>e.getRef())},null,8,["source","page"])])):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(w)],64)}var re=i(72113),de=i(54268),ce=i(45752),pe=i.n(ce),ue=i(30052),he=i.n(ue),me=function(e,t,i,o){function a(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,l){function s(e){try{r(o.next(e))}catch(t){l(t)}}function n(e){try{r(o["throw"](e))}catch(t){l(t)}}function r(e){e.done?i(e.value):a(e.value).then(s,n)}r((o=o.apply(e,t||[])).next())}))};const _e=(0,o.aZ)({el:"#app",mixins:[u.Z,c.Z],props:["id"],components:{Loader:re.Z,VuePdfEmbed:pe(),CancelBtn:M.Z},data(){return{}},mounted(){this.imageHandler()},methods:{changePage(e){Number(e)<=this.pageCount?(this.inputPage=e,this.page=Number(e)):this.showErrorToast("Select a valid page")},goToDocument(){this.$router.push("/alfred/document/"+this.id)},imageHandler(){return me(this,void 0,void 0,(function*(){this.showLoading();var e=this.id;const t=yield(0,de.O_)();try{const i=yield he().get(de.hi.download_doc+"/"+e,{responseType:"blob",headers:{Authorization:t}});this.filedata=i.data,this.image=URL.createObjectURL(new Blob([i.data,e+".pdf",i.headers["content-type"]]))}catch(i){this.showErrorToast("There was an issue getting the pdf")}this.hideLoading()}))},getRef(){this.pageCount=this.$refs["pdfRef"].pageCount}},setup(){return{pageCount:(0,p.iH)(1),image:(0,p.iH)(""),page:(0,p.iH)(1),inputPage:(0,p.iH)(1),filedata:(0,p.iH)()}}});var ge=i(65869),fe=i(64689);const we=(0,L.Z)(_e,[["render",ne],["__scopeId","data-v-6a906b9f"]]),ve=we;K()(_e,"components",{QCard:$.Z,QToolbar:O.Z,QToolbarTitle:I.Z,QCardActions:B.Z,QSeparator:ge.Z,QInput:fe.Z,QBtn:E.Z,QCardSection:Y.Z}),K()(_e,"directives",{ClosePopup:N.Z});var be=i(99321),ye=function(e,t,i,o){function a(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,l){function s(e){try{r(o.next(e))}catch(t){l(t)}}function n(e){try{r(o["throw"](e))}catch(t){l(t)}}function r(e){e.done?i(e.value):a(e.value).then(s,n)}r((o=o.apply(e,t||[])).next())}))};const ke=(0,o.aZ)({data(){return{}},props:{},components:{LexOfficeExport:X,DeleteQfab:be.Z,FolderView:Z.Z,DocumentPreview:ve},mixins:[u.Z,c.Z],methods:{ShowDocPreview(e){this.preview_doc_id=e.id,this.preview_doc=!0},replaceEmpty(e){return e||(e="-"),e},onRowClick(e){this.$router.push("/alfred/document/"+e)},deleteMarked(e){this.showLoading(),e.forEach((e=>ye(this,void 0,void 0,(function*(){yield this.delete_doc(e)})))),this.doc_skip=0,this.hideLoading()},onTrashbinClick(e){this.delete_doc(e),this.resetFilter()},onDownloadClick(e){return ye(this,void 0,void 0,(function*(){yield V.zU.download_doc(e.id).then((t=>{var i=document.createElement("a");e["name"].endsWith(".pdf")?i.download=e["name"]:i.download=e["name"]+".pdf",i.href=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}))}))},changeAction(){!0===this.headerCheckbox?this.selectAllRows():(this.resetAllSelectedRows(),this.headerFabIcon=!1)},selectionList(e){const t=this.selection.indexOf(e.id);t>-1?(this.selection.splice(t,1),this.document_list[e.id].rowSelection=!1,this.selection.length<1&&(this.headerFabIcon=!1)):(this.selection.push(e.id),this.document_list[e.id].rowSelection=!0)},selectAllRows(){this.headerCheckbox=!0;for(const[e,t]of Object.entries(this.document_list))this.document_list[e].rowSelection=!0,this.selection.push(e)},resetAllSelectedRows(){this.selection=[],this.headerCheckbox=!1;for(const[e,t]of Object.entries(this.document_list))this.document_list[e].rowSelection=!1},setupDropdowns(){for(const[e,t]of Object.entries(this.apidata.correspondentData.data))this.correspondents.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.docTypeData.data))this.doc_types.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.tagData.data))this.tags.push({value:t.id,label:t.name})},resetFilter(){this.assignee_filter="",this.doc_type_filter="",this.tag_filter="",this.search_filter="",this.applyFilter()},applyFilter(){return ye(this,void 0,void 0,(function*(){this.queryParams="",this.quickFilterMap.clear(),this.queryParams+="?limit=18",this.queryParams+="&skip="+this.doc_skip.toString(),this.assignee_filter&&(this.quickFilterMap.set("assignee",this.assignee_filter),this.queryParams+="&correspondent="+this.assignee_filter.value),this.doc_type_filter&&(this.quickFilterMap.set("doc_type",this.doc_type_filter),this.queryParams+="&doc_type="+this.doc_type_filter.value),this.tag_filter&&(this.quickFilterMap.set("tags",this.tag_filter),this.queryParams+="&tags="+this.tag_filter.value),""!==this.search_filter&&(this.quickFilterMap.set("searchInput",this.search_filter),this.queryParams+="&name_filter="+this.search_filter.trim()),yield this.setDocumentsDashboard(this.queryParams),this.prepareDashboard(),this.document_list=this.apidata.dashboardDocs.docs,this.resetAllSelectedRows()}))},formateDate(e,t){return F.ZP.formatDate(e,t)},color_check(e){if(null==e)return"black";var t=e.substring(1),i=parseInt(t,16),o=i>>16&255,a=i>>8&255,l=i>>0&255,s=.2126*o+.7152*a+.0722*l;return s<40?"white":"black"},getOrgStoreData(){this.showLoading();try{this.hideLoading(),this.uploadpopup=!0}catch(e){this.showErrorToast("Something Failed"),this.hideLoading()}}},setup(){const e=(0,P.p2)(),{loadStoreContent:t}=e,i=(0,S.Jk)(e),o=(0,P.Wb)(),{prepareDashboard:a,setDocumentsDashboard:l,loadFromServer:s,delete_doc:n,setCorrespondentsFromServer:r,setTagsFromServer:d,setDocTypesfromServer:c,change_pagecount:u,getCurrentPageCount:h}=o,m=(0,S.Jk)(o);return{loadStoreContent:t,getCurrentPageCount:h,change_pagecount:u,space_apidata:(0,p.iH)(i),apidata:(0,p.iH)(m),preview_doc_id:(0,p.iH)(""),prepareDashboard:a,setDocumentsDashboard:l,loadFromServer:s,delete_doc:n,setCorrespondentsFromServer:r,setDocTypesfromServer:c,setTagsFromServer:d,document_list:(0,p.iH)({}),view:(0,p.iH)("list"),selection:(0,p.iH)([]),headerCheckbox:(0,p.iH)(!1),headerFabIcon:(0,p.iH)(!1),showFilter:(0,p.iH)(!1),preview_doc:(0,p.iH)(!1),correspondents:(0,p.iH)([]),doc_types:(0,p.iH)([]),tags:(0,p.iH)([]),search_filter:(0,p.iH)(""),tag_filter:(0,p.iH)(),assignee_filter:(0,p.iH)(),doc_type_filter:(0,p.iH)(),quickFilterMap:(0,p.iH)(new Map),queryParams:(0,p.iH)(""),skip:(0,p.iH)(1),doc_skip:(0,p.iH)(0),store:(0,p.iH)({}),folders:(0,p.iH)([]),uploadpopup:(0,p.iH)(!1),lexofficepopup:(0,p.iH)(!1),selected:(0,p.iH)(null)}}});var xe=i(30481),De=i(17132),Ce=i(65735),qe=i(39200),He=i(39975),We=i(5363),Fe=i(47704),Ze=i(67030),Pe=i(87300),Se=i(46778);const Te=(0,L.Z)(ke,[["render",W]]),ze=Te;K()(ke,"components",{QMarkupTable:xe.Z,QTable:De.Z,QCheckbox:Ce.Z,QFab:qe.Z,QFabAction:He.Z,QTooltip:We.Z,QScrollArea:Fe.Z,QChip:Ze.Z,QPagination:Pe.Z,QDialog:Se.Z});const Ve={class:"full-width",style:{"margin-top":"10px"}},Qe={key:0,style:{"margin-left":"15px",width:"120px",height:"120px"}},Me=["onClick"],Ue={key:1,style:{"margin-left":"15px",width:"120px",height:"120px"}},Re=(0,o._)("hr",null,null,-1),je={dense:"",class:"name"},Le={dense:"",class:"date"},$e=(0,o._)("hr",null,null,-1),Oe={class:"row"},Ie=(0,o._)("div",{class:"col-1"},null,-1);function Ee(e,t,i,a,l,s){const n=(0,o.up)("q-img"),r=(0,o.up)("q-btn"),d=(0,o.up)("q-card"),c=(0,o.up)("q-table");return(0,o.wg)(),(0,o.iD)("div",Ve,[(0,o.Wm)(c,{grid:"",class:"card-container-class",rows:e.document_list,"no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),"row-key":"doc_id","rows-per-page-options":[14]},{item:(0,o.w5)((t=>[(0,o.Wm)(d,{id:"table",flat:"",ref:"table",class:"q-ma-sm tileBGColor",style:{width:"150px",height:"215px",border:"1px solid"}},{default:(0,o.w5)((()=>["error"==t.row.image_data?((0,o.wg)(),(0,o.iD)("div",Qe,[(0,o._)("div",{class:"text-center",onClick:i=>e.onRowClick(t.row)}," No Image found! "+(0,h.zw)(t.row.image_data),9,Me)])):((0,o.wg)(),(0,o.iD)("div",Ue,[(0,o.Wm)(n,{src:t.row.image,onClick:i=>e.onRowClick(t.row),style:{"max-height":"120px"}},null,8,["src","onClick"])])),Re,(0,o._)("div",je,(0,h.zw)(t.row.name),1),(0,o._)("div",Le,(0,h.zw)(t.row.created_on?e.formateDate(t.row.created_on,"YYYY-MM-DD HH:mm:ss"):"-"),1),$e,(0,o._)("div",Oe,[Ie,(0,o.Wm)(r,{style:{"margin-bottom":"3px",width:"35px",height:"15px","margin-left":"10px"},class:"col-3",icon:"download",dense:"",flat:"",onClick:i=>e.onDownloadClick(t.row)},null,8,["onClick"]),(0,o.Wm)(r,{style:{"margin-bottom":"3px",width:"35px",height:"30px"},class:"col-4",icon:"edit",size:"8px",dense:"",flat:"",onClick:i=>e.onRowClick(t.row)},null,8,["onClick"]),(0,o.Wm)(r,{style:{"margin-bottom":"3px",width:"35px",height:"30px"},class:"col-3",icon:"delete_outline",size:"8px",dense:"",flat:"",onClick:i=>e.onTrashbinClick(t.row)},null,8,["onClick"])])])),_:2},1536)])),_:1},8,["rows","no-data-label"])])}var Ye=function(e,t,i,o){function a(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,l){function s(e){try{r(o.next(e))}catch(t){l(t)}}function n(e){try{r(o["throw"](e))}catch(t){l(t)}}function r(e){e.done?i(e.value):a(e.value).then(s,n)}r((o=o.apply(e,t||[])).next())}))};const Ae=(0,o.aZ)({data(){return{showIcons:!1,supportURL:"https://cloudintegration.eu/doc2_support"}},props:[],components:{},mixins:[c.Z],mounted(){for(const[e,t]of Object.entries(this.apidata.dashboardDocs.docs))this.initView(e,t);this.setupDropdowns()},methods:{initView(e,t){return Ye(this,void 0,void 0,(function*(){try{t["image_data"]=yield this.get_doc_thumbnail(e),"error"!=t["image_data"]&&(t["image"]=URL.createObjectURL(t["image_data"]))}catch(i){t["image_data"]="There was an error"}this.document_list.push(t),this.show_image=!0}))},formateDate(e,t){return F.ZP.formatDate(e,t)},onRowClick(e){this.$router.push("/alfred/document/"+e.id)},onTrashbinClick(e){return Ye(this,void 0,void 0,(function*(){yield this.delete_doc(e.id)}))},onDownloadClick(e){return Ye(this,void 0,void 0,(function*(){yield V.zU.download_doc(e.id).then((t=>{var i=document.createElement("a");e["name"].endsWith(".pdf")?i.download=e["name"]:i.download=e["name"]+".pdf",i.href=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}))}))},setupDropdowns(){for(const[e,t]of Object.entries(this.apidata.correspondentData.data))this.correspondents.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.docTypeData.data))this.doc_types.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.tagData.data))this.tags.push({value:t.id,label:t.name})},removeTag(e,t){return Ye(this,void 0,void 0,(function*(){yield this.remove_tag_from_doc(e.id,t.id)}))},color_check(e){if(null==e)return"black";var t=e.substring(1),i=parseInt(t,16),o=i>>16&255,a=i>>8&255,l=i>>0&255,s=.2126*o+.7152*a+.0722*l;return s<40?"white":"black"}},setup(){const e=(0,P.Wb)(),t=(0,S.Jk)(e),{setDocumentsDashboard:i,delete_doc:o,get_doc_thumbnail:a,remove_tag_from_doc:l}=e;return{show_image:(0,p.iH)(!1),apidata:(0,p.iH)(t),setDocumentsDashboard:i,delete_doc:o,get_doc_thumbnail:a,remove_tag_from_doc:l,view:(0,p.iH)("list"),document_list:(0,p.iH)([]),showFilter:(0,p.iH)(!1),correspondents:(0,p.iH)([]),doc_types:(0,p.iH)([]),tags:(0,p.iH)([]),search_filter:(0,p.iH)(""),tag_filter:(0,p.iH)(),assignee_filter:(0,p.iH)(),doc_type_filter:(0,p.iH)(),quickFilterMap:(0,p.iH)(new Map),queryParams:(0,p.iH)(""),paginationCount:(0,p.iH)(1),skip:(0,p.iH)(1),doc_skip:(0,p.iH)(0)}}});var Be=i(24027);const Ne=(0,L.Z)(Ae,[["render",Ee]]),Je=Ne;K()(Ae,"components",{QTable:De.Z,QCard:$.Z,QImg:Be.Z,QChip:Ze.Z,QBtn:E.Z});const Ke={class:"full-width",style:{"margin-top":"10px","margin-bottom":"100px"}},Ge={class:"row"},Xe={key:0,class:"col-3",style:{"margin-left":"5px"}},et=["onClick"],tt={key:1,class:"col-3",style:{"margin-left":"5px"}},it={class:"col-8"},ot={class:"row",style:{"font-size":"15px","margin-bottom":"10px"}},at={class:"col-5 name_tags",style:{"margin-left":"10px"}},lt={class:"col-5 name_tags"},st={style:{"margin-left":"8px",height:"120px"}},nt={class:"content"},rt={style:{"margin-top":"3px","margin-left":"10px"}},dt={class:"row"},ct={class:"col-3"},pt={class:"name_tags"},ut=(0,o._)("div",{class:"col-1"},null,-1),ht={class:"col-3"},mt={class:"name_tags"},_t=(0,o._)("div",{class:"col-1"},null,-1),gt={class:"col-3"},ft={class:"row",style:{"font-size":"12px","margin-top":"5px"}},wt={style:{"margin-right":"40px"}},vt={class:"text-center",style:{"border-left":"2px solid grey"}};function bt(e,t,i,a,l,s){const n=(0,o.up)("q-img"),r=(0,o.up)("q-chip"),d=(0,o.up)("q-icon"),c=(0,o.up)("q-btn"),p=(0,o.up)("q-card"),u=(0,o.up)("q-table");return(0,o.wg)(),(0,o.iD)("div",Ke,[(0,o.Wm)(u,{grid:"",class:"card-container-class",rows:e.document_list,"row-key":"doc_id","no-data-label":e.$t("pages.messages.NO_RECORD_FOUND"),"rows-per-page-options":[6]},{item:(0,o.w5)((t=>[(0,o.Wm)(p,{id:"table",ref:"table",flat:"",class:"q-ma-sm tileBGColor",style:{height:"220px",width:"48%",border:"2px solid grey"}},{default:(0,o.w5)((()=>[(0,o._)("div",Ge,["error"==t.row.image_data?((0,o.wg)(),(0,o.iD)("div",Xe,[(0,o._)("div",{class:"text-center",onClick:i=>e.onRowClick(t.row),style:{height:"216px"}}," No Image found! ",8,et)])):((0,o.wg)(),(0,o.iD)("div",tt,[(0,o.Wm)(n,{src:t.row.image,onClick:i=>e.onRowClick(t.row),style:{height:"216px"}},null,8,["src","onClick"])])),(0,o._)("div",it,[(0,o._)("div",ot,[(0,o._)("span",at,(0,h.zw)(t.row.name),1),(0,o._)("span",lt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.row.tags,(i=>((0,o.wg)(),(0,o.j4)(r,{key:i.id,dense:"",style:(0,h.j5)([{height:"18px"},{"background-color":i.color,color:e.color_check(i.color)}]),removable:"",onRemove:o=>e.removeTag(t.row,i)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,h.zw)(i.name),1)])),_:2},1032,["style","onRemove"])))),128))])]),(0,o._)("div",st,[(0,o._)("div",nt,(0,h.zw)(t.row.content),1)]),(0,o._)("div",rt,[(0,o._)("div",dt,[(0,o._)("div",ct,[(0,o._)("div",pt,[(0,o.Wm)(d,{name:"description"}),(0,o.Uk)(" "+(0,h.zw)(t.row.doc_type.name),1)])]),ut,(0,o._)("div",ht,[(0,o._)("div",mt,[(0,o.Wm)(d,{name:"message"}),(0,o.Uk)(" "+(0,h.zw)(t.row.correspondent.name),1)])]),_t,(0,o._)("div",gt,[(0,o._)("div",null,[(0,o.Wm)(d,{name:"folder"}),(0,o.Uk)(" "+(0,h.zw)(t.row.path),1)])])]),(0,o._)("div",ft,[(0,o._)("div",wt,(0,h.zw)(e.$t("doc2light.table.created_on")+" ")+" "+(0,h.zw)(t.row.created_on?e.formateDate(t.row.created_on,"YYYY-MM-DD HH:mm"):"-"),1),(0,o.Uk)(" "+(0,h.zw)(e.$t("doc2light.table.modified_at")+" ")+" "+(0,h.zw)(t.row.last_modified?e.formateDate(t.row.last_modified,"YYYY-MM-DD"):"-"),1)])])]),(0,o._)("div",vt,[(0,o._)("div",null,[(0,o.Wm)(c,{style:{"margin-top":"50px","margin-bottom":"15px"},flat:"",icon:"download","text-color":"primary",size:"15px",dense:"",onClick:i=>e.onDownloadClick(t.row)},null,8,["onClick"])]),(0,o._)("div",null,[(0,o.Wm)(c,{style:{"margin-bottom":"15px"},flat:"","text-color":"primary",icon:"edit",size:"15px",dense:"",onClick:i=>e.onRowClick(t.row)},null,8,["onClick"])]),(0,o._)("div",null,[(0,o.Wm)(c,{flat:"","text-color":"primary",icon:"delete_outline",size:"15px",dense:"",onClick:i=>e.onTrashbinClick(t.row)},null,8,["onClick"])])])])])),_:2},1536)])),_:1},8,["rows","no-data-label"])])}var yt=function(e,t,i,o){function a(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,l){function s(e){try{r(o.next(e))}catch(t){l(t)}}function n(e){try{r(o["throw"](e))}catch(t){l(t)}}function r(e){e.done?i(e.value):a(e.value).then(s,n)}r((o=o.apply(e,t||[])).next())}))};const kt=(0,o.aZ)({data(){return{showIcons:!1,supportURL:"https://cloudintegration.eu/doc2_support"}},props:{},components:{},mounted(){for(const[e,t]of Object.entries(this.apidata.dashboardDocs.docs))this.initView(e,t);this.setupDropdowns()},methods:{initView(e,t){return yt(this,void 0,void 0,(function*(){try{t["image_data"]=yield this.get_doc_thumbnail(e),"error"!=t["image_data"]&&(t["image"]=URL.createObjectURL(t["image_data"]))}catch(i){t["image_data"]="error"}try{t["content"]=yield this.getOcrText(e),null==t["content"]&&(t["content"]="There was an error!")}catch(i){t["content"]="There was an error!"}this.document_list.push(t),this.show_image=!0}))},getOcrText(e){return yt(this,void 0,void 0,(function*(){const t=yield V.zU.get_doc_text(e);return t.data.text}))},formateDate(e,t){return F.ZP.formatDate(e,t)},onRowClick(e){this.$router.push("/alfred/document/"+e.id)},onTrashbinClick(e){return yt(this,void 0,void 0,(function*(){yield this.delete_doc(e.id)}))},removeTag(e,t){return yt(this,void 0,void 0,(function*(){yield this.remove_tag_from_doc(e.id,t.id)}))},onDownloadClick(e){return yt(this,void 0,void 0,(function*(){yield V.zU.download_doc(e.id).then((t=>{var i=document.createElement("a");e["name"].endsWith(".pdf")?i.download=e["name"]:i.download=e["name"]+".pdf",i.href=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}))}))},setupDropdowns(){for(const[e,t]of Object.entries(this.apidata.correspondentData.data))this.correspondents.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.docTypeData.data))this.doc_types.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.tagData.data))this.tags.push({value:t.id,label:t.name})},resetFilter(){this.assignee_filter="",this.doc_type_filter="",this.tag_filter="",this.search_filter="",this.applyFilter()},applyFilter(){return yt(this,void 0,void 0,(function*(){this.queryParams="",this.quickFilterMap.clear(),this.queryParams+="?limit=6",this.queryParams+="&skip="+this.doc_skip.toString(),this.assignee_filter&&(this.quickFilterMap.set("assignee",this.assignee_filter),this.queryParams+="&correspondent="+this.assignee_filter.value),this.doc_type_filter&&(this.quickFilterMap.set("doc_type",this.doc_type_filter),this.queryParams+="&doc_type="+this.doc_type_filter.value),this.tag_filter&&(this.quickFilterMap.set("tags",this.tag_filter),this.queryParams+="&tags="+this.tag_filter.value),""!==this.search_filter&&(this.quickFilterMap.set("searchInput",this.search_filter),this.queryParams+="&name_filter="+this.search_filter.trim()),yield this.setDocumentsDashboard(this.queryParams);for(const[e,t]of Object.entries(this.apidata.dashboardDocs.docs))this.initView(e,t)}))},loadNext(){this.doc_skip=5*(this.paginationCount-1),this.resetFilter()},color_check(e){if(null==e)return"black";var t=e.substring(1),i=parseInt(t,16),o=i>>16&255,a=i>>8&255,l=i>>0&255,s=.2126*o+.7152*a+.0722*l;return s<40?"white":"black"}},setup(){const e=(0,P.Wb)(),t=(0,S.Jk)(e),{setDocumentsDashboard:i,delete_doc:o,get_doc_thumbnail:a,remove_tag_from_doc:l}=e;return{show_image:(0,p.iH)(!1),apidata:(0,p.iH)(t),setDocumentsDashboard:i,delete_doc:o,get_doc_thumbnail:a,remove_tag_from_doc:l,view:(0,p.iH)("list"),document_list:(0,p.iH)([]),showFilter:(0,p.iH)(!1),correspondents:(0,p.iH)([]),doc_types:(0,p.iH)([]),tags:(0,p.iH)([]),showTags:(0,p.iH)(!0),search_filter:(0,p.iH)(""),tag_filter:(0,p.iH)(),assignee_filter:(0,p.iH)(),doc_type_filter:(0,p.iH)(),quickFilterMap:(0,p.iH)(new Map),queryParams:(0,p.iH)(""),paginationCount:(0,p.iH)(1),skip:(0,p.iH)(1),doc_skip:(0,p.iH)(0)}}});var xt=i(24554);const Dt=(0,L.Z)(kt,[["render",bt]]),Ct=Dt;K()(kt,"components",{QTable:De.Z,QCard:$.Z,QImg:Be.Z,QChip:Ze.Z,QIcon:xt.Z,QBtn:E.Z});var qt=i(73902),Ht=function(e,t,i,o){function a(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,l){function s(e){try{r(o.next(e))}catch(t){l(t)}}function n(e){try{r(o["throw"](e))}catch(t){l(t)}}function r(e){e.done?i(e.value):a(e.value).then(s,n)}r((o=o.apply(e,t||[])).next())}))};const Wt=(0,o.aZ)({data(){return{}},components:{Dashboard_Middle_List:ze,Dashboard_Middle_Preview:Je,Dashboard_Middle_Preview_Text:Ct,DefaultBtn:qt.Z},mixins:[u.Z,c.Z],mounted(){this.initView()},methods:{initView(){return Ht(this,void 0,void 0,(function*(){yield this.loadFromServer(),this.resetAllSelectedRows(),this.setupDropdowns()}))},loadNext(){this.showLoading(),this.doc_skip=18*(this.paginationCount-1),this.change_pagecount(this.paginationCount),this.applyFilter(),this.hideLoading()},applyFilter(){return Ht(this,void 0,void 0,(function*(){this.queryParams="",this.quickFilterMap.clear(),this.queryParams+="?limit=18",this.queryParams+="&skip="+this.doc_skip.toString(),this.assignee_filter&&(this.quickFilterMap.set("assignee",this.assignee_filter),this.queryParams+="&correspondent="+this.assignee_filter.value),this.doc_type_filter&&(this.quickFilterMap.set("doc_type",this.doc_type_filter),this.queryParams+="&doc_type="+this.doc_type_filter.value),this.tag_filter&&(this.quickFilterMap.set("tags",this.tag_filter),this.queryParams+="&tags="+this.tag_filter.value),""!==this.search_filter&&(this.quickFilterMap.set("searchInput",this.search_filter),this.queryParams+="&name_filter="+this.search_filter.trim()),""!==this.full_text_search_filter&&(this.quickFilterMap.set("fullTextSearch",this.full_text_search_filter),this.queryParams+="&content_filter="+this.full_text_search_filter),this.time_period_filter&&(this.quickFilterMap.set("time_filter",this.time_period_filter.value),this.queryParams+="&time_filter="+this.time_period_filter.value),yield this.setDocumentsDashboard(this.queryParams),this.prepareDashboard(),this.document_list=this.apidata.dashboardDocs.docs,this.resetAllSelectedRows()}))},setupDropdowns(){for(const[e,t]of Object.entries(this.apidata.correspondentData.data))this.correspondents.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.docTypeData.data))this.doc_types.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.tagData.data))this.tags.push({value:t.id,label:t.name})},allowDrop(e){e.preventDefault(),e.currentTarget.classList.add("bg-grey-5"),e.currentTarget.classList.add("bd-shadow")},drop(e){e.preventDefault(),e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow"),this.uploadFile(e.dataTransfer.files)},dragLeave(e){e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow")},uploadFile(e){return Ht(this,void 0,void 0,(function*(){this.showLoading();for(const o in e)try{let i=new FormData;var t=e[o];i.append("file",t),yield V.zU.create_doc(i)}catch(i){}this.hideLoading(),yield this.setDocumentsDashboard("?limit=18")}))},resetFilter(){this.assignee_filter="",this.doc_type_filter="",this.tag_filter="",this.search_filter="",this.full_text_search_filter="",this.time_period_filter=null,this.applyFilter()},resetAllSelectedRows(){this.selection=[],this.headerCheckbox=!1;for(const[e,t]of Object.entries(this.document_list))this.document_list[e].rowSelection=!1}},setup(){const e=(0,P.Wb)(),{prepareDashboard:t,setDocumentsDashboard:i,loadFromServer:o,delete_doc:a,setCorrespondentsFromServer:l,setTagsFromServer:s,setDocTypesfromServer:n,getCurrentPageCount:r,change_pagecount:d}=e,c=(0,S.Jk)(e);return{prepareDashboard:t,change_pagecount:d,getCurrentPageCount:r,setDocumentsDashboard:i,loadFromServer:o,delete_doc:a,setCorrespondentsFromServer:l,setDocTypesfromServer:n,setTagsFromServer:s,apidata:(0,p.iH)(c),view:(0,p.iH)("list"),showIcons:(0,p.iH)(!0),showMenu:(0,p.iH)(!1),search_filter:(0,p.iH)(""),full_text_search_filter:(0,p.iH)(""),tag_filter:(0,p.iH)(),assignee_filter:(0,p.iH)(),doc_type_filter:(0,p.iH)(),time_period_filter:(0,p.iH)(),paginationCount:(0,p.iH)(r),quickFilterMap:(0,p.iH)(new Map),queryParams:(0,p.iH)(""),doc_skip:(0,p.iH)(0),document_list:(0,p.iH)({}),selection:(0,p.iH)([]),headerCheckbox:(0,p.iH)(!1),showFilter:(0,p.iH)(!1),correspondents:(0,p.iH)([]),doc_types:(0,p.iH)([]),tags:(0,p.iH)([])}}});var Ft=i(62025),Zt=i(20811),Pt=i(27011),St=i(83414);const Tt=(0,L.Z)(Wt,[["render",d],["__scopeId","data-v-29c07251"]]),zt=Tt;K()(Wt,"components",{QInput:fe.Z,QBtn:E.Z,QSelect:A.Z,QSpace:Ft.Z,QIcon:xt.Z,QMenu:Zt.Z,QList:Pt.Z,QItem:St.Z,QPagination:Pe.Z}),K()(Wt,"directives",{ClosePopup:N.Z})}}]);