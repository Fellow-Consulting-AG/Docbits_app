"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[9457],{49457:(e,t,a)=>{a.r(t),a.d(t,{default:()=>st});var n=a(61758),i=a(58790),s=a(29104);const o=e=>((0,n.Qi)("data-v-0606c8f2"),e=e(),(0,n.jt)(),e),r={class:"dashboard-container dashboard-text-color dashboard-main"},l={class:"full-width dashboard-list-area q-my-lg"},c={class:"text-item",style:{"text-transform":"capitalize"}},d={key:2},u={key:3},p={key:4,align:"right",style:{"padding-right":"16px"}},m={key:5},v={key:6,class:"text-item"},h=o((()=>(0,n.Lk)("div",{class:"box loading-shimmer"},null,-1))),g=["data-index","onDragstart","onDrop","onDragover"],_=["colspan"],b={class:"back-white flex justify-end"},f={class:"row",style:{"margin-right":"0"}},y=o((()=>(0,n.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1)));function k(e,t,a,o,k,D){const F=(0,n.g2)("SubHeader"),q=(0,n.g2)("InvoiceDashboardHeader"),C=(0,n.g2)("q-separator"),I=(0,n.g2)("ColumnOrderBy"),L=(0,n.g2)("q-th"),x=(0,n.g2)("q-tr"),w=(0,n.g2)("q-badge"),S=(0,n.g2)("q-td"),A=(0,n.g2)("q-table"),O=(0,n.g2)("q-markup-table"),M=(0,n.g2)("PaginationInvoice"),E=(0,n.g2)("q-pagination"),P=(0,n.g2)("q-inner-loading");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(F,{name:"invoice_dashboard",label:e.$t("invoices")},null,8,["label"]),(0,n.Lk)("div",r,[(0,n.bF)(q),(0,n.bF)(C,{class:"seperator"}),(0,n.Lk)("div",l,[e.display_data.length>0?((0,n.uX)(),(0,n.Wv)(A,{key:0,class:(0,i.C4)("main-table dashboard-table-style dashboard-table-height back-white"),rows:Object.values(e.display_data),"rows-per-page-options":[0],columns:e.tableColumns,"row-key":"id",flat:"","hide-bottom":"","no-data-label":e.$t("pages.messages.no_record_found"),id:"invoice_table"},{header:(0,n.k6)((t=>[(0,n.bF)(x,{props:t},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.cols,((a,o)=>((0,n.uX)(),(0,n.Wv)(L,{key:a.name,props:t,"data-index":o,draggable:"true",dropzone:"true",direction:"horizontal",onDragstart:t=>e.onDragStart(t,e.tableColumns,o),onDrop:(0,s.D$)((t=>e.handleDrop(t,o)),["prevent"]),onDragover:(0,s.D$)((t=>e.onDragOver(t,o)),["prevent"]),onDragenter:(0,s.D$)(e.onDragEnter,["prevent"]),onDragleave:(0,s.D$)(e.onDragLeave,["prevent"]),style:(0,i.Tr)([{cursor:e.getIsDragging?"pointer":"move"},{"text-align":"left"}])},{default:(0,n.k6)((()=>[(0,n.Lk)("span",c,(0,i.v_)(e.$t(a.label)),1),a.actions?((0,n.uX)(),(0,n.Wv)(I,{key:0,type_name:e.type_name,column_name:a.field},null,8,["type_name","column_name"])):(0,n.Q3)("",!0)])),_:2},1032,["props","data-index","onDragstart","onDrop","onDragover","onDragenter","onDragleave","style"])))),128))])),_:2},1032,["props"])])),body:(0,n.k6)((t=>[e.show_table_loader?((0,n.uX)(),(0,n.Wv)(x,{key:1},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tableColumns.length,(e=>((0,n.uX)(),(0,n.Wv)(S,{key:e},{default:(0,n.k6)((()=>[h])),_:1})))),128))])),_:1})):((0,n.uX)(),(0,n.Wv)(x,{key:0,props:t},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.cols,(a=>((0,n.uX)(),(0,n.Wv)(S,{key:a.name,props:t,class:(0,i.C4)(e.setRowStyle(t.row)+" cursor-pointer"),style:{"text-align":"left"},onClick:a=>e.goToDetails(t.row)},{default:(0,n.k6)((()=>{var t;return["status"==a.name?((0,n.uX)(),(0,n.Wv)(w,{key:0,transparent:"",align:"middle",color:e.statusColor(a.value)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(a.value),1)])),_:2},1032,["color"])):"paid_status"==a.name?((0,n.uX)(),(0,n.Wv)(w,{key:1,transparent:"",align:"middle",color:e.statusColor(null!==(t=a.value)&&void 0!==t?t:"Open")},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(a.value?a.value:"Open"),1)])),_:2},1032,["color"])):"payment_method"==a.name?((0,n.uX)(),(0,n.CE)("div",d,(0,i.v_)(e.showPaymentMethodLabel(a.value)),1)):"electronic_payment_number"==a.name?((0,n.uX)(),(0,n.CE)("div",u,(0,i.v_)(e.displayLastSixDigits(a.value)),1)):"extended_amount"==a.name?((0,n.uX)(),(0,n.CE)("div",p,(0,i.v_)(a.value),1)):e.dateFields(a.name)?((0,n.uX)(),(0,n.CE)("div",m,(0,i.v_)(e.formatDateTimeZone(a.value,!0)),1)):((0,n.uX)(),(0,n.CE)("div",v,(0,i.v_)(a.value),1))]})),_:2},1032,["props","class","onClick"])))),128))])),_:2},1032,["props"]))])),_:1},8,["rows","columns","no-data-label"])):(0,n.Q3)("",!0),0==e.display_data.length?((0,n.uX)(),(0,n.Wv)(O,{key:1,class:(0,i.C4)("main-table dashboard-table-style back-white"),flat:"","hide-bottom":"",actions:!0,id:"invoice_table"},{default:(0,n.k6)((()=>[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tableColumns,((a,o)=>((0,n.uX)(),(0,n.CE)("th",{key:a.name,"data-index":o,draggable:"true",dropzone:"true",direction:"horizontal",onDragstart:t=>e.onDragStart(t,e.tableColumns,o),onDrop:(0,s.D$)((t=>e.handleDrop(t,o)),["prevent"]),onDragover:(0,s.D$)((t=>e.onDragOver(t,o)),["prevent"]),onDragenter:t[0]||(t[0]=(0,s.D$)(((...t)=>e.onDragEnter&&e.onDragEnter(...t)),["prevent"])),onDragleave:t[1]||(t[1]=(0,s.D$)(((...t)=>e.onDragLeave&&e.onDragLeave(...t)),["prevent"])),style:(0,i.Tr)([{cursor:e.getIsDragging?"pointer":"move"},{"text-align":"left"}])},(0,i.v_)(e.$t(a.label)),45,g)))),128))]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",{class:"text-center",colspan:e.tableColumns.length},(0,i.v_)(e.$t("pages.messages.no_record_found")),9,_)])])])),_:1})):(0,n.Q3)("",!0),(0,n.Lk)("div",b,[(0,n.Lk)("div",f,[(0,n.bF)(M,{class:"q-py-xs q-mr-md"}),(0,n.bF)(E,{modelValue:e.pagination.current_page,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.pagination.current_page=t),t[3]||(t[3]=t=>e.paginationItemClicked())],color:"primary",max:e.pagination.total_pages,class:"q-py-xs q-mx-md","max-pages":6,input:"","boundary-links":""},null,8,["modelValue","max"])])])])]),(0,n.bF)(P,{showing:e.loading,style:{"z-index":"2"}},{default:(0,n.k6)((()=>[y])),_:1},8,["showing"])],64)}var D=a(23537),F=a(1659),q=a(24622),C=a(46736),I=a(38734),L=a(10739),x=a(87033),w=a(68180),S=a(1595);const A={class:"orderByParentSpan arrow-color"},O=["data-name"],M=["data-name"];function E(e,t,a,s,o,r){return(0,n.uX)(),(0,n.CE)("span",A,[(0,n.Lk)("span",{class:(0,i.C4)(["up-arrow orderBy absolute",e.is_order_by_selected("asc")?"selected":""]),"data-name":e.column_name,"data-direction":"asc",onClick:t[0]||(t[0]=(...t)=>e.OrderBy&&e.OrderBy(...t))},null,10,O),(0,n.Lk)("span",{class:(0,i.C4)(["down-arrow orderBy absolute",e.is_order_by_selected("desc")?"selected":""]),"data-name":e.column_name,"data-direction":"desc",onClick:t[1]||(t[1]=(...t)=>e.OrderBy&&e.OrderBy(...t))},null,10,M)])}var P=a(68450),X=function(e,t,a,n){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(t){s(t)}}function r(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?a(e.value):i(e.value).then(o,r)}l((n=n.apply(e,t||[])).next())}))};const Q=(0,n.pM)({props:{column_name:{type:String,required:!0}},watch:{order_by:{deep:!0,handler:function(e,t){this.init()}}},mounted:function(){this.init(),document.addEventListener("reset_filters",this.resetFilters)},unmounted:function(){document.removeEventListener("reset_filters",this.resetFilters)},methods:{init(){0!==(0,P.Ns)(this.order_by)&&(this.order_by_field=this.order_by.field_name,this.order_by_direction=this.order_by.direction)},is_order_by_selected(e){return this.order_by_field==this.column_name&&this.order_by_direction==e},OrderBy(e){if(e.target.classList.contains("selected"))return;let t=e.target.dataset.direction,a=e.target.dataset.name;if(!t||!a)return void logError("ERROR: Orderby for field",a);e.target.classList.add("selected");const n=document.querySelectorAll(".orderBy");if(n.length){for(var i=0;i<n.length;i++){let e=n[i];(e.dataset.name!=a||e.dataset.name==a&&e.dataset.direction!=t)&&e.classList.remove("selected")}this.order_by_field=a,this.order_by_direction=t,this.order_by={field_name:this.order_by_field,direction:this.order_by_direction},this.params.sort_by=this.order_by_field,this.params.sort_order=this.order_by_direction,this.getData(),this.triggerApplyFilters()}},getData(){return X(this,void 0,void 0,(function*(){try{this.loading=!0,yield this.getInvoiceData()}catch(e){logInfo(e)}finally{this.loading=!1}}))},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)},resetFilters(){let e=document.getElementsByClassName("orderBy selected");Array.from(e).forEach((e=>{e.classList.remove("selected")}))}},data(){return{sort_order_by:(0,I.KR)(""),order_by_field:(0,I.KR)(""),order_by_direction:(0,I.KR)("")}},setup(){const e=(0,S.LN)(),{order_by:t,params:a,loading:n}=(0,F.bP)(e),{getInvoiceData:i}=e;return{params:a,order_by:t,loading:n,getInvoiceData:i}}});var N=a(12807);const $=(0,N.A)(Q,[["render",E],["__scopeId","data-v-7608dd46"]]),V=$,B={class:"row"},K={class:"q-py-xs q-mt-md q-mr-sm"};function W(e,t,a,s,o,r){const l=(0,n.g2)("q-select");return(0,n.uX)(),(0,n.CE)("div",B,[(0,n.Lk)("span",K,(0,i.v_)(e.$t("pagination_size"))+":",1),(0,n.bF)(l,{borderless:"",dense:"",modelValue:e.pagination.page_size,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.pagination.page_size=t),e.getInvoiceData],options:e.pagination_options},null,8,["modelValue","options","onUpdate:modelValue"])])}const z=(0,n.pM)({setup(){const e=(0,S.LN)(),{pagination:t}=(0,F.bP)(e),{getInvoiceData:a}=e;return{pagination:t,getInvoiceData:a,pagination_options:(0,I.KR)(["10","20","25","50"])}},methods:{validatePaginationSize(){this.pagination.page_size<=50||(this.pagination.page_size=50)}},mounted(){this.validatePaginationSize()}});var R=a(94940),U=a(98582),T=a.n(U);const j=(0,N.A)(z,[["render",W]]),H=j;T()(z,"components",{QSelect:R.A});var J=a(30582);const Z={class:"row q-mb-md"},G={style:{"margin-top":"39px"},class:"row items-start example-container dashboard-title dark-readable"},Y={class:"col q-ml-xl"},ee={class:"row justify-start"},te={class:"dashboard-search-box q-ml-md mt-20 white-inputs"},ae={class:"q-mr-sm mt-20"},ne={key:0,class:"row mb-25 relative-position",style:{"margin-bottom":"8px"}},ie=(0,n.Lk)("div",{class:"dashboard-toggler-area"},null,-1);function se(e,t,a,s,o,r){const l=(0,n.g2)("quickSearch"),c=(0,n.g2)("q-space"),d=(0,n.g2)("ColumnOrganization"),u=(0,n.g2)("q-tooltip"),p=(0,n.g2)("f-btn"),m=(0,n.g2)("savedFilterBadges");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",Z,[(0,n.Lk)("div",G,[(0,n.Lk)("div",{class:"example-cell cursor-pointer",tabindex:"0",onClick:t[0]||(t[0]=(...t)=>e.getAllInvoices&&e.getAllInvoices(...t))},(0,i.v_)(e.$t("all"))+" ("+(0,i.v_)(e.total_count||0)+") ",1),(0,n.Lk)("div",{class:"example-cell q-ml-lg cursor-pointer",tabindex:"0",onClick:t[1]||(t[1]=t=>e.getInvoiceStatus("Invoiced"))},(0,i.v_)(e.$t("invoiced"))+" ("+(0,i.v_)(e.total_invoice_count)+") ",1),(0,n.Lk)("div",{class:"example-cell q-ml-lg cursor-pointer",tabindex:"0",onClick:t[2]||(t[2]=t=>e.getInvoiceStatus("Closed"))},(0,i.v_)(e.$t("closed"))+" ("+(0,i.v_)(e.total_closed_count)+") ",1)]),(0,n.Lk)("div",Y,[(0,n.Lk)("div",ee,[(0,n.Lk)("div",te,[(0,n.bF)(l)]),(0,n.bF)(c),(0,n.Lk)("div",ae,[(0,n.bF)(d,{columns_key:"INVOICES_DASHBOARD_COLUMNS",table_columns:e.table_columns},null,8,["table_columns"])]),(0,n.bF)(p,{square:"",class:"mt-20",icon:"img:images/refresh.svg",onClick:e.refreshFilters},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.$t("refresh_list")),1)])),_:1})])),_:1},8,["onClick"])])])]),e.quickFilterMap.size>0?((0,n.uX)(),(0,n.CE)("div",ne,[ie,(0,n.bF)(m)])):(0,n.Q3)("",!0)],64)}const oe={class:"q-pa-md"},re={class:"row q-my-sm"},le={style:{"margin-top":"5px"}},ce={class:"row q-my-sm"},de={style:{"margin-top":"5px"}},ue={class:"row q-my-sm"},pe={style:{"margin-top":"5px"}},me={class:"float-right q-ml-auto"};function ve(e,t,a,s,o,r){const l=(0,n.g2)("q-space"),c=(0,n.g2)("SupplierName"),d=(0,n.g2)("PaidStatus"),u=(0,n.g2)("Status"),p=(0,n.g2)("f-btn"),m=(0,n.g2)("q-menu"),v=(0,n.g2)("q-input");return(0,n.uX)(),(0,n.Wv)(v,{class:"width-500",dense:"",modelValue:e.params.search,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.params.search=t),e.fetchData],autofocus:"",debounce:1e3,placeholder:e.$t("search_by_invoice_number"),outlined:"",onKeyup:e.onKeyup},{append:(0,n.k6)((()=>[(0,n.bF)(p,{icon:"tune",appearance:"flat"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{style:{width:"500px","min-height":"250px"},anchor:"bottom start",self:"top left",offset:[453,10]},{default:(0,n.k6)((()=>[(0,n.Lk)("div",oe,[(0,n.Lk)("div",re,[(0,n.Lk)("span",le,(0,i.v_)(e.$t("supplier_name")),1),(0,n.bF)(l),(0,n.bF)(c)]),(0,n.Lk)("div",ce,[(0,n.Lk)("span",de,(0,i.v_)(e.$t("paid_status")),1),(0,n.bF)(l),(0,n.bF)(d)]),(0,n.Lk)("div",ue,[(0,n.Lk)("span",pe,(0,i.v_)(e.$t("status")),1),(0,n.bF)(l),(0,n.bF)(u)]),(0,n.Lk)("div",me,[(0,n.bF)(p,{appearance:"secondary",class:"q-mr-sm mt-20 q-mb-md",label:e.$t("clear_filters"),onClick:t[0]||(t[0]=t=>e.resetFilters())},null,8,["label"])])])])),_:1})])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue","placeholder","onKeyup"])}function he(e,t,a,i,s,o){const r=(0,n.g2)("q-input");return(0,n.uX)(),(0,n.Wv)(r,{outlined:"",dense:"",clearable:!0,debounce:1e3,class:"q-mr-sm",style:{width:"227px",height:"40px"},modelValue:e.params.supplier_name,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.params.supplier_name=t),e.fetchData]},null,8,["modelValue","onUpdate:modelValue"])}const ge=(0,n.pM)({mixins:[],props:{},watch:{"params.supplier_name":{deep:!0,handler:function(e,t){this.handleQuikFilter()}}},methods:{fetchData(){this.params.supplier_name?this.quickFilterMap.set("supplier_name",this.params.supplier_name):this.quickFilterMap.delete("supplier_name"),this.resetPagination(),this.getInvoiceData()},handleQuikFilter(){this.params.supplier_name&&""!==this.params.supplier_name.trim()?this.quickFilterMap.set("supplier_name",this.params.supplier_name):this.quickFilterMap.delete("supplier_name")}},setup(){const e=(0,S.LN)(),{params:t,quickFilterMap:a}=(0,F.bP)(e),{getInvoiceData:n,resetPagination:i}=e;return{params:t,getInvoiceData:n,resetPagination:i,quickFilterMap:a}}});var _e=a(67837);const be=(0,N.A)(ge,[["render",he]]),fe=be;function ye(e,t,a,s,o,r){const l=(0,n.g2)("q-select");return(0,n.uX)(),(0,n.Wv)(l,{outlined:"",class:"q-mr-sm",style:{width:"227px",height:"40px"},clearable:"",dense:"",modelValue:e.params.status,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.params.status=t),e.fetchData],options:e.statusOptions,label:e.$t("status")},{"selected-item":(0,n.k6)((e=>[(0,n.Lk)("div",null,(0,i.v_)(e.opt.label),1)])),_:1},8,["modelValue","options","label","onUpdate:modelValue"])}T()(ge,"components",{QInput:_e.A});const ke=(0,n.pM)({methods:{fetchData(){this.params.status?this.quickFilterMap.set("status",this.params.status):this.quickFilterMap.delete("status"),this.resetPagination(),this.getInvoiceData()}},setup(){const e=(0,S.LN)(),{params:t,quickFilterMap:a}=(0,F.bP)(e),{getInvoiceData:n,resetPagination:i}=e;return{params:t,quickFilterMap:a,resetPagination:i,getInvoiceData:n,statusOptions:[{label:"Open",value:"Open"},{label:"Paid",value:"Paid"},{label:"Invoiced",value:"Invoiced"},{label:"Closed",value:"Closed"}]}}}),De=(0,N.A)(ke,[["render",ye]]),Fe=De;function qe(e,t,a,s,o,r){const l=(0,n.g2)("q-select");return(0,n.uX)(),(0,n.Wv)(l,{outlined:"",class:"status-box q-mr-sm",clearable:"",dense:"",modelValue:e.params.paid_status,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.params.paid_status=t),e.fetchData],options:e.statusOptions,label:e.$t("paid_status")},{"selected-item":(0,n.k6)((e=>[(0,n.Lk)("div",null,(0,i.v_)(e.opt.label),1)])),_:1},8,["modelValue","options","label","onUpdate:modelValue"])}T()(ke,"components",{QSelect:R.A});const Ce=(0,n.pM)({methods:{fetchData(){this.params.paid_status?this.quickFilterMap.set("paid_status",this.params.paid_status):this.quickFilterMap.delete("paid_status"),this.resetPagination(),this.getInvoiceData()}},setup(){const e=(0,S.LN)(),{params:t,quickFilterMap:a}=(0,F.bP)(e),{getInvoiceData:n,resetPagination:i}=e;return{params:t,quickFilterMap:a,resetPagination:i,getInvoiceData:n,statusOptions:[{label:"Open",value:"Open"},{label:"Paid",value:"Paid"}]}}}),Ie=(0,N.A)(Ce,[["render",qe],["__scopeId","data-v-67a6ea74"]]),Le=Ie;T()(Ce,"components",{QSelect:R.A});var xe=function(e,t,a,n){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(t){s(t)}}function r(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?a(e.value):i(e.value).then(o,r)}l((n=n.apply(e,t||[])).next())}))};const we=(0,n.pM)({components:{SupplierName:fe,Status:Fe,PaidStatus:Le},watch:{"params.search":{deep:!0,handler:function(e,t){this.handleQuikFilter()}}},methods:{onKeyup(e){"Enter"==e.key&&(this.handleQuikFilter(),this.fetchData())},fetchData(){return xe(this,void 0,void 0,(function*(){this.resetPagination(),yield this.getInvoiceData()}))},handleQuikFilter(){this.params.search&&""!==this.params.search.trim()?this.quickFilterMap.set("search",this.params.search):this.quickFilterMap.delete("search")},resetFilters(){this.quickFilterMap.clear(),this.resetFilter(),this.fetchData()}},setup(){const e=(0,S.LN)(),{params:t,quickFilterMap:a}=(0,F.bP)(e),{resetPagination:n,getInvoiceData:i,resetFilter:s}=e;return{params:t,quickFilterMap:a,resetPagination:n,getInvoiceData:i,resetFilter:s}}});var Se=a(84436),Ae=a(93676);const Oe=(0,N.A)(we,[["render",ve]]),Me=Oe;T()(we,"components",{QInput:_e.A,QMenu:Se.A,QSpace:Ae.A});var Ee=a(41268);const Pe={class:"saved-filter-badge row absolute"};function Xe(e,t,a,s,o,r){const l=(0,n.g2)("q-icon"),c=(0,n.g2)("q-badge");return(0,n.uX)(),(0,n.CE)("div",Pe,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.quickFilterMap,(([t,a])=>((0,n.uX)(),(0,n.CE)(n.FK,{key:t},["status"==t||"paid_status"==t?((0,n.uX)(),(0,n.Wv)(c,{key:0,rounded:"",color:"primary",class:"q-mr-sm capitalize"},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.$t(a.value))+" ",1),(0,n.bF)(l,{name:"close",color:"white",size:"xs",class:"q-ml-xs font-12 cursor-pointer",onClick:a=>e.removeFilter(t)},null,8,["onClick"])])),_:2},1024)):((0,n.uX)(),(0,n.Wv)(c,{key:1,rounded:"",color:"primary",class:"q-mr-sm capitalize"},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(a)+" ",1),(0,n.bF)(l,{name:"close",color:"white",class:"q-ml-xs font-12 cursor-pointer",size:"xs",onClick:a=>e.removeFilter(t)},null,8,["onClick"])])),_:2},1024))],64)))),128))])}var Qe=function(e,t,a,n){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(t){s(t)}}function r(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?a(e.value):i(e.value).then(o,r)}l((n=n.apply(e,t||[])).next())}))};const Ne=(0,n.pM)({mounted(){this.init()},methods:{init(){return Qe(this,void 0,void 0,(function*(){yield this.$nextTick()}))},removeFilter(e){this.quickFilterMap.delete(e),e in this.params&&(this.params[e]=""),this.getDataServer()},getDataServer(){return Qe(this,void 0,void 0,(function*(){try{this.loading=!0,yield this.getInvoiceData()}catch(e){logError(e)}finally{this.loading=!1}}))}},setup(){const e=(0,S.LN)(),{loading:t,params:a,quickFilterMap:n}=(0,F.bP)(e),{getInvoiceData:i}=e;return{loading:t,params:a,quickFilterMap:n,getInvoiceData:i}}});var $e=a(23954),Ve=a(50492);const Be=(0,N.A)(Ne,[["render",Xe],["__scopeId","data-v-6243b0f6"]]),Ke=Be;T()(Ne,"components",{QBadge:$e.A,QIcon:Ve.A});var We=function(e,t,a,n){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(t){s(t)}}function r(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?a(e.value):i(e.value).then(o,r)}l((n=n.apply(e,t||[])).next())}))};const ze=(0,n.pM)({components:{quickSearch:Me,ColumnOrganization:Ee.A,savedFilterBadges:Ke},methods:{refreshFilters(){this.getInvoiceData()},getAllInvoices(){this.quickFilterMap.clear(),this.resetFilter(),this.getInvoiceData()},getInvoiceStatus(e){return We(this,void 0,void 0,(function*(){const t={label:e,value:e};this.params.status=t,this.quickFilterMap.set("status",this.params.status),this.resetPagination(),yield this.getInvoiceData()}))}},setup(){const e=(0,S.LN)(),{total_count:t,total_invoice_count:a,total_closed_count:n,params:i,table_columns:s,quickFilterMap:o}=(0,F.bP)(e),{getInvoiceData:r,resetFilter:l,resetPagination:c}=e;return{total_count:t,total_invoice_count:a,total_closed_count:n,getInvoiceData:r,resetFilter:l,resetPagination:c,params:i,table_columns:s,quickFilterMap:o}}});var Re=a(97410);const Ue=(0,N.A)(ze,[["render",se]]),Te=Ue;T()(ze,"components",{QSpace:Ae.A,QTooltip:Re.A});var je=function(e,t,a,n){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(t){s(t)}}function r(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?a(e.value):i(e.value).then(o,r)}l((n=n.apply(e,t||[])).next())}))};const He=(0,n.pM)({mixins:[q.A,L.A,x.A,C.A,J.A],props:{type_name:{type:String,reqired:!0,default:"invoice"}},components:{SubHeader:w.A,ColumnOrderBy:V,PaginationInvoice:H,InvoiceDashboardHeader:Te},data(){return{show_table_loader:(0,I.KR)(!1)}},mounted(){const{user_settings:e}=(0,S.Bu)();if(this.init(),this.initDragDropColumns("invoice_table","label"),document.addEventListener("invoice_table-column-drop",this.onDropColumns),e["INVOICES_DASHBOARD_COLUMNS"]){let t=(0,I.KR)();this.visible_columns=JSON.parse(e["INVOICES_DASHBOARD_COLUMNS"]),t.value=Object.values(this.visible_columns);let a=(0,I.KR)();a.value=Object.values(this.table_columns).map((e=>{t.value.map((t=>{t.name===e.name&&(t.label=e.translation_key)}))}))}this.prepareTableColumns(),document.addEventListener("columnsUpdated",(e=>{e.detail&&(this.visible_columns=e.detail.visible_columns,this.tableColumns=this.visible_columns),logInfo(this.visible_columns,"this is visible columns")}))},unmounted(){document.removeEventListener("columnsUpdated",(()=>{logInfo("removed")})),document.removeEventListener("invoice_table-column-drop",this.onDropColumns)},methods:{init(){return je(this,void 0,void 0,(function*(){yield this.getInvoices(!0)}))},prepareTableColumns(){if(this.visible_columns&&Object.keys(this.visible_columns).length>0){let e=(0,I.KR)();e.value=Object.values(JSON.parse(JSON.stringify(this.visible_columns))),e.value=e.value.sort(((e,t)=>e.order-t.order)),this.tableColumns=e.value}},onDropColumns(){this.savedOrderColumns(this.tableColumns)},savedOrderColumns(e){return je(this,void 0,void 0,(function*(){try{this.loading=!0;let t=JSON.parse(JSON.stringify(e)),a={};t.forEach(((e,t)=>{a[e.name]={name:e.name,required:!0,order:t,label:e.label,field:e.field,selected:!1,actions:e.actions}})),yield this.updateSetting("INVOICES_DASHBOARD_COLUMNS",JSON.stringify(a))}catch(t){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.loading=!1}}))},getInvoices(e){return je(this,void 0,void 0,(function*(){try{this.loading=!0,e&&(this.show_table_loader=!0),yield this.getInvoiceData()}catch(t){logError(t)}finally{this.loading=!1,this.show_table_loader=!1}}))},paginationItemClicked(){return je(this,void 0,void 0,(function*(){try{yield this.getInvoices(!0)}catch(e){logInfo(e)}finally{this.loading=!1}}))}},setup(){const e=(0,S.LN)(),{display_data:t,table_columns:a,loading:n,pagination:i}=(0,F.bP)(e),{getInvoiceData:s}=e,{t:o}=(0,D.s9)(),r=(0,S.Bu)(),{updateSetting:l}=r,c=(0,I.KR)();return c.value=Object.values(JSON.parse(JSON.stringify(a.value))).map((e=>({name:e.name,required:!0,order:e.order,label:e.translation_key,field:e.field,actions:e.actions}))),c.value=c.value.sort(((e,t)=>e.order-t.order)),{t:o,table_columns:a,display_data:t,loading:n,getInvoiceData:s,pagination:i,visible_columns:(0,I.KR)({}),tableColumns:c,updateSetting:l}}});var Je=a(10386),Ze=a(42315),Ge=a(44488),Ye=a(57722),et=a(45262),tt=a(857),at=a(54700),nt=a(39035);const it=(0,N.A)(He,[["render",k],["__scopeId","data-v-0606c8f2"]]),st=it;T()(He,"components",{QSeparator:Je.A,QTable:Ze.A,QTr:Ge.A,QTh:Ye.A,QTd:et.A,QBadge:$e.A,QMarkupTable:tt.A,QPagination:at.A,QInnerLoading:nt.A})}}]);