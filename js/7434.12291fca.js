"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[7434],{27434:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ko});var i=s(83673),o=s(62323);const l=e=>((0,i.dD)("data-v-584ff3d6"),e=e(),(0,i.Cn)(),e),n={class:"q-ml-auto col-6"},a={class:"full-width dashboard-list-area"},r={class:"table-header-text"},d={key:0,class:"text-center"},c={key:1,class:"documnetCol relative-position"},u={key:2,class:"float-right q-mr-md"},p={key:2,class:"text-center",style:{width:"91px"}},h={class:"",style:{width:"91px"}},_=["data-index"],m={class:"table-body"},g=["onClick"],v=l((()=>(0,i._)("img",{width:"20",src:"document_quality.svg",class:"black_to_white absolute-center"},null,-1))),f=["innerHTML"],w={style:{position:"relative",left:"60px"}},b=(0,i.Uk)(" Click over status to see more details "),y=["onClick"],k=l((()=>(0,i._)("img",{src:"puzzle_green.svg",width:"20"},null,-1))),x=l((()=>(0,i._)("img",{src:"puzzle_red.svg",width:"20"},null,-1))),C={key:1},q={class:""},E=["src"],D=l((()=>(0,i._)("div",{class:"box loading-shimmer"},null,-1))),L=[D],S={key:1},F={class:"text-center",colspan:"12"},W={class:"q-pa-lg flex flex-center"},T={key:0},z={class:"text-center",colspan:"10"},Z={class:"q-ml-sm"},$={cellspacing:"0",cellpadding:"0",style:{border:"none",width:"100%"}},O={style:{width:"5%"}},I={style:{padding:"5%","text-align":"center"}},U={style:{width:"5%"}},V={cellspacing:"5px",cellpadding:"5px",style:{border:"none",width:"100%"}},H={cellspacing:"0",cellpadding:"0",style:{border:"none",width:"100%"}},R={style:{width:"5%"}},M={style:{padding:"5%","text-align":"center"}},A={style:{width:"5%"}},P={cellspacing:"5px",cellpadding:"5px",style:{border:"none",width:"100%"}},Q={style:{"text-align":"center"}},j={class:"q-ml-sm"};function B(e,t,s,l,D,B){const N=(0,i.up)("TaskCounters"),Y=(0,i.up)("SubHeader"),K=(0,i.up)("DashboardHeader"),J=(0,i.up)("q-separator"),G=(0,i.up)("q-checkbox"),X=(0,i.up)("q-icon"),ee=(0,i.up)("q-tooltip"),te=(0,i.up)("q-fab-action"),se=(0,i.up)("q-fab"),ie=(0,i.up)("ColumnOrderBy"),oe=(0,i.up)("q-btn"),le=(0,i.up)("q-markup-table"),ne=(0,i.up)("q-pagination"),ae=(0,i.up)("q-avatar"),re=(0,i.up)("q-card-section"),de=(0,i.up)("q-card-actions"),ce=(0,i.up)("q-card"),ue=(0,i.up)("q-dialog"),pe=(0,i.up)("DocAssignment"),he=(0,i.up)("Loader"),_e=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(Y,{name:"dashboard",label:e.$t("pages.screen2a.dashboard"),show_expiry_alert:!0},{default:(0,i.w5)((()=>[(0,i._)("span",n,[(0,i.Wm)(N)])])),_:1},8,["label"]),(0,i._)("div",{class:"dashboard-container dashboard-text-color dashboard-main",onDrop:t[10]||(t[10]=(...t)=>e.drop&&e.drop(...t)),onDragover:t[11]||(t[11]=(...t)=>e.allowDrop&&e.allowDrop(...t)),onDragleave:t[12]||(t[12]=(...t)=>e.dragLeave&&e.dragLeave(...t))},[(0,i.Wm)(K),(0,i.Wm)(J,{class:"seperator"}),(0,i._)("div",a,[e.table_columns.length>0?((0,i.wg)(),(0,i.j4)(le,{key:0,flat:"",class:(0,o.C_)(["sticky-column-for-table dashboard-table-style back-white dashboard-table-height",e.display_data.length>0?"dashboard-min-height":""])},{default:(0,i.w5)((()=>[(0,i._)("thead",null,[(0,i._)("tr",r,[(0,i._)("th",null,[(0,i.Wm)(G,{modelValue:this.headerCheckbox,"onUpdate:modelValue":[t[0]||(t[0]=e=>this.headerCheckbox=e),t[1]||(t[1]=t=>e.changeAction())],dense:""},null,8,["modelValue"]),(0,i.Wm)(se,{modelValue:this.headerFabIcon,"onUpdate:modelValue":t[6]||(t[6]=e=>this.headerFabIcon=e),disable:this.selectionList.length<1,"label-position":"top",flat:"","data-cy":"actions","external-label":"",icon:"more_vert",direction:"down",padding:"1px"},{default:(0,i.w5)((()=>[(0,i.Wm)(te,{onClick:t[2]||(t[2]=t=>e.deleteMultipalDocument()),padding:"7px","external-label":"","label-position":"top","data-cy":"delete",style:{background:"#b90713"},disable:e.isMultiDeleteButtonDisabled},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{style:{padding:"1px 1px 1px 1px"},name:"img:trash-bin-default-white.svg",size:"20px"}),(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.isMultiDeleteButtonDisabled?e.$t("could_not_delete"):e.$t("delete")),1)])),_:1})])),_:1},8,["disable"]),(0,i.Wm)(te,{onClick:t[3]||(t[3]=t=>e.restartMultipalDocExport()),padding:"7px","external-label":"","label-position":"top",style:{background:"#6479ff"},disable:e.isMultiRestartButtonDisabled},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{style:{padding:"1px 1px 1px 1px"},name:"img:refresh.svg",size:"20px"}),(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.isMultiRestartButtonDisabled?e.$t("could_not_restart"):e.$t("restart")),1)])),_:1})])),_:1},8,["disable"]),(0,i.Wm)(te,{onClick:t[4]||(t[4]=t=>e.multipleDocAssignment()),padding:"7px","external-label":"","label-position":"top",style:{background:"#6decb4"}},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{style:{padding:"1px 1px 1px 1px"},name:"img:assign to.svg",size:"20px"}),(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("assigne2")),1)])),_:1})])),_:1}),(0,i.Wm)(te,{onClick:t[5]||(t[5]=t=>e.confirmMerge()),padding:"5px","external-label":"","label-position":"top",color:"deep-orange-6",icon:"merge"},{default:(0,i.w5)((()=>[(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("merge")),1)])),_:1})])),_:1})])),_:1},8,["modelValue","disable"])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.table_columns,((t,s)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:s},["quality"==t.name?((0,i.wg)(),(0,i.iD)("th",d,[t.hasOwnProperty("label")?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Uk)((0,o.zw)(e.$t(t.label)),1)],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,o.zw)(e.$t(t.name)),1)],64)),t.sortable?((0,i.wg)(),(0,i.j4)(ie,{key:2,column_name:t.name},null,8,["column_name"])):(0,i.kq)("",!0)])):"po_matching"!==t.name?((0,i.wg)(),(0,i.iD)("th",c,[t.hasOwnProperty("label")?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Uk)((0,o.zw)(e.$t(t.label)),1)],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,o.zw)(e.$t(t.name)),1)],64)),t.sortable?((0,i.wg)(),(0,i.iD)("div",u,[(0,i.Wm)(ie,{column_name:t.name},null,8,["column_name"])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),e.po_module_activate&&"po_matching"===t.name?((0,i.wg)(),(0,i.iD)("th",p,(0,o.zw)(e.$t(t.label)),1)):(0,i.kq)("",!0)],64)))),128)),(0,i._)("th",h,(0,o.zw)(e.$t("actions")),1)])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.display_data,((s,l)=>((0,i.wg)(),(0,i.iD)("tr",{key:s["id"],class:(0,o.C_)(e.setRowStyle(s)),"data-index":l},[(0,i._)("td",m,[(0,i.Wm)(G,{dense:"",modelValue:s["rowSelection"],"onUpdate:modelValue":[e=>s["rowSelection"]=e,t[7]||(t[7]=e=>this.checkRowExistance())]},null,8,["modelValue","onUpdate:modelValue"]),s["locked_by"]?((0,i.wg)(),(0,i.j4)(X,{key:0,name:"lock",style:{color:"#7a7a7a"},size:"22px",class:"mt-3 q-ml-sm"},{default:(0,i.w5)((()=>[(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("doc_lock")),1)])),_:1})])),_:1})):(0,i.kq)("",!0)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.table_columns,((t,l)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:l},["po_matching"!==t.name?((0,i.wg)(),(0,i.iD)("td",{key:0,onClick:i=>"status"===t.name&&"error"===s["status"]?e.getErrorInfos(s):e.rowClick(s),class:(0,o.C_)([e.getClassesForColumn(s["status"],t.name),"text-weight-regular documnetCol table-body"])},["quality"===t.name?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[v,s["quality"]?((0,i.wg)(),(0,i.j4)(ee,{key:0},{default:(0,i.w5)((()=>[(0,i._)("div",{class:"row",innerHTML:e.renderquality(s)},null,8,f)])),_:2},1024)):(0,i.kq)("",!0)],64)):"pages"===t.name?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i._)("span",null,(0,o.zw)(s[t.name]?s[t.name]:"-"),1),s[t.name]?((0,i.wg)(),(0,i.j4)(ee,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(s[t.name]),1)])),_:2},1024)):(0,i.kq)("",!0)],64)):"priority"===t.name?((0,i.wg)(),(0,i.iD)(i.HY,{key:2},[(0,i._)("span",w,(0,o.zw)(s[t.name]?s[t.name]:"-"),1),s[t.name]?((0,i.wg)(),(0,i.j4)(ee,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(s[t.name]),1)])),_:2},1024)):(0,i.kq)("",!0)],64)):"status"===t.name?((0,i.wg)(),(0,i.iD)(i.HY,{key:3},[(0,i.Uk)((0,o.zw)(e.getLabelTranslation(s["status"]))+" ",1),"error"===s["status"]?((0,i.wg)(),(0,i.j4)(ee,{key:0},{default:(0,i.w5)((()=>[b])),_:1})):(0,i.kq)("",!0)],64)):"doc_type"===t.name?((0,i.wg)(),(0,i.iD)(i.HY,{key:4},[(0,i.Uk)((0,o.zw)(e.setDisplayDocType(s)),1)],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:5},[(0,i.Uk)((0,o.zw)(s[t.name]?s[t.name]:"-")+" ",1),s[t.name]?((0,i.wg)(),(0,i.j4)(ee,{key:0},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(s[t.name]),1)])),_:2},1024)):(0,i.kq)("",!0)],64))],10,g)):(0,i.kq)("",!0),"po_matching"===t.name&&e.po_module_activate?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[e.isPoIconAllowed(s["doc_type"],s["status"],s["table_version"])?((0,i.wg)(),(0,i.iD)("td",{key:0,onClick:t=>e.viewPurchaseOrder(s["id"],s["table_version"]),class:(0,o.C_)([e.getClassesForColumn(s["status"],"po_matching"),"text-center table-body"])},[1==s["po_all_matched"]?((0,i.wg)(),(0,i.j4)(oe,{key:0,round:"",flat:"",size:"8px",onClick:t=>{t.stopPropagation(),e.viewPurchaseOrder(s["id"],s["table_version"])}},{default:(0,i.w5)((()=>[k,(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("po_matched")),1)])),_:1})])),_:2},1032,["onClick"])):((0,i.wg)(),(0,i.j4)(oe,{key:1,round:"",flat:"",size:"10px",onClick:t=>{t.stopPropagation(),e.viewPurchaseOrder(s["id"],s["table_version"])}},{default:(0,i.w5)((()=>[x,(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("po_matching_required")),1)])),_:1})])),_:2},1032,["onClick"]))],10,y)):((0,i.wg)(),(0,i.iD)("td",C))],64)):(0,i.kq)("",!0)],64)))),128)),(0,i._)("td",q,[(0,i.Wm)(se,{modelValue:s["fabAction"],"onUpdate:modelValue":[e=>s["fabAction"]=e,t=>e.handleActions(l)],"label-position":"top",flat:"","data-cy":"actions","external-label":"",icon:"more_horiz",direction:"left",padding:"xs"},{default:(0,i.w5)((()=>[e.isDocDeleteable(s)?((0,i.wg)(),(0,i.j4)(te,{key:0,onClick:t=>{e.recordId=s["id"],e.deleteInvoice=!0},"external-label":"","label-position":"top",padding:"7px","data-cy":"delete",style:{background:"#b90713"}},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{style:{padding:"1px 1px 1px 1px"},name:"img:trash-bin-default-white.svg",size:"20px"}),(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),"finished"!=s["status"]&&"workflow"!=s["status"]&&"running"!=s["status"]&&"restart_in_progress"!=s["status"]&&"error"!=s["status"]&&"pending_confirmation"!=s["status"]?((0,i.wg)(),(0,i.j4)(te,{key:1,onClick:t=>e.rowClick(s),padding:"7px","external-label":"","label-position":"top","data-cy":"edit",style:{background:"#ffb355"}},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{style:{padding:"1px 1px 1px 1px"},name:"img:pencil-white.svg",size:"20px"}),(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("validate")),1)])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.isDocRestartable(s)?((0,i.wg)(),(0,i.j4)(te,{key:2,onClick:t=>e.restartExport(s["id"]),padding:"7px","external-label":"","label-position":"top",style:{background:"#6479ff"}},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{style:{padding:"1px 1px 1px 1px"},name:"img:refresh.svg",size:"20px"}),(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("restart")),1)])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.isExportErrorRestart(s)?((0,i.wg)(),(0,i.j4)(te,{key:3,onClick:t=>e.restartExportError(s["id"]),padding:"7px","external-label":"","label-position":"top",color:"green",width:"20"},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{style:{padding:"1px 1px 1px 1px"},name:"img:export-restart.svg",size:"20px"}),(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("restart export")),1)])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.isDocReassignAble(s)?((0,i.wg)(),(0,i.j4)(te,{key:4,onClick:t=>e.openAssignmentDlg(s["id"]),padding:"7px","external-label":"","label-position":"top",style:{background:"#6decb4"}},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{style:{padding:"1px 1px 1px 1px"},name:"img:assign to.svg",size:"20px"}),(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("assigne2")),1)])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.isExportAllowed(s["document_export_log"])?((0,i.wg)(),(0,i.j4)(te,{key:5,onClick:t=>e.goToExport(s["document_export_log"]),padding:"0px","external-label":"","label-position":"top"},{default:(0,i.w5)((()=>[(0,i._)("img",{width:"30",height:"30",src:e.getExportIcon(s["document_export_log"])},null,8,E)])),_:2},1032,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(te,{padding:"7px",onClick:t=>e.toFlowScreen(s.id),"external-label":"","label-position":"top",style:{background:"#be65d0"}},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{style:{padding:"1px 1px 1px 1px"},name:"img:doc_flow.svg",size:"20px"}),(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("flow_screen")),1)])),_:1})])),_:2},1032,["onClick"]),1!=e.user_settings["WORKFLOW_BUILDER_MODULE_SETTING"]||"ready_for_validation"!=s["status"]&&"ready_for_review"!=s["status"]&&"pending_confirmation"!=s["status"]&&"validated_pending_approval"!=s["status"]&&"approved_pending_second_approval"!=s["status"]?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(te,{key:6,onClick:t=>e.triggerWorkflow(s["id"]),padding:"7px","external-label":"","label-position":"top",style:{background:"#c39f3d"}},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{style:{padding:"1px 1px 1px 1px"},name:"img:workflow.svg",size:"20px"}),(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("trigger_workflow")),1)])),_:1})])),_:2},1032,["onClick"])),e.isDocDownloadable(s)?((0,i.wg)(),(0,i.j4)(te,{key:7,padding:"7px",onClick:t=>e.downloadFile(s),"external-label":"","label-position":"top",style:{background:"#2388ae"}},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{style:{padding:"1px 1px 1px 1px"},name:"img:settings/import-white.svg",size:"20px"}),(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("download")),1)])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.isdownloadAnnotated(s)?((0,i.wg)(),(0,i.j4)(te,{key:8,padding:"5px",onClick:t=>e.downloadAnnotated(s),"external-label":"","label-position":"top",style:{background:"#2388ae"}},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{style:{padding:"1px 1px 1px 1px"},name:"img:settings/import-white.svg",size:"20px"}),(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("download_annotated")),1)])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.isdownloadZugferd(s)?((0,i.wg)(),(0,i.j4)(te,{key:9,padding:"5px",onClick:t=>e.downloadZugferd(s),"external-label":"","label-position":"top",color:"blue-14",icon:"download"},{default:(0,i.w5)((()=>[(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("download_zugferd")),1)])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.isdownloadPeppol(s)?((0,i.wg)(),(0,i.j4)(te,{key:10,padding:"5px",onClick:t=>e.downloadPeppol(s),"external-label":"","label-position":"top",color:"blue-14",icon:"download"},{default:(0,i.w5)((()=>[(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("download_peppol")),1)])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue"]),1==s["restart_allowed"]?((0,i.wg)(),(0,i.j4)(X,{key:0,name:"priority_high",class:"headerError"},{default:(0,i.w5)((()=>[(0,i.Wm)(ee,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("document_restart_alert")),1)])),_:1})])),_:1})):(0,i.kq)("",!0)])],10,_)))),128)),!0===e.show_table_loader?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(e.pageSize,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.table_columns.length+2,(e=>((0,i.wg)(),(0,i.iD)("td",{key:e},L)))),128))])))),128)):0===e.display_data.length&&!1===e.processing?((0,i.wg)(),(0,i.iD)("tr",S,[(0,i._)("td",F,(0,o.zw)(e.$t("no_document_found")),1)])):(0,i.kq)("",!0)])])),_:1},8,["class"])):(0,i.kq)("",!0)]),(0,i._)("div",W,[e.display_data.length>0?((0,i.wg)(),(0,i.iD)("tr",T,[(0,i._)("td",z,[(0,i.Wm)(ne,{modelValue:e.paginationCount,"onUpdate:modelValue":t[8]||(t[8]=t=>e.paginationCount=t),color:"primary",max:e.skip,"max-pages":6,"boundary-links":"",onClick:t[9]||(t[9]=t=>e.loadData())},null,8,["modelValue","max"])])])):(0,i.kq)("",!0)])],32),(0,i.Wm)(ue,{modelValue:e.deleteInvoice,"onUpdate:modelValue":t[14]||(t[14]=t=>e.deleteInvoice=t),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(ce,null,{default:(0,i.w5)((()=>[(0,i.Wm)(re,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,i.w5)((()=>[(0,i.Wm)(ae,{icon:"warning",color:"primary"})])),_:1}),(0,i.Wm)(re,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i._)("span",Z,(0,o.zw)(e.$t("sure")),1)])),_:1}),(0,i.Wm)(de,{align:"right"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(oe,{flat:"",label:e.$t("cancel"),"data-cy":"cancel",color:"primary"},null,8,["label"]),[[_e]]),(0,i.wy)((0,i.Wm)(oe,{flat:"",label:e.$t("delete"),"data-cy":"delete-popup",color:"primary",onClick:t[13]||(t[13]=t=>e.deleteRecord(e.recordId))},null,8,["label"]),[[_e]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(ue,{modelValue:e.ErrorInfos,"onUpdate:modelValue":t[15]||(t[15]=t=>e.ErrorInfos=t)},{default:(0,i.w5)((()=>[(0,i.Wm)(ce,null,{default:(0,i.w5)((()=>[(0,i.Wm)(re,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i._)("table",$,[(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("td",O,[(0,i.Wm)(ae,{icon:"error",color:"red-6",style:{magrin:"3%"}})]),(0,i._)("td",null,[(0,i._)("div",I,[(0,i._)("b",null,(0,o.zw)(this.ErrorText["row"]["filename"]),1)])]),(0,i._)("td",U,[(0,i.Wm)(ae,{icon:"error",color:"red-6",style:{magrin:"3%"}})])])])]),(0,i._)("table",V,[(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("td",null,[(0,i._)("span",null,(0,o.zw)(e.$t("upload_failed")),1)])])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(ue,{modelValue:e.QualityConfirm,"onUpdate:modelValue":t[18]||(t[18]=t=>e.QualityConfirm=t)},{default:(0,i.w5)((()=>[(0,i.Wm)(ce,null,{default:(0,i.w5)((()=>[(0,i.Wm)(re,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i._)("table",H,[(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("td",R,[(0,i.Wm)(ae,{icon:"warning",color:"yellow-6",style:{magrin:"3%"}})]),(0,i._)("td",null,[(0,i._)("div",M,[(0,i._)("b",null,(0,o.zw)(this.QualityText["row"]["filename"]),1)])]),(0,i._)("td",A,[(0,i.Wm)(ae,{icon:"warning",color:"yellow-6",style:{magrin:"3%"}})])])])]),(0,i._)("table",P,[(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("td",Q,[(0,i._)("span",null,(0,o.zw)(e.$t("low_quality")),1)])])])]),(0,i.Wm)(oe,{class:"button-1",onClick:t[16]||(t[16]=t=>e.restartExport(this.docrowID)),label:e.$t("run_anyway")},null,8,["label"]),(0,i.Wm)(oe,{class:"button-2",onClick:t[17]||(t[17]=t=>{e.recordId=this.docrowID,e.deleteInvoice=!0,e.QualityConfirm=!1}),label:e.$t("delete")},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(ue,{modelValue:e.assigneDialog,"onUpdate:modelValue":t[19]||(t[19]=t=>e.assigneDialog=t)},{default:(0,i.w5)((()=>[(0,i.Wm)(pe,{doc_ids:e.assignment_doc_ids},null,8,["doc_ids"])])),_:1},8,["modelValue"]),(0,i.Wm)(ue,{modelValue:e.confirmMergeDialog,"onUpdate:modelValue":t[21]||(t[21]=t=>e.confirmMergeDialog=t),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(ce,null,{default:(0,i.w5)((()=>[(0,i.Wm)(re,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,i.w5)((()=>[(0,i.Wm)(ae,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,i.Wm)(re,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i._)("span",j,(0,o.zw)(e.$t("merge_doc_warning")),1)])),_:1}),(0,i.Wm)(de,{align:"right"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(oe,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[_e]]),(0,i.wy)((0,i.Wm)(oe,{flat:"",label:e.$t("done"),color:"primary",onClick:t[20]||(t[20]=t=>e.mergeDocuments())},null,8,["label"]),[[_e]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(he)],64)}var N=s(30052),Y=s.n(N);const K={class:"popup"},J={class:"popup-inner"};function G(e,t,s,o,l,n){return(0,i.wg)(),(0,i.iD)("div",K,[(0,i._)("div",J,[(0,i.WI)(e.$slots,"default",{},void 0,!0),(0,i._)("button",{class:"popup-close",onClick:t[0]||(t[0]=e=>s.TogglePopup())},"Close")])])}const X={props:["TogglePopup"]};var ee=s(74260);const te=(0,ee.Z)(X,[["render",G],["__scopeId","data-v-4d99a68a"]]),se=te;var ie=s(10321),oe=s(28741),le=s(77378),ne=s(98303),ae=s(61959),re=s(78564),de=s(80579),ce=s(72113),ue=s(45401),pe=s(85985),he=s(1903),_e=s(37295),me=s(9273),ge=s(54268),ve=s(91777),fe=s(98880);const we={class:"row q-mb-md"},be={style:{"margin-top":"40px"},class:"dashboard-title dark-readable"},ye={class:"col"},ke={class:"row justify-start"},xe={class:"dashboard-search-box q-ml-md mt-20"},Ce=(0,i._)("div",{class:"mt-20"},null,-1),qe=(0,i._)("div",{class:"mt-20"},null,-1),Ee={key:0,class:"row mb-25 relative-position",style:{"margin-bottom":"8px"}},De=(0,i._)("div",{class:"dashboard-toggler-area"},null,-1),Le=(0,i._)("div",{class:"q-mb-md"},null,-1);function Se(e,t,s,l,n,a){const r=(0,i.up)("quickSearch"),d=(0,i.up)("q-space"),c=(0,i.up)("q-tooltip"),u=(0,i.up)("q-btn"),p=(0,i.up)("scanButton"),h=(0,i.up)("import-multi-invoice"),_=(0,i.up)("savedFilterBadges"),m=(0,i.up)("q-separator"),g=(0,i.up)("advancedSettings"),v=(0,i.up)("analytics"),f=(0,i.up)("keyboardShortcutInfo"),w=(0,i.up)("q-card-actions"),b=(0,i.up)("q-card"),y=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",we,[(0,i._)("div",be,(0,o.zw)(e.$t("all_invoices"))+" ("+(0,o.zw)(e.current_invoice_count)+")",1),(0,i._)("div",ye,[(0,i._)("div",ke,[(0,i._)("div",xe,[(0,i.Wm)(r)]),(0,i.Wm)(d),Ce,qe,(0,i.Wm)(u,{style:{height:"40px"},square:"",class:"q-mr-sm mt-20",color:"primary",icon:"img:refresh.svg",onClick:e.refreshFilters},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("refresh_list")),1)])),_:1})])),_:1},8,["onClick"]),(0,i.Wm)(u,{style:{height:"40px"},square:"",class:"q-mr-sm mt-20",color:"primary",icon:"img:settings.svg",onClick:t[0]||(t[0]=t=>e.show_advanced_filters=!e.show_advanced_filters)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("advavce_settings")),1)])),_:1})])),_:1}),(0,i.Wm)(p),(0,i.Wm)(u,{style:{height:"40px"},class:"q-mr-sm mt-20",color:"primary",icon:"img:statistik.svg",onClick:t[1]||(t[1]=t=>e.show_analytics=!e.show_analytics)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("analytics")),1)])),_:1})])),_:1}),(0,i.Wm)(h)])])]),e.quickFilterMap.size>0?((0,i.wg)(),(0,i.iD)("div",Ee,[De,(0,i.Wm)(_)])):(0,i.kq)("",!0),e.show_advanced_filters?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Wm)(m),(0,i.Wm)(g)],64)):(0,i.kq)("",!0),e.show_analytics?((0,i.wg)(),(0,i.iD)(i.HY,{key:2},[(0,i.Wm)(m,{class:"q-mb-md"}),(0,i.Wm)(v),Le],64)):(0,i.kq)("",!0),(0,i.Wm)(y,{modelValue:e.showKeyboardShortcuts,"onUpdate:modelValue":t[3]||(t[3]=t=>e.showKeyboardShortcuts=t),onKeydown:t[4]||(t[4]=(0,fe.D2)((t=>e.showKeyboardShortcuts=!1),["esc"]))},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f),(0,i.Wm)(w,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{flat:"",color:"primary",label:e.$t("conclude"),class:"float-right",style:{"font-weight":"900"},onClick:t[2]||(t[2]=t=>e.showKeyboardShortcuts=!1)},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var Fe=s(60727);const We={class:"advanced-search"},Te={class:"row mb-10 mt-20"},ze={class:"col-auto",style:{"margin-left":"-8px","margin-right":"8px"}},Ze={key:0,class:"col-auto"},$e={class:"col-auto"},Oe={class:"col-auto"},Ie=(0,i._)("div",{class:"col-auto q-ml-md"},null,-1),Ue=(0,i._)("div",{class:"col-auto q-ml-md"},null,-1);function Ve(e,t,s,l,n,a){const r=(0,i.up)("q-tooltip"),d=(0,i.up)("q-btn"),c=(0,i.up)("ImportLogs"),u=(0,i.up)("TableColumnsSettings"),p=(0,i.up)("SortColumnsSettings"),h=(0,i.up)("TimeFilter");return(0,i.wg)(),(0,i.iD)("div",We,[(0,i._)("div",Te,[(0,i.Wm)(d,{style:{height:"40px"},square:"",class:"q-mr-sm",color:"primary",icon:"img:settings.svg",to:"/settings/dashboard"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("more_settings")),1)])),_:1})])),_:1}),(0,i.Wm)(d,{style:{height:"40px"},square:"",class:"q-mr-sm",color:"primary",icon:"img:keyboard.svg",onClick:t[0]||(t[0]=t=>e.showKeyboardShortcuts=!0)},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("keyboard_shortcut")),1)])),_:1})])),_:1}),(0,i._)("div",ze,[(0,i.Wm)(c,{setheight:"40px"})]),((0,i.wg)(),(0,i.iD)("div",Ze,[(0,i.Wm)(u)])),(0,i._)("div",$e,[(0,i.Wm)(p)]),(0,i._)("div",Oe,[(0,i.Wm)(h)]),Ie,Ue])])}function He(e,t,s,o,l,n){const a=(0,i.up)("q-btn-toggle");return(0,i.wg)(),(0,i.j4)(a,{"toggle-color":"primary",class:"toggle_time",modelValue:e.selected_time,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.selected_time=t),t[1]||(t[1]=t=>e.TimeFilterSelected())],ripple:!1,options:e.time_options},null,8,["modelValue","options"])}const Re=(0,i.aZ)({mixins:[],props:{},watch:{quickFilterMap:{deep:!0,handler:function(e,t){this.loadFilters()}}},mounted(){this.setTimeOptions(),this.loadFilters()},methods:{loadFilters(){const e=this.quickFilterMap.get("filter");e&&e.hasOwnProperty("value")?this.selected_time=e.value:this.resetFilters()},resetFilters(){this.selected_time=""},TimeFilterSelected(){this.quickFilterMap.set("filter",{value:this.selected_time,label:this.selected_time}),this.triggerApplyFilters()},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)},setTimeOptions(){this.time_options=[{label:this.$t("today"),value:"today"},{label:this.$t("week"),value:"current-week"},{label:this.$t("month"),value:"current-month"},{label:this.$t("year"),value:"current-year"},{label:this.$t("all"),value:"all"}]}},setup(){const e=(0,Fe.Ln)(),{quickFilterMap:t}=(0,ie.Jk)(e);return{quickFilterMap:t,selected_time:(0,ae.iH)(""),time_options:(0,ae.iH)([])}}});var Me=s(30201),Ae=s(36375),Pe=s(2165),Qe=s(7518),je=s.n(Qe);const Be=(0,ee.Z)(Re,[["render",He]]),Ne=Be;je()(Re,"components",{QBtnToggle:Me.Z,QBtnGroup:Ae.Z,QBtn:Pe.Z});const Ye=e=>((0,i.dD)("data-v-dcafb254"),e=e(),(0,i.Cn)(),e),Ke={class:"text-weight-bold"},Je={class:"row justify-between items-center"},Ge={class:"col-auto"},Xe={class:"row no-wrap justify-around q-pt-md"},et={class:"drop-target rounded-borders q-mr-md"},tt={class:"box row justify-center items-center",style:{"border-bottom":"1px solid grey"}},st={class:"visible-columns-parent"},it=["id","data-column-name","data-order"],ot={class:"rounded-borders overflow-hidden content-center"},lt={class:"row justify-end items-start"},nt={class:"row justify-end items-start"},at={class:"drop-target rounded-borders"},rt={class:"box row justify-center items-center",style:{"border-bottom":"1px solid grey"}},dt=["id","data-column-name"],ct={class:"row justify-end items-start q-mt-md"},ut=Ye((()=>(0,i._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1)));function pt(e,t,s,l,n,a){const r=(0,i.up)("q-tooltip"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-toolbar-title"),u=(0,i.up)("q-toolbar"),p=(0,i.up)("q-checkbox"),h=(0,i.up)("q-icon"),_=(0,i.up)("q-card-section"),m=(0,i.up)("q-inner-loading"),g=(0,i.up)("q-card"),v=(0,i.up)("q-dialog"),f=(0,i.up)("DocTypeFields"),w=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(d,{style:{height:"40px"},square:"",class:"q-mr-sm",color:"primary",icon:"img:column_filter.svg",onClick:t[0]||(t[0]=t=>e.show_column_settings=!0)},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("column_settings_tooltip")),1)])),_:1})])),_:1}),(0,i.Wm)(v,{modelValue:e.show_column_settings,"onUpdate:modelValue":t[4]||(t[4]=t=>e.show_column_settings=t),onShow:e.BeforePopupShow,onKeydown:t[5]||(t[5]=(0,fe.D2)((t=>e.show_column_settings=!1),["esc"])),persistent:"",onHide:e.onDashboardColumnDialogHide},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{style:{width:"900px","max-width":"1060px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"text-white secondary-toolbar draggable-toolbar"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i._)("span",Ke,(0,o.zw)(e.$t("column_settings")),1)])),_:1}),(0,i.wy)((0,i.Wm)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[w]])])),_:1}),(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",Je,[(0,i._)("div",Ge,[(0,i.Wm)(d,{class:"q-mr-sm",label:e.$t("add_field_from_document_type"),color:"primary ",onClick:t[1]||(t[1]=t=>e.show_doc_type_fields=!0)},null,8,["label"])])]),(0,i._)("div",Xe,[(0,i._)("div",et,[(0,i._)("div",tt,(0,o.zw)(e.$t("visible_columns")),1),(0,i._)("div",st,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.visible_columns,((t,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s,draggable:"true",class:"draggable-box"},[(0,i._)("div",{draggable:"true",id:t.name,"data-column-name":t.name,class:"box","data-order":t.order},[(0,i.Wm)(p,{"data-order":t.order,"data-column-name":t.name,modelValue:t.selected,"onUpdate:modelValue":e=>t.selected=e,class:"box-checkbox"},null,8,["data-order","data-column-name","modelValue","onUpdate:modelValue"]),t.hasOwnProperty("doc_type_key")?((0,i.wg)(),(0,i.j4)(h,{key:0,flat:"",dense:"",name:"close",size:"24px",color:"red",onClick:s=>e.removeDocTypeColumn(t.name)},null,8,["onClick"])):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,o.zw)(t.label),1)],8,it)])))),128))])]),(0,i._)("div",ot,[(0,i._)("div",lt,[(0,i.Wm)(d,{square:"",class:"q-mr-sm mt-20",color:"primary",icon:"arrow_forward",onClick:e.moveToHideColumnList},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("move_to_visibile_button_tooltip")),1)])),_:1})])),_:1},8,["onClick"])]),(0,i._)("div",nt,[(0,i.Wm)(d,{square:"",class:"q-mr-sm mt-20",color:"primary",icon:"arrow_back",onClick:e.moveToShowColumnList},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("move_to_hidden_button_tooltip")),1)])),_:1})])),_:1},8,["onClick"])])]),(0,i._)("div",at,[(0,i._)("div",rt,(0,o.zw)(e.$t("hidden_columns")),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.hidden_columns,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,id:e.name,"data-column-name":e.name,class:"box"},[(0,i.Wm)(p,{"data-column-name":e.name,modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t},null,8,["data-column-name","modelValue","onUpdate:modelValue"]),(0,i.Uk)(" "+(0,o.zw)(e.label),1)],8,dt)))),128))])]),(0,i._)("div",ct,[(0,i.Wm)(d,{class:"q-mr-sm",label:e.$t("cancel"),color:"primary",onClick:t[2]||(t[2]=t=>e.show_column_settings=!1)},null,8,["label"]),(0,i.Wm)(d,{label:e.$t("done"),color:"primary",class:"q-ml-sm",onClick:t[3]||(t[3]=t=>e.saveSettings())},null,8,["label"])])])])),_:1}),(0,i.Wm)(m,{showing:e.processing},{default:(0,i.w5)((()=>[ut])),_:1},8,["showing"])])),_:1})])),_:1},8,["modelValue","onShow","onHide"]),(0,i.Wm)(v,{modelValue:e.show_doc_type_fields,"onUpdate:modelValue":t[6]||(t[6]=t=>e.show_doc_type_fields=t),persistent:"",onHide:e.onDocTypeFieldsDialogHide},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{visible_columns_obj_list:e.visible_columns_obj_list},null,8,["visible_columns_obj_list"])])),_:1},8,["modelValue","onHide"])],64)}const ht=e=>((0,i.dD)("data-v-25fbfc82"),e=e(),(0,i.Cn)(),e),_t={class:"text-weight-bold"},mt={class:"row no-wrap justify-around q-pt-md"},gt={class:"q-mr-md"},vt={class:"fields-list rounded-borders q-mr-md"},ft={class:"box row justify-center items-center",style:{"border-bottom":"1px solid grey"}},wt={key:0,class:"box row justify-center items-center"},bt={class:"row justify-end items-start q-mt-md"},yt=ht((()=>(0,i._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1)));function kt(e,t,s,l,n,a){const r=(0,i.up)("q-toolbar-title"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-toolbar"),u=(0,i.up)("q-select"),p=(0,i.up)("q-checkbox"),h=(0,i.up)("q-card-section"),_=(0,i.up)("q-inner-loading"),m=(0,i.up)("q-card"),g=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(m,{style:{width:"700px","max-width":"1060px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"text-white secondary-toolbar draggable-toolbar"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i._)("span",_t,(0,o.zw)(e.$t("select_doc_type_fields")),1)])),_:1}),(0,i.wy)((0,i.Wm)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[g]])])),_:1}),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",mt,[(0,i._)("div",gt,[(0,i.Wm)(u,{clearable:"",outlined:"",dense:"",modelValue:e.selected_doc_type,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.selected_doc_type=t),e.docTypeSelected],options:e.active_doc_types_sub_types_list,label:e.$t("pages.screen2a.doctype"),style:{"min-width":"250px"}},null,8,["modelValue","options","onUpdate:modelValue","label"])]),(0,i._)("div",vt,[(0,i._)("div",ft,(0,o.zw)(e.$t("fields")),1),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.fields,((t,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s,class:"box"},[(0,i.Wm)(p,{modelValue:t.selected,"onUpdate:modelValue":e=>t.selected=e,class:"box-checkbox"},null,8,["modelValue","onUpdate:modelValue"]),(0,i.Uk)(" "+(0,o.zw)(e.getFieldLabelFromAllPrefixes(t)),1)])))),128))]),e.hasFields()?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",wt,(0,o.zw)(e.$t("select_doc_type_with_fields")),1))])]),(0,i._)("div",bt,[(0,i.Wm)(d,{label:e.$t("add_to_visible_columns"),color:"primary",onClick:t[1]||(t[1]=t=>e.addSelectedFieldsToVisibleColumns())},null,8,["label"])])])])),_:1}),(0,i.Wm)(_,{showing:e.processing||e.doc_fields_processing},{default:(0,i.w5)((()=>[yt])),_:1},8,["showing"])])),_:1})}var xt=s(29938);const Ct=(0,i.aZ)({mixins:[ve.Z],props:{visible_columns_obj_list:{}},mounted(){this.init()},data(){return{}},methods:{init(){try{this.processing=!0,this.getAllDocTypeFields()}catch(e){}finally{this.processing=!1}},addSelectedFieldsToVisibleColumns(){let e=this.getLargestSortOrderNumber(),t="";this.selected_doc_type.hasOwnProperty("value")&&(t=this.selected_doc_type["value"]),this.selected_doc_type.hasOwnProperty("doc_type_key")&&(t=this.selected_doc_type["doc_type_key"]);const s={};for(const o of Object.keys(this.fields)){const i=this.fields[o];i.selected&&(s[o]={name:o,sortable:!1,order:++e,translation_key:i.translation_key||o,doc_type_key:t,title:i.title})}const i=new CustomEvent("add_columns",{detail:{selected_fields:s}});document.dispatchEvent(i)},getLargestSortOrderNumber(){let e=0;for(const t of Object.keys(this.visible_columns_obj_list)){const s=this.visible_columns_obj_list[t];s.order>e&&(e=s.order)}return e},docTypeSelected(){try{if(!this.selected_doc_type)return;this.processing=!0;let e=this.selected_doc_type["name"];void 0!=this.selected_doc_type["doc_type_key"]&&(e=this.selected_doc_type["doc_type_key"]),this.fields=this.getFieldsByDocType(e)}catch(e){}finally{this.processing=!1}},hasFields(){return!(0,xt.fg)(this.fields)}},setup(){const e=(0,Fe.At)(),{active_doc_types_sub_types_list:t}=(0,ie.Jk)(e),s=(0,Fe.Cs)(),{processing:i,getFieldsByDocType:o}=(0,ie.Jk)(s),{getAllDocTypeFields:l}=s;return{getAllDocTypeFields:l,getFieldsByDocType:o,doc_fields_processing:i,processing:(0,ae.iH)(!1),active_doc_types_sub_types_list:t,selected_doc_type:(0,ae.iH)({value:null,label:""}),fields:(0,ae.iH)({})}}});var qt=s(10151),Et=s(39570),Dt=s(13747),Lt=s(25589),St=s(72448),Ft=s(65735),Wt=s(66941),Tt=s(24554),zt=s(60677);const Zt=(0,ee.Z)(Ct,[["render",kt],["__scopeId","data-v-25fbfc82"]]),$t=Zt;je()(Ct,"components",{QCard:qt.Z,QToolbar:Et.Z,QToolbarTitle:Dt.Z,QBtn:Pe.Z,QCardSection:Lt.Z,QSelect:St.Z,QCheckbox:Ft.Z,QInnerLoading:Wt.Z,QIcon:Tt.Z}),je()(Ct,"directives",{ClosePopup:zt.Z});var Ot=function(e,t,s,i){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function n(e){try{r(i.next(e))}catch(t){l(t)}}function a(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?s(e.value):o(e.value).then(n,a)}r((i=i.apply(e,t||[])).next())}))};const It=(0,i.aZ)({props:{},components:{DocTypeFields:$t},mounted(){this.init(),document.addEventListener("add_columns",this.addColumns)},unmounted:function(){document.removeEventListener("add_columns",this.addColumns)},data(){return{dragSrcEl:{},clearInterval:0}},beforeRouteLeave:function(e,t,s){this.removeDragEvents(),s()},methods:{BeforePopupShow(){this.init(),this.show_column_settings=!0},init(){return Ot(this,void 0,void 0,(function*(){this.elements_loaded=!1,this.visible_columns=[],this.visible_columns_obj_list={},this.hidden_columns={},yield this.setColumns(),this.intervalManager()}))},setColumns(){return Ot(this,void 0,void 0,(function*(){yield this.setVisibleColumns(),this.setHiddenColumns()}))},setHiddenColumns(){for(const e in this.all_columns){if(this.visible_columns_obj_list.hasOwnProperty(e))continue;const t=this.all_columns[e];t.selected=!1,t.label=this.getColumnLabel(t),this.hidden_columns[t.name]=t}},setVisibleColumns(){return Ot(this,void 0,void 0,(function*(){const e=yield this.getSavedColumns();this.setVibileColumnsForView(e),this.visible_columns_obj_list=e}))},setVibileColumnsForView(e){this.visible_columns=[];for(const t in e)e[t].selected=!1,e[t].label=this.getColumnLabel(e[t]),this.visible_columns.push(e[t]);this.sortVisibleColumns()},moveToHideColumnList(){this.visible_columns.forEach(((e,t)=>{if(!this.visible_columns_obj_list[e.name].selected)return;const s=e.name;this.visible_columns_obj_list[s].selected=!1,this.hidden_columns[s]=this.visible_columns_obj_list[s],delete this.visible_columns_obj_list[s]})),this.setVibileColumnsForView(this.visible_columns_obj_list)},moveToShowColumnList(){for(var e of Object.keys(this.hidden_columns))this.hidden_columns[e].selected&&(this.hidden_columns[e].selected=!1,this.visible_columns_obj_list[e]=this.hidden_columns[e],delete this.hidden_columns[e]);this.setVibileColumnsForView(this.visible_columns_obj_list)},saveSettings(){return Ot(this,void 0,void 0,(function*(){this.processing=!0,yield this.saveColumns(this.visible_columns_obj_list),this.processing=!1,this.show_column_settings=!1}))},intervalManager(){if(!this.elements_loaded||0!==this.clearInterval){if(this.elements_loaded&&0!==this.clearInterval)return this.clearInterval=0,void clearInterval(this.clearInterval);this.isElementRendered(),this.elements_loaded&&this.addDragEvents(),!1===this.elements_loaded&&(this.clearInterval=setTimeout((()=>{this.intervalManager()}),1e3))}},isElementRendered(){let e=document.querySelectorAll(".visible-columns-parent .box");return e.length>0&&(this.elements_loaded=!0,!0)},removeDragEvents(){let e=document.querySelectorAll(".visible-columns-parent .box");e.forEach((e=>{e.removeEventListener("dragstart",this.handleDragStart),e.removeEventListener("dragend",this.handleDragEnd),e.removeEventListener("dragover",this.handleDragOver),e.removeEventListener("dragenter",this.handleDragEnter),e.removeEventListener("dragleave",this.handleDragLeave),e.removeEventListener("drop",this.handleDrop)}))},addDragEvents(){let e=document.querySelectorAll(".visible-columns-parent .box");e.forEach((e=>{e.removeEventListener("dragstart",this.handleDragStart),e.removeEventListener("dragend",this.handleDragEnd),e.removeEventListener("dragover",this.handleDragOver),e.removeEventListener("dragenter",this.handleDragEnter),e.removeEventListener("dragleave",this.handleDragLeave),e.removeEventListener("drop",this.handleDrop),e.addEventListener("dragstart",this.handleDragStart),e.addEventListener("dragend",this.handleDragEnd),e.addEventListener("dragover",this.handleDragOver),e.addEventListener("dragenter",this.handleDragEnter),e.addEventListener("dragleave",this.handleDragLeave),e.addEventListener("drop",this.handleDrop)}))},handleDragStart(e){e.target.style.opacity="0.4",e.dataTransfer.effectAllowed="move";const t=e.target.getAttribute("data-order"),s=e.target.getAttribute("data-column-name");e.dataTransfer.setData("column_order",t),e.dataTransfer.setData("column_name",s)},handleDragEnd(e){e.target.style.opacity="1";let t=document.querySelectorAll(".visible-columns-parent .box");t.forEach((function(e,t){e.classList.remove("over")}))},handleDragOver(e){return e.preventDefault(),!1},handleDragEnter(e){e.target.classList.add("over")},handleDragLeave(e){e.target.classList.remove("over")},handleDrop(e){e.stopPropagation(),e.preventDefault();const t=+e.target.getAttribute("data-order"),s=e.target.getAttribute("data-column-name"),i=+e.dataTransfer.getData("column_order"),o=e.dataTransfer.getData("column_name");return this.visible_columns_obj_list[o].order=t,this.visible_columns_obj_list[s].order=i,this.visible_columns.forEach((e=>{e.name===o&&(e.order=t),e.name===s&&(e.order=i)})),this.sortVisibleColumns(),this.$forceUpdate(),!1},sortVisibleColumns(){this.visible_columns.sort(((e,t)=>e.order-t.order))},onDashboardColumnDialogHide(){this.removeDragEvents(),this.show_column_settings=!1},onDocTypeFieldsDialogHide(){this.show_doc_type_fields=!1},addColumns(e){if(e){for(const t in e.detail.selected_fields)this.visible_columns_obj_list[t]=e.detail.selected_fields[t];this.setVibileColumnsForView(this.visible_columns_obj_list),this.onDocTypeFieldsDialogHide()}},removeDocTypeColumn(e){delete this.visible_columns_obj_list[e],this.setVibileColumnsForView(this.visible_columns_obj_list)}},setup(){const e=(0,Fe.Ln)(),{table_columns:t}=(0,ie.Jk)(e),{getSavedColumns:s,saveColumns:i,getColumnLabel:o}=e;return{getColumnLabel:o,elements_loaded:(0,ae.iH)(!1),visible_columns:(0,ae.iH)([]),visible_columns_obj_list:(0,ae.iH)({}),hidden_columns:(0,ae.iH)({}),processing:(0,ae.iH)(!1),all_columns:t,getSavedColumns:s,saveColumns:i,show_column_settings:(0,ae.iH)(!1),show_doc_type_fields:(0,ae.iH)(!1)}}});var Ut=s(5363),Vt=s(46778);const Ht=(0,ee.Z)(It,[["render",pt],["__scopeId","data-v-dcafb254"]]),Rt=Ht;je()(It,"components",{QBtn:Pe.Z,QTooltip:Ut.Z,QDialog:Vt.Z,QCard:qt.Z,QToolbar:Et.Z,QToolbarTitle:Dt.Z,QCardSection:Lt.Z,QCheckbox:Ft.Z,QIcon:Tt.Z,QInnerLoading:Wt.Z}),je()(It,"directives",{ClosePopup:zt.Z});const Mt={class:"row justify-around items-start"},At={class:"col row q-pt-md"},Pt={class:"text-subtitle1"},Qt={key:0,class:"col-12 text-red-5 height-20"},jt={class:"row no-wrap justify-around q-pt-md"},Bt={class:"col-auto q-mr-md"},Nt={class:"col-auto q-mr-md"},Yt={class:"row justify-end items-start q-mt-md"},Kt=(0,i._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function Jt(e,t,s,l,n,a){const r=(0,i.up)("q-select"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-banner"),u=(0,i.up)("q-inner-loading"),p=(0,i.up)("q-popup-proxy"),h=(0,i.up)("q-tooltip");return(0,i.wg)(),(0,i.j4)(d,{style:{height:"40px"},square:"",class:"q-mr-sm",color:"primary",icon:"img:sorting_2.svg"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onBeforeShow:e.BeforePopupShow,modelValue:e.show_column_settings,"onUpdate:modelValue":t[4]||(t[4]=t=>e.show_column_settings=t)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i._)("div",Mt,[(0,i._)("div",At,[(0,i._)("div",Pt,(0,o.zw)(e.$t("column_sort_settings")),1)])]),e.error?((0,i.wg)(),(0,i.iD)("div",Qt,"Please make sure column and direction are selected")):(0,i.kq)("",!0),(0,i._)("div",jt,[(0,i._)("div",Bt,[(0,i.Wm)(r,{class:"select-box",outlined:"",modelValue:e.order_by_field,"onUpdate:modelValue":t[0]||(t[0]=t=>e.order_by_field=t),"use-input":"",options:e.filtered_columns,onFilter:e.filterlistEvent,label:e.$t("column_name"),"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","label"])]),(0,i._)("div",Nt,[(0,i.Wm)(r,{outlined:"",class:"select-box",modelValue:e.order_by_direction,"onUpdate:modelValue":t[1]||(t[1]=t=>e.order_by_direction=t),"use-input":"",options:e.direction_options,label:e.$t("Direction"),"emit-value":"","map-options":""},null,8,["modelValue","options","label"])])]),(0,i._)("div",Yt,[(0,i.Wm)(d,{class:"q-mr-sm",label:e.$t("cancel"),color:"primary",onClick:t[2]||(t[2]=t=>e.show_column_settings=!1)},null,8,["label"]),(0,i.Wm)(d,{label:e.$t("done"),color:"primary",onClick:t[3]||(t[3]=t=>e.saveSettings())},null,8,["label"])])])),_:1}),(0,i.Wm)(u,{showing:e.processing},{default:(0,i.w5)((()=>[Kt])),_:1},8,["showing"])])),_:1},8,["onBeforeShow","modelValue"]),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("dashboard_sort_settings_tooltip")),1)])),_:1})])),_:1})}var Gt=function(e,t,s,i){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function n(e){try{r(i.next(e))}catch(t){l(t)}}function a(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?s(e.value):o(e.value).then(n,a)}r((i=i.apply(e,t||[])).next())}))};const Xt=(0,i.aZ)({props:{},mounted(){this.init()},data(){return{}},methods:{BeforePopupShow(){this.init(),this.show_column_settings=!0},init(){return Gt(this,void 0,void 0,(function*(){this.visible_columns=[],yield this.setColumns(),this.direction_options=[],this.direction_options.push({value:"asc",label:this.$t("Asc")}),this.direction_options.push({value:"desc",label:this.$t("Desc")}),0!==(0,xt.v7)(this.order_by)&&(this.order_by_field=this.order_by.field_name,this.order_by_direction=this.order_by.direction)}))},setColumns(){return Gt(this,void 0,void 0,(function*(){yield this.setVisibleColumns()}))},setVisibleColumns(){return Gt(this,void 0,void 0,(function*(){const e=yield this.getSavedColumns();this.filtered_columns=[],this.visible_columns=[];for(const t in e)e[t].selected=!1,e[t].label=this.getColumnLabel(e[t]),e[t].value=t,this.filtered_columns.push(e[t]),this.visible_columns.push(e[t]);this.sortColumns()}))},getColumnLabel(e){return e.label||(e.label=e.name),this.$t(e.label)},saveSettings(){return Gt(this,void 0,void 0,(function*(){if(this.error=!1,!this.order_by_field||!this.order_by_direction)return void(this.error=!0);this.processing=!0,this.order_by={field_name:this.order_by_field,direction:this.order_by_direction},yield this.saveOrderBy(),this.processing=!1,this.show_column_settings=!1;const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)}))},sortColumns(){this.filtered_columns.sort(((e,t)=>e.order-t.order)),this.visible_columns.sort(((e,t)=>e.order-t.order))},filterlistEvent(e,t,s){t(e?()=>{const t=e.toLowerCase();this.filtered_columns=this.visible_columns.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}:()=>{this.filtered_columns=this.visible_columns})}},setup(){const e=(0,Fe.Ln)(),{saveOrderBy:t,getSavedColumns:s}=e,{order_by:i}=(0,ie.Jk)(e);return{order_by:i,saveOrderBy:t,visible_columns:(0,ae.iH)([]),visible_columns_obj_list:(0,ae.iH)({}),filtered_columns:(0,ae.iH)({}),processing:(0,ae.iH)(!1),getSavedColumns:s,show_column_settings:(0,ae.iH)(!1),order_by_field:(0,ae.iH)(""),order_by_direction:(0,ae.iH)(""),direction_options:(0,ae.iH)([]),error:(0,ae.iH)(!1)}}});var es=s(83944),ts=s(15607);const ss=(0,ee.Z)(Xt,[["render",Jt]]),is=ss;je()(Xt,"components",{QBtn:Pe.Z,QPopupProxy:es.Z,QBanner:ts.Z,QSelect:St.Z,QInnerLoading:Wt.Z,QTooltip:Ut.Z});var os=s(47286),ls=s(91949);const ns=(0,i.aZ)({mixins:[],props:{},components:{ImportLogs:os.Z,TimeFilter:Ne,TableColumnsSettings:Rt,SortColumnsSettings:is},watch:{},mounted:function(){this.is_admin=(0,ls.i5)()},methods:{},setup(){const e=(0,Fe.Ln)(),{showKeyboardShortcuts:t}=(0,ie.Jk)(e);return{showKeyboardShortcuts:t,is_admin:(0,ae.iH)(!1)}}}),as=(0,ee.Z)(ns,[["render",Ve]]),rs=as;je()(ns,"components",{QBtn:Pe.Z,QTooltip:Ut.Z});const ds={class:"q-pa-md"},cs={class:"row q-my-sm"},us={style:{"margin-top":"10px"}},ps={class:"row q-my-sm"},hs={style:{"margin-top":"10px"}},_s={class:"row q-my-sm"},ms={style:{"margin-top":"10px"}},gs={class:"row q-my-sm"},vs={style:{"margin-top":"10px"}},fs={class:"float-right q-ml-auto"};function ws(e,t,s,l,n,a){const r=(0,i.up)("q-resize-observer"),d=(0,i.up)("q-space"),c=(0,i.up)("DocTypeFilter"),u=(0,i.up)("StatusFilter"),p=(0,i.up)("UserFilter"),h=(0,i.up)("PaginationSettings"),_=(0,i.up)("q-btn"),m=(0,i.up)("q-menu"),g=(0,i.up)("q-input");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(r,{onResize:e.elementLoadedEvent,debounce:0},null,8,["onResize"]),(0,i.Wm)(g,{dense:"",modelValue:e.searchInput,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.searchInput=t),t[2]||(t[2]=t=>e.inputValueChanges())],class:(0,o.C_)(["search-invoices",0===e.searchInput.length?"search-in-active":"search-active"]),autofocus:"",placeholder:e.$t("search"),outlined:""},{append:(0,i.w5)((()=>[(0,i.Wm)(_,{icon:"tune",round:"",flat:"",dense:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{style:{width:"500px",height:"290px"},anchor:"bottom start",self:"top left",offset:[453,10]},{default:(0,i.w5)((()=>[(0,i._)("div",ds,[(0,i._)("div",cs,[(0,i._)("span",us,(0,o.zw)(e.$t("document_type")),1),(0,i.Wm)(d),(0,i.Wm)(c)]),(0,i._)("div",ps,[(0,i._)("span",hs,(0,o.zw)(e.$t("status")),1),(0,i.Wm)(d),(0,i.Wm)(u)]),(0,i._)("div",_s,[(0,i._)("span",ms,(0,o.zw)(e.$t("assigned_to")),1),(0,i.Wm)(d),(0,i.Wm)(p)]),(0,i._)("div",gs,[(0,i._)("span",vs,(0,o.zw)(e.$t("pagination_size")),1),(0,i.Wm)(d),(0,i.Wm)(h)]),(0,i._)("div",fs,[(0,i.Wm)(_,{style:{height:"40px"},color:"input-border-color",outline:"",class:"q-mr-sm mt-20",label:e.$t("clear_filters"),onClick:t[0]||(t[0]=t=>e.resetFilters())},null,8,["label"])])])])),_:1})])),_:1})])),_:1},8,["modelValue","class","placeholder"])],64)}var bs=s(49405);function ys(e,t,s,o,l,n){const a=(0,i.up)("q-select");return(0,i.wg)(),(0,i.j4)(a,{outlined:"",dense:"",class:"q-mr-sm user-select",modelValue:e.pagination_size,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.pagination_size=t),e.update],options:e.pagination_options,label:e.$t("pagination_size")},null,8,["modelValue","options","onUpdate:modelValue","label"])}var ks=function(e,t,s,i){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function n(e){try{r(i.next(e))}catch(t){l(t)}}function a(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?s(e.value):o(e.value).then(n,a)}r((i=i.apply(e,t||[])).next())}))};const xs=(0,i.aZ)({mixins:[],props:{},watch:{},mounted(){this.getPaginationCount()},methods:{getPaginationCount(){return ks(this,void 0,void 0,(function*(){this.pagination_size=yield this.getPaginationSize()}))},update(){return ks(this,void 0,void 0,(function*(){yield this.setPaginationSize(),this.triggerApplyFilters()}))},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{});document.dispatchEvent(e)}},setup(){const e=(0,Fe.Ln)(),{pagination_size:t}=(0,ie.Jk)(e),{getPaginationSize:s,setPaginationSize:i}=e;return{setPaginationSize:i,getPaginationSize:s,pagination_size:t,pagination_options:(0,ae.iH)(["10","25","50","100"])}}}),Cs=(0,ee.Z)(xs,[["render",ys]]),qs=Cs;je()(xs,"components",{QSelect:St.Z});const Es={class:"ellipsis"};function Ds(e,t,s,l,n,a){const r=(0,i.up)("q-select");return(0,i.wg)(),(0,i.j4)(r,{ref:"q-select",class:"q-mr-sm user-filter-select",dense:"",outlined:"",modelValue:e.assigned_user,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.assigned_user=t),e.modelUpdated],options:e.user_options,label:e.$t("assigned_to")},{"selected-item":(0,i.w5)((e=>[(0,i._)("div",Es,(0,o.zw)(e.opt.label),1)])),_:1},8,["modelValue","options","onUpdate:modelValue","label"])}const Ls=(0,i.aZ)({mixins:[],props:{},watch:{quickFilterMap:{deep:!0,handler:function(e,t){this.loadFilters()}}},mounted(){this.setUserOptions()},methods:{loadFilters(){const e=this.quickFilterMap.get("assigned_to_me_only");e?this.assigned_user=e:this.resetFilters()},resetFilters(){this.assigned_user=null},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)},modelUpdated(){this.handleEmptyStatus()||(this.quickFilterMap.set("assigned_to_me_only",this.assigned_user),this.triggerApplyFilters())},handleEmptyStatus(){return(!this.assigned_user||null===this.assigned_user)&&(this.resetFilters(),this.triggerApplyFilters(),!0)},setUserOptions(){this.user_options=[{label:this.$t("all"),value:!1},{label:this.$t("assigned_to_me"),value:!0}],this.resetFilters()}},setup(){const e=(0,Fe.Ln)(),{quickFilterMap:t}=(0,ie.Jk)(e);return{quickFilterMap:t,assigned_user:(0,ae.iH)(null),user_options:(0,ae.iH)([])}}}),Ss=(0,ee.Z)(Ls,[["render",Ds]]),Fs=Ss;function Ws(e,t,s,l,n,a){const r=(0,i.up)("q-select");return(0,i.wg)(),(0,i.j4)(r,{outlined:"",class:"q-mr-sm",style:{width:"227px",height:"40px"},clearable:"",dense:"",modelValue:e.selected_doc_type,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.selected_doc_type=t),e.modelUpdated],"use-input":e.handleEmptyStatus,onFilter:e.filterlistEvent,options:e.filtered_document_type_list,label:e.$t("doc_type")},{"selected-item":(0,i.w5)((e=>[(0,i._)("div",null,(0,o.zw)(e.opt.label),1)])),_:1},8,["modelValue","use-input","onFilter","options","onUpdate:modelValue","label"])}je()(Ls,"components",{QSelect:St.Z});const Ts=(0,i.aZ)({mixins:[],props:{},watch:{document_type_filter_loading:{handler:function(e,t){this.filtered_document_type_list=this.document_type_filter}},quickFilterMap:{deep:!0,handler:function(e,t){this.loadSavedFiler()}}},mounted(){this.getDocumentTypeFilters()},unmounted:function(){},methods:{resetFilters(){this.selected_doc_type=null,this.quickFilterMap.delete("doc_type")},loadSavedFiler(){const e=this.quickFilterMap.get("doc_type");this.selected_doc_type=e||null},removeFilter(){this.selected_doc_type=null;const e=new CustomEvent("remove_filter_by_key",{detail:"selected_filter_status"});document.dispatchEvent(e)},modelUpdated(){this.handleEmptyStatus()||(this.quickFilterMap.set("doc_type",this.selected_doc_type),this.triggerApplyFilters())},handleEmptyStatus(){return(!this.selected_doc_type||null===this.selected_doc_type)&&(this.resetFilters(),this.triggerApplyFilters(),!0)},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)},filterlistEvent(e,t,s){t(e?()=>{const t=e.toLowerCase();this.filtered_document_type_list=this.document_type_filter.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}:()=>{this.filtered_document_type_list=this.document_type_filter})}},setup(){const e=(0,Fe.K8)(),{document_type_filter:t,document_type_filter_loading:s}=(0,ie.Jk)(e),{getDocumentTypeFilters:i}=e,o=(0,Fe.Ln)(),{quickFilterMap:l}=(0,ie.Jk)(o);return{getDocumentTypeFilters:i,document_type_filter:t,document_type_filter_loading:s,filtered_document_type_list:(0,ae.iH)([]),selected_doc_type:(0,ae.iH)(null),quickFilterMap:l}}}),zs=(0,ee.Z)(Ts,[["render",Ws]]),Zs=zs;function $s(e,t,s,l,n,a){const r=(0,i.up)("q-checkbox"),d=(0,i.up)("q-item-section"),c=(0,i.up)("q-item"),u=(0,i.up)("q-select");return(0,i.wg)(),(0,i.j4)(u,{ref:"qselect",class:"q-mr-sm",dense:"",style:{width:"227px"},multiple:"",outlined:"","use-input":"",modelValue:e.selected_status,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.selected_status=t),e.modelUpdated],onFilter:e.filterlistEvent,onInput:e.clearFilter,options:e.filtered_status_list,label:e.$t("status")},{option:(0,i.w5)((({itemProps:e,selected:t,opt:s,toggleOption:l})=>[(0,i.Wm)(c,(0,o.vs)((0,i.F4)(e)),{default:(0,i.w5)((()=>[(0,i.Wm)(d,{side:""},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{"model-value":t,"onUpdate:modelValue":e=>l(s)},null,8,["model-value","onUpdate:modelValue"])])),_:2},1024),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i._)("div",null,(0,o.zw)(s.label),1)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","onFilter","onInput","onUpdate:modelValue","options","label"])}je()(Ts,"components",{QSelect:St.Z});var Os=s(41891),Is=function(e,t,s,i){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function n(e){try{r(i.next(e))}catch(t){l(t)}}function a(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?s(e.value):o(e.value).then(n,a)}r((i=i.apply(e,t||[])).next())}))};const Us=(0,i.aZ)({mixins:[pe.Z],props:{},watch:{status_list_loading:{handler:function(e,t){this.filtered_status_list=this.status_list}},quickFilterMap:{deep:!0,handler:function(e,t){this.loadSavedFiler()}}},data(){return{status_filter_style_setting:Os.z0}},mounted(){return Is(this,void 0,void 0,(function*(){if(this.user_settings[this.status_filter_style_setting]||(this.user_settings[this.status_filter_style_setting]=Os.tl.all),this.user_settings[this.status_filter_style_setting]==Os.tl.custom){this.status_list=[];let e=yield this.getSettingWithExpiry(Os.P3);e.split(",").forEach((e=>{let t=e;"-"!=pe.Z.methods.getLabelTranslation(e)&&this.status_list.push(Object.assign({},{value:t,label:pe.Z.methods.getLabelTranslation(e)})),this.filtered_status_list=this.status_list}))}else this.getStatusesList(this.user_settings[this.status_filter_style_setting]);this.loadSavedFiler(),document.addEventListener("quick_filter_remove",this.quickFilterRemove)}))},unmounted:function(){document.removeEventListener("quick_filter_remove",this.quickFilterRemove)},methods:{quickFilterRemove(e){e&&e.detail&&"status"===e.detail&&(this.selected_status=null,this.quickFilterMap.delete("status"))},loadSavedFiler(){const e=this.quickFilterMap.get("status_list");this.selected_status=e||[]},modelUpdated(){if(this.handleEmptyStatus())return;let e="";this.selected_status.length>>0?(this.selected_status.forEach((t=>{e+=t.value+","})),this.quickFilterMap.set("status",e),this.quickFilterMap.set("status_list",this.selected_status)):(this.quickFilterMap.delete("status"),this.quickFilterMap.delete("status_list")),this.quickFilterMap.delete("tab_status"),this.triggerApplyFilters()},handleEmptyStatus(){return(!this.selected_status||null===this.selected_status)&&(this.quickFilterRemove({detail:"status"}),this.triggerApplyFilters(),!0)},triggerApplyFilters(){const e=new CustomEvent("reset_pages",{detail:{}});document.dispatchEvent(e);const t=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(t)},filterlistEvent(e,t,s){t(e?()=>{const t=e.toLowerCase();this.filtered_status_list=this.status_list.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}:()=>{this.filtered_status_list=this.status_list})},clearFilter(){void 0!==this.$refs.qselect&&this.$refs.qselect.updateInputValue("")}},setup(){const e=(0,Fe.tl)(),{status_list_loading:t,status_list:s}=(0,ie.Jk)(e),{getStatusesList:i}=e,o=(0,Fe.Ln)(),{quickFilterMap:l}=(0,ie.Jk)(o),{saveFilters:n}=o,a=(0,Fe.VF)(),{user_settings:r}=(0,ie.Jk)(a),{getSettingWithExpiry:d}=a;return{saveFilters:n,getStatusesList:i,getSettingWithExpiry:d,status_list:s,quickFilterMap:l,status_list_loading:t,filtered_status_list:(0,ae.iH)([]),selected_status:(0,ae.iH)([]),user_settings:r}}});var Vs=s(83414),Hs=s(52035);const Rs=(0,ee.Z)(Us,[["render",$s]]),Ms=Rs;je()(Us,"components",{QSelect:St.Z,QItem:Vs.Z,QItemSection:Hs.Z,QCheckbox:Ft.Z});const As=(0,i.aZ)({mixins:[],props:{},components:{DocTypeFilter:Zs,StatusFilter:Ms,UserFilter:Fs,PaginationSettings:qs},watch:{quickFilterMap:{deep:!0,handler:function(e,t){this.loadSavedFiler()}}},mounted(){this.debounceSearchInputFunc=(0,bs.Z)((()=>{this.triggerApplyFilters()}),1e3),window.addEventListener("resize",this.elementLoadedEvent),document.addEventListener("delete_input_text",this.clearSearchInput)},methods:{clearSearchInput(){this.searchInput=""},elementLoadedEvent(){const e=new CustomEvent("load_saved_filter_badge",{detail:""});document.dispatchEvent(e)},resetFilters(){const e=new CustomEvent("reset_filters",{});document.dispatchEvent(e)},loadSavedFiler(){const e=this.quickFilterMap.get("keyword");e&&(this.searchInput=e)},inputValueChanges(){if(this.reset_pagination=!1,this.handleEmptyStatus())return void this.debounceSearchInputFunc();const e=this.quickFilterMap.get("keyword");"string"===typeof e&&e!==this.searchInput.trim()&&(this.reset_pagination=!0),this.quickFilterMap.set("keyword",this.searchInput.trim()),this.debounceSearchInputFunc()},handleEmptyStatus(){return(!this.searchInput||null===this.searchInput||""===this.searchInput.trim())&&(this.resetFilters(),!0)},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{reset_pagination:this.reset_pagination}});document.dispatchEvent(e)}},setup(){const e=(0,Fe.Ln)(),{quickFilterMap:t}=(0,ie.Jk)(e);return{searchInput:(0,ae.iH)(""),quickFilterMap:t,showing:(0,ae.iH)(!1),debounceSearchInputFunc:{},reset_pagination:(0,ae.iH)(!1)}}});var Ps=s(15151),Qs=s(64689),js=s(20811),Bs=s(62025),Ns=s(86115);const Ys=(0,ee.Z)(As,[["render",ws]]),Ks=Ys;je()(As,"components",{QResizeObserver:Ps.Z,QInput:Qs.Z,QBtn:Pe.Z,QMenu:js.Z,QSpace:Bs.Z,QField:Ns.Z});const Js={class:"saved-filter-badge row absolute"};function Gs(e,t,s,l,n,a){const r=(0,i.up)("q-icon"),d=(0,i.up)("q-badge");return(0,i.wg)(),(0,i.iD)("div",Js,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.quickFilterMap,(([t,s])=>((0,i.wg)(),(0,i.iD)(i.HY,{key:t},[s.hasOwnProperty("value")&&"all_invoices"===s.value||"status_list"===t?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[],64)):((0,i.wg)(),(0,i.j4)(d,{key:1,rounded:"",color:"primary",class:"q-mr-sm capitalize"},{default:(0,i.w5)((()=>[s.hasOwnProperty("label")?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Uk)((0,o.zw)(e.$t(s.label)),1)],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,o.zw)(s.toLowerCase()),1)],64)),(0,i.Wm)(r,{name:"close",color:"white",class:"q-ml-xs cursor-pointer",onClick:s=>e.removeFilter(t)},null,8,["onClick"])])),_:2},1024))],64)))),128))])}var Xs=function(e,t,s,i){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function n(e){try{r(i.next(e))}catch(t){l(t)}}function a(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?s(e.value):o(e.value).then(n,a)}r((i=i.apply(e,t||[])).next())}))};const ei=(0,i.aZ)({props:{},mounted(){this.init(),document.addEventListener("load_saved_filter_badge",this.loadSavedFiltersBadges)},unmounted:function(){document.removeEventListener("load_saved_filter_badge",this.loadSavedFiltersBadges)},methods:{init(){return Xs(this,void 0,void 0,(function*(){yield this.$nextTick(),this.loadSavedFiltersBadges()}))},removeFilter(e){if("status"==e&&this.quickFilterMap.delete("status_list"),this.quickFilterMap.delete(e),"keyword"==e){const e=new CustomEvent("delete_input_text",{detail:{}});document.dispatchEvent(e)}this.triggerApplyFilters(),this.triggerRemoveFilterByKey(e)},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)},triggerRemoveFilterByKey(e){return Xs(this,void 0,void 0,(function*(){yield this.$nextTick();const t=new CustomEvent("remove_filter_by_key",{detail:e});document.dispatchEvent(t)}))},loadSavedFiltersBadges(){const e=document.querySelector(".search-input");if(!e)return;const t=document.querySelector(".saved-filter-badge");if(!t)return;let s=e.getBoundingClientRect(),i=Number(s.left+window.pageXOffset);t.style.left=i-20+"px"}},setup(){const e=(0,Fe.Ln)(),{quickFilterMap:t}=(0,ie.Jk)(e);return{quickFilterMap:t}}});var ti=s(69721);const si=(0,ee.Z)(ei,[["render",Gs]]),ii=si;je()(ei,"components",{QBadge:ti.Z,QIcon:Tt.Z});var oi=s(110);function li(e,t,s,l,n,a){const r=(0,i.up)("q-tooltip"),d=(0,i.up)("q-btn");return e.showScanButton?((0,i.wg)(),(0,i.j4)(d,{key:0,style:{height:"40px"},class:"q-mr-sm mt-20",color:"primary",icon:"img:scannen.svg",onClick:t[0]||(t[0]=e=>this.$router.push("/scan"))},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("scan_document")),1)])),_:1})])),_:1})):(0,i.kq)("",!0)}var ni=function(e,t,s,i){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function n(e){try{r(i.next(e))}catch(t){l(t)}}function a(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?s(e.value):o(e.value).then(n,a)}r((i=i.apply(e,t||[])).next())}))};const ai=(0,i.aZ)({props:{},mounted(){this.get_scan_settings()},methods:{get_scan_settings(){return ni(this,void 0,void 0,(function*(){const e=yield this.getSettingWithExpiry("DOC_SCAN_MODULE_SETTING");e&&(this.showScanButton=!1,"true"!=e&&1!=e||(this.showScanButton=!0))}))}},setup(){const e=(0,Fe.VF)(),{getSettingWithExpiry:t}=e;return{getSettingWithExpiry:t,showScanButton:(0,ae.iH)(!1)}}}),ri=(0,ee.Z)(ai,[["render",li]]),di=ri;je()(ai,"components",{QBtn:Pe.Z,QTooltip:Ut.Z});const ci={class:"row items-stretch justify-start"},ui={class:"text-h6"},pi={class:"text-subtitle2"},hi={class:"text-h6"},_i={class:"text-subtitle2"},mi={class:"text-h6"},gi={class:"text-subtitle2"},vi={class:"text-h6"},fi={class:"text-subtitle2"},wi={class:"text-h6"},bi={class:"text-subtitle2"},yi={class:"text-h6"},ki={class:"text-subtitle2"};function xi(e,t,s,l,n,a){const r=(0,i.up)("q-card-section"),d=(0,i.up)("q-tooltip"),c=(0,i.up)("q-card");return(0,i.wg)(),(0,i.iD)("div",ci,[(0,i.Wm)(c,{class:(0,o.C_)(["analytic-card cursor-pointer clickable","all_invoices"===e.selected_filter_status?"selected-card":""]),onClick:t[0]||(t[0]=t=>e.filterTabSelected("all_invoices",e.$t("all_invoices"))),style:{"border-left-color":"#2388ae"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i._)("div",ui,(0,o.zw)(e.all_invoices),1),(0,i._)("div",pi,(0,o.zw)(e.$t("all_invoices")),1)])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Click to Filter by "+(0,o.zw)(e.$t("all_invoices")),1)])),_:1})])),_:1},8,["class"]),(0,i.Wm)(c,{class:(0,o.C_)(["analytic-card cursor-pointer clickable","in-progress"===e.selected_filter_status?"selected-card":""]),onClick:t[1]||(t[1]=t=>e.filterTabSelected("in-progress",e.$t("in_progress"))),style:{"border-left-color":"#409fff"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i._)("div",hi,(0,o.zw)(e.in_progress),1),(0,i._)("div",_i,(0,o.zw)(e.$t("in_progress")),1)])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Click to Filter by "+(0,o.zw)(e.$t("in_progress")),1)])),_:1})])),_:1},8,["class"]),(0,i.Wm)(c,{class:(0,o.C_)(["analytic-card cursor-pointer clickable","pending-user-input"===e.selected_filter_status?"selected-card":""]),onClick:t[2]||(t[2]=t=>e.filterTabSelected("pending-user-input",e.$t("pending_user_input"))),style:{"border-left-color":"#ffe240"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i._)("div",mi,(0,o.zw)(e.pending),1),(0,i._)("div",gi,(0,o.zw)(e.$t("pending_user_input")),1)])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Click to Filter by "+(0,o.zw)(e.$t("pending_user_input")),1)])),_:1})])),_:1},8,["class"]),(0,i.Wm)(c,{class:(0,o.C_)(["analytic-card cursor-pointer clickable","validated_pending_approval"===e.selected_filter_status?"selected-card":""]),onClick:t[3]||(t[3]=t=>e.filterTabSelected("validated_pending_approval",e.$t("validated_pending_approval"))),style:{"border-left-color":"#41b2bb"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i._)("div",vi,(0,o.zw)(e.validated_pending_approval+e.approved_pending_second_approval),1),(0,i._)("div",fi,(0,o.zw)(e.$t("validated_pending_approval")),1)])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Click to Filter by "+(0,o.zw)(e.$t("validated_pending_approval")),1)])),_:1})])),_:1},8,["class"]),(0,i.Wm)(c,{class:(0,o.C_)(["analytic-card cursor-pointer clickable","finished"===e.selected_filter_status?"selected-card":""]),onClick:t[4]||(t[4]=t=>e.filterTabSelected("finished",e.$t("exported"))),style:{"border-left-color":"#80bb41"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i._)("div",wi,(0,o.zw)(e.completed),1),(0,i._)("div",bi,(0,o.zw)(e.$t("exported")),1)])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Click to Filter by "+(0,o.zw)(e.$t("exported")),1)])),_:1})])),_:1},8,["class"]),(0,i.Wm)(c,{class:(0,o.C_)(["analytic-card cursor-pointer clickable","error"===e.selected_filter_status?"selected-card":""]),onClick:t[5]||(t[5]=t=>e.filterTabSelected("error",e.$t("error"))),style:{"border-left-color":"#d74061"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i._)("div",yi,(0,o.zw)(e.error),1),(0,i._)("div",ki,(0,o.zw)(e.$t("error")),1)])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Click to Filter by "+(0,o.zw)(e.$t("error")),1)])),_:1})])),_:1},8,["class"])])}const Ci=(0,i.aZ)({mixins:[],props:{},watch:{quickFilterMap:{deep:!0,handler:function(e,t){this.loadFilters()}}},components:{},mounted(){document.addEventListener("dashboard_refresh",this.refreshFilters)},unmounted:function(){document.removeEventListener("dashboard_refresh",this.refreshFilters)},methods:{refreshFilters(){this.all_invoices=0,this.automatically_processed=0,this.manually_processed=0,this.completed=0,this.in_progress=0,this.pending=0,this.validated_pending_approval=0,this.approved_pending_second_approval=0,this.error=0},loadFilters(){const e=this.quickFilterMap.get("tab_status");e||(this.selected_filter_status="all_invoices")},filterTabSelected(e,t){this.selected_filter_status=e;const s=new CustomEvent("quick_filter_remove",{detail:"status"});document.dispatchEvent(s),this.quickFilterMap.set("tab_status",{value:e,label:t}),this.triggerApplyFilters()},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)}},setup(){const e=(0,Fe.Ln)(),{quickFilterMap:t,all_invoices:s,automatically_processed:i,manually_processed:o,completed:l,in_progress:n,pending:a,validated_pending_approval:r,approved_pending_second_approval:d,error:c}=(0,ie.Jk)(e);return{quickFilterMap:t,show_analytics:(0,ae.iH)(!1),selected_filter_status:(0,ae.iH)("all_invoices"),all_invoices:s,automatically_processed:i,manually_processed:o,completed:l,in_progress:n,pending:a,validated_pending_approval:r,approved_pending_second_approval:d,error:c}}}),qi=(0,ee.Z)(Ci,[["render",xi],["__scopeId","data-v-0b59d348"]]),Ei=qi;je()(Ci,"components",{QCard:qt.Z,QCardSection:Lt.Z,QTooltip:Ut.Z});const Di={class:"text-weight-medium text-h6"},Li={class:"highlighted-back"},Si={class:"text-left",style:{"font-weight":"bold"}},Fi={class:"text-left",style:{"font-weight":"900"}},Wi={class:"text-left",style:{"font-weight":"bold"}},Ti={class:"text-left",style:{"font-weight":"900"}},zi=["src"],Zi=(0,i.Uk)(" + "),$i=(0,i._)("span",{class:"shortcut-Key-box q-ml-sm"}," k ",-1),Oi={class:"text-left",style:{"font-weight":"bold"}},Ii={class:"text-left",style:{"font-weight":"900"}},Ui=["src"],Vi=(0,i.Uk)(" + "),Hi=(0,i._)("span",{class:"shortcut-Key-box q-ml-sm"}," Q ",-1);function Ri(e,t,s,l,n,a){const r=(0,i.up)("q-card-section"),d=(0,i.up)("q-icon"),c=(0,i.up)("q-markup-table");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i._)("div",Di,(0,o.zw)(e.$t("keyboard_shortcuts")),1)])),_:1}),(0,i.Wm)(r,{class:"v-p-0"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"full-width",style:{overflow:"scroll","max-height":"60vh"},"virtual-scroll":""},{default:(0,i.w5)((()=>[(0,i._)("thead",null,[(0,i._)("tr",Li,[(0,i._)("th",Si,(0,o.zw)(e.$t("action")),1),(0,i._)("th",Fi,(0,o.zw)(e.$t("keyboard_shortcut")),1)])]),(0,i._)("tbody",null,[(0,i._)("tr",null,[(0,i._)("td",Wi,(0,o.zw)(e.$t("doc2light.descriptions.check_keyboard_shortcut")),1),(0,i._)("td",Ti,[(0,i.Wm)(d,{size:"40px"},{default:(0,i.w5)((()=>[(0,i._)("img",{src:e.combination_key+".svg"},null,8,zi)])),_:1}),Zi,$i])]),(0,i._)("tr",null,[(0,i._)("td",Oi,(0,o.zw)(e.$t("refresh_list")),1),(0,i._)("td",Ii,[(0,i.Wm)(d,{size:"40px"},{default:(0,i.w5)((()=>[(0,i._)("img",{src:e.combination_key+".svg"},null,8,Ui)])),_:1}),Vi,Hi])])])])),_:1})])),_:1})],64)}var Mi=s(53198);const Ai=(0,i.aZ)({el:"#app",mixins:[Mi.Z],props:{},components:{},data(){return{combination_key:""}},mounted:function(){this.combination_key=this.getCombinationKey(null)},setup(){return{}}});var Pi=s(30481);const Qi=(0,ee.Z)(Ai,[["render",Ri]]),ji=Qi;je()(Ai,"components",{QCardSection:Lt.Z,QMarkupTable:Pi.Z,QIcon:Tt.Z});const Bi={methods:{keyDownEvent(e){try{const t=Mi.Z.methods.isCombinationKey(e);if(81===e.keyCode&&!0===t){e.preventDefault();const t=new CustomEvent("dashboard_refresh",{});return void document.dispatchEvent(t)}if(75===e.keyCode&&!0===t){e.preventDefault();const t=new CustomEvent("open_keyboard_shortcuts",{});return void document.dispatchEvent(t)}}catch(e){}}}},Ni=(0,i.aZ)({mixins:[Bi],props:{},watch:{},components:{savedFilterBadges:ii,ImportMultiInvoice:oi.Z,advancedSettings:rs,quickSearch:Ks,scanButton:di,analytics:Ei,keyboardShortcutInfo:ji},mounted:function(){document.addEventListener("keydown",this.keyDownEvent),document.addEventListener("open_keyboard_shortcuts",this.openKeyboardShortcuts)},unmounted:function(){document.removeEventListener("keydown",this.keyDownEvent),document.removeEventListener("open_keyboard_shortcuts",this.openKeyboardShortcuts)},methods:{openKeyboardShortcuts(){this.showKeyboardShortcuts=!0},refreshFilters(){const e=new CustomEvent("dashboard_refresh",{detail:{show_shimmer_loader:!0}});document.dispatchEvent(e)},resetFilters(){const e=new CustomEvent("reset_filters",{});document.dispatchEvent(e)}},setup(){const e=(0,Fe.Ln)(),{quickFilterMap:t,all_invoices:s,current_invoice_count:i,showKeyboardShortcuts:o}=(0,ie.Jk)(e);return{current_invoice_count:i,showKeyboardShortcuts:o,quickFilterMap:t,show_advanced_filters:(0,ae.iH)(!1),show_analytics:(0,ae.iH)(!1),all_invoices:s}}});var Yi=s(65869),Ki=s(99367);const Ji=(0,ee.Z)(Ni,[["render",Se]]),Gi=Ji;je()(Ni,"components",{QSpace:Bs.Z,QBtn:Pe.Z,QTooltip:Ut.Z,QSeparator:Yi.Z,QDialog:Vt.Z,QCard:qt.Z,QCardActions:Ki.Z});const Xi={class:"secondary-c-text float-right"},eo={class:"flip-clock"},to={class:"count__piece text-white text-uppercase title"},so={class:"count__piece"},io={class:"card"},oo={class:"card__top doc_count"},lo={class:"count__piece"},no={class:"card"},ao={class:"card__top trocr_count"};function ro(e,t,s,l,n,a){const r=(0,i.up)("q-tooltip");return(0,i.wg)(),(0,i.iD)("div",Xi,[(0,i._)("div",eo,[(0,i._)("span",to,(0,o.zw)(e.$t("pending_documents"))+": ",1),(0,i._)("span",so,[(0,i._)("b",io,[(0,i._)("b",oo,(0,o.zw)(e.doc_queue),1)]),(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("document_count")),1)])),_:1})]),(0,i._)("span",lo,[(0,i._)("b",no,[(0,i._)("b",ao,(0,o.zw)(e.trocr_queue),1)]),(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("ki_count")),1)])),_:1})])])])}var co=function(e,t,s,i){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function n(e){try{r(i.next(e))}catch(t){l(t)}}function a(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?s(e.value):o(e.value).then(n,a)}r((i=i.apply(e,t||[])).next())}))};const uo=(0,i.aZ)({el:"#app",mixins:[],watch:{isConnected:{handler:function(e,t){this.subscribeToTasksCountChannel()}},pending_docs:{deep:!0,handler:function(e,t){this.parseResponse(e)}}},mounted:function(){this.initView(),document.addEventListener("dashboard_refresh",this.refreshCount)},unmounted:function(){document.removeEventListener("dashboard_refresh",this.refreshCount),this.clearCounterInterval()},data(){return{CounterInterval:0}},methods:{initView(){return co(this,void 0,void 0,(function*(){try{if(yield this.getStats(),ge.ql)return void this.subscribeToTasksCountChannel();this.intervalManager()}catch(e){this.clearCounterInterval()}finally{this.request_processing=!1}}))},parseResponse(e){e&&e.hasOwnProperty("queues_info")&&(e.queues_info.hasOwnProperty("api-tasks")&&(this.doc_queue=Number(e.queues_info["api-tasks"]["total"]),this.doc_queue<10&&(this.doc_queue="0"+this.doc_queue)),e.queues_info.hasOwnProperty("api-tasks-tr-ocr")&&(this.trocr_queue=Number(e.queues_info["api-tasks-tr-ocr"]["total"]),this.trocr_queue<10&&(this.trocr_queue="0"+this.trocr_queue)))},refreshCount(){this.request_processing||this.getStats()},getStats(){return co(this,void 0,void 0,(function*(){if(this.subscribed_channels.has("pending_docs"))return;this.request_processing=!0;const e=yield de.Zj.getTasksState();try{if(!e)throw this.clearCounterInterval(),e;this.parseResponse(e)}catch(t){}finally{this.request_processing=!1}}))},clearCounterInterval(){clearInterval(this.CounterInterval)},intervalManager(){this.CounterInterval=setInterval((()=>{this.getStats()}),6e4)},subscribeToTasksCountChannel(){"/dashboard"===this.$route.path&&this.subscribeToChannel("pending_docs")}},setup(){const e=(0,Fe.b8)(),{isConnected:t,pending_docs:s,subscribed_channels:i}=(0,ie.Jk)(e),{subscribeToChannel:o,unsubscribeToChannel:l}=e;return{subscribed_channels:i,unsubscribeToChannel:l,pending_docs:s,subscribeToChannel:o,isConnected:t,doc_queue:(0,ae.iH)("00"),trocr_queue:(0,ae.iH)("00"),request_processing:(0,ae.iH)(!1)}}}),po=(0,ee.Z)(uo,[["render",ro],["__scopeId","data-v-4fda71fc"]]),ho=po;je()(uo,"components",{QTooltip:Ut.Z});const _o={class:"row"},mo={class:"-12"},go={class:"row"},vo=(0,i._)("div",{class:"col-12 text-center"},[(0,i._)("img",{src:"assign to.svg",class:"black_to_white"})],-1),fo={class:"col-12 text-center text-h5"},wo={class:"col-sm-12 col-md-12 col-lg-12 input-text"},bo={class:"col-sm-12 col-md-12 col-lg-12 input-text"},yo=(0,i._)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},null,-1),ko={class:"col-sm-12 col-md-12 col-lg-12"},xo={class:"row q-pt-md"},Co={class:"col-sm-12 col-md-12 col-lg-12 q-pl-md q-pr-md"};function qo(e,t,s,l,n,a){const r=(0,i.up)("q-toolbar-title"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-toolbar"),u=(0,i.up)("q-select"),p=(0,i.up)("q-form"),h=(0,i.up)("q-card-section"),_=(0,i.up)("q-card"),m=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(_,{style:{padding:"0 25px 25px 25px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r),(0,i.wy)((0,i.Wm)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[m]])])),_:1}),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i._)("div",_o,[(0,i._)("div",mo,[(0,i._)("div",go,[vo,(0,i._)("div",fo,(0,o.zw)(e.$t("assigne_to")),1),(0,i.Wm)(p,{onSubmit:e.updateAssignment,class:"full-width"},{default:(0,i.w5)((()=>[(0,i._)("div",wo,[(0,i.Wm)(u,{clearable:"",modelValue:e.sub_org_id,"onUpdate:modelValue":t[0]||(t[0]=t=>e.sub_org_id=t),"use-input":"",options:e.filterSubOrgsList,onFilter:e.filterSubOrgslistEvent,label:e.$t("sub_organizations"),loading:e.sub_org_list_loading,"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","label","loading"])]),(0,i._)("div",bo,[(0,i.Wm)(u,{ref:"selectq",clearable:"",modelValue:e.user_id,"onUpdate:modelValue":t[1]||(t[1]=t=>e.user_id=t),"use-input":"",id:e.updateUsers,onFilter:e.filterUsersEvent,options:e.filteredUserList,label:e.$t("assigne"),loading:e.user_list_loading,"emit-value":"","map-options":""},null,8,["modelValue","id","onFilter","options","label","loading"])]),yo,(0,i._)("div",ko,[(0,i._)("div",xo,[(0,i._)("div",Co,[(0,i.Wm)(d,{label:e.$t("save"),type:"submit",color:"primary",class:"full-width",icon:"done"},null,8,["label"])])])])])),_:1},8,["onSubmit"])])])])])),_:1})])),_:1})}var Eo=function(e,t,s,i){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function n(e){try{r(i.next(e))}catch(t){l(t)}}function a(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?s(e.value):o(e.value).then(n,a)}r((i=i.apply(e,t||[])).next())}))};const Do=(0,i.aZ)({el:"#app",mixins:[le.Z,ue.Z],props:{doc_ids:[]},mounted:function(){this.prepareUsersDropdown(),this.getSubOrgsList()},methods:{filertBySubOrgId(){if(!this.sub_org_id)return void(this.filteredUserList=this.usersList);let e=[];for(const[s,i]of Object.entries(this.subOrgList)){const t=i;t.value==this.sub_org_id&&(e=t.users)}if(!e||e.length<1)return void(this.filteredUserList=this.usersList);let t=[];for(const[s,i]of Object.entries(e)){const e=i;t.push(e.user_id)}this.filteredUserList=[],this.filteredUserList=this.usersList.filter((e=>t.includes(e.value)))},filterUsersEvent(e,t,s){this.filertBySubOrgId(),t(e?()=>{const t=e.toLowerCase();this.filteredUserList=this.filteredUserList.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}:()=>{this.filertBySubOrgId()})},filterSubOrgslistEvent(e,t,s){t(e?()=>{const t=e.toLowerCase();this.filterSubOrgsList=this.subOrgList.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}:()=>{this.filterSubOrgsList=this.subOrgList})},updateAssignment(){return Eo(this,void 0,void 0,(function*(){try{if(!this.user_id&&!this.sub_org_id)return void this.showErrorToast(this.$t("NO_USER_SUB_ORG_SELECTION"));this.showLoading();let e={doc_ids:this.doc_ids.join(","),assign_to_user:this.user_id||"",assign_to_sub_org:this.sub_org_id||""};const t=yield de.Zj.assignDocuments(e);if(!t||t.hasOwnProperty("success")&&!1===t.success)throw t;this.hideLoading(),this.showSuccessToast(this.$t("OPERATION_SUCESSFULL"));const s=new CustomEvent("assignment_success",{});document.dispatchEvent(s)}catch(e){const t=me.w.getErrorMessage(e);this.showErrorToast(t),this.hideLoading()}}))}},setup(){const e=(0,Fe.At)(),t=(0,ae.iH)(e.usersList),s=(0,ae.iH)(e.subOrgList),{prepareUsersDropdown:i,getSubOrgsList:o}=e,{user_list_loading:l,subOrgList:n,sub_org_list_loading:a,usersList:r}=(0,ie.Jk)(e);return{updateUsers:(0,ae.iH)(1),getSubOrgsList:o,prepareUsersDropdown:i,user_list_loading:l,sub_org_list_loading:a,dropdown_store:e,usersList:r,filteredUserList:t,subOrgList:n,filterSubOrgsList:s,user_id:(0,ae.iH)(),sub_org_id:(0,ae.iH)()}}});var Lo=s(68689);const So=(0,ee.Z)(Do,[["render",qo]]),Fo=So;je()(Do,"components",{QCard:qt.Z,QToolbar:Et.Z,QToolbarTitle:Dt.Z,QBtn:Pe.Z,QCardSection:Lt.Z,QForm:Lo.Z,QSelect:St.Z}),je()(Do,"directives",{ClosePopup:zt.Z});const Wo={class:"orderByParentSpan arrow-color"},To=["data-name"],zo=["data-name"];function Zo(e,t,s,l,n,a){return(0,i.wg)(),(0,i.iD)("span",Wo,[(0,i._)("span",{class:(0,o.C_)(["up-arrow orderBy absolute",e.is_order_by_selected("asc")?"selected":""]),"data-name":e.column_name,"data-direction":"asc",onClick:t[0]||(t[0]=(...t)=>e.OrderBy&&e.OrderBy(...t))},null,10,To),(0,i._)("span",{class:(0,o.C_)(["down-arrow orderBy absolute",e.is_order_by_selected("desc")?"selected":""]),"data-name":e.column_name,"data-direction":"desc",onClick:t[1]||(t[1]=(...t)=>e.OrderBy&&e.OrderBy(...t))},null,10,zo)])}var $o=function(e,t,s,i){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function n(e){try{r(i.next(e))}catch(t){l(t)}}function a(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?s(e.value):o(e.value).then(n,a)}r((i=i.apply(e,t||[])).next())}))};const Oo=(0,i.aZ)({mixins:[],props:{column_name:{type:String,required:!0}},components:{},watch:{order_by:{deep:!0,handler:function(e,t){this.init()}}},mounted:function(){this.init(),document.addEventListener("reset_filters",this.resetFilters)},unmounted:function(){document.removeEventListener("reset_filters",this.resetFilters)},methods:{is_order_by_selected(e){return this.order_by_field==this.column_name&&this.order_by_direction==e},init(){0!==(0,xt.v7)(this.order_by)&&(this.order_by_field=this.order_by.field_name,this.order_by_direction=this.order_by.direction)},resetFilters(){let e=document.getElementsByClassName("orderBy selected");Array.from(e).forEach((e=>{e.classList.remove("selected")}))},OrderBy(e){return $o(this,void 0,void 0,(function*(){if(e.target.classList.contains("selected"))return;let t=e.target.dataset.direction,s=e.target.dataset.name;if(!t||!s)return;e.target.classList.add("selected");const i=document.querySelectorAll(".orderBy");if(i.length){for(var o=0;o<i.length;o++){let e=i[o];(e.dataset.name!=s||e.dataset.name==s&&e.dataset.direction!=t)&&e.classList.remove("selected")}this.order_by_field=s,this.order_by_direction=t,this.order_by={field_name:this.order_by_field,direction:this.order_by_direction},this.paginationCount=1,yield this.saveOrderBy(),this.triggerApplyFilters()}}))},triggerApplyFilters(){const e=new CustomEvent("apply_filters",{detail:{}});document.dispatchEvent(e)}},setup(){const e=(0,Fe.Ln)(),{order_by:t,paginationCount:s}=(0,ie.Jk)(e),{saveOrderBy:i}=e;return{saveOrderBy:i,paginationCount:s,order_by:t,order_by_field:(0,ae.iH)(""),order_by_direction:(0,ae.iH)("")}}}),Io=(0,ee.Z)(Oo,[["render",Zo],["__scopeId","data-v-dec05000"]]),Uo=Io;var Vo=s(13873),Ho=s(25616),Ro=s(80589),Mo=s(7153),Ao=function(e,t,s,i){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function n(e){try{r(i.next(e))}catch(t){l(t)}}function a(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?s(e.value):o(e.value).then(n,a)}r((i=i.apply(e,t||[])).next())}))};const Po=(0,i.aZ)({el:"#app",mixins:[ue.Z,le.Z,_e.Z,ve.Z,he.Z,pe.Z,oe.Z,re.Z],components:{DashboardHeader:Gi,TaskCounters:ho,DocAssignment:Fo,SubHeader:Vo.Z,ColumnOrderBy:Uo,Loader:ce.Z},data(){return{all_invoice_data:[],InvoicesClearInterval:0,po_module_activate:!1,debounceSearchInputFunc:{},confirmMergeDialog:!1,filters_reset_after_restart_setting:Os.Ic}},beforeRouteLeave:function(e,t,s){this.intervalManager(!1),this.unsubscribeToChannel("dashboard"),this.unsubscribeToChannel("pending_docs"),s()},mounted(){return Ao(this,void 0,void 0,(function*(){try{window.dash=this,this.processing=!0,this.$route.params.force_restart&&"force_restart"===this.$route.params.force_restart&&(this.restartExportedInvoices=!0),this.headerCheckbox=!1,yield this.getSavedColumns(),this.handleTableColumns(!1),this.prepareStatusList(),yield this.getOrderBy(),yield this.getPaginationSize(),this.clearSelectedSessionStorage(),this.po_module_activate=this.isPoSettingActivate(),this.getSavedFilters(),this.intervalManager(!0),this.subscribeToDashboardChannel(),this.loadData(),document.addEventListener("apply_filters",this.applyFilterEvent),document.addEventListener("reset_filters",this.resetFilters),document.addEventListener("reset_pages",this.resetPages),document.addEventListener("dashboard_refresh",this.refreshFilters),document.addEventListener("dashboard_columns_updated",this.dashboardColumnsEvent),document.addEventListener("assignment_success",this.assignmentSuccess),this.debounceSearchInputFunc=(0,bs.Z)((()=>{this.applyFilter()}),1e3)}catch(e){}finally{this.processing=!1}}))},unmounted:function(){document.removeEventListener("keydown",this.keyDownEvent),document.removeEventListener("assignment_success",this.assignmentSuccess),document.removeEventListener("apply_filters",this.applyFilterEvent),document.removeEventListener("reset_filters",this.resetFilters),document.removeEventListener("dashboard_refresh",this.refreshFilters),document.removeEventListener("dashboard_columns_updated",this.dashboardColumnsEvent)},watch:{headerCheckbox(){!1===this.headerCheckbox&&(this.headerFabIcon=!1,this.isMultiDeleteButtonDisabled=!1,this.isMultiRestartButtonDisabled=!1)},processing:{handler:function(e,t){1==e?this.showLoading():this.hideLoading()}},isConnected:{handler:function(e,t){this.use_websocket=!0,this.subscribeToDashboardChannel()}},websocketHasError:{handler:function(e,t){1==e&&(this.use_websocket=!1)}},dashboard_data_flag:{handler:function(e,t){0!=e&&(this.data_status="received",this.handleWebSocketResult(this.dashboard_data))}}},methods:{applyFilterEvent(e){e&&e.detail&&!0===e.detail.reset_pagination&&(this.resetPagination=!0),this.applyFilter()},dashboardColumnsEvent(){this.dashboardColumnsUpdated()},dashboardColumnsUpdated(){return Ao(this,void 0,void 0,(function*(){this.handleTableColumns(),yield this.applySavedFilters(),this.fetchInvoices(!0)}))},handleTableColumns(e=!0){try{this.processing=!0;const e=this.visible_columns;this.table_columns=[];for(const t in this.visible_columns)e[t].selected=!1,e[t].label=this.getColumnLabel(e[t]),this.table_columns.push(e[t]);this.table_columns.sort(((e,t)=>e.order-t.order))}catch(t){}finally{e&&(this.processing=!1)}},intervalManager(e){clearInterval(this.InvoicesClearInterval),!0===e&&(this.InvoicesClearInterval=setInterval((()=>{this.fetchInvoices(!1)}),6e4))},applySavedFilters(){return Ao(this,void 0,void 0,(function*(){this.pageSize=Number(this.pagination_size),this.queryParams="?&skip="+this.startfrom+"&limit="+this.pageSize,this.queryParams+=(yield this.makeQueryParamFromFilters(!1)),this.resetPagination=!1}))},handleActions(e){return this.display_data.forEach(((t,s)=>{s!==e&&(t["fabAction"]=!1)})),!0},prepareStatusList(){this.statusList["new"]=[],this.statusList["new"]["value"]="new",this.statusList["new"]["class"]="text-light-green-6",this.statusList["ready_for_review"]=[],this.statusList["ready_for_review"]["value"]="ready_for_review",this.statusList["ready_for_review"]["class"]="text-amber-7",this.statusList["ready_for_validation"]=[],this.statusList["ready_for_validation"]["value"]="ready_for_validation",this.statusList["ready_for_validation"]["class"]="text-amber-7",this.statusList["validating"]=[],this.statusList["validating"]["value"]="ready_for_validation",this.statusList["validating"]["class"]="text-amber-7",this.statusList["validated_pending_export"]=[],this.statusList["validated_pending_export"]["value"]="validated_pending_export",this.statusList["validated_pending_export"]["class"]="text-amber-7",this.statusList["pending_confirmation"]=[],this.statusList["pending_confirmation"]["value"]="pending_confirmation",this.statusList["pending_confirmation"]["class"]="text-amber-7",this.statusList["finished"]=[],this.statusList["finished"]["value"]="finished",this.statusList["finished"]["class"]="text-light-green-6",this.statusList["workflow"]=[],this.statusList["workflow"]["value"]="workflow",this.statusList["workflow"]["class"]="text-light-green-6",this.statusList["completed"]=[],this.statusList["completed"]["value"]="completed",this.statusList["completed"]["class"]="text-light-green-6",this.statusList["restarted"]=[],this.statusList["restarted"]["value"]="restarted",this.statusList["restarted"]["class"]="text-blue-14",this.statusList["error"]=[],this.statusList["error"]["value"]="error",this.statusList["error"]["class"]="text-red-13",this.statusList["export_error"]=[],this.statusList["export_error"]["value"]="error",this.statusList["export_error"]["class"]="text-red-13",this.statusList["restart_export"]=[],this.statusList["restart_export"]["value"]="restart_export",this.statusList["restart_export"]["class"]="text-blue-14",this.statusList["running"]=[],this.statusList["running"]["value"]="running",this.statusList["running"]["class"]="text-blue-14",this.statusList["in_progress"]=[],this.statusList["in_progress"]["value"]="in_progress",this.statusList["in_progress"]["class"]="text-blue-14",this.statusList["restart_in_progress"]=[],this.statusList["restart_in_progress"]["value"]="restart_in_progress",this.statusList["restart_in_progress"]["class"]="text-blue-14",this.statusList["exporting"]=[],this.statusList["exporting"]["value"]="exporting",this.statusList["exporting"]["class"]="text-blue-14"},resetPages(){this.resetPagination=!0},applyFilter(){return Ao(this,void 0,void 0,(function*(){this.processing=!0,this.resetAllSelectedRows(),1==this.resetPagination&&(this.startfrom=0,this.paginationCount=1),this.resetPagination=!0,this.queryParams+=(yield this.makeQueryParamFromFilters()),""==this.queryParams&&this.removeSavedFilters(),this.queryParams="?&skip="+this.startfrom+"&limit="+this.pageSize,this.fetchInvoices(!0)}))},refreshFilters(e){let t=!1;e&&e.detail&&e.detail.show_shimmer_loader&&(t=!0),this.all_invoice_data=[],this.display_data=[],this.selectionList=[],this.headerCheckbox=!1,this.fetchInvoices(!0,t)},fetchInvoices(e,t=!1){return Ao(this,void 0,void 0,(function*(){try{if(e&&(this.processing=!0),t&&(this.display_data=[],this.selectionList=[],this.headerCheckbox=!1,this.show_table_loader=!0),yield this.applySavedFilters(),this.use_websocket){let e=yield this.getWebSocketDashboard();return void(1!=e&&setTimeout(this.handleWebsocketDelay,5e3))}{const e=yield de.Zj.getList(this.queryParams);this.updateDocumentStats(e),this.updateTableData(e),this.processing=!1,setTimeout(this.turnOnWebSocket,5e3)}}catch(s){this.showErrorToast(this.$t("pages.messages.ERROR_FETCHING_INVOICES")),this.processing=!1}}))},handleWebsocketDelay(){"received"!==this.data_status&&(this.use_websocket=!1,this.fetchInvoices(!1),setTimeout(this.turnOnWebSocket,5e3))},turnOnWebSocket(){this.websocketHasError||(this.use_websocket=!0)},updateTableData(e){this.resultsCount=e.overview["results-count"],this.current_invoice_count=this.resultsCount;let t=this.resultsCount/this.pageSize;this.skip=Math.ceil(t);let s=[];e.documents&&(s=e.documents),this.display_data=s,this.applyCustomFormatOnRows(),this.show_table_loader=!1,this.processing=!1},updateDocumentStats(e){this.all_invoices=e.overview["all-invoices"],this.automatically_processed=e.overview["automaticly-processed"],this.manually_processed=e.overview["manaualy-processed"],this.completed=e.overview["completed"],this.in_progress=e.overview["processing"],this.pending=e.overview["pending"],this.validated_pending_approval=e.overview["validated-pending-approval"],this.approved_pending_second_approval=e.overview["approved-pending-second-approval"],this.error=e.overview["error"]},applyCustomFormatOnRows(){this.display_data.forEach((e=>{e["fabAction"]=!1,e["rowSelection"]=!1,e["created_on"]=e["created_on"]?this.formateDate(e["created_on"],"YYYY-MM-DD HH:mm:ss"):"-",e["last_modified_on"]=e["last_modified_on"]?this.formateDate(e["last_modified_on"],"YYYY-MM-DD HH:mm:ss"):"-"}))},toFlowScreen(e){this.$router.push("/doc_flow/"+e)},toValidationScreen(e){Mo.Z.set("view_mod","edit"),this.$router.push("/2a/"+e)},toNewValidationScreen(e){Mo.Z.set("view_mod","edit"),this.$router.push("/field_validation_v1/"+e)},toPendingApprovalScreen(e){Mo.Z.set("view_mod","edit"),this.$router.push("/ready-for-approval/"+e)},toPendingSecondApprovalScreen(e){Mo.Z.set("view_mod","edit"),this.$router.push("/ready-for-second-approval/"+e)},toMediValidationScreen(e){this.$router.push("/field_validation/"+e)},toMediValidationV3Screen(e){this.$router.push("/medi_order_v3/"+e)},toDocumentErrorView(e){this.$router.push("/document_error/"+e["id"])},toDocumentClassifiyView(e){this.$router.push("/document_classifiy/"+e["id"])},toDocumentPdfView(e){this.$router.push("/document_pdf/"+e["filename"]+"/"+e["id"])},formateDate(e,t){return Ho.ZP.formatDate(e,t)},loadData(){this.resetPagination=!1,this.startfrom=this.pageSize*(this.paginationCount-1),this.applyFilter()},triggerWorkflow(e){return Ao(this,void 0,void 0,(function*(){try{yield de.fo.triggerWorkflow(e)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},deleteRecord(e){return Ao(this,void 0,void 0,(function*(){let t;this.processing=!0;try{let s=yield(0,ge.O_)();t=yield Y()["delete"](ge.hi.delete_document+e,{headers:{Authorization:s}}),yield this.fetchInvoices(!0),this.deleteInvoice=!1}catch(s){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.processing=!1}}))},viewRecord(e){Mo.Z.set("view_mod","view"),this.$router.push("/2a/"+e)},restartExportError(e){return Ao(this,void 0,void 0,(function*(){this.processing=!0;try{const t=yield de.Zj.restartExport(e);if(!1===t.success)throw{message:t.message};this.resetFilters()}catch(t){const e=me.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.processing=!1}}))},restartExport(e){return Ao(this,void 0,void 0,(function*(){let t;this.processing=!0;try{let s=yield(0,ge.O_)();t=yield Y().get(ge.hi.restart_document+e,{headers:{Authorization:s}}),this.refreshDashboard(this.filters_reset_after_restart_setting)}catch(s){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.processing=!1}this.QualityConfirm=!1}))},isStatusError(e){return"error"===e||"export_error"===e},rowClick(e){let t=e["id"],s=e["status"],i=e["doc_type"];if(this.isStatusError(s))this.toDocumentErrorView(e);else if("classified"!==s){if("validating"!==s&&"validated_pending_export"!==s)if("pending_confirmation"!==s)if("validated_pending_approval"!==s)if("approved_pending_second_approval"!==s){if(Os.C7.includes(s))return e.layout?Os.i_.includes(i)?void this.toNewValidationScreen(t):void this.toMediValidationV3Screen(t):void("ready_for_validation"===s?this.toValidationScreen(t):Os.at.includes(s)&&this.viewRecord(t))}else this.toPendingSecondApprovalScreen(t);else this.toPendingApprovalScreen(t);else this.getQualityInfos(e)}else this.toDocumentClassifiyView(e)},getClassesForColumn(e,t){let s="",i="running"===e?"enableDrawingRectangle":"cursor-pointer";return i+="filename"===t?" text-primary ":"","status"===t&&this.statusList.hasOwnProperty(e)&&(s=e?this.statusList[e].class:""),i+" "+s},openAssignmentDlg(e){this.assignment_doc_ids=[],this.assignment_doc_ids.push(e),this.assigneDialog=!0},isExportAllowed(e){let t=this.getExportRecord(e);return!(!t||0===Object.keys(t).length)},goToExport(e){let t=this.getExportRecord(e);t&&0!==Object.keys(t).length&&window.open(t.document_url)},getExportIcon(e){let t=this.getExportRecord(e);if(!t||0===Object.keys(t).length)return;let s="";return"FLOW2"==t.export_application&&(s="flow2_icon.svg"),"IDM"==t.export_application&&(s="idm_icon.svg"),"ZUGFERD"==t.export_application&&(s="zugferd-icon.svg"),"PEPPOL"==t.export_application&&(s="peppol-icon.svg"),s},getExportRecord(e){if(!e)return{};let t=Ro.Z.getItem("login_source");if(!Ro.Z.has("login_source")||null===t)return{};t=t.toLowerCase(),"infor"==t&&(t="idm");let s={};for(const i of e)if(t===i.export_application.toLowerCase()&&i.document_url){s=i;break}return s},viewPurchaseOrder(e,t){null!==t&&("v1"===t&&this.$router.push("/po-matching/"+e),"v3"===t&&this.$router.push("/po-matching-v3/"+e))},downloadFile(e){try{if(!e["doc_path"])return;let s="https://api.docbits.com/resource/"+e["doc_path"];if(!s)return;var t=document.createElement("a");t.download=e["filename"],t.href=s,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(s){}},resetFilters(){this.resetPagination=!0,this.quickFilterMap.clear(),this.applyFilter()},isdownloadZugferd(e){let t=!1;return this.isDocDownloadable(e)?(Os.at.includes(e["status"])&&1==(0,Os.NG)(e["doc_type"])&&1==e["has_zugferd"]&&(t=!0),t):t},downloadZugferd(e){let t="https://api.docbits.com/resource/document/"+e["id"]+"/"+e["id"]+"_zugferd.pdf";if(t){var s=document.createElement("a");s.download=e["filename"],s.href=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}},isdownloadPeppol(e){let t=!1;return this.isDocDownloadable(e)?(Os.at.includes(e["status"])&&1==(0,Os.NG)(e["doc_type"])&&1==e["has_peppol"]&&(t=!0),t):t},downloadPeppol(e){let t="https://api.docbits.com/resource/document/"+e["id"]+"/"+e["id"]+"_peppol.xml";if(t){var s=document.createElement("a");s.download=e["filename"],s.href=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}},isdownloadAnnotated(e){let t=!1;return this.isDocDownloadable(e)?(1==e["has_annotated_version"]&&(t=!0),t):t},downloadAnnotated(e){let t="https://api.docbits.com/resource/document/"+e["id"]+"/"+e["id"]+"_annotated.pdf";if(t){var s=document.createElement("a");s.download=e["filename"],s.href=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}},getErrorInfos(e){return Ao(this,void 0,void 0,(function*(){if("error"!==e["status"])return;let t=yield(0,ge.O_)();const s=yield Y().get(ge.hi.get_error_infos,{headers:{Authorization:t},params:{doc_id:e["id"]}});return s["data"]["row"]=e,1===Object.keys(s).length?(this.ErrorText={message:"None"},!1):(this.ErrorText=s["data"],this.ErrorInfos=!0,!0)}))},getQualityInfos(e){return Ao(this,void 0,void 0,(function*(){if("pending_confirmation"==e["status"]){let t=yield(0,ge.O_)();const s=yield Y().get(ge.hi.get_error_infos,{headers:{Authorization:t},params:{doc_id:e["id"]}});return s["data"]["row"]=e,1===Object.keys(s).length?(this.QualityText={message:"None"},!1):(this.QualityText=s["data"],this.QualityConfirm=!0,this.docrowID=s["data"]["row"]["id"],!0)}}))},allowDrop(e){e.preventDefault(),e.currentTarget.classList.add("opacity-half")},drop(e){e.preventDefault(),e.currentTarget.classList.remove("opacity-half"),this.uploadFiles(e.dataTransfer.files)},dragLeave(e){e.currentTarget.classList.remove("opacity-half")},uploadFiles(e){try{if(e&&e.length>10)return void this.showErrorToast(this.$t("pages.messages.MAX_DOC_UPLOAD_LIMIT"));const t=new CustomEvent("upload_files",{detail:{files:e}});document.dispatchEvent(t)}catch(t){}},changeAction(){!0===this.headerCheckbox?this.selectAllRows():this.resetAllSelectedRows()},selectAllRows(){this.selectionList=[],this.isMultiDeleteButtonDisabled=!1,this.isMultiRestartButtonDisabled=!1,this.display_data.forEach((e=>{e["rowSelection"]=!0,this.selectionList.push(e.id),!1===this.isMultiDeleteButtonDisabled&&(this.isMultiDeleteButtonDisabled=!this.isDocDeleteable(e)),!1===this.isMultiRestartButtonDisabled&&(this.isMultiRestartButtonDisabled=!this.isDocRestartable(e))}))},resetAllSelectedRows(){this.selectionList=[],this.headerCheckbox=!1,this.isMultiDeleteButtonDisabled=!1,this.isMultiRestartButtonDisabled=!1,this.display_data.forEach((e=>{e["rowSelection"]=!1}))},checkRowExistance(){let e=0;this.selectionList=[],this.headerCheckbox=!1,this.isMultiDeleteButtonDisabled=!1,this.isMultiRestartButtonDisabled=!1,this.display_data.forEach((t=>{!0===t["rowSelection"]&&(e++,this.selectionList.push(t.id),!1===this.isMultiDeleteButtonDisabled&&(this.isMultiDeleteButtonDisabled=!this.isDocDeleteable(t)),!1===this.isMultiRestartButtonDisabled&&(this.isMultiRestartButtonDisabled=!this.isDocRestartable(t)))})),0===e?(this.headerCheckbox=!1,this.isMultiDeleteButtonDisabled=!1,this.isMultiRestartButtonDisabled=!1):this.display_data.length===e?this.headerCheckbox=!0:this.headerCheckbox=null},setRowStyle(e){if(e.hasOwnProperty("export_data_fetched")&&!0===e["export_data_fetched"])return"exported-row"},restartMultipalDocExport(){return Ao(this,void 0,void 0,(function*(){try{this.processing=!0;const e=yield de.Zj.restartDocuments(this.selectionList.join(","),this.restartExportedInvoices);if(!1===e.success)return void this.showErrorToast(e.data.message);this.headerCheckbox=!1,this.resetAllSelectedRows(),this.refreshDashboard(this.filters_reset_after_restart_setting)}catch(e){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.processing=!1}}))},refreshDashboard(e){return Ao(this,void 0,void 0,(function*(){const t=yield this.getSettingWithExpiry(e);if(t){const e=new CustomEvent("reset_filters",{});return void document.dispatchEvent(e)}const s=new CustomEvent("dashboard_refresh",{});document.dispatchEvent(s)}))},multipleDocAssignment(){this.selectionList&&(this.assignment_doc_ids=this.selectionList,this.assigneDialog=!0)},confirmMerge(){this.selectionList&&this.selectionList.length>2?this.showErrorToast(this.$t("pages.messages.SELECTION_GREATER_THAN_THREE")):this.selectionList&&(this.confirmMergeDialog=!0)},mergeDocuments(){return Ao(this,void 0,void 0,(function*(){try{this.showLoading();const e=yield de.U0.mergeDocumnet(this.selectionList.toString());if(!1===e.success)return void this.showErrorToast(e.message);yield this.fetchInvoices(!0)}catch(e){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},deleteMultipalDocument(){return Ao(this,void 0,void 0,(function*(){if(!this.selectionList)return;let e;this.processing=!0;try{let t=new Map;if(t.set("doc_ids",this.selectionList.join(",")),e=yield de.A.deleteRequest(ge.hi.delete_documents,t),!1===e.success)return void this.showErrorToast(e.data.message);this.selectionList.length,this.display_data.length,this.headerCheckbox=!1,this.resetAllSelectedRows(),this.loadData()}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.processing=!1}}))},removeQuickFilter(e){this.quickFilterMap.delete(e),this.applyFilter()},isDocRestartable(e){const t=ne.W1.hasAccess("update",e);if(!t)return!1;const s=String(e["status"]),i=Boolean(e["restart_allowed"]);return!!this.restartExportedInvoices||("ready_for_validation"===s||"error"===s||"export_error"===s||1==i)},isExportErrorRestart(e){const t=ne.W1.hasAccess("update",e);if(!t)return!1;const s=String(e["status"]),i=Boolean(e["restart_allowed"]);return!!this.restartExportedInvoices||("export_error"===s||1==i)},isDocDeleteable(e){const t=ne.W1.hasAccess("delete",e),s=String(e["status"]);return t&&"finished"!=s&&"workflow"!=s&&"running"!=s&&"restart_in_progress"!=s},isDocReassignAble(e){const t=ne.W1.hasAccess("update",e),s=String(e["status"]);return t&&"finished"!=s&&"workflow"!=s&&"running"!=s&&"restart_in_progress"!=s},isDocDownloadable(e){const t=ne.W1.hasAccess("view",e),s=String(e["status"]);return t&&"running"!=s&&"restart_in_progress"!=s},setDisplayDocType(e){const t=this.getDocTypeForDisplay(e),s=this.displayDocType(t);return String(s)},assignmentSuccess(e){this.assigneDialog=!1,this.selectionList&&(this.headerCheckbox=!1,this.resetAllSelectedRows()),this.resetFilters()},renderquality(e){if(!this.user_settings["OCR_PERCENTAGE"]||!this.user_settings["OCR_PERCENTAGE"])return;let t="";if(e.hasOwnProperty("quality")){let s=this.$t("overall");const i=e["quality"];parseInt(e["quality"])<parseInt(this.user_settings["OCR_PERCENTAGE"])&&(t=s+' : <FONT COLOR="#AA0500">'+e["quality"]+"</FONT COLOR>"),parseInt(i)==parseInt(this.user_settings["OCR_PERCENTAGE"])&&(t=s+' : <FONT COLOR="#ffff00">'+e["quality"]+"</FONT COLOR>"),parseInt(i)>parseInt(this.user_settings["OCR_PERCENTAGE"])&&(t=s+' : <FONT COLOR="#00ff00">'+e["quality"]+"</FONT COLOR>")}return t},handleWebSocketResult(e){e&&(this.use_websocket=!0,this.updateDocumentStats(e),this.updateTableData(e))},isStatsUpdated(e){if(this.all_invoices!==e.overview["all-invoices"])return!0},getWebSocketDashboard(){return Ao(this,void 0,void 0,(function*(){try{const e={type:"dashboard",data:{}};let t=this.queryParams;t=t.replace("?","");const s=t.split("&");s.forEach((t=>{t=t.split("="),2===t.length&&(e.data[t[0]]=t[1])})),this.data_status="fetching",this.dashboard_data_flag=!1;const i=yield this.sendMessageToSocket(e.type,e.data);return this.updateDocumentStats(i),this.updateTableData(i),this.processing=!1,!0}catch(e){this.handleWebsocketDelay()}}))},subscribeToDashboardChannel(){this.$route.path}},setup(){let e=[];const t=(0,Fe.Ln)(),{quickFilterMap:s,all_invoices:i,automatically_processed:o,manually_processed:l,completed:n,in_progress:a,pending:r,validated_pending_approval:d,approved_pending_second_approval:c,error:u,processing:p,visible_columns:h,pagination_size:_,current_invoice_count:m,paginationCount:g}=(0,ie.Jk)(t),{getSavedFilters:v,removeSavedFilters:f,saveFilters:w,makeQueryParamFromFilters:b,setDefaultFilters:y,getSavedColumns:k,getOrderBy:x,getColumnLabel:C,getPaginationSize:q}=t,E=(0,Fe.VF)(),{user_settings:D}=(0,ie.Jk)(E),{getSettingWithExpiry:L,setOrgSettings:S}=E,F=(0,Fe.b8)(),{dashboard_data:W,isConnected:T,hasError:z,dashboard_data_flag:Z}=(0,ie.Jk)(F),{subscribeToChannel:$,unsubscribeToChannel:O,sendMessageByType:I}=F;return{current_invoice_count:m,dashboard_data_flag:Z,pagination_size:_,getPaginationSize:q,paginationCount:g,websocketHasError:z,sendMessageToSocket:I,isConnected:T,unsubscribeToChannel:O,subscribeToChannel:$,dashboard_data:W,user_settings:D,getSettingWithExpiry:L,visible_columns:h,getColumnLabel:C,processing:p,getOrderBy:x,getSavedColumns:k,setDefaultFilters:y,makeQueryParamFromFilters:b,quickFilterMap:s,saveFilters:w,removeSavedFilters:f,getSavedFilters:v,assignment_doc_ids:(0,ae.iH)([]),restartExportedInvoices:(0,ae.iH)(!1),model:(0,ae.iH)(null),table_columns:(0,ae.iH)([]),display_data:(0,ae.iH)([]),Popup:se,statusList:e,pageSize:(0,ae.iH)(10),skip:(0,ae.iH)(1),startfrom:(0,ae.iH)(0),resetPagination:!0,queryParams:"?filter=current-month&skip=0",deleteInvoice:(0,ae.iH)(!1),recordId:"",resultsCount:(0,ae.iH)(0),assigneDialog:(0,ae.iH)(!1),ErrorInfos:(0,ae.iH)(!1),ErrorText:(0,ae.iH)(),QualityConfirm:(0,ae.iH)(!1),QualityText:(0,ae.iH)(),docrowID:(0,ae.iH)(),headerCheckbox:(0,ae.iH)(),headerFabIcon:(0,ae.iH)(!1),selectionList:(0,ae.iH)([]),isMultiDeleteButtonDisabled:(0,ae.iH)(!1),isMultiRestartButtonDisabled:(0,ae.iH)(!1),showFlow:(0,ae.iH)(!1),flow_doc_id:(0,ae.iH)(""),use_websocket:(0,ae.iH)(!0),show_table_loader:(0,ae.iH)(!1),data_status:(0,ae.iH)(""),all_invoices:i,automatically_processed:o,manually_processed:l,completed:n,in_progress:a,pending:r,validated_pending_approval:d,approved_pending_second_approval:c,error:u}}});var Qo=s(39200),jo=s(39975),Bo=s(87300),No=s(75096);const Yo=(0,ee.Z)(Po,[["render",B],["__scopeId","data-v-584ff3d6"]]),Ko=Yo;je()(Po,"components",{QSeparator:Yi.Z,QMarkupTable:Pi.Z,QCheckbox:Ft.Z,QFab:Qo.Z,QFabAction:jo.Z,QIcon:Tt.Z,QTooltip:Ut.Z,QBtn:Pe.Z,QPagination:Bo.Z,QDialog:Vt.Z,QCard:qt.Z,QCardSection:Lt.Z,QAvatar:No.Z,QCardActions:Ki.Z}),je()(Po,"directives",{ClosePopup:zt.Z})}}]);