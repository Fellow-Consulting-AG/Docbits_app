"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[5650],{65650:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ee});var s=l(59835),o=l(86970),a=l(61957);const i={class:"row q-pa-xl"},n={class:"col-sm-12 col-md-12 col-lg-12 q-pb-md"},d={class:"row"},r={class:"col-sm-8 col-md-6 col-lg-4"},c={class:"col-sm-4 col-md-6 col-lg-8"},u={class:"col-sm-12 col-md-12 col-lg-12 q-pb-md"},h={class:"table-header-text"},w={class:"text-left q-pl-md"},p={class:"text-center width-160"},m=["onClick"],f={class:"text-left"},g={class:"text-center"},_={class:"text-red"},k={class:"q-ml-sm"};function b(e,t,l,b,y,W){const v=(0,s.up)("SubHeader"),C=(0,s.up)("q-icon"),R=(0,s.up)("q-input"),D=(0,s.up)("f-btn"),x=(0,s.up)("q-item-section"),I=(0,s.up)("q-item"),S=(0,s.up)("q-separator"),q=(0,s.up)("q-list"),E=(0,s.up)("q-menu"),Z=(0,s.up)("q-btn"),L=(0,s.up)("q-markup-table"),$=(0,s.up)("q-avatar"),T=(0,s.up)("q-card-section"),O=(0,s.up)("q-card-actions"),Q=(0,s.up)("q-card"),A=(0,s.up)("q-dialog"),U=(0,s.up)("Loader"),z=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(v,{name:"dashboard",label:e.$t("my_workflows"),show_expiry_alert:!0,display_help_link:!1},null,8,["label"]),(0,s._)("div",i,[(0,s._)("div",n,[(0,s._)("div",d,[(0,s._)("div",r,[(0,s.Wm)(R,{modelValue:e.searchBy,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.searchBy=t),t[1]||(t[1]=t=>e.inputValueChanges())],dense:"",class:(0,o.C_)(0===e.searchBy.length?"search-in-active":"search-active"),autofocus:"",placeholder:e.$t("search_workflow"),outlined:""},{append:(0,s.w5)((()=>[(0,s.Wm)(C,{flat:"",dense:"",name:"search",size:"24px",color:"primary"})])),_:1},8,["modelValue","class","placeholder"])]),(0,s._)("div",c,[(0,s.Wm)(D,{icon:"add",label:e.$t("add_workflow"),class:"float-right",to:"/workflow_designer"},null,8,["label"])])])]),(0,s._)("div",u,[(0,s.Wm)(L,{flat:"",class:"workflow-table-style"},{default:(0,s.w5)((()=>[(0,s._)("thead",null,[(0,s._)("tr",h,[(0,s._)("th",w,(0,o.zw)(e.$t("name")),1),(0,s._)("th",p,(0,o.zw)(e.$t("actions")),1)])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.tableData,((l,i)=>((0,s.wg)(),(0,s.iD)("tr",{class:"cursor-pointer workflow-name",key:i,onClick:t=>e.openWorkflowDesigner(l.id)},[(0,s._)("td",f,[l.enabled?((0,s.wg)(),(0,s.j4)(C,{key:0,class:"q-mr-md black_to_white",name:"img:workflow/flow-enabled.svg"})):(0,s.kq)("",!0),l.enabled?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(C,{key:1,class:"q-mr-md black_to_white",name:"img:workflow/flow-disabled.svg"})),(0,s._)("span",{style:{"font-size":"16px"},class:(0,o.C_)(1==l.enabled?"enabled-name":"disabled-name")},(0,o.zw)(l.name),3)]),(0,s._)("td",g,[(0,s.Wm)(Z,{flat:"",dense:"",round:"",onClick:t[2]||(t[2]=(0,a.iM)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{persistent:"","auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{clickable:""},{default:(0,s.w5)((()=>[l.enabled?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(x,{key:0,onClick:t=>e.handleActive(l,!0)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("activate")),1)])),_:2},1032,["onClick"])),l.enabled?((0,s.wg)(),(0,s.j4)(x,{key:1,onClick:t=>e.handleActive(l,!1)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("deactivate")),1)])),_:2},1032,["onClick"])):(0,s.kq)("",!0)])),_:2},1024),(0,s.Wm)(I,{clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{onClick:t=>e.copyWorkflow(l.id)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("duplicate")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,s.Wm)(I,{clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{onClick:t=>e.openWorkflowDesigner(l.id)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("edit")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,s.Wm)(S,{inset:""}),(0,s.Wm)(I,{clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{onClick:t=>{e.workflowId=l.id,e.confirmDelete=!0,e.selectedRecordIndex=i}},{default:(0,s.w5)((()=>[(0,s._)("span",_,(0,o.zw)(e.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])],8,m)))),128))])])),_:1})])]),(0,s.Wm)(A,{modelValue:e.confirmDelete,"onUpdate:modelValue":t[4]||(t[4]=t=>e.confirmDelete=t),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(T,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,s.w5)((()=>[(0,s.Wm)($,{icon:"warning",color:"primary"})])),_:1}),(0,s.Wm)(T,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s._)("span",k,(0,o.zw)(e.$t("pages.messages.MSG_DELETE")),1)])),_:1}),(0,s.Wm)(O,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(Z,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[z]]),(0,s.wy)((0,s.Wm)(Z,{flat:"",label:e.$t("delete"),color:"primary",onClick:t[3]||(t[3]=t=>{e.deleteWorkflow()})},null,8,["label"]),[[z]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(U)],64)}var y=l(60899),W=l(7363),v=l(49990),C=l(60499),R=l(26033),D=l(31921),x=l(70501),I=l(49341),S=l(46624),q=l(16308),E=function(e,t,l,s){function o(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,a){function i(e){try{d(s.next(e))}catch(t){a(t)}}function n(e){try{d(s["throw"](e))}catch(t){a(t)}}function d(e){e.done?l(e.value):o(e.value).then(i,n)}d((s=s.apply(e,t||[])).next())}))};const Z=(0,s.aZ)({name:"workFlow",mixins:[v.Z,R.Z,x.Z],components:{Loader:D.Z,SubHeader:q.Z},data(){return{workflowId:(0,C.iH)(""),searchBy:(0,C.iH)(""),tableData:{},confirmDelete:(0,C.iH)(!1),selectedRecordIndex:(0,C.iH)()}},mounted(){this.debounceSearchInputFunc=(0,y.Z)((()=>{this.loadWokFlow()}),1e3),this.loadWokFlow()},unmounted:function(){},methods:{inputValueChanges(){this.debounceSearchInputFunc()},loadWokFlow(){return E(this,void 0,void 0,(function*(){let e;try{this.showLoading(),e=yield I.fo.getWorkflows(this.searchBy),e.entries&&(this.tableData=e.entries)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},handleActive(e,t){return E(this,void 0,void 0,(function*(){let l,s=null;try{let o={};o.id=e.id,o.enabled=t,l=yield I.fo.updateWorkflow(o),l&&(this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),e.enabled=t),s=!1}catch(o){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),s=null}}))},saveOrUpdateWorkflow(){return E(this,void 0,void 0,(function*(){if(this.openAddWorkflowDialog)return;let e;try{if(this.showLoading(),this.workflowModel["id"])e=yield I.fo.updateWorkflow(this.workflowModel),this.tableData[this.selectedRecordIndex].id=e.id,this.tableData[this.selectedRecordIndex].name=e.name,this.tableData[this.selectedRecordIndex].org_id=e.org_id,this.tableData[this.selectedRecordIndex].enabled=e.enabled,this.tableData[this.selectedRecordIndex].trigger=e.trigger,this.tableData[this.selectedRecordIndex].doc_type=e.doc_type,this.tableData[this.selectedRecordIndex].sub_org_id=e.sub_org_id,this.tableData[this.selectedRecordIndex].description=e.description;else{e=yield I.fo.createWorkflow(this.workflowModel);const t={id:e.id,name:e.name,org_id:e.org_id,enabled:e.enabled,trigger:e.trigger,doc_type:e.doc_type,sub_org_id:e.sub_org_id,description:e.description};this.tableData.splice(0,0,t)}this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},deleteWorkflow(){return E(this,void 0,void 0,(function*(){let e;try{this.showLoading(),e=yield I.fo.deleteWorkflow(this.workflowId),this.showSuccessToast(this.$t("pages.messages.DELETED_SUCCESSFULLY")),this.tableData.splice(this.selectedRecordIndex,1)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},copyWorkflow(e){return E(this,void 0,void 0,(function*(){let t;try{this.showLoading(),t=yield I.fo.copyWorkflow(e),this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),this.tableData.splice(0,0,JSON.parse(JSON.stringify(t)))}catch(l){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},openWorkflowDesigner(e){this.$router.push("/workflow_designer/"+e)}},setup(){const e=(0,S.At)(),{doc_type_list:t,trigger_list:l,subOrgList:s}=(0,W.Jk)(e),{getSubOrgsList:o,getDocumentTriggers:a}=e;return{subOrgList:s,trigger_list:l,doc_type_list:t,debounceSearchInputFunc:{},getSubOrgsList:o,getDocumentTriggers:a}}});var L=l(7683),$=l(13119),T=l(22857),O=l(66933),Q=l(11221),A=l(68879),U=l(56362),z=l(13246),N=l(490),V=l(76749),M=l(50926),F=l(32074),H=l(44458),j=l(63190),B=l(61357),G=l(11821),J=l(61450),Y=l(62146),P=l(69984),K=l.n(P);const X=(0,L.Z)(Z,[["render",b],["__scopeId","data-v-33993af0"]]),ee=X;K()(Z,"components",{QInput:$.Z,QIcon:T.Z,QMarkupTable:O.Z,QCheckbox:Q.Z,QBtn:A.Z,QMenu:U.Z,QList:z.Z,QItem:N.Z,QItemSection:V.Z,QSeparator:M.Z,QDialog:F.Z,QCard:H.Z,QCardSection:j.Z,QAvatar:B.Z,QCardActions:G.Z,QTable:J.Z}),K()(Z,"directives",{ClosePopup:Y.Z})}}]);