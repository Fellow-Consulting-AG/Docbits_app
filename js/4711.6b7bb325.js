"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[4711],{14711:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var i=n(83673),s=n(62323);const o={class:"container no-padding back highlighted-back"},a={class:"secondary-c-text text-h6 q-pt-md q-pb-md"},r=(0,i._)("img",{width:"24",src:"back_new.svg"},null,-1),c={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},l={class:"container p-b-0 settings"},d={class:"q-mt-md"},_=(0,i._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function u(e,t,n,u,g,p){const h=(0,i.up)("SubHeader"),m=(0,i.up)("q-icon"),f=(0,i.up)("q-btn"),y=(0,i.up)("TrainingList"),v=(0,i.up)("q-inner-loading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(h,{name:"settings_document_types",label:e.$t("model_training")},null,8,["label"]),(0,i._)("div",o,[(0,i._)("div",a,[(0,i.Wm)(f,{flat:"",rounded:"",color:"primary",to:"/settings/document"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"text-red-13",size:"sm"},{default:(0,i.w5)((()=>[r])),_:1}),(0,i._)("label",c,(0,s.zw)(e.$t("pages.settings.document_types")),1)])),_:1})])]),(0,i._)("div",l,[(0,i._)("div",d,[(0,i.Wm)(y,{doc_type_key:e.doc_type_key,doc_type:e.doc_type,language_origin_list:e.language_origins,max_value:e.training_doc_limit,list_data:e.sample_files,total_exported:e.trained_docs_count.org_exported_documents,total_trained_by_org:e.trained_docs_count.org_trained_documents,total_trained:e.trained_docs_count.total_trained_documents},null,8,["doc_type_key","doc_type","language_origin_list","max_value","list_data","total_exported","total_trained_by_org","total_trained"])])]),(0,i.Wm)(v,{showing:e.processing||e.language_origins_loading,class:"z-index-1"},{default:(0,i.w5)((()=>[_])),_:1},8,["showing"])],64)}var g=n(61959),p=n(60727),h=n(13873),m=n(42122),f=n(10321),y=n(29938),v=n(80579),w=n(9273),b=n(77378),k=function(e,t,n,i){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{c(i.next(e))}catch(t){o(t)}}function r(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):s(e.value).then(a,r)}c((i=i.apply(e,t||[])).next())}))};const x=(0,i.aZ)({el:"#app",mixins:[b.Z],components:{SubHeader:h.Z,TrainingList:m.Z},mounted(){this.init(),document.addEventListener("refresh_sample_data",this.refreshSampleData),document.addEventListener("sample_file_delete",this.sampleFileDeleted)},unmounted:function(){document.removeEventListener("refresh_sample_data",this.refreshSampleData),document.removeEventListener("sample_file_delete",this.sampleFileDeleted)},methods:{init(){return k(this,void 0,void 0,(function*(){try{this.processing=!0,this.doc_type_key=String(this.$route.params.doc_key),this.doc_type=String(this.$route.params.doc_type),yield this.getLanguageOptions(),yield this.fetchSamplesFiles(),yield this.fetchTrainedDocCount()}catch(e){}finally{this.processing=!1}}))},refreshSampleData(){this.fetchSamplesFiles(),this.fetchTrainedDocCount()},sampleFileDeleted(e){if(!e||!e.detail)return;let t=e.detail;for(let[n,i]of Object.entries(this.sample_files)){const e=i;e.id===t&&this.sample_files.splice(n,1)}this.fetchTrainedDocCount()},fetchSamplesFiles(){return k(this,void 0,void 0,(function*(){try{if((0,y.ke)(this.doc_type_key))return;const e={doc_type:this.doc_type_key},t=yield v.U0.getModelTrainingSamplesFiles(e);if(!t||t.hasOwnProperty("success")&&!1===t.success)throw t;let n=[];for(let[i,s]of Object.entries(t)){const e=s;let t=Object.assign({},e);n.push(t)}this.sample_files=n}catch(e){const t=w.w.getErrorMessage(e);this.showErrorToast(t)}}))},fetchTrainedDocCount(){return k(this,void 0,void 0,(function*(){try{if((0,y.ke)(this.doc_type_key))return;const e={doc_type:this.doc_type_key},t=yield v.U0.getTrainedDocCount(e);if(!t||t.hasOwnProperty("success")&&!1===t.success)throw t;if(0==t.length)return;this.trained_docs_count=t[0]}catch(e){const t=w.w.getErrorMessage(e);this.showErrorToast(t)}}))}},setup(){const e=(0,p.A3)(),{getLanguageOptions:t}=e,{language_origins:n,language_origins_loading:i}=(0,f.Jk)(e);return{language_origins:n,language_origins_loading:i,getLanguageOptions:t,doc_type_key:(0,g.iH)(""),doc_type:(0,g.iH)(""),training_doc_limit:0,sample_files:(0,g.iH)([]),processing:(0,g.iH)(!1),trained_docs_count:(0,g.iH)({org_exported_documents:0,org_sample_documents:0,org_trained_documents:0,total_trained_documents:0,doc_type:""})}}});var D=n(74260),T=n(2165),L=n(24554),S=n(66941),E=n(7518),H=n.n(E);const O=(0,D.Z)(x,[["render",u]]),Z=O;H()(x,"components",{QBtn:T.Z,QIcon:L.Z,QInnerLoading:S.Z})}}]);