"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[2870],{52870:(t,e,a)=>{a.r(e),a.d(e,{default:()=>Ct});var s=a(59835),i=a(86970);const o=t=>((0,s.dD)("data-v-08ac6b52"),t=t(),(0,s.Cn)(),t),l={class:"row bg-grey-2 q-pb-md"},r={class:"col-12 q-pl-sm q-mt-sm"},n={class:"row"},c={class:"po-container-parrent po-page-height scrolle-y",id:"po-container-parrent"},d={class:"row"},h={class:"col-sm-12 col-md-12 col-lg-12 q-pr-md row"},p={class:"q-mr-auto"},_=o((()=>(0,s._)("img",{width:"30",src:"back-primary.svg"},null,-1))),u={class:"q-ml-auto"},m={class:"row ml-10"},g={class:"col-sm-12 col-md-12 col-lg-12"},w={class:"row ml-10"},f={class:"col-sm-4 col-md-4 col-lg-3"},b={class:"col-sm-4 col-md-4 col-lg-4",id:"search-po"},v=o((()=>(0,s._)("div",{class:"col-sm-4 col-md-4 col-lg-5"},null,-1))),y={class:"col-sm-12 col-md-12 col-lg-12"},D=o((()=>(0,s._)("div",{class:"q-mt-sm q-ma-sm"},null,-1))),O={class:"row"},x={class:"col-sm-12 col-md-12 col-lg-12"},P={class:"full-width scrolle-y po-container bg-grey-2"},E={key:1,class:"row q-pa-sm"},T={class:"bg-grey-3"},I=o((()=>(0,s._)("div",{class:"q-mt-sm q-ma-sm"},null,-1))),R={class:"full-width scrolle-y"},C={class:"row bg-white q-pa-sm"},S={class:"col-sm-12 col-md-12 col-lg-12 pr-6 row"},k={class:"q-mr-auto"},L={class:"q-ml-auto"},q={class:"full-width bg-white"},W=["src"],A={class:"po-image-container po-page-height q-pr-md",id:"po-image-container"},$={class:"text-weight-medium text-h6"},U={class:"bg-grey-3"},V={class:"text-left",style:{"font-weight":"bold"}},Z={class:"text-left",style:{"font-weight":"900"}},F=o((()=>(0,s._)("tbody",null,[(0,s._)("tr",null,[(0,s._)("td",{class:"text-left",style:{"font-weight":"bold"}},"Move between items"),(0,s._)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,s._)("span",{class:"shortcut-Key-box"}," TAB ")])]),(0,s._)("tr",null,[(0,s._)("td",{class:"text-left",style:{"font-weight":"bold"}},"To Select or click a item"),(0,s._)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,s._)("span",{class:"shortcut-Key-box"}," ENTER ")])]),(0,s._)("tr",null,[(0,s._)("td",{class:"text-left",style:{"font-weight":"bold"}},"Search PO"),(0,s._)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,s._)("span",{class:"shortcut-Key-box"}," f ")])]),(0,s._)("tr",null,[(0,s._)("td",{class:"text-left",style:{"font-weight":"bold"}},"Selecting first row of PO items "),(0,s._)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,s._)("span",{class:"shortcut-Key-box q-mr-sm"}," CTRL "),(0,s.Uk)(" + "),(0,s._)("span",{class:"shortcut-Key-box q-ml-sm"}," SHIFT ")])]),(0,s._)("tr",null,[(0,s._)("td",{class:"text-left",style:{"font-weight":"bold"}},"To connect a PO line with the line item."),(0,s._)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,s._)("span",{class:"shortcut-Key-box q-mr-sm"}," CTRL "),(0,s.Uk)(" + "),(0,s._)("span",{class:"shortcut-Key-box q-ml-sm"}," C ")])]),(0,s._)("tr",null,[(0,s._)("td",{class:"text-left",style:{"font-weight":"bold"}},"To Connect PO Line with line item"),(0,s._)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,s._)("span",{class:"shortcut-Key-box q-mr-sm"}," CTRL "),(0,s.Uk)(" + "),(0,s._)("span",{class:"shortcut-Key-box q-ml-sm"}," V ")])])],-1))),N=o((()=>(0,s._)("span",{class:"q-ml-sm"},"PO and AB are not same Please choose action.",-1)));function z(t,e,a,o,z,Q){const H=(0,s.up)("q-icon"),K=(0,s.up)("q-tooltip"),j=(0,s.up)("q-btn"),M=(0,s.up)("q-input"),B=(0,s.up)("PurchaseOrderPreview"),J=(0,s.up)("q-dialog"),Y=(0,s.up)("q-tab"),G=(0,s.up)("q-tabs"),X=(0,s.up)("q-separator"),tt=(0,s.up)("PurchaseOrder"),et=(0,s.up)("q-tab-panel"),at=(0,s.up)("q-tab-panels"),st=(0,s.up)("q-markup-table"),it=(0,s.up)("LineItems"),ot=(0,s.up)("ImageComponent"),lt=(0,s.up)("Loader"),rt=(0,s.up)("q-card-section"),nt=(0,s.up)("q-card"),ct=(0,s.up)("q-avatar"),dt=(0,s.up)("q-card-actions"),ht=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",l,[(0,s._)("div",r,[(0,s._)("div",n,[(0,s._)("div",c,[(0,s._)("div",d,[(0,s._)("div",h,[(0,s._)("div",p,[(0,s.Wm)(j,{flat:"",rounded:"",color:"primary",to:"/dashboard"},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{class:"text-red-13",size:"sm"},{default:(0,s.w5)((()=>[_])),_:1}),(0,s.Wm)(K,{anchor:"center left",self:"center right",offset:[10,10]},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.$t("dashboard")),1)])),_:1})])),_:1})]),(0,s._)("div",u,[(0,s.Wm)(j,{round:"",color:"info",padding:"xs",onClick:t.goToHelp,icon:"info",class:"q-ma-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(K,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.$t("help")),1)])),_:1})])),_:1},8,["onClick"]),(0,s.Wm)(j,{round:"",color:"positive",padding:"xs",onClick:e[0]||(e[0]=e=>t.showKeyboardShortcuts=!0),icon:"keyboard",class:"q-ma-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(K,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.$t("keyboard_shortcut")),1)])),_:1})])),_:1}),(0,s.Wm)(j,{round:"",color:"secondary",padding:"xs",onClick:e[1]||(e[1]=e=>t.saveData()),icon:"save",class:"q-ma-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(K,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.$t("pages.screen2a.save")),1)])),_:1})])),_:1}),(0,s.Wm)(j,{round:"",color:"primary",padding:"xs",onClick:e[2]||(e[2]=e=>t.validationsForExportData()),disable:t.isExportDisabled,icon:"import_export",class:"q-ma-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(K,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.$t("pages.settings.export")),1)])),_:1})])),_:1},8,["disable"])])])]),(0,s._)("div",m,[(0,s._)("div",g,(0,i.zw)(t.$t("invoice_id"))+": "+(0,i.zw)(t.get_fields["invoice_id"]),1)]),(0,s._)("div",w,[(0,s._)("div",f,(0,i.zw)(t.$t("purchase_order_number")),1),(0,s._)("div",b,[(0,s.Wm)(M,{class:"bg-white po-search",outlined:"",modelValue:t.po_search,"onUpdate:modelValue":e[3]||(e[3]=e=>t.po_search=e),"data-id":"po_search"},{append:(0,s.w5)((()=>[t.po_search&&""!=t.po_search?((0,s.wg)(),(0,s.j4)(H,{key:0,name:"close",class:"cursor-pointer",onClick:t.clearSearch,tabindex:"0"},null,8,["onClick"])):(0,s.kq)("",!0),(0,s.Wm)(H,{name:"search",onClick:t.searchPurchaseOrder,tabindex:"0"},null,8,["onClick"])])),_:1},8,["modelValue"])]),v,(0,s._)("div",y,[(0,s.Wm)(J,{modelValue:t.po_preview,"onUpdate:modelValue":e[4]||(e[4]=e=>t.po_preview=e),persistent:"","full-width":""},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{po_preview_columns:t.po_preview_columns,po_lines:t.po_preview_items,po_number:t.po_search,onClearSearch:t.clearSearch,onAddToPoItemsList:t.addToPoItemsList},null,8,["po_preview_columns","po_lines","po_number","onClearSearch","onAddToPoItemsList"])])),_:1},8,["modelValue"])])]),D,(0,s._)("div",O,[(0,s._)("div",x,[(0,s._)("div",P,[!1===t.hasPurchaseOrderItems()?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Wm)(G,{modelValue:t.tab,"onUpdate:modelValue":e[5]||(e[5]=e=>t.tab=e),class:"text-black text-weight-bold po-tabs"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.po_items,((t,e)=>((0,s.wg)(),(0,s.j4)(Y,{draggable:"false",key:e,name:e,label:e,tabindex:"0"},null,8,["name","label"])))),128))])),_:1},8,["modelValue"]),(0,s.Wm)(X),(0,s.Wm)(at,{modelValue:t.tab,"onUpdate:modelValue":e[6]||(e[6]=e=>t.tab=e)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.po_items,((e,a)=>((0,s.wg)(),(0,s.j4)(et,{key:a,name:a},{default:(0,s.w5)((()=>[(0,s.Wm)(tt,{apiData:t.apiData,po_lines:e,po_number:a},null,8,["apiData","po_lines","po_number"])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])],64)):((0,s.wg)(),(0,s.iD)("div",E,[(0,s.Wm)(st,{class:"full-width"},{default:(0,s.w5)((()=>[(0,s._)("thead",null,[(0,s._)("tr",T,[(0,s._)("th",null,(0,i.zw)(t.$t("no_po_line_items_found")),1)])])])),_:1})]))]),I,(0,s._)("div",R,[(0,s._)("div",C,[(0,s._)("div",S,[(0,s._)("div",k,(0,i.zw)(t.$t("pages.settings."+t.apiData.doc_type)),1),(0,s._)("div",L,[(0,s.Wm)(H,{name:"drag_indicator",class:"float-right secondary-c-text-grey text-h6"})])])]),(0,s._)("div",q,[(0,s.Wm)(it,{ref:"lineItemsRef",apiData:t.apiData,onUpdateExtractionDataForSave:t.updateExtractionDataForSave,onUpdateTableDataForSave:t.updateTableDataForSave,onUpdateReadOnlyFlag:t.updateReadOnlyFlag,onUpdateTableForSave:t.updateTableForSave},null,8,["apiData","onUpdateExtractionDataForSave","onUpdateTableDataForSave","onUpdateReadOnlyFlag","onUpdateTableForSave"])])])])])]),(0,s._)("div",{class:"po-image-toggler cursor-pointer",onClick:e[7]||(e[7]=e=>t.togglePoImage())},[(0,s._)("img",{class:"icon-hover po-image-toggler-icon",src:t.togglerIcon},null,8,W)]),(0,s._)("div",A,[(0,s.Wm)(ot,{renderOpenWindoIcon:!0,imageData:t.imageObjStr,docName:t.apiData.filename},null,8,["imageData","docName"])])])])]),(0,s.Wm)(lt),(0,s.Wm)(J,{modelValue:t.showKeyboardShortcuts,"onUpdate:modelValue":e[9]||(e[9]=e=>t.showKeyboardShortcuts=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(nt,null,{default:(0,s.w5)((()=>[(0,s.Wm)(rt,null,{default:(0,s.w5)((()=>[(0,s._)("div",$,(0,i.zw)(t.$t("keyboard_shortcuts")),1)])),_:1}),(0,s.Wm)(rt,null,{default:(0,s.w5)((()=>[(0,s.Wm)(st,{class:"full-width"},{default:(0,s.w5)((()=>[(0,s._)("thead",null,[(0,s._)("tr",U,[(0,s._)("th",V,(0,i.zw)(t.$t("action")),1),(0,s._)("th",Z,(0,i.zw)(t.$t("keyboard_shortcut")),1)])]),F])),_:1}),(0,s.Wm)(j,{flat:"",color:"primary",label:t.$t("conclude"),class:"float-right v-m-10",style:{"font-weight":"900"},onClick:e[8]||(e[8]=e=>t.showKeyboardShortcuts=!1)},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(J,{modelValue:t.confirmDecision,"onUpdate:modelValue":e[12]||(e[12]=e=>t.confirmDecision=e),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(nt,null,{default:(0,s.w5)((()=>[(0,s.Wm)(rt,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(ct,{icon:"info",color:"primary","text-color":"white"}),N])),_:1}),(0,s.Wm)(dt,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(j,{flat:"",label:"Cancel",color:"primary"},null,512),[[ht]]),(0,s.wy)((0,s.Wm)(j,{flat:"",label:"Close PO",color:"primary",onClick:e[10]||(e[10]=e=>t.setPOStatus("close"))},null,512),[[ht]]),(0,s.wy)((0,s.Wm)(j,{flat:"",label:"Accept",color:"primary",onClick:e[11]||(e[11]=e=>t.setPOStatus("accept"))},null,512),[[ht]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var Q=a(39981),H=a.n(Q),K=a(49990),j=a(44173),M=a(60499),B=a(31921),J=a(19302),Y=a(33725),G=a(70501),X=a(16363),tt=a(37744),et=a(69542),at=a(49782),st=a(96427),it=a(20334),ot=a(77997),lt=a(49341),rt=function(t,e,a,s){function i(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,o){function l(t){try{n(s.next(t))}catch(e){o(e)}}function r(t){try{n(s["throw"](t))}catch(e){o(e)}}function n(t){t.done?a(t.value):i(t.value).then(l,r)}n((s=s.apply(t,e||[])).next())}))};const nt=(0,s.aZ)({el:"#app",mixins:[G.Z,K.Z],components:{Loader:B.Z,LineItems:X.Z,PurchaseOrder:et.Z,ImageComponent:it["default"],PurchaseOrderPreview:at.Z},data(){return{docId:"",imageObjStr:"",isReadOnly:!0,allowedDoctypes:Y.rf,po_search:"",warning_alert:{}}},mounted(){this.docId=this.$route.params.id,this.init(),document.addEventListener("po_connection_success",this.lineItemConnected),document.addEventListener("po_connection_remove",this.lineItemPOConnectionRemoved),document.addEventListener("keydown",this.keyDownEvent),window.vpo=this},unmounted:function(){document.removeEventListener("po_connection_success",this.lineItemConnected),document.removeEventListener("po_connection_remove",this.lineItemPOConnectionRemoved),document.removeEventListener("keydown",this.keyDownEvent)},methods:{init(){return rt(this,void 0,void 0,(function*(){try{yield this.getInvoiceDataByDocId(this.docId),this.handleReadOnlyAlert(),this.imageObjStr=JSON.stringify(this.apiData.images),this.initPage(),this.apiData.hasOwnProperty("po_matched")&&this.apiData.po_matched.length?this.isExportDisabled=!1:this.isExportDisabled=!0}catch(t){return this.showErrorToast("Error while displaying Page"),void this.hideLoading()}}))},handleReadOnlyAlert(){if(0==this.apiData.editable){let t="po_readonly_doc_warning";Y.at.includes(this.apiData.status)&&(t="po_finished_doc_warning"),"error"===this.apiData.status&&(t="po_error_doc_warning"),this.warning_alert=this.showWarningAlert(this.$t(t))}},getInvoiceDataByDocId(t){return rt(this,void 0,void 0,(function*(){try{this.showLoading();const e={doc_id:t},a=yield lt.U0.getById(e);if(!a.doc_id)return this.showErrorToast(this.$t("pages.messages.INVALID_DOCUMENT")),void this.hideLoading();this.apiData=a,this.setViewEditable(),this.apiData.tables&&Array.isArray(this.apiData.tables)&&this.apiData.tables.length>0&&!this.apiData.tables[0].hasOwnProperty("original_extraction_info")&&this.apiData.tables[0].extraction_info&&(this.apiData.tables[0]["original_extraction_info"]=this.apiData.tables[0].extraction_info),this.apiData.hasOwnProperty("table_data_copy")||(this.apiData["table_data_copy"]=this.apiData.tables)}catch(e){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},initPage(){this.apiData&&this.apiData.fields&&(this.ShowStaticPO(),this.getFieldValues(),this.renderMultiplePOItems(),this.$forceUpdate())},setViewEditable(){this.apiData.editable=!0,(Y.at.includes(this.apiData.status)||"error"==this.apiData.status)&&(this.apiData.editable=!1)},cleanupDataforApi(t){t&&t.hasOwnProperty("doc_type")&&-1===this.allowedDoctypes.indexOf(t.doc_type)&&t.hasOwnProperty("tables")},saveData(){return rt(this,void 0,void 0,(function*(){let t=this.apiData;this.showLoading(),this.cleanupDataforApi(t),t.hasOwnProperty("table_data_copy")&&delete t["table_data_copy"];let e,a=new FormData;a.append("data",JSON.stringify(t));try{let t=yield(0,tt.O_)();e=yield H().post(tt.hi.save_document+this.docId,a,{headers:{Authorization:t}})}catch(s){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}this.hideLoading(),!1===e.data.success?(this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),this.showErrorToast(e.data.message)):(this.apiData=e.data.data,this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")))}))},validationsForExportData(){"ORDER_CONFIRMATION"==this.apiData.doc_type?this.apiData.po_matched.forEach((t=>{"mismatch"===t.connection_status&&(this.confirmDecision=!0)})):this.exportData()},setPOStatus(t){this.apiData["po_status"]=t,this.exportData()},exportData(){return rt(this,void 0,void 0,(function*(){let t=this.apiData;this.showLoading(),this.cleanupDataforApi(t),t.hasOwnProperty("table_data_copy")&&delete t["table_data_copy"];let e,a=new FormData;a.append("data",JSON.stringify(t));try{let t=yield(0,tt.O_)();e=yield H().post(tt.hi.save_document+this.docId,a,{headers:{Authorization:t}})}catch(s){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}this.hideLoading(),!1===e.data.success?(this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),this.showErrorToast(e.data.message)):(this.apiData=e.data.data,this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")))}))},updateExtractionDataForSave(t,e){if(this.apiData&&this.apiData.tables&&this.apiData.tables[0]&&this.apiData.tables[0].hasOwnProperty("extraction_info"))for(let[a,s]of Object.entries(this.apiData.tables[0].extraction_info))this.apiData.tables[0].extraction_info[a][t]=e},updateTableDataForSave(t){this.apiData&&this.apiData.tables&&this.apiData.tables[0]&&t&&(this.apiData.tables[0].data=t)},updateReadOnlyFlag(t){this.isReadOnly=t},updateTableForSave(t){this.apiData&&t&&(this.apiData.tables=t,this.$refs["lineItemsRef"].resetlintItems())},goToExtractionTableView(){this.$router.push("/tbl_ext_v3/"+this.$route.params.id)},ShowStaticPO(){this.$route.fullPath.match(/PO/g)&&(this.apiData.showStaticPo="4002513646")},lineItemConnected(t){this.apiData&&(this.apiData.hasOwnProperty("po_matched")||(this.apiData.po_matched=[]),this.apiData.po_matched.push(t.detail.data),this.isExportDisabled=!1)},lineItemPOConnectionRemoved(t){if(!this.apiData||!this.apiData.hasOwnProperty("po_matched"))return;let e=t.detail.data,a=null;for(let[s,i]of this.apiData.po_matched.entries())e.invoice_table_line_id==i.invoice_table_line_id&&(a=s);null!=a&&(this.apiData.po_matched.splice(a,1),this.apiData.po_matched.lenght>0?this.isExportDisabled=!1:this.isExportDisabled=!0)},getFieldValues(){for(let t of this.apiData.fields)this.get_fields.hasOwnProperty(t.name)&&(this.get_fields[t.name]=t.formatted_value);this.apiData.showStaticPo&&(this.get_fields["purchase_order"]=this.apiData.showStaticPo)},showConnectedLines(){const t=new CustomEvent("show_connected_lines",{detail:{}});document.dispatchEvent(t)},renderMultiplePOItems(){return rt(this,void 0,void 0,(function*(){yield this.getPOColumns();let t={};t=this.getPurchaseOrderData();for(let[e,a]of Object.entries(t))this.addToPoItems(e,a);if((!t||0===Object.keys(t).length)&&this.get_fields["purchase_order"]){let t=yield this.getPOitems(this.get_fields["purchase_order"]);this.addToPoItems(this.get_fields["purchase_order"],t,!0)}}))},addToPoItems(t,e,a=!1){(0,st.Jp)(this.po_items)&&(this.po_items={}),0!=(0,st.v7)(e)&&(this.po_items[t]=e,1==(0,st.v7)(this.po_items)&&(this.tab=Object.keys(this.po_items)[0]),a&&this.setPoItemsforSave())},setPoItemsforSave(){if(this.apiData&&this.apiData.tables&&this.apiData.tables[0]&&this.apiData.tables[0].hasOwnProperty("extraction_info"))for(let[t,e]of Object.entries(this.apiData.tables[0].extraction_info))this.apiData.tables[0].extraction_info[t].hasOwnProperty("po_items")||(this.apiData.tables[0].extraction_info[t].po_items={}),this.apiData.tables[0].extraction_info[t].po_items=this.po_items},getPurchaseOrderData(){let t={};if(!this.apiData||!this.apiData.tables||!this.apiData.tables[0]||!this.apiData.tables[0].hasOwnProperty("extraction_info"))return t;for(let[e,a]of Object.entries(this.apiData.tables[0].extraction_info))this.apiData.tables[0].extraction_info[e].hasOwnProperty("po_items")&&(t=this.apiData.tables[0].extraction_info[e].po_items);return t},getPOitems(t){return rt(this,void 0,void 0,(function*(){let e,a=[];try{let s="?purchase_order_number="+t+"&doc_locale="+this.apiData.doc_locale,i=yield(0,tt.O_)();e=yield H().get(tt.hi.get_purchase_order_data+s,{headers:{Authorization:i}}),!1!==e.data.success&&(a=e.data)}catch(s){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}return a}))},searchPurchaseOrder(){return rt(this,void 0,void 0,(function*(){if((0,Y.s_)(this.apiData.doc_type)&&this.apiData.editable&&!(0,st.ke)(this.po_search)){this.showLoading();try{this.po_preview_items=[],this.po_preview=!1;let t=yield this.getPOitems(this.po_search);this.po_preview_items=t,this.po_preview=!0}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}this.hideLoading()}}))},clearSearch(){this.po_search="",this.po_preview_items=[],this.po_preview=!1},addToPoItemsList(){this.po_preview_items&&this.apiData.editable&&(this.addToPoItems(this.po_search,this.po_preview_items,!0),this.clearSearch())},togglePoImage(){"left-arrow-white.svg"===this.togglerIcon?this.togglerIcon="right-arrow-white.svg":this.togglerIcon="left-arrow-white.svg",(0,j.$)("#po-image-container").classList.toggle("hidden"),(0,j.$)("#po-container-parrent").classList.toggle("po-container-parrent"),(0,j.$)("#po-container-parrent").classList.toggle("po-container-parrent-full-width")},hasPurchaseOrderItems(){return(0,st.fg)(this.po_items)},getPOColumns(){return rt(this,void 0,void 0,(function*(){let t;try{this.apiData.po_columns=[];let e=this.apiData&&this.apiData.doc_type?this.apiData.doc_type:"PO_TABLE",a="?doc_type="+e,s=yield(0,tt.O_)();if(t=yield H().get(tt.hi.get_purchase_order_display_cols+a,{headers:{Authorization:s}}),!1===t.data.success)throw"Api response error";this.apiData.po_columns=t.data.data,this.po_preview_columns=[],this.apiData.po_columns.forEach(((t,e)=>{!0===t.preview&&this.po_preview_columns.push(t)}))}catch(e){throw this.showErrorToast(this.$t("pages.messages.PO_COLUMNS_API_ERROR")),"stop execuation, no columns for purchase order lines"}}))},keyDownEvent(t){const e=t.target;"Enter"===t.key&&null!==e?e.hasAttribute("data-id")&&"po_search"===e.getAttribute("data-id")&&this.searchPurchaseOrder():"f"===t.key&&setTimeout((()=>{(0,j.$)("#search-po").querySelector("label").click()}),10)},goToHelp(){window.open(ot.hA)}},beforeRouteLeave:function(t,e,a){"function"===typeof this.warning_alert&&this.warning_alert(),a()},setup(){(0,J.Z)();let t=[];return{tab:(0,M.iH)(""),apiData:t,showKeyboardShortcuts:(0,M.iH)(!1),po_preview:(0,M.iH)(!1),confirmDecision:(0,M.iH)(!1),isExportDisabled:(0,M.iH)(!0),po_preview_items:(0,M.iH)(t),togglerIcon:(0,M.iH)("right-arrow-white.svg"),po_items:(0,M.iH)({}),baseUrl:"https://dev.api.docbits.com",get_fields:{purchase_order:"",invoice_id:""},po_preview_columns:(0,M.iH)(t)}}});var ct=a(7683),dt=a(68879),ht=a(22857),pt=a(46858),_t=a(13119),ut=a(32074),mt=a(47817),gt=a(70900),wt=a(50926),ft=a(89800),bt=a(84106),vt=a(66933),yt=a(44458),Dt=a(63190),Ot=a(61357),xt=a(11821),Pt=a(18149),Et=a(62146),Tt=a(69984),It=a.n(Tt);const Rt=(0,ct.Z)(nt,[["render",z],["__scopeId","data-v-08ac6b52"]]),Ct=Rt;It()(nt,"components",{QBtn:dt.Z,QIcon:ht.Z,QTooltip:pt.Z,QInput:_t.Z,QDialog:ut.Z,QTabs:mt.Z,QTab:gt.Z,QSeparator:wt.Z,QTabPanels:ft.Z,QTabPanel:bt.Z,QMarkupTable:vt.Z,QCard:yt.Z,QCardSection:Dt.Z,QAvatar:Ot.Z,QCardActions:xt.Z,QField:Pt.Z}),It()(nt,"directives",{ClosePopup:Et.Z})}}]);