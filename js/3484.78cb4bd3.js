"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[3484],{33484:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Oe});var l=s(59835),o=s(86970),i=s(61957);const a={class:"container settings no-padding-left-right list-of-values-area"},n={class:"q-mt-sm",style:{"text-transform":"capitalize"}},r=(0,l._)("template",null,null,-1),d={class:"row items-center"},u=(0,l._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function c(e,t,s,c,m,h){const p=(0,l.up)("SubHeader"),w=(0,l.up)("f-btn"),_=(0,l.up)("BackToSettings"),g=(0,l.up)("q-separator"),f=(0,l.up)("q-icon"),v=(0,l.up)("q-space"),y=(0,l.up)("q-item-section"),b=(0,l.up)("valuesOfList"),q=(0,l.up)("q-card-section"),Z=(0,l.up)("q-card"),k=(0,l.up)("q-expansion-item"),W=(0,l.up)("q-list"),E=(0,l.up)("CreateList"),Q=(0,l.up)("q-dialog"),V=(0,l.up)("q-inner-loading");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(p,{name:"list_of_values",label:e.$t("list_of_values")},null,8,["label"]),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{class:"float-right",icon:"add",onClick:t[0]||(t[0]=t=>e.create_new_list=!0),label:e.$t("new")},null,8,["label"])])),_:1}),(0,l._)("div",a,[(0,l.Wm)(W,{bordered:"",class:"rounded-borders"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.list_of_values,((s,a)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:a},[(0,l.Wm)(g),(0,l.Wm)(k,{"expand-separator":"","header-class":"highlighted-back","defauklt-opened":""},{header:(0,l.w5)((()=>[(0,l.Wm)(f,{size:"25px",class:"q-mr-lg black_to_white q-mt-sm",name:"img:menu-button.svg"}),(0,l._)("span",n,(0,o.zw)(a),1),(0,l.Wm)(v),r,(0,l.Wm)(y,{side:""},{default:(0,l.w5)((()=>[(0,l._)("div",d,["DEFAULT"!=s["org_id"]?((0,l.wg)(),(0,l.j4)(w,{key:0,appearance:"flat",class:"float-right",onClick:[t[1]||(t[1]=(0,i.iM)((()=>{}),["stop"])),t=>e.deleteRow(a)],icon:"img:trash-bin-default.svg"},null,8,["onClick"])):(0,l.kq)("",!0)])])),_:2},1024)])),default:(0,l.w5)((()=>[(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(q,{style:"height: auto; min-height: 15vh;"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{list_name:a},null,8,["list_name"])])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,l.Wm)(g)],64)))),128))])),_:1})]),(0,l.Wm)(Q,{modelValue:e.create_new_list,"onUpdate:modelValue":t[2]||(t[2]=t=>e.create_new_list=t),persistent:"",onKeydown:t[3]||(t[3]=(0,i.D2)((t=>e.create_new_list=!1),["esc"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(E)])),_:1},8,["modelValue"]),(0,l.Wm)(V,{showing:e.processing},{default:(0,l.w5)((()=>[u])),_:1},8,["showing"])],64)}var m=s(7363),h=s(60499),p=s(16308),w=s(17256),_=s(46624);const g=e=>((0,l.dD)("data-v-7c135e2e"),e=e(),(0,l.Cn)(),e),f={class:"container"},v={class:"full-width q-pa-md"},y={class:"row q-mb-md"},b={class:"table-header-text"},q={style:{width:"5%"}},Z={class:"text-h4"},k={class:"text-h4"},W={class:"text-h4 action"},E={class:"text-red"},Q=g((()=>(0,l._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1))),V={class:"text-weight-bold"},C={class:"text-weight-bold"};function L(e,t,s,a,n,r){const d=(0,l.up)("q-space"),u=(0,l.up)("f-btn"),c=(0,l.up)("q-badge"),m=(0,l.up)("q-item-section"),h=(0,l.up)("q-item"),p=(0,l.up)("q-separator"),w=(0,l.up)("q-list"),_=(0,l.up)("q-menu"),g=(0,l.up)("q-btn"),L=(0,l.up)("q-markup-table"),x=(0,l.up)("q-inner-loading"),S=(0,l.up)("q-toolbar-title"),D=(0,l.up)("q-toolbar"),H=(0,l.up)("CreateValues"),F=(0,l.up)("q-card"),T=(0,l.up)("q-dialog"),U=(0,l.up)("editValue"),R=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",f,[(0,l._)("div",v,[(0,l._)("div",y,[(0,l.Wm)(d),(0,l.Wm)(u,{label:e.$t("pages.settings.master_data_lookup.add_row"),onClick:t[0]||(t[0]=t=>e.show_create_dialog=!0)},null,8,["label"])]),(0,l.Wm)(L,{flat:"",class:"dashboard-table-style back-white"},{default:(0,l.w5)((()=>[(0,l._)("thead",null,[(0,l._)("tr",b,[(0,l._)("th",null,(0,o.zw)(e.$t("Value")),1),(0,l._)("th",null,(0,o.zw)(e.$t("Synonyms")),1),(0,l._)("th",q,(0,o.zw)(e.$t("actions")),1)])]),(0,l._)("tbody",null,[e.list_of_values[e.list_name]["lov_items"]?((0,l.wg)(!0),(0,l.iD)(l.HY,{key:0},(0,l.Ko)(e.list_of_values[e.list_name]["lov_items"],((s,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("td",Z,(0,o.zw)(s["value"]),1),(0,l._)("td",k,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s["synonyms"],(e=>((0,l.wg)(),(0,l.j4)(c,{key:e,rounded:"",color:"primary",class:"q-mr-sm badge"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e),1)])),_:2},1024)))),128))]),(0,l._)("td",W,["DEFAULT"!=s["org_id"]?((0,l.wg)(),(0,l.j4)(g,{key:0,flat:"",dense:"",round:"",onClick:t[1]||(t[1]=(0,i.iM)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{persistent:"","auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{dense:"",style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{onClick:t=>e.editRow(s)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("edit")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,l.Wm)(p,{inset:""}),(0,l.Wm)(h,{clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{onClick:t=>e.deleteRow(s)},{default:(0,l.w5)((()=>[(0,l._)("span",E,(0,o.zw)(e.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)])])))),128)):(0,l.kq)("",!0)])])),_:1})]),(0,l.Wm)(x,{showing:e.loading},{default:(0,l.w5)((()=>[Q])),_:1},8,["showing"])]),(0,l.Wm)(T,{modelValue:e.show_create_dialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.show_create_dialog=t),persistent:"",onKeydown:t[3]||(t[3]=(0,i.D2)((t=>e.show_create_dialog=!1),["esc"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{style:{"min-height":"20vh","min-width":"470px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"text-white secondary-toolbar"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l._)("span",V,(0,o.zw)(e.$t("create_values")),1)])),_:1}),(0,l.wy)((0,l.Wm)(g,{flat:"",round:"",dense:"",icon:"close",onClick:e.show_create_dialog},null,8,["onClick"]),[[R]])])),_:1}),(0,l.Wm)(H,{list_name:e.list_name},null,8,["list_name"])])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(T,{modelValue:e.show_edit_dialog,"onUpdate:modelValue":t[5]||(t[5]=t=>e.show_edit_dialog=t),persistent:"",onKeydown:t[6]||(t[6]=(0,i.D2)((t=>e.show_edit_dialog=!1),["esc"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{style:{"min-height":"15vh","min-width":"10vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"text-white secondary-toolbar"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l._)("span",C,(0,o.zw)(e.$t("Edit Value")),1)])),_:1}),(0,l.wy)((0,l.Wm)(g,{flat:"",round:"",dense:"",icon:"close",onClick:t[4]||(t[4]=t=>e.show_edit_dialog=!1)},null,512),[[R]])])),_:1}),(0,l.Wm)(U,{list_name:e.list_name,model:e.edit_model},null,8,["list_name","model"])])),_:1})])),_:1},8,["modelValue"])],64)}const x={class:"text-caption"},S={class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},D={class:"full-width"},H={class:""},F={class:"q-pl-sm"},T=(0,l._)("img",{class:"",width:"20",height:"20",src:"trash-bin-default.svg",alt:""},null,-1),U=(0,l._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1);function R(e,t,s,a,n,r){const d=(0,l.up)("q-tooltip"),u=(0,l.up)("q-icon"),c=(0,l.up)("q-input"),m=(0,l.up)("q-btn"),h=(0,l.up)("q-select"),p=(0,l.up)("q-card-section"),w=(0,l.up)("q-card-actions"),_=(0,l.up)("q-inner-loading");return(0,l.wg)(),(0,l.iD)("form",{onSubmit:t[2]||(t[2]=(0,i.iM)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"])),class:"q-pt-md q-pb-lg"},[(0,l.Wm)(p,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l._)("span",x,(0,o.zw)(e.$t("list_of_values_hint")),1)]),(0,l._)("div",S,[(0,l._)("div",D,(0,o.zw)(e.$t("values")),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.values,((s,a)=>((0,l.wg)(),(0,l.iD)("div",{key:a,class:"row mb-10 mt-8 full-width",style:{"margin-bottom":"20px"}},[(0,l._)("div",H,[(0,l.Wm)(c,{dense:"",label:e.$t("name"),outlined:"",modelValue:s["name"],"onUpdate:modelValue":e=>s["name"]=e,autofocus:"",class:(0,o.C_)("full-width "+(s["validate"]?"column-error-border":""))},{append:(0,l.w5)((()=>[1==s["validate"]?((0,l.wg)(),(0,l.j4)(u,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-red line-error-tooltip"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:2},1032,["label","modelValue","onUpdate:modelValue","class"])]),(0,l._)("div",F,[(0,l.Wm)(h,{dense:"",class:"full-width",label:e.$t("synonyms"),outlined:"",modelValue:s["synonyms"],"onUpdate:modelValue":e=>s["synonyms"]=e,"use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0",onNewValue:e.createSynonyms},{after:(0,l.w5)((()=>[0!==a?((0,l.wg)(),(0,l.j4)(m,{key:0,flat:"",color:"primary no-padding-left-right",class:"q-ml-sm q-mt-sm",onClick:[t[0]||(t[0]=(0,i.iM)((()=>{}),["stop"])),t=>e.deleteRow(a)]},{default:(0,l.w5)((()=>[T])),_:2},1032,["onClick"])):(0,l.kq)("",!0)])),_:2},1032,["label","modelValue","onUpdate:modelValue","onNewValue"])])])))),128))])),_:1}),(0,l.Wm)(w,{align:"right"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l._)("div",null,[(0,l.Wm)(m,{class:"on-left",color:"primary",label:e.$t("add_more_values"),onClick:t[1]||(t[1]=t=>e.addNewLine())},null,8,["label"]),(0,l.Wm)(m,{type:"submit",color:"primary",label:e.$t("save")},null,8,["label"])])])])),_:1}),(0,l.Wm)(_,{showing:e.loading},{default:(0,l.w5)((()=>[U])),_:1},8,["showing"])],32)}var $=s(49990),N=s(49341),I=s(37446),z=function(e,t,s,l){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,i){function a(e){try{r(l.next(e))}catch(t){i(t)}}function n(e){try{r(l["throw"](e))}catch(t){i(t)}}function r(e){e.done?s(e.value):o(e.value).then(a,n)}r((l=l.apply(e,t||[])).next())}))};const M=(0,l.aZ)({props:{list_name:{type:String,default:""}},watch:{},mixins:[$.Z],components:{},data(){return{}},mounted:function(){this.init()},methods:{init(){try{this.addNewLine()}catch(e){}},addNewLine(){const e=Object.assign({},{name:"",synonyms:null,validate:!1,error:""});this.values.push(e)},createSynonyms(e,t){t(e)},deleteRow(e){0!=e&&this.values.splice(e,1)},resetErrors(){Array.from(this.values).forEach(((e,t)=>{e["validate"]=!1}))},submitNewColumFrom(){return z(this,void 0,void 0,(function*(){try{if(!this.validateForm())return;this.loading=!0,yield this.saveAll(),this.showSuccessToast("Record(s) Created successfully"),yield this.getValuesForList(this.list_name);const e=new CustomEvent("values_added",{});document.dispatchEvent(e)}catch(e){const t=I.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}}))},saveAll(){return z(this,void 0,void 0,(function*(){try{this.errors=[];for(let e of this.values)yield this.saveNewRow(e);if(this.errors.length>0)throw this.errors}catch(e){const t=I.w.getErrorMessage(e);this.showErrorToast(t)}}))},saveNewRow(e){return z(this,void 0,void 0,(function*(){try{let t={};t["name"]=this.list_name,t["value"]=e["name"],e["synonyms"]&&(t["synonyms"]=JSON.stringify(e["synonyms"]));const s=yield N.f2.createValuesForlist(t);if(0==s.success)throw s.message}catch(t){const e=I.w.getErrorMessage(t);this.errors.push(e)}}))},validateForm(){let e=!0;return this.resetErrors(),Array.from(this.values).forEach(((t,s)=>{this.validateName(t)||(e=!1)})),e},validateName(e){return!(!e["name"]||0==e["name"].length)||(e["validate"]=!0,!1)}},setup(){const e=(0,_.wr)(),{getValuesForList:t}=e;return{getValuesForList:t,loading:(0,h.iH)(!1),list_names:(0,h.iH)([]),values:(0,h.iH)([]),errors:(0,h.iH)([])}}});var A=s(7683),j=s(63190),Y=s(13119),K=s(22857),O=s(46858),P=s(32259),B=s(68879),J=s(11821),G=s(60854),X=s(69984),ee=s.n(X);const te=(0,A.Z)(M,[["render",R]]),se=te;ee()(M,"components",{QCardSection:j.Z,QInput:Y.Z,QIcon:K.Z,QTooltip:O.Z,QSelect:P.Z,QBtn:B.Z,QCardActions:J.Z,QInnerLoading:G.Z});const le=e=>((0,l.dD)("data-v-6576be84"),e=e(),(0,l.Cn)(),e),oe={class:"col-4"},ie={class:"col-6 q-pl-sm"},ae=(0,l.Uk)("Press enter when done typing"),ne=le((()=>(0,l._)("div",{class:"col-2"},null,-1))),re={class:"row full-width mt-8"},de={class:"col-10"},ue=le((()=>(0,l._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1)));function ce(e,t,s,a,n,r){const d=(0,l.up)("q-tooltip"),u=(0,l.up)("q-icon"),c=(0,l.up)("q-input"),m=(0,l.up)("q-select"),h=(0,l.up)("q-card-section"),p=(0,l.up)("q-btn"),w=(0,l.up)("q-card-actions"),_=(0,l.up)("q-inner-loading");return(0,l.wg)(),(0,l.iD)("form",{onSubmit:t[0]||(t[0]=(0,i.iM)(((...t)=>e.submitEditFrom&&e.submitEditFrom(...t)),["prevent","stop"])),class:"create-form q-pt-md q-pb-lg"},[(0,l.Wm)(h,{class:"q-pt-none"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.values,((t,s)=>((0,l.wg)(),(0,l.iD)("div",{key:s,class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},[(0,l._)("div",oe,[(0,l.Wm)(c,{label:"name",dense:"",outlined:"",modelValue:t["value"],"onUpdate:modelValue":e=>t["value"]=e,autofocus:"",class:(0,o.C_)("full-width "+(t["validate"]?"column-error-border":""))},{append:(0,l.w5)((()=>[1==t["validate"]?((0,l.wg)(),(0,l.j4)(u,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-red line-error-tooltip"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue","class"])]),(0,l._)("div",ie,[(0,l.Wm)(m,{dense:"",label:"Synonyms",outlined:"",modelValue:t["synonyms"],"onUpdate:modelValue":e=>t["synonyms"]=e,"use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0",onNewValue:e.createSynonyms},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[ae])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue","onNewValue"])]),ne])))),128))])),_:1}),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l._)("div",re,[(0,l._)("div",de,[(0,l.Wm)(p,{type:"submit",color:"primary",class:"float-right",label:e.$t("save")},null,8,["label"])])])])),_:1}),(0,l.Wm)(_,{showing:e.loading},{default:(0,l.w5)((()=>[ue])),_:1},8,["showing"])],32)}var me=function(e,t,s,l){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,i){function a(e){try{r(l.next(e))}catch(t){i(t)}}function n(e){try{r(l["throw"](e))}catch(t){i(t)}}function r(e){e.done?s(e.value):o(e.value).then(a,n)}r((l=l.apply(e,t||[])).next())}))};const he=(0,l.aZ)({props:{list_name:{type:String,default:""},model:{}},watch:{},mixins:[$.Z],components:{},data(){return{}},mounted:function(){this.init()},methods:{init(){try{this.editValue()}catch(e){}},editValue(){const e=Object.assign(this.model,{validate:!1,error:""});this.values.push(e)},createSynonyms(e,t){t(e)},deleteRow(e){0!=e&&this.values.splice(e,1)},resetErrors(){Array.from(this.values).forEach(((e,t)=>{e["validate"]=!1}))},submitEditFrom(){return me(this,void 0,void 0,(function*(){try{if(!this.validateForm())return;this.loading=!0,yield this.saveAll(),this.showSuccessToast("Record updated successfully"),yield this.getValuesForList(this.list_name);const e=new CustomEvent("values_added",{});document.dispatchEvent(e)}catch(e){const t=I.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}}))},saveAll(){return me(this,void 0,void 0,(function*(){try{this.errors=[];for(let e of this.values)yield this.saveRow(e);if(this.errors.length>0)throw this.errors}catch(e){const t=I.w.getErrorMessage(e);this.showErrorToast(t)}}))},saveRow(e){return me(this,void 0,void 0,(function*(){try{let t={};t["name"]=this.list_name,t["value"]=e["value"],t["id"]=e["id"],e["synonyms"]&&(t["synonyms"]=JSON.stringify(e["synonyms"]));const s=yield N.f2.editValueForlist(t);if(0==s.success)throw s.message}catch(t){const e=I.w.getErrorMessage(t);this.errors.push(e)}}))},validateForm(){let e=!0;return this.resetErrors(),Array.from(this.values).forEach(((t,s)=>{this.validateName(t)||(e=!1)})),e},validateName(e){return!(!e["value"]||0==e["value"].length)||(e["validate"]=!0,!1)}},setup(){const e=(0,_.wr)(),{getValuesForList:t}=e;return{getValuesForList:t,loading:(0,h.iH)(!1),list_names:(0,h.iH)([]),values:(0,h.iH)([]),errors:(0,h.iH)([])}}}),pe=(0,A.Z)(he,[["render",ce],["__scopeId","data-v-6576be84"]]),we=pe;ee()(he,"components",{QCardSection:j.Z,QInput:Y.Z,QIcon:K.Z,QTooltip:O.Z,QSelect:P.Z,QCardActions:J.Z,QBtn:B.Z,QInnerLoading:G.Z});var _e=function(e,t,s,l){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,i){function a(e){try{r(l.next(e))}catch(t){i(t)}}function n(e){try{r(l["throw"](e))}catch(t){i(t)}}function r(e){e.done?s(e.value):o(e.value).then(a,n)}r((l=l.apply(e,t||[])).next())}))};const ge=(0,l.aZ)({props:{list_name:{type:String,default:""}},mixins:[$.Z],components:{CreateValues:se,editValue:we},data(){return{}},mounted:function(){this.init(),document.addEventListener("values_added",this.rowAdded)},unmounted(){document.removeEventListener("values_added",this.rowAdded)},methods:{init(){return _e(this,void 0,void 0,(function*(){try{yield this.getValuesForList(this.list_name),this.prepareColumns()}catch(e){}}))},rowAdded(e){this.show_create_dialog=!1,this.show_edit_dialog=!1},prepareColumns(){this.columns.push({name:"Value",label:"Value",field:"Value",align:"left"}),this.columns.push({name:"action",label:this.$t("action"),field:"action",align:"right"})},deleteRow(e){return _e(this,void 0,void 0,(function*(){try{this.loading=!0;const t={name:this.list_name,value:e["value"]};yield N.f2.deleteValue(t);delete this.list_of_values[this.list_name]["lov_items"][e["value"]]}catch(t){const e=I.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.loading=!1}}))},editRow(e){this.edit_model=e,this.show_edit_dialog=!0}},setup(){const e=(0,_.wr)(),{list_of_values:t,processing:s}=(0,m.Jk)(e),{getValuesForList:l}=e;let o=[];return{getValuesForList:l,list_of_values:t,processing:s,columns:(0,h.iH)(o),show_create_dialog:(0,h.iH)(!1),tableRows:(0,h.iH)([]),loading:(0,h.iH)(!1),edit_model:(0,h.iH)({}),show_edit_dialog:(0,h.iH)(!1)}}});var fe=s(90136),ve=s(66933),ye=s(20990),be=s(56362),qe=s(13246),Ze=s(490),ke=s(76749),We=s(50926),Ee=s(32074),Qe=s(44458),Ve=s(51663),Ce=s(81973),Le=s(62146);const xe=(0,A.Z)(ge,[["render",L],["__scopeId","data-v-7c135e2e"]]),Se=xe;ee()(ge,"components",{QSpace:fe.Z,QMarkupTable:ve.Z,QBadge:ye.Z,QBtn:B.Z,QMenu:be.Z,QList:qe.Z,QItem:Ze.Z,QItemSection:ke.Z,QSeparator:We.Z,QInnerLoading:G.Z,QDialog:Ee.Z,QCard:Qe.Z,QToolbar:Ve.Z,QToolbarTitle:Ce.Z}),ee()(ge,"directives",{ClosePopup:Le.Z});const De=e=>((0,l.dD)("data-v-ccbc9940"),e=e(),(0,l.Cn)(),e),He=De((()=>(0,l._)("div",{class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},[(0,l._)("div",{class:"full-width"})],-1))),Fe={class:"row full-width mb-10 mt-8",style:{"margin-bottom":"20px"}},Te={class:"full-width"},Ue=De((()=>(0,l._)("img",{class:"loading-image",src:"loader.gif",alt:"Loading..."},null,-1)));function Re(e,t,s,a,n,r){const d=(0,l.up)("q-toolbar-title"),u=(0,l.up)("q-btn"),c=(0,l.up)("q-toolbar"),m=(0,l.up)("q-tooltip"),h=(0,l.up)("q-icon"),p=(0,l.up)("q-input"),w=(0,l.up)("q-card-section"),_=(0,l.up)("f-btn"),g=(0,l.up)("q-card-actions"),f=(0,l.up)("q-inner-loading"),v=(0,l.up)("q-card"),y=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"text-white secondary-toolbar"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("pages.settings.lov.new_list")),1)])),_:1}),(0,l.wy)((0,l.Wm)(u,{flat:"",round:"",dense:"",icon:"close"},null,512),[[y]])])),_:1}),(0,l._)("form",{onSubmit:t[1]||(t[1]=(0,i.iM)(((...t)=>e.submitNewColumFrom&&e.submitNewColumFrom(...t)),["prevent","stop"])),class:"create-form q-pt-md q-pb-lg"},[(0,l.Wm)(w,{class:"q-pt-none"},{default:(0,l.w5)((()=>[He,(0,l._)("div",Fe,[(0,l._)("div",Te,[(0,l.Wm)(p,{outlined:"",label:e.$t("Name"),modelValue:e.model["name"],"onUpdate:modelValue":t[0]||(t[0]=t=>e.model["name"]=t),class:(0,o.C_)("full-width "+(e.errors["name"]?"column-error-border":""))},{append:(0,l.w5)((()=>[e.errors["name"]?((0,l.wg)(),(0,l.j4)(h,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"bg-red line-error-tooltip"},{default:(0,l.w5)((()=>["required"==e.errors["name"]?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,o.zw)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)],64)):(0,l.kq)("",!0),"only_characters_underscore"==e.errors["name"]?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,o.zw)(e.$t("only_characters_underscore")),1)],64)):(0,l.kq)("",!0),"duplicate_error"==e.errors["name"]?((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[(0,l.Uk)((0,o.zw)(e.$t("duplicate_error")),1)],64)):(0,l.kq)("",!0)])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:1},8,["label","modelValue","class"])])])])),_:1}),(0,l.Wm)(g,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{type:"submit",class:"q-mr-sm",label:e.$t("save")},null,8,["label"])])),_:1}),(0,l.Wm)(f,{showing:e.loading},{default:(0,l.w5)((()=>[Ue])),_:1},8,["showing"])],32)])),_:1})}var $e=s(96427),Ne=function(e,t,s,l){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,i){function a(e){try{r(l.next(e))}catch(t){i(t)}}function n(e){try{r(l["throw"](e))}catch(t){i(t)}}function r(e){e.done?s(e.value):o(e.value).then(a,n)}r((l=l.apply(e,t||[])).next())}))};const Ie=(0,l.aZ)({props:{list_name:{type:String,default:""}},mixins:[$.Z],components:{},data(){return{}},mounted:function(){this.init()},methods:{init(){try{this.list_names=Object.keys(this.list_of_values),this.resetModel()}catch(e){}},resetModel(){this.model["name"]="",this.resetErrors()},resetErrors(){for(const[e,t]of Object.entries(this.model))this.errors[e]=""},submitNewColumFrom(){return Ne(this,void 0,void 0,(function*(){try{if(!this.validateRow())return;this.loading=!0,yield this.saveNewRow();const e=new CustomEvent("row_added",{});document.dispatchEvent(e),this.showSuccessToast("Record Created successfully")}catch(e){const t=I.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.loading=!1}}))},saveNewRow(){return Ne(this,void 0,void 0,(function*(){const e={name:this.model["name"]},t=yield N.f2.createList(e);if(0==t.success)throw t.message;this.resetModel()}))},validateRow(){let e=!0;return this.resetErrors(),this.validateName()||(e=!1),e},validateName(){return this.model["name"]&&0!=this.model["name"].length?(0,$e.qG)(this.model["name"])?!this.list_names.includes(this.model["name"])||(this.errors["name"]="duplicate_error",!1):(this.errors["name"]="only_characters_underscore",!1):(this.errors["name"]="required",!1)}},setup(){const e=(0,_.wr)(),{list_of_values:t,processing:s}=(0,m.Jk)(e),{getLists:l}=e;return{getLists:l,list_of_values:t,processing:s,model:(0,h.iH)({}),errors:(0,h.iH)({}),loading:(0,h.iH)(!1),list_names:(0,h.iH)([])}}}),ze=(0,A.Z)(Ie,[["render",Re],["__scopeId","data-v-ccbc9940"]]),Me=ze;ee()(Ie,"components",{QCard:Qe.Z,QToolbar:Ve.Z,QToolbarTitle:Ce.Z,QBtn:B.Z,QCardSection:j.Z,QInput:Y.Z,QIcon:K.Z,QTooltip:O.Z,QCardActions:J.Z,QInnerLoading:G.Z}),ee()(Ie,"directives",{ClosePopup:Le.Z});var Ae=function(e,t,s,l){function o(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,i){function a(e){try{r(l.next(e))}catch(t){i(t)}}function n(e){try{r(l["throw"](e))}catch(t){i(t)}}function r(e){e.done?s(e.value):o(e.value).then(a,n)}r((l=l.apply(e,t||[])).next())}))};const je=(0,l.aZ)({props:{},mixins:[$.Z],components:{SubHeader:p.Z,BackToSettings:w.Z,valuesOfList:Se,CreateList:Me},data(){return{}},mounted:function(){this.init(),document.addEventListener("row_added",this.rowAdded)},unmounted(){document.removeEventListener("row_added",this.rowAdded)},methods:{init(){return Ae(this,void 0,void 0,(function*(){try{this.processing=!0,yield this.getLists()}catch(e){}finally{this.processing=!1}}))},deleteRow(e){return Ae(this,void 0,void 0,(function*(){try{this.processing=!0;const t=yield N.f2.deleteList(e);if(0==t.success)throw t.message;yield this.getLists(),this.showSuccessToast(this.$t("pages.messages.DELETED_SUCCESSFULLY"))}catch(t){const e=I.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.processing=!1}}))},rowAdded(e){this.getLists(),this.create_new_list=!1}},setup(){const e=(0,_.wr)(),{processing:t,list_of_values:s}=(0,m.Jk)(e),{getLists:l}=e;return{getLists:l,processing:t,list_of_values:s,tab:(0,h.iH)("list_of_values"),create_new_list:(0,h.iH)(!1)}}});var Ye=s(50651);const Ke=(0,A.Z)(je,[["render",c]]),Oe=Ke;ee()(je,"components",{QList:qe.Z,QSeparator:We.Z,QExpansionItem:Ye.Z,QIcon:K.Z,QSpace:fe.Z,QItemSection:ke.Z,QCard:Qe.Z,QCardSection:j.Z,QDialog:Ee.Z,QInnerLoading:G.Z})}}]);