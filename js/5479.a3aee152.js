"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[5479],{35479:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ge});var s=o(61758),l=o(58790),a=o(29104);const i={class:"row q-pl-md q-pr-md q-mt-sm"},c={class:"col-4 secondary-c-text text-h6"},r={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},n={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},d={class:"col-8 q-pa-xs"},p={class:"container-wrapper q-pa-md"},u={class:"row full-width"},_={class:"col-sm-12 col-md-12 col-lg-12"},y={class:"table-header-text"},b=["data-index","draggable","dropzone","onDragstart","onDrop","onDragover"],g={key:0,class:"action-align cursor-default"},k={key:1,class:""},m=["onClick"],h={key:0,class:"text-left"},f={key:1,class:"text-left"},v={key:2,class:"text-left"},C={key:3,class:"text-left"},D={key:4,class:"text-center"},F={class:"text-red"},L={key:1},w={colspan:"5",class:"text-h4 text-center"},S={key:0,class:"text-weight-bold"},E={class:"row q-mt-md"},A={class:"col-12"},T={class:"row q-mt-md"},x={class:"col-12"},$={class:"q-ml-sm"};function q(e,t,o,q,Q,X){const I=(0,s.g2)("SubHeader"),R=(0,s.g2)("q-icon"),N=(0,s.g2)("q-btn"),W=(0,s.g2)("f-btn"),K=(0,s.g2)("q-badge"),V=(0,s.g2)("q-item-section"),z=(0,s.g2)("q-item"),M=(0,s.g2)("q-separator"),U=(0,s.g2)("q-list"),P=(0,s.g2)("q-menu"),O=(0,s.g2)("q-markup-table"),j=(0,s.g2)("Loader"),B=(0,s.g2)("q-toolbar-title"),G=(0,s.g2)("q-toolbar"),H=(0,s.g2)("q-input"),J=(0,s.g2)("q-card-section"),Y=(0,s.g2)("q-card"),Z=(0,s.g2)("q-dialog"),ee=(0,s.g2)("q-avatar"),te=(0,s.g2)("q-card-actions"),oe=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(I,{name:"scripts",label:e.$t("Scripts")},null,8,["label"]),(0,s.Lk)("div",i,[(0,s.Lk)("div",c,[e.doc_type_key&&!e.sub_doc_type_key?((0,s.uX)(),(0,s.Wv)(N,{key:0,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/settings/document"},{default:(0,s.k6)((()=>[(0,s.bF)(R,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,s.Lk)("label",r,(0,l.v_)(e.$t("pages.settings.document_types")),1)])),_:1})):(0,s.Q3)("",!0),e.doc_type_key&&e.sub_doc_type_key?((0,s.uX)(),(0,s.Wv)(N,{key:1,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/settings/sub_doc_type/"+e.doc_type_key},{default:(0,s.k6)((()=>[(0,s.bF)(R,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,s.Lk)("label",n,(0,l.v_)(e.$t("sub_doc_type")),1)])),_:1},8,["to"])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",d,[(0,s.bF)(W,{class:"float-right q-mr-sm",icon:"add","data-cy":"add-integration-button",onClick:t[0]||(t[0]=t=>e.addNewRecord()),label:e.$t("new")},null,8,["label"])])]),(0,s.Lk)("div",p,[(0,s.Lk)("div",u,[(0,s.Lk)("div",_,[(0,s.bF)(O,{flat:"",class:"dashboard-table-style back-white",id:"scripts_table"},{default:(0,s.k6)((()=>[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",y,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.table_columns,((o,i)=>((0,s.uX)(),(0,s.CE)("th",{key:o.name,"data-index":i,draggable:e.canDragDropColumn(o),dropzone:e.canDragDropColumn(o),direction:"horizontal",onDragstart:t=>e.onDragStart(t,e.table_columns,i),onDrop:(0,a.D$)((t=>e.handleDrop(t,i)),["prevent"]),onDragover:(0,a.D$)((t=>e.onDragOver(t,i)),["prevent"]),onDragenter:t[1]||(t[1]=(0,a.D$)(((...t)=>e.onDragEnter&&e.onDragEnter(...t)),["prevent"])),onDragleave:t[2]||(t[2]=(0,a.D$)(((...t)=>e.onDragLeave&&e.onDragLeave(...t)),["prevent"])),style:(0,l.Tr)({cursor:e.getIsDragging?"pointer":"move"})},["actions"==o.name?((0,s.uX)(),(0,s.CE)("span",g,(0,l.v_)(e.$t(o.label)),1)):((0,s.uX)(),(0,s.CE)("span",k,(0,l.v_)(e.$t(o.label)),1))],44,b)))),128))])]),(0,s.Lk)("tbody",null,[e.display_script&&e.display_script.length>0?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(e.display_script,(o=>((0,s.uX)(),(0,s.CE)("tr",{key:o.id,onClick:t=>e.editRecord(o)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.table_columns,(i=>((0,s.uX)(),(0,s.CE)(s.FK,{key:i.name},["name"==i.name?((0,s.uX)(),(0,s.CE)("td",h,[(0,s.eW)((0,l.v_)(o.label)+" ",1),"DEFAULT"===o.org_id?((0,s.uX)(),(0,s.Wv)(K,{key:0,transparent:"",align:"middle",color:"orange",class:"q-mr-sm q-ml-sm"},{default:(0,s.k6)((()=>[(0,s.eW)(" Standard ")])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(K,{transparent:"",align:"middle",color:o.is_active?"green":"red"},{default:(0,s.k6)((()=>[o.is_active?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.eW)((0,l.v_)(e.$t("active")),1)],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)((0,l.v_)(e.$t("inactive")),1)],64))])),_:2},1032,["color"])])):"belegtyp"==i.name?((0,s.uX)(),(0,s.CE)("td",f,(0,l.v_)(e.getDocTypeLabel(o)),1)):"sub_doc_type"==i.name?((0,s.uX)(),(0,s.CE)("td",v,(0,l.v_)(e.getSubDocTypeLabel(o)),1)):"trigger_on"==i.name?((0,s.uX)(),(0,s.CE)("td",C,(0,l.v_)(o.trigger_on),1)):((0,s.uX)(),(0,s.CE)("td",D,[(0,s.bF)(N,{flat:"",dense:"",round:"",onClick:t[3]||(t[3]=(0,a.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,s.k6)((()=>[(0,s.bF)(P,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,s.k6)((()=>[(0,s.bF)(U,{dense:"",style:{"min-width":"100px"}},{default:(0,s.k6)((()=>[(0,s.bF)(z,{clickable:""},{default:(0,s.k6)((()=>[o.is_active?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(V,{key:0,onClick:t=>e.handleDisability(o,o.is_active)},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("activate")),1)])),_:2},1032,["onClick"])),o.is_active?((0,s.uX)(),(0,s.Wv)(V,{key:1,onClick:t=>e.handleDisability(o,o.is_active)},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("deactivate")),1)])),_:2},1032,["onClick"])):(0,s.Q3)("",!0)])),_:2},1024),"DEFAULT"!==o.org_id?((0,s.uX)(),(0,s.Wv)(z,{key:0,clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(V,{onClick:t=>e.editRecord(o)},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("edit")),1)])),_:2},1032,["onClick"])])),_:2},1024)):(0,s.Q3)("",!0),(0,s.bF)(M,{inset:""}),(0,s.bF)(z,{clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(V,{onClick:t=>e.copyScriptClicked(o)},{default:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,l.v_)(e.$t("copy")),1)])),_:2},1032,["onClick"])])),_:2},1024),"DEFAULT"!==o.org_id?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.bF)(M,{inset:""}),(0,s.bF)(z,{clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(V,{onClick:t=>{e.deleteConfirmation=!0,e.configId=o.id}},{default:(0,s.k6)((()=>[(0,s.Lk)("span",F,(0,l.v_)(e.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)],64)):(0,s.Q3)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)]))],64)))),128))],8,m)))),128)):((0,s.uX)(),(0,s.CE)("tr",L,[(0,s.Lk)("td",w,(0,l.v_)(e.$t("pages.messages.no_record_found")),1)]))])])),_:1})])])]),(0,s.bF)(j),(0,s.bF)(Z,{modelValue:e.scriptCopyDialog,"onUpdate:modelValue":t[5]||(t[5]=t=>e.scriptCopyDialog=t),persistent:"",onKeydown:(0,a.jR)(e.resetCopyDialog,["esc"])},{default:(0,s.k6)((()=>[(0,s.bF)(Y,{style:{width:"600px","max-width":"600px",height:"240px"}},{default:(0,s.k6)((()=>[(0,s.bF)(G,{class:"text-white secondary-toolbar"},{default:(0,s.k6)((()=>[(0,s.bF)(B,null,{default:(0,s.k6)((()=>[e.row_id?((0,s.uX)(),(0,s.CE)("span",S,(0,l.v_)(e.$t("copy")),1)):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(N,{flat:"",round:"",dense:"",icon:"close",onClick:e.resetCopyDialog},null,8,["onClick"])])),_:1}),(0,s.bF)(J,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",E,[(0,s.Lk)("div",A,[(0,s.bF)(H,{modelValue:e.selected_record["label"],"onUpdate:modelValue":t[4]||(t[4]=t=>e.selected_record["label"]=t),label:e.$t("label"),outlined:"",class:(0,l.C4)("full q-ml-sm")},{append:(0,s.k6)((()=>[])),_:1},8,["modelValue","label"])])])])),_:1}),(0,s.bF)(J,{class:"p-t-0"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",T,[(0,s.Lk)("div",x,[(0,s.bF)(N,{color:"primary",class:"q-ml-sm float-right",label:e.$t("copy"),onClick:e.copyRecord},null,8,["label","onClick"]),(0,s.bF)(N,{class:"float-right highlighted-back",label:e.$t("cancel"),onClick:e.resetCopyDialog},null,8,["label","onClick"])])])])),_:1})])),_:1})])),_:1},8,["modelValue","onKeydown"]),(0,s.bF)(Z,{modelValue:e.deleteConfirmation,"onUpdate:modelValue":t[7]||(t[7]=t=>e.deleteConfirmation=t),persistent:""},{default:(0,s.k6)((()=>[(0,s.bF)(Y,null,{default:(0,s.k6)((()=>[(0,s.bF)(J,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,s.k6)((()=>[(0,s.bF)(ee,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,s.bF)(J,{class:"row items-center"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",$,(0,l.v_)(e.$t("pages.export.sure")),1)])),_:1}),(0,s.bF)(te,{align:"right"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(N,{flat:"",label:e.$t("cancel"),"data-cy":"cancel-card",color:"primary"},null,8,["label"]),[[oe]]),(0,s.bo)((0,s.bF)(N,{flat:"",label:e.$t("delete"),"data-cy":"done-card",color:"primary",onClick:t[6]||(t[6]=t=>e.deleteRecord())},null,8,["label"]),[[oe]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var Q=o(24622),X=o(10739),I=o(38734),R=o(8420),N=o(18505),W=o(66693),K=o(1595),V=o(1659),z=o(25891),M=o(11470),U=o(64775),P=o(45022),O=function(e,t,o,s){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,a){function i(e){try{r(s.next(e))}catch(t){a(t)}}function c(e){try{r(s["throw"](e))}catch(t){a(t)}}function r(e){e.done?o(e.value):l(e.value).then(i,c)}r((s=s.apply(e,t||[])).next())}))};const j=(0,s.pM)({el:"#app",mixins:[Q.A,N.A,z.A,X.A],components:{Loader:R.A,SubHeader:W.A},data(){return{dialog:!1,display_script:{},table_columns:[{label:"name",name:"name"},{label:"belegtyp",name:"belegtyp"},{label:"sub_doc_type",name:"sub_doc_type"},{label:"trigger_on",name:"trigger_on"},{label:"pages.export.actions",name:"actions"}]}},watch:{processing:{handler:function(e,t){!1===e?this.hideLoading():this.showLoading()}}},mounted(){return O(this,void 0,void 0,(function*(){this.processing=!0,this.prepareTableColumn(),this.fillDocTypeAndSubTypesListIfEmpty(),yield this.getList(),this.initDragDropColumns("scripts_table","label",["actions"]),document.addEventListener("scripts_table-column-drop",this.onDropColumns),this.processing=!1}))},unmounted(){document.removeEventListener("scripts_table-column-drop",this.onDropColumns)},methods:{getList(){return O(this,void 0,void 0,(function*(){this.doc_type_key=String(this.$route.params.doc_type||""),this.sub_doc_type_key=String(this.$route.params.sub_doc_type||"");const e=yield this.getScripts(this.doc_type_key,this.sub_doc_type_key);e&&(this.display_script=e)}))},editRecord(e){let t="?id="+e.id;this.sub_doc_type_key&&(t=t+"&sub_doc_type_key="+this.sub_doc_type_key),this.routeToScriptRecordView(t)},prepareTableColumn(){const e=P.A.getItem("SCRIPTS_SETTING_COLUMNS");this.table_columns=e&&""!=e?JSON.parse(e):this.table_columns},onDropColumns(){P.A.set("SCRIPTS_SETTING_COLUMNS",JSON.stringify(this.table_columns))},routeToScriptRecordView(e){const t="/settings/record_script/"+this.doc_type_key+e;this.$router.push(t)},addNewRecord(){let e="";this.sub_doc_type_key&&(e=e+"?sub_doc_type_key="+this.sub_doc_type_key),this.routeToScriptRecordView(e)},copyScriptClicked(e){this.selected_record=e,this.scriptCopyDialog=!0},resetCopyDialog(){this.selected_record={},this.scriptCopyDialog=!1},copyRecord(){return O(this,void 0,void 0,(function*(){try{this.processing=!0;const e={id:this.selected_record.id,label:this.selected_record.label};yield M.LN.copyScript(e),yield this.getScripts(this.doc_type_key,this.sub_doc_type_key),this.resetCopyDialog(),this.showSuccessToast(this.$t("record_copy_successfully"))}catch(e){const t=U.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.processing=!1}}))},deleteRecord(){return O(this,void 0,void 0,(function*(){try{this.processing=!0,yield M.LN.deleteRecord(this.configId.toString()),this.getList(),this.showSuccessToast(this.$t("operation_sucessfull"))}catch(e){const t=U.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.deleteConfirmation=!1,this.processing=!1}}))},handleDisability(e,t){return O(this,void 0,void 0,(function*(){try{t=!t,this.processing=!0;const o=yield M.LN.updateActive(e.id.toString(),t);if(!o.success||!0!==o.success)throw{message:o.message};e.is_active=t}catch(o){const e=U.t.getErrorMessage(o);this.showErrorToast(e),logError(o)}finally{this.processing=!1}}))},getDocTypeLabel(e){const t=this.doc_types_sub_types_list.find((t=>t.value===e.doc_type));return String(t?t.label:e.doc_type)},getSubDocTypeLabel(e){const t=this.doc_types_sub_types_list.find((t=>t.value===e.sub_doc_type));let o=e.sub_doc_type;return t&&(o=t.label),e.sub_doc_type&&"null"!==e.sub_doc_type||(o=""),String(o)},createNewClicked(){this.$router.push("/settings/document")}},setup(){const e=(0,K.zb)(),{getScripts:t}=e,{script_list:o,processing:s,doc_type_key:l,sub_doc_type_key:a,selected_record:i}=(0,V.bP)(e),c=(0,K.cY)(),{fillDocTypeAndSubTypesListIfEmpty:r}=c,{doc_types_sub_types_list:n}=(0,V.bP)(c);return{doc_types_sub_types_list:n,selected_record:i,getScripts:t,fillDocTypeAndSubTypesListIfEmpty:r,doc_type_key:l,sub_doc_type_key:a,configId:0,script_list:o,processing:s,deleteConfirmation:(0,I.KR)(!1),scriptCopyDialog:(0,I.KR)(!1)}}});var B=o(12807),G=o(56384),H=o(50492),J=o(857),Y=o(23954),Z=o(84436),ee=o(53999),te=o(90124),oe=o(25173),se=o(10386),le=o(82156),ae=o(23316),ie=o(36914),ce=o(39150),re=o(44189),ne=o(67837),de=o(3952),pe=o(62669),ue=o(88672),_e=o(98582),ye=o.n(_e);const be=(0,B.A)(j,[["render",q],["__scopeId","data-v-443185b1"]]),ge=be;ye()(j,"components",{QBtn:G.A,QIcon:H.A,QMarkupTable:J.A,QBadge:Y.A,QMenu:Z.A,QList:ee.A,QItem:te.A,QItemSection:oe.A,QSeparator:se.A,QDialog:le.A,QCard:ae.A,QToolbar:ie.A,QToolbarTitle:ce.A,QCardSection:re.A,QInput:ne.A,QAvatar:de.A,QCardActions:pe.A}),ye()(j,"directives",{ClosePopup:ue.A})}}]);