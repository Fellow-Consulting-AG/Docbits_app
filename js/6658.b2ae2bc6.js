"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[6658],{46658:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Qt});var i=o(61758);const a={style:{margin:"20px 50px 20px 50px"}},l={style:{"font-size":"30px","margin-top":"5px"}},s={class:"row text-weight-bolder"},n={key:1,align:"center",style:{"margin-top":"15px"}},r={key:0};function d(e,t,o,d,c,u){const p=(0,i.g2)("q-btn"),h=(0,i.g2)("q-input"),g=(0,i.g2)("q-select"),m=(0,i.g2)("DefaultBtn"),_=(0,i.g2)("q-space"),f=(0,i.g2)("q-icon"),b=(0,i.g2)("q-item"),v=(0,i.g2)("q-list"),k=(0,i.g2)("q-menu"),w=(0,i.g2)("Dashboard_Middle_List"),y=(0,i.g2)("q-pagination"),x=(0,i.g2)("Dashboard_Middle_Preview"),F=(0,i.g2)("Dashboard_Middle_Preview_Text"),C=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.CE)("section",{id:"services",class:"services section-bg",style:{height:"75vh"},onDrop:t[20]||(t[20]=(...t)=>e.drop&&e.drop(...t)),onDragover:t[21]||(t[21]=(...t)=>e.allowDrop&&e.allowDrop(...t)),onDragleave:t[22]||(t[22]=(...t)=>e.dragLeave&&e.dragLeave(...t))},[(0,i.Lk)("div",null,[(0,i.Lk)("div",a,[(0,i.Lk)("div",l,[(0,i.Lk)("div",s,[(0,i.bF)(h,{class:"searchbar",outlined:"",dense:"",debounce:"500",modelValue:e.search_filter,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.search_filter=t),t[2]||(t[2]=t=>e.applyFilter())],label:e.$t("doc2light.pages.search_by_title")},{after:(0,i.k6)((()=>[(0,i.bF)(p,{round:"",dense:"",flat:"",icon:"filter_alt",onClick:t[0]||(t[0]=t=>e.showFilter=!e.showFilter)})])),_:1},8,["modelValue","label"]),e.showFilter?((0,i.uX)(),(0,i.Wv)(g,{key:0,style:{"min-width":"10vw","margin-right":"5px",height:"40px","margin-left":"15px"},outlined:"",dense:"","label-color":"primary",modelValue:e.doc_type_filter,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.doc_type_filter=t),t[4]||(t[4]=t=>e.applyFilter())],options:e.doc_types,label:e.$t("doc2light.pages.doc_type")},null,8,["modelValue","options","label"])):(0,i.Q3)("",!0),e.showFilter?((0,i.uX)(),(0,i.Wv)(g,{key:1,style:{"min-width":"7vw","margin-right":"5px",height:"40px"},outlined:"",dense:"","label-color":"primary",modelValue:e.tag_filter,"onUpdate:modelValue":[t[5]||(t[5]=t=>e.tag_filter=t),t[6]||(t[6]=t=>e.applyFilter())],options:e.tags,label:e.$t("doc2light.pages.tags")},null,8,["modelValue","options","label"])):(0,i.Q3)("",!0),e.showFilter?((0,i.uX)(),(0,i.Wv)(g,{key:2,style:{"min-width":"10vw","margin-right":"5px",height:"40px"},outlined:"",dense:"","label-color":"primary",modelValue:e.assignee_filter,"onUpdate:modelValue":[t[7]||(t[7]=t=>e.assignee_filter=t),t[8]||(t[8]=t=>e.applyFilter())],options:e.correspondents,label:e.$t("doc2light.pages.assignee")},null,8,["modelValue","options","label"])):(0,i.Q3)("",!0),e.showFilter?((0,i.uX)(),(0,i.Wv)(g,{key:3,style:{"min-width":"10vw","margin-right":"5px",height:"40px"},outlined:"",dense:"","label-color":"primary",modelValue:e.time_period_filter,"onUpdate:modelValue":[t[9]||(t[9]=t=>e.time_period_filter=t),t[10]||(t[10]=t=>e.applyFilter())],options:[{label:e.$t("today"),value:"today"},{label:e.$t("week"),value:"current-week"},{label:e.$t("month"),value:"current-month"},{label:e.$t("year"),value:"current-year"},{label:e.$t("total"),value:"all"}],label:e.$t("doc2light.pages.time_periods")},null,8,["modelValue","options","label"])):(0,i.Q3)("",!0),e.showFilter?((0,i.uX)(),(0,i.Wv)(m,{key:4,onClick:t[11]||(t[11]=t=>e.resetFilter()),label:e.$t("doc2light.pages.reset_filter")},null,8,["label"])):(0,i.Q3)("",!0),(0,i.bF)(_),"list"==e.view?((0,i.uX)(),(0,i.Wv)(p,{key:5,class:"default-btn-alfred",flat:""},{default:(0,i.k6)((()=>[(0,i.bF)(f,{class:"black-icon",name:"img:images/list-ul.svg"}),(0,i.bF)(k,{fit:"",align:"center"},{default:(0,i.k6)((()=>[(0,i.bF)(v,{style:{"max-width":"100%"},bordered:"",separator:""},{default:(0,i.k6)((()=>[(0,i.bo)(((0,i.uX)(),(0,i.Wv)(b,{clickable:"",onClick:t[12]||(t[12]=t=>e.view="preview")},{default:(0,i.k6)((()=>[(0,i.bF)(f,{style:{position:"absolute"},name:"img:images/grid.svg",size:"2em",class:"center black-icon"})])),_:1})),[[C]]),(0,i.bo)(((0,i.uX)(),(0,i.Wv)(b,{clickable:"",onClick:t[13]||(t[13]=t=>e.view="prev_text")},{default:(0,i.k6)((()=>[(0,i.bF)(f,{style:{position:"absolute"},name:"img:images/view-stacked.svg",size:"2em",class:"center black-icon"})])),_:1})),[[C]])])),_:1})])),_:1})])),_:1})):(0,i.Q3)("",!0),"preview"==e.view?((0,i.uX)(),(0,i.Wv)(p,{key:6,unelevated:"",class:"default-btn-alfred"},{default:(0,i.k6)((()=>[(0,i.bF)(f,{class:"black-icon",name:"img:images/grid.svg"}),(0,i.bF)(k,{fit:"",align:"center"},{default:(0,i.k6)((()=>[(0,i.bF)(v,{style:{"max-width":"100%"},bordered:"",separator:""},{default:(0,i.k6)((()=>[(0,i.bo)(((0,i.uX)(),(0,i.Wv)(b,{clickable:"",onClick:t[14]||(t[14]=t=>e.view="prev_text")},{default:(0,i.k6)((()=>[(0,i.bF)(f,{style:{position:"absolute"},name:"img:images/view-stacked.svg",size:"2em",class:"center black-icon"})])),_:1})),[[C]]),(0,i.bo)(((0,i.uX)(),(0,i.Wv)(b,{clickable:"",onClick:t[15]||(t[15]=t=>e.view="list")},{default:(0,i.k6)((()=>[(0,i.bF)(f,{style:{position:"absolute"},name:"img:images/list-ul.svg",size:"2em",class:"center black-icon"})])),_:1})),[[C]])])),_:1})])),_:1})])),_:1})):(0,i.Q3)("",!0),"prev_text"==e.view?((0,i.uX)(),(0,i.Wv)(p,{key:7,unelevated:"",class:"default-btn-alfred"},{default:(0,i.k6)((()=>[(0,i.bF)(f,{class:"black-icon",name:"img:images/view-stacked.svg"}),(0,i.bF)(k,{fit:"",align:"center"},{default:(0,i.k6)((()=>[(0,i.bF)(v,{style:{"max-width":"100%"},bordered:"",separator:""},{default:(0,i.k6)((()=>[(0,i.bo)(((0,i.uX)(),(0,i.Wv)(b,{clickable:"",onClick:t[16]||(t[16]=t=>e.view="list")},{default:(0,i.k6)((()=>[(0,i.bF)(f,{style:{position:"absolute"},name:"img:images/list-ul.svg",size:"2em",class:"center black-icon"})])),_:1})),[[C]]),(0,i.bo)(((0,i.uX)(),(0,i.Wv)(b,{clickable:"",onClick:t[17]||(t[17]=t=>e.view="preview")},{default:(0,i.k6)((()=>[(0,i.bF)(f,{style:{position:"absolute"},name:"img:images/grid.svg",size:"2em",class:"center black-icon"})])),_:1})),[[C]])])),_:1})])),_:1})])),_:1})):(0,i.Q3)("",!0)])]),"list"==e.view?((0,i.uX)(),(0,i.Wv)(w,{key:0,onDrop:e.drop,onDragover:e.allowDrop,onDragleave:e.dragLeave},null,8,["onDrop","onDragover","onDragleave"])):(0,i.Q3)("",!0),"list"==e.view?((0,i.uX)(),(0,i.CE)("div",n,[e.apidata.documentData.doc_count>18?((0,i.uX)(),(0,i.CE)("tr",r,[(0,i.Lk)("td",null,[(0,i.bF)(y,{modelValue:e.paginationCount,"onUpdate:modelValue":[t[18]||(t[18]=t=>e.paginationCount=t),t[19]||(t[19]=t=>e.loadNext())],color:"primary",max:Math.ceil(e.apidata.documentData.doc_count/18),"boundary-links":""},null,8,["modelValue","max"])])])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),"preview"==e.view?((0,i.uX)(),(0,i.Wv)(x,{key:2,onDrop:e.drop,onDragover:e.allowDrop,onDragleave:e.dragLeave},null,8,["onDrop","onDragover","onDragleave"])):(0,i.Q3)("",!0),"prev_text"==e.view?((0,i.uX)(),(0,i.Wv)(F,{key:3,onDrop:e.drop,onDragover:e.allowDrop,onDragleave:e.dragLeave},null,8,["onDrop","onDragover","onDragleave"])):(0,i.Q3)("",!0)])])],32)}var c=o(24622),u=o(38734),p=o(18505),h=o(58790),g=o(29104);const m={class:"full-width",style:{"margin-top":"10px"}},_={style:{"text-align":"left",color:"white",background:"#0E3341"}},f={class:"tablebody"},b=["onClick"],v=["onClick"],k=["onClick"],w=["onClick"],y=["onClick"],x=["onClick"],F=["onClick"],C={style:{width:"55vw","min-height":"65vh"}},D={style:{width:"23vw"}},R={style:{"min-width":"30vw","min-height":"70vh"}};function L(e,t,o,a,l,s){const n=(0,i.g2)("q-checkbox"),r=(0,i.g2)("DeleteQfab"),d=(0,i.g2)("q-tooltip"),c=(0,i.g2)("q-fab-action"),u=(0,i.g2)("q-fab"),p=(0,i.g2)("q-chip"),L=(0,i.g2)("q-scroll-area"),K=(0,i.g2)("q-markup-table"),q=(0,i.g2)("FolderView"),A=(0,i.g2)("q-dialog"),P=(0,i.g2)("LexOfficeExport"),Q=(0,i.g2)("DocumentPreview");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",m,[(0,i.bF)(K,{flat:"",class:"sticky-column-for-table q-table-seperator",style:{"max-height":"65vh",overflow:"auto"},dense:"",id:"primary-table"},{default:(0,i.k6)((()=>[(0,i.Lk)("thead",null,[(0,i.Lk)("tr",_,[(0,i.Lk)("th",null,[(0,i.bF)(n,{dark:"",modelValue:e.headerCheckbox,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.headerCheckbox=t),t[1]||(t[1]=t=>e.changeAction())]},null,8,["modelValue"]),(0,i.bF)(u,{modelValue:e.headerFabIcon,"onUpdate:modelValue":t[4]||(t[4]=t=>e.headerFabIcon=t),disable:e.selection.length<1,"label-position":"top","data-cy":"actions","external-label":"",icon:"more_vert",direction:"down",padding:"xs",flat:""},{default:(0,i.k6)((()=>[(0,i.bF)(r,{info:e.$t("doc2light.pages.document"),tooltip:e.$t("delete"),function:e.deleteMarked,argument:e.selection},null,8,["info","tooltip","function","argument"]),(0,i.bF)(c,{padding:"5px","external-label":"","label-position":"top","data-cy":"upload",color:"purple",icon:"outbox",onClick:t[2]||(t[2]=t=>e.getOrgStoreData())},{default:(0,i.k6)((()=>[(0,i.bF)(d,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,h.v_)(e.$t("upload_to_store")),1)])),_:1})])),_:1}),(0,i.bF)(c,{padding:"5px","external-label":"","label-position":"top","data-cy":"upload",color:"orange",icon:"upload_file",onClick:t[3]||(t[3]=t=>e.lexofficepopup=!0)},{default:(0,i.k6)((()=>[(0,i.bF)(d,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,h.v_)(e.$t("doc2light.popups.export_lexoffice")),1)])),_:1})])),_:1})])),_:1},8,["modelValue","disable"])]),(0,i.Lk)("th",null,(0,h.v_)(e.$t("doc2light.table.asn")),1),(0,i.Lk)("th",null,(0,h.v_)(e.$t("doc2light.table.title")),1),(0,i.Lk)("th",null,(0,h.v_)(e.$t("doc2light.pages.doc_type")),1),(0,i.Lk)("th",null,(0,h.v_)(e.$t("doc2light.pages.tags")),1),(0,i.Lk)("th",null,(0,h.v_)(e.$t("doc2light.pages.assignee")),1),(0,i.Lk)("th",null,(0,h.v_)(e.$t("doc2light.table.created_on")),1),(0,i.Lk)("th",null,(0,h.v_)(e.$t("doc2light.table.modified_at")),1),(0,i.Lk)("th",null,(0,h.v_)(e.$t("doc2light.table.actions")),1)])]),(0,i.Lk)("tbody",f,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.apidata.dashboardDocs.docs,(t=>((0,i.uX)(),(0,i.CE)("tr",{key:t.id},[(0,i.Lk)("td",null,[(0,i.bF)(n,{modelValue:t.rowSelection,"onUpdate:modelValue":[e=>t.rowSelection=e,o=>e.selectionList(t)]},null,8,["modelValue","onUpdate:modelValue"])]),(0,i.Lk)("td",{onClick:o=>{e.onRowClick(t.id)}},(0,h.v_)(e.replaceEmpty(t.asi)),9,b),(0,i.Lk)("td",{onClick:o=>{e.onRowClick(t.id)},class:"documnetCol"},(0,h.v_)(e.replaceEmpty(t.name)),9,v),(0,i.Lk)("td",{onClick:o=>{e.onRowClick(t.id)}},(0,h.v_)(e.replaceEmpty(t.doc_type.name)),9,k),(0,i.Lk)("td",{onClick:o=>{e.onRowClick(t.id)},class:"tags"},[(0,i.bF)(L,{style:{height:"40px","min-width":"200px"}},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.tags,(t=>((0,i.uX)(),(0,i.Wv)(p,{key:t.id,dense:"",style:(0,h.Tr)({"background-color":t.color,color:e.color_check(t.color)})},{default:(0,i.k6)((()=>[(0,i.eW)((0,h.v_)(e.replaceEmpty(t.name)),1)])),_:2},1032,["style"])))),128))])),_:2},1024)],8,w),(0,i.Lk)("td",{onClick:o=>{e.onRowClick(t.id)}},(0,h.v_)(e.replaceEmpty(t.correspondent.name)),9,y),(0,i.Lk)("td",{onClick:o=>{e.onRowClick(t.id)}},(0,h.v_)(e.replaceEmpty(e.formateDate(t.created_on,"YYYY-MM-DD HH:mm:ss"))),9,x),(0,i.Lk)("td",{onClick:o=>{e.onRowClick(t.id)}},(0,h.v_)(e.replaceEmpty(e.formateDate(t.last_modified,"YYYY-MM-DD HH:mm:ss"))),9,F),(0,i.Lk)("td",null,[(0,i.bF)(u,{modelValue:t["fabaction"],"onUpdate:modelValue":e=>t["fabaction"]=e,"label-position":"bottom","data-cy":"actions","external-label":"",icon:"more_vert",direction:"left",padding:"xs",flat:""},{default:(0,i.k6)((()=>[(0,i.bF)(r,{info:e.$t("doc2light.pages.document"),tooltip:e.$t("delete"),function:e.onTrashbinClick,argument:t.id},null,8,["info","tooltip","function","argument"]),(0,i.bF)(c,{padding:"5px","external-label":"","label-position":"bottom","data-cy":"upload",color:"orange",icon:"mode_edit_outline",onClick:o=>e.onRowClick(t.id)},{default:(0,i.k6)((()=>[(0,i.bF)(d,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,h.v_)(e.$t("edit")),1)])),_:1})])),_:2},1032,["onClick"]),(0,i.bF)(c,{padding:"5px","external-label":"","label-position":"bottom","data-cy":"upload",color:"blue",icon:"file_download",onClick:o=>e.onDownloadClick(t)},{default:(0,i.k6)((()=>[(0,i.bF)(d,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,h.v_)(e.$t("download")),1)])),_:1})])),_:2},1032,["onClick"]),(0,i.bF)(c,{padding:"5px","external-label":"","label-position":"bottom","data-cy":"preview",color:"green",icon:"visibility",onClick:o=>e.ShowDocPreview(t)},{default:(0,i.k6)((()=>[(0,i.bF)(d,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,h.v_)(e.$t("doc2light.pages.view")),1)])),_:1})])),_:2},1032,["onClick"]),(0,i.bF)(c,{padding:"5px","external-label":"","label-position":"bottom","data-cy":"account_tree",color:"yellow",icon:"account_tree"},{default:(0,i.k6)((()=>[(0,i.bF)(d,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,h.v_)(e.$t("account_tree")),1)])),_:1})])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])])])))),128))])])),_:1})]),(0,i.bF)(A,{modelValue:e.uploadpopup,"onUpdate:modelValue":t[5]||(t[5]=t=>e.uploadpopup=t),onKeydown:t[6]||(t[6]=(0,g.jR)((t=>e.uploadpopup=!1),["esc"]))},{default:(0,i.k6)((()=>[(0,i.Lk)("div",C,[(0,i.bF)(q,{mode:"popup",selection:e.selection},null,8,["selection"])])])),_:1},8,["modelValue"]),(0,i.bF)(A,{modelValue:e.lexofficepopup,"onUpdate:modelValue":t[7]||(t[7]=t=>e.lexofficepopup=t),onKeydown:t[8]||(t[8]=(0,g.jR)((t=>e.lexofficepopup=!1),["esc"]))},{default:(0,i.k6)((()=>[(0,i.Lk)("div",D,[(0,i.bF)(P,{selection:e.selection},null,8,["selection"])])])),_:1},8,["modelValue"]),(0,i.bF)(A,{modelValue:e.preview_doc,"onUpdate:modelValue":t[9]||(t[9]=t=>e.preview_doc=t),onKeydown:t[10]||(t[10]=(0,g.jR)((t=>e.preview_doc=!1),["esc"]))},{default:(0,i.k6)((()=>[(0,i.Lk)("div",R,[(0,i.bF)(Q,{id:e.preview_doc_id},null,8,["id"])])])),_:1},8,["modelValue"])],64)}var K=o(36246),q=o(59534),A=o(63008),P=o(1659);const Q={class:"text-weight-bold"};function S(e,t,o,a,l,s){const n=(0,i.g2)("q-toolbar-title"),r=(0,i.g2)("q-btn"),d=(0,i.g2)("q-toolbar"),c=(0,i.g2)("q-select"),u=(0,i.g2)("q-card-section"),p=(0,i.g2)("CancelBtn"),g=(0,i.g2)("SaveBtn"),m=(0,i.g2)("q-card-actions"),_=(0,i.g2)("q-card"),f=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.Wv)(_,null,{default:(0,i.k6)((()=>[(0,i.Lk)("form",null,[(0,i.bF)(d,{class:"text-white secondary-toolbar"},{default:(0,i.k6)((()=>[(0,i.bF)(n,null,{default:(0,i.k6)((()=>[(0,i.Lk)("span",Q,(0,h.v_)(e.$t("doc2light.popups.export_lexoffice")),1)])),_:1}),(0,i.bo)((0,i.bF)(r,{flat:"",round:"",dense:"",icon:"close"},null,512),[[f]])])),_:1}),(0,i.bF)(u,{class:"q-pt-none"},{default:(0,i.k6)((()=>[(0,i.bF)(c,{filled:"",style:{"margin-top":"15px"},modelValue:e.store_selection,"onUpdate:modelValue":t[0]||(t[0]=t=>e.store_selection=t),options:e.store_options,label:"Store"},null,8,["modelValue","options"])])),_:1}),(0,i.bF)(m,{align:"right"},{default:(0,i.k6)((()=>[(0,i.bF)(p),(0,i.bF)(g,{onClick:t[1]||(t[1]=t=>e.uploadToSpace()),class:"q-mr-sm"})])),_:1})])])),_:1})}var T=o(34300),V=o(98872),M=o(99976),$=o(5255),E=function(e,t,o,i){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(t){l(t)}}function n(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?o(e.value):a(e.value).then(s,n)}r((i=i.apply(e,t||[])).next())}))};const X=(0,i.pM)({el:"#app",mixins:[p.A,c.A],props:["selection"],components:{SaveBtn:$.A,CancelBtn:M.A},mounted(){this.getStores()},data(){return{}},setup(){const e=(0,V.C)(),{uploadFiletoSpace:t}=((0,P.bP)(e),e);return{uploadFiletoSpace:t,add_row:(0,u.KR)({}),store_selection:(0,u.KR)({label:"Select Store",value:""}),store_options:(0,u.KR)([])}},methods:{getStores(){return E(this,void 0,void 0,(function*(){try{yield T.iT.getAccessableStores().then((e=>{e.exports.forEach((e=>{if("lexoffice"==e.store_type){const t={label:e.name,value:e.id};this.store_options.push(t)}})),this.store_selection=this.store_options[0]}))}catch(e){this.showErrorToast("Failed getting authenticated Stores")}}))},uploadToSpace(){return E(this,void 0,void 0,(function*(){try{const e={label:"",path:"Fake Path",id:"Fake ID"};this.showLoading(),yield this.uploadFiletoSpace(this.selection,e,this.overwrite,this.store_selection.value,"lexoffice").then((e=>{this.showSuccessToast("Files Uploaded to Space")})),this.hideLoading()}catch(e){this.hideLoading(),this.showErrorToast("Files could not be uploaded. Please try again")}}))},init_view(){logInfo(this.edit_model_index)}}});var I=o(12807),W=o(23316),O=o(36914),U=o(39150),j=o(56384),Y=o(44189),B=o(94940),z=o(62669),H=o(88672),N=o(98582),G=o.n(N);const J=(0,I.A)(X,[["render",S]]),Z=J;G()(X,"components",{QCard:W.A,QToolbar:O.A,QToolbarTitle:U.A,QBtn:j.A,QCardSection:Y.A,QSelect:B.A,QCardActions:z.A}),G()(X,"directives",{ClosePopup:H.A});const ee=e=>((0,i.Qi)("data-v-46954f87"),e=e(),(0,i.jt)(),e),te={class:"popup-heading color-primary"},oe={class:"row",style:{border:"1px solid","margin-right":"20px","min-width":"130px"}},ie={style:{margin:"auto 5px auto 5px",width:"40px"},align:"center"},ae={style:{margin:"auto 10px auto 5px","min-width":"30px"},align:"center"},le=ee((()=>(0,i.Lk)("hr",{style:{color:"#cecece"}},null,-1))),se={key:0,class:"image"};function ne(e,t,o,a,l,s){const n=(0,i.g2)("q-toolbar-title"),r=(0,i.g2)("q-separator"),d=(0,i.g2)("q-input"),c=(0,i.g2)("q-btn"),u=(0,i.g2)("CancelBtn"),p=(0,i.g2)("q-card-actions"),g=(0,i.g2)("q-toolbar"),m=(0,i.g2)("vue-pdf-embed"),_=(0,i.g2)("q-card-section"),f=(0,i.g2)("q-card"),b=(0,i.g2)("Loader"),v=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(f,null,{default:(0,i.k6)((()=>[(0,i.bF)(g,{class:"primary-toolbar"},{default:(0,i.k6)((()=>[(0,i.bF)(n,null,{default:(0,i.k6)((()=>[(0,i.Lk)("span",te,(0,h.v_)(e.$t("preview")),1)])),_:1}),(0,i.bF)(p,{align:"right"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",oe,[(0,i.Lk)("span",ie,(0,h.v_)(e.$t("doc2light.pages.page")),1),(0,i.bF)(r,{vertical:""}),(0,i.bF)(d,{dense:"",borderless:"",modelValue:e.inputPage,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.inputPage=t),t[1]||(t[1]=e=>{this.changePage(e)})],style:{width:"30px","margin-left":"5px"}},null,8,["modelValue"]),(0,i.bF)(r,{vertical:""}),(0,i.Lk)("span",ae,(0,h.v_)(e.$t("doc2light.pages.of")+" "+e.pageCount),1),(0,i.bF)(r,{vertical:""}),(0,i.bF)(c,{flat:"",icon:"navigate_before",style:{width:"20px"},onClick:t[2]||(t[2]=t=>this.changePage(e.inputPage-1))}),(0,i.bF)(r,{vertical:""}),(0,i.bF)(c,{flat:"",icon:"navigate_next",style:{width:"20px"},onClick:t[3]||(t[3]=t=>this.changePage(e.inputPage+1))})]),(0,i.bF)(u),(0,i.bo)((0,i.bF)(c,{label:e.$t("edit"),onClick:e.goToDocument,color:"primary",class:"q-mr-sm primary-gradient",unelevated:""},null,8,["label","onClick"]),[[v]])])),_:1})])),_:1}),le,(0,i.bF)(_,null,{default:(0,i.k6)((()=>[e.image?((0,i.uX)(),(0,i.CE)("div",se,[(0,i.bF)(m,{ref:"pdfRef",source:e.image,style:{"max-height":"72vh"},page:e.page,onRendered:t[4]||(t[4]=t=>e.getRef())},null,8,["source","page"])])):(0,i.Q3)("",!0)])),_:1})])),_:1}),(0,i.bF)(b)],64)}var re=o(8420),de=o(46162),ce=o(97912),ue=o(82303),pe=o(85487),he=function(e,t,o,i){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(t){l(t)}}function n(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?o(e.value):a(e.value).then(s,n)}r((i=i.apply(e,t||[])).next())}))};const ge=(0,i.pM)({el:"#app",mixins:[p.A,c.A],props:["id"],components:{Loader:re.A,VuePdfEmbed:ce.A,CancelBtn:M.A},data(){return{}},mounted(){this.imageHandler()},methods:{changePage(e){Number(e)<=this.pageCount?(this.inputPage=e,this.page=Number(e)):this.showErrorToast("Select a valid page")},goToDocument(){this.$router.push("/alfred/document/"+this.id)},imageHandler(){return he(this,void 0,void 0,(function*(){this.showLoading();var e=this.id;const t=yield(0,de.L3)();try{const o=yield ue.A.get((0,pe.MV)(de.FH.download_doc+"/"+e),{responseType:"blob",headers:{Authorization:t}});this.filedata=o.data,this.image=URL.createObjectURL(new Blob([o.data,e+".pdf",o.headers["content-type"]]))}catch(o){logInfo(o),this.showErrorToast("There was an issue getting the pdf")}this.hideLoading()}))},getRef(){this.pageCount=this.$refs["pdfRef"].pageCount}},setup(){return{pageCount:(0,u.KR)(1),image:(0,u.KR)(""),page:(0,u.KR)(1),inputPage:(0,u.KR)(1),filedata:(0,u.KR)()}}});var me=o(10386),_e=o(67837);const fe=(0,I.A)(ge,[["render",ne],["__scopeId","data-v-46954f87"]]),be=fe;G()(ge,"components",{QCard:W.A,QToolbar:O.A,QToolbarTitle:U.A,QCardActions:z.A,QSeparator:me.A,QInput:_e.A,QBtn:j.A,QCardSection:Y.A}),G()(ge,"directives",{ClosePopup:H.A});var ve=o(93760),ke=function(e,t,o,i){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(t){l(t)}}function n(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?o(e.value):a(e.value).then(s,n)}r((i=i.apply(e,t||[])).next())}))};const we=(0,i.pM)({data(){return{}},props:{},components:{LexOfficeExport:Z,DeleteQfab:ve.A,FolderView:q.A,DocumentPreview:be},mixins:[p.A,c.A],methods:{ShowDocPreview(e){this.preview_doc_id=e.id,this.preview_doc=!0},replaceEmpty(e){return e||(e="-"),e},onRowClick(e){this.$router.push("/alfred/document/"+e)},deleteMarked(e){this.showLoading(),e.forEach((e=>ke(this,void 0,void 0,(function*(){yield this.delete_doc(e)})))),this.doc_skip=0,this.hideLoading()},onTrashbinClick(e){this.delete_doc(e),this.resetFilter()},onDownloadClick(e){return ke(this,void 0,void 0,(function*(){yield T.QR.download_doc(e.id).then((t=>{var o=document.createElement("a");e["name"].endsWith(".pdf")?o.download=e["name"]:o.download=e["name"]+".pdf",o.href=t,document.body.appendChild(o),o.click(),document.body.removeChild(o)}))}))},changeAction(){!0===this.headerCheckbox?this.selectAllRows():(this.resetAllSelectedRows(),this.headerFabIcon=!1)},selectionList(e){const t=this.selection.indexOf(e.id);t>-1?(this.selection.splice(t,1),this.document_list[e.id].rowSelection=!1,this.selection.length<1&&(this.headerFabIcon=!1)):(this.selection.push(e.id),this.document_list[e.id].rowSelection=!0)},selectAllRows(){this.headerCheckbox=!0;for(const[e,t]of Object.entries(this.document_list))this.document_list[e].rowSelection=!0,this.selection.push(e)},resetAllSelectedRows(){this.selection=[],this.headerCheckbox=!1;for(const[e,t]of Object.entries(this.document_list))this.document_list[e].rowSelection=!1},setupDropdowns(){for(const[e,t]of Object.entries(this.apidata.correspondentData.data))this.correspondents.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.docTypeData.data))this.doc_types.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.tagData.data))this.tags.push({value:t.id,label:t.name})},resetFilter(){this.assignee_filter="",this.doc_type_filter="",this.tag_filter="",this.search_filter="",this.applyFilter()},applyFilter(){return ke(this,void 0,void 0,(function*(){this.queryParams="",this.quickFilterMap.clear(),this.queryParams+="?limit=18",this.queryParams+="&skip="+this.doc_skip.toString(),this.assignee_filter&&(this.quickFilterMap.set("assignee",this.assignee_filter),this.queryParams+="&correspondent="+this.assignee_filter.value),this.doc_type_filter&&(this.quickFilterMap.set("doc_type",this.doc_type_filter),this.queryParams+="&doc_type="+this.doc_type_filter.value),this.tag_filter&&(this.quickFilterMap.set("tags",this.tag_filter),this.queryParams+="&tags="+this.tag_filter.value),""!==this.search_filter&&(this.quickFilterMap.set("searchInput",this.search_filter),this.queryParams+="&name_filter="+this.search_filter.trim()),yield this.setDocumentsDashboard(this.queryParams),this.prepareDashboard(),this.document_list=this.apidata.dashboardDocs.docs,this.resetAllSelectedRows()}))},formateDate(e,t){return K.Ay.formatDate(e,t)},color_check(e){if(null==e)return"black";var t=e.substring(1),o=parseInt(t,16),i=o>>16&255,a=o>>8&255,l=255&o,s=.2126*i+.7152*a+.0722*l;return s<40?"white":"black"},getOrgStoreData(){this.showLoading();try{this.hideLoading(),logInfo("SELECTION_DASHBOARD",this.selection),this.uploadpopup=!0}catch(e){this.showErrorToast("Something Failed"),this.hideLoading()}}},setup(){const e=(0,A.C4)(),{loadStoreContent:t}=e,o=(0,P.bP)(e),i=(0,A.GX)(),{prepareDashboard:a,setDocumentsDashboard:l,loadFromServer:s,delete_doc:n,setCorrespondentsFromServer:r,setTagsFromServer:d,setDocTypesfromServer:c,change_pagecount:p,getCurrentPageCount:h}=i,g=(0,P.bP)(i);return{loadStoreContent:t,getCurrentPageCount:h,change_pagecount:p,space_apidata:(0,u.KR)(o),apidata:(0,u.KR)(g),preview_doc_id:(0,u.KR)(""),prepareDashboard:a,setDocumentsDashboard:l,loadFromServer:s,delete_doc:n,setCorrespondentsFromServer:r,setDocTypesfromServer:c,setTagsFromServer:d,document_list:(0,u.KR)({}),view:(0,u.KR)("list"),selection:(0,u.KR)([]),headerCheckbox:(0,u.KR)(!1),headerFabIcon:(0,u.KR)(!1),showFilter:(0,u.KR)(!1),preview_doc:(0,u.KR)(!1),correspondents:(0,u.KR)([]),doc_types:(0,u.KR)([]),tags:(0,u.KR)([]),search_filter:(0,u.KR)(""),tag_filter:(0,u.KR)(),assignee_filter:(0,u.KR)(),doc_type_filter:(0,u.KR)(),quickFilterMap:(0,u.KR)(new Map),queryParams:(0,u.KR)(""),skip:(0,u.KR)(1),doc_skip:(0,u.KR)(0),store:(0,u.KR)({}),folders:(0,u.KR)([]),uploadpopup:(0,u.KR)(!1),lexofficepopup:(0,u.KR)(!1),selected:(0,u.KR)(null)}}});var ye=o(857),xe=o(42315),Fe=o(80460),Ce=o(54782),De=o(20284),Re=o(97410),Le=o(48958),Ke=o(66760),qe=o(54700),Ae=o(82156);const Pe=(0,I.A)(we,[["render",L]]),Qe=Pe;G()(we,"components",{QMarkupTable:ye.A,QTable:xe.A,QCheckbox:Fe.A,QFab:Ce.A,QFabAction:De.A,QTooltip:Re.A,QScrollArea:Le.A,QChip:Ke.A,QPagination:qe.A,QDialog:Ae.A});const Se={class:"full-width",style:{"margin-top":"10px"}},Te={key:0,style:{"margin-left":"15px",width:"120px",height:"120px"}},Ve=["onClick"],Me={key:1,style:{"margin-left":"15px",width:"120px",height:"120px"}},$e=(0,i.Lk)("hr",null,null,-1),Ee={dense:"",class:"name"},Xe={dense:"",class:"date"},Ie=(0,i.Lk)("hr",null,null,-1),We={class:"row"},Oe=(0,i.Lk)("div",{class:"col-1"},null,-1);function Ue(e,t,o,a,l,s){const n=(0,i.g2)("q-img"),r=(0,i.g2)("q-btn"),d=(0,i.g2)("q-card"),c=(0,i.g2)("q-table");return(0,i.uX)(),(0,i.CE)("div",Se,[(0,i.bF)(c,{grid:"",class:"card-container-class",rows:e.document_list,"no-data-label":e.$t("pages.messages.no_record_found"),"row-key":"doc_id","rows-per-page-options":[14]},{item:(0,i.k6)((t=>[(0,i.bF)(d,{id:"table",flat:"",ref:"table",class:"q-ma-sm tileBGColor",style:{width:"150px",height:"215px",border:"1px solid"}},{default:(0,i.k6)((()=>["error"==t.row.image_data?((0,i.uX)(),(0,i.CE)("div",Te,[(0,i.Lk)("div",{class:"text-center",onClick:o=>e.onRowClick(t.row)}," No Image found! "+(0,h.v_)(t.row.image_data),9,Ve)])):((0,i.uX)(),(0,i.CE)("div",Me,[(0,i.bF)(n,{src:t.row.image,onClick:o=>e.onRowClick(t.row),style:{"max-height":"120px"}},null,8,["src","onClick"])])),$e,(0,i.Lk)("div",Ee,(0,h.v_)(t.row.name),1),(0,i.Lk)("div",Xe,(0,h.v_)(t.row.created_on?e.formateDate(t.row.created_on,"YYYY-MM-DD HH:mm:ss"):"-"),1),Ie,(0,i.Lk)("div",We,[Oe,(0,i.bF)(r,{style:{"margin-bottom":"3px",width:"35px",height:"15px","margin-left":"10px"},class:"col-3",icon:"download",dense:"",flat:"",onClick:o=>e.onDownloadClick(t.row)},null,8,["onClick"]),(0,i.bF)(r,{style:{"margin-bottom":"3px",width:"35px",height:"30px"},class:"col-4",icon:"edit",size:"8px",dense:"",flat:"",onClick:o=>e.onRowClick(t.row)},null,8,["onClick"]),(0,i.bF)(r,{style:{"margin-bottom":"3px",width:"35px",height:"30px"},class:"col-3",icon:"delete_outline",size:"8px",dense:"",flat:"",onClick:o=>e.onTrashbinClick(t.row)},null,8,["onClick"])])])),_:2},1536)])),_:1},8,["rows","no-data-label"])])}var je=function(e,t,o,i){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(t){l(t)}}function n(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?o(e.value):a(e.value).then(s,n)}r((i=i.apply(e,t||[])).next())}))};const Ye=(0,i.pM)({data(){return{showIcons:!1,supportURL:de.cK}},props:[],components:{},mixins:[c.A],mounted(){for(const[e,t]of Object.entries(this.apidata.dashboardDocs.docs))this.initView(e,t);this.setupDropdowns()},methods:{initView(e,t){return je(this,void 0,void 0,(function*(){try{t["image_data"]=yield this.get_doc_thumbnail(e),"error"!=t["image_data"]&&(t["image"]=URL.createObjectURL(t["image_data"]))}catch(o){t["image_data"]="There was an error"}this.document_list.push(t),this.show_image=!0}))},formateDate(e,t){return K.Ay.formatDate(e,t)},onRowClick(e){this.$router.push("/alfred/document/"+e.id)},onTrashbinClick(e){return je(this,void 0,void 0,(function*(){yield this.delete_doc(e.id)}))},onDownloadClick(e){return je(this,void 0,void 0,(function*(){yield T.QR.download_doc(e.id).then((t=>{var o=document.createElement("a");e["name"].endsWith(".pdf")?o.download=e["name"]:o.download=e["name"]+".pdf",o.href=t,document.body.appendChild(o),o.click(),document.body.removeChild(o)}))}))},setupDropdowns(){for(const[e,t]of Object.entries(this.apidata.correspondentData.data))this.correspondents.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.docTypeData.data))this.doc_types.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.tagData.data))this.tags.push({value:t.id,label:t.name})},removeTag(e,t){return je(this,void 0,void 0,(function*(){yield this.remove_tag_from_doc(e.id,t.id)}))},color_check(e){if(null==e)return"black";var t=e.substring(1),o=parseInt(t,16),i=o>>16&255,a=o>>8&255,l=255&o,s=.2126*i+.7152*a+.0722*l;return s<40?"white":"black"}},setup(){const e=(0,A.GX)(),t=(0,P.bP)(e),{setDocumentsDashboard:o,delete_doc:i,get_doc_thumbnail:a,remove_tag_from_doc:l}=e;return{show_image:(0,u.KR)(!1),apidata:(0,u.KR)(t),setDocumentsDashboard:o,delete_doc:i,get_doc_thumbnail:a,remove_tag_from_doc:l,view:(0,u.KR)("list"),document_list:(0,u.KR)([]),showFilter:(0,u.KR)(!1),correspondents:(0,u.KR)([]),doc_types:(0,u.KR)([]),tags:(0,u.KR)([]),search_filter:(0,u.KR)(""),tag_filter:(0,u.KR)(),assignee_filter:(0,u.KR)(),doc_type_filter:(0,u.KR)(),quickFilterMap:(0,u.KR)(new Map),queryParams:(0,u.KR)(""),paginationCount:(0,u.KR)(1),skip:(0,u.KR)(1),doc_skip:(0,u.KR)(0)}}});var Be=o(15046);const ze=(0,I.A)(Ye,[["render",Ue]]),He=ze;G()(Ye,"components",{QTable:xe.A,QCard:W.A,QImg:Be.A,QChip:Ke.A,QBtn:j.A});const Ne={class:"full-width",style:{"margin-top":"10px","margin-bottom":"100px"}},Ge={class:"row"},Je={key:0,class:"col-3",style:{"margin-left":"5px"}},Ze=["onClick"],et={key:1,class:"col-3",style:{"margin-left":"5px"}},tt={class:"col-8"},ot={class:"row",style:{"font-size":"15px","margin-bottom":"10px"}},it={class:"col-5 name_tags",style:{"margin-left":"10px"}},at={class:"col-5 name_tags"},lt={style:{"margin-left":"8px",height:"120px"}},st={class:"content"},nt={style:{"margin-top":"3px","margin-left":"10px"}},rt={class:"row"},dt={class:"col-3"},ct={class:"name_tags"},ut=(0,i.Lk)("div",{class:"col-1"},null,-1),pt={class:"col-3"},ht={class:"name_tags"},gt=(0,i.Lk)("div",{class:"col-1"},null,-1),mt={class:"col-3"},_t={class:"row",style:{"font-size":"12px","margin-top":"5px"}},ft={style:{"margin-right":"40px"}},bt={class:"text-center",style:{"border-left":"2px solid grey"}};function vt(e,t,o,a,l,s){const n=(0,i.g2)("q-img"),r=(0,i.g2)("q-chip"),d=(0,i.g2)("q-icon"),c=(0,i.g2)("q-btn"),u=(0,i.g2)("q-card"),p=(0,i.g2)("q-table");return(0,i.uX)(),(0,i.CE)("div",Ne,[(0,i.bF)(p,{grid:"",class:"card-container-class",rows:e.document_list,"row-key":"doc_id","no-data-label":e.$t("pages.messages.no_record_found"),"rows-per-page-options":[6]},{item:(0,i.k6)((t=>[(0,i.bF)(u,{id:"table",ref:"table",flat:"",class:"q-ma-sm tileBGColor",style:{height:"220px",width:"48%",border:"2px solid grey"}},{default:(0,i.k6)((()=>[(0,i.Lk)("div",Ge,["error"==t.row.image_data?((0,i.uX)(),(0,i.CE)("div",Je,[(0,i.Lk)("div",{class:"text-center",onClick:o=>e.onRowClick(t.row),style:{height:"216px"}}," No Image found! ",8,Ze)])):((0,i.uX)(),(0,i.CE)("div",et,[(0,i.bF)(n,{src:t.row.image,onClick:o=>e.onRowClick(t.row),style:{height:"216px"}},null,8,["src","onClick"])])),(0,i.Lk)("div",tt,[(0,i.Lk)("div",ot,[(0,i.Lk)("span",it,(0,h.v_)(t.row.name),1),(0,i.Lk)("span",at,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.row.tags,(o=>((0,i.uX)(),(0,i.Wv)(r,{key:o.id,dense:"",style:(0,h.Tr)([{height:"18px"},{"background-color":o.color,color:e.color_check(o.color)}]),removable:"",onRemove:i=>e.removeTag(t.row,o)},{default:(0,i.k6)((()=>[(0,i.eW)((0,h.v_)(o.name),1)])),_:2},1032,["style","onRemove"])))),128))])]),(0,i.Lk)("div",lt,[(0,i.Lk)("div",st,(0,h.v_)(t.row.content),1)]),(0,i.Lk)("div",nt,[(0,i.Lk)("div",rt,[(0,i.Lk)("div",dt,[(0,i.Lk)("div",ct,[(0,i.bF)(d,{name:"description"}),(0,i.eW)(" "+(0,h.v_)(t.row.doc_type.name),1)])]),ut,(0,i.Lk)("div",pt,[(0,i.Lk)("div",ht,[(0,i.bF)(d,{name:"message"}),(0,i.eW)(" "+(0,h.v_)(t.row.correspondent.name),1)])]),gt,(0,i.Lk)("div",mt,[(0,i.Lk)("div",null,[(0,i.bF)(d,{name:"folder"}),(0,i.eW)(" "+(0,h.v_)(t.row.path),1)])])]),(0,i.Lk)("div",_t,[(0,i.Lk)("div",ft,(0,h.v_)(e.$t("doc2light.table.created_on")+" ")+" "+(0,h.v_)(t.row.created_on?e.formateDate(t.row.created_on,"YYYY-MM-DD HH:mm"):"-"),1),(0,i.eW)(" "+(0,h.v_)(e.$t("doc2light.table.modified_at")+" ")+" "+(0,h.v_)(t.row.last_modified?e.formateDate(t.row.last_modified,"YYYY-MM-DD"):"-"),1)])])]),(0,i.Lk)("div",bt,[(0,i.Lk)("div",null,[(0,i.bF)(c,{style:{"margin-top":"50px","margin-bottom":"15px"},flat:"",icon:"download","text-color":"primary",size:"15px",dense:"",onClick:o=>e.onDownloadClick(t.row)},null,8,["onClick"])]),(0,i.Lk)("div",null,[(0,i.bF)(c,{style:{"margin-bottom":"15px"},flat:"","text-color":"primary",icon:"edit",size:"15px",dense:"",onClick:o=>e.onRowClick(t.row)},null,8,["onClick"])]),(0,i.Lk)("div",null,[(0,i.bF)(c,{flat:"","text-color":"primary",icon:"delete_outline",size:"15px",dense:"",onClick:o=>e.onTrashbinClick(t.row)},null,8,["onClick"])])])])])),_:2},1536)])),_:1},8,["rows","no-data-label"])])}var kt=function(e,t,o,i){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(t){l(t)}}function n(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?o(e.value):a(e.value).then(s,n)}r((i=i.apply(e,t||[])).next())}))};const wt=(0,i.pM)({data(){return{showIcons:!1,supportURL:de.cK}},props:{},components:{},mounted(){for(const[e,t]of Object.entries(this.apidata.dashboardDocs.docs))this.initView(e,t);this.setupDropdowns()},methods:{initView(e,t){return kt(this,void 0,void 0,(function*(){try{t["image_data"]=yield this.get_doc_thumbnail(e),"error"!=t["image_data"]&&(t["image"]=URL.createObjectURL(t["image_data"]))}catch(o){t["image_data"]="error"}try{t["content"]=yield this.getOcrText(e),null==t["content"]&&(t["content"]="There was an error!")}catch(o){t["content"]="There was an error!"}this.document_list.push(t),this.show_image=!0}))},getOcrText(e){return kt(this,void 0,void 0,(function*(){const t=yield T.QR.get_doc_text(e);return t.data.text}))},formateDate(e,t){return K.Ay.formatDate(e,t)},onRowClick(e){this.$router.push("/alfred/document/"+e.id)},onTrashbinClick(e){return kt(this,void 0,void 0,(function*(){yield this.delete_doc(e.id)}))},removeTag(e,t){return kt(this,void 0,void 0,(function*(){yield this.remove_tag_from_doc(e.id,t.id)}))},onDownloadClick(e){return kt(this,void 0,void 0,(function*(){yield T.QR.download_doc(e.id).then((t=>{var o=document.createElement("a");e["name"].endsWith(".pdf")?o.download=e["name"]:o.download=e["name"]+".pdf",o.href=t,document.body.appendChild(o),o.click(),document.body.removeChild(o)}))}))},setupDropdowns(){for(const[e,t]of Object.entries(this.apidata.correspondentData.data))this.correspondents.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.docTypeData.data))this.doc_types.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.tagData.data))this.tags.push({value:t.id,label:t.name})},resetFilter(){this.assignee_filter="",this.doc_type_filter="",this.tag_filter="",this.search_filter="",this.applyFilter()},applyFilter(){return kt(this,void 0,void 0,(function*(){this.queryParams="",this.quickFilterMap.clear(),this.queryParams+="?limit=6",this.queryParams+="&skip="+this.doc_skip.toString(),this.assignee_filter&&(this.quickFilterMap.set("assignee",this.assignee_filter),this.queryParams+="&correspondent="+this.assignee_filter.value),this.doc_type_filter&&(this.quickFilterMap.set("doc_type",this.doc_type_filter),this.queryParams+="&doc_type="+this.doc_type_filter.value),this.tag_filter&&(this.quickFilterMap.set("tags",this.tag_filter),this.queryParams+="&tags="+this.tag_filter.value),""!==this.search_filter&&(this.quickFilterMap.set("searchInput",this.search_filter),this.queryParams+="&name_filter="+this.search_filter.trim()),yield this.setDocumentsDashboard(this.queryParams);for(const[e,t]of Object.entries(this.apidata.dashboardDocs.docs))this.initView(e,t)}))},loadNext(){this.doc_skip=5*(this.paginationCount-1),this.resetFilter()},color_check(e){if(null==e)return"black";var t=e.substring(1),o=parseInt(t,16),i=o>>16&255,a=o>>8&255,l=255&o,s=.2126*i+.7152*a+.0722*l;return s<40?"white":"black"}},setup(){const e=(0,A.GX)(),t=(0,P.bP)(e),{setDocumentsDashboard:o,delete_doc:i,get_doc_thumbnail:a,remove_tag_from_doc:l}=e;return{show_image:(0,u.KR)(!1),apidata:(0,u.KR)(t),setDocumentsDashboard:o,delete_doc:i,get_doc_thumbnail:a,remove_tag_from_doc:l,view:(0,u.KR)("list"),document_list:(0,u.KR)([]),showFilter:(0,u.KR)(!1),correspondents:(0,u.KR)([]),doc_types:(0,u.KR)([]),tags:(0,u.KR)([]),showTags:(0,u.KR)(!0),search_filter:(0,u.KR)(""),tag_filter:(0,u.KR)(),assignee_filter:(0,u.KR)(),doc_type_filter:(0,u.KR)(),quickFilterMap:(0,u.KR)(new Map),queryParams:(0,u.KR)(""),paginationCount:(0,u.KR)(1),skip:(0,u.KR)(1),doc_skip:(0,u.KR)(0)}}});var yt=o(50492);const xt=(0,I.A)(wt,[["render",vt]]),Ft=xt;G()(wt,"components",{QTable:xe.A,QCard:W.A,QImg:Be.A,QChip:Ke.A,QIcon:yt.A,QBtn:j.A});var Ct=o(31123),Dt=function(e,t,o,i){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(t){l(t)}}function n(e){try{r(i["throw"](e))}catch(t){l(t)}}function r(e){e.done?o(e.value):a(e.value).then(s,n)}r((i=i.apply(e,t||[])).next())}))};const Rt=(0,i.pM)({data(){return{}},components:{Dashboard_Middle_List:Qe,Dashboard_Middle_Preview:He,Dashboard_Middle_Preview_Text:Ft,DefaultBtn:Ct.A},mixins:[p.A,c.A],mounted(){this.initView()},methods:{initView(){return Dt(this,void 0,void 0,(function*(){yield this.loadFromServer(),this.resetAllSelectedRows(),this.setupDropdowns()}))},loadNext(){this.showLoading(),this.doc_skip=18*(this.paginationCount-1),this.change_pagecount(this.paginationCount),this.applyFilter(),this.hideLoading()},applyFilter(){return Dt(this,void 0,void 0,(function*(){this.queryParams="",this.quickFilterMap.clear(),this.queryParams+="?limit=18",this.queryParams+="&skip="+this.doc_skip.toString(),this.assignee_filter&&(this.quickFilterMap.set("assignee",this.assignee_filter),this.queryParams+="&correspondent="+this.assignee_filter.value),this.doc_type_filter&&(this.quickFilterMap.set("doc_type",this.doc_type_filter),this.queryParams+="&doc_type="+this.doc_type_filter.value),this.tag_filter&&(this.quickFilterMap.set("tags",this.tag_filter),this.queryParams+="&tags="+this.tag_filter.value),""!==this.search_filter&&(this.quickFilterMap.set("searchInput",this.search_filter),this.queryParams+="&name_filter="+this.search_filter.trim()),""!==this.full_text_search_filter&&(this.quickFilterMap.set("fullTextSearch",this.full_text_search_filter),this.queryParams+="&content_filter="+this.full_text_search_filter),this.time_period_filter&&(this.quickFilterMap.set("time_filter",this.time_period_filter.value),this.queryParams+="&time_filter="+this.time_period_filter.value),yield this.setDocumentsDashboard(this.queryParams),this.prepareDashboard(),this.document_list=this.apidata.dashboardDocs.docs,this.resetAllSelectedRows()}))},setupDropdowns(){for(const[e,t]of Object.entries(this.apidata.correspondentData.data))this.correspondents.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.docTypeData.data))this.doc_types.push({value:t.id,label:t.name});for(const[e,t]of Object.entries(this.apidata.tagData.data))this.tags.push({value:t.id,label:t.name})},allowDrop(e){e.preventDefault(),e.currentTarget.classList.add("bg-grey-5"),e.currentTarget.classList.add("bd-shadow")},drop(e){e.preventDefault(),e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow"),logInfo(e.dataTransfer.files),this.uploadFile(e.dataTransfer.files)},dragLeave(e){e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow")},uploadFile(e){return Dt(this,void 0,void 0,(function*(){this.showLoading();for(const i in e)try{let o=new FormData;var t=e[i];logInfo(t),o.append("file",t),yield T.QR.create_doc(o)}catch(o){logInfo(o)}this.hideLoading(),yield this.setDocumentsDashboard("?limit=18")}))},resetFilter(){this.assignee_filter="",this.doc_type_filter="",this.tag_filter="",this.search_filter="",this.full_text_search_filter="",this.time_period_filter=null,this.applyFilter()},resetAllSelectedRows(){this.selection=[],this.headerCheckbox=!1;for(const[e,t]of Object.entries(this.document_list))this.document_list[e].rowSelection=!1}},setup(){const e=(0,A.GX)(),{prepareDashboard:t,setDocumentsDashboard:o,loadFromServer:i,delete_doc:a,setCorrespondentsFromServer:l,setTagsFromServer:s,setDocTypesfromServer:n,getCurrentPageCount:r,change_pagecount:d}=e,c=(0,P.bP)(e);return{prepareDashboard:t,change_pagecount:d,getCurrentPageCount:r,setDocumentsDashboard:o,loadFromServer:i,delete_doc:a,setCorrespondentsFromServer:l,setDocTypesfromServer:n,setTagsFromServer:s,apidata:(0,u.KR)(c),view:(0,u.KR)("list"),showIcons:(0,u.KR)(!0),showMenu:(0,u.KR)(!1),search_filter:(0,u.KR)(""),full_text_search_filter:(0,u.KR)(""),tag_filter:(0,u.KR)(),assignee_filter:(0,u.KR)(),doc_type_filter:(0,u.KR)(),time_period_filter:(0,u.KR)(),paginationCount:(0,u.KR)(r),quickFilterMap:(0,u.KR)(new Map),queryParams:(0,u.KR)(""),doc_skip:(0,u.KR)(0),document_list:(0,u.KR)({}),selection:(0,u.KR)([]),headerCheckbox:(0,u.KR)(!1),showFilter:(0,u.KR)(!1),correspondents:(0,u.KR)([]),doc_types:(0,u.KR)([]),tags:(0,u.KR)([])}}});var Lt=o(93676),Kt=o(84436),qt=o(53999),At=o(90124);const Pt=(0,I.A)(Rt,[["render",d],["__scopeId","data-v-0137363e"]]),Qt=Pt;G()(Rt,"components",{QInput:_e.A,QBtn:j.A,QSelect:B.A,QSpace:Lt.A,QIcon:yt.A,QMenu:Kt.A,QList:qt.A,QItem:At.A,QPagination:qe.A}),G()(Rt,"directives",{ClosePopup:H.A})}}]);