"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[9902],{89902:(t,e,i)=>{i.r(e),i.d(e,{default:()=>at});var o=i(59835),n=i(86970),s=i(61957);const a=t=>((0,o.dD)("data-v-f338945e"),t=t(),(0,o.Cn)(),t),l={key:0,class:"container"},r={style:{"text-align":"center","line-height":"35px","letter-spacing":"2px"}},c=a((()=>(0,o._)("br",null,null,-1))),d=(0,o.Uk)(),u=a((()=>(0,o._)("br",null,null,-1))),p=a((()=>(0,o._)("br",null,null,-1))),g={class:"container"},_={class:"row full-width"},f={class:"col-sm-12 col-md-12 col-lg-12"},h={class:"table-header-text"},m={style:{width:"5%"}},w={class:"text-left"},y={class:"text-left"},x={class:"text-left"},b={class:"text-left"},C={class:"text-center"},k={class:"text-red"},v={key:1},S={colspan:"5",class:"text-h4 text-center"},W={class:"q-ml-sm"};function E(t,e,i,a,E,T){const D=(0,o.up)("SubHeader"),Z=(0,o.up)("f-btn"),$=(0,o.up)("BackToSettings"),z=(0,o.up)("q-btn"),L=(0,o.up)("q-item-section"),O=(0,o.up)("q-item"),q=(0,o.up)("q-separator"),Q=(0,o.up)("q-list"),I=(0,o.up)("q-menu"),F=(0,o.up)("q-markup-table"),N=(0,o.up)("Loader"),H=(0,o.up)("export-dialog"),M=(0,o.up)("q-dialog"),R=(0,o.up)("q-avatar"),U=(0,o.up)("q-card-section"),A=(0,o.up)("q-card-actions"),P=(0,o.up)("q-card"),B=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(D,{name:"export_settings",label:t.$t("export_settings")},null,8,["label"]),(0,o.Wm)($,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"float-right",icon:"add","data-cy":"add-integration-button",onClick:e[0]||(e[0]=e=>t.addNewConfig()),label:t.$t("new")},null,8,["label"])])),_:1}),t.configurations?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("div",r,[(0,o.Wm)(z,{style:{"margin-bottom":"20px","pointer-events":"none"},size:"25px",round:"",class:"integration-icon",icon:"upload"}),c,(0,o._)("b",null,(0,n.zw)(t.$t("pages.export.heading")),1),d,u,(0,o.Uk)(" "+(0,n.zw)(t.$t("pages.export.subheading"))+" ",1),p,(0,o.Wm)(z,{style:{"margin-top":"20px","letter-spacing":"2px"},color:"primary",label:t.$t("pages.export.addintegration"),onClick:e[1]||(e[1]=e=>t.addNewConfig())},null,8,["label"])])])),(0,o._)("div",g,[(0,o._)("div",_,[(0,o._)("div",f,[(0,o.Wm)(F,{flat:"",class:"dashboard-table-style back-white"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",h,[(0,o._)("th",null,(0,n.zw)(t.$t("pages.export.title")),1),(0,o._)("th",null,(0,n.zw)(t.$t("pages.export.doc_type")),1),(0,o._)("th",null,(0,n.zw)(t.$t("sub_organizations")),1),(0,o._)("th",null,(0,n.zw)(t.$t("pages.export.export_method")),1),(0,o._)("th",m,(0,n.zw)(t.$t("pages.export.actions")),1)])]),(0,o._)("tbody",null,[t.configurations?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(t.configurations,(i=>((0,o.wg)(),(0,o.iD)("tr",{key:i.id,class:(0,n.C_)(i.is_active?"":"email-import-deactive-column")},[(0,o._)("td",w,(0,n.zw)(i.title),1),(0,o._)("td",y,(0,n.zw)(t.getDocTypeLabel(i)),1),(0,o._)("td",x,(0,n.zw)(t.getSubOrgName(i)),1),(0,o._)("td",b,(0,n.zw)(i.export_method),1),(0,o._)("td",C,[(0,o.Wm)(z,{flat:"",dense:"",round:"",onClick:e[2]||(e[2]=(0,s.iM)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{persistent:"","auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{dense:"",style:{"min-width":"100px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(O,{clickable:""},{default:(0,o.w5)((()=>[i.is_active?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(L,{key:0,onClick:e=>t.handleDisability(i,i.is_active)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.$t("activate")),1)])),_:2},1032,["onClick"])),i.is_active?((0,o.wg)(),(0,o.j4)(L,{key:1,onClick:e=>t.handleDisability(i,i.is_active)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.$t("deactivate")),1)])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])),_:2},1024),(0,o.Wm)(O,{clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{onClick:e=>t.editConfiguration(i)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.$t("edit")),1)])),_:2},1032,["onClick"])])),_:2},1024),t.test_connection_types.includes(i.export_method)?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(q,{inset:""}),(0,o.Wm)(O,{clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{onClick:e=>t.testConnection(i)},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,n.zw)(t.$t("test_connection")),1)])),_:2},1032,["onClick"])])),_:2},1024)],64)):(0,o.kq)("",!0),(0,o.Wm)(q,{inset:""}),(0,o.Wm)(O,{clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{onClick:e=>{t.deleteConfirmation=!0,t.configId=i.id}},{default:(0,o.w5)((()=>[(0,o._)("span",k,(0,n.zw)(t.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])],2)))),128)):((0,o.wg)(),(0,o.iD)("tr",v,[(0,o._)("td",S,(0,n.zw)(t.$t("no_configurations")),1)]))])])),_:1})])])]),(0,o.Wm)(N),(0,o.Wm)(M,{modelValue:t.display_config_dialog,"onUpdate:modelValue":e[3]||(e[3]=e=>t.display_config_dialog=e),persistent:"",onKeydown:e[4]||(e[4]=(0,s.D2)((e=>t.display_config_dialog=!1),["esc"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(H)])),_:1},8,["modelValue"]),(0,o.Wm)(M,{modelValue:t.deleteConfirmation,"onUpdate:modelValue":e[6]||(e[6]=e=>t.deleteConfirmation=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(P,null,{default:(0,o.w5)((()=>[(0,o.Wm)(U,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,o.w5)((()=>[(0,o.Wm)(R,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(U,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o._)("span",W,(0,n.zw)(t.$t("pages.export.sure")),1)])),_:1}),(0,o.Wm)(A,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(z,{flat:"",label:t.$t("cancel"),"data-cy":"cancel-card",color:"primary"},null,8,["label"]),[[B]]),(0,o.wy)((0,o.Wm)(z,{flat:"",label:t.$t("delete"),"data-cy":"done-card",color:"primary",onClick:e[5]||(e[5]=e=>t.deleteConfiguration())},null,8,["label"]),[[B]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var T=i(49990),D=i(60499),Z=i(31921),$=i(70501),z=i(17256),L=i(43572),O=i(16308),q=i(46624),Q=i(7363),I=i(60937),F=i(49341),N=i(37446),H=function(t,e,i,o){function n(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,s){function a(t){try{r(o.next(t))}catch(e){s(e)}}function l(t){try{r(o["throw"](t))}catch(e){s(e)}}function r(t){t.done?i(t.value):n(t.value).then(a,l)}r((o=o.apply(t,e||[])).next())}))};const M=(0,o.aZ)({el:"#app",mixins:[T.Z,$.Z,I.Z],components:{Loader:Z.Z,ExportDialog:L.Z,SubHeader:O.Z,BackToSettings:z.Z},data(){return{dialog:!1}},watch:{processing:{handler:function(t,e){!1===t?this.hideLoading():this.showLoading()}},config_saved:{handler:function(t,e){!0===t&&(this.display_config_dialog=!1,this.config_saved=!1,this.getExportConfigurations())}}},mounted(){return H(this,void 0,void 0,(function*(){this.processing=!0,yield this.getSubOrgsList(),this.fillDocTypeAndSubTypesListIfEmpty(),yield this.getExportConfigurations(),this.processing=!1}))},methods:{editConfiguration(t){const e=t.export_method;if(e){this.display_config_dialog=!0;var i=JSON.parse(JSON.stringify(t));this.setSelectedExportForEdit(i)}else this.showErrorToast(this.$t("pages.messages.ERROR_EXPORT_METHOD_NOT_FOUND"))},addNewConfig(){this.configId=0,this.display_config_dialog=!0,this.clearOnlySelectionConfigState()},deleteConfiguration(){return H(this,void 0,void 0,(function*(){try{this.processing=!0,yield F.xS["delete"](this.configId.toString()),this.clearStateForExportDialog(),this.getExportConfigurations()}catch(t){return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void(this.processing=!1)}}))},handleDisability(t,e){return H(this,void 0,void 0,(function*(){try{e=!e,this.processing=!0;const i=yield F.xS.updateActive(t.id.toString(),e);if(!i.success||!0!==i.success)throw{message:i.message};t.is_active=e}catch(i){const t=N.w.getErrorMessage(i);this.showErrorToast(t)}finally{this.processing=!1}}))},getDocTypeLabel(t){const e=this.doc_type_list.find((e=>e.value===t.doc_type));return String(e?e.label:t.doc_type)},getSubOrgName(t){if(!t.sub_org_id)return"";const e=this.subOrgList.find((e=>e.value===t.sub_org_id));return e&&String(e.label)||""},testConnection(t){return H(this,void 0,void 0,(function*(){try{this.showLoading();const e={config_id:t.id};let i;if(t.export_method===this.export_types.SFTP&&(i=yield F.xS.testSFTP(e)),t.export_method===this.export_types.SMB_WITH_JPL&&(i=yield F.xS.testSMB(e)),!1===i.success)throw{message:i.message};this.showSuccessToast(this.$t("test_connection_success"))}catch(e){const t=N.w.getErrorMessage(e);this.showErrorToast(t)}finally{this.hideLoading()}}))}},setup(){const t=(0,q.Fl)(),{getExportConfigurations:e,setSelectedExportForEdit:i,clearStateForExportDialog:o,clearOnlySelectionConfigState:n}=t,{configurations:s,processing:a,display_config_dialog:l,config_saved:r,export_types:c}=(0,Q.Jk)(t),d=(0,q.At)(),{fillDocTypeAndSubTypesListIfEmpty:u,getSubOrgsList:p}=d,{doc_type_list:g,subOrgList:_}=(0,Q.Jk)(d),f=[t.export_types.SFTP,t.export_types.SMB_WITH_JPL];return{export_types:c,subOrgList:_,getSubOrgsList:p,doc_type_list:g,display_config_dialog:l,fillDocTypeAndSubTypesListIfEmpty:u,setSelectedExportForEdit:i,exportConfiguration:(0,D.iH)(),isExportConfigured:!1,deleteConfirmation:(0,D.iH)(!1),configId:0,getExportConfigurations:e,configurations:s,processing:a,clearStateForExportDialog:o,clearOnlySelectionConfigState:n,config_saved:r,test_connection_types:f}}});var R=i(7683),U=i(68879),A=i(66933),P=i(56362),B=i(13246),J=i(490),V=i(76749),j=i(50926),Y=i(46858),K=i(32074),X=i(44458),G=i(63190),tt=i(61357),et=i(11821),it=i(62146),ot=i(69984),nt=i.n(ot);const st=(0,R.Z)(M,[["render",E],["__scopeId","data-v-f338945e"]]),at=st;nt()(M,"components",{QBtn:U.Z,QMarkupTable:A.Z,QMenu:P.Z,QList:B.Z,QItem:J.Z,QItemSection:V.Z,QSeparator:j.Z,QTooltip:Y.Z,QDialog:K.Z,QCard:X.Z,QCardSection:G.Z,QAvatar:tt.Z,QCardActions:et.Z}),nt()(M,"directives",{ClosePopup:it.Z})}}]);