"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[7419],{7419:(e,t,a)=>{a.r(t),a.d(t,{default:()=>re});var l=a(83673);function n(e,t,a,n,o,s){const i=(0,l.up)("Scanner");return(0,l.wg)(),(0,l.j4)(i,{service:e.alfred},null,8,["service"])}var o=a(98880),s=a(62323);const i=e=>((0,l.dD)("data-v-6f3e7b42"),e=e(),(0,l.Cn)(),e),d={id:"services"},r={class:"row"},c={class:"col-9",style:{"margin-top":"2vh"}},u={class:"drag-area text-center full-width",style:{padding:"20px"},id:"box-droppable"},p={style:{width:"300px",margin:"auto"},align:"center"},h={style:{padding:"10px",width:"100%"}},g={style:{"font-size":"20px"}},m={class:"",style:{padding:"10px","margin-bottom":"10px",width:"100%"}},w={key:1,style:{height:"75vh","overflow-y":"auto",padding:"20px","margin-left":"68px",border:"2px solid"}},_={class:"col-2",style:{"margin-top":"2vh"}},f={class:"popup-heading",style:{color:"#2388ae"}},v={class:"row text-center"},b=(0,l.Uk)(" No results "),y={key:0,style:{"margin-top":"5px"}},D=i((()=>(0,l._)("span",{class:"scanner-error"}," ! NO SCANNER FOUND ",-1)));function x(e,t,a,n,i,x){const V=(0,l.up)("DownloadInstaller"),S=(0,l.up)("q-dialog"),W=(0,l.up)("q-img"),Z=(0,l.up)("q-file"),k=(0,l.up)("q-card-section"),H=(0,l.up)("q-card"),$=(0,l.up)("vue-pdf-embed"),L=(0,l.up)("q-separator"),C=(0,l.up)("q-toolbar-title"),U=(0,l.up)("q-toolbar"),q=(0,l.up)("q-input"),F=(0,l.up)("q-tooltip"),I=(0,l.up)("q-btn"),Q=(0,l.up)("q-item-section"),T=(0,l.up)("q-item"),B=(0,l.up)("q-select"),j=(0,l.up)("DefaultBtn"),N=(0,l.up)("q-checkbox"),z=(0,l.up)("SaveBtn"),R=(0,l.up)("q-card-actions"),E=(0,l.up)("DocSplit");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(S,{modelValue:e.showDownloadInstaller,"onUpdate:modelValue":t[0]||(t[0]=t=>e.showDownloadInstaller=t),onKeydown:t[1]||(t[1]=(0,o.D2)((t=>e.showDownloadInstaller=!1),["esc"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(V)])),_:1},8,["modelValue"]),(0,l._)("section",d,[(0,l._)("div",r,[(0,l._)("div",c,[e.showDragDrop?((0,l.wg)(),(0,l.j4)(H,{key:0,flat:"",class:"drag-n-drop dark-back",onDrop:e.drop,onDragover:e.allowDrop,onDragleave:e.dragLeave},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{style:{border:"2px dashed",height:"100%"}},{default:(0,l.w5)((()=>[(0,l._)("div",u,[(0,l.Wm)(W,{src:"doc2light/scanner/cloud.svg",style:{height:"240px",width:"700px","margin-top":"10%"}}),(0,l._)("div",p,[(0,l._)("div",h,[(0,l._)("span",g,(0,s.zw)(e.$t("doc2light.pages.dragndrop")),1)]),(0,l._)("div",m,(0,s.zw)(e.$t("doc2light.pages.or")),1),(0,l.Wm)(Z,{color:"white",outlined:"",multiple:"",label:e.$t("doc2light.pages.browse_files"),modelValue:e.uploadedFiles,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.uploadedFiles=t),e.uploadFiles],"data-cy":"upload-multiple-docs",style:{width:"60%"}},null,8,["label","modelValue","onUpdate:modelValue"])])])])),_:1})])),_:1},8,["onDrop","onDragover","onDragleave"])):((0,l.wg)(),(0,l.iD)("div",w,[(0,l.Wm)($,{ref:"pager",source:e.file},null,8,["source"])]))]),(0,l.Wm)(L,{vertical:"",style:{"margin-left":"30px","margin-right":"30px","min-height":"89vh"}}),(0,l._)("div",_,[(0,l._)("div",null,[(0,l.Wm)(H,{class:"card-format",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l._)("span",f,(0,s.zw)(e.$t("doc2light.pages.scan_settings")),1)])),_:1})])),_:1}),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(q,{modelValue:e.new_scan["name"],"onUpdate:modelValue":t[3]||(t[3]=t=>e.new_scan["name"]=t),label:e.$t("name")},null,8,["modelValue","label"])]),(0,l._)("div",v,[(0,l.Wm)(B,{style:{"min-width":"15vw"},modelValue:e.new_scan["source"],"onUpdate:modelValue":t[5]||(t[5]=t=>e.new_scan["source"]=t),label:e.$t("doc2light.pages.choose_source"),options:e.scanners},{after:(0,l.w5)((()=>[(0,l.Wm)(I,{unelevated:"",round:"",icon:"restart_alt",onClick:t[4]||(t[4]=t=>e.getScanners(e.valid_url))},{default:(0,l.w5)((()=>[(0,l.Wm)(F,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("doc2light.pages.search_scanners")),1)])),_:1})])),_:1})])),"no-option":(0,l.w5)((()=>[(0,l.Wm)(T,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{class:"text-grey"},{default:(0,l.w5)((()=>[b])),_:1})])),_:1})])),_:1},8,["modelValue","label","options"])]),e.showDownloadInstallerButton?((0,l.wg)(),(0,l.iD)("div",y,[(0,l.Wm)(Q,null,{default:(0,l.w5)((()=>[D])),_:1}),(0,l.Wm)(j,{label:e.$t("doc2light.pages.download"),style:{"margin-top":"5px","margin-bottom":"15px"},onClick:t[6]||(t[6]=t=>e.showDownloadInstaller=!0)},null,8,["label"])])):(0,l.kq)("",!0),(0,l._)("div",null,[(0,l.Wm)(N,{modelValue:e.new_scan["automatic_get"],"onUpdate:modelValue":t[7]||(t[7]=t=>e.new_scan["automatic_get"]=t),"indeterminate-value":!1,label:e.$t("doc2light.pages.automatic_get")},null,8,["modelValue","label"])]),(0,l._)("div",null,[(0,l.Wm)(N,{modelValue:e.new_scan["remove_empty_sites"],"onUpdate:modelValue":t[8]||(t[8]=t=>e.new_scan["remove_empty_sites"]=t),"indeterminate-value":!1,label:e.$t("doc2light.pages.remove_empty_pages")},null,8,["modelValue","label"])]),(0,l._)("div",null,[(0,l.Wm)(N,{modelValue:e.new_scan["2_sided"],"onUpdate:modelValue":t[9]||(t[9]=t=>e.new_scan["2_sided"]=t),"indeterminate-value":!1,label:e.$t("doc2light.pages.two_side_scan")},null,8,["modelValue","label"])]),(0,l._)("div",null,[(0,l.Wm)(B,{modelValue:e.new_scan["resolution"],"onUpdate:modelValue":t[10]||(t[10]=t=>e.new_scan["resolution"]=t),label:e.$t("doc2light.pages.resolution"),options:e.resolutions},null,8,["modelValue","label","options"])]),(0,l._)("div",null,[(0,l.Wm)(B,{type:"multi",modelValue:e.new_scan["pixel_type"],"onUpdate:modelValue":t[11]||(t[11]=t=>e.new_scan["pixel_type"]=t),label:"Pixeltype",options:[{value:"Grayscale8",label:e.$t("doc2light.pages.gray")},{value:"RGB24",label:e.$t("doc2light.table.color")}]},null,8,["modelValue","options"])])])),_:1}),e.documentScanned?((0,l.wg)(),(0,l.j4)(R,{key:0,align:"center",style:{}},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{label:e.$t("doc2light.pages.scan"),onClick:t[12]||(t[12]=t=>e.doScan()),style:{"margin-right":"20px","margin-bottom":"10px"}},null,8,["label"]),(0,l.Wm)(z,{label:e.$t("doc2light.pages.upload"),onClick:t[13]||(t[13]=t=>e.uploadSingleFile(e.filedata))},null,8,["label"])])),_:1})):((0,l.wg)(),(0,l.j4)(R,{key:1,align:"center",style:{"margin-right":"7px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{label:e.$t("doc2light.pages.scan"),style:{"margin-bottom":"20px"},onClick:e.doScan},null,8,["label","onClick"])])),_:1})),e.showSplitButton?((0,l.wg)(),(0,l.j4)(R,{key:2,align:"center",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{label:e.$t("doc2light.pages.split"),onClick:t[14]||(t[14]=t=>e.show_popup=!0)},null,8,["label"])])),_:1})):(0,l.kq)("",!0)])),_:1})]),(0,l.Wm)(S,{modelValue:e.show_popup,"onUpdate:modelValue":t[15]||(t[15]=t=>e.show_popup=t),onKeydown:t[16]||(t[16]=(0,o.D2)((t=>e.show_popup=!1),["esc"]))},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{doc:e.file,pageCount:e.getRef(),filedata:e.filedata,mode:"split_create"},null,8,["doc","pageCount","filedata"])])),_:1},8,["modelValue"])])])])],64)}var V=a(77378),S=a(61959),W=a(45401),Z=a(25616),k=a(74371),H=a(30052),$=a.n(H),L=a(80579),C=a(64252),U=a(50442),q=a(73902),F=a(45752),I=a.n(F),Q=a(60759),T=function(e,t,a,l){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,o){function s(e){try{d(l.next(e))}catch(t){o(t)}}function i(e){try{d(l["throw"](e))}catch(t){o(t)}}function d(e){e.done?a(e.value):n(e.value).then(s,i)}d((l=l.apply(e,t||[])).next())}))};const B=(0,l.aZ)({data(){return{}},props:["service"],components:{DocSplit:k.Z,DefaultBtn:q.Z,VuePdfEmbed:I(),DownloadInstaller:Q.Z,SaveBtn:U.Z},mixins:[W.Z,V.Z],mounted(){var e="https://local.polydocs.io:";this.initView(e)},methods:{initView(e){this.new_scan["automatic_get"]=!1,this.new_scan["remove_empty_sites"]=!1,this.new_scan["2_sided"]=!1,this.new_scan["resolution"]=this.resolutions[0],this.checkAlfred(e)},checkAlfred(e){return T(this,void 0,void 0,(function*(){try{yield $().get(e+"12500/"),yield this.getScanners(e+"12500/")}catch(t){try{yield $().get(e+"12154/"),yield this.getScanners(e+"12154/")}catch(t){try{yield $().get(e+"12346/"),yield this.getScanners(e+"12346/")}catch(t){this.showErrorToast("No Running scanner found."),this.showDownloadInstallerButton=!0}}}}))},getScanners(e){return T(this,void 0,void 0,(function*(){this.valid_url=e;const t=yield $().get(e+"scanners");1==t.data.success?(this.scanners=[],t.data.scanners.forEach((e=>{this.scanners.push({value:e["Host"],label:e["Device"]})})),this.new_scan["source"]=this.scanners[0]):this.showErrorToast("No Scanner found")}))},doScan(){return T(this,void 0,void 0,(function*(){let e=this.valid_url+"scan?host="+this.new_scan["source"]["value"];1==this.new_scan["automatic_get"]?e+="&source=adf":e+="&source=platen",""!=this.new_scan["pixel_type"]["value"]&&(e=e+"&color="+this.new_scan["pixel_type"]["value"]),""!=this.new_scan["2_sided"]&&(e=e+"&duplex_input="+this.new_scan["2_sided"]),this.showLoading();yield $().get(e,{responseType:"blob"}).then((e=>{const t=e.headers["content-type"];new Blob([e.data,"test.pdf",t]);this.file=URL.createObjectURL(e.data),this.new_scan["automatic_get"]&&(this.showSplitButton=!0),this.showDragDrop=!1,this.documentScanned=!0,this.filedata=e.data})).catch((e=>{}));this.hideLoading()}))},getRef(){let e=this.$refs["pager"].pageCount;return e},formateDate(e,t){return Z.ZP.formatDate(e,t)},allowDrop(e){e.preventDefault(),e.currentTarget.classList.add("bg-grey-5"),e.currentTarget.classList.add("bd-shadow")},drop(e){e.preventDefault(),e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow"),this.uploadFiles(e.dataTransfer.files)},dragLeave(e){e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow")},uploadFiles(e){return T(this,void 0,void 0,(function*(){if("alfred"==this.service){this.showLoading();for(const l in e)try{let a=new FormData;var t=e[l];a.append("file",t),yield C.zU.create_doc(a)}catch(a){}this.hideLoading(),this.$router.push("/alfred/dashboard")}else if("docapp"==this.service){this.showLoading();for(const l in e)try{let a=new FormData;t=e[l];a.append("files",t),yield L.Zj.uploadFiles(a)}catch(a){}this.hideLoading(),this.$router.push("/dashboard")}}))},uploadSingleFile(e){return T(this,void 0,void 0,(function*(){if("alfred"==this.service){this.showLoading();try{let a=new FormData;var t=e;""!==this.new_scan["name"]?a.append("file",t,this.new_scan["name"]):a.append("file",t,"New Scan"),yield C.zU.create_doc(a)}catch(a){}this.hideLoading(),this.$router.push("/alfred/dashboard")}else if("docapp"==this.service){this.showLoading();try{let t=new FormData;this.new_scan["name"]?t.append("files",e,this.new_scan["name"]+".pdf"):t.append("files",e,"Scan.pdf"),yield L.Zj.uploadFiles(t)}catch(a){}this.hideLoading(),this.$router.push("/dashboard")}}))}},setup(){const e=[{value:"300",label:"300"},{value:"600",label:"600"},{value:"1200",label:"1200"}];return{showDragDrop:(0,S.iH)(!0),showDownloadInstallerButton:(0,S.iH)(!1),showDownloadInstaller:(0,S.iH)(!1),pageCount:(0,S.iH)(1),file:(0,S.iH)(),filedata:(0,S.iH)(),filter:(0,S.iH)(""),view:(0,S.iH)("list"),multiUploaderDialog:(0,S.iH)(!1),uploadedFiles:(0,S.iH)(null),image:(0,S.iH)(),new_scan:(0,S.iH)({}),scanners:(0,S.iH)([]),show_popup:(0,S.iH)(!1),resolutions:(0,S.iH)(e),importing:(0,S.iH)(!1),showSplitButton:(0,S.iH)(!1),showMenu:(0,S.iH)(!1),showIcons:(0,S.iH)(!0),documentScanned:(0,S.iH)(!1),ports:(0,S.iH)(["12500","12154","12346"]),valid_url:(0,S.iH)(),scan_card_height:(0,S.iH)()}}});var j=a(74260),N=a(46778),z=a(10151),R=a(25589),E=a(24027),A=a(64974),P=a(65869),O=a(39570),G=a(13747),K=a(64689),M=a(72448),Y=a(2165),J=a(5363),X=a(83414),ee=a(52035),te=a(65735),ae=a(99367),le=a(7518),ne=a.n(le);const oe=(0,j.Z)(B,[["render",x],["__scopeId","data-v-6f3e7b42"]]),se=oe;ne()(B,"components",{QDialog:N.Z,QCard:z.Z,QCardSection:R.Z,QImg:E.Z,QFile:A.Z,QSeparator:P.Z,QToolbar:O.Z,QToolbarTitle:G.Z,QInput:K.Z,QSelect:M.Z,QBtn:Y.Z,QTooltip:J.Z,QItem:X.Z,QItemSection:ee.Z,QCheckbox:te.Z,QCardActions:ae.Z});const ie=(0,l.aZ)({data(){return{}},components:{Scanner:se},setup(){return{alfred:"alfred"}}}),de=(0,j.Z)(ie,[["render",n]]),re=de}}]);