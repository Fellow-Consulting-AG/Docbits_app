"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[2762],{52762:(e,s,t)=>{t.r(s),t.d(s,{default:()=>Ee});var a=t(59835),i=t(86970),l=t(61957);const o=e=>((0,a.dD)("data-v-5a5f1547"),e=e(),(0,a.Cn)(),e),r={class:"container"},d={class:"full-width"},n={class:"table-header-text"},m={style:{width:"100px"}},h={class:"text-red-14"},u={key:0},c={key:0,class:"text-center",colspan:"3"},p={key:0},w={key:1},_={class:"col-sm-12 col-md-12 col-lg-12"},g={style:{width:"80%",left:"10%",position:"relative"}},f=o((()=>(0,a._)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-center"},[(0,a._)("img",{src:"settings/user.svg",class:"black_to_white q-my-sm",style:{height:"80px"}})],-1))),b={class:"col-sm-12 col-md-12 col-lg-12",id:"fist_name"},E=o((()=>(0,a._)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},null,-1))),y={class:"col-sm-12 col-md-12 col-lg-12",id:"last_name"},v={class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},N={class:"col-sm-12 col-md-12 col-lg-12",id:"email"},W={class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},T={class:"cursor-pointer"},$={class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},R={class:"col-sm-12 col-md-12 col-lg-12",id:"confirm_password"},U={class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},D={class:"col-sm-12 col-md-12 col-lg-12"},C={class:"float-right q-ml-auto q-mb-md q-mr-sm"},q={class:"q-ml-sm"};function k(e,s,t,o,k,S){const L=(0,a.up)("SubHeader"),x=(0,a.up)("f-btn"),Z=(0,a.up)("BackToSettings"),V=(0,a.up)("q-checkbox"),A=(0,a.up)("q-item-section"),I=(0,a.up)("q-item"),z=(0,a.up)("q-separator"),O=(0,a.up)("q-list"),Q=(0,a.up)("q-menu"),H=(0,a.up)("q-btn"),P=(0,a.up)("q-markup-table"),F=(0,a.up)("Loader"),M=(0,a.up)("q-toolbar-title"),Y=(0,a.up)("q-toolbar"),j=(0,a.up)("q-input"),B=(0,a.up)("q-icon"),G=(0,a.up)("q-tooltip"),K=(0,a.up)("q-form"),J=(0,a.up)("q-card-section"),X=(0,a.up)("q-card"),ee=(0,a.up)("q-dialog"),se=(0,a.up)("q-avatar"),te=(0,a.up)("q-card-actions"),ae=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(L,{name:"user_settings",label:e.$t("pages.user.settings")},null,8,["label"]),(0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(x,{label:e.$t("pages.user.add_user"),class:"float-right",onClick:s[0]||(s[0]=s=>e.userDialog=!0)},null,8,["label"])])),_:1}),(0,a._)("div",r,[(0,a._)("div",d,[(0,a.Wm)(P,{flat:"",class:"dashboard-table-style dashboard-table-height back-white"},{default:(0,a.w5)((()=>[(0,a._)("thead",null,[(0,a._)("tr",n,[(0,a._)("th",null,(0,i.zw)(e.$t("name")),1),(0,a._)("th",null,(0,i.zw)(e.$t("pages.user.email")),1),(0,a._)("th",null,(0,i.zw)(e.$t("pages.user.is_admin")),1),(0,a._)("th",m,(0,i.zw)(e.$t("actions")),1)])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.users,((t,o)=>((0,a.wg)(),(0,a.iD)("tr",{key:o},[(0,a._)("td",null,(0,i.zw)(t["first_name"])+" "+(0,i.zw)(t["last_name"]),1),(0,a._)("td",null,(0,i.zw)(t["email"]),1),(0,a._)("td",null,[(0,a.Wm)(V,{dense:"",modelValue:t["is_organisation_admin"],"onUpdate:modelValue":e=>t["is_organisation_admin"]=e,onClick:s=>e.isAdminToggle(t["id"],t["is_organisation_admin"])},null,8,["modelValue","onUpdate:modelValue","onClick"])]),(0,a._)("td",null,[(0,a.Wm)(H,{flat:"",dense:"",round:"",onClick:s[1]||(s[1]=(0,l.iM)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{persistent:"","auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{clickable:"",onClick:s=>e.openForm(t)},{default:(0,a.w5)((()=>[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("edit")),1)])),_:1})])),_:2},1032,["onClick"]),(0,a.Wm)(z,{inset:""}),(0,a.Wm)(I,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{onClick:s=>{e.userId=t["id"],e.confirmDelete=!0}},{default:(0,a.w5)((()=>[(0,a._)("span",h,(0,i.zw)(e.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])])))),128)),0===e.users.length?((0,a.wg)(),(0,a.iD)("tr",u,[e.spinner?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("td",c," No Record Found! "))])):(0,a.kq)("",!0)])])),_:1})])]),(0,a.Wm)(F),(0,a.Wm)(ee,{modelValue:e.userDialog,"onUpdate:modelValue":s[10]||(s[10]=s=>e.userDialog=s)},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{style:{width:"600px","max-width":"60vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(Y,{class:"bg-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{class:"text-white"},{default:(0,a.w5)((()=>[this.userId&&""!=this.userId?((0,a.wg)(),(0,a.iD)("span",p,(0,i.zw)(e.$t("pages.user.edit_user")),1)):((0,a.wg)(),(0,a.iD)("span",w,(0,i.zw)(e.$t("pages.user.add_user")),1))])),_:1}),(0,a.wy)((0,a.Wm)(x,{icon:"close"},null,512),[[ae]])])),_:1}),(0,a.Wm)(J,null,{default:(0,a.w5)((()=>[(0,a._)("div",_,[(0,a._)("div",g,[f,(0,a.Wm)(K,{onSubmit:e.onSubmit,onReset:e.onReset},{default:(0,a.w5)((()=>[(0,a._)("div",b,[(0,a.Wm)(j,{dense:"",outlined:"",modelValue:e.firstName,"onUpdate:modelValue":s[2]||(s[2]=s=>e.firstName=s),label:e.$t("pages.user.firstName"),style:{width:"450px"}},null,8,["modelValue","label"])]),E,(0,a._)("div",y,[(0,a.Wm)(j,{dense:"",outlined:"",modelValue:e.lastName,"onUpdate:modelValue":s[3]||(s[3]=s=>e.lastName=s),label:e.$t("pages.user.lastName"),style:{width:"450px"}},null,8,["modelValue","label"])]),(0,a._)("div",v,(0,i.zw)(e.lastNameError),1),(0,a._)("div",N,[(0,a.Wm)(j,{dense:"",outlined:"",modelValue:e.email,"onUpdate:modelValue":s[4]||(s[4]=s=>e.email=s),label:e.$t("pages.user.email"),style:{width:"450px"}},null,8,["modelValue","label"])]),(0,a._)("div",W,(0,i.zw)(e.emailError),1),(0,a.Wm)(j,{dense:"",type:!1===e.show_password?"password":"text",outlined:"",modelValue:e.password,"onUpdate:modelValue":s[6]||(s[6]=s=>e.password=s),label:e.$t("pages.user.password"),id:"password",style:{width:"480px"}},{append:(0,a.w5)((()=>[(0,a.Wm)(B,{name:!1===e.show_password?"visibility":"visibility_off",onClick:s[5]||(s[5]=s=>e.show_password=!e.show_password)},null,8,["name"])])),after:(0,a.w5)((()=>[(0,a._)("div",T,[(0,a.Wm)(B,{name:"img:info_primary.svg"}),(0,a.Wm)(G,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("password_hint")),1)])),_:1})])])),_:1},8,["type","modelValue","label"]),(0,a._)("div",$,(0,i.zw)(e.passwordError),1),(0,a._)("div",R,[(0,a.Wm)(j,{dense:"",type:!1===e.show_confirm_password?"password":"text",outlined:"",modelValue:e.confirmPassword,"onUpdate:modelValue":s[8]||(s[8]=s=>e.confirmPassword=s),label:e.$t("pages.user.confirmPassword"),style:{width:"450px"}},{append:(0,a.w5)((()=>[(0,a.Wm)(B,{name:!1===e.show_confirm_password?"visibility":"visibility_off",onClick:s[7]||(s[7]=s=>e.show_confirm_password=!e.show_confirm_password)},null,8,["name"])])),_:1},8,["type","modelValue","label"])]),(0,a._)("div",U,(0,i.zw)(e.passwordError),1),(0,a._)("div",D,[(0,a.Wm)(V,{modelValue:e.role,"onUpdate:modelValue":s[9]||(s[9]=s=>e.role=s),label:e.$t("pages.user.is_admin")},null,8,["modelValue","label"])]),(0,a._)("div",C,[(0,a.wy)((0,a.Wm)(x,{label:e.$t("pages.user.cancel"),appearance:"cancel"},null,8,["label"]),[[ae]]),(0,a.Wm)(x,{label:e.$t("pages.user.save"),class:"q-ml-sm"},null,8,["label"])])])),_:1},8,["onSubmit","onReset"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(ee,{modelValue:e.confirmDelete,"onUpdate:modelValue":s[12]||(s[12]=s=>e.confirmDelete=s),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(X,null,{default:(0,a.w5)((()=>[(0,a.Wm)(J,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{icon:"warning",color:"primary"})])),_:1}),(0,a.Wm)(J,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a._)("span",q,(0,i.zw)(e.$t("pages.messages.MSG_DELETE")),1)])),_:1}),(0,a.Wm)(te,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(x,{appearance:"cancel",label:e.$t("cancel")},null,8,["label"]),[[ae]]),(0,a.wy)((0,a.Wm)(x,{appearance:"negative",label:e.$t("delete"),onClick:s[11]||(s[11]=s=>e.deleteUser())},null,8,["label"]),[[ae]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var S=t(39981),L=t.n(S),x=t(44173),Z=t(19302),V=t(49990),A=t(60499),I=t(26033),z=t(49341),O=t(31921),Q=t(70501),H=t(37744),P=t(16308),F=t(17256),M=function(e,s,t,a){function i(e){return e instanceof t?e:new t((function(s){s(e)}))}return new(t||(t=Promise))((function(t,l){function o(e){try{d(a.next(e))}catch(s){l(s)}}function r(e){try{d(a["throw"](e))}catch(s){l(s)}}function d(e){e.done?t(e.value):i(e.value).then(o,r)}d((a=a.apply(e,s||[])).next())}))};let Y;const j=(0,a.aZ)({el:"#app",mixins:[Q.Z,V.Z,I.Z],data(){return{users:(0,A.iH)([]),emailError:"",passwordError:"",lastNameError:"",userDialog:(0,A.iH)(!1)}},components:{Loader:O.Z,SubHeader:P.Z,BackToSettings:F.Z},mounted:function(){Y=this,this.getUsers(!0)},methods:{isAdminToggle(e,s){return M(this,void 0,void 0,(function*(){let t=new FormData;t.append("is_organisation_admin",s?"1":"0");try{this.showLoading();let s=yield(0,H.O_)(),a=yield L().put(H.hi.update_user+e,t,{headers:{Authorization:s}});if(a.data.message)return a.data.error_code?this.emailError=this.$t("pages.messages."+a.data.error_code):this.emailError=a.data.message,Y.showErrorToast(this.emailError),yield this.getUsers(!1),void this.hideLoading();yield this.getUsers(!1),this.hideLoading(),this.showSuccessToast(this.$t("pages.messages.USER_UPDATED"))}catch(a){return this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),void this.hideLoading()}}))},getUsers(e){return M(this,void 0,void 0,(function*(){this.users=[],!0===e&&this.showLoading();try{const s=yield z.FT.getUsers();if(!s)return;this.users=s,!0===e&&this.hideLoading()}catch(s){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{!0===e&&this.hideLoading()}}))},onSubmit(){this.lastNameError="",this.emailError="",this.passwordError="";let e=this.validateEmail(this.email);e||(this.emailError=this.$t("pages.messages.INVALID_EMAIL")),this.lastName&&""!=this.lastName||(this.lastNameError=this.$t("pages.messages.USER_NAME_MANDATORY")),this.userId&&""==this.password&&""==this.confirmPassword||(this.password&&""!=this.password?this.password!=this.confirmPassword&&(this.passwordError=this.$t("pages.messages.PASSWORD_NOT_MATCH")):this.passwordError=this.$t("pages.messages.PASSWORD_MANDATORY")),this.emailError||this.lastNameError||this.passwordError||(this.userId?this.editUser():this.addUser())},addUser(){return M(this,void 0,void 0,(function*(){let e=new FormData;e.append("first_name",this.firstName),e.append("last_name",this.lastName),e.append("email",this.email),e.append("password",this.password),e.append("is_admin",this.role.toString()),this.showLoading();let s=yield(0,H.O_)();yield L().post(H.hi.create_users,e,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:s}}).then((e=>M(this,void 0,void 0,(function*(){if(e.data.message)return e.data.error_code?this.emailError=this.$t("pages.messages."+e.data.error_code):this.emailError=e.data.message,void this.hideLoading();yield this.getUsers(!1),this.userDialog=!1,this.hideLoading(),this.showSuccessToast(this.$t("pages.messages.USER_SUCESSFULLY_CREATED"))})))).catch((function(e){Y.showErrorToast(Y.$t("pages.messages.ERROR_INTERNAL_OCCUR")),Y.hideLoading(),Y.userDialog=!1}))}))},openForm(e){e?(this.userId=e.id,this.email=e.email,this.lastName=e.last_name,this.firstName=e.first_name,this.confirmPassword="",this.password="",this.role=e.is_organisation_admin):(this.role=!1,this.email="",this.userId="",this.lastName="",this.password="",this.firstName="",this.emailError="",this.lastNameError="",this.passwordError=""),this.userDialog=!0},editUser(){return M(this,void 0,void 0,(function*(){let e=new FormData;e.append("first_name",this.firstName),e.append("last_name",this.lastName),e.append("email",this.email),e.append("password",this.password),e.append("is_organisation_admin",this.role.toString()),this.showLoading();let s=yield(0,H.O_)();L().put(H.hi.update_user+this.userId,e,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:s}}).then((e=>M(this,void 0,void 0,(function*(){if(e.data.message)return e.data.error_code?this.emailError=this.$t("pages.messages."+e.data.error_code):this.emailError=e.data.message,Y.showErrorToast(this.emailError),void this.hideLoading();yield this.getUsers(!1),this.userDialog=!1,this.hideLoading(),this.userId=null,this.showSuccessToast(this.$t("pages.messages.USER_UPDATED"))})))).catch((function(e){Y.userDialog=!1,Y.showErrorToast(Y.$t("pages.messages.ERROR_INTERNAL_OCCUR")),Y.hideLoading()}))}))},onReset(){this.role=!1,this.email="",this.userId="",this.lastName="",this.password="",this.firstName="",this.emailError="",this.lastNameError="",this.passwordError="",this.removeClass((0,x.$)("#email").querySelector("label"),"error-border-left"),this.removeClass((0,x.$)("#last_name").querySelector("label"),"error-border-left"),this.removeClass((0,x.$)("#confirm_password").querySelector("label"),"error-border-left")},deleteUser(){return M(this,void 0,void 0,(function*(){try{let e;this.showLoading();let s=yield(0,H.O_)();e=yield L()["delete"](H.hi.delete_user+this.userId,{headers:{Authorization:s}}),e.data&&!e.data.hasOwnProperty("success")&&e.data.hasOwnProperty("message")&&this.showErrorToast(e.data.message),e.data&&e.data.hasOwnProperty("success")&&!0===e.data.success&&(this.userId=null,yield this.getUsers(!1),this.showSuccessToast(this.$t("pages.messages.USER_DELETED")))}catch(e){this.showErrorToast(Y.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.confirmDelete=!1,this.hideLoading()}}))}},setup(){(0,Z.Z)();return{icon:(0,A.iH)(!1),role:(0,A.iH)(!1),email:(0,A.iH)(),show_confirm_password:(0,A.iH)(!1),show_password:(0,A.iH)(!1),userId:(0,A.iH)(),firstName:(0,A.iH)(),lastName:(0,A.iH)(),password:(0,A.iH)(),confirmPassword:(0,A.iH)(),confirmDelete:(0,A.iH)(!1)}}});var B=t(7683),G=t(66933),K=t(11221),J=t(68879),X=t(56362),ee=t(13246),se=t(490),te=t(76749),ae=t(50926),ie=t(32074),le=t(44458),oe=t(51663),re=t(81973),de=t(63190),ne=t(8326),me=t(13119),he=t(22857),ue=t(46858),ce=t(61357),pe=t(11821),we=t(61450),_e=t(62146),ge=t(69984),fe=t.n(ge);const be=(0,B.Z)(j,[["render",k],["__scopeId","data-v-5a5f1547"]]),Ee=be;fe()(j,"components",{QMarkupTable:G.Z,QCheckbox:K.Z,QBtn:J.Z,QMenu:X.Z,QList:ee.Z,QItem:se.Z,QItemSection:te.Z,QSeparator:ae.Z,QDialog:ie.Z,QCard:le.Z,QToolbar:oe.Z,QToolbarTitle:re.Z,QCardSection:de.Z,QForm:ne.Z,QInput:me.Z,QIcon:he.Z,QTooltip:ue.Z,QAvatar:ce.Z,QCardActions:pe.Z,QTable:we.Z}),fe()(j,"directives",{ClosePopup:_e.Z})}}]);