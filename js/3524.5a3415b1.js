"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[3524],{53524:(e,l,t)=>{t.r(l),t.d(l,{default:()=>gt});var s=t(83673),a=t(62323),i=t(98880);const o=e=>((0,s.dD)("data-v-5d1fa975"),e=e(),(0,s.Cn)(),e),d={class:"container no-padding back highlighted-back"},r={class:"secondary-c-text text-h6 q-pt-md q-pb-md"},n=o((()=>(0,s._)("img",{width:"24",src:"back_new.svg"},null,-1))),c={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},_={class:"container p-b-0 settings"},u={class:"container q-pa-xl settings"},h={class:"q-gutter-y-md"},m={class:"row text-weight-bolder"},p={class:"col-sm-3 col-md-3 col-lg-3 secondary-c-text text-h6"},f={class:"col-sm-3 col-md-3 col-lg-3 text-center"},g={class:"col-sm-3 col-md-3 col-lg-3 text-center"},y=o((()=>(0,s._)("div",{class:"col-sm-3 col-md-3 col-lg-3"},null,-1))),w={class:"row"},b=o((()=>(0,s._)("div",{class:"col-sm-3 col-md-3 col-lg-3"},null,-1))),v={class:"col-sm-3 col-md-3 col-lg-3"},V={class:"col-sm-3 col-md-3 col-lg-3"},k={class:"col-sm-3 col-md-3 col-lg-3"},T={class:"row mt-5"},D={style:{width:"100%"}},x={class:"full-width"},W={class:"highlighted-back"},F={class:"text-h4 text-uppercase"},U={class:"text-h4 text-uppercase text-center"},E={class:"text-h4 text-uppercase text-center"},$={class:"text-h4 text-uppercase text-center"},q={class:"text-h4 text-uppercase text-center"},C={class:"text-h4 text-uppercase col-100"},z={class:"text-h4 text-uppercase col-100"},S={class:"text-h4 text-uppercase"},H={class:"highlighted-back"},L=o((()=>(0,s._)("th",{class:"text-center"},null,-1))),N=o((()=>(0,s._)("th",null,null,-1))),O={class:"text-center"},A={class:"text-center"},G={class:"text-center"},R={class:"text-center"},Z=o((()=>(0,s._)("th",{class:"col-100"},null,-1))),M=o((()=>(0,s._)("th",{colspan:"2"},null,-1))),P={class:"row-header"},Q={class:"text-h5 secondary-c-text",colspan:"7"},B={colspan:"2"},I=o((()=>(0,s._)("img",{class:"",width:"20",height:"20",src:"Trash-Block.svg",alt:""},null,-1))),Y=o((()=>(0,s._)("img",{class:"",width:"20",height:"20",src:"trash-bin-default.svg",alt:""},null,-1))),j={key:0},K={class:"text-h4 text-center"},J={class:"text-h4"},X={class:"text-h4 text-center"},ee={class:"text-h4 text-center"},le={class:"text-h4 text-center"},te={class:"text-h4 text-center"},se={class:"text-h4 text col-100"},ae={class:"text-h4 text col-100"},ie={class:"text-h4"},oe=(0,s.Uk)("Show Formula"),de=o((()=>(0,s._)("img",{class:"",width:"20",height:"20",src:"Trash-Block.svg",alt:""},null,-1))),re=o((()=>(0,s._)("img",{class:"",width:"24",height:"24",src:"trash-bin-default.svg",alt:""},null,-1))),ne=["src"],ce={class:"row full-width q-mt-xl"},_e={class:"col-sm-12 col-md-12 col-lg-12 text-align-center"},ue=o((()=>(0,s._)("div",{class:"row full-width q-mt-sm"},null,-1))),he={class:"row"},me={class:"col-sm-12 col-md-12 col-lg-12"},pe={class:"row"},fe={class:"col-sm-12 col-md-12 col-lg-12"},ge={class:"col-sm-12 col-md-12 col-lg-12"},ye=o((()=>(0,s._)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},null,-1))),we={class:"col-sm-12 col-md-12 col-lg-12"},be={class:"row q-pt-md"},ve={class:"col-sm-12 col-md-12 col-lg-12 q-pl-md q-pr-md"},Ve={class:"text-weight-bold"},ke={class:"col-sm-12 col-md-12 col-lg-12 q-mb-sm"},Te={class:"col-sm-12 col-md-12 col-lg-12"},De={class:"float-right q-mb-sm"},xe={class:"text-weight-bold"},We={class:"col-sm-12 col-md-12 col-lg-12"},Fe={class:"col-sm-12 col-md-12 col-lg-12"},Ue={class:"col-12"},Ee={key:0,class:"col-12"},$e={class:"col-12 text-align-center q-mt-sm"},qe={class:"row highlighted-back"},Ce={class:"col-sm-12 col-md-12 col-lg-12"},ze={class:"row"},Se={class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-mb-md"},He={class:"col-sm-12 col-md-12 col-lg-12"},Le={class:"col-sm-12 col-md-12 col-lg-12"},Ne={class:"col-sm-12 col-md-12 col-lg-12"},Oe={class:"col-sm-12 col-md-12 col-lg-12"},Ae={class:"row q-pt-md"},Ge={class:"col-sm-12 col-md-12 col-lg-12 q-pl-md q-pr-md"},Re={class:"q-ml-sm"},Ze={class:"text-weight-bold"},Me={class:"col-sm-12 col-md-12 col-lg-12"};function Pe(e,l,t,o,Pe,Qe){const Be=(0,s.up)("SubHeader"),Ie=(0,s.up)("q-icon"),Ye=(0,s.up)("q-btn"),je=(0,s.up)("q-tab"),Ke=(0,s.up)("q-tabs"),Je=(0,s.up)("parentFields"),Xe=(0,s.up)("q-tab-panel"),el=(0,s.up)("q-slider"),ll=(0,s.up)("q-separator"),tl=(0,s.up)("q-checkbox"),sl=(0,s.up)("q-tooltip"),al=(0,s.up)("q-input"),il=(0,s.up)("q-markup-table"),ol=(0,s.up)("q-tab-panels"),dl=(0,s.up)("q-toolbar-title"),rl=(0,s.up)("q-toolbar"),nl=(0,s.up)("q-form"),cl=(0,s.up)("q-card-section"),_l=(0,s.up)("q-card"),ul=(0,s.up)("q-dialog"),hl=(0,s.up)("q-select"),ml=(0,s.up)("q-avatar"),pl=(0,s.up)("q-card-actions"),fl=(0,s.up)("Loader"),gl=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(Be,{name:"document_type_fields",label:e.$t("pages.settings.fields")},null,8,["label"]),(0,s._)("div",d,[(0,s._)("div",r,[(0,s.Wm)(Ye,{flat:"",rounded:"",color:"primary",to:e.sub_doc_type_key?"/settings/sub_doc_type/"+e.documentType:"/settings/document"},{default:(0,s.w5)((()=>[(0,s.Wm)(Ie,{class:"text-red-13",size:"sm"},{default:(0,s.w5)((()=>[n])),_:1}),(0,s._)("label",c,(0,a.zw)(e.$t("pages.settings.document_types")),1)])),_:1},8,["to"])])]),(0,s._)("div",_,[(0,s.Wm)(Ke,{modelValue:e.tab,"onUpdate:modelValue":l[0]||(l[0]=l=>e.tab=l),dense:"",class:"text-weight-bold doc2-panels",align:"justify","narrow-indicator":"","active-class":"highlighted-back","active-color":"primary"},{default:(0,s.w5)((()=>[(0,s.Wm)(je,{name:"fields",label:e.$t("pages.fields_settings.field_setting")},null,8,["label"]),e.sub_doc_type_key?((0,s.wg)(),(0,s.j4)(je,{key:0,name:"parent_doc_type_field",label:e.getParentDocTypeName()+" "+e.$t("fields")+"("+e.$t("readonly")+")"},null,8,["label"])):(0,s.kq)("",!0)])),_:1},8,["modelValue"])]),(0,s._)("div",u,[(0,s.Wm)(ol,{modelValue:e.tab,"onUpdate:modelValue":l[27]||(l[27]=l=>e.tab=l),animated:""},{default:(0,s.w5)((()=>[(0,s.Wm)(Xe,{name:"parent_doc_type_field"},{default:(0,s.w5)((()=>[(0,s.Wm)(Je)])),_:1}),(0,s.Wm)(Xe,{name:"fields"},{default:(0,s.w5)((()=>[(0,s._)("div",h,[(0,s._)("div",m,[(0,s._)("div",p,(0,a.zw)(e.$t("pages.fields_settings.recog")),1),(0,s._)("div",f,(0,a.zw)(e.$t("pages.fields_settings.ocr")),1),(0,s._)("div",g,(0,a.zw)(e.$t("pages.fields_settings.match_score")),1),y]),(0,s._)("div",w,[b,(0,s._)("div",v,[(0,s.Wm)(el,{class:"q-mr-lg",onChange:l[1]||(l[1]=l=>e.setSetting("confidence_threshold")),modelValue:e.confidence_threshold,"onUpdate:modelValue":l[2]||(l[2]=l=>e.confidence_threshold=l),min:0,max:100,step:2,label:"",snap:""},null,8,["modelValue"])]),(0,s._)("div",V,[(0,s.Wm)(el,{class:"q-ml-lg",onChange:l[3]||(l[3]=l=>e.setSetting("match_score_threshold")),modelValue:e.match_score_threshold,"onUpdate:modelValue":l[4]||(l[4]=l=>e.match_score_threshold=l),min:0,max:100,step:2,label:"",snap:""},null,8,["modelValue"])]),(0,s._)("div",k,[(0,s.Wm)(Ye,{size:"md",label:e.$t("pages.fields_settings.all_default"),class:"float-right highlighted-back",onClick:l[5]||(l[5]=l=>e.resetToDefault())},null,8,["label"])])]),(0,s.Wm)(ll,{class:"q-ma-sm"}),(0,s._)("div",T,[(0,s._)("div",D,[(0,s.Wm)(Ye,{color:"primary",label:e.$t("reassign_field_group"),class:"right q-ml-md",onClick:l[6]||(l[6]=l=>{e.displayUpdateFieldGroupDialog()})},null,8,["label"]),(0,s.Wm)(Ye,{color:"primary",label:e.$t("create_group"),class:"right",onClick:l[7]||(l[7]=l=>{e.showCreateGroupForm()})},null,8,["label"]),(0,s.Wm)(Ye,{color:"primary",label:e.$t("save_settings"),class:"q-mr-md right",onClick:l[8]||(l[8]=l=>e.save())},null,8,["label"])])]),(0,s._)("div",x,[(0,s.Wm)(il,null,{default:(0,s.w5)((()=>[(0,s._)("thead",null,[(0,s._)("tr",W,[(0,s._)("th",null,[(0,s.Wm)(tl,{modelValue:e.fields_checkbox["move_all"],"onUpdate:modelValue":[l[9]||(l[9]=l=>e.fields_checkbox["move_all"]=l),l[10]||(l[10]=l=>e.updateFieldGroupClicked())]},null,8,["modelValue"])]),(0,s._)("th",F,(0,a.zw)(e.$t("pages.fields_settings.fields")),1),(0,s._)("th",U,(0,a.zw)(e.$t("pages.fields_settings.requierd")),1),(0,s._)("th",E,(0,a.zw)(e.$t("pages.fields_settings.read_only")),1),(0,s._)("th",$,(0,a.zw)(e.$t("pages.fields_settings.hidden")),1),(0,s._)("th",q,(0,a.zw)(e.$t("pages.fields_settings.force")),1),(0,s._)("th",C,(0,a.zw)(e.$t("pages.fields_settings.ocr")),1),(0,s._)("th",z,(0,a.zw)(e.$t("pages.fields_settings.match_score")),1),(0,s._)("th",S,(0,a.zw)(e.$t("pages.fields_settings.formula")),1)]),(0,s._)("tr",H,[L,N,(0,s._)("th",O,[(0,s.Wm)(tl,{onClick:l[11]||(l[11]=l=>e.setSetting("is_required")),modelValue:e.is_required,"onUpdate:modelValue":l[12]||(l[12]=l=>e.is_required=l)},null,8,["modelValue"])]),(0,s._)("th",A,[(0,s.Wm)(tl,{onClick:l[13]||(l[13]=l=>e.setSetting("is_readonly")),modelValue:e.is_readonly,"onUpdate:modelValue":l[14]||(l[14]=l=>e.is_readonly=l)},null,8,["modelValue"])]),(0,s._)("th",G,[(0,s.Wm)(tl,{onClick:l[15]||(l[15]=l=>e.setSetting("is_hidden")),modelValue:e.is_hidden,"onUpdate:modelValue":l[16]||(l[16]=l=>e.is_hidden=l)},null,8,["modelValue"])]),(0,s._)("th",R,[(0,s.Wm)(tl,{onClick:l[17]||(l[17]=l=>e.setSetting("force_validation")),modelValue:e.force_validation,"onUpdate:modelValue":l[18]||(l[18]=l=>e.force_validation=l)},null,8,["modelValue"])]),Z,M])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.apiData,(t=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t.name},[(0,s._)("tr",P,[(0,s._)("td",Q,(0,a.zw)(e.$t("pages.screen2a."+t.translation_key)==="pages.screen2a."+t.translation_key?t.title:e.$t("pages.screen2a."+t.translation_key)),1),(0,s._)("td",B,[e.default_fields_groups.includes(t.id)?((0,s.wg)(),(0,s.j4)(Ye,{key:0,flat:"",color:"black",class:"right",style:{cursor:"default"}},{default:(0,s.w5)((()=>[I,(0,s.Wm)(sl,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$t("no_operation_for_standard")),1)])),_:1})])),_:1})):((0,s.wg)(),(0,s.j4)(Ye,{key:1,flat:"",color:"primary",class:"right",onClick:l=>e.deleteGroup(t.id)},{default:(0,s.w5)((()=>[Y])),_:2},1032,["onClick"])),(0,s.Wm)(Ye,{color:"primary",class:"right",label:e.$t("create_field"),onClick:l=>e.showFieldDetailsDlg(t.name)},null,8,["label","onClick"])])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.rows,((t,i)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:i},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t,(t=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t.field_name},[e.isVisible(t)?((0,s.wg)(),(0,s.iD)("tr",j,[(0,s._)("td",K,["DEFAULT"==t["field_org_id"]?((0,s.wg)(),(0,s.j4)(tl,{key:0,class:"disabled_checkbox",modelValue:e.disable_checkbox,"onUpdate:modelValue":l[19]||(l[19]=l=>e.disable_checkbox=l),disable:!0},{default:(0,s.w5)((()=>[(0,s.Wm)(sl,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$t("no_operation_for_standard")),1)])),_:1})])),_:1},8,["modelValue"])):((0,s.wg)(),(0,s.j4)(tl,{key:1,modelValue:e.fields_checkbox[t.id],"onUpdate:modelValue":l=>e.fields_checkbox[t.id]=l},null,8,["modelValue","onUpdate:modelValue"]))]),(0,s._)("td",J,[(0,s.Wm)(al,{filled:"",style:{background:"transparent"},modelValue:t.field_display_label,"onUpdate:modelValue":[e=>t.field_display_label=e,l=>e.saveNewFieldLabel(t)],label:t.field_name},null,8,["modelValue","onUpdate:modelValue","label"])]),(0,s._)("td",X,[(0,s.Wm)(tl,{disable:e.isFieldHiddenOrReadonly(t),onClick:l[20]||(l[20]=l=>e.prepareDefaultSettings()),modelValue:t.is_required,"onUpdate:modelValue":e=>t.is_required=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s._)("td",ee,[(0,s.Wm)(tl,{onClick:l[21]||(l[21]=l=>e.prepareDefaultSettings()),modelValue:t.is_readonly,"onUpdate:modelValue":e=>t.is_readonly=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,s._)("td",le,[(0,s.Wm)(tl,{onClick:l[22]||(l[22]=l=>e.prepareDefaultSettings()),modelValue:t.is_hidden,"onUpdate:modelValue":e=>t.is_hidden=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,s._)("td",te,[(0,s.Wm)(tl,{disable:e.isFieldHiddenOrReadonly(t),onClick:l[23]||(l[23]=l=>e.prepareDefaultSettings()),modelValue:t.force_validation,"onUpdate:modelValue":e=>t.force_validation=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s._)("td",se,[(0,s.Wm)(al,{outlined:"",onChange:l[24]||(l[24]=l=>e.prepareDefaultSettings()),modelValue:t.confidence_threshold,"onUpdate:modelValue":e=>t.confidence_threshold=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,s._)("td",ae,[(0,s.Wm)(al,{outlined:"",onChange:l[25]||(l[25]=l=>e.prepareDefaultSettings()),modelValue:t.match_score_threshold,"onUpdate:modelValue":e=>t.match_score_threshold=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,s._)("td",ie,[(0,s.Wm)(Ye,{round:"",size:"sm",color:"primary",icon:"add",onClick:l=>e.openCalcDialog(t)},{default:(0,s.w5)((()=>[(0,s.Wm)(sl,null,{default:(0,s.w5)((()=>[oe])),_:1})])),_:2},1032,["onClick"]),"DEFAULT"==t["field_org_id"]?((0,s.wg)(),(0,s.j4)(Ye,{key:0,flat:"",color:"black",class:"pl-6 pr-6",style:{cursor:"default"}},{default:(0,s.w5)((()=>[de,(0,s.Wm)(sl,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$t("not_trash")),1)])),_:1})])),_:1})):((0,s.wg)(),(0,s.j4)(Ye,{key:1,flat:"",color:"primary",class:"pl-6 pr-6",onClick:l=>e.deleteField(t,!1)},{default:(0,s.w5)((()=>[re])),_:2},1032,["onClick"])),(0,s.Wm)(Ye,{flat:"",onClick:l=>e.showMasterDataSettings(t),class:(0,a.C_)("no-padding-left-right "+("DEFAULT"==t["field_org_id"]?"cursor-not-allowed":""))},{default:(0,s.w5)((()=>[(0,s._)("img",{src:t["fuzzy_field"]?"fuzzy-search.svg":"fuzzy-search-grey.svg",width:"30"},null,8,ne),"DEFAULT"==t["field_org_id"]?((0,s.wg)(),(0,s.j4)(sl,{key:0},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$t("no_operation_for_standard")),1)])),_:1})):(0,s.kq)("",!0)])),_:2},1032,["onClick","class"]),(0,s.Wm)(Ie,{name:"info",size:"sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(sl,null,{default:(0,s.w5)((()=>[(0,s._)("div",null,"Name : "+(0,a.zw)(t["field_name"]),1),(0,s._)("div",null,"Type : "+(0,a.zw)(t["field_type"]),1),(0,s._)("div",null,"Translation key : "+(0,a.zw)(t["translation_key"]),1)])),_:2},1024)])),_:2},1024)])])):(0,s.kq)("",!0)],64)))),128))],64)))),128))],64)))),128))])])),_:1})]),(0,s._)("div",ce,[(0,s._)("div",_e,[(0,s.Wm)(Ye,{color:"primary",label:e.$t("save_settings"),class:"save-btn-width",onClick:l[26]||(l[26]=l=>e.save())},null,8,["label"])])]),ue])])),_:1})])),_:1},8,["modelValue"])]),(0,s.Wm)(ul,{modelValue:e.showFormulaDlg,"onUpdate:modelValue":l[30]||(l[30]=l=>e.showFormulaDlg=l)},{default:(0,s.w5)((()=>[(0,s.Wm)(_l,null,{default:(0,s.w5)((()=>[(0,s.Wm)(rl,{class:"secondary-toolbar"},{default:(0,s.w5)((()=>[(0,s.Wm)(dl),(0,s.wy)((0,s.Wm)(Ye,{flat:"",round:"",dense:"",icon:"close"},null,512),[[gl]])])),_:1}),(0,s.Wm)(cl,{class:"width-500"},{default:(0,s.w5)((()=>[(0,s._)("div",he,[(0,s._)("div",me,[(0,s._)("div",pe,[(0,s.Wm)(nl,{class:"full-width"},{default:(0,s.w5)((()=>[(0,s._)("div",fe,(0,a.zw)(e.$t("pages.fields_settings.formula")),1),(0,s._)("div",ge,[(0,s.Wm)(al,{outlined:"",modelValue:this.field_model["calculation_formula"],"onUpdate:modelValue":l[28]||(l[28]=e=>this.field_model["calculation_formula"]=e),type:"textarea"},null,8,["modelValue"])]),ye,(0,s._)("div",we,[(0,s._)("div",be,[(0,s._)("div",ve,[(0,s.Wm)(Ye,{label:e.$t("pages.user.save"),onClick:l[29]||(l[29]=l=>e.showFormulaDlg=!1),color:"primary",class:"full-width",icon:"done"},null,8,["label"])])])])])),_:1})])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(ul,{modelValue:e.showGroupDetailsForm,"onUpdate:modelValue":l[35]||(l[35]=l=>e.showGroupDetailsForm=l),persistent:"","transition-show":"scale","transition-hide":"scale",onKeydown:l[36]||(l[36]=(0,i.D2)((l=>e.showGroupDetailsForm=!1),["esc"]))},{default:(0,s.w5)((()=>[(0,s.Wm)(_l,{style:{width:"50%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(rl,{class:"secondary-toolbar"},{default:(0,s.w5)((()=>[(0,s.Wm)(dl,null,{default:(0,s.w5)((()=>[(0,s._)("span",Ve,(0,a.zw)(e.$t("doc_type_form")),1)])),_:1}),(0,s.wy)((0,s.Wm)(Ye,{flat:"",round:"",dense:"",icon:"close",onClick:l[31]||(l[31]=l=>e.closeGroupDlg())},null,512),[[gl]])])),_:1}),(0,s.Wm)(cl,{class:"row items-center q-pb-none"}),(0,s.Wm)(cl,null,{default:(0,s.w5)((()=>[(0,s._)("div",ke,[(0,s.Wm)(al,{outlined:"",modelValue:e.groupName,"onUpdate:modelValue":l[32]||(l[32]=l=>e.groupName=l),label:e.$t("name"),"error-message":"Please provide Name",rules:[e=>e&&e.length>0],hint:e.$t("pages.messages.SPACES_NOT_ALLOWED")},null,8,["modelValue","label","rules","hint"])]),(0,s._)("div",Te,[(0,s.Wm)(al,{outlined:"",modelValue:e.groupTitle,"onUpdate:modelValue":l[33]||(l[33]=l=>e.groupTitle=l),label:e.$t("title"),"error-message":"Please provide Title",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])]),(0,s._)("div",De,[(0,s.wy)((0,s.Wm)(Ye,{class:"highlighted-back q-mr-md",label:e.$t("cancel")},null,8,["label"]),[[gl]]),(0,s.Wm)(Ye,{color:"primary",label:e.$t("pages.user.save"),"data-cy":"save",onClick:l[34]||(l[34]=l=>e.createGroup())},null,8,["label"])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(ul,{modelValue:e.showFieldDetailsForm,"onUpdate:modelValue":l[44]||(l[44]=l=>e.showFieldDetailsForm=l),persistent:"","transition-show":"scale","transition-hide":"scale",onKeydown:l[45]||(l[45]=(0,i.D2)((l=>e.showFieldDetailsForm=!1),["esc"]))},{default:(0,s.w5)((()=>[(0,s.Wm)(_l,{style:{width:"50%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(rl,{class:"secondary-toolbar"},{default:(0,s.w5)((()=>[(0,s.Wm)(dl,null,{default:(0,s.w5)((()=>[(0,s._)("span",xe,(0,a.zw)(e.$t("document_field_details")),1)])),_:1}),(0,s.wy)((0,s.Wm)(Ye,{flat:"",round:"",dense:"",icon:"close",onClick:l[37]||(l[37]=l=>e.closeFieldDlg())},null,512),[[gl]])])),_:1}),(0,s.Wm)(cl,{class:"row items-center q-pb-none"}),(0,s.Wm)(cl,null,{default:(0,s.w5)((()=>[(0,s._)("div",We,[(0,s.Wm)(al,{outlined:"",modelValue:e.fieldName,"onUpdate:modelValue":l[38]||(l[38]=l=>e.fieldName=l),label:e.$t("name"),"error-message":"Please provide Name",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])]),(0,s._)("div",Fe,[(0,s.Wm)(al,{outlined:"",modelValue:e.fieldTitle,"onUpdate:modelValue":l[39]||(l[39]=l=>e.fieldTitle=l),label:e.$t("title"),"error-message":"Please provide Title",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])]),(0,s._)("div",Ue,[(0,s.Wm)(hl,{outlined:"",modelValue:e.fieldType,"onUpdate:modelValue":l[40]||(l[40]=l=>e.fieldType=l),options:e.data_type,rules:[e.fieldTypeRule],"emit-value":"","map-options":"",label:e.$t("select_field_type")},null,8,["modelValue","options","rules","label"])]),"ENUM"===e.fieldType?((0,s.wg)(),(0,s.iD)("div",Ee,[(0,s.Wm)(hl,{outlined:"",modelValue:e.field_list_of_values,"onUpdate:modelValue":l[41]||(l[41]=l=>e.field_list_of_values=l),options:e.lov_list,label:"Select List of Values","emit-value":"","map-options":""},null,8,["modelValue","options"])])):(0,s.kq)("",!0),(0,s._)("div",$e,[(0,s.Wm)(Ye,{color:"primary",label:e.$t("back"),"data-cy":"back",class:"q-mr-sm",onClick:l[42]||(l[42]=l=>e.closeFieldDlg())},null,8,["label"]),(0,s.Wm)(Ye,{color:"primary",label:e.$t("pages.user.save"),"data-cy":"save",onClick:l[43]||(l[43]=l=>e.createFieldInGroup())},null,8,["label"])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(ul,{modelValue:e.showMasterDataPopup,"onUpdate:modelValue":l[50]||(l[50]=l=>e.showMasterDataPopup=l)},{default:(0,s.w5)((()=>[(0,s.Wm)(_l,null,{default:(0,s.w5)((()=>[(0,s.Wm)(rl,{class:"secondary-toolbar"},{default:(0,s.w5)((()=>[(0,s.Wm)(dl),(0,s.wy)((0,s.Wm)(Ye,{flat:"",round:"",dense:"",icon:"close"},null,512),[[gl]])])),_:1}),(0,s.Wm)(cl,{class:"width-500"},{default:(0,s.w5)((()=>[(0,s._)("div",qe,[(0,s._)("div",Ce,[(0,s._)("div",ze,[(0,s.Wm)(nl,{class:"full-width"},{default:(0,s.w5)((()=>[(0,s._)("div",Se," Note: "+(0,a.zw)(e.$t("master_data_field_warning")),1),(0,s._)("div",He,[(0,s.Uk)((0,a.zw)(e.$t("master_data_icon_on_view"))+" ",1),(0,s.Wm)(tl,{modelValue:this.field_model["fuzzy_search"],"onUpdate:modelValue":l[46]||(l[46]=e=>this.field_model["fuzzy_search"]=e)},null,8,["modelValue"])]),(0,s._)("div",Le,[(0,s.Wm)(hl,{clearable:"",modelValue:e.field_model["master_data_field_type"],"onUpdate:modelValue":[l[47]||(l[47]=l=>e.field_model["master_data_field_type"]=l),l[48]||(l[48]=l=>e.field_model["master_data_field"]="")],"use-input":"",options:e.master_data_types,label:e.$t("select")+" "+e.$t("type"),"emit-value":"","map-options":""},null,8,["modelValue","options","label"])]),(0,s._)("div",Ne,[(0,s.Wm)(hl,{clearable:"",modelValue:e.field_model["master_data_field"],"onUpdate:modelValue":l[49]||(l[49]=l=>e.field_model["master_data_field"]=l),"use-input":"",options:e.filtered_master_fields,onFilter:e.filterMasterDataFieldsEvent,label:e.$t("adv_column_options"),"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","label"])]),(0,s._)("div",Oe,[(0,s._)("div",Ae,[(0,s._)("div",Ge,[(0,s.Wm)(Ye,{label:e.$t("pages.user.save"),onClick:e.saveMasterDataSettings,color:"primary",class:"full-width",icon:"done"},null,8,["label","onClick"])])])])])),_:1})])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(ul,{modelValue:e.fieldDeleteConfirm,"onUpdate:modelValue":l[52]||(l[52]=l=>e.fieldDeleteConfirm=l),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(_l,null,{default:(0,s.w5)((()=>[(0,s.Wm)(cl,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,s.w5)((()=>[(0,s.Wm)(ml,{icon:"warning",color:"primary"})])),_:1}),(0,s.Wm)(cl,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s._)("span",Re,(0,a.zw)(e.$t("sure")),1)])),_:1}),(0,s.Wm)(pl,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(Ye,{flat:"",label:e.$t("cancel"),"data-cy":"cancel",color:"primary"},null,8,["label"]),[[gl]]),(0,s.wy)((0,s.Wm)(Ye,{flat:"",label:e.$t("delete"),"data-cy":"delete-popup",color:"primary",onClick:l[51]||(l[51]=l=>e.deleteField({},!0))},null,8,["label"]),[[gl]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(ul,{modelValue:e.updateGroupDialog,"onUpdate:modelValue":l[57]||(l[57]=l=>e.updateGroupDialog=l),persistent:"","transition-show":"scale","transition-hide":"scale",onKeydown:l[58]||(l[58]=(0,i.D2)((l=>e.updateGroupDialog=!1),["esc"]))},{default:(0,s.w5)((()=>[(0,s.Wm)(_l,{style:{width:"50%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(rl,{class:"secondary-toolbar"},{default:(0,s.w5)((()=>[(0,s.Wm)(dl,null,{default:(0,s.w5)((()=>[(0,s._)("span",Ze,(0,a.zw)(e.$t("Reassign Fields Group")),1)])),_:1}),(0,s.wy)((0,s.Wm)(Ye,{flat:"",round:"",dense:"",icon:"close",onClick:l[53]||(l[53]=l=>e.updateGroupDialog=!1)},null,512),[[gl]])])),_:1}),(0,s.Wm)(cl,{class:"row items-center q-pb-none"}),(0,s.Wm)(cl,null,{default:(0,s.w5)((()=>[(0,s._)("div",Me,[(0,s.Wm)(hl,{clearable:"",modelValue:e.selected_group_id,"onUpdate:modelValue":l[54]||(l[54]=l=>e.selected_group_id=l),"use-input":"",options:e.groups_options,onFilter:e.filterGroupsEvent,label:e.$t("Select Group"),"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","label"])])])),_:1}),(0,s.Wm)(pl,{align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(Ye,{color:"primary",label:e.$t("back"),"data-cy":"back",class:"q-mr-sm",onClick:l[55]||(l[55]=l=>e.updateGroupDialog=!1)},null,8,["label"]),(0,s.Wm)(Ye,{color:"primary",label:e.$t("pages.user.save"),"data-cy":"save",onClick:l[56]||(l[56]=l=>e.updateFieldGroups())},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(fl)],64)}var Qe=t(77378),Be=t(53371),Ie=t(61959),Ye=t(78564),je=t(72113),Ke=t(45401),Je=t(13873),Xe=t(60727),el=t(10321),ll=t(80579);const tl=e=>((0,s.dD)("data-v-2e9de794"),e=e(),(0,s.Cn)(),e),sl={class:"container q-pa-xl"},al={class:"q-gutter-y-md"},il={class:"full-width"},ol={class:"highlighted-back"},dl={class:"text-h4 text-uppercase"},rl={class:"text-h4 text-uppercase text-center"},nl={class:"text-h4 text-uppercase text-center"},cl={class:"text-h4 text-uppercase text-center"},_l={class:"text-h4 text-uppercase text-center"},ul={class:"text-h4 text-uppercase col-100"},hl={class:"text-h4 text-uppercase col-100"},ml={class:"text-h4 text-uppercase"},pl={class:"highlighted-back"},fl=tl((()=>(0,s._)("th",null,null,-1))),gl={class:"text-center"},yl={class:"text-center"},wl={class:"text-center"},bl={class:"text-center"},vl=tl((()=>(0,s._)("th",{class:"col-100"},null,-1))),Vl=tl((()=>(0,s._)("th",{colspan:"2"},null,-1))),kl={class:"row-header"},Tl={class:"text-h4 secondary-c-text",colspan:"6"},Dl=tl((()=>(0,s._)("td",{colspan:"2"},null,-1))),xl={class:"text-h4"},Wl={class:"text-h4 text-center"},Fl={class:"text-h4 text-center"},Ul={class:"text-h4 text-center"},El={class:"text-h4 text-center"},$l={class:"text-h4 text col-100"},ql={class:"text-h4 text col-100"},Cl={class:"text-h4"},zl=["src"],Sl=tl((()=>(0,s._)("div",{class:"row full-width q-mt-sm"},null,-1)));function Hl(e,l,t,i,o,d){const r=(0,s.up)("q-checkbox"),n=(0,s.up)("q-input"),c=(0,s.up)("q-btn"),_=(0,s.up)("q-markup-table"),u=(0,s.up)("Loader");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",sl,[(0,s._)("div",al,[(0,s._)("div",il,[(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[(0,s._)("thead",null,[(0,s._)("tr",ol,[(0,s._)("th",dl,(0,a.zw)(e.$t("pages.fields_settings.fields")),1),(0,s._)("th",rl,(0,a.zw)(e.$t("pages.fields_settings.requierd")),1),(0,s._)("th",nl,(0,a.zw)(e.$t("pages.fields_settings.read_only")),1),(0,s._)("th",cl,(0,a.zw)(e.$t("pages.fields_settings.hidden")),1),(0,s._)("th",_l,(0,a.zw)(e.$t("pages.fields_settings.force")),1),(0,s._)("th",ul,(0,a.zw)(e.$t("pages.fields_settings.ocr")),1),(0,s._)("th",hl,(0,a.zw)(e.$t("pages.fields_settings.match_score")),1),(0,s._)("th",ml,(0,a.zw)(e.$t("pages.fields_settings.formula")),1)]),(0,s._)("tr",pl,[fl,(0,s._)("th",gl,[(0,s.Wm)(r,{disable:e.isReadOnly,modelValue:e.is_required,"onUpdate:modelValue":l[0]||(l[0]=l=>e.is_required=l)},null,8,["disable","modelValue"])]),(0,s._)("th",yl,[(0,s.Wm)(r,{disable:e.isReadOnly,modelValue:e.is_readonly,"onUpdate:modelValue":l[1]||(l[1]=l=>e.is_readonly=l)},null,8,["disable","modelValue"])]),(0,s._)("th",wl,[(0,s.Wm)(r,{disable:e.isReadOnly,modelValue:e.is_hidden,"onUpdate:modelValue":l[2]||(l[2]=l=>e.is_hidden=l)},null,8,["disable","modelValue"])]),(0,s._)("th",bl,[(0,s.Wm)(r,{disable:e.isReadOnly,modelValue:e.force_validation,"onUpdate:modelValue":l[3]||(l[3]=l=>e.force_validation=l)},null,8,["disable","modelValue"])]),vl,Vl])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.apiData,(l=>((0,s.wg)(),(0,s.iD)(s.HY,{key:l.name},[(0,s._)("tr",kl,[(0,s._)("td",Tl,(0,a.zw)(e.$t("pages.screen2a."+l.translation_key)==="pages.screen2a."+l.translation_key?l.title:e.$t("pages.screen2a."+l.translation_key)),1),Dl]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.rows,((l,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l,(l=>((0,s.wg)(),(0,s.iD)("tr",{key:l.field_name},[(0,s._)("td",xl,[(0,s.Wm)(n,{disable:e.isReadOnly,filled:"",style:{background:"transparent"},modelValue:l.field_display_label,"onUpdate:modelValue":e=>l.field_display_label=e,label:l.field_name},null,8,["disable","modelValue","onUpdate:modelValue","label"])]),(0,s._)("td",Wl,[(0,s.Wm)(r,{disable:e.isReadOnly,modelValue:l.is_required,"onUpdate:modelValue":e=>l.is_required=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s._)("td",Fl,[(0,s.Wm)(r,{disable:e.isReadOnly,modelValue:l.is_readonly,"onUpdate:modelValue":e=>l.is_readonly=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s._)("td",Ul,[(0,s.Wm)(r,{disable:e.isReadOnly,modelValue:l.is_hidden,"onUpdate:modelValue":e=>l.is_hidden=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s._)("td",El,[(0,s.Wm)(r,{disable:e.isReadOnly,modelValue:l.force_validation,"onUpdate:modelValue":e=>l.force_validation=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s._)("td",$l,[(0,s.Wm)(n,{outlined:"",disable:e.isReadOnly,modelValue:l.confidence_threshold,"onUpdate:modelValue":e=>l.confidence_threshold=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s._)("td",ql,[(0,s.Wm)(n,{outlined:"",disable:e.isReadOnly,modelValue:l.match_score_threshold,"onUpdate:modelValue":e=>l.match_score_threshold=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s._)("td",Cl,["DEFAULT"!==l["field_org_id"]?((0,s.wg)(),(0,s.j4)(c,{key:0,flat:""},{default:(0,s.w5)((()=>[(0,s._)("img",{src:l["fuzzy_field"]?"fuzzy-search.svg":"fuzzy-search-grey.svg",width:"30"},null,8,zl)])),_:2},1024)):(0,s.kq)("",!0)])])))),128))],64)))),128))],64)))),128))])])),_:1})]),Sl])]),(0,s.Wm)(u)],64)}var Ll=function(e,l,t,s){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,i){function o(e){try{r(s.next(e))}catch(l){i(l)}}function d(e){try{r(s["throw"](e))}catch(l){i(l)}}function r(e){e.done?t(e.value):a(e.value).then(o,d)}r((s=s.apply(e,l||[])).next())}))};const Nl=(0,s.aZ)({el:"#app",mixins:[Ke.Z,Qe.Z,Ye.Z],components:{Loader:je.Z},data(){return{}},mounted(){this.documentType=this.$route.params.type.toString(),this.sub_doc_type_key=this.$route.params.sub_doc_type,this.initView()},methods:{initView(){return Ll(this,void 0,void 0,(function*(){yield this.getSettingsByType(!0)}))},getSettingsByType(e){return Ll(this,void 0,void 0,(function*(){try{e&&this.showLoading();const l=Object.assign(this.getDocTypeParams()),t=yield ll.id.getFieldSettingsByType(l);this.apiData=t.field_setting,this.prepareDefaultSettings()}catch(l){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},getDocTypeParams(){const e={};return e["doc_type"]=this.documentType,e["is_sub_doc_type"]="false",e},prepareDefaultSettings(){this.is_required=!0,this.is_readonly=!0,this.is_hidden=!0,this.force_validation=!0,this.confidence_threshold=0,this.match_score_threshold=0,Array.from(this.apiData).forEach((e=>{Array.from(e.rows).forEach((e=>{Array.from(e).forEach((e=>{!0===this.is_required&&(this.is_required=e.is_required),!0===this.is_readonly&&(this.is_readonly=e.is_readonly),!0===this.is_hidden&&(this.is_hidden=e.is_hidden),!0===this.force_validation&&(this.force_validation=e.force_validation),e.confidence_threshold>this.confidence_threshold&&(this.confidence_threshold=e.confidence_threshold),e.match_score_threshold>this.match_score_threshold&&(this.match_score_threshold=e.match_score_threshold),e.field_display_label=e.field_label?e.field_label:this.$t("pages.screen2a."+e.translation_key)==="pages.screen2a."+e.translation_key?e.title:this.$t("pages.screen2a."+e.translation_key)}))}))})),this.$forceUpdate()},isFieldHiddenOrReadonly(e){return!(!e.is_readonly&&!e.is_hidden)&&(this.is_required=!1,this.force_validation=!1,e.is_required=!1,e.force_validation=!1,!0)}},setup(){let e={};return{filtered_master_fields:(0,Ie.iH)([]),field_model:(0,Ie.iH)(e),showMasterDataPopup:(0,Ie.iH)(!1),apiData:(0,Ie.iH)(),singleField:(0,Ie.iH)(!1),allField:(0,Ie.iH)(!1),documentType:(0,Ie.iH)("INVOICE"),is_required:(0,Ie.iH)(!1),is_readonly:(0,Ie.iH)(!1),is_hidden:(0,Ie.iH)(!1),force_validation:(0,Ie.iH)(!1),confidence_threshold:(0,Ie.iH)(50),match_score_threshold:(0,Ie.iH)(50),showFormulaDlg:(0,Ie.iH)(!1),calculation_formula:(0,Ie.iH)(null),sub_doc_type_key:(0,Ie.iH)(""),isReadOnly:(0,Ie.iH)(!0),profile_options:[{label:"DEFAULT",value:"DEFAULT"},{label:"ZUGFeRD",value:"Zugferd"}],data_type:[{label:"Select Type",value:""},{label:Be.i18n.t("amount"),value:"AMOUNT"},{label:"STRING",value:"STRING"},{label:Be.i18n.t("invoice_date"),value:"DATE"},{label:Be.i18n.t("number"),value:"NUMBER"},{label:"BOOLEAN",value:"BOOLEAN"},{label:Be.i18n.t("currency"),value:"CURRENCY"}]}}});var Ol=t(74260),Al=t(30481),Gl=t(65735),Rl=t(64689),Zl=t(2165),Ml=t(86115),Pl=t(7518),Ql=t.n(Pl);const Bl=(0,Ol.Z)(Nl,[["render",Hl],["__scopeId","data-v-2e9de794"]]),Il=Bl;Ql()(Nl,"components",{QMarkupTable:Al.Z,QCheckbox:Gl.Z,QInput:Rl.Z,QBtn:Zl.Z,QField:Ml.Z});var Yl=t(9273),jl=function(e,l,t,s){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,i){function o(e){try{r(s.next(e))}catch(l){i(l)}}function d(e){try{r(s["throw"](e))}catch(l){i(l)}}function r(e){e.done?t(e.value):a(e.value).then(o,d)}r((s=s.apply(e,l||[])).next())}))};const Kl=(0,s.aZ)({el:"#app",mixins:[Ke.Z,Qe.Z,Ye.Z],components:{Loader:je.Z,SubHeader:Je.Z,parentFields:Il},data(){return{disable_checkbox:!1,exclude_fields:["move_all"]}},watch:{doc_type_loading:{handler:function(e,l){this.getParentDocTypeName()}}},mounted(){this.documentType=this.$route.params.type.toString(),this.sub_doc_type_key=this.$route.params.sub_doc_type,this.initView()},methods:{initView(){return jl(this,void 0,void 0,(function*(){this.getParentDocTypeName(),yield this.getSettingsByType(!0),yield this.getMasterDataTypesAndFields(),yield this.getFieldGroups(),yield this.getLovList()}))},getParentDocTypeName(){if(!this.doc_type_list||!this.sub_doc_type_key)return;if(this.parent_doc_type_name)return this.parent_doc_type_name;const e=this.doc_type_list.filter((e=>e.value.indexOf(this.documentType)>-1));return 0!=e.length?(this.parent_doc_type_name=e[0].label,this.parent_doc_type_name):void 0},getSettingsByType(e){return jl(this,void 0,void 0,(function*(){try{e&&this.showLoading();const l=Object.assign(this.getDocTypeParams()),t=yield ll.id.getFieldSettingsByType(l);this.apiData=t.field_setting,this.prepareDefaultSettings()}catch(l){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},getDocTypeParams(e="doc_type"){const l={};return l[e]=this.documentType,l["is_sub_doc_type"]="false",this.sub_doc_type_key&&(l[e]=this.sub_doc_type_key,l["is_sub_doc_type"]="true"),l},save(){return jl(this,void 0,void 0,(function*(){try{this.showLoading();const e={data:JSON.stringify(this.apiData)},l=Object.assign(this.getDocTypeParams());yield ll.id.update(e,l)}catch(e){const l=Yl.w.getErrorMessage(e);this.showErrorToast(l)}finally{this.hideLoading()}}))},resetToDefault(){return jl(this,void 0,void 0,(function*(){try{this.showLoading();const e=Object.assign(this.getDocTypeParams());yield ll.id.restoreDefaultFields({},e),yield this.getSettingsByType(!1),this.showSuccessToast(this.$t("pages.messages.SETTING_RESTORED"))}catch(e){const l=Yl.w.getErrorMessage(e);this.showErrorToast(l)}finally{this.hideLoading()}}))},setSetting(e){let l=!1;Array.from(this.apiData).forEach((t=>{Array.from(t.rows).forEach((t=>{Array.from(t).forEach((t=>{"is_readonly"===e?t.is_readonly=this.is_readonly:"is_hidden"===e?t.is_hidden=this.is_hidden:"confidence_threshold"===e?t.confidence_threshold=this.confidence_threshold:"match_score_threshold"===e?t.match_score_threshold=this.match_score_threshold:"is_required"!==e&&"force_validation"!==e||("is_required"===e?t.is_required=this.is_required:"force_validation"===e&&(t.force_validation=this.force_validation),l=!0)}))}))})),l&&this.showErrorToast(this.$t("pages.messages.REVIEW_YOUR_SELECTION")),this.$forceUpdate()},resetAllSelection(e,l){"is_required"===e&&!1===l?this.is_required=!1:"is_readonly"===e&&!1===l?this.is_readonly=!1:"is_hidden"===e&&!1===l?this.is_hidden=!1:"force_validation"===e&&!1===l?this.force_validation=!1:"confidence_threshold"===e&&this.confidence_threshold!=l?this.confidence_threshold=50:"match_score_threshold"===e&&this.match_score_threshold!=l&&(this.match_score_threshold=50)},prepareDefaultSettings(){this.fields_checkbox["move_all"]=!1,this.is_required=!0,this.is_readonly=!0,this.is_hidden=!0,this.force_validation=!0,this.confidence_threshold=0,this.match_score_threshold=0,Array.from(this.apiData).forEach((e=>{Array.from(e.rows).forEach((l=>{Array.from(l).forEach((l=>{!0===this.is_required&&(this.is_required=l.is_required),!0===this.is_readonly&&(this.is_readonly=l.is_readonly),!0===this.is_hidden&&(this.is_hidden=l.is_hidden),!0===this.force_validation&&(this.force_validation=l.force_validation),l.confidence_threshold>this.confidence_threshold&&(this.confidence_threshold=l.confidence_threshold),l.match_score_threshold>this.match_score_threshold&&(this.match_score_threshold=l.match_score_threshold);let t=l.field_label,s="pages.screen2a.",a="medi.";t=this.$t(s+l.translation_key)!==s+l.translation_key?this.$t(s+l.translation_key):this.$t(a+l.translation_key)!==a+l.translation_key?this.$t(a+l.translation_key):l.title,l.field_display_label=t,"DEFAULT"!==l["field_org_id"]&&(this.fields_checkbox[l.id]=!1),"DEFAULT"!=l["field_org_id"]||this.default_fields_groups.includes(e.id)||this.default_fields_groups.push(e.id)}))}))})),this.$forceUpdate()},saveNewFieldLabel(e){e.field_label=e.field_display_label},openCalcDialog(e){this.field_model=e,this.showFormulaDlg=!0},saveMasterDataSettings(){const e=this.field_model["fuzzy_search"],l=this.field_model["master_data_field_type"]||"",t=this.field_model["master_data_field"],s=l&&""!==l,a=t&&""!==t;a&&!s||!a&&s?this.showErrorToast(this.$t("master_data_field_warning")):!e||s?(this.field_model["fuzzy_name"]=e?l:null,this.field_model["fuzzy_field"]=a&&s?l+":"+t:null,this.showMasterDataPopup=!1,this.save()):this.showErrorToast(this.$t("master_data_type_warning"))},showMasterDataSettings(e){if("DEFAULT"==e["field_org_id"])return;this.filtered_master_fields=[],this.field_model=e;let l=!1,t="",s="";if(null!==this.field_model["fuzzy_name"]&&this.field_model["fuzzy_name"]&&(l=!0),null!==this.field_model["fuzzy_field"]&&this.field_model["fuzzy_field"]){var a=this.field_model["fuzzy_field"].split(":");t=a[0],s=a[1]}this.field_model["fuzzy_search"]=l,this.field_model["master_data_field_type"]=t,this.field_model["master_data_field"]=s,this.filertByTypeKey(),this.showMasterDataPopup=!0},filertByTypeKey(){this.field_model["master_data_field_type"]&&this.master_data_types_fields?this.filtered_master_fields=this.master_data_types_fields.filter((e=>e.type==this.field_model["master_data_field_type"])):this.filtered_master_fields=[]},filterMasterDataFieldsEvent(e,l,t){this.filertByTypeKey(),l(e?()=>{const l=e.toLowerCase();this.filtered_master_fields=this.filtered_master_fields.filter((e=>e.label.toLowerCase().indexOf(l)>-1))}:()=>{this.filertByTypeKey()})},showCreateGroupForm(){this.showGroupDetailsForm=!0,this.resetCreateGroupForm()},resetCreateGroupForm(){this.groupName="",this.groupTitle=""},closeGroupDlg(){this.showGroupDetailsForm=!1,this.resetCreateGroupForm()},validateGroupCreate(){let e=!0;return""===this.groupName||null===this.groupName?(e=!1,this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY"))):""===this.groupTitle||null===this.groupTitle?(e=!1,this.showErrorToast(this.$t("pages.messages.TITLE_MANDATORY"))):this.hasWhiteSpace(this.groupName)&&(e=!1,this.showErrorToast(this.$t("pages.messages.SPACES_NOT_ALLOWED"))),e},createGroup(){return jl(this,void 0,void 0,(function*(){try{if(!this.validateGroupCreate())return;this.showLoading();const e={title:this.groupTitle,group_name:this.groupName,doc_type_name:this.sub_doc_type_key?this.sub_doc_type_key:this.documentType,translation_key:this.groupName,is_sub_doc_type_field:this.sub_doc_type_key?"true":"false"},l=yield ll.id.createGroup(e);if(!1===l.success)throw{message:l.message};yield this.getSettingsByType(!1),yield this.getFieldGroups(),this.closeGroupDlg()}catch(e){const l=Yl.w.getErrorMessage(e);this.showErrorToast(l)}finally{this.hideLoading()}}))},fieldTypeRule(e){if(null===e)return"You must make a selection!"},showFieldDetailsDlg(e){this.groupName=e,this.resetCreateFieldForm(),this.showFieldDetailsForm=!0},resetCreateFieldForm(){this.fieldType="",this.fieldName="",this.fieldTitle="",this.field_list_of_values=""},closeFieldDlg(){this.showFieldDetailsForm=!1,this.groupName="",this.resetCreateFieldForm()},validateFieldCreate(){let e=!0;return""===this.fieldName||null===this.fieldName?(e=!1,this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY"))):""===this.fieldTitle||null===this.fieldTitle||""===this.fieldType||null===this.fieldType?(e=!1,this.showErrorToast(this.$t("pages.messages.TITLE_MANDATORY"))):this.hasWhiteSpace(this.fieldName)?(e=!1,this.showErrorToast(this.$t("pages.messages.SPACES_NOT_ALLOWED"))):this.checkFirstLetterIsSpecialOrNumber(this.fieldName)&&(e=!1,this.showErrorToast(this.$t("errors.special_letter_number_not_allowed"))),"ENUM"!==this.fieldType||""!==this.field_list_of_values&&null!==this.fieldType||(e=!1,this.showErrorToast(this.$t("pages.messages.LIST_OF_VALUES_MANDATORY"))),e},createFieldInGroup(){return jl(this,void 0,void 0,(function*(){try{if(!this.validateFieldCreate())return;this.showLoading(),this.showFieldDetailsForm=!1;const e={title:this.fieldTitle,field_name:this.fieldName,field_type:this.fieldType,group_name:this.groupName,list_of_values:this.field_list_of_values,enforce_list_of_values:!!this.field_list_of_values,doc_type_name:this.sub_doc_type_key?this.sub_doc_type_key:this.documentType,is_sub_doc_type_field:this.sub_doc_type_key?"true":"false"},l=yield ll.id.createField(e);if(!1===l.success)throw{message:l.message};this.closeGroupDlg(),this.getSettingsByType(!1)}catch(e){this.showErrorToast(this.$t("fieldname_already_exists"))}finally{this.hideLoading()}}))},isFieldHiddenOrReadonly(e){return!(!e.is_readonly&&!e.is_hidden)&&(this.is_required=!1,this.force_validation=!1,e.is_required=!1,e.force_validation=!1,!0)},isVisible(e){return!this.sub_doc_type_key||!(!e.is_sub_doc_type_field||1!=e.is_sub_doc_type_field)},deleteField(e,l=!1){return jl(this,void 0,void 0,(function*(){try{if(!l)return this.fieldDeleteConfirm=!0,void(this.selected_delete_record=e);this.showLoading();const t=yield ll.id.deleteField(this.selected_delete_record["id"]);if(!1===t.success)throw{message:t.message};this.showSuccessToast(this.$t("pages.messages.DELETED_SUCCESSFULLY")),this.getSettingsByType(!0)}catch(t){const e=Yl.w.getErrorMessage(t);this.showErrorToast(e)}finally{this.hideLoading()}}))},getFieldGroups(){return jl(this,void 0,void 0,(function*(){try{this.showLoading();const e=this.getDocTypeParams("doc_type_name"),l=yield ll.id.getGroupsByDocType(e);if(!1===l.success)throw{message:l.message};l.data.forEach(((e,l)=>{const t=Object.assign({},{value:e.id,label:this.getGroupTranslation(e),group_name:e.group_name});this.groups_options.push(t),this.all_groups.push(t)}))}catch(e){const l=Yl.w.getErrorMessage(e);this.showErrorToast(l)}finally{this.hideLoading()}}))},getGroupTranslation(e){return this.$t("pages.screen2a."+e.translation_key)==="pages.screen2a."+e.translation_key?e.title:this.$t("pages.screen2a."+e.translation_key)},updateFieldGroupClicked(){const e=this.fields_checkbox["move_all"];for(const l in this.fields_checkbox)this.fields_checkbox[l]=e},displayUpdateFieldGroupDialog(){let e=!1;for(const l in this.fields_checkbox)if(!this.exclude_fields.includes(l)&&this.fields_checkbox[l]){e=!0;break}e?this.updateGroupDialog=!0:this.showErrorToast(this.$t("select_fields"))},updateFieldGroups(){return jl(this,void 0,void 0,(function*(){try{if(!this.selected_group_id)return void this.showErrorToast(this.$t("select_group"));this.showLoading();let e=[];for(const s in this.fields_checkbox)this.exclude_fields.includes(s)||this.fields_checkbox[s]&&e.push(s);const l={field_ids:e.join(),group_id:this.selected_group_id},t=yield ll.id.reassignFieldsToGroup(l);if(!1===t.success)throw{message:t.message};yield this.getSettingsByType(!0)}catch(e){const l=Yl.w.getErrorMessage(e);this.showErrorToast(l)}finally{this.hideLoading()}}))},filterGroupsEvent(e,l,t){l(e?()=>{const l=e.toLowerCase();this.groups_options=this.all_groups.filter((e=>e.label.toLowerCase().indexOf(l)>-1))}:()=>{this.groups_options=this.all_groups})},deleteGroup(e){return jl(this,void 0,void 0,(function*(){try{if(!e)return void this.showErrorToast("Group not selected");this.showLoading();const l=yield ll.id.deleteGroups(e);if(!1===l.success)throw{message:l.message};yield this.getSettingsByType(!0)}catch(l){const e=Yl.w.getErrorMessage(l);this.showErrorToast(e)}finally{this.hideLoading()}}))}},setup(){const e=(0,Xe.DW)(),{getMasterDataTypesAndFields:l}=e,{master_data_types:t,master_data_types_fields:s}=(0,el.Jk)(e),a=(0,Xe.At)(),{doc_type_list:i,doc_type_loading:o}=(0,el.Jk)(a);let d={};const r=(0,Xe.wr)(),{getLovList:n}=r,{lov_list:c}=(0,el.Jk)(r);return{groupName:(0,Ie.iH)(""),groupTitle:(0,Ie.iH)(""),fieldName:(0,Ie.iH)(""),fieldTitle:(0,Ie.iH)(""),fieldType:(0,Ie.iH)(""),showGroupDetailsForm:(0,Ie.iH)(!1),showFieldDetailsForm:(0,Ie.iH)(!1),lov_list:c,getLovList:n,field_list_of_values:(0,Ie.iH)(""),doc_type_loading:o,doc_type_list:i,updateGroupDialog:(0,Ie.iH)(!1),master_data_types:t,master_data_types_fields:s,filtered_master_fields:(0,Ie.iH)([]),selected_group_id:(0,Ie.iH)(),all_groups:(0,Ie.iH)([]),groups_options:(0,Ie.iH)([]),default_fields_groups:(0,Ie.iH)([]),fields_checkbox:(0,Ie.iH)({}),getMasterDataTypesAndFields:l,field_model:(0,Ie.iH)(d),showMasterDataPopup:(0,Ie.iH)(!1),apiData:(0,Ie.iH)(),singleField:(0,Ie.iH)(!1),allField:(0,Ie.iH)(!1),documentType:(0,Ie.iH)("INVOICE"),parent_doc_type_name:(0,Ie.iH)(""),is_required:(0,Ie.iH)(!1),is_readonly:(0,Ie.iH)(!1),is_hidden:(0,Ie.iH)(!1),force_validation:(0,Ie.iH)(!1),confidence_threshold:(0,Ie.iH)(50),match_score_threshold:(0,Ie.iH)(50),showFormulaDlg:(0,Ie.iH)(!1),calculation_formula:(0,Ie.iH)(null),sub_doc_type_key:(0,Ie.iH)(""),tab:(0,Ie.iH)("fields"),fieldDeleteConfirm:(0,Ie.iH)(!1),selected_delete_record:(0,Ie.iH)({}),profile_options:[{label:"DEFAULT",value:"DEFAULT"},{label:"ZUGFeRD",value:"Zugferd"}],data_type:[{label:"Select Type",value:""},{label:Be.i18n.t("amount"),value:"AMOUNT"},{label:"STRING",value:"STRING"},{label:Be.i18n.t("invoice_date"),value:"DATE"},{label:Be.i18n.t("number"),value:"NUMBER"},{label:"BOOLEAN",value:"BOOLEAN"},{label:Be.i18n.t("currency"),value:"CURRENCY"},{label:"DROPDOWN",value:"ENUM"}]}}});var Jl=t(24554),Xl=t(57547),et=t(3269),lt=t(5906),tt=t(86602),st=t(62064),at=t(72448),it=t(65869),ot=t(5363),dt=t(46778),rt=t(10151),nt=t(39570),ct=t(13747),_t=t(25589),ut=t(68689),ht=t(75096),mt=t(99367),pt=t(60677);const ft=(0,Ol.Z)(Kl,[["render",Pe],["__scopeId","data-v-5d1fa975"]]),gt=ft;Ql()(Kl,"components",{QBtn:Zl.Z,QIcon:Jl.Z,QTabs:Xl.Z,QTab:et.Z,QTabPanels:lt.Z,QTabPanel:tt.Z,QSlider:st.Z,QSelect:at.Z,QSeparator:it.Z,QMarkupTable:Al.Z,QCheckbox:Gl.Z,QTooltip:ot.Z,QInput:Rl.Z,QDialog:dt.Z,QCard:rt.Z,QToolbar:nt.Z,QToolbarTitle:ct.Z,QCardSection:_t.Z,QForm:ut.Z,QAvatar:ht.Z,QCardActions:mt.Z,QField:Ml.Z}),Ql()(Kl,"directives",{ClosePopup:pt.Z})}}]);