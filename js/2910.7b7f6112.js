"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[2910],{12910:(e,o,t)=>{t.r(o),t.d(o,{default:()=>ts});var l=t(83673),i=t(62323);const s=e=>((0,l.dD)("data-v-7fabe194"),e=e(),(0,l.Cn)(),e),a={class:"row q-pl-md q-pr-md highlighted-back"},d={class:"col-4 secondary-c-text text-h6"},r=s((()=>(0,l._)("img",{width:"24",src:"back_new.svg"},null,-1))),n={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},m=s((()=>(0,l._)("img",{width:"24",src:"back_new.svg"},null,-1))),c={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},u={class:"col-8 q-pa-xs"},h={class:"float-right"},p={class:"row q-pl-md q-pr-md q-pb-md"},g={class:"col-xs-12 col-sm-2 col-md-2 col-lg-2 q-pt-sm full-height"},f={class:"full-width scroll-area-height scrolle-y"},_={class:"full-width",style:{position:"relative"}},v={class:"col-xs-12 col-sm-10 col-md-10 col-lg-10 padding-8-0-8-8"},y={class:"full-width"},w={class:"full-width"},C={class:"p-t-b-6 highlighted-back image_control_panel"},b={class:"row"},T={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},B={key:0,class:"row form-builder-image-container",id:"image_scrolle"},k={class:"image_container overflow-scroll",id:"image_container",style:{position:"relative"}},x={class:"max-width-80 q-pl-sm q-pr-sm"},M={class:"justify-center form-builder-image-container"},I=["data-id","onClick","src"],F={key:1,class:"full-width full-height"},L={key:0,class:"p-t-b-6 image_control_panel highlighted-back"},N={class:"row"},O={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},E={class:"row"},S={class:"col-sm-12 col-md-12 col-lg-12"},A={class:"row"},q={class:"col-sm-12 col-md-12 col-lg-12"},D={class:"col-sm-12 col-md-12 col-lg-12"},V=s((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},null,-1))),P={class:"col-sm-12 col-md-12 col-lg-12"};function U(e,o,t,s,U,W){const z=(0,l.up)("q-icon"),R=(0,l.up)("q-btn"),Z=(0,l.up)("helpLayoutbuilder"),$=((0,l.up)("q-item-label"),(0,l.up)("q-tooltip")),X=((0,l.up)("q-item-section"),(0,l.up)("q-item"),(0,l.up)("q-select"),(0,l.up)("q-tab")),H=(0,l.up)("q-tabs"),Y=(0,l.up)("q-separator"),Q=(0,l.up)("DefaultGroups"),J=(0,l.up)("q-expansion-item"),G=(0,l.up)("DefaultElements"),K=(0,l.up)("Elements"),j=(0,l.up)("q-tab-panel"),ee=(0,l.up)("Properties"),oe=(0,l.up)("GeneralSettings"),te=(0,l.up)("q-tab-panels"),le=(0,l.up)("FieldsDesigner"),ie=(0,l.up)("ImageComponent"),se=(0,l.up)("import-pdf"),ae=(0,l.up)("q-toggle"),de=(0,l.up)("q-splitter"),re=(0,l.up)("q-toolbar-title"),ne=(0,l.up)("q-toolbar"),me=(0,l.up)("q-input"),ce=(0,l.up)("q-form"),ue=(0,l.up)("q-card-section"),he=(0,l.up)("q-card"),pe=(0,l.up)("q-dialog"),ge=(0,l.up)("Loader"),fe=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",a,[(0,l._)("div",d,[e.docType&&!e.subDocType?((0,l.wg)(),(0,l.j4)(R,{key:0,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/settings/document"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:"text-red-13",size:"sm"},{default:(0,l.w5)((()=>[r])),_:1}),(0,l._)("label",n,(0,i.zw)(e.$t("pages.settings.document_types")),1)])),_:1})):(0,l.kq)("",!0),e.docType&&e.subDocType?((0,l.wg)(),(0,l.j4)(R,{key:1,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/settings/sub_doc_type/"+e.docType},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:"text-red-13",size:"sm"},{default:(0,l.w5)((()=>[m])),_:1}),(0,l._)("label",c,(0,i.zw)(e.$t("sub_doc_type")),1)])),_:1},8,["to"])):(0,l.kq)("",!0)]),(0,l._)("div",u,[(0,l._)("div",h,[(0,l.Wm)(Z)]),(0,l.Wm)(R,{color:"primary",label:e.$t("copy_json"),class:"float-right",icon:"content_copy",onClick:o[0]||(o[0]=o=>e.copyTemplate())},null,8,["label"]),(0,l.Wm)(R,{color:"primary",label:e.$t("edit_json"),class:"float-right q-mr-md",icon:"visibility",onClick:o[1]||(o[1]=o=>e.openJsonForm())},null,8,["label"]),(0,l.Wm)(R,{color:"primary",label:e.$t("use_default_template"),class:"float-right q-mr-md",onClick:o[2]||(o[2]=o=>e.restoreDefaults())},null,8,["label"]),(0,l.kq)("",!0)])]),(0,l._)("div",p,[(0,l._)("div",g,[(0,l._)("div",f,[(0,l._)("div",_,[(0,l.Wm)(H,{modelValue:e.activeTab,"onUpdate:modelValue":o[5]||(o[5]=o=>e.activeTab=o),dense:"","active-class":"highlighted-back","indicator-color":"primary","active-color":"primary",align:"justify"},{default:(0,l.w5)((()=>[(0,l.Wm)(X,{name:"general_settings",class:"no-padding-left-right",icon:"settings"}),(0,l.Wm)(X,{name:"form_elements",label:e.$t("form_builder.elements")},null,8,["label"]),(0,l.Wm)(X,{name:"element_properties",label:e.$t("form_builder.properties")},null,8,["label"])])),_:1},8,["modelValue"]),(0,l.Wm)(Y),(0,l.Wm)(te,{modelValue:e.activeTab,"onUpdate:modelValue":o[6]||(o[6]=o=>e.activeTab=o),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{name:"form_elements"},{default:(0,l.w5)((()=>[(0,l.Wm)(J,{"expand-separator":"","default-opened":"",label:e.$t("groups"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px q-mt-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q)])),_:1},8,["label"]),(0,l.Wm)(J,{"expand-separator":"",label:e.$t("fields"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px q-mt-sm",class:"q-mb-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(G)])),_:1},8,["label"]),(0,l.Wm)(J,{"expand-separator":"",label:e.$t("form_builder.form_elements"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px"},{default:(0,l.w5)((()=>[e.renderComponent?((0,l.wg)(),(0,l.j4)(K,{key:e.keyToUpdateComponnets})):(0,l.kq)("",!0)])),_:1},8,["label"]),(0,l.Wm)(Y)])),_:1}),(0,l.Wm)(j,{name:"element_properties"},{default:(0,l.w5)((()=>[e.renderComponent?((0,l.wg)(),(0,l.j4)(ee,{key:e.keyToUpdateComponnets})):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(j,{name:"general_settings"},{default:(0,l.w5)((()=>[(0,l.Wm)(oe)])),_:1})])),_:1},8,["modelValue"])])])]),(0,l._)("div",v,[(0,l.Wm)(de,{limits:[30,95],modelValue:e.formSplitterModel,"onUpdate:modelValue":[o[10]||(o[10]=o=>e.formSplitterModel=o),e.loadImageDetails],class:"scroll-area-height"},{before:(0,l.w5)((()=>[(0,l._)("div",y,[(0,l.Wm)(le,{isPanelSection:!1,onSaveTemplate:e.saveTemplate,onShowConnectionFromField:e.showConnectionFromField,onMarkTableColumns:e.markTableColumns},null,8,["onSaveTemplate","onShowConnectionFromField","onMarkTableColumns"])])])),after:(0,l.w5)((()=>[(0,l._)("div",w,[(0,l.Wm)(de,{limits:[30,94],disable:!e.isExtenedPanel,modelValue:e.splitterModel,"onUpdate:modelValue":o[9]||(o[9]=o=>e.splitterModel=o),horizontal:"","separator-class":"bg-black",class:"scroll-area-height","before-class":"handle-scroll"},{before:(0,l.w5)((()=>[(0,l._)("div",C,[(0,l._)("div",b,[(0,l._)("div",T,[(0,l.Wm)(z,{name:"img:zoom_in.svg",size:"24px",class:"q-mr-sm cursor-pointer",onClick:e.zoomIn},{default:(0,l.w5)((()=>[(0,l.Wm)($,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("zoom_in")),1)])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(z,{name:"img:zoom_out.svg",size:"24px",class:"q-mr-sm cursor-pointer",onClick:e.zoomOut},{default:(0,l.w5)((()=>[(0,l.Wm)($,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("zoom_out")),1)])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(z,{name:"img:settings/export.svg",size:"24px",class:"q-mr-sm cursor-pointer right",onClick:o[7]||(o[7]=o=>e.showImages=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)($,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("upload")),1)])),_:1})])),_:1})])])]),e.showImages?((0,l.wg)(),(0,l.iD)("div",B,[(0,l._)("div",k,[e.formLayoutImages?((0,l.wg)(),(0,l.j4)(ie,{key:0,"pos-correction":!1,width:e.imageWidth,cropUrl:e.baseUrl+"/"+e.formLayoutImages[e.imageIndex].path+"?"+e.keyImageChange,markedAreasStr:e.markedAreasStr,connectionId:e.connectionId,allowMultiSelection:e.allowMultiSelection,onRestrictDrawing:e.restrictDrawing},null,8,["width","cropUrl","markedAreasStr","connectionId","allowMultiSelection","onRestrictDrawing"])):(0,l.kq)("",!0)]),(0,l._)("div",x,[(0,l._)("div",M,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.formLayoutImages,((o,t)=>((0,l.wg)(),(0,l.iD)("img",{"data-id":t,onClick:o=>e.loadImage(t,!1),class:(0,i.C_)([t===e.imageIndex?"active":"","cursor-pointer q-ma-sm shadow-2 solid-border-1px"]),key:t,src:e.baseUrl+"/"+o.path+"?"+e.keyImageChange,width:"50",draggable:"false"},null,10,I)))),128))])])])):(0,l.kq)("",!0),e.showImages?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",F,[(0,l.Wm)(se,{onSaveTemplate:e.saveTemplate,onLoadImage:e.loadImage},null,8,["onSaveTemplate","onLoadImage"])]))])),after:(0,l.w5)((()=>[e.isExtenedPanel?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",L,[(0,l._)("div",N,[(0,l._)("div",O,[(0,l.Wm)(ae,{size:"24px",modelValue:e.isExtenedPanel,"onUpdate:modelValue":o[8]||(o[8]=o=>e.isExtenedPanel=o),class:"float-right"},{default:(0,l.w5)((()=>[(0,l.Wm)($,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("activate")),1)])),_:1})])),_:1},8,["modelValue"])])])])),e.isExtenedPanel&&e.showPanel?((0,l.wg)(),(0,l.j4)(le,{key:1,isPanelSection:!0,onSaveTemplate:e.saveTemplate,onShowConnectionFromField:e.showConnectionFromField,onMarkTableColumns:e.markTableColumns},null,8,["onSaveTemplate","onShowConnectionFromField","onMarkTableColumns"])):(0,l.kq)("",!0)])),_:1},8,["disable","modelValue"])])])),_:1},8,["modelValue","onUpdate:modelValue"])])]),(0,l.Wm)(pe,{modelValue:e.showJsonForm,"onUpdate:modelValue":o[14]||(o[14]=o=>e.showJsonForm=o)},{default:(0,l.w5)((()=>[(0,l.Wm)(he,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ne,{class:"secondary-toolbar"},{default:(0,l.w5)((()=>[(0,l.Wm)(re,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("edit_json")),1)])),_:1}),(0,l.wy)((0,l.Wm)(R,{flat:"",round:"",dense:"",icon:"close"},null,512),[[fe]])])),_:1}),(0,l.Wm)(ue,{class:"width-500"},{default:(0,l.w5)((()=>[(0,l._)("div",E,[(0,l._)("div",S,[(0,l._)("div",A,[(0,l.Wm)(ce,{class:"full-width"},{default:(0,l.w5)((()=>[(0,l._)("div",q,(0,i.zw)(e.$t("pages.fields_settings.formula")),1),(0,l._)("div",D,[(0,l.Wm)(me,{outlined:"",modelValue:this.strFormLayout,"onUpdate:modelValue":o[11]||(o[11]=e=>this.strFormLayout=e),type:"textarea"},null,8,["modelValue"])]),V,(0,l._)("div",P,[(0,l.wy)((0,l.Wm)(R,{label:e.$t("pages.user.save"),onClick:o[12]||(o[12]=o=>e.savePastedJson()),color:"primary",icon:"done"},null,8,["label"]),[[fe]]),(0,l.Wm)(R,{outline:"",color:"primary",label:"Copy Json",class:"float-right",icon:"content_copy",onClick:o[13]||(o[13]=o=>e.copyTemplate())})])])),_:1})])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(ge)],64)}var W=t(77987),z=t(10321),R=t(77378);const Z={class:"full-width full-height q-pa-lg"},$={class:""},X=(0,l._)("img",{src:"settings/export.svg",width:"100","aria-hidden":"true"},null,-1),H={style:{padding:"20px"}},Y={class:"text-white"};function Q(e,o,t,s,a,d){const r=(0,l.up)("q-icon"),n=(0,l.up)("q-tooltip"),m=(0,l.up)("q-file");return(0,l.wg)(),(0,l.iD)("div",Z,[(0,l._)("div",{class:"drag-area text-center full-width full-height dashed-border-2px",style:{padding:"20px"},onDrop:o[1]||(o[1]=(...o)=>e.drop&&e.drop(...o)),onDragover:o[2]||(o[2]=(...o)=>e.allowDrop&&e.allowDrop(...o)),onDragleave:o[3]||(o[3]=(...o)=>e.dragLeave&&e.dragLeave(...o))},[(0,l._)("div",$,[X,(0,l._)("div",H,(0,i.zw)(e.$t("pages.land.dragndrop")),1),(0,l.Wm)(m,{style:{width:"200px !important",margin:"auto","white-space":"nowrap"},color:"white","data-cy":"upload-multiple-docs","label-color":"white","bg-color":"primary",filled:"","onUpdate:modelValue":[e.uploadFile,o[0]||(o[0]=o=>e.uploadedFiles=o)],modelValue:e.uploadedFiles,label:e.$t("pages.land.upload")},{prepend:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"attachment",color:"white"})])),file:(0,l.w5)((({index:e,file:o})=>[(0,l._)("div",Y,(0,i.zw)(o.name),1),(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(o.name),1)])),_:2},1024),(0,l.kq)("",!0)])),_:1},8,["onUpdate:modelValue","modelValue","label"])])],32)])}var J=t(30052),G=t.n(J),K=t(61959),j=t(45401),ee=t(60727),oe=t(54268),te=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{r(l.next(e))}catch(o){s(o)}}function d(e){try{r(l["throw"](e))}catch(o){s(o)}}function r(e){e.done?t(e.value):i(e.value).then(a,d)}r((l=l.apply(e,o||[])).next())}))};const le=(0,l.aZ)({el:"#app",mixins:[j.Z,R.Z],emits:["saveTemplate","loadImage"],props:["showSpinner"],data(){return{}},methods:{uploadFile(e){this.uploadedFiles=e;let o=this.uploadedFiles;o||this.showErrorToast(this.$t("pages.messages.NO_FILE_SELECTED")),this.uploadFilee(o)},allowDrop(e){e.preventDefault(),e.currentTarget.classList.add("bg-grey-5"),e.currentTarget.classList.add("bd-shadow")},drop(e){e.preventDefault(),e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow"),this.uploadFilee(e.dataTransfer.files[0])},dragLeave(e){e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow")},uploadFilee(e){return te(this,void 0,void 0,(function*(){if(this.uploadedFiles=null,"application/pdf"!==e.type)return void this.showErrorToast(this.$t("pages.messages.ONLY_PDF_ALLOWED"));this.showLoading();let o=this.$route.params.id;o||this.showErrorToast("Template Id is mandatory");let t,l=new FormData;l.append("id",o),l.append("file",e);try{let e=yield(0,oe.O_)();t=yield G().post(oe.hi.upload_template_sample,l,{headers:{"Content-Type":"multipart/form-data",Authorization:e}})}catch(i){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}this.formLayoutImages=[],this.formLayoutImages=t.data.images,this.proximityTokens=t.data.proximity_tokens,this.showImages=!0,this.$emit("loadImage",0,!0),this.$emit("saveTemplate",!0)}))}},setup(){const e=(0,ee.nc)(),{showImages:o,formLayoutImages:t,proximityTokens:l}=(0,z.Jk)(e);return{showImages:o,proximityTokens:l,formLayoutImages:t,uploadedFiles:(0,K.iH)(null)}}});var ie=t(74260),se=t(2165),ae=t(64974),de=t(24554),re=t(5363),ne=t(7518),me=t.n(ne);const ce=(0,ie.Z)(le,[["render",Q]]),ue=ce;me()(le,"components",{QBtn:se.Z,QFile:ae.Z,QIcon:de.Z,QTooltip:re.Z});const he={class:"p-t-b-6 image_control_panel highlighted-back"},pe={class:"row"},ge={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},fe=["id"],_e={class:"full-width"},ve=["id"],ye={class:"q-pt-sm q-pb-sm"},we={key:0,class:"row cursor-move"},Ce={class:"col-sm-8 col-md-8 col-lg-8 q-pr-sm"},be={class:"col-sm-4 col-md-4 col-lg-4"},Te={key:1,class:"row float-right display-contents"},Be={class:"full-width meta"},ke=["onClick"],xe={key:1,class:"full-width q-pa-xs height-24"};function Me(e,o,t,s,a,d){const r=(0,l.up)("q-tooltip"),n=(0,l.up)("q-icon"),m=(0,l.up)("q-toggle"),c=(0,l.up)("q-input"),u=(0,l.up)("q-btn"),h=(0,l.up)("draggable");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",he,[(0,l._)("div",pe,[(0,l._)("div",ge,[(0,l.Wm)(n,{name:"add_to_queue",size:"24px",class:"float-left q-mr-sm cursor-pointer",onClick:o[0]||(o[0]=o=>e.addGroup())},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("create_group")),1)])),_:1})])),_:1}),e.isPanelSection?((0,l.wg)(),(0,l.j4)(m,{key:0,size:"24px",modelValue:e.isExtenedPanel,"onUpdate:modelValue":o[1]||(o[1]=o=>e.isExtenedPanel=o),class:"float-right"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("deactivate")),1)])),_:1})])),_:1},8,["modelValue"])):(0,l.kq)("",!0),(0,l.Wm)(n,{name:"img:save.svg",size:"24px",class:"float-right q-mr-sm cursor-pointer",onClick:o[2]||(o[2]=o=>e.$emit("saveTemplate",!0))},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("save")),1)])),_:1})])),_:1})])])]),((0,l.wg)(),(0,l.iD)("div",{key:e.reRenderOnGroupChange,class:(0,i.C_)(e.isPanelSection?"":"right-content-height scrolle-y"),id:e.isPanelSection?"field_scrolle_2":"field_scrolle"},[(0,l._)("div",_e,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.formLayout,((o,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:`div-${t}`},[o.is_panel_section_group===e.isPanelSection?((0,l.wg)(),(0,l.iD)("div",{key:0,id:`div-${t}`,class:(0,i.C_)(["section-block dashed-border q-mb-md q-pa-sm display-inline-block",e.getElementBorder(o)]),style:(0,i.j5)("width:"+e.getElementWidth(o)+"%")},[(0,l._)("div",ye,[e.isPanelSection?((0,l.wg)(),(0,l.iD)("div",Te,[(0,l.Wm)(u,{outline:"",round:"",size:"sm",color:"primary",icon:"settings",class:"h-m-5",onClick:t=>e.inputClicked(o.name)},null,8,["onClick"]),(0,l.Wm)(u,{outline:"",round:"",size:"sm",color:"red-5",icon:"delete",class:"h-m-5 float-right",onClick:o=>e.deleteSection(t)},null,8,["onClick"])])):((0,l.wg)(),(0,l.iD)("div",we,[(0,l._)("div",Ce,[(0,l.Wm)(c,{outlined:"",dense:"",modelValue:o.title,"onUpdate:modelValue":e=>o.title=e,label:e.$t("group_title"),onClick:t=>e.inputClicked(o.name)},null,8,["modelValue","onUpdate:modelValue","label","onClick"])]),(0,l._)("div",be,[(0,l.Wm)(u,{outline:"",round:"",size:"sm",color:"red-5",icon:"delete",class:"h-m-5 float-right",onClick:o=>e.deleteSection(t)},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("delete_group")),1)])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(u,{outline:"",round:"",size:"sm",color:"primary",icon:"move_up",class:"h-m-5 float-right",onClick:o=>e.moveGroupUp(o,t)},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("move_up")),1)])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(u,{outline:"",round:"",size:"sm",color:"primary",icon:"move_down",class:"h-m-5 float-right",onClick:o=>e.moveGroupDown(o,t)},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("move_down")),1)])),_:1})])),_:2},1032,["onClick"])])]))]),(0,l._)("div",Be,[(0,l.Wm)(h,{modelValue:o.rows,"onUpdate:modelValue":e=>o.rows=e,class:"dragArea","item-key":"name",group:{name:"formbuilder",pull:!1,put:!0},sort:!0,"ghost-class":"sortable__ghost",onChange:e.itemAdded},{item:(0,l.w5)((({element:o})=>[(0,l._)("div",(0,l.dG)(o,{onClick:t=>e.inputClicked(o.name),class:["element_parent q-pa-sm cursor-move",(o.name==e.activeFieldName?"is--active  dashed-border":" ")+(e.isPanelSection?" ":" display-block")+(e.isPanelSection?" ":" display-block ")+(o.tr_ocr_model_id?" text-primary ":" ")],style:"width:"+e.getElementWidth(o)+"%"}),[e.renderComponent?((0,l.wg)(),(0,l.j4)((0,l.LL)(o.fieldType),{key:0,currentField:o,isReadOnly:!1,fieldName:o.name,groupIndex:t,onInputClicked:e.inputClicked,onInputValueChanges:e.inputValueChanges,onUpdateModel:e.updateModel,onApplyFuzzySearch:e.applyFuzzySearch,onMarkTableColumns:e.markTableColumns,class:"form__field"},null,8,["currentField","fieldName","groupIndex","onInputClicked","onInputValueChanges","onUpdateModel","onApplyFuzzySearch","onMarkTableColumns"])):(0,l.kq)("",!0),o.name===e.activeFieldName?((0,l.wg)(),(0,l.iD)("div",xe,[o.fieldType===e.TABLE_OF_CHECKBOXES?((0,l.wg)(),(0,l.j4)(u,{key:0,round:"",color:"primary",icon:"table_rows",size:"xs",class:"h-m-5",onClick:t=>e.addTableRow(o.name)},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("add_row")),1)])),_:1})])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(o.fieldType,e.TABLE_OF_CHECKBOXES,(0,l.kq)("",!0)),(0,l.Wm)(u,{round:"",color:"primary",icon:"delete",size:"xs",class:"float-right delete-ele",onClick:o=>e.removeField(o,t)},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])):(0,l.kq)("",!0)],16,ke)])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])],14,ve)):(0,l.kq)("",!0)],64)))),128))])],10,fe))],64)}var Ie=t(11185),Fe=t(40470),Le=t.n(Fe),Ne=t(41891),Oe=t(9062),Ee=t(40386),Se=t(27728),Ae=t(49629),qe=t(20850),De=t(22102),Ve=t(39180),Pe=t(81964),Ue=t(71814),We=t(61402),ze=t(40925),Re=t(49836),Ze=t(23911),$e=t(56040),Xe=t(12121),He=t(46614),Ye=t(87344),Qe=t(35627),Je=t(85854);const Ge=(0,l.aZ)({el:"fields_designer",mixins:[j.Z,R.Z],emits:["showConnectionFromField","saveTemplate","markTableColumns"],props:{isPanelSection:{type:Boolean,default:!1}},data(){return{reRenderOnGroupChange:(0,K.iH)(0),TABLE_OF_CHECKBOXES:Je.oh.TABLE_OF_CHECKBOXES}},components:{draggable:Le(),Label:Oe.Z,CheckBox:Ee.Z,TextInput:Ve.Z,EnumInput:Pe.Z,ExportButton:Se.Z,MultiCheckBox:Ue.Z,LineItemTable:Ze.Z,TableOfCheckboxes:Re.Z,AmountButtonsPanel:ze.Z,HorizontalSeparator:$e.Z,AditionalAmountButtonsPanel:He.Z,ExtractedTableTabPanels:Ye.Z,PoMatchButton:Ae.Z,SaveRulesButton:qe.Z,AutoAccountingButton:De.Z,InvoiceButtons:Xe.Z,QRCodeExtractedFields:Qe.Z},mounted:function(){window.et=this,document.addEventListener("add_field_to_designer",this.addFieldToDesigner),document.addEventListener("element_click",this.triggerFieldFocus)},unmounted:function(){document.removeEventListener("add_field_to_designer",this.addFieldToDesigner),document.removeEventListener("element_click",this.triggerFieldFocus)},methods:{itemAdded(e){let o=e.added.element;if(this.keyToUpdateComponnets++,!o.hasOwnProperty("rows"))return;o.elementWidth=100,o.is_stcky_group=!1,o.right_border=!!this.isPanelSection,o.bottom_border=!!this.isPanelSection,o.is_panel_section_group=this.isPanelSection;let t=[];o.rows.forEach(((e,o)=>{e.forEach(((o,l)=>{o.elementWidth=this.calculateRowColSize(e.length),t.push(o)}))})),o.rows=[],o.rows=t,this.formLayout.pop(),(0,Ne.s_)(this.docType)&&"tax_details"==o.name&&(this.filterFieldsForInvoices(o),this.adjustFieldsForInvoices(o)),this.formLayout.push(o)},filterFieldsForInvoices(e){for(let[o,t]of e.rows.entries())if(Je.kC.amountGroup1.includes(t.field_name)){e.rows.splice(o,0,We.q.data().AMOUNT_BUTTONS_PANEL);break}for(let[o,t]of e.rows.entries())if(Je.kC.aditionalAmountFields.includes(t.field_name)){e.rows.splice(o,0,We.q.data().ADITIONAL_AMOUNT_BUTTONS_PANEL);break}},adjustFieldsForInvoices(e){for(let[o,t]of e.rows.entries())Je.kC.amountPanelField.includes(t.field_name)?t.elementWidth=Math.round(this.calculateRowColSize(Je.kC.amountGroup1.length)):Je.kC.aditionalAmountFields.includes(t.field_name)&&(t.elementWidth=Math.round(this.calculateRowColSize(Je.kC.additionalAmountInRow)))},calculateRowColSize(e){return e>1?100/e:100},addGroup(){const e={fieldType:Je.oh.GROUP,name:"group_"+(0,Ie.Z)(),title:"",group_key:"",is_panel_section_group:this.isPanelSection,elementWidth:100,right_border:!!this.isPanelSection,bottom_border:!!this.isPanelSection,is_stcky_group:!1,short_cut_key_1:"",short_cut_key_2:"",rows:[]};this.formLayout.push(e),this.formBuilderConfigModel[e.name]=e},deleteSection(e){this.activeTab="form_elements",this.activeFieldName="",this.$nextTick((function(){this.formLayout.splice(e,1),this.reRenderOnGroupChange++}))},moveGroupUp(e,o){if(0==o)return;const t=o-1,l=JSON.parse(JSON.stringify(this.formLayout[o]));this.formLayout.splice(o,1),this.formLayout.splice(t,0,l),this.reRenderOnGroupChange++,this.$nextTick((function(){let e="div-"+t;document.getElementById(e).scrollIntoView()}))},moveGroupDown(e,o){if(this.formLayout.length==o)return;const t=o+1,l=JSON.parse(JSON.stringify(this.formLayout[o]));this.formLayout.splice(o,1),this.formLayout.splice(o+1,0,l),this.reRenderOnGroupChange++,this.$nextTick((function(){let e="div-"+t;document.getElementById(e).scrollIntoView()}))},removeField(e,o){if(e.stopPropagation(),this.formBuilderConfigModel[this.activeFieldName]&&this.formBuilderConfigModel[this.activeFieldName].isDefaultField)for(let t of this.defaultFields)if(t.name===this.activeFieldName){t.isAlreadyAdded=!1;break}this.formLayout[o].rows=this.formLayout[o].rows.filter((e=>e.name!==this.activeFieldName)),this.removeChildElements(this.formBuilderConfigModel[this.activeFieldName]),delete this.formBuilderConfigModel[this.activeFieldName],delete this.formBuilderModel[this.activeFieldName],this.activeFieldName="",this.activeTab="form_elements"},removeChildElements(e){try{if(!e.hasOwnProperty("child_elements")||!Array.isArray(e.child_elements))return;for(let[o,t]of Object.entries(e.child_elements)){const e=t;delete this.formBuilderConfigModel[e.name],delete this.formBuilderModel[e.name]}}catch(o){}},getElementBorder(e){let o="";return this.formBuilderConfigModel.hasOwnProperty(e.name)?(o=this.formBuilderConfigModel[e.name].right_border?" border-right":"",o+=this.formBuilderConfigModel[e.name].bottom_border?" border-bottom":"",o):(o=e.right_border?" border-right":"",o+=e.bottom_border?" border-bottom":"",o)},triggerFieldFocus(e){this.inputClicked(e.detail)},inputClicked(e){this.activeTab="element_properties",this.activeFieldName=e,Je.oh.TABLE_OF_CHECKBOXES!==this.formBuilderConfigModel[e].fieldType&&Je.oh.EXPORT_BUTTON!==this.formBuilderConfigModel[e].fieldType&&(this.setTrOcrModeld(e),this.allowAreaSelection&&this.showConnectionFromField(e))},setTrOcrModeld(e){this.formBuilderConfigModel[e].hasOwnProperty("tr_ocr_model_id")||(this.formBuilderConfigModel[e].tr_ocr_model_id="")},inputValueChanges(e,o){Je.oh.TABLE_OF_CHECKBOXES===o?this.$emit("showConnectionFromField",e):"checkbox"===o&&this.inputClicked(e),setTimeout((()=>{this.formBuilderModel[e].formatted_value=!1}),50)},updateModel(e,o=!1){if(this.formBuilderConfigModel[e.name]=JSON.parse(JSON.stringify(e)),e.fieldType===Je.oh.HORIZONTAL_SEPARATOR&&(e.hasOwnProperty("space_from_top")||e.hasOwnProperty("space_from_bottom")||(this.formBuilderConfigModel[e.name].space_from_top="q-mt-lg",this.formBuilderConfigModel[e.name].space_from_bottom="")),e.fieldType===Je.oh.EXTRACTED_TABLE&&(this.formBuilderModel[e.name]=JSON.parse(JSON.stringify(e))),e.fieldType===Je.oh.AI_EXTRACTED_TABLE&&(this.formBuilderModel[e.name]=JSON.parse(JSON.stringify(e))),e.fieldType!==Je.oh.TABLE_OF_CHECKBOXES){if(this.formBuilderModel[e.name]=[],this.formBuilderModel[e.name].page="",this.formBuilderModel[e.name].color="",this.formBuilderModel[e.name].score="",this.formBuilderModel[e.name].coords=[],this.formBuilderModel[e.name].confidence="",e.fieldType===Je.oh.MULTI_CHECK_BOX?(this.formBuilderModel[e.name].groupList=[],this.formBuilderModel[e.name].value="",this.formBuilderModel[e.name].formatted_value=""):e.fieldType===Je.oh.CHECK_BOX?(this.formBuilderModel[e.name].value=!1,this.formBuilderModel[e.name].formatted_value=!1,this.formBuilderConfigModel[e.name].hasOwnProperty("field_group")||(this.formBuilderConfigModel[e.name]["field_group"]=""),this.formBuilderConfigModel[e.name].hasOwnProperty("field_threshold")||(this.formBuilderConfigModel[e.name]["field_threshold"]=""),this.formBuilderConfigModel[e.name].hasOwnProperty("run_script_on_change")||(this.formBuilderConfigModel[e.name]["run_script_on_change"]=!1),this.formBuilderConfigModel[e.name].hasOwnProperty("tabIndex")||(this.formBuilderConfigModel[e.name]["tabIndex"]=0)):(this.formBuilderModel[e.name].value="",this.formBuilderModel[e.name].formatted_value="",this.formBuilderConfigModel[e.name].is_textarea=!!this.formBuilderConfigModel[e.name].is_textarea,this.formBuilderConfigModel[e.name].run_script_on_change=!!this.formBuilderConfigModel[e.name].run_script_on_change),this.formBuilderConfigModel[e.name].hasOwnProperty("tabIndex")||(this.formBuilderConfigModel[e.name].tabIndex=0),e.isDefaultField)for(let o of this.defaultFields)if(o.name===e.name){o.isAlreadyAdded=!0;break}o||(this.renderChildElements(e.name),this.activeFieldName=e.name)}else this.formBuilderConfigModel[e.name].tableBodyRows.forEach(((e,o)=>{e.forEach(((e,o)=>{e.hasOwnProperty("field_group")||(e["field_group"]=""),e.hasOwnProperty("field_threshold")||(e["field_threshold"]=""),e.hasOwnProperty("run_script_on_change")||(e["run_script_on_change"]=!1),e.hasOwnProperty("tabIndex")||(e["tabIndex"]=0),this.formBuilderModel[e.name]=JSON.parse(JSON.stringify(e)),this.formBuilderConfigModel[e.name]=JSON.parse(JSON.stringify(e))}))}))},applyFuzzySearch(e){return null},markTableColumns(e){this.$emit("markTableColumns",e)},showConnectionFromField(e){Je.P8.includes(this.formBuilderConfigModel[e].fieldType)&&this.$emit("showConnectionFromField",e)},addTableRow(e){let o=JSON.parse(JSON.stringify(Je.Ng));for(let t of o)t.name="checkbox_"+(0,Ie.Z)(),t.formatted_value=!1,t.value=!1,t.fieldType=Je.oh.CHECK_BOX,this.formBuilderConfigModel[t.name]=[],this.formBuilderConfigModel[t.name]=JSON.parse(JSON.stringify(t)),this.formBuilderModel[t.name]=[],this.formBuilderModel[t.name].page="",this.formBuilderModel[t.name].color="",this.formBuilderModel[t.name].score="",this.formBuilderModel[t.name].coords=[],this.formBuilderModel[t.name].value=!1,this.formBuilderModel[t.name].confidence="",this.formBuilderModel[t.name].formatted_value=!1;this.formBuilderConfigModel[e].tableBodyRows.push(o)},addTableColumn(e){for(let o of this.formBuilderConfigModel[e].tableBodyRows){let e={isLabelArea:!1,isDisabled:!1,name:(0,Ie.Z)()};o.push(e)}for(let o of this.formBuilderConfigModel[e].tableHeaderRows)o.push("C")}},setup(){const e=(0,ee.nc)(),{docType:o,showImages:t,activeTab:l,formLayout:i,defaultFields:s,formBuilderModel:a,formBuilderConfigModel:d,activeFieldName:r,keyToUpdateComponnets:n,renderComponent:m,formLayoutImages:c,isExtenedPanel:u,allowAreaSelection:h}=(0,z.Jk)(e),{getElementWidth:p,renderChildElements:g}=e;return{renderChildElements:g,docType:o,activeTab:l,showImages:t,formLayout:i,defaultFields:s,activeFieldName:r,renderComponent:m,formBuilderModel:a,formLayoutImages:c,keyToUpdateComponnets:n,formBuilderConfigModel:d,allowAreaSelection:h,isExtenedPanel:u,getElementWidth:p}}});var Ke=t(28886),je=t(64689),eo=t(86115);const oo=(0,ie.Z)(Ge,[["render",Me],["__scopeId","data-v-43a5c844"]]),to=oo;me()(Ge,"components",{QIcon:de.Z,QTooltip:re.Z,QToggle:Ke.Z,QInput:je.Z,QBtn:se.Z,QField:eo.Z});const lo={key:0,class:"full-width"},io={class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm cursor-pointer mt-5 border-radius-5px"},so={class:"row"},ao=["src"],ro={class:""};function no(e,o,t,s,a,d){const r=(0,l.up)("draggable");return e.filteredFields.length>0?((0,l.wg)(),(0,l.iD)("div",lo,[(0,l.Wm)(r,{list:e.filteredFields,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{item:(0,l.w5)((({element:e})=>[(0,l._)("div",io,[(0,l._)("div",so,[(0,l._)("img",{src:e.icon,width:"14",class:"q-mr-sm"},null,8,ao),(0,l._)("div",ro,(0,i.zw)(e.text),1)])])])),_:1},8,["list"])])):(0,l.kq)("",!0)}var mo=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{r(l.next(e))}catch(o){s(o)}}function d(e){try{r(l["throw"](e))}catch(o){s(o)}}function r(e){e.done?t(e.value):i(e.value).then(a,d)}r((l=l.apply(e,o||[])).next())}))};const co=(0,l.aZ)({name:"Elements",components:{draggable:Le()},data(){return{tables:(0,K.iH)(We.q.data().tables),fields:(0,K.iH)(We.q.data().fields),dropElementOptions:We.q.data().dropElementOptions}},mounted(){this.init()},methods:{init(){this.prepareTables(),this.filteredFields=this.fields.filter((e=>0==e.hide_in_panel_list||void 0==e.hide_in_panel_list))},prepareTables(){return mo(this,void 0,void 0,(function*(){const e=this.$route.params.doc_type;yield this.getDocumentTables(String(this.$route.params.doc_type));for(let[o,t]of Object.entries(this.documentTables))this.tables[0].name=o,this.tables[0].text="Table ("+o+")","INVOICE"==e&&(this.tables[0].fieldType=Je.oh.LINE_ITEM_TABLE),this.documentTableNames.push(o)}))},checkStopDragCondition(e){}},setup(){const e=(0,ee.nc)(),{documentTables:o,documentTableNames:t}=(0,z.Jk)(e),{getDocumentTables:l}=e;return{documentTables:o,documentTableNames:t,getDocumentTables:l,filteredFields:(0,K.iH)([])}}}),uo=(0,ie.Z)(co,[["render",no],["__scopeId","data-v-6c00a092"]]),ho=uo;me()(co,"components",{QBtn:se.Z});var po=t(80579);const go={class:"full-width"},fo={class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm cursor-pointer mt-5 border-radius-5px"},_o={class:"row"},vo={class:""};function yo(e,o,t,s,a,d){const r=(0,l.up)("q-icon"),n=(0,l.up)("draggable");return(0,l.wg)(),(0,l.iD)("div",go,[(0,l.Wm)(n,{list:e.defaultGroups,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{item:(0,l.w5)((({element:o})=>[(0,l._)("div",fo,[(0,l._)("div",_o,[(0,l.Wm)(r,{name:"workspaces",size:"sm",class:"q-mr-sm"}),(0,l._)("div",vo,(0,i.zw)(e.getLabelForFormBuilder(o,"pages.screen2a.")),1)])])])),_:1},8,["list"])])}var wo=t(91777);const Co=(0,l.aZ)({name:"GroupElements",mixins:[j.Z,R.Z,wo.Z],components:{draggable:Le()},data(){return{}},setup(){const e=(0,ee.nc)(),{defaultGroups:o}=(0,z.Jk)(e);return{defaultGroups:o}}}),bo=(0,ie.Z)(Co,[["render",yo],["__scopeId","data-v-bf503f6c"]]),To=bo;me()(Co,"components",{QIcon:de.Z,QBtn:se.Z});const Bo={class:"full-width"},ko={class:"full-width"},xo={key:0,class:"col-sm-12 col-md-12 col-lg-12 cursor-pointer q-pa-sm mt-5 border-radius-5px"},Mo={class:"row"},Io={class:"width-20px"},Fo=["src"],Lo={class:"width-100-10px"},No={class:"full-width"},Oo={class:"full-width text-grey-6"};function Eo(e,o,t,s,a,d){const r=(0,l.up)("q-input"),n=(0,l.up)("draggable");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",Bo,[(0,l.Wm)(r,{modelValue:e.searchInput,"onUpdate:modelValue":o[0]||(o[0]=o=>e.searchInput=o),class:"q-pt-md q-pb-md",dense:"",autofocus:"",label:e.$t("pages.user.search"),outlined:""},null,8,["modelValue","label"])]),(0,l._)("div",ko,[(0,l.Wm)(n,{list:e.defaultFields,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{item:(0,l.w5)((({element:e})=>[e.isHidden||!e.isSearched||e.isAlreadyAdded?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",xo,[(0,l._)("div",Mo,[(0,l._)("div",Io,[(0,l._)("img",{src:e.icon,width:"14"},null,8,Fo)]),(0,l._)("div",Lo,[(0,l._)("div",No,(0,i.zw)(e.label),1),(0,l._)("div",Oo,(0,i.zw)(" ("+e.field_name+")"),1)])])]))])),_:1},8,["list"])])],64)}var So=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{r(l.next(e))}catch(o){s(o)}}function d(e){try{r(l["throw"](e))}catch(o){s(o)}}function r(e){e.done?t(e.value):i(e.value).then(a,d)}r((l=l.apply(e,o||[])).next())}))};const Ao=(0,l.aZ)({name:"DefaultElements",mixins:[j.Z,R.Z,wo.Z],components:{draggable:Le()},data(){return{searchInput:""}},watch:{searchInput(e){for(let o of this.defaultFields)""===e||null==e||o.label.toLowerCase().indexOf(e.toLowerCase())>=0?o.isSearched=!0:o.isSearched=!1}},mounted(){this.init()},methods:{init(){return So(this,void 0,void 0,(function*(){this.hideLoading();try{yield this.loadDocumentDefaultFields(this.$route.params.doc_type)}catch(e){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))}},setup(){const e=(0,ee.nc)(),{defaultFields:o}=(0,z.Jk)(e),{loadDocumentDefaultFields:t}=e;return{defaultFields:o,loadDocumentDefaultFields:t}}}),qo=(0,ie.Z)(Ao,[["render",Eo],["__scopeId","data-v-1d9f8496"]]),Do=qo;me()(Ao,"components",{QInput:je.Z,QBtn:se.Z});const Vo=e=>((0,l.dD)("data-v-30fde35a"),e=e(),(0,l.Cn)(),e),Po={key:0,class:"row"},Uo={key:0,class:"col-12"},Wo={class:"q-ml-md"},zo={key:1,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Ro={key:2,class:"full-width"},Zo={class:"col-sm-12 col-md-12 col-lg-12"},$o=Vo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"},null,-1))),Xo={class:"col-sm-12 col-md-12 col-lg-12"},Ho={class:"q-ml-md"},Yo={class:"col-sm-12 col-md-12 col-lg-12"},Qo=Vo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"},null,-1))),Jo={class:"col-sm-12 col-md-12 col-lg-12"},Go={class:"q-ml-md"},Ko={class:"col-sm-12 col-md-12 col-lg-12"},jo=Vo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"},null,-1))),et={class:"col-sm-12 col-md-12 col-lg-12"},ot={class:"q-ml-md"},tt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},lt=Vo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Pleae Define ShotCut For group ",-1))),it={class:"row"},st={class:"col-5 q-pr-sm"},at={class:"col-5 q-pl-sm"},dt=(0,l.Uk)(" Shortcut already in use. Press shift + k to check existing list. "),rt={class:"col-2 q-pl-sm"},nt={key:3,class:"full-width"},mt={key:0,class:"col-sm-12 col-md-12 col-lg-12"},ct={class:"col-sm-12 col-md-12 col-lg-12"},ut={class:"q-ml-md"},ht={class:"col-sm-12 col-md-12 col-lg-12"},pt={class:"q-ml-md"},gt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},ft={class:"col-sm-12 col-md-12 col-lg-12"},_t={class:"col-sm-12 col-md-12 col-lg-12"},vt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},yt={class:"col-sm-12 col-md-12 col-lg-12"},wt={class:"col-sm-12 col-md-12 col-lg-12"},Ct={key:1,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},bt={class:"col-sm-12 col-md-12 col-lg-12"},Tt={class:"col-sm-12 col-md-12 col-lg-12"},Bt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},kt={class:"col-sm-12 col-md-12 col-lg-12"},xt={class:"col-sm-12 col-md-12 col-lg-12"},Mt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},It={class:"col-sm-12 col-md-12 col-lg-12"},Ft={class:"col-sm-12 col-md-12 col-lg-12"},Lt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Nt={class:"col-sm-12 col-md-12 col-lg-12"},Ot={class:"col-sm-12 col-md-12 col-lg-12"},Et={key:5,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},St=Vo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Tab Index ",-1))),At={class:"col-sm-12 col-md-12 col-lg-12"},qt={key:6,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Dt=Vo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Field Group ",-1))),Vt={class:"col-sm-12 col-md-12 col-lg-12"},Pt={key:7,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Ut=Vo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Field Threshold ",-1))),Wt={class:"col-sm-12 col-md-12 col-lg-12"},zt={key:8,class:"row q-pt-md"},Rt={class:"col-sm-5 col-md-5 col-lg-5 q-pa-sm"},Zt={class:"col-sm-5 col-md-5 col-lg-5 q-pa-sm"},$t=Vo((()=>(0,l._)("div",{class:"col-sm-2 col-md-2 col-lg-2"},null,-1))),Xt={class:"col-sm-5 col-md-5 col-lg-5 q-pa-sm"},Ht={class:"col-sm-5 col-md-5 col-lg-5 q-pa-sm"},Yt={class:"col-sm-2 col-md-2 col-lg-2"},Qt={class:"col-sm-12 col-md-12 col-lg-12"},Jt={key:9,class:"full-width"},Gt={key:1,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Kt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},jt={key:0,class:"col-sm-12 col-md-12 col-lg-12"},el={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},ol={class:"col-sm-12 col-md-12 col-lg-12"},tl={class:"col-sm-12 col-md-12 col-lg-12"},ll={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},il={class:"col-sm-12 col-md-12 col-lg-12"},sl={class:"col-sm-12 col-md-12 col-lg-12"},al={key:3,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"};function dl(e,o,t,s,a,d){const r=(0,l.up)("q-toggle"),n=(0,l.up)("q-select"),m=(0,l.up)("q-tooltip"),c=(0,l.up)("q-icon"),u=(0,l.up)("q-input"),h=(0,l.up)("keyboardShortcutInfoBtn"),p=(0,l.up)("q-btn"),g=(0,l.up)("PropertiesOfTableOfCheckboxes"),f=(0,l.up)("q-checkbox"),_=(0,l.up)("PropertiesOfExtractedTable");return(0,l.wg)(),(0,l.iD)(l.HY,null,[e.activeFieldName?((0,l.wg)(),(0,l.iD)("div",Po,[e.onlyInputCheckbox()?((0,l.wg)(),(0,l.iD)("div",Uo,[(0,l._)("span",Wo,(0,i.zw)(e.$t("run_script_on_change")),1),(0,l.Wm)(r,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].run_script_on_change,"onUpdate:modelValue":o[0]||(o[0]=o=>e.formBuilderConfigModel[e.activeFieldName].run_script_on_change=o),val:"md"},null,8,["modelValue"])])):(0,l.kq)("",!0),e.isButtonType()?((0,l.wg)(),(0,l.iD)("div",zo,[(0,l.Wm)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].exportType,"onUpdate:modelValue":[o[1]||(o[1]=o=>e.formBuilderConfigModel[e.activeFieldName].exportType=o),o[2]||(o[2]=o=>{e.buttonTypeUpdated(o)})],options:e.options,label:"Select Button Type",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.GROUP?((0,l.wg)(),(0,l.iD)("div",Ro,[(0,l._)("div",Zo,[$o,(0,l._)("div",Xo,[(0,l._)("span",Ho,(0,i.zw)(e.$t("is_stcky_group")),1),(0,l.Wm)(r,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].is_stcky_group,"onUpdate:modelValue":o[3]||(o[3]=o=>e.formBuilderConfigModel[e.activeFieldName].is_stcky_group=o),val:"md"},null,8,["modelValue"])])]),(0,l._)("div",Yo,[Qo,(0,l._)("div",Jo,[(0,l._)("span",Go,(0,i.zw)(e.$t("active_right_border")),1),(0,l.Wm)(r,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].right_border,"onUpdate:modelValue":o[4]||(o[4]=o=>e.formBuilderConfigModel[e.activeFieldName].right_border=o),val:"md"},null,8,["modelValue"])])]),(0,l._)("div",Ko,[jo,(0,l._)("div",et,[(0,l._)("span",ot,(0,i.zw)(e.$t("active_bottom_border")),1),(0,l.Wm)(r,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].bottom_border,"onUpdate:modelValue":o[5]||(o[5]=o=>e.formBuilderConfigModel[e.activeFieldName].bottom_border=o),val:"md"},null,8,["modelValue"])])]),(0,l._)("div",tt,[lt,(0,l._)("div",it,[(0,l._)("div",st,[(0,l.Wm)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].short_cut_key_1,"onUpdate:modelValue":[o[6]||(o[6]=o=>e.formBuilderConfigModel[e.activeFieldName].short_cut_key_1=o),o[7]||(o[7]=o=>{e.onShortCutKeyUpdate(e.formBuilderConfigModel[e.activeFieldName].short_cut_key_2)})],options:e.shortCutKeyList,label:"Key 1",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])]),(0,l._)("div",at,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].short_cut_key_2,"onUpdate:modelValue":[o[8]||(o[8]=o=>e.formBuilderConfigModel[e.activeFieldName].short_cut_key_2=o),o[9]||(o[9]=o=>{e.onShortCutKeyUpdate(o)})],class:(0,i.C_)(e.formBuilderConfigModel[e.activeFieldName].error?"column-error-border":"")},{append:(0,l.w5)((()=>[e.formBuilderConfigModel[e.activeFieldName].error?((0,l.wg)(),(0,l.j4)(c,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"bg-red line-error-tooltip"},{default:(0,l.w5)((()=>[e.formBuilderConfigModel[e.activeFieldName].error?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[dt],64)):(0,l.kq)("",!0)])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:1},8,["modelValue","class"])]),(0,l._)("div",rt,[(0,l.Wm)(h)])])])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType!=e.GROUP&&e.formBuilderConfigModel[e.activeFieldName].fieldType!=e.TABLE_OF_CHECKBOXES?((0,l.wg)(),(0,l.iD)("div",nt,[e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT?((0,l.wg)(),(0,l.iD)("div",mt,[(0,l._)("div",ct,[(0,l._)("span",ut,(0,i.zw)(e.$t("display_label_left")),1),(0,l.Wm)(r,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft,"onUpdate:modelValue":o[10]||(o[10]=o=>e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft=o),val:"md"},null,8,["modelValue"])]),(0,l._)("div",ht,[(0,l._)("span",pt,(0,i.zw)(e.$t("is_textarea")),1),(0,l.Wm)(r,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].is_textarea,"onUpdate:modelValue":o[11]||(o[11]=o=>e.formBuilderConfigModel[e.activeFieldName].is_textarea=o),val:"md"},null,8,["modelValue"])])])):(0,l.kq)("",!0),(0,l._)("div",gt,[(0,l._)("div",ft,(0,i.zw)(e.$t("label")),1),(0,l._)("div",_t,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].label,"onUpdate:modelValue":o[12]||(o[12]=o=>e.formBuilderConfigModel[e.activeFieldName].label=o),disable:e.formBuilderConfigModel[e.activeFieldName].isDefaultField,onBlur:o[13]||(o[13]=o=>e.updateFieldName(e.activeFieldName))},null,8,["modelValue","disable"])])]),(0,l._)("div",vt,[(0,l._)("div",yt,(0,i.zw)(e.$t("field_name")),1),(0,l._)("div",wt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].name,"onUpdate:modelValue":o[14]||(o[14]=o=>e.formBuilderConfigModel[e.activeFieldName].name=o),disable:e.formBuilderConfigModel[e.activeFieldName].isDefaultField,onBlur:o[15]||(o[15]=o=>e.onFieldNameFocusLose(e.activeFieldName))},null,8,["modelValue","disable"])])]),e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft?((0,l.wg)(),(0,l.iD)("div",Ct,[(0,l._)("div",bt,(0,i.zw)(e.$t("label_width_percentage")),1),(0,l._)("div",Tt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].labelWidth,"onUpdate:modelValue":o[16]||(o[16]=o=>e.formBuilderConfigModel[e.activeFieldName].labelWidth=o),type:"number",rules:[o=>o>=3&&o<=100||e.$t("label_length_between_3_100")]},null,8,["modelValue","rules"])])])):(0,l.kq)("",!0)])):(0,l.kq)("",!0),(0,l._)("div",Bt,[(0,l._)("div",kt,(0,i.zw)(e.$t("element_width_percentage")),1),(0,l._)("div",xt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].elementWidth,"onUpdate:modelValue":[o[17]||(o[17]=o=>e.formBuilderConfigModel[e.activeFieldName].elementWidth=o),o[18]||(o[18]=o=>{e.handleElementWidth(o)})],disable:e.formBuilderConfigModel[e.activeFieldName].fieldType===e.HORIZONTAL_SEPARATOR,type:"number",rules:[o=>o>=3&&o<=100||e.$t("field_length_between_3_100")]},null,8,["modelValue","disable","rules"])])]),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.HORIZONTAL_SEPARATOR?((0,l.wg)(),(0,l.iD)(l.HY,{key:4},[(0,l._)("div",Mt,[(0,l._)("div",It,(0,i.zw)(e.$t("space_from_top")),1),(0,l._)("div",Ft,[(0,l.Wm)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].space_from_top,"onUpdate:modelValue":o[19]||(o[19]=o=>e.formBuilderConfigModel[e.activeFieldName].space_from_top=o),options:e.spaceFromTopList,label:e.$t("space_from_top"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])]),(0,l._)("div",Lt,[(0,l._)("div",Nt,(0,i.zw)(e.$t("space_from_bottom")),1),(0,l._)("div",Ot,[(0,l.Wm)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].space_from_bottom,"onUpdate:modelValue":o[20]||(o[20]=o=>e.formBuilderConfigModel[e.activeFieldName].space_from_bottom=o),options:e.spaceFromBottomList,label:e.$t("space_from_bottom"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])])],64)):(0,l.kq)("",!0),e.renderTabIndexField()?((0,l.wg)(),(0,l.iD)("div",Et,[St,(0,l._)("div",At,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tabIndex,"onUpdate:modelValue":o[21]||(o[21]=o=>e.formBuilderConfigModel[e.activeFieldName].tabIndex=o),type:"number"},null,8,["modelValue"])])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.CHECK_BOX?((0,l.wg)(),(0,l.iD)("div",qt,[Dt,(0,l._)("div",Vt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].field_group,"onUpdate:modelValue":o[22]||(o[22]=o=>e.formBuilderConfigModel[e.activeFieldName].field_group=o)},null,8,["modelValue"])])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.CHECK_BOX?((0,l.wg)(),(0,l.iD)("div",Pt,[Ut,(0,l._)("div",Wt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].field_threshold,"onUpdate:modelValue":o[23]||(o[23]=o=>e.formBuilderConfigModel[e.activeFieldName].field_threshold=o)},null,8,["modelValue"])])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.MULTI_CHECK_BOX?((0,l.wg)(),(0,l.iD)("div",zt,[(0,l._)("div",Rt,(0,i.zw)(e.$t("label")),1),(0,l._)("div",Zt,(0,i.zw)(e.$t("value")),1),$t,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.formBuilderConfigModel[e.activeFieldName].options,((o,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[(0,l._)("div",Xt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:o.label,"onUpdate:modelValue":e=>o.label=e,onChange:o=>e.setOptionValue(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),(0,l._)("div",Ht,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:o.value,"onUpdate:modelValue":e=>o.value=e,disable:""},null,8,["modelValue","onUpdate:modelValue"])]),(0,l._)("div",Yt,[e.formBuilderConfigModel[e.activeFieldName].options.length>2?((0,l.wg)(),(0,l.j4)(p,{key:0,flat:"",size:"md",color:"primary",icon:"delete",onClick:o=>e.removeOption(t)},null,8,["onClick"])):(0,l.kq)("",!0)])],64)))),128)),(0,l._)("div",Qt,[(0,l.Wm)(p,{flat:"",color:"primary",label:"Add More",icon:"add",onClick:o[24]||(o[24]=o=>e.addOption())})])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TABLE_OF_CHECKBOXES?((0,l.wg)(),(0,l.iD)("div",Jt,[(0,l.Wm)(g,{isColumnMode:e.isColumnMode,rowIndex:e.rowIndex,columnIndex:e.columnIndex},null,8,["isColumnMode","rowIndex","columnIndex"])])):(0,l.kq)("",!0)])):(0,l.kq)("",!0),e.renderModelDropdown()?((0,l.wg)(),(0,l.iD)("div",Gt,[(0,l.Wm)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tr_ocr_model_id,"onUpdate:modelValue":[o[25]||(o[25]=o=>e.formBuilderConfigModel[e.activeFieldName].tr_ocr_model_id=o),o[26]||(o[26]=o=>e.onUpdateTROCRModel())],options:e.model_list,label:e.$t("select_ai_type"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT?((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[(0,l._)("div",Kt,[(0,l.Wm)(n,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].list_of_values,"onUpdate:modelValue":[o[27]||(o[27]=o=>e.formBuilderConfigModel[e.activeFieldName].list_of_values=o),o[28]||(o[28]=o=>{e.onListOfValueSelect(o)})],options:e.lov_list,label:e.$t("select_list_of_values"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])]),e.formBuilderConfigModel[e.activeFieldName].list_of_values?((0,l.wg)(),(0,l.iD)("div",jt,[(0,l.Wm)(f,{label:e.$t("enforce_list_of_values"),modelValue:e.formBuilderConfigModel[e.activeFieldName].enforce_list_of_values,"onUpdate:modelValue":o[29]||(o[29]=o=>e.formBuilderConfigModel[e.activeFieldName].enforce_list_of_values=o),size:"30px",color:"grey-6"},null,8,["label","modelValue"])])):(0,l.kq)("",!0),(0,l._)("div",el,[(0,l._)("div",ol,(0,i.zw)(e.$t("field_length")),1),(0,l._)("div",tl,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].length,"onUpdate:modelValue":o[30]||(o[30]=o=>e.formBuilderConfigModel[e.activeFieldName].length=o),type:"number"},null,8,["modelValue"])])]),(0,l._)("div",ll,[(0,l._)("div",il,(0,i.zw)(e.$t("banned_keywords")),1),(0,l._)("div",sl,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].banned_keywords,"onUpdate:modelValue":o[31]||(o[31]=o=>e.formBuilderConfigModel[e.activeFieldName].banned_keywords=o),label:e.$t("comma_seperated_keywords")},null,8,["modelValue","label"])])])],64)):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.EXTRACTED_TABLE&&e.formBuilderConfigModel[e.activeFieldName].columns?((0,l.wg)(),(0,l.iD)("div",al,[(0,l.Wm)(_,{columnIndex:e.columnIndex},null,8,["columnIndex"])])):(0,l.kq)("",!0)],64)}var rl=t(78564);const nl=(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12 q-pt-md text-primary"}," Columns Settings ",-1),ml={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},cl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},ul={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"};function hl(e,o,t,i,s,a){const d=(0,l.up)("q-select"),r=(0,l.up)("q-toggle");return(0,l.wg)(),(0,l.iD)(l.HY,null,[nl,(0,l._)("div",ml,[(0,l.Wm)(d,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].tr_ocr_model_id,"onUpdate:modelValue":[o[0]||(o[0]=o=>e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].tr_ocr_model_id=o),o[1]||(o[1]=o=>e.onColumnUpdateTROCRModel(e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].col_id,e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].tr_ocr_model_id))],options:e.model_list,label:"KI Model ("+e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].name+")",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])]),(0,l._)("div",cl,[(0,l.Wm)(d,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].list_of_values,"onUpdate:modelValue":o[2]||(o[2]=o=>e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].list_of_values=o),options:e.lov_list,label:"list Of values ("+e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].name+")",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])]),(0,l._)("div",ul,[(0,l.Wm)(r,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].run_script_on_change,"onUpdate:modelValue":o[3]||(o[3]=o=>e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].run_script_on_change=o),val:"md",label:e.$t("run_script_on_change")+" ("+e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].name+")",class:"q-mt-sm"},null,8,["modelValue","label"])])],64)}const pl=(0,l.aZ)({name:"PropertiesOfTableOfCheckboxes",props:{columnIndex:{type:Number,default:0}},data(){return{}},methods:{onColumnUpdateTROCRModel(e,o){const t=(0,W.$)("#col_"+e);t&&(o?t.classList.add("text-primary"):t.classList.remove("text-primary"))}},setup(){const e=(0,ee.nc)(),{formLayout:o,activeFieldName:t,formBuilderModel:l,formBuilderConfigModel:i}=(0,z.Jk)(e),s=(0,ee.At)(),{model_list:a}=(0,z.Jk)(s),d=(0,ee.wr)(),{lov_list:r}=(0,z.Jk)(d);return{lov_list:r,model_list:a,formLayout:o,activeFieldName:t,formBuilderModel:l,formBuilderConfigModel:i}}});var gl=t(72448);const fl=(0,ie.Z)(pl,[["render",hl]]),_l=fl;me()(pl,"components",{QSelect:gl.Z,QToggle:Ke.Z});const vl={class:"col-sm-8 col-md-8 col-lg-8"},yl={class:"col-sm-4 col-md-4 col-lg-4"},wl={key:1,class:"row q-pt-md"},Cl={class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm mt-5"},bl={key:0,class:"row"},Tl={key:1,class:"row"},Bl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},kl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},xl=(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"}," Tab Index ",-1),Ml={class:"col-sm-12 col-md-12 col-lg-12"},Il=(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"}," Field Group ",-1),Fl={class:"col-sm-12 col-md-12 col-lg-12"},Ll=(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"}," Field Threshold ",-1),Nl={class:"col-sm-12 col-md-12 col-lg-12"},Ol={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},El={class:"col-sm-12 col-md-12 col-lg-12"};function Sl(e,o,t,s,a,d){const r=(0,l.up)("q-input"),n=(0,l.up)("q-tooltip"),m=(0,l.up)("q-btn"),c=(0,l.up)("q-toggle"),u=(0,l.up)("q-checkbox");return(0,l.wg)(),(0,l.iD)(l.HY,null,[e.isColumnMode?((0,l.wg)(!0),(0,l.iD)(l.HY,{key:0},(0,l.Ko)(e.formBuilderConfigModel[e.activeFieldName].tableHeaderRows[e.rowIndex],((o,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"row q-pt-md",key:t},[(0,l._)("div",vl,[(0,l.Wm)(r,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableHeaderRows[e.rowIndex][t],"onUpdate:modelValue":o=>e.formBuilderConfigModel[e.activeFieldName].tableHeaderRows[e.rowIndex][t]=o},null,8,["modelValue","onUpdate:modelValue"])]),(0,l._)("div",yl,[(0,l.Wm)(m,{round:"",color:"primary",icon:"delete",size:"xs",class:"float-right",onClick:o=>e.deleteColumn(t)},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])])))),128)):(0,l.kq)("",!0),e.isColumnMode?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",wl,[(0,l._)("div",Cl,[e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].isLabelArea?((0,l.wg)(),(0,l.iD)("div",bl,[(0,l.Wm)(r,{class:"full-width",outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].label,"onUpdate:modelValue":o[0]||(o[0]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].label=o)},null,8,["modelValue"])])):((0,l.wg)(),(0,l.iD)("div",Tl,[(0,l._)("div",Bl,[(0,l.Wm)(c,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].run_script_on_change,"onUpdate:modelValue":o[1]||(o[1]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].run_script_on_change=o),val:"md",label:e.$t("run_script_on_change")},null,8,["modelValue","label"])]),(0,l._)("div",kl,[(0,l.Wm)(u,{modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].isDisabled,"onUpdate:modelValue":o[2]||(o[2]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].isDisabled=o),label:"is Disabled ?"},null,8,["modelValue"])]),xl,(0,l._)("div",Ml,[(0,l.Wm)(r,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].tabIndex,"onUpdate:modelValue":o[3]||(o[3]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].tabIndex=o),type:"number"},null,8,["modelValue"])]),Il,(0,l._)("div",Fl,[(0,l.Wm)(r,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].field_group,"onUpdate:modelValue":o[4]||(o[4]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].field_group=o)},null,8,["modelValue"])]),Ll,(0,l._)("div",Nl,[(0,l.Wm)(r,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].field_threshold,"onUpdate:modelValue":o[5]||(o[5]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].field_threshold=o)},null,8,["modelValue"])]),(0,l._)("div",Ol,(0,i.zw)(e.$t("name")),1),(0,l._)("div",El,[(0,l.Wm)(r,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].name].name,"onUpdate:modelValue":o[6]||(o[6]=o=>e.formBuilderConfigModel[e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].name].name=o),onBlur:o[7]||(o[7]=o=>e.onInputFocusLose(e.rowIndex,e.columnIndex))},null,8,["modelValue"])])]))])]))],64)}const Al=(0,l.aZ)({name:"PropertiesOfTableOfCheckboxes",props:{rowIndex:{type:Number,default:0},columnIndex:{type:Number,default:0},isColumnMode:{type:Boolean,default:!1}},data(){return{}},methods:{onInputFocusLose(e,o){const t=this.formBuilderConfigModel[this.activeFieldName].tableBodyRows[this.rowIndex][this.columnIndex].name,l=this.formBuilderConfigModel[t].name;t!==l&&(this.formBuilderConfigModel[l]=[],this.formBuilderConfigModel[l]=this.formBuilderConfigModel[t],this.formBuilderModel[l]=[],this.formBuilderModel[l]=this.formBuilderModel[t],delete this.formBuilderModel[t],delete this.formBuilderConfigModel[t],this.formBuilderConfigModel[this.activeFieldName].tableBodyRows[e][o].name=l)},deleteColumn(e){this.formBuilderConfigModel[this.activeFieldName].tableHeaderRows[this.rowIndex].tableBodyRows.splice(e,1);for(let o of this.formBuilderConfigModel[this.activeFieldName].tableBodyRows)o.splice(e,1)}},setup(){const e=(0,ee.nc)(),{activeFieldName:o,formBuilderModel:t,formBuilderConfigModel:l,formLayout:i}=(0,z.Jk)(e);return{formLayout:i,activeFieldName:o,formBuilderModel:t,formBuilderConfigModel:l}}});var ql=t(65735);const Dl=(0,ie.Z)(Al,[["render",Sl]]),Vl=Dl;me()(Al,"components",{QInput:je.Z,QBtn:se.Z,QTooltip:re.Z,QToggle:Ke.Z,QCheckbox:ql.Z});var Pl=t(3227),Ul=t(42051);const Wl=(0,l.aZ)({name:"Properties",mixins:[rl.Z,R.Z,Pl.Z],components:{keyboardShortcutInfoBtn:Ul.Z,PropertiesOfExtractedTable:_l,PropertiesOfTableOfCheckboxes:Vl},data(){return{rowIndex:(0,K.iH)(0),columnIndex:(0,K.iH)(0),isColumnMode:(0,K.iH)(!0),selectedInput:(0,K.iH)(""),GROUP:Je.oh.GROUP,CHECK_BOX:Je.oh.CHECK_BOX,TEXT_INPUT:Je.oh.TEXT_INPUT,EXPORT_BUTTON:Je.oh.EXPORT_BUTTON,PO_MATCH_BUTTON:Je.oh.PO_MATCH_BUTTON,SAVE_RULES_BUTTON:Je.oh.SAVE_RULES_BUTTON,AUTO_ACCOUNTING_BUTTON:Je.oh.AUTO_ACCOUNTING_BUTTON,EXTRACTED_TABLE:Je.oh.EXTRACTED_TABLE,AI_EXTRACTED_TABLE:Je.oh.AI_EXTRACTED_TABLE,EXTRACTED_TABLE_TAB_PANELS:Je.oh.EXTRACTED_TABLE_TAB_PANELS,INVOICE_BUTTONS:Je.oh.INVOICE_BUTTONS,MULTI_CHECK_BOX:Je.oh.MULTI_CHECK_BOX,TABLE_OF_CHECKBOXES:Je.oh.TABLE_OF_CHECKBOXES,HORIZONTAL_SEPARATOR:Je.oh.HORIZONTAL_SEPARATOR,exiting_shortcut_keys:[]}},watch:{activeFieldName(e,o){e!=o&&(this.rowIndex=0,this.columnIndex=0,this.isColumnMode=!1)}},mounted:function(){window.pp=this,this.getModelList(),this.getLovList(),this.initDefaults(),this.exiting_shortcut_keys=this.fixedShortCutKeyList(),document.addEventListener("load_settings",this.loadSettings),document.addEventListener("load_settings_for_series",this.loadSettingsForSeries)},unmounted:function(){document.removeEventListener("load_settings",this.loadSettings),document.removeEventListener("load_settings_for_series",this.loadSettingsForSeries)},methods:{addOption(){const e={label:"Option",value:"op"};this.formBuilderConfigModel[this.activeFieldName].options.push(e)},removeOption(e){this.formBuilderConfigModel[this.activeFieldName].options.splice(e,1)},setOptionValue(e){this.formBuilderConfigModel[this.activeFieldName].options[e].value=this.stringReplaceWithString(this.formBuilderConfigModel[this.activeFieldName].options[e].label," ","")},loadSettings(e){this.rowIndex=e.detail.rowIndex,this.columnIndex=e.detail.columnIndex,this.isColumnMode=e.detail.isColumnMode},loadSettingsForSeries(e){const o=e.detail;if(o)for(const[t,l]of Object.entries(this.formBuilderConfigModel[this.activeFieldName].columns)){const e=l;if(e.col_id===o){this.columnIndex=+t;break}}},onFieldNameFocusLose(e){const o=this.formBuilderConfigModel[e].name;if(o!==e)if(this.validateField(o)){e:for(const t of this.formLayout)for(let l of t.rows)if(l.name===e){l.name=o;for(const[o,t]of Object.entries(this.formBuilderConfigModel[e]))"name"!==o&&(l[o]=t);break e}this.formBuilderConfigModel[o]={},this.formBuilderConfigModel[o]=JSON.parse(JSON.stringify(this.formBuilderConfigModel[e])),this.formBuilderModel[o]={},this.formBuilderModel[o]=JSON.parse(JSON.stringify(this.formBuilderModel[e])),this.activeFieldName=o,delete this.formBuilderModel[e],delete this.formBuilderConfigModel[e]}else this.formBuilderConfigModel[e].name=e},validateField(e){let o=!0;return""===e||null===e?(o=!1,this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY"))):this.hasWhiteSpace(e)?(o=!1,this.showErrorToast(this.$t("pages.messages.SPACES_NOT_ALLOWED"))):this.checkFirstLetterIsSpecialOrNumber(e)&&(o=!1,this.showErrorToast(this.$t("errors.special_letter_number_not_allowed"))),o},updateFieldName(e){const o=this.stringReplaceWithString(this.formBuilderConfigModel[e].label," ","_");o!==e&&(this.formBuilderConfigModel[e].name=o,this.onFieldNameFocusLose(e))},handleElementWidth(e){e>100?(this.formBuilderConfigModel[this.activeFieldName].elementWidth=100,this.showErrorToast(this.$t("field_length_between_3_100"))):e<3&&(this.formBuilderConfigModel[this.activeFieldName].elementWidth=3,this.showErrorToast(this.$t("field_length_between_3_100")))},renderModelDropdown(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.TEXT_INPUT||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.CHECK_BOX},onUpdateTROCRModel(){var e;const o=(0,W.$)("#"+this.activeFieldName);o&&(null===(e=o.closest(".element_parent"))||void 0===e||e.classList.toggle("text-primary"))},onColumnUpdateTROCRModel(e,o){const t=(0,W.$)("#col_"+e);t&&(o?t.classList.add("text-primary"):t.classList.remove("text-primary"))},renderTabIndexField(){return this.TEXT_INPUT===this.formBuilderConfigModel[this.activeFieldName].fieldType||this.CHECK_BOX===this.formBuilderConfigModel[this.activeFieldName].fieldType||this.MULTI_CHECK_BOX===this.formBuilderConfigModel[this.activeFieldName].fieldType},onShortCutKeyUpdate(e){e&&(e=e.toUpperCase());const o=this.formBuilderConfigModel[this.activeFieldName].short_cut_key_1,t=o.toUpperCase()+e;if(this.formBuilderConfigModel[this.activeFieldName].error=!1,!this.vaidateShortCutKey(t))return this.formBuilderConfigModel[this.activeFieldName].error=!0,void(this.formBuilderConfigModel[this.activeFieldName].short_cut_key_2="");this.formBuilderConfigModel[this.activeFieldName].short_cut_key_2=e.charAt(e.length-1)},vaidateShortCutKey(e){if(!e)return!0;const o=this.isUsedByOther(e);return!0!==o&&-1===this.exiting_shortcut_keys.indexOf(e)},isUsedByOther(e){let o=!1;for(const[t,l]of Object.entries(this.formBuilderConfigModel))"Group"===l.fieldType&&this.activeFieldName!=t&&e===l.short_cut_key_2.toUpperCase()&&(o=!0);return o},initDefaults(){const e=this.formBuilderConfigModel[this.activeFieldName].enforce_list_of_values;e||(this.formBuilderConfigModel[this.activeFieldName].enforce_list_of_values=!1)},onListOfValueSelect(e){e||(this.formBuilderConfigModel[this.activeFieldName].enforce_list_of_values=!1)},onlyInputCheckbox(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.TEXT_INPUT||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.CHECK_BOX},isButtonType(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.EXPORT_BUTTON||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.PO_MATCH_BUTTON||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.SAVE_RULES_BUTTON},buttonTypeUpdated(e){"po_match"===e&&(this.formBuilderConfigModel[this.activeFieldName].fieldType=Je.oh.PO_MATCH_BUTTON),"save_rules"===e&&(this.formBuilderConfigModel[this.activeFieldName].fieldType=Je.oh.SAVE_RULES_BUTTON)}},setup(){const e=(0,ee.nc)(),{activeFieldName:o,formBuilderModel:t,formBuilderConfigModel:l,formLayout:i}=(0,z.Jk)(e),s=(0,ee.At)(),{getModelList:a}=s,{model_list:d}=(0,z.Jk)(s),r=(0,ee.wr)(),{getLovList:n}=r,{lov_list:m}=(0,z.Jk)(r);return{lov_list:m,getLovList:n,model_list:d,formLayout:i,activeFieldName:o,formBuilderModel:t,formBuilderConfigModel:l,options:[{label:"Export",value:Ne.tl["export"]},{label:"Export mit Sonderwunsch",value:Ne.tl.export_with_sonderwunsche},{label:"PO Match",value:Ne.tl.po_match},{label:"Save Rules",value:Ne.tl.save_rules},{label:"Save",value:Ne.tl.save},{label:"Zurckgeben",value:Ne.tl.reject}],shortCutKeyList:[{label:"Shift",value:"shift"},{label:"Alt",value:"alt"}],spaceFromTopList:[{label:"None",value:""},{label:"Extra Small",value:"q-mt-xs"},{label:"Small",value:"q-mt-sm"},{label:"Medium",value:"q-mt-md"},{label:"Large",value:"q-mt-lg"},{label:"Extra Large",value:"q-mt-xl"}],spaceFromBottomList:[{label:"None",value:""},{label:"Extra Small",value:"q-mb-xs"},{label:"Small",value:"q-mb-sm"},{label:"Medium",value:"q-mb-md"},{label:"Large",value:"q-mb-lg"},{label:"Extra Large",value:"q-mb-xl"}],getModelList:a}}}),zl=(0,ie.Z)(Wl,[["render",dl],["__scopeId","data-v-30fde35a"]]),Rl=zl;me()(Wl,"components",{QToggle:Ke.Z,QSelect:gl.Z,QInput:je.Z,QIcon:de.Z,QTooltip:re.Z,QBtn:se.Z,QCheckbox:ql.Z});const Zl={class:"form-builder-settings"},$l={class:"col-12"};function Xl(e,o,t,s,a,d){const r=(0,l.up)("q-tooltip"),n=(0,l.up)("q-icon");return(0,l.wg)(),(0,l.iD)("div",Zl,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.fields,((o,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:"row"},[(0,l._)("div",$l,[(0,l.Uk)((0,i.zw)(e.$t(o.translation_key))+" time-spent-settings ",1),o.has_help?((0,l.wg)(),(0,l.j4)(n,{key:0,name:"help_outline",onClick:t=>e.scrollToHelpSection(o.help_id),class:"help-sign cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,(0,i.zw)(e.$t(o.help_tooltip_translation_key)),1)])),_:2},1024)])),_:2},1032,["onClick"])):(0,l.kq)("",!0),((0,l.wg)(),(0,l.j4)((0,l.LL)(o.type),{outlined:"","field-name":o.name,modelValue:e.settings[o.name],"onUpdate:modelValue":t=>e.settings[o.name]=t},null,8,["field-name","modelValue","onUpdate:modelValue"]))])])))),128))])}var Hl=t(4091);const Yl={methods:{scrollToHelpSection(e){const o=(0,ee.nc)();o.showInHelpSection(),setTimeout((()=>{try{const o=document.getElementById(e);if(!o)return;o.scrollIntoView({behavior:"smooth"})}catch(o){}}),0)}}},Ql=(0,l.aZ)({name:"Properties",mixins:[rl.Z,R.Z,Yl],components:{QCheckbox:ql.Z,QInput:je.Z},data(){return{fields:Hl.X}},methods:{},setup(){const e=(0,ee.e0)(),{settings:o}=(0,z.Jk)(e),{setGeneralSettings:t}=e;return{settings:o,setGeneralSettings:t}}}),Jl=(0,ie.Z)(Ql,[["render",Xl]]),Gl=Jl;me()(Ql,"components",{QIcon:de.Z,QTooltip:re.Z,QField:eo.Z});var Kl=t(84815),jl=t(98880);const ei=e=>((0,l.dD)("data-v-5574d7ca"),e=e(),(0,l.Cn)(),e),oi={class:"image-decorator",ref:"image-area",id:"image_area"},ti={id:"screenshot_container"},li=["src","width"],ii=["onMousedown","onMousemove"],si=["id"],ai=["onClick"],di=["onClick"],ri=ei((()=>(0,l._)("div",{class:"select-areas--delete_area"},null,-1))),ni=[ri],mi={class:"c-crop--hide_main"},ci=["src","width"];function ui(e,o,t,s,a,d){const r=(0,l.up)("Resizable");return(0,l.wg)(),(0,l.iD)("div",oi,[(0,l._)("div",ti,[e.url?((0,l.wg)(),(0,l.iD)("img",{key:0,onLoad:o[0]||(o[0]=(...o)=>e.prepareImageData&&e.prepareImageData(...o)),id:"screenshot",class:"original-image",src:e.url,alt:"Original Image",width:e.width},null,40,li)):(0,l.kq)("",!0),(0,l._)("div",{class:"select-areas--overlay",style:(0,i.j5)({opacity:e.opacityOverlay,position:"absolute",width:e.originImgSize.w+"px",height:e.originImgSize.h+"px",display:"block"})},null,4),(0,l._)("div",{class:"pointer-events-none",id:"draw",style:(0,i.j5)({"background-color":"rgb(0, 0, 0)",opacity:0,position:"absolute",width:e.originImgSize.w+"px",height:e.originImgSize.h+"px"}),onMousedown:o[1]||(o[1]=(...o)=>e.mouseDown&&e.mouseDown(...o)),onMousemove:o[2]||(o[2]=(...o)=>e.mouseMove&&e.mouseMove(...o))},null,36),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.areas,(o=>((0,l.wg)(),(0,l.iD)("div",{key:o.id},[(0,l._)("div",{onMousedown:(0,jl.iM)((t=>e.startMove(o,t)),["stop","prevent"]),onMousemove:t=>e.doMove(o,t)},[(0,l._)("div",{id:"table"==o.areaType?o.connectionId+"_"+o.id+"_rect":o.connectionId+"_rect",class:"select-areas--outline",style:(0,i.j5)({opacity:e.opacityOutline,position:"absolute",cursor:"default",width:o.width+4+"px",height:o.height+4+"px",left:e.areaDisplayPosX(o)-2+"px",top:e.areaDisplayPosY(o)-2+"px","z-index":o.z})},null,12,si),(0,l._)("div",{class:"select-areas--background_area",style:(0,i.j5)({background:`#fff url('${e.url}') -${o.x}px -${o.y}px / ${e.originImgSize.w}px ${e.originImgSize.h}px no-repeat`,position:"absolute",cursor:o.connectionId==e.connectionId?"move":"pointer",width:o.width+"px",height:o.height+"px",left:e.areaDisplayPosX(o)+"px",top:e.areaDisplayPosY(o)+"px","z-index":o.z+2}),onClick:t=>e.changeResizable(o.id)},null,12,ai),"table"==o.areaType&&o.resizable&&o.connectionId==e.connectionId?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"delete-area",style:(0,i.j5)({display:"block",left:e.areaDisplayPosX(o)+o.width+"px",top:e.areaDisplayPosY(o)-25+"px","z-index":o.z+2}),onClick:t=>e.deleteSelected(o.id)},ni,12,di)):(0,l.kq)("",!0),o.connectionId==e.connectionId?((0,l.wg)(),(0,l.j4)(r,{key:1,item:o,posImg:e.posImg,"pos-correction":e.posCorrection,onStartDrag:e.startDrag,onDoDrag:e.doDrag},null,8,["item","posImg","pos-correction","onStartDrag","onDoDrag"])):(0,l.kq)("",!0)],40,ii)])))),128))]),(0,l._)("div",mi,[(0,l._)("img",{id:"c-crop--hide_img",src:e.url,alt:"",width:e.width},null,8,ci)])],512)}var hi=t(98266),pi=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{r(l.next(e))}catch(o){s(o)}}function d(e){try{r(l["throw"](e))}catch(o){s(o)}}function r(e){e.done?t(e.value):i(e.value).then(a,d)}r((l=l.apply(e,o||[])).next())}))};let gi,fi,_i;const vi=(0,l.aZ)({data(){return{mousedown:!1,originImgSize:{w:0,h:0,r:0},url:this.cropUrl,posImg:{top:0,left:0},areas:[{id:1,x:10,y:10,startX:10,startY:10,width:10,height:10,z:0,connectionId:"",areaType:"input",resizable:!1}],latestAreaItem:{startX:0,startY:0,endX:0,endY:0},scrollLeft:0,scrollTop:0,moveTempX:0,moveTempY:0,moveCurrentX:0,moveCurrentY:0,temp:0,dragdown:!1,move:!1,imageHeight:0,imageWidth:0}},props:{cropUrl:{type:String,default:"https://dev.doc2api.cloudintegration.eu/resource/image/1b90b6d5-63b5-446b-92a4-a60d57dc0edd/1.png"},width:{type:Number,default:1500},opacityOutline:{type:Number,default:.2},opacityOverlay:{type:Number,default:.2},posCorrection:{type:Boolean,default:!0},markedAreasStr:{type:String,default:""},connectionId:{type:String,default:""},allowMultiSelection:{type:Boolean,default:!1}},components:{Resizable:hi.Z},mixins:[R.Z],emits:["restrictDrawing"],watch:{cropUrl(e){this.url=e,setTimeout((()=>{this.setSize()}),200)},markedAreasStr(e){this.prepareDataForAreas()},width(e){return pi(this,void 0,void 0,(function*(){yield this.setSize(),this.prepareImageData()}))}},methods:{areaDisplayPosX(e){return e.x+(this.posCorrection?this.posImg.left:0)},areaDisplayPosY(e){return e.y+(this.posCorrection?this.posImg.top:0)},mousePosX(e){return e.pageX-this.posImg.left},mousePosY(e){return e.pageY-this.posImg.top},setSize(){return pi(this,void 0,void 0,(function*(){if(!this.url)return;let e=yield this.getSize(this.url);this.originImgSize=e}))},getSize(e){let o=this.$el.querySelector("#c-crop--hide_img");return new Promise((t=>{e&&o?(o.onload=function(){const e=gi.getSizeImg(o);t(e)},o.src=e):t({w:0,h:0,r:0})}))},getSizeImg(e){let o=e.width,t=e.height,l=0===o&&0===t?0:o/t;return{w:o,h:t,r:l}},calcPosOfBox(){let e=this.$refs["image-area"];this.scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,this.scrollTop=window.pageYOffset||document.documentElement.scrollTop;let o=e.getBoundingClientRect().top,t=e.getBoundingClientRect().left;this.posImg.top=o+this.scrollTop,this.posImg.left=t+this.scrollLeft},mouseDown(e){this.mousedown=!0;let o=null;if(o=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,0!=this.latestAreaItem.startX&&0!=this.latestAreaItem.startY){let t=this.latestAreaItem.startX,l=this.latestAreaItem.startY,i=e.layerX,s=e.layerY,a=i-t,d=s-l;(a<0||d<0)&&(i=t,s=l,t=e.layerX,l=e.layerY,a=i-t,d=s-l);let r={id:o,x:t,y:l,startX:t,startY:l,width:a,height:d,z:0,connectionId:this.connectionId,areaType:this.allowMultiSelection?"table":"input",resizable:!1};return this.areas.push(r),this.temp=r.id,void(this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})}if(o){let t={id:o,x:this.mousePosX(e),y:this.mousePosY(e),startX:this.mousePosX(e),startY:this.mousePosY(e),width:0,height:0,z:0,connectionId:this.connectionId,areaType:this.allowMultiSelection?"table":"input",resizable:!1};this.areas.push(t),this.temp=t.id,this.latestAreaItem.startX=this.mousePosX(e),this.latestAreaItem.startY=this.mousePosY(e),this.latestAreaItem.endX=0,this.latestAreaItem.endY=0}},mouseMove(e){this.mousedown&&(this.areas.filter((e=>e.id===this.temp)).map((o=>{let t=e.pageX-this.posImg.left,l=e.pageY-this.posImg.top,i=o.startX-t,s=o.startY-l;i<0&&(i*=-1,t-=i),s<0&&(s*=-1,l-=s),o.x=t,o.y=l,o.width=i,o.height=s})),this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})},mouseUp(){this.mousedown=!1,this.areas=this.areas.filter((e=>e.width>=3&&e.height>=3)),this.endMove(),this.endDrag(),this.prepareMarkedAreasList(),this.allowMultiSelection||this.$emit("restrictDrawing")},changeResizable(e){this.areas.filter((o=>o.id===e)).map((e=>{e.resizable=!0,e.z=100})),this.areas.filter((o=>o.id!==e)).map((e=>{e.resizable=!1,e.z=0}))},deleteSelected(e){this.areas=this.areas.filter((o=>o.id!==e)),this.prepareMarkedAreasList()},startDrag(){this.dragdown=!0},doDrag(e,o,t){if(this.dragdown)switch(o){case"w":t.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-t.pageX+this.posImg.left,e.x=t.pageX-this.posImg.left),e.width<10&&(e.x=e.x-10,e.width=e.width+10);break;case"sw":t.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-t.pageX+this.posImg.left,e.x=t.pageX-this.posImg.left),t.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=t.pageY-this.posImg.top-e.y),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"s":t.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=t.pageY-this.posImg.top-e.y),e.height<10&&(e.height=e.height+10);break;case"se":t.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=t.pageX-this.posImg.left-e.x),t.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=t.pageY-this.posImg.top-e.y),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"e":t.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=t.pageX-this.posImg.left-e.x),e.width<10&&(e.x=e.x-10,e.width=e.width+10);break;case"ne":t.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=t.pageX-this.posImg.left-e.x),t.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-t.pageY),e.y=t.pageY-this.posImg.top),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"n":t.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-t.pageY),e.y=t.pageY-this.posImg.top),e.height<10&&(e.height=e.height+10);break;case"nw":t.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-t.pageY),e.y=t.pageY-this.posImg.top),t.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-t.pageX+this.posImg.left,e.x=t.pageX-this.posImg.left),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;default:break}},endDrag(){this.dragdown=!1},startMove(e,o){this.move=!0,e.connectionId==this.connectionId&&(this.moveTempX=o.clientX,this.moveTempY=o.clientY,this.moveCurrentX=e.x,this.moveCurrentY=e.y)},doMove(e,o){if(e.connectionId!=this.connectionId&&this.move){let t=this.moveCurrentX+(o.clientX-this.moveTempX),l=this.moveCurrentY+(o.clientY-this.moveTempY),i=this.originImgSize.w-e.width,s=this.originImgSize.h-e.height;t>0&&l>0&&t<i&&l<s&&(e.x=t,e.y=l)}},endMove(){this.move=!1},creatReactangle(e,o,t,l,i,s){let a=null;if(a=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,a){let d={id:a,x:e,y:o,startX:e,startY:o,width:t,height:l,z:0,connectionId:i,areaType:s,resizable:!1};this.areas.push(d),this.temp=d.id}},prepareImageData(){_i=(0,W.$)("#screenshot"),_i&&(this.imageWidth=_i.offsetWidth,this.imageHeight=_i.offsetHeight,this.prepareDataForAreas())},prepareDataForAreas(){this.areas=[];let e=[];this.markedAreasList&&this.markedAreasList.length>0&&Array.from(this.markedAreasList).forEach((o=>{e=o.markedArea.split(",");let t=Math.round(this.imageWidth*e[0]),l=Math.round(this.imageHeight*e[1]),i=Math.round(this.imageWidth*e[2]),s=Math.round(this.imageHeight*e[3]),a=i-t,d=s-l;a<0&&(a*=-1,t-=a),d<0&&(d*=-1,l-=d),this.creatReactangle(t,l,a,d,o.connectionId,o.areaType)}))},getTableAreaAsString(e,o,t,l){let i=e/this.imageWidth,s=o/this.imageHeight,a=t/this.imageWidth,d=l/this.imageHeight;return i.toString()+","+s.toString()+","+a.toString()+","+d.toString()},prepareMarkedAreasList(){this.markedAreasList=[],Array.from(this.areas).forEach((e=>{let o=e.width+e.x,t=e.height+e.y;this.markedAreasList.push(Object.assign({},{markedArea:this.getTableAreaAsString(e.x,e.y,o,t),connectionId:e.connectionId,areaType:e.areaType}))}))},calculateLeftPosition(e){let o=this.areaDisplayPosX(e)+e.width;return o+50>=this.imageWidth&&(o=this.areaDisplayPosX(e)-60),o+"px"},calculatePositionFromTop(e){let o=this.areaDisplayPosY(e)-25;return o<0&&(o=this.areaDisplayPosY(e)),o+"px"}},mounted(){gi=this,this.setSize(),fi=(0,W.$)("#image_area"),this.calcPosOfBox(),fi.addEventListener("mousemove",this.calcPosOfBox),fi.addEventListener("scroll",this.calcPosOfBox),fi.addEventListener("mouseup",this.mouseUp)},unmounted:function(){fi.removeEventListener("mousemove",this.calcPosOfBox),fi.removeEventListener("scroll",this.calcPosOfBox),fi.removeEventListener("mouseup",this.mouseUp)},setup(){const e=(0,ee.nc)(),{markedAreasList:o}=(0,z.Jk)(e);return{markedAreasList:o}}}),yi=(0,ie.Z)(vi,[["render",ui],["__scopeId","data-v-5574d7ca"]]),wi=yi;var Ci=t(9273),bi=t(85985),Ti=t(48825),Bi=t(41914);const ki=(0,l._)("h5",{id:"start-help"},"Layout Builder Help",-1),xi=(0,l._)("h5",{id:"diable-extraction-confirmation-box"},"Disable Extraction Confirmation Box",-1),Mi=(0,l._)("h5",{id:"time-spent-settings"},"Time spent on validation ",-1);function Ii(e,o,t,s,a,d){const r=(0,l.up)("q-tooltip"),n=(0,l.up)("q-img"),m=(0,l.up)("q-btn"),c=(0,l.up)("q-banner"),u=(0,l.up)("q-popup-proxy"),h=(0,l.up)("q-icon");return(0,l.wg)(),(0,l.j4)(h,{class:"q-ma-sm",size:"sm",name:"help"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("page_number_text")),1)])),_:1}),(0,l.Wm)(u,{modelValue:e.show_help,"onUpdate:modelValue":o[1]||(o[1]=o=>e.show_help=o),class:"z-index-100000"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"row width-600"},{default:(0,l.w5)((()=>[ki,xi,(0,l._)("div",null,[(0,l.Wm)(n,{src:"help/confirmation-extraction-box.png",width:"500px"})]),Mi,(0,l._)("div",null,[(0,l.Wm)(n,{src:"help/time-spent.png",width:"500px"})]),(0,l.Wm)(m,{class:"q-mt-lg",flat:"",color:"primary",onClick:o[0]||(o[0]=o=>e.scrollToHelpSection("start-help")),label:"Go to the top"})])),_:1})])),_:1},8,["modelValue"])])),_:1})}const Fi=(0,l.aZ)({el:"#app",mixins:[Yl],components:{},props:{},data(){return{}},methods:{},setup(){const e=(0,ee.nc)(),{show_help:o}=(0,z.Jk)(e);return{show_help:o}}});var Li=t(83944),Ni=t(15607),Oi=t(24027);const Ei=(0,ie.Z)(Fi,[["render",Ii]]),Si=Ei;me()(Fi,"components",{QIcon:de.Z,QTooltip:re.Z,QPopupProxy:Li.Z,QBanner:Ni.Z,QImg:Oi.Z,QBtn:se.Z});var Ai=t(72113),qi=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{r(l.next(e))}catch(o){s(o)}}function d(e){try{r(l["throw"](e))}catch(o){s(o)}}function r(e){e.done?t(e.value):i(e.value).then(a,d)}r((l=l.apply(e,o||[])).next())}))};const Di=(0,l.aZ)({el:"#main",mixins:[j.Z,R.Z,bi.Z,rl.Z],components:{DefaultElements:Do,FieldsDesigner:to,DefaultGroups:To,Properties:Rl,Elements:ho,ImportPdf:ue,ImageComponent:wi,GeneralSettings:Gl,helpLayoutbuilder:Si,Loader:Ai.Z},watch:{$route(e,o){this.renderComponent=!1,this.isFormBuilderMode=!1,this.defaultFields=[],this.formBuilderModel=[],this.formBuilderConfigModel=[],this.handleScroll(),this.showImages=!1,this.activeTab="form_elements",this.activeFieldName=""},isExtenedPanel(e){this.disableEnablePanel()}},data(){return{imageIndex:0,templateId:(0,K.iH)(""),subDocType:(0,K.iH)(""),baseUrl:"",page:(0,K.iH)(1),imageHeight:0,imageWidth:200,connectionId:"",componentType:"input",keyImageChange:(0,K.iH)(0),splitterModel:(0,K.iH)(60),formSplitterModel:(0,K.iH)(50),showJsonForm:(0,K.iH)(!1),strFormLayout:(0,K.iH)(""),showPanel:(0,K.iH)(!1),markedAreasStr:"",allowMultiSelection:!1,language_origin:(0,K.iH)("")}},mounted:function(){window.fm=this,this.renderComponent=!0,this.isFormBuilderMode=!0,this.formBuilderModel=[],this.formBuilderConfigModel=[],this.docType=this.$route.params.doc_type,this.templateId=this.$route.params.id,this.setSubDocType(),this.baseUrl=String("https://api.docbits.com"),this.templateId?this.init():(this.formLayout=[],this.formLayoutImages=[],this.saveTemplate(!0)),window.addEventListener("keydown",(e=>{"Escape"===e.key&&(this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing())})),setTimeout((()=>{const e=(0,W.$)(".handle-scroll");e&&e.addEventListener("scroll",this.handleScroll);const o=(0,W.$)("#field_scrolle");o&&o.addEventListener("scroll",this.handleScroll)}),1e3)},unmounted:function(){const e=(0,W.$)(".handle-scroll");e&&e.removeEventListener("scroll",this.handleScroll);const o=(0,W.$)("#field_scrolle");o&&o.removeEventListener("scroll",this.handleScroll)},methods:{init(){return qi(this,void 0,void 0,(function*(){this.formLayout=[],this.templateId=this.$route.params.id,this.templateId&&(yield this.loadLayoutTemplateById(),this.initImage(),this.prepareRectangles())}))},loadLayoutTemplateById(){return qi(this,void 0,void 0,(function*(){let e;try{this.showLoading(),e=yield po.l_.getDocumentLayoutTemplateById(this.templateId);let o=JSON.parse(e.layout_json);this.showImages=!1,o&&(this.formLayout=o.hasOwnProperty("layout")?o.layout:[],o.hasOwnProperty("images")&&o.images.length>0&&(this.formLayoutImages=o.images,this.showImages=!0),this.proximityTokens=o.proximity_tokens,this.isExtenedPanel=!!o.isExtenedPanelEnabled,this.allowAreaSelection=!e.extraction_type||"FLEX_COORDINATES"!==e.extraction_type,this.setGeneralSettings(o),this.disableEnablePanel())}catch(o){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}this.formLayout&&this.prepareLayoutModel()}))},prepareLayoutModel(){for(const e of this.formLayout)e.fieldType||(e.fieldType=Je.oh.GROUP),this.formBuilderConfigModel[e.name]=JSON.parse(JSON.stringify(e)),this.formBuilderConfigModel[e.name].rows=[],this.formBuilderConfigModel[e.name].hasOwnProperty("short_cut_key_1")||(this.formBuilderConfigModel[e.name]["short_cut_key_1"]="",this.formBuilderConfigModel[e.name]["short_cut_key_2"]=""),this.formBuilderConfigModel[e.name].hasOwnProperty("is_stcky_group")||(this.formBuilderConfigModel[e.name]["is_stcky_group"]=!1)},initImage(){if(!this.showImages)return;let e=(0,W.$)("#image_container");this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight},setSubDocType(){this.$route.query&&this.$route.query.sub_doc_type&&(this.subDocType=String(this.$route.query.sub_doc_type||""))},zoomOut(){this.imageWidth>200&&(this.imageWidth=this.imageWidth-100)},zoomIn(){this.imageWidth=this.imageWidth+100},loadImageDetails(){this.initImage(),this.showPanel=!0,setTimeout((()=>{this.prepareRectangles()}),100)},loadImage(e,o){o&&this.keyImageChange++,this.saveMarkedAreasOfCurrentPage(),this.imageIndex=e,this.page=e+1,this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.prepareRectangles()},prepareFormBuilderJson(){let e=[];for(let[o,t]of this.formLayout.entries()){this.formBuilderConfigModel.hasOwnProperty(t.name)&&(t.elementWidth=this.formBuilderConfigModel[t.name].elementWidth,t.right_border=this.formBuilderConfigModel[t.name].right_border,t.bottom_border=this.formBuilderConfigModel[t.name].bottom_border,t.is_stcky_group=this.formBuilderConfigModel[t.name].is_stcky_group,t.short_cut_key_1=this.formBuilderConfigModel[t.name].short_cut_key_1,t.short_cut_key_2=this.formBuilderConfigModel[t.name].short_cut_key_2,t.is_panel_section_group=this.formBuilderConfigModel[t.name].is_panel_section_group,t.is_stcky_group&&e.push(o));for(let e of t.rows)Object.assign(e,this.formBuilderConfigModel[e.name])}for(const o of e){const e=this.formLayout[o];this.formLayout.splice(o,1),this.formLayout.unshift(e)}this.$forceUpdate()},getLayoutJsonStr(){const e={layout:this.formLayout,images:this.formLayoutImages,proximity_tokens:this.proximityTokens,isExtenedPanelEnabled:this.isExtenedPanel};return Object.assign(e,this.getGeneralSettingsToSave()),JSON.stringify(e)},copyTemplate(){(0,Bi.Z)(this.getLayoutJsonStr()).then((()=>{this.showSuccessToast("Copied!")}))},openJsonForm(){this.strFormLayout=this.getLayoutJsonStr(),this.showJsonForm=!0},savePastedJson(){if(this.strFormLayout){let e=JSON.parse(this.strFormLayout);this.formLayout=e.hasOwnProperty("layout")?e.layout:[],e.hasOwnProperty("images")&&e.images.length>0&&(this.formLayoutImages=e.images,this.showImages=!0),this.proximityTokens=e.proximity_tokens,this.isExtenedPanel=!!e.isExtenedPanelEnabled,this.setGeneralSettings(e)}this.saveTemplate(!1)},createTemplateAccordingToOrigin(){this.templateId="",this.saveTemplate(!0)},saveTemplate(e,o=!0){return qi(this,void 0,void 0,(function*(){let t;e&&(this.saveMarkedAreasOfCurrentPage(),this.prepareFormBuilderJson());try{this.showLoading();let e={doc_type_key:this.docType,sub_doc_type_key:this.subDocType||"",title:"form builder",layout_json:this.getLayoutJsonStr()};t=this.templateId?yield po.l_.updateDocumentLayoutTemplateById(e,this.templateId):yield po.l_.createDocumentLayoutTemplate(e),t&&o&&this.showSuccessToast("Template Sucessfully saved"),this.templateId=t.id,this.$forceUpdate(),this.refreshView()}catch(l){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},refreshView(){const e=Kl.V.getDetailViewRoute({doc_type_key:this.docType||"",layout_template_id:this.templateId||"",sub_doc_type_key:this.subDocType||""});this.$router.push(e)},removeBordersFromRectangles(){let e=document.body.getElementsByTagName("rect");for(let o of e)o.classList.remove("border")},removeAllConnectionLines(){const e=(0,W.$)("#connection_line");e&&e.remove()},saveMarkedAreasOfCurrentPage(){for(const e of this.documentTableNames)if(this.formBuilderConfigModel.hasOwnProperty(e))for(const o of this.formBuilderConfigModel[e].columns)o.coords=[];for(const e of this.markedAreasList)this.saveMarkedAreas(e.connectionId,e.markedArea,e.areaType)},saveMarkedAreas(e,o,t){let l;e:for(const i of this.formLayout)for(let s of i.rows){if(s.fieldType===Je.oh.EXTRACTED_TABLE&&"table"===t&&(l=e.split("__"),s.name=l[1])){for(const e of this.formBuilderConfigModel[l[1]].columns)e.col_id==l[0]&&e.coords.push({coord:o,page:this.page});break e}if(Je.P8.includes(s.fieldType)&&"table"!==t&&(s.fieldType===Je.oh.TABLE_OF_CHECKBOXES&&this.formBuilderConfigModel[s.name].tableBodyRows.forEach(((t,l)=>{t.forEach(((t,l)=>{if(t.name===e)return t.coords=[],t.page=this.page,void t.coords.push(o)}))})),s.name===e)){this.formBuilderConfigModel[e].page=this.page,this.formBuilderConfigModel[e].coords=[],this.formBuilderConfigModel[e].coords.push(o),s.page=this.page,s.coords=[],s.coords.push(o);break e}}},connect(e,o,t,l){const i=this.getOffset(e),s=this.getOffset(o),a=i.left,d=i.top+i.height/2;let r=s.left+s.width;"checkbox"===this.componentType&&(r+=s.left/2);const n=s.top+s.height/2,m=Math.sqrt((r-a)*(r-a)+(n-d)*(n-d)),c=(a+r)/2-m/2,u=(d+n)/2-l/2,h=Math.atan2(d-n,a-r)*(180/Math.PI);this.removeAllConnectionLines();const p=document.createElement("div");p.setAttribute("id","connection_line"),p.style.cssText="z-index: 102;padding:0px; margin:0px; height:"+l+"px; background-color:"+t+"; line-height:1px; position:absolute; left:"+c+"px; top:"+u+"px; width:"+m+"px; -moz-transform:rotate("+h+"deg); -webkit-transform:rotate("+h+"deg); -o-transform:rotate("+h+"deg); -ms-transform:rotate("+h+"deg); transform:rotate("+h+"deg);",document.body.appendChild(p)},getOffset(e){const o=e.getBoundingClientRect();return{left:o.left+window.pageXOffset,right:o.right+window.pageXOffset,top:o.top+window.pageYOffset,width:o.width||e.offsetWidth,height:o.height||e.offsetHeight}},refreshCanvas(){this.$forceUpdate(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.prepareRectangles()},getElementToConnect(e){return this.componentType=e.getAttribute("child_type"),"checkbox"===this.componentType?e.querySelector(".q-checkbox__bg"):e},markTableColumns(e){this.allowMultiSelection=!0,this.connectionId=e,this.enableDrawing(),this.showNotification("Please Mark Areas against this column")},showConnectionFromField(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.allowMultiSelection=!1,this.connectionId=e;let o=this.getElementToConnect((0,W.$)("#"+e)),t=o.getAttribute("pageno"),l=!1;t&&+t!==this.page&&(l=!0,this.page=+t,this.imageIndex=this.page-1,this.loadImageDetails(),this.$forceUpdate()),o.setAttribute("pageno",this.page.toString()),setTimeout((()=>{let t=(0,W.$)("#"+e+"_rect");t&&(this.scrollInToViewCenter(t),document.documentElement.scrollTop=0),setTimeout((()=>{if(!t){this.componentType=o.getAttribute("child_type");let e="";if("checkbox"===this.componentType)e=o.getAttribute("aria-checked")?"true":"";else{let t=o.querySelector(this.componentType);t&&(e=t.value)}return""!=e?this.showNotification(this.$t("pages.messages.SELECT_AREA_NO_COORDINATES")):this.showNotification(this.$t("pages.messages.SELECT_AREA")),void this.enableDrawing()}this.showConnection(e,t,o)}),50)}),l?400:100)},showConnection(e,o,t){o&&t?(this.drawOverlay(e,o),o.setAttribute("class","border"),this.connect(o,t,"#26a69a",2)):alert(this.$t("pages.messages.NO_MAPPING_AVAILABLE"))},drawOverlay(e,o){var t,l;this.connectionId=e,this.removeExistingConfirmationOverlays();const i=(0,W.$)("#"+e);if(!i)return;let s;this.componentType=i.getAttribute("child_type");let a="";if("checkbox"===this.componentType)a=i.getAttribute("aria-label"),s="Un-Checked","true"===i.getAttribute("aria-checked")&&(s="Checked");else{const o=(0,W.$)("."+e);a=o.innerHTML;const t=i.querySelector(this.componentType);s=t.value}const d=this.getOffset(o),r=document.createElement("div");r.setAttribute("id","confirmation_overlay"),r.style.position="absolute",r.style.zIndex="99999",r.style.left=d.left+"px",r.style.top=(+d.top+ +d.height+6).toString()+"px",r.style.background="#e2e2e2",r.style.color="#898989",r.style.minHeight="80px",r.style.minWidth="100px",r.style.maxWidth="50%",r.style.textAlign="center",r.style.padding="5px 10px 5px 10px",r.style.letterSpacing="1px",r.style.borderRadius="7px",r.style.boxShadow="0 1px 2px rgba(0,0,0,0.07),\n      0 2px 4px rgba(0,0,0,0.07),\n      0 4px 8px rgba(0,0,0,0.07),\n      0 8px 16px rgba(0,0,0,0.07),\n      0 16px 32px rgba(0,0,0,0.07),\n      0 32px 64px rgba(0,0,0,0.07);",r.innerHTML=`<div><b>${s}</b></div><div><b style='font-size: 9px'>${a}</b></div>\n                  <div>\n\n                  <span class='divOverlayWrong'>\n                    <i connectionId='${e}' style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.6em;' class='fa fa-times cursor-pointer'></i>\n                  </span>\n                  <span id='divOverlayCorrect'>\n                    <i style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.5em;' class='fas fa-check cursor-pointer'></i>\n                  </span></div>`,document.body.appendChild(r),null===(t=(0,W.$)("#divOverlayCorrect"))||void 0===t||t.addEventListener("click",(e=>{this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines()}));let n=document.getElementsByClassName("divOverlayWrong");Array.from(n).forEach((e=>{null===e||void 0===e||e.addEventListener("click",(e=>{this.connectionId=e.target.getAttribute("connectionId"),this.connectionId&&(this.initTempFieldDelete(),this.markedAreasStr=JSON.stringify(this.markedAreasList),this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.$forceUpdate(),this.enableDrawing())}))}));try{const e=(0,W.$)("#confirmation_overlay"),o=null===(l=(0,W.$)("#confirmation_overlay"))||void 0===l?void 0:l.clientWidth,t=d.width,i=(+o-+t)/2;e.style.left=+d.left-+i+"px"}catch(m){}},initTempFieldDelete(){this.formBuilderConfigModel[this.connectionId].coords=[],this.markedAreasList=this.markedAreasList.filter((e=>e.connectionId!==this.connectionId))},prepareRectangles(){this.markedAreasList=[];for(const e of this.formLayout)for(let o of e.rows)this.formBuilderConfigModel.hasOwnProperty(o.name)&&(o.fieldType!==Je.oh.EXTRACTED_TABLE?Je.P8.includes(o.fieldType)&&(o.fieldType!==Je.oh.TABLE_OF_CHECKBOXES?!o.coords||o.coords.length<1||this.formBuilderConfigModel.hasOwnProperty(o.name)&&o.page&&o.page==this.page&&this.addMarkedAreaToList(o):this.prepareMarkedAreasForTableOfCheckboxes(o)):this.prepareMarkedAreasForSerieTable(o));this.markedAreasStr=JSON.stringify(this.markedAreasList)},prepareMarkedAreasForTableOfCheckboxes(e){for(let o of this.formBuilderConfigModel[e.name].tableBodyRows)for(let e of o)!e.coords||e.coords.length<1||this.formBuilderConfigModel.hasOwnProperty(e.name)&&e.page&&e.page==this.page&&this.addMarkedAreaToList(e)},prepareMarkedAreasForSerieTable(e){for(const o of this.formBuilderConfigModel[e.name].columns)if(o.coords&&!(o.coords.length<1))for(const t of o.coords)t.page&&t.page==this.page&&this.markedAreasList.push(Object.assign({},{markedArea:t.coord,connectionId:o.col_id+"__"+e.name,areaType:"table"}))},addMarkedAreaToList(e){const o=(0,W.$)("#"+e.name);o&&(o.setAttribute("pageno",e.page),this.markedAreasList.push(Object.assign({},{markedArea:e.coords[0],connectionId:e.name,areaType:"input"})))},handleScroll(){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays()},disableEnablePanel(){this.isExtenedPanel?(this.splitterModel=60,this.showPanel=!0):this.splitterModel=94},enableDrawing(){const e=(0,W.$)("#draw");null===e||void 0===e||e.classList.add("cursor-crosshair"),null===e||void 0===e||e.classList.remove("pointer-events-none")},restrictDrawing(){const e=(0,W.$)("#draw");null===e||void 0===e||e.classList.add("pointer-events-none"),null===e||void 0===e||e.classList.remove("cursor-crosshair")},restoreDefaults(){return qi(this,void 0,void 0,(function*(){try{if(!this.templateId)return;this.showLoading();const e=yield po.l_.deleteDocumentLayoutTemplate(this.templateId);if(!1===e.success)throw{message:e.message};this.showSuccessToast(this.$t("pages.messages.OPERATION_SUCESSFULL")),this.templateId="",this.saveTemplate(!0,!1)}catch(e){const o=Ci.w.getErrorMessage(e);this.showErrorToast(o)}finally{this.hideLoading()}}))},prepareLanguageOriginList(){return qi(this,void 0,void 0,(function*(){yield this.getLanguageOptions(),this.language_origin_list=JSON.parse(JSON.stringify(this.language_origins)),this.language_origin_list[0].label=this.$t("default")}))}},setup(){const e=(0,Ti.Z)(),o=(0,ee.nc)(),{showImages:t,activeTab:l,isFormBuilderMode:i,keyToUpdateComponnets:s,renderComponent:a,defaultFields:d,formLayout:r,documentTableNames:n,formLayoutImages:m,formBuilderModel:c,formBuilderConfigModel:u,activeFieldName:h,isExtenedPanel:p,proximityTokens:g,docType:f,markedAreasList:_,allowAreaSelection:v}=(0,z.Jk)(o),y=(0,ee.e0)(),{setGeneralSettings:w,getGeneralSettingsToSave:C}=y,b=(0,ee.A3)(),{language_origins:T}=(0,z.Jk)(b),{getLanguageOptions:B}=b;return{getLanguageOptions:B,setGeneralSettings:w,getGeneralSettingsToSave:C,docType:f,activeTab:l,showImages:t,formLayout:r,defaultFields:d,activeFieldName:h,renderComponent:a,formLayoutImages:m,formBuilderModel:c,isFormBuilderMode:i,documentTableNames:n,keyToUpdateComponnets:s,formBuilderConfigModel:u,allowAreaSelection:v,isExtenedPanel:p,proximityTokens:g,markedAreasList:_,language_origins:T,language_origin_list:(0,K.iH)([]),showNotification(o){e.notify({message:o,color:"primary",position:"top"})}}}});var Vi=t(83414),Pi=t(52035),Ui=t(2350),Wi=t(57547),zi=t(3269),Ri=t(65869),Zi=t(5906),$i=t(86602),Xi=t(60429),Hi=t(80218),Yi=t(46778),Qi=t(10151),Ji=t(39570),Gi=t(13747),Ki=t(25589),ji=t(68689),es=t(60677);const os=(0,ie.Z)(Di,[["render",U],["__scopeId","data-v-7fabe194"]]),ts=os;me()(Di,"components",{QBtn:se.Z,QIcon:de.Z,QSelect:gl.Z,QItem:Vi.Z,QItemSection:Pi.Z,QItemLabel:Ui.Z,QTooltip:re.Z,QTabs:Wi.Z,QTab:zi.Z,QSeparator:Ri.Z,QTabPanels:Zi.Z,QTabPanel:$i.Z,QExpansionItem:Xi.Z,QSplitter:Hi.Z,QToggle:Ke.Z,QDialog:Yi.Z,QCard:Qi.Z,QToolbar:Ji.Z,QToolbarTitle:Gi.Z,QCardSection:Ki.Z,QForm:ji.Z,QInput:je.Z,QCheckbox:ql.Z}),me()(Di,"directives",{ClosePopup:es.Z})}}]);