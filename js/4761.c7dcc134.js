"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[4761],{74761:(e,t,l)=>{l.r(t),l.d(t,{default:()=>E});var i=l(61758),s=l(58790);const a={class:"row justify-center white-inputs container-wrapper"},o={class:"support-heading text-primary"},r={class:"q-mt-md row"},n={class:"q-mt-md"};function p(e,t,l,p,u,c){const d=(0,i.g2)("SubHeader"),m=(0,i.g2)("q-card-section"),h=(0,i.g2)("q-seperator"),g=(0,i.g2)("q-input"),b=(0,i.g2)("q-select"),k=(0,i.g2)("f-btn"),f=(0,i.g2)("q-card-actions"),T=(0,i.g2)("q-card"),y=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(d,{name:"support_ticket",label:e.$t("pages.support.support_ticket")},null,8,["label"]),(0,i.Lk)("div",a,[(0,i.bF)(T,{style:{width:"1000px","margin-top":"7%"},flat:"",class:"rounded-borders page-background"},{default:(0,i.k6)((()=>[(0,i.bF)(m,{class:"text-center"},{default:(0,i.k6)((()=>[(0,i.Lk)("span",o,(0,s.v_)(e.$t("pages.support.support_ticket")),1)])),_:1}),(0,i.bF)(h),(0,i.bF)(m,{class:"q-pa-md"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",r,[(0,i.bF)(g,{outlined:"",modelValue:e.supportTicket.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.supportTicket.email=t),label:e.$t("email"),style:{width:"48%"}},null,8,["modelValue","label"]),(0,i.bF)(g,{outlined:"",modelValue:e.supportTicket.fullname,"onUpdate:modelValue":t[1]||(t[1]=t=>e.supportTicket.fullname=t),label:e.$t("name"),style:{width:"30%","margin-left":"1%"}},null,8,["modelValue","label"]),(0,i.bF)(b,{outlined:"",options:e.priorityOptions,modelValue:e.supportTicket.priority,"onUpdate:modelValue":t[2]||(t[2]=t=>e.supportTicket.priority=t),label:e.$t("priority"),style:{width:"20%","margin-left":"1%"}},null,8,["options","modelValue","label"])]),(0,i.Lk)("div",n,[(0,i.bF)(g,{outlined:"",modelValue:e.supportTicket.message,"onUpdate:modelValue":t[3]||(t[3]=t=>e.supportTicket.message=t),label:e.$t("pages.support.message"),type:"textarea"},null,8,["modelValue","label"])])])),_:1}),(0,i.bF)(f,{align:"center",class:"q-pb-md"},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.bF)(k,{appearance:"cancel",label:e.$t("cancel"),onClick:t[4]||(t[4]=e=>this.$router.go(-1))},null,8,["label"]),[[y]]),(0,i.bF)(k,{class:"on-right",label:e.$t("pages.support.send"),onClick:e.sendSupportTicket},null,8,["label","onClick"])])),_:1})])),_:1})])],64)}var u=l(16332),c=l(11470),d=l(24622),m=l(77362),h=l(18505),g=l(38734),b=l(45022),k=function(e,t,l,i){function s(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,a){function o(e){try{n(i.next(e))}catch(t){a(t)}}function r(e){try{n(i["throw"](e))}catch(t){a(t)}}function n(e){e.done?l(e.value):s(e.value).then(o,r)}n((i=i.apply(e,t||[])).next())}))};const f=(0,i.pM)({mixins:[h.A,d.A],components:{SubHeader:m.A},setup(){return{priorityOptions:(0,g.KR)([{label:u.i18n.t("pages.support.very_high"),value:"Very High"},{label:u.i18n.t("pages.support.high"),value:"High"},{label:u.i18n.t("pages.support.medium"),value:"Medium"},{label:u.i18n.t("pages.support.low"),value:"Low"}]),supportTicket:(0,g.KR)({email:"",message:"",priority:{label:u.i18n.t("pages.support.medium"),value:"medium"},fullname:""})}},mounted(){this.autofillmail()},methods:{autofillmail(){let e=b.A.getItem("user_details");this.supportTicket.email=e.username,this.supportTicket.fullname=e.first_name+" "+e.last_name},checkArrayForEmptyString(){return""===this.supportTicket.email||""===this.supportTicket.message},checkStringIfValidEmail(){return this.supportTicket.email.includes("@")},buildRequestBody(){const e=new FormData;return e.append("customer_email",this.supportTicket.email),e.append("body",this.supportTicket.message),e.append("priority",this.supportTicket.priority.value),e.append("fullname",this.supportTicket.fullname),e},sendSupportTicket(){this.showLoading,this.checkStringIfValidEmail()?this.checkArrayForEmptyString()?this.showErrorToast(this.$t("directscan.fill_all_fields")):(this.makeApiCall(),this.hideLoading):this.showErrorToast(this.$t("pages.messages.invalid_email"))},makeApiCall(){return k(this,void 0,void 0,(function*(){const e=this.buildRequestBody();return yield c.dn.create_ticket(e).then((e=>{this.showSuccessToast(this.$t("success"))})).catch((e=>{e.message.error.includes("customer")?this.showErrorToast(this.$t("no_email_found")+" "+this.supportTicket.email):this.showErrorToast(this.$t("errors.INVALID_AUTHORIZATION_CODE"))}))}))}}});var T=l(12807),y=l(23316),_=l(44189),v=l(67837),w=l(94940),A=l(99980),F=l(50492),V=l(62669),$=l(88672),C=l(98582),q=l.n(C);const S=(0,T.A)(f,[["render",p],["__scopeId","data-v-3be299bc"]]),E=S;q()(f,"components",{QCard:y.A,QCardSection:_.A,QInput:v.A,QSelect:w.A,QFile:A.A,QIcon:F.A,QCardActions:V.A}),q()(f,"directives",{ClosePopup:$.A})}}]);