"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[1640],{51640:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Et});var l=o(83673),a=o(62323);const r=e=>((0,l.dD)("data-v-e84d49a8"),e=e(),(0,l.Cn)(),e),s={class:"row"},d={class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm body-bg body-height scrolle-y"},n={class:"row"},i={class:"col-sm-12 col-md-12 col-lg-12 q-pl-md q-mb-lg"},c={class:"secondary-c-text text-h6"},u=r((()=>(0,l._)("img",{width:"24",src:"back-primary.svg"},null,-1))),p={class:"primary-back"},m={class:"selected-card-container"},w={class:"col-sm-12 col-md-12 col-lg-12 q-mb-lg name-field"},h={class:"col-sm-12 col-md-12 col-lg-12"},g={key:0,class:"col-sm-12 col-md-12 col-lg-12"},f={class:"col-sm-12 col-md-12 col-lg-12"},k={class:"col-sm-12 col-md-12 col-lg-12"},v={class:"col-sm-12 col-md-12 col-lg-12"},C={class:"col-sm-12 col-md-12 col-lg-12"},y={class:"row q-mt-lg"},_={class:"col-sm-6 col-md-6 col-lg-6 q-pa-sm margin-0-auto"},b=r((()=>(0,l._)("img",{class:"width-20px q-mr-sm",src:"play.svg"},null,-1))),W=(0,l.Uk)(" Test "),M={class:"col-sm-6 col-md-6 col-lg-6 q-pa-sm margin-0-auto"},E={class:"text-weight-bold text-capitalize"},T={class:"row"},x={class:"col-sm-4 col-md-4 col-lg-4 cards-container"},D=r((()=>(0,l._)("div",{class:"row q-pb-sm q-pl-sm fontGrey"}," System ",-1))),O=["onClick"],V={class:"col-sm-10 col-md-10 col-lg-10 cursor-pointer"},Z=["innerHTML"],S={class:"category-text"},I={class:"col-sm-2 col-md-2 col-lg-2"},A={class:"col-sm-4 col-md-4 col-lg-4 cards-container box-margin"},L=r((()=>(0,l._)("div",{class:"col-sm-4 col-md-4 col-lg-4 cards-container"},null,-1)));function q(e,t,o,r,q,H){const R=(0,l.up)("q-icon"),j=(0,l.up)("q-btn"),z=(0,l.up)("q-input"),Q=(0,l.up)("GenericCard"),F=(0,l.up)("q-toolbar-title"),J=(0,l.up)("q-toolbar"),N=(0,l.up)("q-card-section"),U=(0,l.up)("q-card"),G=(0,l.up)("q-dialog"),P=(0,l.up)("Loader"),B=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",s,[(0,l._)("div",d,[(0,l._)("div",n,[(0,l._)("div",i,[(0,l._)("div",c,[(0,l.Wm)(j,{flat:"",rounded:"","data-cy":"workflow_builder",color:"primary",to:"/workflows"},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{class:"text-red-13",size:"sm"},{default:(0,l.w5)((()=>[u])),_:1}),(0,l._)("label",p,(0,a.zw)(e.$t("processes")),1)])),_:1})])]),(0,l._)("div",m,[(0,l._)("div",w,[(0,l.Wm)(z,{modelValue:e.workflowName,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.workflowName=t),t[1]||(t[1]=t=>e.inputValueChanges())],placeholder:"Workflow name",color:"light-blue"},null,8,["modelValue"])]),(0,l._)("div",h,[(0,l._)("h5",{class:(0,a.C_)(["headingMargin",0===Object.keys(e.selectedWhenCards).length?"fontGrey":"item-selected"])},"When....",2)]),e.selectedWhenCards&&0!==Object.keys(e.selectedWhenCards).length?((0,l.wg)(),(0,l.iD)("div",{class:"col-sm-12 col-md-12 col-lg-12 selected-card",key:e.selectedWhenCards.id},[(0,l.Wm)(Q,{item:e.selectedWhenCards,itemIndex:0,cardType:"when",isDialog:!1,parentSvg:e.selectedWhenCards.svg,color:e.selectedWhenCards.parentColor,onOnCardClick:e.onCardClick,onRemoveCard:e.removeCard,onReplaceCard:e.replaceCard},null,8,["item","parentSvg","color","onOnCardClick","onRemoveCard","onReplaceCard"])])):((0,l.wg)(),(0,l.iD)("div",g,[(0,l.Wm)(j,{flat:"",icon:"add",class:"addCard addCard-bg",label:"Add Card",onClick:t[2]||(t[2]=t=>e.setCardType("when"))})])),(0,l._)("div",f,[(0,l._)("h5",{class:(0,a.C_)(["headingMargin",0===Object.keys(e.selectedAndCards).length?"fontGrey":"item-selected"])},"And....",2)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.selectedAndCards,((t,o)=>((0,l.wg)(),(0,l.iD)("div",{key:t.id,class:"col-sm-12 col-md-12 col-lg-12 selected-card"},[(0,l.Wm)(Q,{item:t,itemIndex:o,cardType:"and",isDialog:!1,parentSvg:t.svg,color:t.parentColor,onOnCardClick:e.onCardClick,onRemoveCard:e.removeCard,onReplaceCard:e.replaceCard},null,8,["item","itemIndex","parentSvg","color","onOnCardClick","onRemoveCard","onReplaceCard"])])))),128)),(0,l._)("div",k,[(0,l.Wm)(j,{flat:"",icon:"add",class:"addCard addCard-bg",label:"Add Card",onClick:t[3]||(t[3]=t=>e.setCardType("and"))})]),(0,l._)("div",v,[(0,l._)("h5",{class:(0,a.C_)(["headingMargin",0===Object.keys(e.selectedThenCards).length?"fontGrey":"item-selected"])},"Then....",2)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.selectedThenCards,((t,o)=>((0,l.wg)(),(0,l.iD)("div",{key:t.id,class:"col-sm-12 col-md-12 col-lg-12 selected-card"},[(0,l.Wm)(Q,{item:t,itemIndex:o,cardType:"then",isDialog:!1,parentSvg:t.svg,color:t.parentColor,onOnCardClick:e.onCardClick,onRemoveCard:e.removeCard,onReplaceCard:e.replaceCard},null,8,["item","itemIndex","parentSvg","color","onOnCardClick","onRemoveCard","onReplaceCard"])])))),128)),(0,l._)("div",C,[(0,l.Wm)(j,{flat:"",icon:"add",class:"addCard addCard-bg",label:"Add Card",onClick:t[4]||(t[4]=t=>e.setCardType("then"))})]),(0,l._)("div",y,[(0,l._)("div",_,[(0,l.Wm)(j,{color:"white","text-color":"black",class:"width-160 border-radius-10px"},{default:(0,l.w5)((()=>[b,W])),_:1})]),(0,l._)("div",M,[(0,l.Wm)(j,{icon:"done",label:"Save",class:"width-160 save-button border-radius-10px float-right",onClick:t[5]||(t[5]=t=>e.saveWorkflow())})])])])])])]),(0,l.Wm)(G,{modelValue:e.showItemPanel,"onUpdate:modelValue":t[6]||(t[6]=t=>e.showItemPanel=t),maximized:""},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"cards-dialog dialog-bg"},{default:(0,l.w5)((()=>[(0,l.Wm)(J,{class:"dialog-toolbar"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,null,{default:(0,l.w5)((()=>[(0,l._)("span",E,(0,a.zw)(e.cardType)+"...",1)])),_:1}),(0,l.wy)((0,l.Wm)(j,{flat:"",round:"",dense:"",icon:"close"},null,512),[[B]])])),_:1}),(0,l.Wm)(N,{class:"paddingMargin0"},{default:(0,l.w5)((()=>[(0,l._)("div",T,[(0,l._)("div",x,[D,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.category,((t,o)=>((0,l.wg)(),(0,l.iD)("div",{key:o,class:(0,a.C_)(["row",e.cards.category==t.category?"active-category-card":"category-card"]),onClick:o=>{e.setSubCategory(t)}},[(0,l._)("div",V,[(0,l.Wm)(j,{round:"",flat:"",size:"xs",class:"p-7",style:(0,a.j5)("background-color:"+t.svg_background_color)},{default:(0,l.w5)((()=>[(0,l._)("i",{innerHTML:t.svg,class:"float-left q-mr-sm svg-icon center-inner"},null,8,Z)])),_:2},1032,["style"]),(0,l._)("span",S,(0,a.zw)(e.$t(t.category)),1)]),(0,l._)("div",I,[(0,l.Wm)(R,{name:"arrow_forward_ios",size:"20px",class:"float-right icon"})])],10,O)))),128))]),(0,l._)("div",A,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cards.cards,((t,o)=>((0,l.wg)(),(0,l.j4)(Q,{key:o+"_"+t.id,item:t,itemIndex:o,isDialog:!0,parentSvg:e.cards.svg,color:e.cards.svg_background_color,onOnCardClick:e.onCardClick,onRemoveCard:e.removeCard,onReplaceCard:e.replaceCard},null,8,["item","itemIndex","parentSvg","color","onOnCardClick","onRemoveCard","onReplaceCard"])))),128))]),L])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(P)],64)}var H=o(11185),R=o(10321),j=o(77378),z=o(61959);const Q={class:"col-sm-12 col-md-12 col-lg-12"},F={class:"col-sm-3 col-md-2 col-lg-2 verticalCenter"},J=["innerHTML"],N={class:"col-sm-8 col-md-9 col-lg-9"},U={class:"color-93939A paddingMargin0 font-size-0-75"},G={class:"paddingMargin0 font-size-15"},P={key:0,class:"col-sm-1 col-md-1 col-lg-1 verticalCenter"},B=(0,l.Uk)("Replace"),$=(0,l.Uk)("Delete");function Y(e,t,o,r,s,d){const n=(0,l.up)("q-btn"),i=((0,l.up)("q-tooltip"),(0,l.up)("Badge")),c=(0,l.up)("q-item-label"),u=(0,l.up)("q-item-section"),p=(0,l.up)("q-icon"),m=(0,l.up)("q-item"),w=(0,l.up)("q-separator"),h=(0,l.up)("q-list"),g=(0,l.up)("q-popup-proxy"),f=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",Q,[(0,l._)("div",{class:(0,a.C_)(["row taskCard taskCard-bg",e.isDialog?"cursor-pointer":"cursor-default"]),onClick:t[2]||(t[2]=t=>e.onCardClick(e.item))},[(0,l._)("div",F,[(0,l.Wm)(n,{round:"",flat:"",size:"xs",class:"p-10",style:(0,a.j5)("background-color:"+e.color)},{default:(0,l.w5)((()=>[(0,l._)("i",{innerHTML:e.parentSvg,class:"svg-icon center-inner"},null,8,J)])),_:1},8,["style"])]),(0,l._)("div",N,[(0,l._)("p",U,[(0,l.Uk)((0,a.zw)(e.$t(e.item.category))+" ",1),(0,l.kq)("",!0)]),(0,l._)("p",G,[!e.dataArray||e.dataArray.length<1?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,a.zw)(e.item.text),1)],64)):((0,l.wg)(!0),(0,l.iD)(l.HY,{key:1},(0,l.Ko)(e.dataArray,((t,o)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:o},[e.renderBadge(t)?((0,l.wg)(),(0,l.j4)(i,{key:0,item:e.item,variable:t,isDialog:e.isDialog},null,8,["item","variable","isDialog"])):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,a.zw)(t+" "),1)],64))],64)))),128))])]),e.isDialog?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",P,[(0,l.Wm)(p,{name:"more_horiz",class:"more-horiz cursor-pointer",size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{offset:[10,10]},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"width-200 action-popup"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{clickable:"",onClick:t[0]||(t[0]=t=>e.$emit("replaceCard",e.itemIndex,e.cardType)),class:"item"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[B])),_:1})])),_:1}),(0,l.Wm)(u,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"sync",color:"c8c8d0",size:"xs"})])),_:1})])),_:1})),[[f]]),(0,l.Wm)(w,{color:"DADAE2",inset:""}),(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{clickable:"",onClick:t[1]||(t[1]=t=>e.$emit("removeCard",e.itemIndex,e.cardType)),class:"delete-item"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[$])),_:1})])),_:1}),(0,l.Wm)(u,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"delete",color:"c8c8d0",size:"xs"})])),_:1})])),_:1})),[[f]])])),_:1})])),_:1})])),_:1})]))],2)])}const K={class:"row no-wrap q-pa-sm q-pb-md width-320px"},X={class:"col-sm-12 col-md-12 col-lg-12"};function ee(e,t,o,r,s,d){(0,l.up)("q-badge"),(0,l.up)("q-icon");const n=(0,l.up)("q-menu"),i=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.kq)("",!0),e.currentElement.display_name?((0,l.wg)(),(0,l.j4)(i,{key:1,size:e.workflowModel[e.currentElementId].badgeValue==e.workflowModel[e.currentElementId].defaultValue?"xs":"md",flat:e.workflowModel[e.currentElementId].badgeValue!=e.workflowModel[e.currentElementId].defaultValue,rounded:e.workflowModel[e.currentElementId].badgeValue==e.workflowModel[e.currentElementId].defaultValue,outline:e.workflowModel[e.currentElementId].badgeValue==e.workflowModel[e.currentElementId].defaultValue,class:(0,a.C_)([e.workflowModel[e.currentElementId].badgeValue==e.workflowModel[e.currentElementId].defaultValue?"":"selected-custom-badge","custom-badge"]),color:e.workflowModel[e.currentElementId].badgeValue==e.workflowModel[e.currentElementId].defaultValue?"custom-badge-light":"custom-badge-bold",label:e.getLabel(e.isDialog?e.workflowModel[e.currentElementId].defaultValue:e.workflowModel[e.currentElementId].badgeValue)},{default:(0,l.w5)((()=>[e.isDialog?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(n,{key:0,fit:"",anchor:"bottom middle",self:"top middle",style:{"border-radius":"10px","box-shadow":"0 10px 44px 0 rgba(0, 0, 0, 0.07),0 2px 12px 0 rgba(0, 0, 0, 0.1),0 2px 4px 0 rgba(0, 0, 0, 0.04) !important"}},{default:(0,l.w5)((()=>[(0,l.kq)("",!0),(0,l._)("div",K,[(0,l._)("div",X,[((0,l.wg)(),(0,l.j4)((0,l.LL)(e.currentElement.display_name),{currentElement:e.currentElement},null,8,["currentElement"]))])])])),_:1}))])),_:1},8,["size","flat","rounded","outline","class","color","label"])):(0,l.kq)("",!0)],64)}var te=o(78564);const oe={class:"row items-center justify-end"};function le(e,t,o,a,r,s){const d=(0,l.up)("q-btn"),n=(0,l.up)("q-time"),i=(0,l.up)("q-popup-proxy"),c=(0,l.up)("q-icon"),u=(0,l.up)("q-input"),p=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(u,{dense:"",modelValue:e.workflowModel[e.currentElement.uuid].value,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.workflowModel[e.currentElement.uuid].value=t),t[2]||(t[2]=t=>{e.inputValueChanges(t)})],mask:"time",rules:["time"]},{append:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"access_time",class:"cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{modelValue:e.workflowModel[e.currentElement.uuid].value,"onUpdate:modelValue":t[0]||(t[0]=t=>e.workflowModel[e.currentElement.uuid].value=t),color:"red-8"},{default:(0,l.w5)((()=>[(0,l._)("div",oe,[(0,l.wy)((0,l.Wm)(d,{label:"Close",color:"red-8",flat:""},null,512),[[p]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var ae=o(60727);const re=(0,l.aZ)({name:"badge",components:{},props:{currentElement:{type:{},default:{}}},data(){return{}},methods:{inputValueChanges(e){this.workflowModel[this.currentElement.uuid].badgeValue=e},updateModelOnLoad(e){const t=(0,ae.zG)();t.workflowModel[e.uuid].badgeValue=e.data}},setup(){const e=(0,ae.zG)(),{workflowModel:t}=(0,R.Jk)(e);return{workflowModel:t}}});var se=o(74260),de=o(64689),ne=o(24554),ie=o(83944),ce=o(35990),ue=o(2165),pe=o(60677),me=o(7518),we=o.n(me);const he=(0,se.Z)(re,[["render",le]]),ge=he;function fe(e,t,o,a,r,s){const d=(0,l.up)("dropdown");return(0,l.wg)(),(0,l.j4)(d,{options:e.usersList,currentElement:e.currentElement,labelToDisplay:"user",optionValue:e.optionValue},null,8,["options","currentElement","optionValue"])}we()(re,"components",{QInput:de.Z,QIcon:ne.Z,QPopupProxy:ie.Z,QTime:ce.Z,QBtn:ue.Z}),we()(re,"directives",{ClosePopup:pe.Z});const ke={class:"row"},ve={class:"col-sm-12 col-md-12 col-lg-12 color-93939A text-capitalize q-pb-sm"},Ce={class:"col-sm-12 col-md-12 col-lg-12"};function ye(e,t,o,r,s,d){const n=(0,l.up)("q-select");return(0,l.wg)(),(0,l.iD)("div",ke,[(0,l._)("div",ve,(0,a.zw)(e.$t(e.labelToDisplay)),1),(0,l._)("div",Ce,[(0,l.Wm)(n,{dense:"",outlined:"","emit-value":"","map-options":"",options:e.options,label:"Please Select",class:"back-white",color:"light-blue",multiple:e.allowMultiSelection,"onUpdate:modelValue":[t[0]||(t[0]=t=>{e.inputValueChanges(t)}),t[1]||(t[1]=t=>e.workflowModel[e.currentElement.uuid].value=t)],modelValue:e.workflowModel[e.currentElement.uuid].value,"option-value":e.optionValue},null,8,["options","multiple","modelValue","option-value"])])])}const _e=(0,l.aZ)({name:"generic-dropdown",components:{},props:{currentElement:{type:Object,default:{id:"",data:null,data_type:"",data_set:[],is_list:!1,display_name:""}},options:{type:Array,default:[]},labelToDisplay:{type:String,default:""},optionValue:{type:String,default:"value"}},data(){return{allowMultiSelection:(0,z.iH)(!1),selectedElement:(0,z.iH)([])}},beforeMount:function(){if(this.currentElement){let e=this.workflowModel[this.currentElement.uuid].value;(!e||e.length<1)&&(this.workflowModel[this.currentElement.uuid].value=[])}},mounted(){this.currentElement&&(this.allowMultiSelection=!!this.currentElement.is_list)},methods:{inputValueChanges(e){if(this.currentElement&&this.options){if(!e||e.length<1)return void(this.workflowModel[this.currentElement.uuid].badgeValue=this.currentElement.display_name);let t=[];this.allowMultiSelection?t=this.options.filter((t=>e.includes(t.value.toString()))):(e=e.toString(),t=this.options.filter((t=>e==t.value)));const o=[];for(const e of t)o.push(e.label);this.workflowModel[this.currentElement.uuid].badgeValue=o.toString()}},updateModelOnLoad(e,t){const o=e.uuid;let l=e.data;const a=(0,ae.zG)();if(!l||l.length<1)return a.workflowModel[o].value=[],void(a.workflowModel[o].badgeValue=e.display_name);let r=[];const s=l.split(",");r=t.filter((e=>s.includes(e.value.toString())));const d=[];for(const n of r)d.push(n.label);a.workflowModel[o].badgeValue=d.toString()}},setup(){const e=(0,ae.zG)(),{workflowModel:t}=(0,R.Jk)(e);return{workflowModel:t}}});var be=o(72448);const We=(0,se.Z)(_e,[["render",ye]]),Me=We;we()(_e,"components",{QSelect:be.Z});const Ee=(0,l.aZ)({name:"user-dropdown",components:{dropdown:Me},props:{currentElement:{type:Object}},data(){return{optionValue:"valueStr"}},methods:{updateModelOnLoad(e){var t;const o=(0,ae.At)();null===(t=Me.methods)||void 0===t||t.updateModelOnLoad(e,o.usersList)}},setup(){const e=(0,ae.At)(),{usersList:t}=(0,R.Jk)(e);return{usersList:t}}}),Te=(0,se.Z)(Ee,[["render",fe]]),xe=Te,De={class:"row"},Oe={class:"col-sm-12 col-md-12 col-lg-12 color-93939A text-capitalize q-pb-sm"},Ve={class:"col-sm-12 col-md-12 col-lg-12"};function Ze(e,t,o,r,s,d){const n=(0,l.up)("q-input");return(0,l.wg)(),(0,l.iD)("div",De,[(0,l._)("div",Oe,(0,a.zw)(e.currentElement.display_name),1),(0,l._)("div",Ve,[(0,l.Wm)(n,{outlined:"",dense:"",color:"light-blue","onUpdate:modelValue":[t[0]||(t[0]=t=>{e.inputValueChanges(t)}),t[1]||(t[1]=t=>e.workflowModel[e.currentElement.uuid].value=t)],modelValue:e.workflowModel[e.currentElement.uuid].value},null,8,["modelValue"])])])}const Se=(0,l.aZ)({name:"generic-input",components:{},props:{currentElement:{type:Object,default:{id:"",data:null,data_type:"",data_set:[],is_list:!1,display_name:""}}},data(){return{allowMultiSelection:(0,z.iH)(!1),selectedElement:(0,z.iH)([])}},methods:{inputValueChanges(e){if(this.currentElement){if(!e)return void(this.workflowModel[this.currentElement.uuid].badgeValue=this.currentElement.display_name);this.workflowModel[this.currentElement.uuid].badgeValue=e}},updateModelOnLoad(e){if(e.data){const t=(0,ae.zG)();t.workflowModel[e.uuid].badgeValue=e.data}}},setup(){const e=(0,ae.zG)(),{workflowModel:t}=(0,R.Jk)(e);return{workflowModel:t}}}),Ie=(0,se.Z)(Se,[["render",Ze]]),Ae=Ie;we()(Se,"components",{QInput:de.Z});var Le=o(41891);function qe(e,t,o,a,r,s){const d=(0,l.up)("dropdown");return(0,l.wg)(),(0,l.j4)(d,{options:e.docStatusList,currentElement:e.currentElement,labelToDisplay:"status"},null,8,["options","currentElement"])}var He=o(53371);const Re=(0,l.aZ)({name:"status-dropdown",components:{dropdown:Me},props:{currentElement:{type:Object}},data(){return{docStatusList:(0,z.iH)([])}},mounted(){this.currentElement&&(this.docStatusList=this.prepareOperatorDropdown(this.currentElement.data_set))},methods:{prepareOperatorDropdown(e){let t=[];this.currentElement&&(e=this.currentElement.data_set);for(const o of e)t.push({value:o,label:He.i18n.t(o)});return t},updateModelOnLoad(e){var t;const o=this.prepareOperatorDropdown(e.data_set);null===(t=Me.methods)||void 0===t||t.updateModelOnLoad(e,o)}},setup(){return{}}}),je=(0,se.Z)(Re,[["render",qe]]),ze=je;function Qe(e,t,o,a,r,s){const d=(0,l.up)("dropdown");return(0,l.wg)(),(0,l.j4)(d,{options:e.doc_type_list,currentElement:e.currentElement,labelToDisplay:"doc_type"},null,8,["options","currentElement"])}const Fe=(0,l.aZ)({name:"status-dropdown",components:{dropdown:Me},props:{currentElement:{type:Object,default:{id:"",data:null,data_type:"",data_set:[],is_list:!1,display_name:""}}},data(){return{}},methods:{updateModelOnLoad(e){var t;const o=(0,ae.At)();null===(t=Me.methods)||void 0===t||t.updateModelOnLoad(e,o.doc_type_list)}},setup(){const e=(0,ae.zG)(),{workflowModel:t}=(0,R.Jk)(e),o=(0,ae.At)(),{doc_type_list:l}=(0,R.Jk)(o);return{workflowModel:t,doc_type_list:l}}}),Je=(0,se.Z)(Fe,[["render",Qe]]),Ne=Je;function Ue(e,t,o,a,r,s){const d=(0,l.up)("dropdown");return(0,l.wg)(),(0,l.j4)(d,{options:e.operatorList,currentElement:e.currentElement,labelToDisplay:"operator"},null,8,["options","currentElement"])}const Ge=(0,l.aZ)({name:"operator-dropdown",components:{dropdown:Me},props:{currentElement:{type:Object}},data(){return{operatorList:[]}},mounted(){this.currentElement&&(this.operatorList=this.prepareOperatorDropdown(this.currentElement.data_set,this.$t))},methods:{prepareOperatorDropdown(e,t){let o=[];this.currentElement&&(e=this.currentElement.data_set);for(const l of e)o.push({value:l,label:He.i18n.t(l)});return o},updateModelOnLoad(e){var t;const o=this.prepareOperatorDropdown(e.data_set,He.i18n.t);null===(t=Me.methods)||void 0===t||t.updateModelOnLoad(e,o)}},setup(){const e=(0,ae.zG)(),{workflowModel:t}=(0,R.Jk)(e);return{workflowModel:t}}}),Pe=(0,se.Z)(Ge,[["render",Ue]]),Be=Pe;function $e(e,t,o,a,r,s){const d=(0,l.up)("dropdown");return(0,l.wg)(),(0,l.j4)(d,{options:e.subOrgList,currentElement:e.currentElement,labelToDisplay:"sub_org"},null,8,["options","currentElement"])}const Ye=(0,l.aZ)({name:"status-dropdown",components:{dropdown:Me},props:{currentElement:{type:Object,default:{id:"",data:null,data_type:"",data_set:[],is_list:!1,display_name:""}}},data(){return{}},methods:{updateModelOnLoad(e){var t;const o=(0,ae.At)();null===(t=Me.methods)||void 0===t||t.updateModelOnLoad(e,o.subOrgList)}},setup(){const e=(0,ae.zG)(),{workflowModel:t}=(0,R.Jk)(e),o=(0,ae.At)(),{subOrgList:l}=(0,R.Jk)(o);return{workflowModel:t,subOrgList:l}}}),Ke=(0,se.Z)(Ye,[["render",$e]]),Xe=Ke,et={time:ge,user:xe,users:xe,operator:Be,status:ze,str:Ae,sub_org_id:Xe,event:Ae,cronjob:Ae,field_value:Ae,field_name:Ae,doc_type:Ne,sub_doc_type:Ae},tt=(0,l.aZ)({name:"badge",mixins:[te.Z],components:{time:ge,user:xe,users:xe,operator:Be,status:ze,str:Ae,sub_org_id:Xe,event:Ae,cronjob:Ae,field_value:Ae,field_name:Ae,doc_type:Ne,sub_doc_type:Ae},props:{isDialog:{type:Boolean,default:!0},variable:{type:String,default:""},item:{type:Object}},data(){return{showItemPanel:(0,z.iH)(!1),currentElementId:(0,z.iH)(""),currentElement:(0,z.iH)({})}},mounted(){this.prepareBadgeValue()},methods:{prepareBadgeValue(){if(this.item){let e=this.variable.split(Le.FH).join("");Array.from(this.item.variables).forEach((t=>{if(t.id==e&&t.data_type)return this.currentElement=t,t.uuid=t.uuid?t.uuid:(0,H.Z)(),this.currentElementId=t.uuid,void this.updateModel(t)}))}},updateModel(e){var t,o;e.data&&this.workflowModel.hasOwnProperty(e.uuid)?et.hasOwnProperty(e.display_name)&&(null===(t=et[e.display_name].methods)||void 0===t?void 0:t.updateModelOnLoad)&&(null===(o=et[e.display_name].methods)||void 0===o||o.updateModelOnLoad(e)):this.workflowModel[e.uuid]={value:"",badgeValue:e.display_name,defaultValue:e.display_name}},getLabel(e){return this.stringReplaceWithString(e,"_"," ")}},setup(){const e=(0,ae.zG)(),{workflowModel:t}=(0,R.Jk)(e);return{workflowModel:t}}});var ot=o(69721),lt=o(20811);const at=(0,se.Z)(tt,[["render",ee],["__scopeId","data-v-d1190dd8"]]),rt=at;we()(tt,"components",{QBadge:ot.Z,QBtn:ue.Z,QMenu:lt.Z,QIcon:ne.Z});var st=o(45401);const dt=(0,l.aZ)({name:"generic-card",emits:["onCardClick","removeCard","replaceCard"],mixins:[j.Z,te.Z,st.Z],components:{Badge:rt},props:{isDialog:{type:Boolean,default:!0},itemIndex:{type:Number,default:null},cardType:{type:String,default:""},parentSvg:{type:String,default:""},color:{type:String,default:""},item:{type:Object,default:{category:"",id:"",text:"",toolTip:""}}},data(){return{showItemPanel:(0,z.iH)(!1),dataArray:(0,z.iH)([])}},mounted(){this.prepareData()},methods:{renderBadge(e){return e.startsWith(Le.FH)},prepareData(){if(this.item&&this.item.text.includes(Le.FH)){let e=this.item.text.split(/(__%)/);for(let t=0;t<e.length;t++){let o="";e[t]&&(e[t]==Le.FH?(o=e[t]+e[t+1]+e[t+2],t+=2):o=e[t],this.dataArray.push(o))}}},prepareData2(){if(this.item&&this.item.text.includes(Le.FH)){let e=this.item.text.split(Le.FH).join(Le.FH+Le.Um);this.dataArray=e.split(Le.FH)}},replaceStringSaparatorWithHtmlBtn(e){let t=e.text;return!e.variables||Object.keys(e.variables).length<1||Array.from(e.variables).forEach((e=>{const o='<span class="q-badge flex inline items-center no-wrap q-badge--single-line q-badge--outline text-orange cursor-pointer" @click="testFnction()"> '+e.data_type+" </span>",l=Le.FH+e.id+Le.FH;t=t.replace(l,o)})),t},onCardClick(e){this.isDialog&&(e.svg=this.parentSvg,e.parentColor=this.color,this.$emit("onCardClick",e))}},setup(){return{}}});var nt=o(5363),it=o(27011),ct=o(83414),ut=o(52035),pt=o(2350),mt=o(65869);const wt=(0,se.Z)(dt,[["render",Y],["__scopeId","data-v-65b7041c"]]),ht=wt;we()(dt,"components",{QIcon:ne.Z,QBtn:ue.Z,QTooltip:nt.Z,QPopupProxy:ie.Z,QList:it.Z,QItem:ct.Z,QItemSection:ut.Z,QItemLabel:pt.Z,QSeparator:mt.Z,QBadge:ot.Z}),we()(dt,"directives",{ClosePopup:pe.Z});var gt=o(72113),ft=o(80579),kt=function(e,t,o,l){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,r){function s(e){try{n(l.next(e))}catch(t){r(t)}}function d(e){try{n(l["throw"](e))}catch(t){r(t)}}function n(e){e.done?o(e.value):a(e.value).then(s,d)}n((l=l.apply(e,t||[])).next())}))};const vt=(0,l.aZ)({name:"workflowDesigner",mixins:[j.Z,te.Z,st.Z],components:{Loader:gt.Z,GenericCard:ht},data(){return{isWorkflowEnable:(0,z.iH)(!0),workflowName:(0,z.iH)(""),workFlowId:(0,z.iH)(""),cardType:(0,z.iH)(""),cards:(0,z.iH)([]),category:(0,z.iH)([]),showItemPanel:(0,z.iH)(!1),indexToRemove:(0,z.iH)(null),isWorkflowChanged:(0,z.iH)(!1),criteriaValue:(0,z.iH)("after"),showAddCriteriaBox:(0,z.iH)(!1),isConditionContent:(0,z.iH)(!0)}},mounted(){return kt(this,void 0,void 0,(function*(){this.showLoading(),this.indexToRemove=null,this.workFlowId=this.$route.params.id,yield this.getWorkflowWhenCards(),yield this.getWorkflowAndCards(),yield this.getWorkflowThenCards(),yield this.initChildDropdowns(),this.workFlowId&&(yield this.loadWorkflow()),this.hideLoading()}))},methods:{initChildDropdowns(){return kt(this,void 0,void 0,(function*(){yield this.prepareUsersDropdown(),yield this.getSubOrgsList(),this.prepareDocTypeAndSubTypesList()}))},setCardType(e){this.cards=[],this.cardType=e,e==Le.tl.when?this.category=this.workflowWhenCards:e==Le.tl.and?this.category=this.workflowAndCards:e==Le.tl.then&&(this.category=this.workflowThenCards),this.showItemPanel=!0},setSubCategory(e){e&&(this.cards=e)},onCardClick(e){const t=JSON.parse(JSON.stringify(e));for(let o of t.variables)o.uuid=(0,H.Z)(),this.initWorkFlowMode(o,!0);this.cardType==Le.tl.when?this.selectedWhenCards=t:this.cardType==Le.tl.and?this.indexToRemove||0==this.indexToRemove?(this.selectedAndCards.splice(this.indexToRemove,1),this.selectedAndCards.splice(this.indexToRemove,0,t)):this.selectedAndCards.push(t):this.cardType==Le.tl.then&&(this.indexToRemove||0==this.indexToRemove?(this.selectedThenCards.splice(this.indexToRemove,1),this.selectedThenCards.splice(this.indexToRemove,0,t)):this.selectedThenCards.push(t)),this.indexToRemove=null,this.showItemPanel=!1},removeCard(e,t){this.cardType=t,this.cardType==Le.tl.when?this.selectedWhenCards={}:this.cardType==Le.tl.and?this.selectedAndCards.splice(e,1):this.cardType==Le.tl.then&&this.selectedThenCards.splice(e,1)},replaceCard(e,t){this.indexToRemove=e,this.setCardType(t)},validateSaveJson(){return this.workflowName?this.selectedWhenCards&&Object.keys(this.selectedWhenCards).length<1?(this.showErrorToast("When Can not be empty"),!1):!(this.selectedThenCards&&this.selectedThenCards.length<1)||(this.showErrorToast("Then Can not be empty"),!1):(this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY")),!1)},saveWorkflow(){return kt(this,void 0,void 0,(function*(){if(!this.validateSaveJson())return;this.showLoading();let e=!1;this.isWorkflowChanged&&(e=yield this.createWorkflow(),null==e||void 0==e)||(yield this.saveWorkflowJson(),this.hideLoading(),e&&this.$router.push("/workflow_designer/"+this.workFlowId))}))},createWorkflow(){return kt(this,void 0,void 0,(function*(){let e,t=null;try{let o={};o.name=this.workflowName,this.workFlowId?(o.id=this.workFlowId,e=yield ft.fo.updateWorkflow(o),t=!1):(e=yield ft.fo.createWorkflow(o),e&&e.id&&(this.workFlowId=e.id,t=!0))}catch(o){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),t=null}return t}))},saveWorkflowJson(){return kt(this,void 0,void 0,(function*(){let e;try{let t=this.prepareWokrFlowJsonToSave();e=yield ft.fo.saveWorkflowJson(t),e.success&&this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},prepareWokrFlowJsonToSave(){let e=JSON.parse(JSON.stringify(this.selectedWhenCards)),t=JSON.parse(JSON.stringify(this.selectedAndCards)),o=JSON.parse(JSON.stringify(this.selectedThenCards));delete e.parentColor;for(let a of e.variables)a.data=this.prepareVariableData(a),delete a.uuid;for(let a of t){delete a.parentColor;for(let e of a.variables)e.data=this.prepareVariableData(e),delete e.uuid}for(let a of o){delete a.parentColor;for(let e of a.variables)e.data=this.prepareVariableData(e),delete e.uuid}const l={workflow_id:this.workFlowId,data:{when_condition:e,and_conditions:t,then_conditions:o}};return l},prepareVariableData(e){let t=this.workflowModel[e.uuid].value,o="";return o=e.is_list&&t?this.workflowModel[e.uuid].value.join(","):t?t.toString():"",o},inputValueChanges(){this.isWorkflowChanged=!0},loadWorkflow(){return kt(this,void 0,void 0,(function*(){let e;try{e=yield ft.fo.loadworkflowJson(this.workFlowId),e.success&&this.prepareWokrFlowJsonToDisplay(e)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},prepareWokrFlowJsonToDisplay(e){this.workflowName=e.name,this.isWorkflowEnable=e.enabled,this.selectedWhenCards=e.data&&e.data.when_condition?e.data.when_condition:{},this.selectedAndCards=e.data&&e.data.and_conditions?e.data.and_conditions:[],this.selectedThenCards=e.data&&e.data.then_conditions?e.data.then_conditions:[];let t=new Map;for(let o of this.workflowWhenCards)t.set(o.category,o.svg_background_color);for(let o of this.workflowAndCards)t.set(o.category,o.svg_background_color);for(let o of this.workflowThenCards)t.set(o.category,o.svg_background_color);if(this.selectedWhenCards&&Object.keys(this.selectedWhenCards).length>0){this.selectedWhenCards.parentColor=t.get(this.selectedWhenCards.category);for(let e of this.selectedWhenCards.variables)e.uuid=(0,H.Z)(),this.initWorkFlowMode(e,!1)}for(let o of this.selectedAndCards){o.parentColor=t.get(o.category);for(let e of o.variables)e.uuid=(0,H.Z)(),this.initWorkFlowMode(e,!1)}for(let o of this.selectedThenCards){o.parentColor=t.get(o.category);for(let e of o.variables)e.uuid=(0,H.Z)(),this.initWorkFlowMode(e,!1)}},initWorkFlowMode(e,t){this.workflowModel[e.uuid]={value:"",badgeValue:e.display_name,defaultValue:e.display_name},t?e.data_type==Le.tl.operator&&e.data&&(this.workflowModel[e.uuid].value=e.data):e.is_list?this.workflowModel[e.uuid].value=e.data.split(","):this.workflowModel[e.uuid].value=e.data}},setup(){const e=(0,ae.zG)();e.$reset();const{getWorkflowWhenCards:t,getWorkflowAndCards:o,getWorkflowThenCards:l}=e,{workflowModel:a,workflowWhenCards:r,workflowAndCards:s,workflowThenCards:d,selectedAndCards:n,selectedWhenCards:i,selectedThenCards:c}=(0,R.Jk)(e),u=(0,ae.At)(),{prepareUsersDropdown:p,getSubOrgsList:m,prepareDocTypeAndSubTypesList:w}=u;return{workflowModel:a,workflowAndCards:s,workflowWhenCards:r,workflowThenCards:d,selectedAndCards:n,selectedWhenCards:i,selectedThenCards:c,getWorkflowAndCards:o,getWorkflowWhenCards:t,getWorkflowThenCards:l,prepareUsersDropdown:p,getSubOrgsList:m,prepareDocTypeAndSubTypesList:w}}});var Ct=o(46778),yt=o(10151),_t=o(39570),bt=o(13747),Wt=o(25589);const Mt=(0,se.Z)(vt,[["render",q],["__scopeId","data-v-e84d49a8"]]),Et=Mt;we()(vt,"components",{QBtn:ue.Z,QIcon:ne.Z,QInput:de.Z,QDialog:Ct.Z,QCard:yt.Z,QToolbar:_t.Z,QToolbarTitle:bt.Z,QCardSection:Wt.Z}),we()(vt,"directives",{ClosePopup:pe.Z})}}]);