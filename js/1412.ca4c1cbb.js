"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[1412],{1412:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Ae});var o=t(61758),n=t(58790);const l={class:"masterdata-create-container white-inputs"},s={class:"text-center column items-center"},i={class:"masterdata-tab-subheader"},d={class:"row justify-center q-gutter-md q-mt-md"},r={class:"row"},u={class:"q-mt-md row"},m={class:"masterdata-tab-subheader"},_={class:"row q-mt-sm"},p={style:{"text-align":"left"}},c=(0,o.Lk)("th",{style:{width:"5%"}},null,-1),h={style:{width:"4%"}},b=(0,o.Lk)("span",{class:"masterdata-tab-subheader"},"Headers",-1),f={class:"row q-mt-sm"},y={style:{"text-align":"left"}},k=(0,o.Lk)("th",{style:{width:"5%"}},null,-1),g={style:{width:"4%"}},v={class:"masterdata-tab-subheader"},F={class:"q-mt-sm row"},V={class:"masterdata-auth-select q-gutter-md"},w=(0,o.Lk)("span",{class:"masterdata-tab-subheader"},"Body",-1),q={class:"row q-mt-sm"},L={style:{"text-align":"left"}},$=(0,o.Lk)("th",{style:{width:"5%"}},null,-1),T={style:{width:"4%"}},C={class:"row justify-between"},A=(0,o.Lk)("span",{class:"masterdata-tab-subheader"},"Body",-1),x={class:"row q-mt-sm"},E={key:0},j={class:"masterdata-tab-subheader"},U={key:1},S={key:0},Q={class:"masterdata-tab-subheader"},D={style:{"text-align":"left"}},P=(0,o.Lk)("th",{style:{width:"5%"}},null,-1),K={style:{width:"4%"}},X={key:1};function O(e,a,t,O,R,I){const J=(0,o.g2)("BackToMasterData"),B=(0,o.g2)("q-btn"),M=(0,o.g2)("q-card-section"),N=(0,o.g2)("q-card"),W=(0,o.g2)("q-step"),H=(0,o.g2)("q-input"),G=(0,o.g2)("q-checkbox"),z=(0,o.g2)("q-select"),Y=(0,o.g2)("q-tab"),Z=(0,o.g2)("q-tabs"),ee=(0,o.g2)("q-separator"),ae=(0,o.g2)("f-btn"),te=(0,o.g2)("q-icon"),oe=(0,o.g2)("q-markup-table"),ne=(0,o.g2)("q-tab-panel"),le=(0,o.g2)("q-file"),se=(0,o.g2)("q-tab-panels"),ie=(0,o.g2)("dynamicApiValueTable"),de=(0,o.g2)("xmlTablePath"),re=(0,o.g2)("q-spinner-hourglass"),ue=(0,o.g2)("subOrgSelect"),me=(0,o.g2)("xmlTableCreation"),_e=(0,o.g2)("q-stepper-navigation"),pe=(0,o.g2)("q-stepper");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(J),(0,o.Lk)("div",l,[(0,o.bF)(pe,{modelValue:e.creation_step,"onUpdate:modelValue":a[33]||(a[33]=a=>e.creation_step=a),ref:"stepper",color:"primary",class:"page-background masterdata-create-stepper",flat:"",animated:""},{navigation:(0,o.k6)((()=>[(0,o.bF)(_e,{class:"float-right"},{default:(0,o.k6)((()=>[e.creation_step>0?((0,o.uX)(),(0,o.Wv)(ae,{key:0,appearance:"cancel",onClick:a[31]||(a[31]=a=>e.$refs.stepper.previous()),label:e.$t("directscan.back"),class:"q-mr-sm"},null,8,["label"])):(0,o.Q3)("",!0),(0,o.bF)(ae,{onClick:a[32]||(a[32]=a=>e.continueStepper(this.master_data_preset)),loading:e.loading,loadinglabel:e.$t("pages.custom_master_data.loading"),label:4===e.creation_step?e.$t("pages.screen2a.done"):e.$t("pages.custom_master_data.continue")},{loading:(0,o.k6)((()=>[(0,o.bF)(re)])),_:1},8,["loading","loadinglabel","label"])])),_:1})])),default:(0,o.k6)((()=>["create"==e.mode?((0,o.uX)(),(0,o.Wv)(W,{key:0,name:0,title:e.$t("pages.custom_master_data.select_preset"),icon:"manage_search",done:e.creation_step>0},{default:(0,o.k6)((()=>[(0,o.Lk)("div",s,[(0,o.Lk)("span",i,(0,n.v_)(e.$t("pages.custom_master_data.new_custom_master_data")),1),(0,o.Lk)("div",d,[(0,o.bF)(N,{flat:"",bordered:"",class:"page-background q-mt-md",style:{"min-width":"185px"}},{default:(0,o.k6)((()=>[(0,o.bF)(M,{class:"column"},{default:(0,o.k6)((()=>[(0,o.bF)(B,{label:e.$t("pages.custom_master_data.blank"),class:"preset-button",flat:"",onClick:a[0]||(a[0]=a=>e.selectPreset("reset"))},null,8,["label"]),(0,o.bF)(B,{label:"ION API",class:"preset-button",flat:"",onClick:a[1]||(a[1]=a=>e.selectPreset("ion_api_blank"))}),(0,o.bF)(B,{label:"OAuth2",class:"preset-button",flat:"",onClick:a[2]||(a[2]=a=>e.selectPreset("oauth2"))}),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.custom_templates,(a=>((0,o.uX)(),(0,o.Wv)(B,{key:a.id,label:a.data_key.replaceAll("_"," "),class:"preset-button",flat:"",onClick:t=>e.selectPreset(a)},null,8,["label","onClick"])))),128))])),_:1})])),_:1})])])])),_:1},8,["title","done"])):(0,o.Q3)("",!0),(0,o.bF)(W,{name:1,title:e.$t("pages.custom_master_data.configure_api_endpoint"),icon:"webhook",done:e.creation_step>1},{default:(0,o.k6)((()=>[(0,o.Lk)("div",null,[(0,o.bF)(N,{flat:"",bordered:"",class:"page-background q-mb-md"},{default:(0,o.k6)((()=>[(0,o.bF)(M,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",r,[(0,o.bF)(H,{modelValue:e.endpoint_information["data_type"],"onUpdate:modelValue":a[3]||(a[3]=a=>e.endpoint_information["data_type"]=a),outlined:"",rules:[a=>!a.includes(" ")||e.$t("pages.custom_master_data.no_spaces_error")],class:"masterdata-datatype-input",label:e.$t("pages.custom_master_data.endpoint_name"),dense:""},null,8,["modelValue","rules","label"]),(0,o.bF)(G,{modelValue:e.endpoint_information["dynamic_api"],"onUpdate:modelValue":a[4]||(a[4]=a=>e.endpoint_information["dynamic_api"]=a),label:e.$t("pages.custom_master_data.dynamic_api"),class:"masterdata-dynamicapi-input"},null,8,["modelValue","label"]),(0,o.bF)(z,{modelValue:e.endpoint_information["body_type"],"onUpdate:modelValue":a[5]||(a[5]=a=>e.endpoint_information["body_type"]=a),options:e.body_type_options,outlined:"",class:"masterdata-bodytype-select",label:e.$t("pages.custom_master_data.application_type"),dense:""},null,8,["modelValue","options","label"])]),(0,o.Lk)("div",u,[(0,o.bF)(z,{modelValue:e.endpoint_information["method"],"onUpdate:modelValue":a[6]||(a[6]=a=>e.endpoint_information["method"]=a),options:e.method_options,outlined:"",class:"masterdata-method-select",label:e.$t("doc_type_classification_method"),dense:""},null,8,["modelValue","options","label"]),(0,o.bF)(H,{modelValue:e.endpoint_information["url"],"onUpdate:modelValue":a[7]||(a[7]=a=>e.endpoint_information["url"]=a),outlined:"",class:(0,n.C4)("ionapi"==e.endpoint_information["auth_type"]["value"]?"masterdata-url-from-json":"masterdata-url-input"),label:"Base URL",dense:"",readonly:"ionapi"==e.endpoint_information["auth_type"]["value"]},null,8,["modelValue","class","readonly"]),"ionapi"==e.endpoint_information["auth_type"]["value"]?((0,o.uX)(),(0,o.Wv)(H,{key:0,modelValue:e.endpoint_information["url_user_input"],"onUpdate:modelValue":[a[8]||(a[8]=a=>e.endpoint_information["url_user_input"]=a),a[9]||(a[9]=a=>e.updateDynamicUrl())],outlined:"",class:"masterdata-url-input-user-input",label:"URL",dense:""},null,8,["modelValue"])):(0,o.Q3)("",!0)])])),_:1}),(0,o.bF)(M,null,{default:(0,o.k6)((()=>[(0,o.bF)(Z,{modelValue:e.api_tabs,"onUpdate:modelValue":a[10]||(a[10]=a=>e.api_tabs=a),dense:"",class:"masterdata-api-tabs","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,o.k6)((()=>[(0,o.bF)(Y,{name:"params",label:"Params"}),(0,o.bF)(Y,{disable:e.master_data_preset?.includes("ion_api"),name:"headers",label:"Headers"},null,8,["disable"]),(0,o.bF)(Y,{name:"auth",label:"Authorization"}),(0,o.bF)(Y,{disable:e.master_data_preset?.includes("ion_api"),name:"body",label:"Body"},null,8,["disable"])])),_:1},8,["modelValue"])])),_:1}),(0,o.bF)(ee),(0,o.bF)(se,{modelValue:e.api_tabs,"onUpdate:modelValue":a[22]||(a[22]=a=>e.api_tabs=a),animated:""},{default:(0,o.k6)((()=>[(0,o.bF)(ne,{name:"params"},{default:(0,o.k6)((()=>[(0,o.Lk)("span",m,(0,n.v_)(e.$t("pages.custom_master_data.query_parameter")),1),(0,o.Lk)("div",_,[(0,o.bF)(H,{modelValue:e.endpoint_information["query_param_key"],"onUpdate:modelValue":a[11]||(a[11]=a=>e.endpoint_information["query_param_key"]=a),outlined:"",dense:"",label:"Key",class:"masterdata-query-param-key"},null,8,["modelValue"]),(0,o.bF)(H,{modelValue:e.endpoint_information["query_param_value"],"onUpdate:modelValue":a[12]||(a[12]=a=>e.endpoint_information["query_param_value"]=a),outlined:"",dense:"",label:e.$t("value"),class:"masterdata-query-param-value"},null,8,["modelValue","label"]),(0,o.bF)(ae,{label:e.$t("doc2light.pages.add"),class:"float-right q-ml-auto",onClick:e.addParamToTable},null,8,["label","onClick"])]),(0,o.bF)(oe,{class:"sticky-column-for-table q-table-seperator white-back q-mt-sm",style:{"max-height":"25vh","overflow-y":"auto"},flat:"",bordered:"",dense:""},{default:(0,o.k6)((()=>[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",p,[(0,o.Lk)("th",null,(0,n.v_)(e.$t("Key")),1),(0,o.Lk)("th",null,(0,n.v_)(e.$t("value")),1),c])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.create_parameters,((a,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:a},[(0,o.Lk)("td",null,(0,n.v_)(a["key"]),1),(0,o.Lk)("td",null,(0,n.v_)(a["value"]),1),(0,o.Lk)("td",h,[(0,o.bF)(B,{round:"",dense:"",flat:"",color:"red",onClick:a=>e.removeParamFromTable(t)},{default:(0,o.k6)((()=>[(0,o.bF)(te,{name:"delete"})])),_:2},1032,["onClick"])])])))),128))])])),_:1})])),_:1}),(0,o.bF)(ne,{name:"headers"},{default:(0,o.k6)((()=>[b,(0,o.Lk)("div",f,[(0,o.bF)(H,{modelValue:e.endpoint_information["query_header_key"],"onUpdate:modelValue":a[13]||(a[13]=a=>e.endpoint_information["query_header_key"]=a),outlined:"",dense:"",label:"Key",class:"masterdata-query-param-key"},null,8,["modelValue"]),(0,o.bF)(H,{modelValue:e.endpoint_information["query_header_value"],"onUpdate:modelValue":a[14]||(a[14]=a=>e.endpoint_information["query_header_value"]=a),outlined:"",dense:"",label:e.$t("value"),class:"masterdata-query-param-value"},null,8,["modelValue","label"]),(0,o.bF)(ae,{label:e.$t("doc2light.pages.add"),class:"float-right q-ml-auto",onClick:e.addHeaderToTable},null,8,["label","onClick"])]),(0,o.bF)(oe,{class:"sticky-column-for-table q-table-seperator white-back q-mt-sm",style:{"max-height":"25vh","overflow-y":"auto"},flat:"",bordered:"",dense:""},{default:(0,o.k6)((()=>[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",y,[(0,o.Lk)("th",null,(0,n.v_)(e.$t("Key")),1),(0,o.Lk)("th",null,(0,n.v_)(e.$t("value")),1),k])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.create_headers,((a,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:a},[(0,o.Lk)("td",null,(0,n.v_)(a["key"]),1),(0,o.Lk)("td",null,(0,n.v_)(a["value"]),1),(0,o.Lk)("td",g,[(0,o.bF)(B,{round:"",dense:"",flat:"",color:"red",onClick:a=>e.removeHeaderFromTable(t)},{default:(0,o.k6)((()=>[(0,o.bF)(te,{name:"delete"})])),_:2},1032,["onClick"])])])))),128))])])),_:1})])),_:1}),(0,o.bF)(ne,{name:"auth"},{default:(0,o.k6)((()=>[(0,o.Lk)("span",v,(0,n.v_)(e.$t("pages.custom_master_data.authorization")),1),(0,o.Lk)("div",F,[(0,o.Lk)("div",V,[(0,o.bF)(z,{modelValue:e.endpoint_information["auth_type"],"onUpdate:modelValue":a[15]||(a[15]=a=>e.endpoint_information["auth_type"]=a),options:e.auth_options,outlined:"",label:e.$t("pages.custom_master_data.authentication_type"),dense:""},null,8,["modelValue","options","label"]),(0,o.bF)(le,{outlined:"",onRejected:e.onRejected,filter:e.checkFileType,modelValue:e.auth_json_file,"onUpdate:modelValue":[a[16]||(a[16]=a=>e.auth_json_file=a),e.handleUploadJson],label:e.$t("pages.custom_master_data.upload_auth_json"),dense:"",disable:"none"==e.endpoint_information["auth_type"]["value"]},{append:(0,o.k6)((()=>[(0,o.bF)(te,{name:"attach_file"})])),_:1},8,["onRejected","filter","modelValue","onUpdate:modelValue","label","disable"])]),(0,o.bF)(H,{modelValue:e.endpoint_information["auth_json"],"onUpdate:modelValue":a[17]||(a[17]=a=>e.endpoint_information["auth_json"]=a),borderless:"",class:"masterdata-auth-json text-field-input",autogrow:"",disable:"none"==e.endpoint_information["auth_type"]["value"]},null,8,["modelValue","disable"])])])),_:1}),"multipart/form-data"==e.endpoint_information["body_type"].value?((0,o.uX)(),(0,o.Wv)(ne,{key:0,name:"body"},{default:(0,o.k6)((()=>[w,(0,o.Lk)("div",q,[(0,o.bF)(H,{modelValue:e.endpoint_information["query_body_key"],"onUpdate:modelValue":a[18]||(a[18]=a=>e.endpoint_information["query_body_key"]=a),outlined:"",dense:"",label:"Key",class:"masterdata-query-param-key"},null,8,["modelValue"]),(0,o.bF)(H,{modelValue:e.endpoint_information["query_body_value"],"onUpdate:modelValue":a[19]||(a[19]=a=>e.endpoint_information["query_body_value"]=a),outlined:"",dense:"",label:e.$t("value"),class:"masterdata-query-param-value"},null,8,["modelValue","label"]),(0,o.bF)(ae,{label:e.$t("doc2light.pages.add"),class:"float-right q-ml-auto",onClick:e.addBodyToTable},null,8,["label","onClick"])]),(0,o.bF)(oe,{class:"sticky-column-for-table q-table-seperator white-back q-mt-sm",style:{"max-height":"25vh","overflow-y":"auto"},flat:"",bordered:"",dense:""},{default:(0,o.k6)((()=>[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",L,[(0,o.Lk)("th",null,(0,n.v_)(e.$t("Key")),1),(0,o.Lk)("th",null,(0,n.v_)(e.$t("value")),1),$])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.create_body,((a,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:a},[(0,o.Lk)("td",null,(0,n.v_)(a["key"]),1),(0,o.Lk)("td",null,(0,n.v_)(a["value"]),1),(0,o.Lk)("td",T,[(0,o.bF)(B,{round:"",dense:"",flat:"",color:"red",onClick:a=>e.removeBodyFromTable(t)},{default:(0,o.k6)((()=>[(0,o.bF)(te,{name:"delete"})])),_:2},1032,["onClick"])])])))),128))])])),_:1})])),_:1})):((0,o.uX)(),(0,o.Wv)(ne,{key:1,name:"body"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",C,[A,(0,o.bF)(ae,{appearance:"tertiary",class:"q-ml-md",label:"Beautify",onClick:a[20]||(a[20]=a=>e.beautifyJson())})]),(0,o.Lk)("div",x,[(0,o.bF)(H,{class:"full-width",modelValue:e.endpoint_information["body_string"],"onUpdate:modelValue":a[21]||(a[21]=a=>e.endpoint_information["body_string"]=a),outlined:"",autogrow:""},null,8,["modelValue"])])])),_:1}))])),_:1},8,["modelValue"])])),_:1}),e.endpoint_information["dynamic_api"]?((0,o.uX)(),(0,o.Wv)(ie,{key:0})):(0,o.Q3)("",!0)])])),_:1},8,["title","done"]),(0,o.bF)(W,{name:3,title:e.$t("pages.custom_master_data.select_table_data_path"),icon:"table_rows",done:e.creation_step>3},{default:(0,o.k6)((()=>["json"==e.data_mode?((0,o.uX)(),(0,o.CE)("div",E,[(0,o.Lk)("span",j,(0,n.v_)(e.$t("pages.custom_master_data.where_is_data_located")),1),(0,o.bF)(N,{flat:"",bordered:"",class:"page-background q-mt-md"},{default:(0,o.k6)((()=>[(0,o.bF)(M,null,{default:(0,o.k6)((()=>[(0,o.bF)(H,{modelValue:e.endpoint_information["json_path"],"onUpdate:modelValue":[a[23]||(a[23]=a=>e.endpoint_information["json_path"]=a),a[24]||(a[24]=a=>e.formatJsonPath("record"))],outlined:"",prefix:"$.",class:"masterdata-json-path-input",label:e.$t("pages.custom_master_data.json_path"),hint:e.$t("pages.custom_master_data.json_path_hint"),dense:""},null,8,["modelValue","label","hint"])])),_:1}),(0,o.bF)(M,{class:"row"},{default:(0,o.k6)((()=>[(0,o.bF)(H,{modelValue:e.response_textarea,"onUpdate:modelValue":a[25]||(a[25]=a=>e.response_textarea=a),borderless:"",class:"masterdata-create-table-original text-field-input",autogrow:"",readonly:""},null,8,["modelValue"]),(0,o.bF)(H,{modelValue:e.formatted_response_textarea,"onUpdate:modelValue":a[26]||(a[26]=a=>e.formatted_response_textarea=a),borderless:"",class:"masterdata-create-table-validated text-field-input",autogrow:"",readonly:""},null,8,["modelValue"])])),_:1})])),_:1})])):"xml"==e.data_mode?((0,o.uX)(),(0,o.CE)("div",U,[(0,o.bF)(de)])):(0,o.Q3)("",!0)])),_:1},8,["title","done"]),(0,o.bF)(W,{name:4,title:e.$t("pages.custom_master_data.create_table_with_response"),icon:"add_circle_outline",done:e.creation_step>4},{default:(0,o.k6)((()=>["json"==e.data_mode?((0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("span",Q,(0,n.v_)(e.$t("pages.custom_master_data.select_table_columns")),1),(0,o.bF)(N,{flat:"",bordered:"",class:"page-background q-mt-md"},{default:(0,o.k6)((()=>[(0,o.bF)(M,{class:"row"},{default:(0,o.k6)((()=>[(0,o.bF)(H,{modelValue:e.endpoint_information["column_name"],"onUpdate:modelValue":a[27]||(a[27]=a=>e.endpoint_information["column_name"]=a),outlined:"",class:"masterdata-column-input",hint:e.$t("pages.custom_master_data.table_values_extracted"),label:e.$t("pages.custom_master_data.column_name"),dense:""},null,8,["modelValue","hint","label"]),(0,o.bF)(H,{modelValue:e.endpoint_information["column_value_name"],"onUpdate:modelValue":a[28]||(a[28]=a=>e.endpoint_information["column_value_name"]=a),outlined:"",class:"masterdata-column-input",hint:e.$t("pages.custom_master_data.seperate_values_with_commas"),label:e.$t("pages.custom_master_data.column_value_name"),dense:""},null,8,["modelValue","hint","label"]),(0,o.bF)(ae,{label:e.$t("doc2light.pages.add"),style:{height:"40px"},onClick:e.addColumnToTable,loading:e.loading,loadinglabel:e.$t("pages.custom_master_data.loading")},null,8,["label","onClick","loading","loadinglabel"]),(0,o.bF)(ae,{label:e.$t("pages.custom_master_data.test_extraction"),style:{height:"40px"},onClick:e.testExtraction,appearance:"tertiary",class:"q-ml-sm",loading:e.loading,loadinglabel:e.$t("pages.custom_master_data.loading")},{loading:(0,o.k6)((()=>[(0,o.bF)(re)])),_:1},8,["label","onClick","loading","loadinglabel"]),(0,o.bF)(ue,{class:"q-ml-sm min-width-140"})])),_:1}),(0,o.bF)(M,{class:"row"},{default:(0,o.k6)((()=>[(0,o.bF)(H,{modelValue:e.formatted_response_textarea,"onUpdate:modelValue":a[29]||(a[29]=a=>e.formatted_response_textarea=a),borderless:"",class:"masterdata-create-table-original half-text-field-input",autogrow:"",readonly:""},null,8,["modelValue"]),(0,o.bF)(oe,{class:"sticky-column-for-table q-table-seperator white-back",style:{"max-height":"25vh","overflow-y":"auto",width:"50%"},flat:"",bordered:"",dense:""},{default:(0,o.k6)((()=>[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",D,[(0,o.Lk)("th",null,(0,n.v_)(e.$t("Key")),1),(0,o.Lk)("th",null,(0,n.v_)(e.$t("value")),1),P])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.column_paths,((a,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:a},[(0,o.Lk)("td",null,(0,n.v_)(a["key"]),1),(0,o.Lk)("td",null,(0,n.v_)(a["value"]),1),(0,o.Lk)("td",K,[(0,o.bF)(B,{round:"",dense:"",flat:"",color:"red",onClick:a=>e.removeColumnFromTable(t)},{default:(0,o.k6)((()=>[(0,o.bF)(te,{name:"delete"})])),_:2},1032,["onClick"])])])))),128))])])),_:1}),(0,o.bF)(H,{modelValue:this.endpoint_information["validated_response_textarea"],"onUpdate:modelValue":a[30]||(a[30]=e=>this.endpoint_information["validated_response_textarea"]=e),borderless:"",class:"masterdata-create-table-original q-mt-md half-text-field-input",autogrow:"",readonly:""},null,8,["modelValue"])])),_:1})])),_:1})])):"xml"==e.data_mode?((0,o.uX)(),(0,o.CE)("div",X,[(0,o.bF)(me)])):(0,o.Q3)("",!0)])),_:1},8,["title","done"])])),_:1},8,["modelValue"])])],64)}t(10239);var R=t(38734),I=t(64775),J=t(83319),B=t(59473),M=t(58188),N=t(20394),W=t(36207);const H={class:"masterdata-tab-subheader"};function G(e,a,t,l,s,i){const d=(0,o.g2)("q-btn"),r=(0,o.g2)("q-th"),u=(0,o.g2)("q-input"),m=(0,o.g2)("q-td"),_=(0,o.g2)("q-table");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("span",H,(0,n.v_)(e.$t("pages.custom_master_data.dynamic_url_values")),1),(0,o.bF)(_,{class:"dashboard-table-style q-mt-sm",bordered:"",rows:e.dynamicApiSampleValues,columns:e.tableColumns,flat:"","no-data-label":e.$t("pages.messages.no_record_found"),"hide-bottom":""},{"header-cell-actions":(0,o.k6)((()=>[(0,o.bF)(r,{class:"text-center",style:{width:"50px"}},{default:(0,o.k6)((()=>[(0,o.bF)(d,{onClick:e.addNewRow,color:"primary",icon:"add",round:"",flat:"",dense:""},null,8,["onClick"])])),_:1})])),"body-cell":(0,o.k6)((e=>[(0,o.bF)(m,{props:e},{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:e.row[e.col.field],"onUpdate:modelValue":a=>e.row[e.col.field]=a,dense:"",borderless:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),"body-cell-actions":(0,o.k6)((a=>[(0,o.bF)(m,{class:"text-center",props:a},{default:(0,o.k6)((()=>[(0,o.bF)(d,{onClick:t=>e.deleteRow(a.row),color:"red-14",icon:"delete",round:"",flat:"",dense:""},null,8,["onClick"])])),_:2},1032,["props"])])),default:(0,o.k6)((()=>[(0,o.eW)(" >")])),_:1},8,["rows","columns","no-data-label"])],64)}var z=t(1659),Y=t(23537);const Z=(0,o.pM)({name:"dynamicApiValueTable",mounted(){this.dynamicApiSampleValues=this.getDynamicKeysByUrl()},setup(){const e=(0,J.rD)(),{endpoint_information:a,dynamicApiSampleValues:t}=(0,z.bP)(e),{getDynamicKeysByUrl:o}=e,{t:n}=(0,Y.s9)(),l=(0,R.KR)([{name:"field_name",label:n("field_name"),align:"left",field:"key"},{name:"sample_value",label:n("value"),align:"left",field:"value"},{name:"actions",label:n("actions"),align:"center",field:"action"}]);return{tableColumns:l,endpoint_information:a,getDynamicKeysByUrl:o,dynamicApiSampleValues:t}},methods:{deleteRow(e){const a=this.dynamicApiSampleValues.indexOf(e);this.dynamicApiSampleValues.splice(a,1)},addNewRow(){this.dynamicApiSampleValues.push({key:"",value:""})}}});var ee=t(12807),ae=t(42315),te=t(57722),oe=t(56384),ne=t(45262),le=t(67837),se=t(98582),ie=t.n(se);const de=(0,ee.A)(Z,[["render",G]]),re=de;ie()(Z,"components",{QTable:ae.A,QTh:te.A,QBtn:oe.A,QTd:ne.A,QInput:le.A});var ue=t(18505),me=(t(92162),t(24622));const _e=(0,o.pM)({name:"MasterDataLookup",components:{BackToMasterData:B.A,xmlTablePath:M.A,subOrgSelect:W.A,xmlTableCreation:N.A,dynamicApiValueTable:re},mixins:[ue.A,me.A],methods:{onRejected(){this.showErrorToast(this.$t("pages.custom_master_data.only_json_files_allowed"))},checkFileType(e){return e.filter((e=>e.name.endsWith(".ionapi")||e.name.endsWith(".json")))},handleUploadJson(){if(this.auth_json_file){const e=new FileReader;e.onload=e=>{const a=JSON.parse(e.target.result);this.endpoint_information["auth_json"]=e.target.result,"ionapi"==this.endpoint_information["auth_type"]["value"]&&(this.endpoint_information["url"]=a["iu"]+"/"+a["ti"])},e.readAsText(this.auth_json_file)}else if(this.endpoint_information["auth_json"]){const e=JSON.parse(this.endpoint_information["auth_json"]);this.endpoint_information["url"]=e["iu"]+"/"+e["ti"]}},checkInputs(){return!!this.endpoint_information["url"]&&(!!this.endpoint_information["data_type"]&&!this.endpoint_information["data_type"].includes(" "))},selectPreset(e){e.id||this.continueStepper(e),this.endpoint_information["method"]={label:e.method,value:e.method},"ionapi"==e.authentication_type&&(this.endpoint_information["auth_type"]={label:"ION API",value:"ionapi"},this.endpoint_information["url_user_input"]=e.url),"oauth2"==e.authentication_type&&(this.endpoint_information["auth_type"]={label:"OAuth2",value:"oauth2"},this.endpoint_information["url"]=e.url),"none"==e.authentication_type&&(this.endpoint_information["auth_type"]={label:"None",value:"none"},this.endpoint_information["url"]=e.url),e.authentication_json&&(this.endpoint_information["auth_json"]=e.authentication_json),e.is_dynamic&&(this.endpoint_information["dynamic_api"]=!0),this.endpoint_information["data_type"]=e.data_key,e.sub_org_id&&(this.endpoint_information["sub_org_id"]=e.sub_org_id);let a=e.data_base_path.replaceAll("$["," ");a=a.replaceAll("][","."),a=a.replaceAll("]",""),a=a.trim(),this.column_paths=[],this.endpoint_information["json_path"]=a,e.column_paths=JSON.parse(e.column_paths),Object.keys(e.column_paths).forEach((a=>{this.column_paths.push({key:a,value:e.column_paths[a]})})),e.body&&(this.create_body=[],e.body=JSON.parse(e.body),Object.keys(e.body).forEach((a=>{this.create_body.push({key:a,value:e.body[a]})}))),e.headers&&(this.create_headers=[],e.headers=JSON.parse(e.headers),Object.keys(e.headers).forEach((a=>{this.create_headers.push({key:a,value:e.headers[a]})}))),e.params&&(this.create_parameters=[],e.params=JSON.parse(e.params),Object.keys(e.params).forEach((a=>{this.create_parameters.push({key:a,value:e.params[a]})}))),this.api_tabs="auth",this.auth_json_file=null,this.handleUploadJson(),this.endpoint_information.url_user_input&&(this.endpoint_information.url_user_input=this.endpoint_information.url_user_input.replace(this.endpoint_information.url,"")),this.$refs.stepper.next()},async continueStepper(e="none"){try{if(1===this.creation_step){const e=this.checkInputs();if(!e)return void this.showErrorToast(this.$t("pages.messages.MISSING_FIELD"));if(this.loading=!0,this.endpoint_information["dynamic_api"]){const e=this.generateDynamicUrl();if(e instanceof Error)throw e;this.endpoint_information.url_user_input_formatted=e}return await this.testEndpointResponse("record"),this.showSuccessToast(this.$t("pages.custom_master_data.response_was_successful")),this.$refs.stepper.next(),void(this.loading=!1)}if(4===this.creation_step){if(0===!this.column_paths.length)return void this.showErrorToast(this.$t("pages.custom_master_data.column_required"));if(this.loading=!0,await this.testDataExtraction("record"),this.showSuccessToast(this.$t("pages.custom_master_data.response_was_successful")),await this.createMasterData("record",this.mode),"edit"==this.mode)return this.showSuccessToast(this.$t("pages.custom_master_data.master_data_updated")),void this.$router.push("/settings/master-data");this.showSuccessToast(this.$t("pages.custom_master_data.master_data_created")),this.$router.push("/settings/master-data"),this.loading=!1}0===this.creation_step&&(this.master_data_preset=e,"reset"==e&&(this.resetAllFields(),this.auth_json_file=null),"ion_api_blank"==e&&(this.endpoint_information["method"]={label:"GET",value:"GET"},this.endpoint_information["auth_type"]={label:"ION API",value:"ionapi"},this.endpoint_information["data_type"]="new_ion_endpoint",this.api_tabs="auth",this.auth_json_file=null),"oauth2"==e&&(this.endpoint_information["method"]={label:"GET",value:"GET"},this.endpoint_information["auth_type"]={label:"OAuth2",value:"oauth2"},this.endpoint_information["data_type"]="new_oauth2_endpoint",this.api_tabs="auth",this.auth_json_file=null)),this.$refs.stepper.next()}catch(a){const e=I.t.getErrorMessage(a);this.loading=!1,this.showErrorToast(e)}finally{this.loading=!1}},async testExtraction(){try{this.loading=!0,await this.testDataExtraction("record")}catch(e){const a=I.t.getErrorMessage(e);this.loading=!1,this.showErrorToast(a)}finally{this.loading=!1}},addColumnToTable(){const e=JSON.parse(this.formatted_response_textarea);let a=!0;this.endpoint_information["column_value_name"].split(",").forEach((t=>{var o=e[0][t.replaceAll(" ","")];void 0==o&&(a=!1)})),a?0!==this.column_paths.length||"id"==this.endpoint_information["column_name"].toLowerCase()?(this.column_paths.push({key:this.endpoint_information["column_name"],value:this.endpoint_information["column_value_name"]}),this.endpoint_information["column_name"]="",this.endpoint_information["column_value_name"]=""):this.showErrorToast(this.$t("pages.custom_master_data.column_id_required")):this.showErrorToast(this.$t(this.endpoint_information["column_value_name"]+" Could not be found in your Response. Please check your JSON Path and try again."))},removeColumnFromTable(e){this.column_paths.splice(e,1)},addBodyToTable(){this.create_body.push({key:this.endpoint_information["query_body_key"],value:this.endpoint_information["query_body_value"]}),this.endpoint_information["query_body_key"]="",this.endpoint_information["query_body_value"]=""},removeBodyFromTable(e){this.create_body.splice(e,1)},addHeaderToTable(){this.create_headers.push({key:this.endpoint_information["query_header_key"],value:this.endpoint_information["query_header_value"]}),this.endpoint_information["query_header_key"]="",this.endpoint_information["query_header_value"]=""},removeHeaderFromTable(e){this.create_headers.splice(e,1)},addParamToTable(){this.create_parameters.push({key:this.endpoint_information["query_param_key"],value:this.endpoint_information["query_param_value"]}),this.endpoint_information["query_param_key"]="",this.endpoint_information["query_param_value"]=""},removeParamFromTable(e){this.create_parameters.splice(e,1)},async getTemplates(){await this.getMasterDataList("template")},async getEndpoints(){await this.getMasterDataList("record")}},async mounted(){const e=this.$route.params.id;if(await this.getEndpoints(),e){this.creation_step=1,this.mode="edit",this.auth_json_file=null,this.endpoint_information.id=e;const a=this.custom_records.findIndex((a=>a.id==e));if(-1==a)return void this.router.push("/settings/master-data");const t=this.custom_records[a];this.selectPreset(t)}this.getTemplates()},setup(){const e=(0,J.rD)(),{create_parameters:a,custom_records:t,create_headers:o,data_mode:n,raw_json_response:l,create_body:s,column_paths:i,auth_options:d,endpoint_information:r,method_options:u,body_type_options:m,response_textarea:_,formatted_response_textarea:p,loading:c,custom_templates:h}=(0,z.bP)(e),{testEndpointResponse:b,updateDynamicUrl:f,beautifyJson:y,generateDynamicUrl:k,formatJsonPath:g,createMasterData:v,resetAllFields:F,testDataExtraction:V,getMasterDataList:w}=e;return{beautifyJson:y,updateDynamicUrl:f,generateDynamicUrl:k,testEndpointResponse:b,formatJsonPath:g,createMasterData:v,resetAllFields:F,testDataExtraction:V,getMasterDataList:w,data_mode:n,custom_records:t,raw_json_response:l,custom_templates:h,loading:c,create_parameters:a,create_headers:o,create_body:s,column_paths:i,auth_options:d,endpoint_information:r,method_options:u,body_type_options:m,response_textarea:_,formatted_response_textarea:p,master_data_preset:(0,R.KR)(""),mode:(0,R.KR)("create"),auth_json_file:(0,R.KR)(null),creation_step:(0,R.KR)(0),api_tabs:(0,R.KR)("params"),stepper:"stepper"}}});var pe=t(37222),ce=t(78577),he=t(23316),be=t(44189),fe=t(80460),ye=t(94940),ke=t(42980),ge=t(10327),ve=t(10386),Fe=t(39041),Ve=t(71746),we=t(857),qe=t(50492),Le=t(99980),$e=t(63194),Te=t(84776);const Ce=(0,ee.A)(_e,[["render",O]]),Ae=Ce;ie()(_e,"components",{QStepper:pe.A,QStep:ce.A,QCard:he.A,QCardSection:be.A,QBtn:oe.A,QInput:le.A,QCheckbox:fe.A,QSelect:ye.A,QTabs:ke.A,QTab:ge.A,QSeparator:ve.A,QTabPanels:Fe.A,QTabPanel:Ve.A,QMarkupTable:we.A,QTable:ae.A,QIcon:qe.A,QFile:Le.A,QSpinnerHourglass:$e.A,QStepperNavigation:Te.A})}}]);