"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[7009],{37009:(e,t,o)=>{o.r(t),o.d(t,{default:()=>bt});var l=o(59835),a=o(86970);const r=e=>((0,l.dD)("data-v-09971038"),e=e(),(0,l.Cn)(),e),s={class:"row"},n={class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm body-bg body-height scrolle-y"},d={class:"row"},i={class:"row full-width secondary-c-text q-pt-md q-pb-md"},c={class:"col-6 pl-20"},u=r((()=>(0,l._)("img",{width:"24",src:"back_new.svg"},null,-1))),p={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},m={class:"selected-card-container"},w={class:"col-sm-12 col-md-12 col-lg-12 q-mb-lg name-field"},h={class:"col-sm-12 col-md-12 col-lg-12"},g={key:0,class:"col-sm-12 col-md-12 col-lg-12"},f={class:"col-sm-12 col-md-12 col-lg-12"},k={class:"col-sm-12 col-md-12 col-lg-12"},v={class:"col-sm-12 col-md-12 col-lg-12"},C={class:"col-sm-12 col-md-12 col-lg-12"},y={class:"row q-mt-lg"},_={class:"col-sm-6 col-md-6 col-lg-6 q-pa-sm margin-0-auto"},b={class:"text-weight-bold text-capitalize"},W={class:"row"},M={class:"col-sm-4 col-md-4 col-lg-4 cards-container"},E=r((()=>(0,l._)("div",{class:"row q-pb-sm q-pl-sm fontGrey"}," System ",-1))),T=["onClick"],D={class:"col-sm-10 col-md-10 col-lg-10 cursor-pointer"},x=["innerHTML"],S={class:"category-text"},V={class:"col-sm-2 col-md-2 col-lg-2"},Z={class:"col-sm-4 col-md-4 col-lg-4 cards-container box-margin"},O=r((()=>(0,l._)("div",{class:"col-sm-4 col-md-4 col-lg-4 cards-container"},null,-1)));function I(e,t,o,r,I,A){const L=(0,l.up)("q-icon"),q=(0,l.up)("q-btn"),H=(0,l.up)("q-input"),R=(0,l.up)("GenericCard"),j=(0,l.up)("q-toolbar-title"),z=(0,l.up)("q-toolbar"),Q=(0,l.up)("q-card-section"),F=(0,l.up)("q-card"),J=(0,l.up)("q-dialog"),N=(0,l.up)("Loader"),G=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",s,[(0,l._)("div",n,[(0,l._)("div",d,[(0,l._)("div",i,[(0,l._)("div",c,[(0,l.Wm)(q,{flat:"",rounded:"",color:"primary",to:"/workflows"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{class:"text-red-13",size:"sm"},{default:(0,l.w5)((()=>[u])),_:1}),(0,l._)("label",p,(0,a.zw)(e.$t("processes")),1)])),_:1})])]),(0,l._)("div",m,[(0,l._)("div",w,[(0,l.Wm)(H,{modelValue:e.workflowName,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.workflowName=t),t[1]||(t[1]=t=>e.inputValueChanges())],placeholder:"Workflow name",color:"light-blue"},null,8,["modelValue"])]),(0,l._)("div",h,[(0,l._)("h5",{class:(0,a.C_)(["headingMargin",0===Object.keys(e.selectedWhenCards).length?"fontGrey":"item-selected"])},"When....",2)]),e.selectedWhenCards&&0!==Object.keys(e.selectedWhenCards).length?((0,l.wg)(),(0,l.iD)("div",{class:"col-sm-12 col-md-12 col-lg-12 selected-card",key:e.selectedWhenCards.id},[(0,l.Wm)(R,{item:e.selectedWhenCards,itemIndex:0,cardType:"when",isDialog:!1,parentSvg:e.selectedWhenCards.svg,color:e.selectedWhenCards.parentColor,onOnCardClick:e.onCardClick,onRemoveCard:e.removeCard,onReplaceCard:e.replaceCard},null,8,["item","parentSvg","color","onOnCardClick","onRemoveCard","onReplaceCard"])])):((0,l.wg)(),(0,l.iD)("div",g,[(0,l.Wm)(q,{flat:"",icon:"add",class:"addCard addCard-bg",label:"Add Card",onClick:t[2]||(t[2]=t=>e.setCardType("when"))})])),(0,l._)("div",f,[(0,l._)("h5",{class:(0,a.C_)(["headingMargin",0===Object.keys(e.selectedAndCards).length?"fontGrey":"item-selected"])},"And....",2)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.selectedAndCards,((t,o)=>((0,l.wg)(),(0,l.iD)("div",{key:t.id,class:"col-sm-12 col-md-12 col-lg-12 selected-card"},[(0,l.Wm)(R,{item:t,itemIndex:o,cardType:"and",isDialog:!1,parentSvg:t.svg,color:t.parentColor,onOnCardClick:e.onCardClick,onRemoveCard:e.removeCard,onReplaceCard:e.replaceCard},null,8,["item","itemIndex","parentSvg","color","onOnCardClick","onRemoveCard","onReplaceCard"])])))),128)),(0,l._)("div",k,[(0,l.Wm)(q,{flat:"",icon:"add",class:"addCard addCard-bg",label:"Add Card",onClick:t[3]||(t[3]=t=>e.setCardType("and"))})]),(0,l._)("div",v,[(0,l._)("h5",{class:(0,a.C_)(["headingMargin",0===Object.keys(e.selectedThenCards).length?"fontGrey":"item-selected"])},"Then....",2)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.selectedThenCards,((t,o)=>((0,l.wg)(),(0,l.iD)("div",{key:t.id,class:"col-sm-12 col-md-12 col-lg-12 selected-card"},[(0,l.Wm)(R,{item:t,itemIndex:o,cardType:"then",isDialog:!1,parentSvg:t.svg,color:t.parentColor,onOnCardClick:e.onCardClick,onRemoveCard:e.removeCard,onReplaceCard:e.replaceCard},null,8,["item","itemIndex","parentSvg","color","onOnCardClick","onRemoveCard","onReplaceCard"])])))),128)),(0,l._)("div",C,[(0,l.Wm)(q,{flat:"",icon:"add",class:"addCard addCard-bg",label:"Add Card",onClick:t[4]||(t[4]=t=>e.setCardType("then"))})]),(0,l._)("div",y,[(0,l.kq)("",!0),(0,l._)("div",_,[(0,l.Wm)(q,{icon:"done",label:"Save",class:"width-160 save-button border-radius-10px float-right",onClick:t[5]||(t[5]=t=>e.saveWorkflow())})])])])])])]),(0,l.Wm)(J,{modelValue:e.showItemPanel,"onUpdate:modelValue":t[6]||(t[6]=t=>e.showItemPanel=t),maximized:""},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{class:"cards-dialog dialog-bg"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:"dialog-toolbar"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,null,{default:(0,l.w5)((()=>[(0,l._)("span",b,(0,a.zw)(e.cardType)+"...",1)])),_:1}),(0,l.wy)((0,l.Wm)(q,{flat:"",round:"",dense:"",icon:"close"},null,512),[[G]])])),_:1}),(0,l.Wm)(Q,{class:"paddingMargin0"},{default:(0,l.w5)((()=>[(0,l._)("div",W,[(0,l._)("div",M,[E,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.category,((t,o)=>((0,l.wg)(),(0,l.iD)("div",{key:o,class:(0,a.C_)(["row",e.cards.category==t.category?"active-category-card":"category-card"]),onClick:o=>{e.setSubCategory(t)}},[(0,l._)("div",D,[(0,l.Wm)(q,{round:"",flat:"",size:"xs",class:"p-7",style:(0,a.j5)("background-color:"+t.svg_background_color)},{default:(0,l.w5)((()=>[(0,l._)("i",{innerHTML:t.svg,class:"float-left q-mr-sm svg-icon center-inner"},null,8,x)])),_:2},1032,["style"]),(0,l._)("span",S,(0,a.zw)(e.$t(t.category)),1)]),(0,l._)("div",V,[(0,l.Wm)(L,{name:"arrow_forward_ios",size:"20px",class:"float-right icon"})])],10,T)))),128))]),(0,l._)("div",Z,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cards.cards,((t,o)=>((0,l.wg)(),(0,l.j4)(R,{key:o+"_"+t.id,item:t,itemIndex:o,isDialog:!0,parentSvg:e.cards.svg,color:e.cards.svg_background_color,onOnCardClick:e.onCardClick,onRemoveCard:e.removeCard,onReplaceCard:e.replaceCard},null,8,["item","itemIndex","parentSvg","color","onOnCardClick","onRemoveCard","onReplaceCard"])))),128))]),O])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(N)],64)}var A=o(50796),L=o(7363),q=o(49990),H=o(60499);const R={class:"col-sm-12 col-md-12 col-lg-12"},j={class:"col-sm-3 col-md-2 col-lg-2 verticalCenter"},z=["innerHTML"],Q={class:"col-sm-8 col-md-9 col-lg-9"},F={class:"color-93939A paddingMargin0 font-size-0-75"},J={class:"paddingMargin0 font-size-15"},N={key:0,class:"col-sm-1 col-md-1 col-lg-1 verticalCenter"},G=(0,l.Uk)("Replace"),P=(0,l.Uk)("Delete");function U(e,t,o,r,s,n){const d=(0,l.up)("q-btn"),i=((0,l.up)("q-tooltip"),(0,l.up)("Badge")),c=(0,l.up)("q-item-label"),u=(0,l.up)("q-item-section"),p=(0,l.up)("q-icon"),m=(0,l.up)("q-item"),w=(0,l.up)("q-separator"),h=(0,l.up)("q-list"),g=(0,l.up)("q-popup-proxy"),f=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",R,[(0,l._)("div",{class:(0,a.C_)(["row taskCard taskCard-bg",e.isDialog?"cursor-pointer":"cursor-default"]),onClick:t[2]||(t[2]=t=>e.onCardClick(e.item))},[(0,l._)("div",j,[(0,l.Wm)(d,{round:"",flat:"",size:"xs",class:"p-10",style:(0,a.j5)("background-color:"+e.color)},{default:(0,l.w5)((()=>[(0,l._)("i",{innerHTML:e.parentSvg,class:"svg-icon center-inner"},null,8,z)])),_:1},8,["style"])]),(0,l._)("div",Q,[(0,l._)("p",F,[(0,l.Uk)((0,a.zw)(e.$t(e.item.category))+" ",1),(0,l.kq)("",!0)]),(0,l._)("p",J,[!e.dataArray||e.dataArray.length<1?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,a.zw)(e.item.text),1)],64)):((0,l.wg)(!0),(0,l.iD)(l.HY,{key:1},(0,l.Ko)(e.dataArray,((t,o)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:o},[e.renderBadge(t)?((0,l.wg)(),(0,l.j4)(i,{key:0,item:e.item,variable:t,isDialog:e.isDialog},null,8,["item","variable","isDialog"])):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,a.zw)(t+" "),1)],64))],64)))),128))])]),e.isDialog?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",N,[(0,l.Wm)(p,{name:"more_horiz",class:"more-horiz cursor-pointer",size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{offset:[10,10]},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"width-200 action-popup"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{clickable:"",onClick:t[0]||(t[0]=t=>e.$emit("replaceCard",e.itemIndex,e.cardType)),class:"item"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[G])),_:1})])),_:1}),(0,l.Wm)(u,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"sync",color:"c8c8d0",size:"xs"})])),_:1})])),_:1})),[[f]]),(0,l.Wm)(w,{color:"DADAE2",inset:""}),(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{clickable:"",onClick:t[1]||(t[1]=t=>e.$emit("removeCard",e.itemIndex,e.cardType)),class:"delete-item"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[P])),_:1})])),_:1}),(0,l.Wm)(u,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"delete",color:"c8c8d0",size:"xs"})])),_:1})])),_:1})),[[f]])])),_:1})])),_:1})])),_:1})]))],2)])}const B={class:"row no-wrap q-pa-sm q-pb-md width-320px"},$={class:"col-sm-12 col-md-12 col-lg-12"};function Y(e,t,o,r,s,n){(0,l.up)("q-badge"),(0,l.up)("q-icon");const d=(0,l.up)("q-menu"),i=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.kq)("",!0),e.currentElement.display_name?((0,l.wg)(),(0,l.j4)(i,{key:1,size:e.workflowModel[e.currentElementId].badgeValue==e.workflowModel[e.currentElementId].defaultValue?"xs":"md",flat:e.workflowModel[e.currentElementId].badgeValue!=e.workflowModel[e.currentElementId].defaultValue,rounded:e.workflowModel[e.currentElementId].badgeValue==e.workflowModel[e.currentElementId].defaultValue,outline:e.workflowModel[e.currentElementId].badgeValue==e.workflowModel[e.currentElementId].defaultValue,class:(0,a.C_)([e.workflowModel[e.currentElementId].badgeValue==e.workflowModel[e.currentElementId].defaultValue?"":"selected-custom-badge","custom-badge"]),color:e.workflowModel[e.currentElementId].badgeValue==e.workflowModel[e.currentElementId].defaultValue?"custom-badge-light":"custom-badge-bold",label:e.getLabel(e.isDialog?e.workflowModel[e.currentElementId].defaultValue:e.workflowModel[e.currentElementId].badgeValue)},{default:(0,l.w5)((()=>[e.isDialog?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(d,{key:0,fit:"",anchor:"bottom middle",self:"top middle",style:{"border-radius":"10px","box-shadow":"0 10px 44px 0 rgba(0, 0, 0, 0.07),0 2px 12px 0 rgba(0, 0, 0, 0.1),0 2px 4px 0 rgba(0, 0, 0, 0.04) !important"}},{default:(0,l.w5)((()=>[(0,l.kq)("",!0),(0,l._)("div",B,[(0,l._)("div",$,[((0,l.wg)(),(0,l.j4)((0,l.LL)(e.currentElement.display_name),{currentElement:e.currentElement},null,8,["currentElement"]))])])])),_:1}))])),_:1},8,["size","flat","rounded","outline","class","color","label"])):(0,l.kq)("",!0)],64)}var K=o(26033);const X={class:"row items-center justify-end"};function ee(e,t,o,a,r,s){const n=(0,l.up)("q-btn"),d=(0,l.up)("q-time"),i=(0,l.up)("q-popup-proxy"),c=(0,l.up)("q-icon"),u=(0,l.up)("q-input"),p=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(u,{dense:"",modelValue:e.workflowModel[e.currentElement.uuid].value,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.workflowModel[e.currentElement.uuid].value=t),t[2]||(t[2]=t=>{e.inputValueChanges(t)})],mask:"time",rules:["time"]},{append:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"access_time",class:"cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:e.workflowModel[e.currentElement.uuid].value,"onUpdate:modelValue":t[0]||(t[0]=t=>e.workflowModel[e.currentElement.uuid].value=t),color:"red-8"},{default:(0,l.w5)((()=>[(0,l._)("div",X,[(0,l.wy)((0,l.Wm)(n,{label:"Close",color:"red-8",flat:""},null,512),[[p]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var te=o(46624);const oe=(0,l.aZ)({name:"badge",components:{},props:{currentElement:{type:{},default:{}}},data(){return{}},methods:{inputValueChanges(e){this.workflowModel[this.currentElement.uuid].badgeValue=e},updateModelOnLoad(e){const t=(0,te.zG)();t.workflowModel[e.uuid].badgeValue=e.data}},setup(){const e=(0,te.zG)(),{workflowModel:t}=(0,L.Jk)(e);return{workflowModel:t}}});var le=o(7683),ae=o(13119),re=o(22857),se=o(52765),ne=o(86770),de=o(68879),ie=o(62146),ce=o(69984),ue=o.n(ce);const pe=(0,le.Z)(oe,[["render",ee]]),me=pe;function we(e,t,o,a,r,s){const n=(0,l.up)("dropdown");return(0,l.wg)(),(0,l.j4)(n,{options:e.usersList,currentElement:e.currentElement,labelToDisplay:"user",optionValue:e.optionValue},null,8,["options","currentElement","optionValue"])}ue()(oe,"components",{QInput:ae.Z,QIcon:re.Z,QPopupProxy:se.Z,QTime:ne.Z,QBtn:de.Z}),ue()(oe,"directives",{ClosePopup:ie.Z});const he={class:"row"},ge={class:"col-sm-12 col-md-12 col-lg-12 color-93939A text-capitalize q-pb-sm"},fe={class:"col-sm-12 col-md-12 col-lg-12"};function ke(e,t,o,r,s,n){const d=(0,l.up)("q-select");return(0,l.wg)(),(0,l.iD)("div",he,[(0,l._)("div",ge,(0,a.zw)(e.$t(e.labelToDisplay)),1),(0,l._)("div",fe,[(0,l.Wm)(d,{dense:"",outlined:"","emit-value":"","map-options":"",options:e.options,label:"Please Select",class:"back-white",color:"light-blue",multiple:e.allowMultiSelection,"onUpdate:modelValue":[t[0]||(t[0]=t=>{e.inputValueChanges(t)}),t[1]||(t[1]=t=>e.workflowModel[e.currentElement.uuid].value=t)],modelValue:e.workflowModel[e.currentElement.uuid].value,"option-value":e.optionValue},null,8,["options","multiple","modelValue","option-value"])])])}const ve=(0,l.aZ)({name:"generic-dropdown",components:{},props:{currentElement:{type:Object,default:{id:"",data:null,data_type:"",data_set:[],is_list:!1,display_name:""}},options:{type:Array,default:[]},labelToDisplay:{type:String,default:""},optionValue:{type:String,default:"value"}},data(){return{allowMultiSelection:(0,H.iH)(!1),selectedElement:(0,H.iH)([])}},beforeMount:function(){if(this.currentElement){let e=this.workflowModel[this.currentElement.uuid].value;(!e||e.length<1)&&(this.workflowModel[this.currentElement.uuid].value=[])}},mounted(){this.currentElement&&(this.allowMultiSelection=!!this.currentElement.is_list)},methods:{inputValueChanges(e){if(this.currentElement&&this.options){if(!e||e.length<1)return void(this.workflowModel[this.currentElement.uuid].badgeValue=this.currentElement.display_name);let t=[];this.allowMultiSelection?t=this.options.filter((t=>e.includes(t.value.toString()))):(e=e.toString(),t=this.options.filter((t=>e==t.value)));const o=[];for(const e of t)o.push(e.label);this.workflowModel[this.currentElement.uuid].badgeValue=o.toString()}},updateModelOnLoad(e,t){const o=e.uuid;let l=e.data;const a=(0,te.zG)();if(!l||l.length<1)return a.workflowModel[o].value=[],void(a.workflowModel[o].badgeValue=e.display_name);let r=[];const s=l.split(",");r=t.filter((e=>s.includes(e.value.toString())));const n=[];for(const d of r)n.push(d.label);a.workflowModel[o].badgeValue=n.toString()}},setup(){const e=(0,te.zG)(),{workflowModel:t}=(0,L.Jk)(e);return{workflowModel:t}}});var Ce=o(32259);const ye=(0,le.Z)(ve,[["render",ke]]),_e=ye;ue()(ve,"components",{QSelect:Ce.Z});const be=(0,l.aZ)({name:"user-dropdown",components:{dropdown:_e},props:{currentElement:{type:Object}},data(){return{optionValue:"valueStr"}},methods:{updateModelOnLoad(e){var t;const o=(0,te.At)();null===(t=_e.methods)||void 0===t||t.updateModelOnLoad(e,o.usersList)}},setup(){const e=(0,te.At)(),{usersList:t}=(0,L.Jk)(e);return{usersList:t}}}),We=(0,le.Z)(be,[["render",we]]),Me=We,Ee={class:"row"},Te={class:"col-sm-12 col-md-12 col-lg-12 color-93939A text-capitalize q-pb-sm"},De={class:"col-sm-12 col-md-12 col-lg-12"};function xe(e,t,o,r,s,n){const d=(0,l.up)("q-input");return(0,l.wg)(),(0,l.iD)("div",Ee,[(0,l._)("div",Te,(0,a.zw)(e.currentElement.display_name),1),(0,l._)("div",De,[(0,l.Wm)(d,{outlined:"",dense:"",color:"light-blue","onUpdate:modelValue":[t[0]||(t[0]=t=>{e.inputValueChanges(t)}),t[1]||(t[1]=t=>e.workflowModel[e.currentElement.uuid].value=t)],modelValue:e.workflowModel[e.currentElement.uuid].value},null,8,["modelValue"])])])}const Se=(0,l.aZ)({name:"generic-input",components:{},props:{currentElement:{type:Object,default:{id:"",data:null,data_type:"",data_set:[],is_list:!1,display_name:""}}},data(){return{allowMultiSelection:(0,H.iH)(!1),selectedElement:(0,H.iH)([])}},methods:{inputValueChanges(e){if(this.currentElement){if(!e)return void(this.workflowModel[this.currentElement.uuid].badgeValue=this.currentElement.display_name);this.workflowModel[this.currentElement.uuid].badgeValue=e}},updateModelOnLoad(e){if(e.data){const t=(0,te.zG)();t.workflowModel[e.uuid].badgeValue=e.data}}},setup(){const e=(0,te.zG)(),{workflowModel:t}=(0,L.Jk)(e);return{workflowModel:t}}}),Ve=(0,le.Z)(Se,[["render",xe]]),Ze=Ve;ue()(Se,"components",{QInput:ae.Z});var Oe=o(33725);function Ie(e,t,o,a,r,s){const n=(0,l.up)("dropdown");return(0,l.wg)(),(0,l.j4)(n,{options:e.docStatusList,currentElement:e.currentElement,labelToDisplay:"status"},null,8,["options","currentElement"])}var Ae=o(79860);const Le=(0,l.aZ)({name:"status-dropdown",components:{dropdown:_e},props:{currentElement:{type:Object}},data(){return{docStatusList:(0,H.iH)([])}},mounted(){this.currentElement&&(this.docStatusList=this.prepareStatusDropdown(this.currentElement.data_set))},methods:{prepareStatusDropdown(e){let t=[];this.currentElement&&(e=this.currentElement.data_set);for(const o of e)t.push({value:o,label:Ae.i18n.t(o)});return t},updateModelOnLoad(e){var t;const o=this.prepareStatusDropdown(e.data_set);null===(t=_e.methods)||void 0===t||t.updateModelOnLoad(e,o)}},setup(){return{}}}),qe=(0,le.Z)(Le,[["render",Ie]]),He=qe;function Re(e,t,o,a,r,s){const n=(0,l.up)("dropdown");return(0,l.wg)(),(0,l.j4)(n,{options:e.doc_type_list,currentElement:e.currentElement,labelToDisplay:"doc_type"},null,8,["options","currentElement"])}const je=(0,l.aZ)({name:"status-dropdown",components:{dropdown:_e},props:{currentElement:{type:Object,default:{id:"",data:null,data_type:"",data_set:[],is_list:!1,display_name:""}}},data(){return{}},methods:{updateModelOnLoad(e){var t;const o=(0,te.At)();null===(t=_e.methods)||void 0===t||t.updateModelOnLoad(e,o.doc_type_list)}},setup(){const e=(0,te.zG)(),{workflowModel:t}=(0,L.Jk)(e),o=(0,te.At)(),{doc_type_list:l}=(0,L.Jk)(o);return{workflowModel:t,doc_type_list:l}}}),ze=(0,le.Z)(je,[["render",Re]]),Qe=ze;function Fe(e,t,o,a,r,s){const n=(0,l.up)("dropdown");return(0,l.wg)(),(0,l.j4)(n,{options:e.operatorList,currentElement:e.currentElement,labelToDisplay:"operator"},null,8,["options","currentElement"])}const Je=(0,l.aZ)({name:"operator-dropdown",components:{dropdown:_e},props:{currentElement:{type:Object}},data(){return{operatorList:[]}},mounted(){this.currentElement&&(this.operatorList=this.prepareOperatorDropdown(this.currentElement.data_set,this.$t))},methods:{prepareOperatorDropdown(e,t){let o=[];this.currentElement&&(e=this.currentElement.data_set);for(const l of e)o.push({value:l,label:Ae.i18n.t(l)});return o},updateModelOnLoad(e){var t;const o=this.prepareOperatorDropdown(e.data_set,Ae.i18n.t);null===(t=_e.methods)||void 0===t||t.updateModelOnLoad(e,o)}},setup(){const e=(0,te.zG)(),{workflowModel:t}=(0,L.Jk)(e);return{workflowModel:t}}}),Ne=(0,le.Z)(Je,[["render",Fe]]),Ge=Ne;function Pe(e,t,o,a,r,s){const n=(0,l.up)("dropdown");return(0,l.wg)(),(0,l.j4)(n,{options:e.subOrgList,currentElement:e.currentElement,labelToDisplay:"sub_org"},null,8,["options","currentElement"])}const Ue=(0,l.aZ)({name:"status-dropdown",components:{dropdown:_e},props:{currentElement:{type:Object,default:{id:"",data:null,data_type:"",data_set:[],is_list:!1,display_name:""}}},data(){return{}},methods:{updateModelOnLoad(e){var t;const o=(0,te.At)();null===(t=_e.methods)||void 0===t||t.updateModelOnLoad(e,o.subOrgList)}},setup(){const e=(0,te.zG)(),{workflowModel:t}=(0,L.Jk)(e),o=(0,te.At)(),{subOrgList:l}=(0,L.Jk)(o);return{workflowModel:t,subOrgList:l}}}),Be=(0,le.Z)(Ue,[["render",Pe]]),$e=Be,Ye={time:me,user:Me,users:Me,operator:Ge,status:He,str:Ze,sub_org_id:$e,event:Ze,cronjob:Ze,field_value:Ze,field_name:Ze,doc_type:Qe,sub_doc_type:Ze},Ke=(0,l.aZ)({name:"badge",mixins:[K.Z],components:{time:me,user:Me,users:Me,operator:Ge,status:He,str:Ze,sub_org_id:$e,event:Ze,cronjob:Ze,field_value:Ze,field_name:Ze,doc_type:Qe,sub_doc_type:Ze},props:{isDialog:{type:Boolean,default:!0},variable:{type:String,default:""},item:{type:Object}},data(){return{showItemPanel:(0,H.iH)(!1),currentElementId:(0,H.iH)(""),currentElement:(0,H.iH)({})}},mounted(){this.prepareBadgeValue()},methods:{prepareBadgeValue(){if(this.item){let e=this.variable.split(Oe.FH).join("");Array.from(this.item.variables).forEach((t=>{if(t.id==e&&t.data_type)return this.currentElement=t,t.uuid=t.uuid?t.uuid:(0,A.Z)(),this.currentElementId=t.uuid,void this.updateModel(t)}))}},updateModel(e){var t,o;e.data&&this.workflowModel.hasOwnProperty(e.uuid)?Ye.hasOwnProperty(e.display_name)&&(null===(t=Ye[e.display_name].methods)||void 0===t?void 0:t.updateModelOnLoad)&&(null===(o=Ye[e.display_name].methods)||void 0===o||o.updateModelOnLoad(e)):this.workflowModel[e.uuid]={value:"",badgeValue:e.display_name,defaultValue:e.display_name}},getLabel(e){return this.stringReplaceWithString(e,"_"," ")}},setup(){const e=(0,te.zG)(),{workflowModel:t}=(0,L.Jk)(e);return{workflowModel:t}}});var Xe=o(20990),et=o(56362);const tt=(0,le.Z)(Ke,[["render",Y],["__scopeId","data-v-d1190dd8"]]),ot=tt;ue()(Ke,"components",{QBadge:Xe.Z,QBtn:de.Z,QMenu:et.Z,QIcon:re.Z});var lt=o(70501);const at=(0,l.aZ)({name:"generic-card",emits:["onCardClick","removeCard","replaceCard"],mixins:[q.Z,K.Z,lt.Z],components:{Badge:ot},props:{isDialog:{type:Boolean,default:!0},itemIndex:{type:Number,default:null},cardType:{type:String,default:""},parentSvg:{type:String,default:""},color:{type:String,default:""},item:{type:Object,default:{category:"",id:"",text:"",toolTip:""}}},data(){return{showItemPanel:(0,H.iH)(!1),dataArray:(0,H.iH)([])}},mounted(){this.prepareData()},methods:{renderBadge(e){return e.startsWith(Oe.FH)},prepareData(){if(this.item&&this.item.text.includes(Oe.FH)){let e=this.item.text.split(/(__%)/);for(let t=0;t<e.length;t++){let o="";e[t]&&(e[t]==Oe.FH?(o=e[t]+e[t+1]+e[t+2],t+=2):o=e[t],this.dataArray.push(o))}}},prepareData2(){if(this.item&&this.item.text.includes(Oe.FH)){let e=this.item.text.split(Oe.FH).join(Oe.FH+Oe.Um);this.dataArray=e.split(Oe.FH)}},replaceStringSaparatorWithHtmlBtn(e){let t=e.text;return!e.variables||Object.keys(e.variables).length<1||Array.from(e.variables).forEach((e=>{const o='<span class="q-badge flex inline items-center no-wrap q-badge--single-line q-badge--outline text-orange cursor-pointer" @click="testFnction()"> '+e.data_type+" </span>",l=Oe.FH+e.id+Oe.FH;t=t.replace(l,o)})),t},onCardClick(e){this.isDialog&&(e.svg=this.parentSvg,e.parentColor=this.color,this.$emit("onCardClick",e))}},setup(){return{}}});var rt=o(46858),st=o(13246),nt=o(490),dt=o(76749),it=o(33115),ct=o(50926);const ut=(0,le.Z)(at,[["render",U],["__scopeId","data-v-65b7041c"]]),pt=ut;ue()(at,"components",{QIcon:re.Z,QBtn:de.Z,QTooltip:rt.Z,QPopupProxy:se.Z,QList:st.Z,QItem:nt.Z,QItemSection:dt.Z,QItemLabel:it.Z,QSeparator:ct.Z,QBadge:Xe.Z}),ue()(at,"directives",{ClosePopup:ie.Z});var mt=o(31921),wt=o(49341),ht=function(e,t,o,l){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,r){function s(e){try{d(l.next(e))}catch(t){r(t)}}function n(e){try{d(l["throw"](e))}catch(t){r(t)}}function d(e){e.done?o(e.value):a(e.value).then(s,n)}d((l=l.apply(e,t||[])).next())}))};const gt=(0,l.aZ)({name:"workflowDesigner",mixins:[q.Z,K.Z,lt.Z],components:{Loader:mt.Z,GenericCard:pt},data(){return{isWorkflowEnable:(0,H.iH)(!0),workflowName:(0,H.iH)(""),workFlowId:(0,H.iH)(""),cardType:(0,H.iH)(""),cards:(0,H.iH)([]),category:(0,H.iH)([]),showItemPanel:(0,H.iH)(!1),indexToRemove:(0,H.iH)(null),isWorkflowChanged:(0,H.iH)(!1),criteriaValue:(0,H.iH)("after"),showAddCriteriaBox:(0,H.iH)(!1),isConditionContent:(0,H.iH)(!0)}},mounted(){return ht(this,void 0,void 0,(function*(){this.showLoading(),this.indexToRemove=null,this.workFlowId=this.$route.params.id,yield this.getWorkflowWhenCards(),yield this.getWorkflowAndCards(),yield this.getWorkflowThenCards(),yield this.initChildDropdowns(),this.workFlowId&&(yield this.loadWorkflow()),this.hideLoading()}))},methods:{initChildDropdowns(){return ht(this,void 0,void 0,(function*(){yield this.prepareUsersDropdown(),yield this.getSubOrgsList(),this.prepareDocTypeAndSubTypesList()}))},setCardType(e){this.cards=[],this.cardType=e,e==Oe.tl.when?this.category=this.workflowWhenCards:e==Oe.tl.and?this.category=this.workflowAndCards:e==Oe.tl.then&&(this.category=this.workflowThenCards),this.showItemPanel=!0},setSubCategory(e){e&&(this.cards=e)},onCardClick(e){const t=JSON.parse(JSON.stringify(e));for(let o of t.variables)o.uuid=(0,A.Z)(),this.initWorkFlowMode(o,!0);this.cardType==Oe.tl.when?this.selectedWhenCards=t:this.cardType==Oe.tl.and?this.indexToRemove||0==this.indexToRemove?(this.selectedAndCards.splice(this.indexToRemove,1),this.selectedAndCards.splice(this.indexToRemove,0,t)):this.selectedAndCards.push(t):this.cardType==Oe.tl.then&&(this.indexToRemove||0==this.indexToRemove?(this.selectedThenCards.splice(this.indexToRemove,1),this.selectedThenCards.splice(this.indexToRemove,0,t)):this.selectedThenCards.push(t)),this.indexToRemove=null,this.showItemPanel=!1},removeCard(e,t){this.cardType=t,this.cardType==Oe.tl.when?this.selectedWhenCards={}:this.cardType==Oe.tl.and?this.selectedAndCards.splice(e,1):this.cardType==Oe.tl.then&&this.selectedThenCards.splice(e,1)},replaceCard(e,t){this.indexToRemove=e,this.setCardType(t)},validateSaveJson(){return this.workflowName?this.selectedWhenCards&&Object.keys(this.selectedWhenCards).length<1?(this.showErrorToast("When Can not be empty"),!1):!(this.selectedThenCards&&this.selectedThenCards.length<1)||(this.showErrorToast("Then Can not be empty"),!1):(this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY")),!1)},saveWorkflow(){return ht(this,void 0,void 0,(function*(){if(!this.validateSaveJson())return;this.showLoading();let e=!1;this.isWorkflowChanged&&(e=yield this.createWorkflow(),null==e||void 0==e)||(yield this.saveWorkflowJson(),this.hideLoading(),e&&this.$router.push("/workflow_designer/"+this.workFlowId))}))},createWorkflow(){return ht(this,void 0,void 0,(function*(){let e,t=null;try{let o={};o.name=this.workflowName,this.workFlowId?(o.id=this.workFlowId,e=yield wt.fo.updateWorkflow(o),t=!1):(e=yield wt.fo.createWorkflow(o),e&&e.id&&(this.workFlowId=e.id,t=!0))}catch(o){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR")),t=null}return t}))},saveWorkflowJson(){return ht(this,void 0,void 0,(function*(){let e;try{let t=this.prepareWokrFlowJsonToSave();e=yield wt.fo.saveWorkflowJson(t),e.success&&this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},prepareWokrFlowJsonToSave(){let e=JSON.parse(JSON.stringify(this.selectedWhenCards)),t=JSON.parse(JSON.stringify(this.selectedAndCards)),o=JSON.parse(JSON.stringify(this.selectedThenCards));delete e.parentColor;for(let a of e.variables)a.data=this.prepareVariableData(a),delete a.uuid;for(let a of t){delete a.parentColor;for(let e of a.variables)e.data=this.prepareVariableData(e),delete e.uuid}for(let a of o){delete a.parentColor;for(let e of a.variables)e.data=this.prepareVariableData(e),delete e.uuid}const l={workflow_id:this.workFlowId,data:{when_condition:e,and_conditions:t,then_conditions:o}};return l},prepareVariableData(e){let t=this.workflowModel[e.uuid].value,o="";return o=e.is_list&&t?this.workflowModel[e.uuid].value.join(","):t?t.toString():"",o},inputValueChanges(){this.isWorkflowChanged=!0},loadWorkflow(){return ht(this,void 0,void 0,(function*(){let e;try{e=yield wt.fo.loadworkflowJson(this.workFlowId),e.success&&this.prepareWokrFlowJsonToDisplay(e)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},prepareWokrFlowJsonToDisplay(e){this.workflowName=e.name,this.isWorkflowEnable=e.enabled,this.selectedWhenCards=e.data&&e.data.when_condition?e.data.when_condition:{},this.selectedAndCards=e.data&&e.data.and_conditions?e.data.and_conditions:[],this.selectedThenCards=e.data&&e.data.then_conditions?e.data.then_conditions:[];let t=new Map;for(let o of this.workflowWhenCards)t.set(o.category,o.svg_background_color);for(let o of this.workflowAndCards)t.set(o.category,o.svg_background_color);for(let o of this.workflowThenCards)t.set(o.category,o.svg_background_color);if(this.selectedWhenCards&&Object.keys(this.selectedWhenCards).length>0){this.selectedWhenCards.parentColor=t.get(this.selectedWhenCards.category);for(let e of this.selectedWhenCards.variables)e.uuid=(0,A.Z)(),this.initWorkFlowMode(e,!1)}for(let o of this.selectedAndCards){o.parentColor=t.get(o.category);for(let e of o.variables)e.uuid=(0,A.Z)(),this.initWorkFlowMode(e,!1)}for(let o of this.selectedThenCards){o.parentColor=t.get(o.category);for(let e of o.variables)e.uuid=(0,A.Z)(),this.initWorkFlowMode(e,!1)}},initWorkFlowMode(e,t){this.workflowModel[e.uuid]={value:"",badgeValue:e.display_name,defaultValue:e.display_name},t?e.data_type==Oe.tl.operator&&e.data&&(this.workflowModel[e.uuid].value=e.data):e.is_list?this.workflowModel[e.uuid].value=e.data.split(","):this.workflowModel[e.uuid].value=e.data}},setup(){const e=(0,te.zG)();e.$reset();const{getWorkflowWhenCards:t,getWorkflowAndCards:o,getWorkflowThenCards:l}=e,{workflowModel:a,workflowWhenCards:r,workflowAndCards:s,workflowThenCards:n,selectedAndCards:d,selectedWhenCards:i,selectedThenCards:c}=(0,L.Jk)(e),u=(0,te.At)(),{prepareUsersDropdown:p,getSubOrgsList:m,prepareDocTypeAndSubTypesList:w}=u;return{workflowModel:a,workflowAndCards:s,workflowWhenCards:r,workflowThenCards:n,selectedAndCards:d,selectedWhenCards:i,selectedThenCards:c,getWorkflowAndCards:o,getWorkflowWhenCards:t,getWorkflowThenCards:l,prepareUsersDropdown:p,getSubOrgsList:m,prepareDocTypeAndSubTypesList:w}}});var ft=o(32074),kt=o(44458),vt=o(51663),Ct=o(81973),yt=o(63190);const _t=(0,le.Z)(gt,[["render",I],["__scopeId","data-v-09971038"]]),bt=_t;ue()(gt,"components",{QBtn:de.Z,QIcon:re.Z,QInput:ae.Z,QDialog:ft.Z,QCard:kt.Z,QToolbar:vt.Z,QToolbarTitle:Ct.Z,QCardSection:yt.Z}),ue()(gt,"directives",{ClosePopup:ie.Z})}}]);