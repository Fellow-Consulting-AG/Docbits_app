"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[6962],{26962:(e,t,o)=>{o.r(t),o.d(t,{default:()=>K});var r=o(61758),i=o(58790);const a=e=>((0,r.Qi)("data-v-4574fc6a"),e=e(),(0,r.jt)(),e),n={class:"col-4 secondary-c-text text-h6"},s={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},l={class:"row"},d={class:"col-3 q-pa-sm"},c={class:"q-ma-md"},u={class:"q-ma-md"},p={class:"q-ma-md"},m=a((()=>(0,r.Lk)("span",{class:"text-red"}," *",-1))),_={class:"q-ma-md"},h=a((()=>(0,r.Lk)("span",{class:"text-red"}," *",-1))),b={class:"col-9"},f={key:0,class:"loading-component"},y=a((()=>(0,r.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1))),g=[y];function v(e,t,o,a,y,v){const k=(0,r.g2)("SubHeader"),F=(0,r.g2)("q-icon"),$=(0,r.g2)("q-btn"),S=(0,r.g2)("q-select"),A=(0,r.g2)("editor"),C=(0,r.g2)("q-form");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(k,{name:"doc_type_custom_columns",label:e.$t("add_special_rules"),display_help_link:!1},null,8,["label"]),(0,r.Lk)("div",n,[(0,r.bF)($,{flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:`/settings/manage_xslt/${e.$route.params.doc_type}?tab=${e.$route.params.e_doc_type}&title=${e.title}`},{default:(0,r.k6)((()=>[(0,r.bF)(F,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,r.Lk)("label",s,(0,i.v_)(e.$t("pages.settings.document_types")),1)])),_:1},8,["to"])]),(0,r.bF)(C,{ref:"formRef"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",l,[(0,r.Lk)("div",d,[(0,r.Lk)("div",c,[(0,r.bF)(S,{"hide-dropdown-icon":"",outlined:"",disable:"",readonly:"",modelValue:e.current_model.doc_type,"onUpdate:modelValue":t[0]||(t[0]=t=>e.current_model.doc_type=t),"use-input":"",options:e.doc_type_list,label:e.$t("pages.screen2a.doctype"),onFilter:e.filterDocTypeListEvent,loading:e.doc_type_loading,"emit-value":"","map-options":"",dense:"",class:"back-white"},null,8,["modelValue","options","label","onFilter","loading"])]),(0,r.Lk)("div",u,[(0,r.bF)(S,{"hide-dropdown-icon":"",outlined:"",disable:"",readonly:"",modelValue:e.current_model.e_doc_type,"onUpdate:modelValue":t[1]||(t[1]=t=>e.current_model.e_doc_type=t),"use-input":"",options:e.e_document_types,label:e.$t("e_document_type"),onFilter:e.filterDocTypeListEvent,loading:e.doc_type_loading,"emit-value":"","map-options":"",dense:"",class:"back-white"},null,8,["modelValue","options","label","onFilter","loading"])]),(0,r.Lk)("div",p,[(0,r.bF)(S,{outlined:"",modelValue:e.current_model.attribute_name,"onUpdate:modelValue":t[2]||(t[2]=t=>e.current_model.attribute_name=t),options:e.attribute_names,onFilter:e.filterDocTypeListEvent,loading:e.doc_type_loading,"emit-value":"","map-options":"",dense:"",labelSlot:"",hideBottomSpace:"",rules:[e=>!!e||"Field is required"]},{label:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.$t("attribute_name"))+" ",1),m])),_:1},8,["modelValue","options","onFilter","loading","rules"])]),(0,r.Lk)("div",_,[(0,r.bF)(S,{outlined:"",disable:"","hide-dropdown-icon":"",modelValue:e.current_model.attribute_type,"onUpdate:modelValue":t[3]||(t[3]=t=>e.current_model.attribute_type=t),"use-input":"",readonly:"",options:e.attribute_types,onFilter:e.filterDocTypeListEvent,loading:e.doc_type_loading,"emit-value":"","map-options":"",dense:"",labelSlot:"",hideBottomSpace:"",rules:[e=>!!e||"Field is required"]},{label:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.$t("attribute_type"))+" ",1),h])),_:1},8,["modelValue","options","onFilter","loading","rules"])])]),(0,r.Lk)("div",b,[(0,r.bF)(A)])])])),_:1},512),e.processing?((0,r.uX)(),(0,r.CE)("div",f,g)):(0,r.Q3)("",!0)],64)}var k=o(68180);const F={class:"row"};function $(e,t,o,i,a,n){const s=(0,r.g2)("q-space"),l=(0,r.g2)("f-btn"),d=(0,r.g2)("q-card-section"),c=(0,r.g2)("editor"),u=(0,r.g2)("q-card");return(0,r.uX)(),(0,r.Wv)(u,{flat:"",bordered:"",class:"import-container white-back"},{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",F,[(0,r.bF)(s),(0,r.bF)(l,{onClick:e.formatCode,label:e.$t("format_button")},null,8,["onClick","label"]),(0,r.bF)(l,{onClick:e.saveRecord,label:e.$t("save"),class:"q-ml-sm"},null,8,["onClick","label"])])])),_:1}),(0,r.bF)(d,{class:"row items-center q-pb-md"},{default:(0,r.k6)((()=>[(0,r.bF)(c,{formatCode:e.is_format_code,onFormatComplete:e.afterFormatted},null,8,["formatCode","onFormatComplete"])])),_:1})])),_:1})}var S=o(1659),A=o(38734),C=o(24622),L=o(88694),w=o(18505),R=o(1595),T=o(64775),q=function(e,t,o,r){function i(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,a){function n(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r["throw"](e))}catch(t){a(t)}}function l(e){e.done?o(e.value):i(e.value).then(n,s)}l((r=r.apply(e,t||[])).next())}))};const E=(0,r.pM)({el:"#app",mixins:[C.A,w.A],props:{},components:{editor:L.A},watch:{processing:{handler:function(e,t){!1===e?this.hideLoading():this.showLoading()}}},data(){return{title:"",is_format_code:(0,A.KR)(!1)}},mounted(){var e;const t=null===(e=this.$route.query.title)||void 0===e?void 0:e.toString();t&&(this.title=t)},methods:{saveRecord(){var e;return q(this,void 0,void 0,(function*(){const t=yield null===(e=this.formRef)||void 0===e?void 0:e.validate();if(t)try{this.processing=!0;const e=yield this.createExtractionAttribute();e&&(this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),this.resetRecord(),this.$router.push(`/settings/manage_xslt/${String(e.data.doc_type_key)}/${String(e.data.id)}/${String(e.data.electronic_document_type)}?title=${this.title}`)),this.processing=!1}catch(o){const e=T.t.getErrorMessage(o);this.showErrorToast(e),this.processing=!1}}))},formatCode(){this.is_format_code=!0},afterFormatted(e){this.is_format_code=e},resetRecord(){var e;null===(e=this.formRef)||void 0===e||e.reset(),this.resetCurrentModel(),this.current_model.doc_type=this.$route.params.doc_type,this.current_model.e_doc_type=this.$route.params.e_doc_type,this.current_model.doc_type_key=this.$route.params.doc_type}},setup(){const e=(0,R.If)(),{processing:t,formRef:o,current_model:r}=(0,S.bP)(e),{createExtractionAttribute:i,resetCurrentModel:a}=e;return{formRef:o,processing:t,createExtractionAttribute:i,resetCurrentModel:a,current_model:r}}});var x=o(12807),V=o(23316),Q=o(44189),I=o(93676),M=o(98582),P=o.n(M);const O=(0,x.A)(E,[["render",$]]),U=O;P()(E,"components",{QCard:V.A,QCardSection:Q.A,QSpace:I.A});var X=o(76956);const D=(0,r.pM)({el:"#app",mixins:[C.A,w.A],components:{SubHeader:k.A,editor:U},data(){return{title:""}},mounted(){var e;this.init();const t=null===(e=this.$route.query.title)||void 0===e?void 0:e.toString();t&&(this.title=t)},watch:{attribute_name:{handler:function(e,t){e!=t.attribute_name&&("STRUCTURE_DESCRIPTOR"==e&&(this.current_model.attribute_type="JSON"),"TRANSFORMATION"==e&&(this.current_model.attribute_type="XSLT"),"EXTRACTION_PATHS"==e&&(this.current_model.attribute_type="JSON"),"PREVIEW"==e&&(this.current_model.attribute_type="XSLT"))}}},computed:{attribute_name(){return this.current_model.attribute_name}},methods:{init(){this.processing=!0,this.current_model.doc_type=this.$route.params.doc_type,this.current_model.e_doc_type=this.$route.params.e_doc_type,this.current_model.doc_type_key=this.$route.params.doc_type,setTimeout((()=>{this.processing=!1}),2e3)}},setup(){const e=(0,R.cY)(),t=(0,R.If)(),{current_model:o,processing:r,formRef:i}=(0,S.bP)(t),{doc_type_list:a}=(0,S.bP)(e);return{formRef:i,doc_type_list:a,current_model:o,processing:r,attribute_types:X.hs,attribute_names:X.kP,e_document_types:X.gI}}});var N=o(56384),W=o(50492),B=o(49200),H=o(94940),z=o(67156);const J=(0,x.A)(D,[["render",v],["__scopeId","data-v-4574fc6a"]]),K=J;P()(D,"components",{QBtn:N.A,QIcon:W.A,QForm:B.A,QSelect:H.A,QField:z.A})}}]);