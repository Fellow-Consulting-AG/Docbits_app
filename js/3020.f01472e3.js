"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[3020],{83020:(e,t,i)=>{i.r(t),i.d(t,{default:()=>xs});var o=i(83673),s=i(62323),n=i(98880);const l=e=>((0,o.dD)("data-v-2606b829"),e=e(),(0,o.Cn)(),e),a={class:"row highlighted-back q-pl-md q-pr-lg field_validation"},r={class:"col-sm-4 col-md-4 col-lg-4"},d={class:"secondary-c-text text-h6"},c=l((()=>(0,o._)("img",{width:"24",src:"back_new.svg"},null,-1))),u={class:"primary-dashboard"},h={class:"col-sm-8 col-md-8 col-lg-8"},m={key:1,class:"row q-pl-md q-pr-md q-pb-xs"},p={class:"full-width q-pa-sm scroll-area-height-medi",id:"right_section",ref:"right_section"},g={class:"q-pr-sm"},_={class:"full-width medi-fields-content-height"},w={class:"scroll-area-height-medi"},f={class:"image_control_panel"},v={class:"row"},y={class:"panel-left col-sm-3 col-md-3 col-lg-3"},b={class:"row ellipsify"},k={class:"col-sm-9 col-md-9 col-lg-9",id:"buttonArea"},x=l((()=>(0,o._)("img",{width:"24",height:"24",src:"pages.svg"},null,-1))),C={class:"q-ml-sm q-mr-sm text-weight-bold"},D={class:"right"},T={key:0},E=["src"],W={key:1},S=["src"],L=l((()=>(0,o._)("img",{width:"28",height:"28",src:"dual-monitor.svg"},null,-1))),I=l((()=>(0,o._)("img",{width:"24",height:"24",src:"costumer_care.svg"},null,-1))),V=l((()=>(0,o._)("img",{width:"24",height:"24",src:"zoom_in.svg"},null,-1))),q=l((()=>(0,o._)("img",{width:"24",height:"24",src:"zoom_out.svg"},null,-1))),O=(0,o.Uk)("Zoom Out"),A=l((()=>(0,o._)("img",{width:"24",height:"24",src:"loupe.svg"},null,-1))),F={key:3},R=l((()=>(0,o._)("img",{width:"24",height:"24",src:"split.svg"},null,-1))),M=l((()=>(0,o._)("img",{width:"24",src:"layout.svg"},null,-1))),Z=(0,o.Uk)("Go to Layout Template"),z=l((()=>(0,o._)("img",{width:"24",src:"ocr_icon.svg"},null,-1))),$=(0,o.Uk)("Debug Field Validations. Results will be displayed in the console after clicking it"),H={key:4},U=l((()=>(0,o._)("img",{width:"24",height:"24",src:"improve_document.svg"},null,-1))),B=l((()=>(0,o._)("img",{width:"24",height:"24",src:"flow.svg"},null,-1))),P=l((()=>(0,o._)("img",{width:"24",src:"split.svg"},null,-1))),N=l((()=>(0,o._)("img",{width:"24",src:"layout.svg"},null,-1))),Q=(0,o.Uk)("Go to Layout Template"),j=l((()=>(0,o._)("img",{width:"24",src:"ocr_icon.svg"},null,-1))),K=l((()=>(0,o._)("img",{width:"24",height:"24",src:"split.svg"},null,-1))),G=(0,o.Uk)("Debug Field Validations."),Y=(0,o.Uk)("Results will be displayed in the console after clicking it"),J={key:5},X=l((()=>(0,o._)("img",{width:"24",height:"24",src:"improve_document.svg"},null,-1))),ee=l((()=>(0,o._)("img",{width:"24",height:"24",src:"flow.svg"},null,-1))),te={class:"full-width right-content-height",id:"image_container"},ie={class:"full-width right-content-height",id:"image_scrolle",style:{position:"relative"}},oe=l((()=>(0,o._)("div",{class:"img-magnifier-glass"},null,-1))),se={id:"validate-container",class:""},ne=["src","width"],le=["width","height","viewBox"],ae={id:"marquee",ref:"marquee",x:"450",y:"420",width:"150",height:"150"},re={id:"boxes",ref:"boxes"},de={key:0,class:"full-width",id:"afterSlot"},ce={key:0,class:"row q-pl-sm q-pr-sm"},ue={class:"col-sm-12 col-md-12 col-lg-12 secondary-c-text text-h6 q-pb-md text-weight-bold"},he={class:"full-width"},me={class:"q-mt-sm hidden back-white",id:"left_section",ref:"left_section"},pe={key:0,class:"scroll-area-height-medi max-width-240"},ge={class:"row justify-center q-pl-md q-pr-md q-pt-md"},_e={class:"secondary-c-text text-h6 text-weight-bold"},we={class:"row"},fe={class:"page-numbers center-inner"},ve={class:"full-width pages-left-scroll-area-height scrolle-y pages-section-padding row justify-center"},ye=["data-id","src"],be={key:1},ke={key:2,class:"row bg-grey-2 q-pl-md q-pr-md q-pb-md"},xe=l((()=>(0,o._)("div",{class:"text-h6 text-bold"},"Need help deciding?",-1))),Ce=(0,o.Uk)(" Don't think too much and just contact us to learn more about the application! "),De={class:"row"},Te={class:""},Ee={class:"text-weight-bold"},We={class:"row",style:{"border-radius":"5px","background-color":"#eeeeee"}},Se={class:"full-width"},Le=l((()=>(0,o._)("div",{class:"full-width"}," MONITOR 1 ",-1))),Ie={class:"full-width"},Ve=l((()=>(0,o._)("div",{class:"full-width"}," MONITOR 2 ",-1))),qe=l((()=>(0,o._)("br",null,null,-1))),Oe=l((()=>(0,o._)("br",null,null,-1)));function Ae(e,t,i,l,Ae,Fe){const Re=(0,o.up)("DocumentLock"),Me=(0,o.up)("MessageBanner"),Ze=(0,o.up)("q-icon"),ze=(0,o.up)("q-btn"),$e=(0,o.up)("timeSpentTimer"),He=((0,o.up)("AISeverityLevel"),(0,o.up)("FieldsView")),Ue=(0,o.up)("q-resize-observer"),Be=(0,o.up)("q-tooltip"),Pe=(0,o.up)("autoAccountingBtn"),Ne=(0,o.up)("import-multi-invoice"),Qe=(0,o.up)("keyboardShortcutInfoBtn"),je=(0,o.up)("autoTesting"),Ke=(0,o.up)("q-item-section"),Ge=(0,o.up)("q-item-label"),Ye=(0,o.up)("q-item"),Je=(0,o.up)("q-list"),Xe=(0,o.up)("q-btn-dropdown"),et=(0,o.up)("AnnotationView"),tt=(0,o.up)("q-splitter"),it=(0,o.up)("supportForm"),ot=(0,o.up)("ErrorDocumentView"),st=(0,o.up)("Loader"),nt=(0,o.up)("q-space"),lt=(0,o.up)("q-card-section"),at=(0,o.up)("q-card"),rt=(0,o.up)("q-dialog"),dt=(0,o.up)("SplitDocument"),ct=(0,o.up)("q-toolbar-title"),ut=(0,o.up)("q-toolbar"),ht=(0,o.up)("q-card-actions"),mt=(0,o.up)("q-input"),pt=(0,o.up)("q-color"),gt=(0,o.up)("q-popup-proxy"),_t=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(Re,{document_version:e.document_version,trigger_document_lock:e.trigger_document_lock,doc_id:e.docId},null,8,["document_version","trigger_document_lock","doc_id"]),e.isReadOnly?((0,o.wg)(),(0,o.j4)(Me,{key:0,message:e.error_message,messageCategoryClass:"error-banner"},null,8,["message"])):(0,o.kq)("",!0),(0,o._)("div",a,[(0,o._)("div",r,[(0,o._)("div",d,[e.doc2AppMode?((0,o.wg)(),(0,o.j4)(ze,{key:0,flat:"",rounded:"","data-cy":"dashboard",color:"primary",onClick:e.goToDashboard},{default:(0,o.w5)((()=>[(0,o.Wm)(Ze,{class:"text-red-13",size:"sm"},{default:(0,o.w5)((()=>[c])),_:1}),(0,o._)("label",u,(0,s.zw)(e.$t("pages.screen2a.dashboard")),1)])),_:1},8,["onClick"])):(0,o.kq)("",!0)])]),(0,o._)("div",h,[(0,o.Wm)($e),(0,o.kq)("",!0)])]),e.doc_fetch_error?((0,o.wg)(),(0,o.iD)("div",ke,[(0,o.Wm)(ot)])):((0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("div",p,[(0,o.Wm)(tt,{limits:[30,80],modelValue:e.imageFieldSplitter,"onUpdate:modelValue":[t[15]||(t[15]=t=>e.imageFieldSplitter=t),t[16]||(t[16]=t=>e.splitterChanged())],class:"medi-right-content-height"},{before:(0,o.w5)((()=>[(0,o._)("div",g,[(0,o._)("div",_,[e.hasApiData()?((0,o.wg)(),(0,o.j4)(He,{key:0,ref:"fieldsView",page:e.page,isPanelSection:!1,renderOpenWindoIcon:!0,onGetImageDetails:e.getImageDetails,onSetSplitterModel:e.setSplitterModel,onHandleScroll:e.removeOverlayandLines,onShowConnectionFromField:e.showConnectionFromField,onRemoveOldMapiingsAndDrawNew:e.removeOldMapiingsAndDrawNew,onEnableOrDisableExportButton:e.enableOrDisableExportButton},null,8,["page","onGetImageDetails","onSetSplitterModel","onHandleScroll","onShowConnectionFromField","onRemoveOldMapiingsAndDrawNew","onEnableOrDisableExportButton"])):(0,o.kq)("",!0)])])])),after:(0,o.w5)((()=>[(0,o.Wm)(Ue,{onResize:e.onResize,debounce:0},null,8,["onResize"]),(0,o._)("div",w,[(0,o._)("div",f,[(0,o._)("div",v,[(0,o._)("div",y,[(0,o._)("div",b,(0,s.zw)(e.record.filename),1)]),(0,o._)("div",k,[(0,o.Wm)(ze,{flat:"",class:"pr-6 pl-6 right",onClick:t[0]||(t[0]=t=>e.togglePagesMenu())},{default:(0,o.w5)((()=>[x,(0,o._)("span",C,(0,s.zw)(e.currentPage())+"/"+(0,s.zw)(e.images.length),1),(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("page_number_text")),1)])),_:1})])),_:1}),(0,o._)("div",D,[(0,o._)("span",null,[(0,o.Wm)(Pe,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])]),e.user_settings["ANNOTATION_MODE"]&&"annotate"==e.field_view_mode?((0,o.wg)(),(0,o.iD)("span",T,[(0,o.Wm)(ze,{flat:"",class:"pr-6 pl-6",onClick:t[1]||(t[1]=t=>e.changeScreenMode())},{default:(0,o.w5)((()=>[(0,o._)("img",{width:"24",height:"24",src:0==this.doc_annotations.length?"annotation/annotation_icon.svg":"annotation/annotation_icon_mark.svg"},null,8,E),(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("annotation.deactivate_mode")),1)])),_:1})])),_:1})])):(0,o.kq)("",!0),e.user_settings["ANNOTATION_MODE"]&&"validate"==e.field_view_mode?((0,o.wg)(),(0,o.iD)("span",W,[(0,o.Wm)(ze,{flat:"",class:"pr-6 pl-6",onClick:t[2]||(t[2]=t=>e.changeScreenMode())},{default:(0,o.w5)((()=>[(0,o._)("img",{width:"24",height:"24",src:0==this.doc_annotations.length?"annotation/annotation_icon.svg":"annotation/annotation_icon_mark.svg"},null,8,S),(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("annotation.activate_mode")),1)])),_:1})])),_:1})])):(0,o.kq)("",!0),e.user_settings["DUAL_MONITOR_MODE_SETTING"]?((0,o.wg)(),(0,o.j4)(ze,{key:2,flat:"",class:(0,s.C_)(["pr-6 pl-6",e.pdf_in_window?"bg-grey-4":""]),onClick:e.selectBetweenMonitor},{default:(0,o.w5)((()=>[L,(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("medi.new_window")),1)])),_:1})])),_:1},8,["class","onClick"])):(0,o.kq)("",!0),(0,o.Wm)(ze,{flat:"",class:"pr-6 pl-6",onClick:t[3]||(t[3]=t=>e.toggleSupportMenu())},{default:(0,o.w5)((()=>[I,(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.support.create_ticket")),1)])),_:1})])),_:1}),(0,o.Wm)(ze,{flat:"",class:"pr-6 pl-6",onClick:e.zoomIn},{default:(0,o.w5)((()=>[V,(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("zoom_in")),1)])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(ze,{flat:"",class:"pr-6 pl-6",onClick:e.zoomOut},{default:(0,o.w5)((()=>[q,(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[O])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(ze,{flat:"",class:"pr-6 pl-6",id:"glassBtn",onClick:e.initiateMagnifyGlass},{default:(0,o.w5)((()=>[A,(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("pages.screen2a.magnify")),1)])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(Ne,{isDashboard:!1,docId:e.docId,onSetImages:e.setImage},null,8,["docId","onSetImages"]),e.show_all_menu_btns?((0,o.wg)(),(0,o.iD)("span",F,[(0,o._)("span",null,[(0,o.Wm)(Qe)]),!0===e.is_admin?((0,o.wg)(),(0,o.j4)(ze,{key:0,flat:"",id:"split_document",class:"float-right pr-6 pl-6",onClick:e.displaySplitDocumentView,size:"14px"},{default:(0,o.w5)((()=>[R,(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("split_document_btn_tooltip")),1)])),_:1})])),_:1},8,["onClick"])):(0,o.kq)("",!0),!0===e.is_admin?((0,o.wg)(),(0,o.j4)(ze,{key:1,flat:"",class:"float-right pr-6 pl-6",size:"14px",onClick:t[4]||(t[4]=t=>e.goToLayoutTemplate())},{default:(0,o.w5)((()=>[M,(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[Z])),_:1})])),_:1})):(0,o.kq)("",!0),!0===e.is_admin?((0,o.wg)(),(0,o.j4)(ze,{key:2,flat:"",class:"float-right pr-6 pl-6",size:"14px",onClick:e.viewOCRDocument},{default:(0,o.w5)((()=>[z,(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("ocr_view")),1)])),_:1})])),_:1},8,["onClick"])):(0,o.kq)("",!0),!0===e.is_debug?((0,o.wg)(),(0,o.j4)(ze,{key:3,flat:"",icon:"adb",class:"p-4",size:"14px",onClick:t[5]||(t[5]=t=>e.enableOrDisableExportButton(!0))},{default:(0,o.w5)((()=>[(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[$])),_:1})])),_:1})):(0,o.kq)("",!0),"INVOICE"==e.docType?((0,o.wg)(),(0,o.iD)("span",H,[(0,o.Wm)(ze,{flat:"",id:"improve_document",class:"float-right pr-6 pl-6 btn-color",onClick:t[6]||(t[6]=t=>e.improveDocuments()),to:"/dashboard"},{default:(0,o.w5)((()=>[U,(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("improve_document_btn_tooltip")),1)])),_:1})])),_:1}),(0,o.Wm)(ze,{flat:"",id:"document_flow","data-cy":"docflow",class:"pr-6 pl-6",onClick:t[7]||(t[7]=t=>e.toFlowScreen(this.$route.params.id))},{default:(0,o.w5)((()=>[B,(0,o.Wm)(Be,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("document_flow")),1)])),_:1})])),_:1})])):(0,o.kq)("",!0)])):(0,o.kq)("",!0),(0,o._)("span",null,[(0,o.Wm)(je,{onSetApiData:e.setApiData},null,8,["onSetApiData"])]),e.show_all_menu_btns?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(Xe,{key:4,modelValue:e.dropdownModel,"onUpdate:modelValue":t[11]||(t[11]=t=>e.dropdownModel=t),"dropdown-icon":e.dropdownModel?"close":"more_vert",rounded:"",fab:!0,padding:"xs",class:"text-black q-mr-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(Je,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Qe),!0===e.is_admin?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ye,{key:0,clickable:"",onClick:e.displaySplitDocumentView},{default:(0,o.w5)((()=>[(0,o.Wm)(Ke,{avatar:""},{default:(0,o.w5)((()=>[P])),_:1}),(0,o.Wm)(Ke,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("split_document_btn_tooltip")),1)])),_:1})])),_:1})])),_:1},8,["onClick"])),[[_t]]):(0,o.kq)("",!0),!0===e.is_admin?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ye,{key:1,clickable:"",onClick:t[8]||(t[8]=t=>e.goToLayoutTemplate())},{default:(0,o.w5)((()=>[(0,o.Wm)(Ke,{avatar:""},{default:(0,o.w5)((()=>[N])),_:1}),(0,o.Wm)(Ke,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ge,null,{default:(0,o.w5)((()=>[Q])),_:1})])),_:1})])),_:1})),[[_t]]):(0,o.kq)("",!0),!0===e.is_admin?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ye,{key:2,clickable:"",onClick:e.viewOCRDocument},{default:(0,o.w5)((()=>[(0,o.Wm)(Ke,{avatar:""},{default:(0,o.w5)((()=>[j])),_:1}),(0,o.Wm)(Ke,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("ocr_view")),1)])),_:1})])),_:1})])),_:1},8,["onClick"])),[[_t]]):(0,o.kq)("",!0),!0===e.is_admin?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ye,{key:3,clickable:"",onClick:e.displaySplitDocumentView},{default:(0,o.w5)((()=>[(0,o.Wm)(Ke,{avatar:""},{default:(0,o.w5)((()=>[K])),_:1}),(0,o.Wm)(Ke,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("split_document_btn_tooltip")),1)])),_:1})])),_:1})])),_:1},8,["onClick"])),[[_t]]):(0,o.kq)("",!0),!0===e.is_debug?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ye,{key:4,clickable:"",onClick:t[9]||(t[9]=t=>e.enableOrDisableExportButton(!0))},{default:(0,o.w5)((()=>[(0,o.Wm)(Ke,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Ze,{name:"adb"})])),_:1}),(0,o.Wm)(Ke,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ge,null,{default:(0,o.w5)((()=>[G])),_:1}),(0,o.Wm)(Ge,{caption:""},{default:(0,o.w5)((()=>[Y])),_:1})])),_:1})])),_:1})),[[_t]]):(0,o.kq)("",!0),"INVOICE"==e.docType?((0,o.wg)(),(0,o.iD)("span",J,[(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ye,{id:"improve_document",clickable:"",onClick:e.improveDocuments,to:"/dashboard"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ke,{avatar:""},{default:(0,o.w5)((()=>[X])),_:1}),(0,o.Wm)(Ke,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("improve_document_btn_tooltip")),1)])),_:1})])),_:1})])),_:1},8,["onClick"])),[[_t]]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ye,{id:"document_flow","data-cy":"docflow",clickable:"",onClick:t[10]||(t[10]=t=>e.toFlowScreen(this.$route.params.id))},{default:(0,o.w5)((()=>[(0,o.Wm)(Ke,{avatar:""},{default:(0,o.w5)((()=>[ee])),_:1}),(0,o.Wm)(Ke,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ge,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("document_flow")),1)])),_:1})])),_:1})])),_:1})),[[_t]])])):(0,o.kq)("",!0)])),_:1})])),_:1},8,["modelValue","dropdown-icon"]))])])])]),(0,o._)("div",te,[(0,o._)("div",ie,[(0,o.Wm)(tt,{horizontal:"",limits:[0,100],disable:!e.isExtenedPanel,modelValue:e.splitterModel,"onUpdate:modelValue":[t[14]||(t[14]=t=>e.splitterModel=t),e.removeOverlayandLines],class:"scroll-area-height-img","after-class":(e.isExtenedPanel,"q-pa-sm"),"before-class":"q-pa-sm img-magnifier-container","separator-class":(e.isExtenedPanel,"q-ma-sm")},{before:(0,o.w5)((()=>[oe,"annotate"==e.field_view_mode?((0,o.wg)(),(0,o.j4)(et,{key:0,ref:"child_comp",enableEditing:e.enable_editing,cropUrl:e.image,width:e.imageWidth,selectFont:e.selectFont,selectFontSize:e.selectFontSize,selectColor:e.selectColor},null,8,["enableEditing","cropUrl","width","selectFont","selectFontSize","selectColor"])):(0,o.kq)("",!0),(0,o._)("div",se,[(0,o._)("img",{class:"screenshot",src:e.image,width:e.imageWidth,id:"screenshot",ref:"screenshot",draggable:"false",onLoad:t[12]||(t[12]=t=>{e.imageLoaded=!0,e.getImageDetails()})},null,40,ne),((0,o.wg)(),(0,o.iD)("svg",{width:e.imageWidth,height:e.imageHeight,viewBox:e.viewBox,id:"draw",ref:"draw",xmlns:"http://www.w3.org/2000/svg",style:{height:"auto","border-bottom":"5px dotted"}},[(0,o._)("rect",ae,null,512),(0,o._)("g",re,null,512)],8,le))])])),separator:(0,o.w5)((()=>[(0,o.Wm)(ze,{disable:!e.isExtenedPanel,round:"",size:"xs",icon:"swap_vert",class:"text-grey-6 z-index-1",onClick:t[13]||(t[13]=t=>e.toggleSplitter())},null,8,["disable"])])),after:(0,o.w5)((()=>[e.renderComponent&&e.hasApiData()?((0,o.wg)(),(0,o.iD)("div",de,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.formLayout,((t,i)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:`div-${i}`},[!0===t.is_panel_section_group?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,s.C_)(["display-inline-block",e.getBorderOfElement(t,e.formBuilderConfigModel)]),style:(0,s.j5)("width:"+e.getElementWidth(t)+"%")},[t.title?((0,o.wg)(),(0,o.iD)("div",ce,[(0,o._)("div",ue,(0,s.zw)(t.title),1)])):(0,o.kq)("",!0),(0,o._)("div",he,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.rows,((t,n)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:`div-${n}`},[e.isFieldHidden(t)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:0,class:"q-pa-sm",style:(0,s.j5)("width:"+e.getElementWidth(t)+"%")},[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.fieldType),{currentField:t,isReadOnly:e.isReadOnly,fieldName:t.name,groupIndex:i,onUpdateModel:e.$refs["fieldsView"].updateModel,onInputClicked:e.$refs["fieldsView"].showConnectionFromField,onInputValueChanges:e.$refs["fieldsView"].onInputValueChanges,onApplyFuzzySearch:e.$refs["fieldsView"].applyFuzzySearchWrapper},null,8,["currentField","isReadOnly","fieldName","groupIndex","onUpdateModel","onInputClicked","onInputValueChanges","onApplyFuzzySearch"]))],4))],64)))),128))])],6)):(0,o.kq)("",!0)],64)))),128))])):(0,o.kq)("",!0)])),_:1},8,["disable","modelValue","after-class","separator-class","onUpdate:modelValue"])])])])])),_:1},8,["modelValue"])],512),(0,o._)("div",me,["pages"==e.current_menu_data?((0,o.wg)(),(0,o.iD)("div",pe,[(0,o._)("div",ge,[(0,o._)("span",_e,(0,s.zw)(e.$t("pages.screen2a.pages")),1)]),(0,o._)("div",we,[(0,o._)("div",fe,(0,s.zw)(e.currentPage())+"/"+(0,s.zw)(e.images.length),1)]),(0,o._)("div",ve,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.images,((i,n)=>((0,o.wg)(),(0,o.iD)("img",{"data-id":n,key:n,src:e.baseUrl+"/"+i.path,class:(0,s.C_)(["q-pa-xs shadow-5 max-width-120 q-ma-sm cursor-pointer",n===e.page-1?"active":""]),style:{height:"160px"},onClick:t[17]||(t[17]=(...t)=>e.imageclicked&&e.imageclicked(...t))},null,10,ye)))),128))])])):(0,o.kq)("",!0),"support"==e.current_menu_data?((0,o.wg)(),(0,o.iD)("div",be,[(0,o.Wm)(it)])):(0,o.kq)("",!0)],512)])),(0,o.Wm)(st),(0,o.Wm)(rt,{modelValue:e.showDialog,"onUpdate:modelValue":t[19]||(t[19]=t=>e.showDialog=t)},{default:(0,o.w5)((()=>[(0,o.Wm)(at,null,{default:(0,o.w5)((()=>[(0,o.Wm)(lt,{class:"row items-center q-pb-none"},{default:(0,o.w5)((()=>[xe,(0,o.Wm)(nt),(0,o.wy)((0,o.Wm)(ze,{icon:"close",flat:"",round:"",dense:""},null,512),[[_t]])])),_:1}),(0,o.Wm)(lt,null,{default:(0,o.w5)((()=>[Ce])),_:1}),(0,o._)("div",De,[(0,o.Wm)(nt),(0,o.Wm)(ze,{flat:"",color:"primary",label:"Contact us",onClick:t[18]||(t[18]=t=>e.goFormular())})])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(rt,{modelValue:e.split_document,"onUpdate:modelValue":t[20]||(t[20]=t=>e.split_document=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(dt)])),_:1},8,["modelValue"]),(0,o._)("div",Te,[(0,o.Wm)(rt,{modelValue:e.textConfirmation,"onUpdate:modelValue":t[25]||(t[25]=t=>e.textConfirmation=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(at,{style:{width:"440px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(ut,{class:"secondary-toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(ct,null,{default:(0,o.w5)((()=>[(0,o._)("span",Ee,(0,s.zw)(e.$t("pages.screen2a.confirmation")),1)])),_:1}),(0,o.wy)((0,o.Wm)(ze,{flat:"",round:"",dense:"",icon:"close"},null,512),[[_t]])])),_:1}),(0,o.Wm)(lt,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.textConfirmationMsg),1)])),_:1}),(0,o.Wm)(ht,{align:"right",class:"text-teal"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(ze,{color:"grey",label:e.$t("pages.screen2a.cancel"),"data-cy":"cancel",onClick:t[21]||(t[21]=t=>e.cancelOverlayDiv())},null,8,["label"]),[[_t]]),(0,o.wy)((0,o.Wm)(ze,{color:"grey","data-cy":"no",label:"Don't ask again",onClick:t[22]||(t[22]=t=>e.askLater())},null,512),[[_t]]),(0,o.wy)((0,o.Wm)(ze,{color:"grey","data-cy":"no",label:e.$t("re_select"),onClick:t[23]||(t[23]=t=>e.enableDrawing(!0))},null,8,["label"]),[[_t]]),(0,o.wy)((0,o.Wm)(ze,{color:"primary","data-cy":"yes",label:e.$t("pages.screen2a.yes"),onClick:t[24]||(t[24]=t=>e.updateFieldData())},null,8,["label"]),[[_t]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(rt,{modelValue:e.saveInstant,"onUpdate:modelValue":t[26]||(t[26]=t=>e.saveInstant=t)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.updateFieldData()),1)])),_:1},8,["modelValue"])]),(0,o.Wm)(rt,{modelValue:e.selectMonitor,"onUpdate:modelValue":t[29]||(t[29]=t=>e.selectMonitor=t),position:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(at,{style:{width:"600px"}},{default:(0,o.w5)((()=>[(0,o._)("div",We,[(0,o._)("div",{style:{padding:"10px","text-align":"center"},class:"col-sm-6 col-md-6 col-lg-6 cursor-pointer",onClick:t[27]||(t[27]=t=>e.openComponentInSeparateWindow(0))},[(0,o.Wm)(lt,{class:"screenhover",style:{border:"1px solid #d8d8d8","border-radius":"5px","background-color":"#ffffff"}},{default:(0,o.w5)((()=>[(0,o._)("div",Se,[(0,o.Wm)(Ze,{name:"desktop_windows",size:"xl",style:{"font-size":"150px"}})]),Le])),_:1})]),(0,o._)("div",{style:{padding:"10px","text-align":"center"},class:"col-sm-6 col-md-6 col-lg-6 cursor-pointer",onClick:t[28]||(t[28]=t=>e.openComponentInSeparateWindow(1))},[(0,o.Wm)(lt,{class:"screenhover",style:{border:"1px solid #d8d8d8","border-radius":"5px","background-color":"#ffffff"}},{default:(0,o.w5)((()=>[(0,o._)("div",Ie,[(0,o.Wm)(Ze,{name:"desktop_windows",size:"xl",style:{"font-size":"150px"}})]),Ve])),_:1})])])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(rt,{modelValue:e.annotation_text_popup,"onUpdate:modelValue":t[33]||(t[33]=t=>e.annotation_text_popup=t),onKeydown:t[34]||(t[34]=(0,n.D2)((t=>e.annotation_text_popup=!1),["esc"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(at,null,{default:(0,o.w5)((()=>[(0,o.Wm)(lt,null,{default:(0,o.w5)((()=>[(0,o.Wm)(mt,{modelValue:e.annotation_text,"onUpdate:modelValue":t[30]||(t[30]=t=>e.annotation_text=t),label:"Annotation Text",filled:"",type:"textarea",rows:3,"max-height":100,counter:100,onKeydown:t[31]||(t[31]=(0,n.D2)((t=>e.marqueeAddAnnotation()),["enter"]))},null,8,["modelValue"])])),_:1}),(0,o.Wm)(ht,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(ze,{flat:"",label:"Cancel"},null,512),[[_t]]),(0,o.Wm)(ze,{flat:"",label:"Save",color:"primary",onClick:t[32]||(t[32]=t=>e.marqueeAddAnnotation())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(rt,{modelValue:e.showFontMenu,"onUpdate:modelValue":t[43]||(t[43]=t=>e.showFontMenu=t),onKeydown:t[44]||(t[44]=(0,n.D2)((t=>e.showFontMenu=!1),["esc"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(at,null,{default:(0,o.w5)((()=>[(0,o.Wm)(lt,null,{default:(0,o.w5)((()=>[(0,o.Wm)(mt,{filled:"",modelValue:e.selectFont,"onUpdate:modelValue":[t[35]||(t[35]=t=>e.selectFont=t),t[36]||(t[36]=t=>e.updateValue("font",e.selectFont))],label:e.$t("annotation.font"),type:"text"},null,8,["modelValue","label"]),qe,(0,o.Wm)(mt,{filled:"",modelValue:e.selectFontSize,"onUpdate:modelValue":[t[37]||(t[37]=t=>e.selectFontSize=t),t[38]||(t[38]=t=>e.updateValue("size",e.selectFontSize))],label:e.$t("annotation.fontsize"),type:"number"},null,8,["modelValue","label"]),Oe,(0,o._)("div",null,[(0,o.Wm)(mt,{outlined:"",dense:"",standout:"",modelValue:e.selectColor,"onUpdate:modelValue":[t[41]||(t[41]=t=>e.selectColor=t),t[42]||(t[42]=t=>e.updateValue("color",e.selectColor))],rules:["hexColor"],label:e.$t("annotation.color")},{append:(0,o.w5)((()=>[(0,o.Wm)(Ze,{name:"colorize",class:"cursor-pointer",color:{"background-color":e.selectColor}},{default:(0,o.w5)((()=>[(0,o.Wm)(gt,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(pt,{modelValue:e.selectColor,"onUpdate:modelValue":[t[39]||(t[39]=t=>e.selectColor=t),t[40]||(t[40]=t=>e.updateValue("color",e.selectColor))],"default-view":"palette","no-header-tabs":""},null,8,["modelValue"])])),_:1})])),_:1},8,["color"])])),_:1},8,["modelValue","label"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var Fe=i(30052),Re=i.n(Fe),Me=i(10321),Ze=i(28741),ze=i(77378),$e=i(98303),He=i(61959),Ue=i(80579),Be=i(78564),Pe=i(72113),Ne=i(30872),Qe=i(85985),je=i(45401),Ke=i(37295);const Ge={methods:{getBorderOfElement(e,t){let i="";return t&&t.hasOwnProperty(e.name)?(i=t[e.name].right_border?" border-right":"",i+=t[e.name].bottom_border?" border-bottom":"",i):(i=e.right_border?" border-right":"",i+=e.bottom_border?" border-bottom":"",i)}}};var Ye=i(55276),Je=i(63307),Xe=i(54268),et=i(5029),tt=i(97570),it=i(48825),ot=i(7153),st=i(12471),nt=i(91777),lt=i(88469),at=i(35352),rt=i(88432);const dt={class:"row text-center q-pt-xs q-pb-xs slider-bg"},ct=(0,o._)("div",{class:"col-xs-3 col-sm-3 col-md-3 col-lg-3"}," UNRELIABLE ",-1),ut=(0,o._)("div",{class:"col-xs-3 col-sm-3 col-md-3 col-lg-3"}," AVERAGE ",-1),ht=(0,o._)("div",{class:"col-xs-3 col-sm-3 col-md-3 col-lg-3"}," RELIABLE ",-1),mt=(0,o._)("div",{class:"col-xs-3 col-sm-3 col-md-3 col-lg-3"}," PERFECT ",-1);function pt(e,t,i,n,l,a){return(0,o.wg)(),(0,o.iD)("div",dt,[(0,o._)("div",{class:"scale",style:(0,s.j5)("left:"+e.gaugeValue+"%")},null,4),ct,ut,ht,mt])}const gt=(0,o.aZ)({el:"#ai_severity_level",data(){return{gaugeValue:(0,He.iH)(5)}},mounted:function(){document.addEventListener("TE_gauge_calculation",this.TEGaugeCalculation),document.addEventListener("FV_gauge_calculation",this.FVGaugeCalculation)},unmounted:function(){document.removeEventListener("TE_gauge_calculation",this.TEGaugeCalculation),document.removeEventListener("FV_gauge_calculation",this.FVGaugeCalculation)},methods:{TEGaugeCalculation(e){e&&e.detail&&e.detail.hasOwnProperty("min_table_effective_weight")&&this.calculateGaugeValue(e.detail.min_table_effective_weight)},FVGaugeCalculation(e){e&&e.detail&&e.detail.hasOwnProperty("mean_effective_weight")&&this.calculateGaugeValue(e.detail.mean_effective_weight)},calculateGaugeValue(e){this.gaugeValue=Math.round(10*e),this.gaugeValue<5&&(this.gaugeValue=5)}},setup(){return{}}});var _t=i(74260);const wt=(0,_t.Z)(gt,[["render",pt]]),ft=wt;var vt=i(59751),yt=i(110),bt=i(57765),kt=i(16839),xt=i(93426),Ct=i(65864),Dt=i(49566);const Tt={class:"secondary-c-text text-h6 text-weight-bold"},Et={class:"q-mt-md"},Wt={class:"q-mt-md"},St={class:"q-mt-md"},Lt={class:"q-mt-md"},It={class:"q-mt-md"},Vt={class:"q-mt-md"},qt={id:"screen-button",class:"text-center"},Ot=(0,o._)("div",{id:"display"},null,-1),At={class:"q-mt-md"};function Ft(e,t,i,n,l,a){const r=(0,o.up)("q-card-section"),d=(0,o.up)("q-seperator"),c=(0,o.up)("q-input"),u=(0,o.up)("q-select"),h=(0,o.up)("q-spinner-hourglass"),m=(0,o.up)("q-btn"),p=(0,o.up)("q-icon"),g=(0,o.up)("q-file"),_=(0,o.up)("q-card-actions"),w=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(w,{flat:"",style:{width:"240px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"row justify-center q-pl-md q-pr-md q-pt-md"},{default:(0,o.w5)((()=>[(0,o._)("span",Tt,(0,s.zw)(e.$t("pages.support.support_ticket")),1)])),_:1}),(0,o.Wm)(d),(0,o.Wm)(r,{class:"q-pa-md"},{default:(0,o.w5)((()=>[(0,o._)("div",Et,[(0,o.Wm)(c,{dense:"",outlined:"",modelValue:e.supportTicket.fullname,"onUpdate:modelValue":t[0]||(t[0]=t=>e.supportTicket.fullname=t),label:e.$t("name")},null,8,["modelValue","label"])]),(0,o._)("div",Wt,[(0,o.Wm)(c,{dense:"",outlined:"",modelValue:e.supportTicket.email,"onUpdate:modelValue":t[1]||(t[1]=t=>e.supportTicket.email=t),label:e.$t("email")},null,8,["modelValue","label"])]),(0,o._)("div",St,[(0,o.Wm)(c,{dense:"",outlined:"",modelValue:e.supportTicket.subject,"onUpdate:modelValue":t[2]||(t[2]=t=>e.supportTicket.subject=t),label:e.$t("pages.import.emaillog.subject")},null,8,["modelValue","label"])]),(0,o._)("div",Lt,[(0,o.Wm)(u,{dense:"",outlined:"",options:e.priorityOptions,modelValue:e.supportTicket.priority,"onUpdate:modelValue":t[3]||(t[3]=t=>e.supportTicket.priority=t),label:e.$t("priority")},null,8,["options","modelValue","label"])]),(0,o._)("div",It,[(0,o.Wm)(c,{dense:"",outlined:"",modelValue:e.supportTicket.message,"onUpdate:modelValue":t[4]||(t[4]=t=>e.supportTicket.message=t),label:e.$t("pages.support.message"),type:"textarea"},null,8,["modelValue","label"])]),(0,o._)("div",Vt,[(0,o._)("div",qt,[(0,o.Wm)(m,{loading:e.loading,class:"on-right full-width",outline:"",color:"primary",unelevated:"",label:e.$t("screenshot"),onClick:t[5]||(t[5]=t=>e.takeScreenshot()),style:{width:"100px"}},{loading:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"on-left"})])),_:1},8,["loading","label"])]),Ot]),(0,o._)("div",At,[(0,o.Wm)(g,{outlined:"",label:e.$t("pages.integration_settings.upload_file"),modelValue:e.supportTicket.file,"onUpdate:modelValue":t[6]||(t[6]=t=>e.supportTicket.file=t)},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"attach_file"})])),_:1},8,["label","modelValue"])])])),_:1}),(0,o.Wm)(_,{align:"center",class:"q-pb-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"on-right",color:"primary",unelevated:"",label:e.$t("pages.support.send"),onClick:e.sendSupportTicket,style:{width:"100px"}},null,8,["label","onClick"])])),_:1})])),_:1})}var Rt=i(48140),Mt=i.n(Rt),Zt=i(53371),zt=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,n){function l(e){try{r(o.next(e))}catch(t){n(t)}}function a(e){try{r(o["throw"](e))}catch(t){n(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,a)}r((o=o.apply(e,t||[])).next())}))};const $t=(0,o.aZ)({mixins:[je.Z,ze.Z],setup(){return{loading:(0,He.iH)(!1),supportDialog:(0,He.iH)(!1),priorityOptions:(0,He.iH)([{label:Zt.i18n.t("pages.support.very_high"),value:"Very High"},{label:Zt.i18n.t("pages.support.high"),value:"High"},{label:Zt.i18n.t("pages.support.medium"),value:"Medium"},{label:Zt.i18n.t("pages.support.low"),value:"Low"}]),supportTicket:(0,He.iH)({email:"",message:"",subject:"",screenshot:"",file:"",priority:{label:Zt.i18n.t("pages.support.medium"),value:"Medium"}})}},methods:{takeScreenshot(){this.loading=!0,Mt()(document.body,{allowTaint:!0,useCORS:!0}).then((e=>{var t,i,o,s=e.toDataURL();fetch(s).then((e=>e.blob())).then((e=>{const t=new File([e],"Screenshot.png",{type:"image/png"});this.supportTicket.screenshot=t})),e.style.width="208px",e.style.height="144px",this.loading=!1,null===(t=document.getElementById("screen-button"))||void 0===t||t.removeChild(null===(i=document.getElementById("screen-button"))||void 0===i?void 0:i.firstChild);const n=document.createElement("span");n.innerHTML=Zt.i18n.t("pages.support.screenshot_taken"),n.style.color="green",null===(o=document.getElementById("screen-button"))||void 0===o||o.appendChild(n)}))},checkArrayForEmptyString(){return""===this.supportTicket.email||""===this.supportTicket.message||""===this.supportTicket.fullname||""===this.supportTicket.subject},checkStringIfValidEmail(){return this.supportTicket.email.includes("@")},buildRequestBody(){const e=new FormData;return e.append("fullname",this.supportTicket.fullname),e.append("customer_email",this.supportTicket.email),e.append("subject",this.supportTicket.subject),e.append("priority",this.supportTicket.priority.value),e.append("body",this.supportTicket.message+". DocID: "+this.$route.params.id),""!==this.supportTicket.screenshot&&e.append("screenshot",this.supportTicket.screenshot),""!==this.supportTicket.file&&e.append("attachment",this.supportTicket.file),e},sendSupportTicket(){return this.showLoading(),this.checkArrayForEmptyString()?(this.showErrorToast(this.$t("directscan.fill_all_fields")),void this.hideLoading()):this.checkStringIfValidEmail()?void this.makeApiCall():(this.showErrorToast(this.$t("pages.messages.INVALID_EMAIL")),void this.hideLoading())},makeApiCall(){return zt(this,void 0,void 0,(function*(){const e=this.buildRequestBody();return yield Ue.yZ.create_ticket(e).then((e=>{this.hideLoading(),this.showSuccessToast(this.$t("success"))})).catch((e=>{this.hideLoading(),e.message.error.includes("customer")?this.showErrorToast(this.$t("no_email_found")+" "+this.supportTicket.email):this.showErrorToast(this.$t("errors.INVALID_AUTHORIZATION_CODE"))}))}))}}});var Ht=i(10151),Ut=i(25589),Bt=i(64689),Pt=i(72448),Nt=i(2165),Qt=i(23282),jt=i(64974),Kt=i(24554),Gt=i(99367),Yt=i(7518),Jt=i.n(Yt);const Xt=(0,_t.Z)($t,[["render",Ft]]),ei=Xt;Jt()($t,"components",{QCard:Ht.Z,QCardSection:Ut.Z,QInput:Bt.Z,QSelect:Pt.Z,QBtn:Nt.Z,QSpinnerHourglass:Qt.Z,QFile:jt.Z,QIcon:Kt.Z,QCardActions:Gt.Z});var ti=i(84474),ii=i(84815),oi=i(29938),si=i(43432);document.querySelector.bind(document);const ni={methods:{isMultiScreen(){return!!window.screen.isExtended},async openWindowOnSelectedMonitor(e,t){if(window.screen.isExtended){const i=await window.getScreenDetails(),o=i.screens[e];this.external_window=window.open(t,"_blank",`left=${o.availLeft},top=${o.availTop},width=${o.availWidth},height=${o.availHeight}`)}},async getMultiScreenDetails(){if(window.screen.isExtended){const e=await window.getScreenDetails(),t=e.screens.find((e=>e.isPrimary)),i=e.screens.find((e=>e!==t));window.open("https://www.google.com/","_blank",`left=${i.availLeft},top=${i.availTop},width=${i.availWidth},height=${i.availHeight}`)}}}};var li=i(61982),ai=i(41891),ri=i(22879),di=i(60727),ci=i(9062),ui=i(40386),hi=i(39180),mi=i(23911),pi=i(71814),gi=i(49836),_i=i(56040),wi=i(26468),fi=i(87344),vi=i(12121),yi=i(35627),bi=i(34030);const ki=(0,o._)("img",{width:"24",height:"24",src:"keyboard_dark_2.svg"},null,-1),xi=(0,o._)("img",{width:"24",height:"24",src:"keyboard_dark_2.svg"},null,-1);function Ci(e,t,i,l,a,r){const d=(0,o.up)("q-tooltip"),c=(0,o.up)("q-btn"),u=(0,o.up)("q-item-section"),h=(0,o.up)("q-item-label"),m=(0,o.up)("q-item"),p=(0,o.up)("keyboardShortcutInfo"),g=(0,o.up)("q-card-actions"),_=(0,o.up)("q-card"),w=(0,o.up)("q-dialog"),f=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.show_all_menu_btns?((0,o.wg)(),(0,o.j4)(c,{key:0,flat:"",class:"pr-6 pl-6",onClick:e.buttonClick},{default:(0,o.w5)((()=>[ki,(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("keyboard_shortcut")),1)])),_:1})])),_:1},8,["onClick"])):(0,o.wy)(((0,o.wg)(),(0,o.j4)(m,{key:1,clickable:"",onClick:e.buttonClick},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{avatar:""},{default:(0,o.w5)((()=>[xi])),_:1}),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("keyboard_shortcut")),1)])),_:1})])),_:1})])),_:1},8,["onClick"])),[[f]]),(0,o.Wm)(w,{modelValue:e.showKeyboardShortcuts,"onUpdate:modelValue":t[1]||(t[1]=t=>e.showKeyboardShortcuts=t),onKeydown:t[2]||(t[2]=(0,n.D2)((t=>e.showKeyboardShortcuts=!1),["esc"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p),(0,o.Wm)(g,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{flat:"",color:"primary",label:e.$t("conclude"),class:"float-right",style:{"font-weight":"900"},onClick:t[0]||(t[0]=t=>e.showKeyboardShortcuts=!1)},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}const Di={class:"text-weight-medium text-h6"},Ti={class:"highlighted-back"},Ei={class:"text-left",style:{"font-weight":"bold"}},Wi={class:"text-left",style:{"font-weight":"900"}},Si=(0,o._)("tr",null,[(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Moves to next fields "),(0,o._)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,o._)("span",{class:"shortcut-Key-box"}," Enter ")])],-1),Li=(0,o._)("tr",null,[(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Validate & jump to next red-marked field "),(0,o._)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,o._)("span",{class:"shortcut-Key-box q-mr-sm"}," TAB ")])],-1),Ii={class:"text-left",style:{"font-weight":"bold"}},Vi={class:"text-left",style:{"font-weight":"900"}},qi=["src"],Oi=(0,o.Uk)(" + "),Ai=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," k ",-1),Fi=(0,o._)("tr",null,[(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Checkbox check/uncheck "),(0,o._)("td",{class:"text-left",style:{"font-weight":"900"}},[(0,o._)("span",{class:"shortcut-Key-box"}," Space ")])],-1),Ri=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Moves to next group of fields ",-1),Mi={class:"text-left",style:{"font-weight":"900"}},Zi=["src"],zi=(0,o.Uk)(" + "),$i=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," G ",-1),Hi=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Move To first field of first group ",-1),Ui={class:"text-left",style:{"font-weight":"900"}},Bi=["src"],Pi=(0,o.Uk)(" + "),Ni=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," F ",-1),Qi=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Save document ",-1),ji={class:"text-left",style:{"font-weight":"900"}},Ki=["src"],Gi=(0,o.Uk)(" + "),Yi=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," S ",-1),Ji=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Reject document ",-1),Xi={class:"text-left",style:{"font-weight":"900"}},eo=["src"],to=(0,o.Uk)(" + "),io=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," R ",-1),oo=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Export without Sonderwunsch ",-1),so={class:"text-left",style:{"font-weight":"900"}},no=["src"],lo=(0,o.Uk)(" + "),ao=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," E ",-1),ro=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Export with Sonderwunsch ",-1),co={class:"text-left",style:{"font-weight":"900"}},uo=["src"],ho=(0,o.Uk)(" + "),mo=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," W ",-1),po=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," Jump to Table Section ",-1),go={class:"text-left",style:{"font-weight":"900"}},_o=["src"],wo=(0,o.Uk)(" + "),fo=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," T ",-1),vo=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Create new line ",-1),yo={class:"text-left",style:{"font-weight":"900"}},bo=["src"],ko=(0,o.Uk)(" + "),xo=(0,o._)("span",{class:"shortcut-Key-box q-ml-sm"}," plus (+) ",-1),Co=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to Next Column ",-1),Do={class:"text-left"},To=(0,o._)("img",{src:"keyboard-left-arrow.svg"},null,-1),Eo=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to previous Column ",-1),Wo={class:"text-left"},So={class:"q-mr-sm"},Lo=(0,o._)("img",{src:"keyboard-right-arrow.svg"},null,-1),Io=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to above Row ",-1),Vo={class:"text-left"},qo=(0,o._)("img",{src:"keyboard-up-arrow.svg"},null,-1),Oo=(0,o._)("td",{class:"text-left",style:{"font-weight":"bold"}}," (Table) Move to below Row ",-1),Ao={class:"text-left"},Fo=(0,o._)("img",{src:"keyboard-down-arrow.svg"},null,-1),Ro={key:0},Mo={class:"text-left",style:{"font-weight":"bold"}},Zo={class:"text-left",style:{"font-weight":"900"}},zo={class:"shortcut-Key-box q-mr-sm"},$o=(0,o.Uk)(" + "),Ho={class:"shortcut-Key-box q-ml-sm"};function Uo(e,t,i,n,l,a){const r=(0,o.up)("q-card-section"),d=(0,o.up)("q-icon"),c=(0,o.up)("q-markup-table");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o._)("div",Di,(0,s.zw)(e.$t("keyboard_shortcuts")),1)])),_:1}),(0,o.Wm)(r,{class:"v-p-0"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"full-width",style:{overflow:"scroll","max-height":"60vh"},"virtual-scroll":""},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",Ti,[(0,o._)("th",Ei,(0,s.zw)(e.$t("action")),1),(0,o._)("th",Wi,(0,s.zw)(e.$t("keyboard_shortcut")),1)])]),(0,o._)("tbody",null,[Si,Li,(0,o._)("tr",null,[(0,o._)("td",Ii,(0,s.zw)(e.$t("doc2light.descriptions.check_keyboard_shortcut")),1),(0,o._)("td",Vi,[(0,o.Wm)(d,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,qi)])),_:1}),Oi,Ai])]),Fi,(0,o._)("tr",null,[Ri,(0,o._)("td",Mi,[(0,o.Wm)(d,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,Zi)])),_:1}),zi,$i])]),(0,o._)("tr",null,[Hi,(0,o._)("td",Ui,[(0,o.Wm)(d,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,Bi)])),_:1}),Pi,Ni])]),(0,o._)("tr",null,[Qi,(0,o._)("td",ji,[(0,o.Wm)(d,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,Ki)])),_:1}),Gi,Yi])]),(0,o._)("tr",null,[Ji,(0,o._)("td",Xi,[(0,o.Wm)(d,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,eo)])),_:1}),to,io])]),(0,o._)("tr",null,[oo,(0,o._)("td",so,[(0,o.Wm)(d,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,no)])),_:1}),lo,ao])]),(0,o._)("tr",null,[ro,(0,o._)("td",co,[(0,o.Wm)(d,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,uo)])),_:1}),ho,mo])]),(0,o._)("tr",null,[po,(0,o._)("td",go,[(0,o.Wm)(d,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,_o)])),_:1}),wo,fo])]),(0,o._)("tr",null,[vo,(0,o._)("td",yo,[(0,o.Wm)(d,{size:"40px"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.combination_key+".svg"},null,8,bo)])),_:1}),ko,xo])]),(0,o._)("tr",null,[Co,(0,o._)("td",Do,[(0,o.Wm)(d,{size:"36px"},{default:(0,o.w5)((()=>[To])),_:1})])]),(0,o._)("tr",null,[Eo,(0,o._)("td",Wo,[(0,o._)("span",So,[(0,o.Wm)(d,{size:"36px"},{default:(0,o.w5)((()=>[Lo])),_:1})])])]),(0,o._)("tr",null,[Io,(0,o._)("td",Vo,[(0,o.Wm)(d,{size:"36px"},{default:(0,o.w5)((()=>[qo])),_:1})])]),(0,o._)("tr",null,[Oo,(0,o._)("td",Ao,[(0,o.Wm)(d,{size:"36px"},{default:(0,o.w5)((()=>[Fo])),_:1})])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.formLayout,((e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:t},[""!==e.short_cut_key_2&&""!==e.short_cut_key_1?((0,o.wg)(),(0,o.iD)("tr",Ro,[(0,o._)("td",Mo," Move to Group "+(0,s.zw)(e.title),1),(0,o._)("td",Zo,[(0,o._)("span",zo,(0,s.zw)(e.short_cut_key_1),1),$o,(0,o._)("span",Ho,(0,s.zw)(e.short_cut_key_2),1)])])):(0,o.kq)("",!0)],64)))),128))])])),_:1})])),_:1})],64)}var Bo=i(53198);const Po=(0,o.aZ)({el:"#app",mixins:[Bo.Z],props:{},components:{},data(){return{combination_key:""}},mounted:function(){this.combination_key=this.getCombinationKey(null)},setup(){const e=(0,di.nc)(),{formLayout:t}=(0,Me.Jk)(e);return{formLayout:t}}});var No=i(30481);const Qo=(0,_t.Z)(Po,[["render",Uo]]),jo=Qo;Jt()(Po,"components",{QCardSection:Ut.Z,QMarkupTable:No.Z,QIcon:Kt.Z});const Ko=(0,o.aZ)({el:"#app",mixins:[Bo.Z],props:{},components:{keyboardShortcutInfo:jo},mounted:function(){window.addEventListener("keydown",this.keyboardKeyDownEvent)},unmounted:function(){window.removeEventListener("keydown",this.keyboardKeyDownEvent)},methods:{keyboardKeyDownEvent(e){const t=this.isCombinationKey(e);75===e.keyCode&&!0===t&&(e.preventDefault(),this.showKeyboardShortcuts=!0)},buttonClick(){this.showKeyboardShortcuts=!0}},data(){return{}},setup(){const e=(0,di.H_)(),{show_all_menu_btns:t}=(0,Me.Jk)(e);return{show_all_menu_btns:t,showKeyboardShortcuts:(0,He.iH)(!1)}}});var Go=i(5363),Yo=i(83414),Jo=i(52035),Xo=i(2350),es=i(46778),ts=i(60677);const is=(0,_t.Z)(Ko,[["render",Ci]]),os=is;Jt()(Ko,"components",{QBtn:Nt.Z,QTooltip:Go.Z,QItem:Yo.Z,QItemSection:Jo.Z,QItemLabel:Xo.Z,QDialog:es.Z,QCard:Ht.Z,QCardActions:Gt.Z}),Jt()(Ko,"directives",{ClosePopup:ts.Z});var ss=i(89203),ns=i(91949),ls=i(12413),as=function(e,t,i,o){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,n){function l(e){try{r(o.next(e))}catch(t){n(t)}}function a(e){try{r(o["throw"](e))}catch(t){n(t)}}function r(e){e.done?i(e.value):s(e.value).then(l,a)}r((o=o.apply(e,t||[])).next())}))};const rs=document.querySelector.bind(document),ds=(0,o.aZ)({el:"#app",mixins:[ze.Z,Be.Z,je.Z,Ne.Z,Qe.Z,Ke.Z,Ye.Z,Je.Z,nt.Z,si.Z,li.Z,xt.Z,ti.Z,ni,ss.Z,Ge,Ze.Z],components:{Loader:Pe.Z,supportForm:ei,scriptBtn:bt.Z,autoTesting:et.Z,DocumentLock:tt.Z,MessageBanner:lt.Z,SelectionPopup:at.Z,Classification:rt.Z,AISeverityLevel:ft,ImportMultiInvoice:yt.Z,FieldsView:vt["default"],SplitDocument:kt.Z,ErrorDocumentView:Ct.Z,restartClassificationPopup:ri.Z,Label:ci.Z,CheckBox:ui.Z,TextInput:hi.Z,LineItemTable:mi.Z,MultiCheckBox:pi.Z,TableOfCheckboxes:gi.Z,HorizontalSeparator:_i.Z,ExtractedTableTabPanels:fi.Z,timeSpentTimer:bi.Z,keyboardShortcutInfoBtn:os,autoAccountingBtn:wi.Z,InvoiceButtons:vi.Z,AnnotationView:ls.Z,QRCodeExtractedFields:yi.Z},watch:{$route(e,t){if(!e.hasOwnProperty("path")||!t.hasOwnProperty("path"))return;const i=e.path.split("/"),o=t.path.split("/");i.length>2&&o.length>2&&i[1]===o[1]&&this.get_cached_data_id!=this.docId&&window.location.reload()}},data(){return{docId:"",contact:this.$t("pages.screen2a.confirm"),showDialog:!1,showExportDialog:!1,showArticlePage:!1,disableSelectionButton:!0,loading:!1,saveInstant:!1,magnifyGlass:{},allowedDoctypes:ai.rf,format_warning_dismiss:{},excluded_fields:["fields_group"],account_block:"",error_message:"",trigger_document_lock:(0,He.iH)(!1),split_document:(0,He.iH)(!1),headerFabIcon:(0,He.iH)(!1),dropdownModel:(0,He.iH)(!1),imageLoaded:(0,He.iH)(!1),textConfirmation:!1,selectMonitor:(0,He.iH)(!1)}},beforeRouteLeave:function(e,t,i){return as(this,void 0,void 0,(function*(){this.setDataToCache(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.removeMagnifier(),this.removeAllNotifications(),this.external_window&&this.external_window.close(),"function"===typeof this.format_warning_dismiss&&this.format_warning_dismiss(),yield this.releaseDocLock({doc_id:this.record.doc_id}),this.record={},this.page=1,this.resetStoreOnRouteChange(),i()}))},showDialog1:function(){setTimeout((()=>{this.showDialog=!0}),2e3)},beforeMount:function(){this.renderComponent=!1,this.isExtenedPanel=!1},mounted:function(){this.showLoading(),this.connectWebSocket(),this.init(),this.isDebugFlagHandler(),this.is_admin=(0,ns.i5)();let e=this.$route.params.id;this.getDocAnnotations(e),setTimeout((()=>{}),100),this.doc_annotations.length,window.addEventListener("resize",this.windowResize),document.body.addEventListener("click",this.mouseClicked,!0);const t=rs(".img-magnifier-container");t&&t.addEventListener("scroll",this.removeOverlayandLines);const i=rs(".q-splitter__after");i&&i.addEventListener("scroll",this.removeOverlayandLines),document.addEventListener("highlight_table_row",this.highlightTableRowArea),document.addEventListener("refresh_canvas",this.refreshCanvas),window.FieldValidationView=this},unmounted:function(){window.removeEventListener("resize",this.windowResize),window.removeEventListener("keydown",this.keydownEvent),document.removeEventListener("highlight_table_row",this.highlightTableRowArea),document.removeEventListener("removeSelectedAreaOnImage",this.removeSelectedAreaOnImage);const e=rs(".img-magnifier-container");e&&e.removeEventListener("scroll",this.removeOverlayandLines);const t=rs(".q-splitter__after");t&&t.removeEventListener("scroll",this.removeOverlayandLines);try{this.screenshot=rs(".screenshot"),this.screenshot&&(this.screenshot.removeEventListener("dblclick",this.dblClickToSelect),this.screenshot.removeEventListener("pointerdown",this.startDrag))}catch(i){}document.removeEventListener("refresh_canvas",this.refreshCanvas)},methods:{togglePagesMenu(){""==this.current_menu_data?(this.toggleMenu(),this.current_menu_data="pages"):"pages"==this.current_menu_data?(this.toggleMenu(),this.current_menu_data=""):"support"==this.current_menu_data&&(this.current_menu_data="pages")},toggleSupportMenu(){""==this.current_menu_data?(this.toggleMenu(),this.current_menu_data="support"):"support"==this.current_menu_data?(this.toggleMenu(),this.current_menu_data=""):"pages"==this.current_menu_data&&(this.current_menu_data="support")},improveDocuments(){return as(this,void 0,void 0,(function*(){try{if(this.isReadOnly)return;yield Ue.U0.improve_document_quality(this.docId)}catch(e){return this.hideLoading(),void this.showErrorToast("There was an error improving the document")}}))},init(){return as(this,void 0,void 0,(function*(){try{if(this.docId=this.$route.params.id,this.setAppType(),yield this.getOrgSettings(),yield this.getInvoiceDataByDocId(this.docId),!this.record||0===Object.keys(this.record).length||!1===this.record.success||this.doc_fetch_error)return void this.hideLoading();this.handleReadOnly(),this.handleDocLockSubscribe(),this.getSplitterValueFromStorage(),this.isReadOnly?(this.error_message=this.$t("pages.messages.READ_ONLY_MSG"),this.trigger_document_lock=!1):this.trigger_document_lock=!0,this.initPage()}catch(e){}finally{this.hideLoading()}}))},setAppType(){const e=(!0).toString();"true"===e.toLowerCase()?(this.$route.params.id||this.goToDashboard(),this.doc2AppMode=!0,setTimeout((()=>{this.showDialog=!1}),1e4)):setTimeout((()=>{this.showDialog=!0}),1e4)},handleDocLockSubscribe(){const e=(0,di.TB)();e.$subscribe(((e,t)=>{this.isReadOnly=!this.doc_lock.success,this.handleReadOnly()}))},handleReadOnly(){if(ai.at.includes(this.record.status))return void(this.isReadOnly=!0);const e=$e.W1.hasAccess("update");e||(this.isReadOnly=!0)},getInvoiceDataByDocId(e){return as(this,void 0,void 0,(function*(){try{if(this.get_cached_data_id===e&&(yield this.setRecordFromCache()))return;this.record=[],this.clearSelectedSessionStorage(),yield this.getDocumentById(e)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},getConfidence(e){return e?e<1?(100*+e.toFixed(2)).toFixed(0):+e.toFixed(2):""},initPage(){this.handleFormatWarning(),this.docType=this.record.doc_type,this.setImage(),this.initImageArea(),window.addEventListener("keydown",this.keydownEvent),document.addEventListener("removeSelectedAreaOnImage",this.removeSelectedAreaOnImage),this.getAI_IndicatorData()},openPDfWindoByDefault(){this.user_settings["DUAL_MONITOR_MODE_SETTING"]&&this.isMultiScreen()&&0==this.pdf_in_window&&this.selectBetweenMonitor()},setShowAllButtonsPanel(){const e=rs("#buttonArea");e.clientWidth>=380?this.show_all_menu_btns=!0:this.show_all_menu_btns=!1},isElementLoaded(e){return as(this,void 0,void 0,(function*(){while(null===document.querySelector(e))yield new Promise((e=>requestAnimationFrame(e)));return document.querySelector(e)}))},selectBetweenMonitor(){return as(this,void 0,void 0,(function*(){if(0!=this.pdf_in_window)this.external_window.close(),this.pdf_in_window=!1,this.splitterModel=80,this.prepareRectangles();else if(this.isMultiScreen()){const e=yield Ue.FT.getUserPreference({key:"MONITOR_PREFERENCE"});if(e){let t=e.slice(-1),i=isNaN(t)?0:+t-1;this.openComponentInSeparateWindow(i)}else this.selectMonitor=!0}else this.showErrorToast(this.$t("pages.messages.MULTI_SCREENS_NOT_FOUND"))}))},openComponentInSeparateWindow(e){this.pdf_in_window=!0,this.selectMonitor=!1,this.splitterModel=0,this.setDataToCache(),this.removeOverlayandLines();let t=this.$router.resolve({path:"/show_pdf/"+this.docId});this.openWindowOnSelectedMonitor(e,t.href)},routeToNextDoc(e){return as(this,void 0,void 0,(function*(){let t;this.showLoading();try{let e=yield this.makeQueryParamFromFilters(),i=yield(0,Xe.O_)();t=yield Re().get(Xe.hi.get_next_document+this.docId+e+"&doc_type="+this.docType+"&sort_attr=created_on",{headers:{Authorization:i}})}catch(i){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}!0===t.data.success?!0===t.data.has_next&&"next"===e?(this.showSuccessToast(this.$t("pages.messages.NEXT_DOC_LOADED")),window.removeEventListener("beforeunload",this.onTabClose),this.$router.push("/field_validation_v1/"+t.data.next_id)):!0===t.data.has_previous&&"previous"===e?(this.showSuccessToast(this.$t("pages.messages.NEXT_DOC_LOADED")),window.removeEventListener("beforeunload",this.onTabClose),this.$router.push("/field_validation_v1/"+t.data.previous_id)):this.showErrorToast(this.$t("pages.messages.NO_NEXT_DOC")):this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}))},onTabClose(e){let t=ot.Z.has("event_name")?ot.Z.getItem("event_name"):null;t&&"language_change"===t||(e.preventDefault(),e.returnValue="",this.clearSelectedSessionStorage())},keydownEvent(e){if(!this.open_editor)try{"Escape"===e.key?(this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.removeMagnifier()):"Enter"===e.key?(this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.connectionId=""):"ArrowDown"===e.key&&(this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.$refs["fieldsView"].selectNextField(this.connectionId),setTimeout((()=>{this.enableOrDisableExportButton()}),5),this.connectionId="")}catch(e){}},getAI_IndicatorData(){return as(this,void 0,void 0,(function*(){try{let e;if(this.ai_fields=this.record&&this.record.fields&&Array.isArray(this.record.fields)?this.record.fields.length:0,!this.record.filter_values||!(this.record.filter_values.length>0)||!Array.isArray(this.record.filter_values))throw"getAI_IndicatorData () no filter_values or doc_type to proceed";let t="?doc_type="+this.record.doc_type+"&filter_values="+this.record.filter_values.join(),i=yield(0,Xe.O_)();if(e=yield Re().post(Xe.hi.get_ai_score+t,new FormData,{headers:{Authorization:i}}),!1===e.data.success)throw e.data.message;if(!0===e.data.success){this.ai_rules=e.data.rules,this.mean_effective_weight=e.data.mean_effective_weight;const t=new CustomEvent("FV_gauge_calculation",{detail:e.data});document.dispatchEvent(t)}}catch(e){}}))},imageclicked(e){this.image=this.baseUrl+"/"+(0,Dt.Rl)(this.record.images[e.target.dataset.id].path),this.page=parseInt(e.target.dataset.id)+1,this.pdf_in_window?this.pdfInChildPage():this.pdfInSamePage()},pdfInSamePage(){this.removeOverlayandLines(),this.getImageDetails()},pdfInChildPage(){this.external_window.PdfView.image=this.image,this.external_window.PdfView.removeOverlayandLines(),this.$nextTick((()=>{this.external_window.PdfView.prepareRectangles()}))},getImageDetails(){0!=this.renderComponent&&0!=this.imageLoaded&&(this.imageWidth=this.screenshot.offsetWidth,this.imageHeight=this.screenshot.offsetHeight,this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight),this.setShowAllButtonsPanel(),this.$nextTick((()=>{this.prepareRectangles()})),this.hideLoading(),this.enableOrDisableExportButton())},assignImageDimenions(){let e=rs("#image_container");if(e){e.querySelector(".q-splitter__before");this.imageWidth=e.offsetWidth-12,this.imageHeight=e.offsetHeight-32}this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight)},showConnectionFromRect(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing();const t=e.target.getAttribute("connectionId"),i=e.target,o=this.getElementToConnect(rs("#"+t));this.scrollInToViewCenter(o),this.scrollInToViewCenter(i),document.documentElement.scrollTop=0,setTimeout((()=>{if(t.startsWith(ai.QU))return i.classList.add("border"),void this.dsiplayFieldInToView(t);this.showConnection(t,i,o)}),50)},highlightTableRowArea(e){this.showConnectionFromField(e.detail,!0)},showConnectionFromField(e,t=!1){this.pdf_in_window?(this.external_window.PdfView.removeOverlayandLines(),this.external_window.PdfView.restrictDrawing()):(this.removeOverlayandLines(),this.restrictDrawing());let i=this.getElementToConnect(rs("#"+e));if(!i)return;let o=Number(i.getAttribute("pageno"));o=isNaN(o)?this.page:o;let s=!1;o&&o!==this.page&&(s=!0,this.page=o,this.image=this.baseUrl+"/"+(0,Dt.Rl)(this.record.images[this.page-1].path),this.pdf_in_window&&this.sendMessegeToChildWindow("image",this.image,!0),this.getImageDetails(),this.$forceUpdate()),this.connectionId=e,this.$nextTick((()=>{setTimeout((()=>{this.pdf_in_window?this.external_window.PdfView.proceedForReactFinding(e,i,t):this.proceedForReactFinding(e,i,t)}),s?300:100)}))},proceedForReactFinding(e,t,i){let o=rs("#"+e+"_rect");o&&(this.scrollInToViewCenter(o),document.documentElement.scrollTop=0),setTimeout((()=>{i?this.highlightRow(o):o?this.showConnection(e,o,t):this.proceedIfReactNotFound(t)}),50)},proceedIfReactNotFound(e){this.componentType=e.getAttribute("child_type");let t="";if("checkbox"===this.componentType)t=e.getAttribute("aria-checked")?"true":"";else{let i=e.querySelector(this.componentType);i&&(t=i.value)}""!=t?this.showNotification(this.$t("pages.messages.SELECT_AREA_NO_COORDINATES")):this.showNotification(this.$t("pages.messages.SELECT_AREA")),this.pdf_in_window?(this.external_window.PdfView.enableDrawing(),this.external_window.PdfView.connectionId=this.connectionId):this.enableDrawing()},showConnection(e,t,i){this.pdf_in_window?this.external_window.PdfView.proceedForReactFinding(e,i,!1):t&&i?(this.drawOverlay(e,t),t.classList.add("border"),this.connect(t,i,"#26a69a",2)):alert(this.$t("pages.messages.NO_MAPPING_AVAILABLE"))},saveOverlayResult(){this.cleanRectangles(),this.pdf_in_window?this.external_window.PdfView.redraw():this.redraw(),this.getTextByCoordinates(this.rectCordinate)},connect(e,t,i,o){const s=this.getOffset(e),n=this.getOffset(t),l=s.left,a=s.top+s.height/2,r=n.right,d=n.top+n.height/2,c=Math.sqrt((r-l)*(r-l)+(d-a)*(d-a)),u=(l+r)/2-c/2,h=(a+d)/2-o/2,m=Math.atan2(a-d,l-r)*(180/Math.PI);this.removeAllConnectionLines();const p=document.createElement("div");p.setAttribute("id","connection_line"),p.style.cssText="z-index: 102;padding:0px; margin:0px; height:"+o+"px; background-color:"+i+"; line-height:1px; position:absolute; left:"+u+"px; top:"+h+"px; width:"+c+"px; -moz-transform:rotate("+m+"deg); -webkit-transform:rotate("+m+"deg); -o-transform:rotate("+m+"deg); -ms-transform:rotate("+m+"deg); transform:rotate("+m+"deg);",document.body.appendChild(p)},getTextByCoordinates(e){return as(this,void 0,void 0,(function*(){const t=this.record;let i,o=new FormData,s=e.startX/this.imageWidth,n=e.startY/this.imageHeight,l=e.endX/this.imageWidth,a=e.endY/this.imageHeight;o.append("x0",s.toString()),o.append("y0",n.toString()),o.append("x1",l.toString()),o.append("y1",a.toString()),o.append("doc_id",t.doc_id),o.append("page",this.page.toString()),o.append("field_name",this.connectionId),this.showLoading();try{let e=yield(0,Xe.O_)();i=yield Re().post(Xe.hi.get_field_value,o,{headers:{Authorization:e}})}catch(d){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}this.textApiResponse=i.data;const r=i.data.coords;if(!r||0===r[0].x&&0===r[0].y&&""===i.data.formatted_value)return this.showErrorToast(this.$t("pages.messages.EMPTY_MAPPING_NOT_ALLOWED")),void(this.pdf_in_window?(this.external_window.PdfView.prepareRectangles(),this.external_window.PdfView.enableDrawing()):(this.prepareRectangles(),this.enableDrawing()));"INVOICE"==this.record.doc_type?this.dontAsk?(this.textApiResponse.multi_line?this.textConfirmationMsg=this.$t("isMultiLineConfirm"):this.textConfirmationMsg=this.$t("isdrawcorrect"),this.textConfirmation=!0):this.saveInstant=!0:this.updateFieldData()}))},updateFieldData(){this.$refs["fieldsView"].updateFieldData(this.textApiResponse),this.saveInstant=!1,this.textApiResponse=null},enableOrDisableExportButton(e){this.enableExportButton=!0,this.fieldsErrorArray=[],this.record.fields.forEach(((e,t)=>{!1===e.is_valid&&!this.isFieldCalcualtedFromLayout(e.name)&&this.isfieldsNotDisplayed(e.name)&&(this.enableExportButton=!1,this.fieldsErrorArray.push(this.$t("pages.screen2a."+e.name)))})),e&&this.printFieldsNeedToBeValidated(this.fieldsErrorArray)},printFieldsNeedToBeValidated(e){},isFieldCalcualtedFromLayout(e){let t=!1;for(const i of this.formLayout)for(const o of i.rows)o.field_name==e&&o.calculation_formula&&(t=!0);return t},isfieldsNotDisplayed(e){let t=!0;return this.fieldsNotDisplayed.hasOwnProperty(e)&&(t=!1),t},setApiData(e){this.record=e,this.$forceUpdate()},windowResize(){this.assignImageDimenions(),setTimeout((()=>{this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.getImageDetails(),this.removeMagnifier()}),20)},refreshCanvas(){this.prepareRectangles(),this.$forceUpdate(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.getImageDetails(),this.redraw()},removeSelectedAreaOnImage(e){this.rectangles.pop(),this.refreshCanvas(),this.restrictDrawing()},handleFormatWarning(){this.doc2AppMode&&"XML_INVOICE"!=this.record.doc_type&&(this.format_warning_dismiss=this.showRulesNotFoundToast(this.record,window.location.href))},isDebugFlagHandler(){this.is_debug=!1,this.$route.query&&"true"===this.$route.query.is_debug&&(this.is_debug=!0)},viewOCRDocument(){let e=this.$router.resolve({path:"/ocr-document/"+this.docId+"/"+this.page});window.open(e.href,"_blank","location=yes,toolbar=yes,scrollbars=yes,resizable=yes,left=500,width=1500,height=1000")},fieldValidationError(e){let t="REQUIRED";return e&&(t=e),t},hasApiData(){return 0!==(0,oi.v7)(this.record)&&!this.doc_fetch_error},removeOldMapiingsAndDrawNew(e){if(this.pdf_in_window)return this.external_window.PdfView.restrictDrawing(),this.external_window.PdfView.record=this.record,void this.external_window.PdfView.prepareRectangles();this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.prepareRectangles();let t=this.getElementToConnect(rs("#"+e)),i=rs("#"+e+"_rect");i&&t&&this.showConnection(e,i,t)},getElementToConnect(e){return this.componentType=e.getAttribute("child_type"),"checkbox"===this.componentType?e.querySelector(".q-checkbox__bg"):e},toggleSplitter(){this.splitterModel>=95?(this.splitterModel=60,this.setAfterPanelHeight(!0)):this.splitterModel=95},setSplitterModel(e){this.splitterModel=100,this.setAfterPanelHeight(e)},setAfterPanelHeight(e){e&&this.isElementLoaded("#afterSlot").then((e=>{const t=rs("#afterSlot"),i=rs("#image_scrolle");if(t&&i){let e=t.offsetHeight/i.offsetHeight*100;this.splitterModel=100-e-5,this.openPDfWindoByDefault()}}))},displaySplitDocumentView(){this.isReadOnly||(this.split_document=!0)},onResize(e){this.windowResize()},goToLayoutTemplate(){try{if(!this.doc_loaded)return;const e=ii.V.getDetailViewRoute({doc_type_key:this.record.doc_type||"",layout_template_id:this.layout_template_id||"",sub_doc_type_key:this.record.sub_doc_type||""});window.open(e,"_blank").focus()}catch(e){}},toFlowScreen(e){this.$router.push("/doc_flow/"+e)},askLater(){st.Z.set("dontAsk","neverAsk"),st.Z.get("dontAsk")},restartExport(e){return as(this,void 0,void 0,(function*(){try{let t=yield(0,Xe.O_)();return yield Re().get(Xe.hi.restart_document+e,{headers:{Authorization:t}}),!0}catch(t){throw t}}))},getSupplier(){let e="supplier_name",t="";for(let i of this.record.fields)if(i.name===e&&i.formatted_value){t=i.formatted_value;break}return t},goToDashboard(){this.$router.push("/dashboard")},splitterChanged(){this.saveSplitterValueInStorage(),this.setShowAllButtonsPanel();const e=new CustomEvent("splitter_changed",{detail:this.splitterModel});document.dispatchEvent(e)},getOverlayHeadings(){const e=rs("#"+this.connectionId);if(!e)return"";const t=e.getAttribute("child_type");if(!t)return"";this.componentType=t;let i="",o="";if("checkbox"===this.componentType)o=e.getAttribute("aria-label"),i="Un-Checked","true"===e.getAttribute("aria-checked")&&(i="Checked");else{const t=rs("."+this.connectionId);o=t.innerHTML;const s=e.querySelector(this.componentType);i=s.value}return i+ai.Um+o},selectNextField(e){this.$refs["fieldsView"].selectNextField(e),setTimeout((()=>{this.enableOrDisableExportButton()}),5)},initTempFieldDelete(){this.$refs["fieldsView"].initTempFieldDelete()},getFieldByIndex(e){return this.formBuilderModel[e]},getHTMLField(e){const t=rs("#"+e.name);return t&&e.page&&null!=e.page&&e.coords&&t.setAttribute("pageno",e.page),t},initiateMagnifyGlass(){this.pdf_in_window?this.external_window.PdfView.initMagnifyGlass():this.initMagnifyGlass()},sendMessegeToChildWindow(e,t,i){this.external_window.PdfView.getDataFromParent({key:e,value:t,redraw:i})},changeScreenMode(){if(!this.isReadOnly){if("validate"==this.field_view_mode){this.field_view_mode="annotate",rs("#validate-container").classList.add("hidden"),this.screenshot.classList.remove("cursor-crosshair"),this.removeOverlayandLines(),this.screenshot.removeEventListener("dblclick",this.dblClickToSelect),this.screenshot.removeEventListener("pointerdown",this.startDrag),this.screenshot.removeEventListener("pointerdown",this.startDrag),document.body.removeEventListener("click",this.mouseClicked,!0);const e=rs(".img-magnifier-container");e&&e.removeEventListener("scroll",this.removeOverlayandLines);const t=rs(".q-splitter__after");t&&t.removeEventListener("scroll",this.removeOverlayandLines)}else{rs("#validate-container").classList.remove("hidden"),this.field_view_mode="validate",this.screenshot.addEventListener("dblclick",this.dblClickToSelect),this.screenshot.addEventListener("pointerdown",this.startDrag),this.screenshot.addEventListener("pointerdown",this.startDrag),document.body.addEventListener("click",this.mouseClicked,!0);const e=rs(".img-magnifier-container");e&&e.addEventListener("scroll",this.removeOverlayandLines);const t=rs(".q-splitter__after");t&&t.addEventListener("scroll",this.removeOverlayandLines)}this.screenshot.classList.remove("cursor-crosshair")}},updateValue(e,t){"font"==e?this.selectFont=t:"color"==e?this.selectColor=t:"size"==e&&(this.selectFontSize=t)},enableEditing(){this.enable_editing,this.screenshot.classList.add("cursor-crosshair")}},setup(){const e=(0,it.Z)(),t=(st.Z.set("dontAsk",""),st.Z.get("dontAsk"),(0,di.H_)());t.$reset();const{record:i,get_cached_data_id:o,doc_loaded:s,confirmationForPoConnectionReset:n,error:l,notifications:a,layout_template_id:r,show_all_menu_btns:d,has_ai_table:c,fieldsErrorArray:u,enableExportButton:h,page:m,document_version:p,doc_annotations:g}=(0,Me.Jk)(t),{getDocumentById:_,setRecordFromCache:w,setDataToCache:f,removeCache:v,getDocAnnotations:y}=t,b=(0,di.nc)(),{formLayout:k,isExtenedPanel:x,formBuilderModel:C,formBuilderConfigModel:D,renderComponent:T,docType:E}=(0,Me.Jk)(b),{getElementWidth:W,isFieldHidden:S}=b;let L=[],I=[],V=(0,He.iH)(!1),q=(0,He.iH)(!1),O=(0,He.iH)(!1);const A=(0,di.TB)(),{releaseDocLock:F}=A,{doc_lock:R}=(0,Me.Jk)(A),M=(0,di.e0)(),{isConfirmationBoxDisable:Z}=(0,Me.Jk)(M),{resetStoreOnRouteChange:z}=M,$=(0,di.Eu)(),{open_editor:H}=(0,Me.Jk)($),U=(0,di.Ln)(),{makeQueryParamFromFilters:B}=U,P=(0,di.VF)(),{user_settings:N}=(0,Me.Jk)(P),{getOrgSettings:Q}=P,j=(0,di.b8)(),{connect:K}=j;let G=[],Y={startX:0,startY:0,endX:0,endY:0};const J={x:0,y:0,width:0,height:0,connectionId:""};let X=0,ee=0,te=rs(".screenshot"),ie=rs("#marquee"),oe=(rs("#foreignObject"),rs("#boxes")),se=rs(".areas");return{isFieldHidden:S,doc_annotations:g,connectWebSocket:K,show_all_menu_btns:d,get_cached_data_id:o,has_ai_table:c,doc_loaded:s,removeCache:v,setDataToCache:f,releaseDocLock:F,getDocumentById:_,setRecordFromCache:w,resetStoreOnRouteChange:z,isConfirmationBoxDisable:Z,fields_pending_load_count:(0,He.iH)(0),fields_loaded_count:(0,He.iH)(0),notifications:a,record:i,docType:E,confirmationForPoConnectionReset:n,doc_fetch_error:(0,He.iH)(l),doc_lock:R,page:m,showTooltip:V,showTooltipWithHide:q,showTooltipWithClose:O,tableRows:L,fieldsNotDisplayed:I,image:(0,He.iH)(""),current_menu_data:(0,He.iH)(""),layout:I,images:(0,He.iH)({}),baseUrl:"https://api.docbits.com",isReadOnly:(0,He.iH)(!1),componentType:"input",lineitem_count:0,lineitem_error:(0,He.iH)(!1),doc2AppMode:(0,He.iH)(!1),is_debug:(0,He.iH)(!1),tb_version:"default",document_version:p,splitterModel:(0,He.iH)(60),imageFieldSplitter:(0,He.iH)(76),showNotification(t){e.notify({message:t,color:"primary",position:"top"})},doc_type_list:I,ai_rules:(0,He.iH)(0),ai_fields:(0,He.iH)(0),mean_effective_weight:(0,He.iH)(0),textConfirmationMsg:(0,He.iH)(""),formLayout:k,isExtenedPanel:x,renderComponent:T,enableExportButton:h,getElementWidth:W,imageHeight:(0,He.iH)(0),imageWidth:(0,He.iH)(0),viewBox:(0,He.iH)("0 0 0 0"),textApiResponse:(0,He.iH)(),connectionId:(0,He.iH)(""),is_admin:(0,He.iH)(!1),layout_template_id:r,open_editor:H,pdf_in_window:!1,external_window:(0,He.iH)(),makeQueryParamFromFilters:B,rectangles:G,rectCordinate:Y,marqueeRect:J,startX:X,startY:ee,screenshot:te,marquee:ie,boxes:oe,areas:se,formBuilderModel:C,formBuilderConfigModel:D,user_settings:N,getOrgSettings:Q,getDocAnnotations:y,screen_mode:(0,He.iH)(!1),field_view_mode:(0,He.iH)("validate"),enable_editing:(0,He.iH)(!1),showFontMenu:(0,He.iH)(!1),fieldsErrorArray:u,selectFont:(0,He.iH)("Helvetica"),selectFontSize:(0,He.iH)(12),selectColor:(0,He.iH)("#000000")}}});var cs=i(80218),us=i(15151),hs=i(82226),ms=i(27011),ps=i(62025),gs=i(39570),_s=i(13747),ws=i(83944),fs=i(83456),vs=i(65735),ys=i(86115),bs=i(17132);const ks=(0,_t.Z)(ds,[["render",Ae],["__scopeId","data-v-2606b829"]]),xs=ks;Jt()(ds,"components",{QBtn:Nt.Z,QIcon:Kt.Z,QSplitter:cs.Z,QResizeObserver:us.Z,QTooltip:Go.Z,QBtnDropdown:hs.Z,QList:ms.Z,QItem:Yo.Z,QItemSection:Jo.Z,QItemLabel:Xo.Z,QDialog:es.Z,QCard:Ht.Z,QCardSection:Ut.Z,QSpace:ps.Z,QToolbar:gs.Z,QToolbarTitle:_s.Z,QCardActions:Gt.Z,QInput:Bt.Z,QPopupProxy:ws.Z,QColor:fs.Z,QCheckbox:vs.Z,QField:ys.Z,QTable:bs.Z}),Jt()(ds,"directives",{ClosePopup:ts.Z})}}]);