"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[6377],{26377:(t,i,e)=>{e.r(i),e.d(i,{default:()=>kt});var o=e(61758);const n={class:"container row width-100-percent mt-mb-8"},a={style:{"margin-left":"auto",display:"flex"}};function s(t,i,e,s,l,r){const c=(0,o.g2)("q-avatar"),d=(0,o.g2)("q-btn"),u=(0,o.g2)("q-icon"),f=(0,o.g2)("Notifications"),_=(0,o.g2)("AccountSettingDropdown"),h=(0,o.g2)("q-toolbar"),p=(0,o.g2)("q-header"),k=(0,o.g2)("newUpdateError"),m=(0,o.g2)("router-view"),g=(0,o.g2)("q-page-container"),b=(0,o.g2)("q-layout");return(0,o.uX)(),(0,o.Wv)(b,{view:"lHh LpR lFf",class:"min-height-unset"},{default:(0,o.k6)((()=>[(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(h,{class:"toolbar full-width toolbar-items"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",n,[(0,o.bF)(c,{class:"img_header cursor-pointer"},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{src:"https://fellowpro.com/wp-content/uploads/2023/06/LOGO_DocBits.png",onClick:i[0]||(i[0]=(...i)=>t.goHome&&t.goHome(...i)),target:"_blank"})])),_:1}),(0,o.Lk)("div",a,[(0,o.bF)(d,{flat:"",class:"line-height mobile-hide",color:"primary text-white ",label:t.$t("layout.home"),onClick:i[1]||(i[1]=i=>t.gotoCloud())},null,8,["label"]),t.user_settings["WORKFLOW_BUILDER_MODULE_SETTING"]?((0,o.uX)(),(0,o.Wv)(d,{key:0,flat:"",class:"line-height mobile-hide",color:"primary text-white ",label:t.$t("workflow"),onClick:i[2]||(i[2]=i=>t.gotoWorkflow())},null,8,["label"])):(0,o.Q3)("",!0),(0,o.bF)(d,{flat:"",class:"line-height mobile-hide",color:"primary text-white ",label:t.$t("layout.settings"),onClick:i[3]||(i[3]=i=>t.gotoSettings())},null,8,["label"]),t.user_settings["REPORT_PAGE"]?((0,o.uX)(),(0,o.Wv)(d,{key:1,flat:"",class:"line-height mobile-hide",color:"primary text-white ",label:t.$t("layout.report"),onClick:i[4]||(i[4]=i=>t.gotoReport())},null,8,["label"])):(0,o.Q3)("",!0),(0,o.bF)(d,{flat:"",class:"line-height mobile-hide",color:"primary text-white ",label:t.$t("layout.support"),onClick:i[5]||(i[5]=i=>t.supportIntegration()),target:"_blank"},null,8,["label"]),t.showIcons?((0,o.uX)(),(0,o.Wv)(u,{key:2,style:{padding:"7px"},class:"mobile-hide",name:"fas fa-dove",onclick:"location.href = 'https://twitter.com/FConsultingAG';"})):(0,o.Q3)("",!0),t.showIcons?((0,o.uX)(),(0,o.Wv)(u,{key:3,style:{padding:"7px"},class:"mobile-hide",name:"fab fa-facebook-f",onclick:"location.href = 'https://www.facebook.com/fellowconsulting';"})):(0,o.Q3)("",!0),t.showIcons?((0,o.uX)(),(0,o.Wv)(u,{key:4,style:{padding:"7px"},class:"mobile-hide",name:"fab fa-linkedin",onclick:"location.href = 'https://www.linkedin.com/company/fellow-consulting-ag/';"})):(0,o.Q3)("",!0),(0,o.bF)(u,{size:"sm",class:"mobile-only q-pa-sm",name:"power_settings_new"}),(0,o.bF)(f),(0,o.bF)(_)])])])),_:1})])),_:1}),(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.bF)(k),((0,o.uX)(),(0,o.Wv)(m,{key:t.$route.fullPath}))])),_:1})])),_:1})}var l=e(24622),r=e(38734),c=e(1595),d=e(18505),u=e(1659),f=e(50411),_=e(46162),h=e(4957),p=e(58790);const k={key:0},m={class:"fixed-height"},g={class:"notifications-header row"},b={class:"notifications-title"},v={class:"sort-buttons"},y={class:"notifications-sub-header row"},w={class:"notifications-sub-header-title"},A={key:0,class:"notifications-content"},F={class:"notification-item-initials"},C={class:"notification-user"},L=["onClick"],$=["onClick"],S={key:1},E={key:3},Q={class:"notifications-sub-header"},I={class:"notifications-sub-header-title"},q={key:0,class:"notifications-content"},R={class:"notification-item-initials"},x={class:"notification-user"},W=["onClick"],T=["onClick"],D={class:"q-py-sm text-center"},M={key:1};function X(t,i,e,n,a,s){const l=(0,o.g2)("q-separator"),r=(0,o.g2)("q-btn"),c=(0,o.g2)("q-avatar"),d=(0,o.g2)("q-item-section"),u=(0,o.g2)("q-item-label"),f=(0,o.g2)("q-tooltip"),_=(0,o.g2)("q-badge"),h=(0,o.g2)("q-item");return t.is_module_on?((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("div",m,[(0,o.Lk)("div",g,[(0,o.Lk)("span",b,(0,p.v_)(t.$t("notifications.notifications")),1)]),(0,o.bF)(l),(0,o.Lk)("div",v,[(0,o.bF)(r,{flat:"",rounded:"",class:(0,p.C4)(["sort-button","all"===t.notification_mode?"selected-sort-button":""]),color:"all"===t.notification_mode?"primary":"grey",label:t.$t("all"),onClick:i[0]||(i[0]=i=>t.switchNotificationMode("all"))},null,8,["class","color","label"]),(0,o.bF)(r,{flat:"",rounded:"",class:(0,p.C4)(["sort-button","unread"===t.notification_mode?"selected-sort-button":""]),color:"unread"===t.notification_mode?"primary":"grey",label:t.$t("notifications.unread"),onClick:i[1]||(i[1]=i=>t.switchNotificationMode("unread"))},null,8,["class","color","label"])]),(0,o.Lk)("div",y,[(0,o.Lk)("span",w,(0,p.v_)(t.$t("notifications.unread")),1),(0,o.Lk)("span",{onClick:i[2]||(i[2]=(...i)=>t.markAllNotificationsAsRead&&t.markAllNotificationsAsRead(...i)),class:"notification-mark-as-read float-right"},(0,p.v_)(t.$t("notifications.mark_all_as_read")),1)]),t.unread_notifications.length>0?((0,o.uX)(),(0,o.CE)("div",A,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.unread_notifications,(i=>((0,o.uX)(),(0,o.CE)("div",{key:i.id},[(0,o.bF)(h,{class:"notification-item"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{avatar:""},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"notification-item-avatar"},{default:(0,o.k6)((()=>[(0,o.Lk)("span",F,(0,p.v_)(t.getInitials(i.user_name)),1)])),_:2},1024)])),_:2},1024),(0,o.Lk)("div",null,[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.Lk)("span",C,(0,p.v_)(i.user_name),1)])),_:2},1024),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.Lk)("span",{class:"notification-message",onClick:e=>t.openTask(i.task_id,i.id)},(0,p.v_)(i.message),9,L),null==i.document_id?((0,o.uX)(),(0,o.Wv)(_,{key:0,onClick:e=>t.markNotificationAsRead(i.id),rounded:"",class:"q-ml-md q-mr-sm notification-info-badge"},{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,p.v_)(t.$t("notifications.mark_as_read")),1)])),_:1})])),_:2},1032,["onClick"])):(0,o.Q3)("",!0)])),_:2},1024),null!=i.document_id&&null!=i.filename?((0,o.uX)(),(0,o.Wv)(u,{key:0},{default:(0,o.k6)((()=>[(0,o.Lk)("span",{class:"notification-message",onClick:e=>t.openDocument(i.document_id)},(0,p.v_)(i.filename),9,$),(0,o.bF)(_,{onClick:e=>t.markNotificationAsRead(i.id),rounded:"",class:"q-ml-md q-mr-sm notification-info-badge"},{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,p.v_)(t.$t("notifications.mark_as_read")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)):(0,o.Q3)("",!0),(0,o.bF)(u,{caption:""},{default:(0,o.k6)((()=>[(0,o.eW)((0,p.v_)(i.created_on),1)])),_:2},1024)])),_:2},1024)])])),_:2},1024)])))),128))])):((0,o.uX)(),(0,o.CE)("div",S,[(0,o.bF)(h,{class:"notification-exception"},{default:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,{caption:""},{default:(0,o.k6)((()=>[(0,o.eW)((0,p.v_)(t.$t("notifications.no_new_notifications")),1)])),_:1})])),_:1})])),_:1})])),"all"==t.notification_mode?((0,o.uX)(),(0,o.Wv)(l,{key:2,class:"q-my-md"})):(0,o.Q3)("",!0),"all"==t.notification_mode?((0,o.uX)(),(0,o.CE)("div",E,[(0,o.Lk)("div",Q,[(0,o.Lk)("span",I,(0,p.v_)(t.$t("notifications.read")),1)]),t.read_notifications.length>0?((0,o.uX)(),(0,o.CE)("div",q,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.read_notifications,(i=>((0,o.uX)(),(0,o.CE)("div",{key:i.id},[(0,o.bF)(h,{class:"notification-item"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{avatar:""},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"notification-item-avatar"},{default:(0,o.k6)((()=>[(0,o.Lk)("span",R,(0,p.v_)(t.getInitials(i.user_name)),1)])),_:2},1024)])),_:2},1024),(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.Lk)("span",x,(0,p.v_)(i.user_name),1)])),_:2},1024),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.Lk)("span",{class:"notification-message",onClick:e=>t.openTask(i.task_id)},(0,p.v_)(i.message),9,W)])),_:2},1024),null!=i.document_id&&null!=i.filename?((0,o.uX)(),(0,o.Wv)(u,{key:0},{default:(0,o.k6)((()=>[(0,o.Lk)("span",{class:"notification-message",onClick:e=>t.openDocument(i.document_id)},(0,p.v_)(i.filename),9,T)])),_:2},1024)):(0,o.Q3)("",!0),(0,o.bF)(u,{caption:""},{default:(0,o.k6)((()=>[(0,o.eW)((0,p.v_)(i.created_on),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])))),128)),(0,o.Lk)("div",D,[(0,o.Lk)("span",{onClick:i[3]||(i[3]=i=>t.goToTasks()),class:"notification-hyperlink"},"See Tasks...")])])):((0,o.uX)(),(0,o.CE)("div",M,[(0,o.bF)(h,{class:"notification-exception"},{default:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,{caption:""},{default:(0,o.k6)((()=>[(0,o.eW)((0,p.v_)(t.$t("notifications.no_older_notifications")),1)])),_:1})])),_:1})])),_:1})]))])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)}e(10239);var N=e(76956),P=e(41903),U=e(82303),B=e(85487);const V={methods:{toPendingApprovalScreen(t){P.A.set("view_mod","edit"),this.$router.push("/ready-for-approval/"+t)},toPendingSecondApprovalScreen(t){P.A.set("view_mod","edit"),this.$router.push("/ready-for-second-approval/"+t)},toRejectedScreen(t){this.$router.push("/rejected/"+t)},handleMediRoutes(t){t.layout&&this.toMediValidationV3Screen(t["id"])},toMediValidationV3Screen(t){this.$router.push("/medi_order_v3/"+t)},toValidationScreen(t){P.A.set("view_mod","edit"),this.$router.push("/field_validation_v1/"+t)},viewRecord(t){P.A.set("view_mod","view"),this.$router.push("/field_validation_v1/"+t)},isStatusError(t){return"error"===t||"export_error"===t},toDocumentErrorView(t){this.$router.push("/document_error/"+t["id"])},toDocumentClassifiyView(t){this.$router.push("/document_classifiy/"+t["id"])},async getQualityInfos(t){if("pending_confirmation"==t["status"]){let i=await(0,_.L3)();const e=await U.A.get((0,B.MV)(_.FH.get_error_infos),{headers:{Authorization:i},params:{doc_id:t["id"]}});if(e["data"]["row"]=t,1===Object.keys(e).length){return!1}e["data"],e["data"]["row"]["id"];return!0}},notificationClicked(t){let i=t["id"]?t["id"]:t["doc_id"];t["id"]=i;let e=t["status"],o=t["has_layout"];this.isStatusError(e)?this.toDocumentErrorView(t):"classified"!==e?"validating"!==e&&"validated_pending_export"!==e&&("pending_confirmation"!==e?"validated_pending_approval"!==e?"approved_pending_second_approval"!==e?this.isMediUser()?this.handleMediRoutes(t):"rejected"!==e?N.Yd.includes(e)&&(o?this.toNewValidationScreen(i):"ready_for_validation"===e?this.toValidationScreen(i):N.B2.includes(e)&&this.viewRecord(i)):this.toRejectedScreen(i):this.toPendingSecondApprovalScreen(i):this.toPendingApprovalScreen(i):this.getQualityInfos(t)):this.toDocumentClassifiyView(t)}}};var O=function(t,i,e,o){function n(t){return t instanceof e?t:new e((function(i){i(t)}))}return new(e||(e=Promise))((function(e,a){function s(t){try{r(o.next(t))}catch(i){a(i)}}function l(t){try{r(o["throw"](t))}catch(i){a(i)}}function r(t){t.done?e(t.value):n(t.value).then(s,l)}r((o=o.apply(t,i||[])).next())}))};const H=(0,o.pM)({name:"Notifications",mixins:[d.A,l.A,V],data(){return{}},methods:{switchNotificationMode(t){this.notification_mode=t},openTask(t,i){null!=t?(this.markNotificationAsRead(i),this.$router.push("/task/"+t)):this.showErrorToast(this.$t("notifications.no_task_found"))},openDocument(t){return O(this,void 0,void 0,(function*(){if(null==t)return;const i=this.$route.params.id;i!==t?(yield this.getDocStatusById(t).then((t=>{this.notificationClicked(t.data)})),this.error&&this.showErrorToast(this.$t("notifications.no_document_found"))):logInfo("same document",i,t)}))},getInitials(t){var i=t.split(" "),e=i[0].substring(0,1).toUpperCase();return i.length>1&&(e+=i[i.length-1].substring(0,1).toUpperCase()),e},goToTasks(){this.$router.push("/tasks")}},setup(){const t=(0,c.iU)(),{all_notifications:i,unread_notifications:e,read_notifications:o,total_unread_notifications:n}=(0,u.bP)(t),{getNotifications:a,markNotificationAsRead:s,markAllNotificationsAsRead:l}=(0,c.iU)(),d=(0,c.q3)(),{record:f,error:_,error_message:h}=(0,u.bP)(d),{getDocStatusById:p}=(0,c.q3)(),k=(0,c.kH)(),{isMediUser:m}=k,g=(0,c.OP)(),{isModuleOn:b}=g,{is_module_on:v}=(0,u.bP)(g);return{error:_,error_message:h,is_module_on:v,isModuleOn:b,isMediUser:m,getDocStatusById:p,record:f,all_notifications:i,total_unread_notifications:n,read_notifications:o,unread_notifications:e,getNotifications:a,markNotificationAsRead:s,markAllNotificationsAsRead:l,notification_mode:(0,r.KR)("all"),show_notifications:(0,r.KR)(!1)}}});var K=e(12807),j=e(56384),z=e(23954),G=e(50492),Y=e(97410),J=e(10386),Z=e(90124),tt=e(25173),it=e(3952),et=e(13796),ot=e(98582),nt=e.n(ot);const at=(0,K.A)(H,[["render",X],["__scopeId","data-v-34bef12c"]]),st=at;nt()(H,"components",{QBtn:j.A,QBadge:z.A,QIcon:G.A,QTooltip:Y.A,QSeparator:J.A,QItem:Z.A,QItemSection:tt.A,QAvatar:it.A,QItemLabel:et.A});var lt=e(62103),rt=function(t,i,e,o){function n(t){return t instanceof e?t:new e((function(i){i(t)}))}return new(e||(e=Promise))((function(e,a){function s(t){try{r(o.next(t))}catch(i){a(i)}}function l(t){try{r(o["throw"](t))}catch(i){a(i)}}function r(t){t.done?e(t.value):n(t.value).then(s,l)}r((o=o.apply(t,i||[])).next())}))};const ct=(0,o.pM)({name:"MainLayout",watch:{loading_settings:{handler:function(t,i){!1===t&&this.setDarkMode()}}},unmounted(){document.removeEventListener("keydown",this.sendBack)},mounted:function(){document.addEventListener("keydown",this.sendBack),this.fillDocTypeAndSubTypesListIfEmpty(),this.initFontSize(),this.init()},methods:{init(){this.setDarkMode()},sendBack(t){"Escape"!==t.key||document.querySelector(".q-dialog")||"/dashboard"!=this.$route.path&&this.$router.go(-1)},setDarkMode(){return rt(this,void 0,void 0,(function*(){if(this.loading_settings)return;const t=yield this.getUserSettingWithExpiry(this.dark_mode_setting,!1);"true"!=t&&1!=t||this.$q.dark.set(!0),f.A.set(Boolean(t))}))},goHome(){this.$router.push("/dashboard")},supportIntegration(){this.$router.push("/support")},gotoSettings(){this.$router.push("/settings")},gotoReport(){this.$router.push("/report")},gotoCloud(){this.$router.push("/dashboard")},gotoWorkflow(){this.$router.push("/workflows")}},data(){return{showIcons:!1,supportURL:_.cK,dark_mode_setting:N.up}},components:{Notifications:st,AccountSettingDropdown:h.A,newUpdateError:lt.A},mixins:[d.A,l.A],setup(){const t=(0,c.cY)(),{fillDocTypeAndSubTypesListIfEmpty:i}=t,e=(0,c.Bu)(),{user_settings:o,loading_settings:n}=(0,u.bP)(e),{getUserSettingWithExpiry:a}=e,s=(0,c.Ml)(),{initFontSize:l}=s;return{loading_settings:n,getUserSettingWithExpiry:a,fillDocTypeAndSubTypesListIfEmpty:i,initFontSize:l,user_settings:o,settings_store:e,report:(0,r.KR)(!0)}}});var dt=e(62008),ut=e(8416),ft=e(36914),_t=e(45205),ht=e(82156);const pt=(0,K.A)(ct,[["render",s],["__scopeId","data-v-1e4212c6"]]),kt=pt;nt()(ct,"components",{QLayout:dt.A,QHeader:ut.A,QToolbar:ft.A,QAvatar:it.A,QBtn:j.A,QIcon:G.A,QPageContainer:_t.A,QDialog:ht.A})}}]);