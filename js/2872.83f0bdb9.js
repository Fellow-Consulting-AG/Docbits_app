"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[2872],{12872:(e,t,i)=>{i.r(t),i.d(t,{default:()=>el});var n=i(61758),s=i(58790);const o={class:"row q-pl-md q-pr-md"},a={class:"col-12 q-pl-sm q-pr-sm q-mt-sm"},l={key:0,class:"row"},r={key:1,class:"row accounting-area"},d={class:"col-12 highlighted-back"},c={class:"col-sm-4 col-md-4 col-lg-4"},u={class:"secondary-c-text text-h6"},m={class:"primary-dashboard"},h={class:"q-mt-sm q-mb-sm q-mr-sm"},_={class:"header row"},p={class:"col-auto"},g={class:"col-auto"},v={class:"q-ml-auto"},y={key:0},f={key:1},b={key:0,class:"back-white border-left-bdbdbd vw-30",id:"left_section"},w={class:"left-area-height q-ma-sm scrolle-y"},x={class:"text-weight-bold primary-bg-text"},k={class:"q-ml-sm"},I={class:"row items-center full-width q-mt-md q-mb-lg"},A={class:"text-weight-bold primary-bg-text"},L={class:"text-item"};function F(e,t,i,F,C,S){const E=(0,n.g2)("MessageBanner"),q=(0,n.g2)("SubHeader"),P=(0,n.g2)("ErrorDocumentView"),T=(0,n.g2)("q-icon"),D=(0,n.g2)("q-btn"),M=(0,n.g2)("q-btn-toggle"),V=(0,n.g2)("PredictionBtn"),Q=(0,n.g2)("DocumentAutoSaveNotify"),O=(0,n.g2)("ProceedBtn"),$=(0,n.g2)("SaveBtn"),X=(0,n.g2)("q-badge"),K=(0,n.g2)("q-tooltip"),W=(0,n.g2)("f-btn"),R=(0,n.g2)("ImageComponent"),B=(0,n.g2)("q-splitter"),N=(0,n.g2)("ExpertMode"),U=(0,n.g2)("q-toolbar-title"),j=(0,n.g2)("q-toolbar"),z=(0,n.g2)("q-input"),H=(0,n.g2)("q-card-section"),G=(0,n.g2)("q-card"),J=(0,n.g2)("q-dialog"),Y=(0,n.g2)("SetupValidation"),Z=(0,n.g2)("router-link"),ee=(0,n.g2)("Loader"),te=(0,n.gN)("close-popup");return(0,n.uX)(),(0,n.CE)(n.FK,null,[e.error_message?((0,n.uX)(),(0,n.Wv)(E,{key:0,message:e.error_message,messageCategoryClass:e.messageCategoryClass?e.messageCategoryClass:"error-banner"},null,8,["message","messageCategoryClass"])):(0,n.Q3)("",!0),(0,n.bF)(q,{name:"accounting",label:e.$t("accounting"),show_expiry_alert:!0,onSearch:!1},null,8,["label"]),(0,n.Lk)("div",o,[(0,n.Lk)("div",a,[e.has_fetch_error?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(P)])):((0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("div",d,[(0,n.Lk)("div",c,[(0,n.Lk)("div",u,[(0,n.bF)(D,{flat:"",rounded:"","data-cy":"dashboard",color:"primary",onClick:t[0]||(t[0]=t=>e.routeToBack())},{default:(0,n.k6)((()=>[(0,n.bF)(T,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,n.Lk)("label",m,(0,s.v_)(e.$t("back")),1)])),_:1})])])]),(0,n.Lk)("div",{class:(0,s.C4)(["scroll-area-height-accounting",e.expert_mode?"right_section":"full-width"]),id:"right_section"},[(0,n.bF)(B,{modelValue:e.splitterModel,"onUpdate:modelValue":t[3]||(t[3]=t=>e.splitterModel=t),class:"accounting aa-splitter full-width right-content-height"},{before:(0,n.k6)((()=>[(0,n.Lk)("div",h,[(0,n.Lk)("div",_,[(0,n.Lk)("div",p,[(0,n.bF)(M,{tabindex:"1",modelValue:e.accounting_mode,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.accounting_mode=t),e.handleMode],spread:"",unelevated:"","no-caps":"","toggle-color":"primary",color:"white","text-color":"black",class:"accounting_model_toggle",options:e.accounting_mode_options,disable:e.is_view_readonly||!e.data_loaded||e.disable_mode},null,8,["modelValue","options","onUpdate:modelValue","disable"])]),(0,n.Lk)("div",g,[(0,n.bF)(V)]),(0,n.Lk)("div",v,[(0,n.bF)(Q),(0,n.bF)(O),(0,n.bF)($),(0,n.bF)(W,{class:"q-ml-sm",icon:"settings",onClick:t[2]||(t[2]=t=>e.show_setup_validation=!e.show_setup_validation)},{default:(0,n.k6)((()=>[e.setup_error?((0,n.uX)(),(0,n.Wv)(X,{key:0,color:"red"},{default:(0,n.k6)((()=>[(0,n.bF)(T,{name:"warning",color:"white"})])),_:1})):(0,n.Q3)("",!0),(0,n.bF)(K,null,{default:(0,n.k6)((()=>[e.setup_error?((0,n.uX)(),(0,n.CE)("span",y,(0,s.v_)(e.$t("validate_setup_has_error")),1)):((0,n.uX)(),(0,n.CE)("span",f,(0,s.v_)(e.$t("validate_setup")),1))])),_:1})])),_:1})])])]),""!==e.view_template?((0,n.uX)(),(0,n.Wv)((0,n.$y)(e.view_template),{key:0,currentView:e.view_template,isMultiTaxSection:e.isMultiTaxSection,onAddLineItem:e.addLineItem},null,40,["currentView","isMultiTaxSection","onAddLineItem"])):(0,n.Q3)("",!0)])),separator:(0,n.k6)((()=>[])),after:(0,n.k6)((()=>[(0,n.bF)(R,{renderOpenWindoIcon:!0,docName:e.record.filename,docImages:e.record.images},{default:(0,n.k6)((()=>[(0,n.bF)(D,{class:"float-right",icon:"tune",disabled:e.is_view_readonly,flat:"",dense:"",onClick:e.toggleMenu},null,8,["disabled","onClick"])])),_:1},8,["docName","docImages"])])),_:1},8,["modelValue"])],2),e.expert_mode&&!e.is_view_readonly?((0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("div",w,[(0,n.bF)(N)])])):(0,n.Q3)("",!0)]))])]),(0,n.bF)(J,{modelValue:e.empty_line_item,"onUpdate:modelValue":t[6]||(t[6]=t=>e.empty_line_item=t),persistent:""},{default:(0,n.k6)((()=>[(0,n.bF)(G,null,{default:(0,n.k6)((()=>[(0,n.bF)(j,{class:"secondary-toolbar"},{default:(0,n.k6)((()=>[(0,n.bF)(U,null,{default:(0,n.k6)((()=>[(0,n.Lk)("span",x,(0,s.v_)(e.$t("error")),1)])),_:1}),(0,n.bo)((0,n.bF)(D,{flat:"",round:"",dense:"",class:"primary-bg-text",icon:"close",onClick:t[4]||(t[4]=t=>e.empty_line_item=!1)},null,512),[[te]])])),_:1}),(0,n.bF)(H,{class:"row items-center"},{default:(0,n.k6)((()=>[(0,n.Lk)("span",k,(0,s.v_)(e.$t("please_share_document_with_admin")),1),(0,n.Lk)("div",I,[(0,n.bF)(z,{class:"accouting-input col-11",outlined:"",modelValue:e.doc_url,"onUpdate:modelValue":t[5]||(t[5]=t=>e.doc_url=t)},{append:(0,n.k6)((()=>[(0,n.bF)(T,{flat:"",dense:"",name:"fas fa-copy",size:"24px",color:"primary",onClick:e.copyURL},{default:(0,n.k6)((()=>[(0,n.bF)(K,{anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("copy")),1)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.bF)(J,{modelValue:e.show_setup_validation,"onUpdate:modelValue":t[8]||(t[8]=t=>e.show_setup_validation=t)},{default:(0,n.k6)((()=>[(0,n.bF)(G,{style:{"min-width":"600px","min-height":"500px"}},{default:(0,n.k6)((()=>[(0,n.bF)(j,{class:"secondary-toolbar"},{default:(0,n.k6)((()=>[(0,n.bF)(U,null,{default:(0,n.k6)((()=>[(0,n.Lk)("span",A,(0,s.v_)(e.$t("validate_setup")),1)])),_:1}),(0,n.bo)((0,n.bF)(D,{flat:"",round:"",dense:"",class:"primary-bg-text",icon:"close",onClick:t[7]||(t[7]=t=>e.show_setup_validation=!1)},null,512),[[te]])])),_:1}),(0,n.bF)(H,null,{default:(0,n.k6)((()=>[(0,n.bF)(Y)])),_:1}),(0,n.bF)(H,null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",L,[(0,n.eW)((0,s.v_)(e.$t("visit_module_link"))+" ",1),(0,n.bF)(Z,{style:{"text-decoration":"none",color:"#2388ae","padding-left":"5px"},to:{path:"/settings/modules",hash:"#account_id_scroll"}},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("click_here"))+" ",1),(0,n.bF)(T,{name:e.mdiShare},null,8,["name"])])),_:1})])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.bF)(ee)],64)}var C=i(85192),S=i(1659),E=i(24622),q=i(60521),P=i(38734),T=i(11470),D=i(93970),M=i(51184),V=i(12566),Q=i(4225),O=i(64775),$=i(76956),X=i(83319),K=i(78652),W=i(89156),R=i(18505);const B={class:"row full-width"},N={class:"col-12"},U={class:"validation-list"},j={class:"alert alert-success",role:"alert"},z=["innerHTML"],H={class:"alert alert-danger",role:"alert"},G=["innerHTML"];function J(e,t,i,o,a,l){const r=(0,n.g2)("q-icon");return""!==e.view_template?((0,n.uX)(),(0,n.Wv)((0,n.$y)(e.view_template),{key:0,currentView:e.view_template},null,8,["currentView"])):((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(e.validation,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:t},[(0,n.Lk)("div",B,[(0,n.Lk)("div",N,(0,s.v_)(t),1)]),(0,n.Lk)("ul",U,[e.success_steps.length>0?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(e.success_steps,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},[(0,n.Lk)("div",j,[(0,n.bF)(r,{name:"done",color:"green",size:"sm"}),(0,n.Lk)("span",{innerHTML:e},null,8,z)])])))),128)):(0,n.Q3)("",!0),e.errors.length>0?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(e.errors,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},[(0,n.Lk)("div",H,[(0,n.bF)(r,{name:"close",color:"red",size:"sm"}),(0,n.Lk)("span",{innerHTML:e},null,8,G)])])))),128)):(0,n.Q3)("",!0)])],64)))),128))}const Y={class:"row full-width"},Z={class:"col-12"},ee={class:"validation-list"},te={class:"alert alert-success",role:"alert"},ie=["innerHTML"],ne={class:"alert alert-danger",role:"alert"},se=["innerHTML"],oe={key:1,class:"container-svg"};function ae(e,t,i,o,a,l){const r=(0,n.g2)("q-icon"),d=(0,n.g2)("q-spinner-gears");return(0,n.uX)(),(0,n.CE)(n.FK,null,[e.validating?(0,n.Q3)("",!0):((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(e.validation,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:t},[(0,n.Lk)("div",Y,[(0,n.Lk)("div",Z,(0,s.v_)(t),1)]),(0,n.Lk)("ul",ee,[e.success_steps.length>0?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(e.success_steps,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},[(0,n.Lk)("div",te,[(0,n.bF)(r,{name:"done",color:"green",size:"sm"}),(0,n.Lk)("span",{innerHTML:e},null,8,ie)])])))),128)):(0,n.Q3)("",!0),e.errors.length>0?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(e.errors,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},[(0,n.Lk)("div",ne,[(0,n.bF)(r,{name:"close",color:"red",size:"sm"}),(0,n.Lk)("span",{innerHTML:e},null,8,se)])])))),128)):(0,n.Q3)("",!0)])],64)))),128)),e.validating?((0,n.uX)(),(0,n.CE)("div",oe,[(0,n.bF)(d,{color:"primary",size:"10em"})])):(0,n.Q3)("",!0)],64)}var le=i(68450),re=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const de=(0,n.pM)({mixins:[],props:{},components:{},data(){return{auto_accounting_setting:$.P1,auto_accounting_types_setting:$.hv,auto_accounting_acc_list_name_setting:$.ez,auto_accounting_dimensions_list_setting:$.qW,auto_accounting_dimensions_options_setting:$.Ej}},mounted:function(){this.validate()},methods:{validate(){return re(this,void 0,void 0,(function*(){try{if(this.validating=!0,this.invalidMainSettings())return;yield this.validateAccounts(),yield this.validateDimensions(),yield this.validateDimensionOptions()}catch(e){const t="Error";this.validation[t]={},this.validation[t].errors=[],this.validation[t].errors.push(e.message)}finally{this.validating=!1}}))},invalidMainSettings(){const e=this.verifyModuleSettings();if(e.length>0){const t=this.$t("missing_auto_accounting_settings");return this.validation[t]={},this.validation[t].errors=[],this.validation[t].success_steps=[],e.forEach((e=>{this.validation[t].errors.push(e)})),!0}return!1},validateDimensionOptions(){return re(this,void 0,void 0,(function*(){const e="Dimensions Options";let t=[];if(this.validation[e]={},this.validation[e].errors=[],this.validation[e].success_steps=[],this.vertifySettings(e,this.auto_accounting_dimensions_options_setting),this.validation[e].errors.length>0)return;const i=this.user_settings[this.auto_accounting_dimensions_options_setting];try{t=yield this.getDimensionDropdownsFromServer();const n=this.$t("list_exists").replace("%s",i);this.validation[e].success_steps.push(n)}catch(o){const t=this.$t("master_data_list_not_found").replace("%s",i);return void this.validation[e].errors.push(t)}if(0===t.length){const t=this.$t("please_check_if_master_data_list_has_data").replace("%s",i);return void this.validation[e].errors.push(t)}this.validation[e].success_steps.push(this.$t("list_has_data"));const n=Object.keys(t[0]),s=["id","name","dimensionid"];this.generateColumnsValidityMessage(n,s,e)}))},validateDimensions(){return re(this,void 0,void 0,(function*(){const e="Dimensions";let t=[];if(this.validation[e]={},this.validation[e].errors=[],this.validation[e].success_steps=[],this.vertifySettings(e,this.auto_accounting_dimensions_list_setting),this.validation[e].errors.length>0)return;const i=this.user_settings[this.auto_accounting_dimensions_list_setting];try{t=yield this.getDimensionsFromServer();const n=this.$t("list_exists").replace("%s",i);this.validation[e].success_steps.push(n)}catch(o){const t=this.$t("master_data_list_not_found").replace("%s",i);return void this.validation[e].errors.push(t)}if(0===t.length){const t=this.$t("please_check_if_master_data_list_has_data").replace("%s",i);return void this.validation[e].errors.push(t)}this.validation[e].success_steps.push(this.$t("list_has_data"));const n=Object.keys(t[0]),s=["id","name"];this.generateColumnsValidityMessage(n,s,e)}))},vertifySettings(e,t){if(!(0,le.a4)(this.user_settings[t])){let i="";return i+=this.$t("please_set_following_setting"),i+="<ul>",i+="<li>"+t+"</li>",i+="</ul>",void this.validation[e].errors.push(i)}},validateAccounts(){return re(this,void 0,void 0,(function*(){const e="Accounts";let t=[];if(this.validation[e]={},this.validation[e].errors=[],this.validation[e].success_steps=[],this.vertifySettings(e,this.auto_accounting_acc_list_name_setting),this.validation[e].errors.length>0)return;const i=this.user_settings[this.auto_accounting_acc_list_name_setting];try{t=yield this.getAccountsFromServer();const n=this.$t("list_exists").replace("%s",i);this.validation[e].success_steps.push(n)}catch(o){const t=this.$t("master_data_list_not_found").replace("%s",i);return void this.validation[e].errors.push(t)}if(0===t.length){const t=this.$t("please_check_if_master_data_list_has_data").replace("%s",i);return void this.validation[e].errors.push(t)}this.validation[e].success_steps.push(this.$t("list_has_data"));const n=Object.keys(t[0]),s=["flexdimensions","nominalaccount","description"];this.generateColumnsValidityMessage(n,s,e)}))},generateColumnsValidityMessage(e,t,i){const n=t.filter((t=>!e.includes(t)));if(0===n.length){let e=this.$t("list_has_all_columns");return e+="<ul>",Array.from(t).forEach((t=>{e+="<li>"+t.replace(/_/g," ")+"</li>"})),e+="</ul>",void this.validation[i].success_steps.push(e)}if(n.length>0){let e=this.$t("list_has_missing_columns");e+="<ul>",Array.from(n).forEach((t=>{e+="<li>"+t.replace(/_/g," ")+"</li>"})),e+="</ul>",this.validation[i].errors.push(e)}const s=t.filter((t=>e.includes(t)));if(s.length!==t.length){let e=this.$t("list_has_columns");e+="<ul>",Array.from(s).forEach((t=>{e+="<li>"+t.replace(/_/g," ")+"</li>"})),e+="</ul>",this.validation[i].success_steps.push(e)}}},setup(){const e=(0,X.NF)(),{getAccountsFromServer:t,getDimensionsFromServer:i,getDimensionDropdownsFromServer:n}=e,s=(0,X.WN)(),{verifyModuleSettings:o}=s,a=(0,X.Bu)(),{user_settings:l}=(0,S.bP)(a);return{verifyModuleSettings:o,user_settings:l,getDimensionDropdownsFromServer:n,getAccountsFromServer:t,getDimensionsFromServer:i,validation:(0,P.KR)({}),validating:(0,P.KR)(!1)}}});var ce=i(12807),ue=i(50492),me=i(85792),he=i(98582),_e=i.n(he);const pe=(0,ce.A)(de,[["render",ae],["__scopeId","data-v-380d11b5"]]),ge=pe;_e()(de,"components",{QIcon:ue.A,QSpinnerGears:me.A});const ve={class:"row full-width"},ye={class:"col-12"},fe={class:"validation-list"},be={class:"alert alert-success",role:"alert"},we=["innerHTML"],xe={class:"alert alert-danger",role:"alert"},ke=["innerHTML"],Ie={key:1,class:"container-svg"};function Ae(e,t,i,o,a,l){const r=(0,n.g2)("q-icon"),d=(0,n.g2)("q-spinner-gears");return(0,n.uX)(),(0,n.CE)(n.FK,null,[e.validating?(0,n.Q3)("",!0):((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(e.validation,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:t},[(0,n.Lk)("div",ve,[(0,n.Lk)("div",ye,(0,s.v_)(t),1)]),(0,n.Lk)("ul",fe,[e.success_steps.length>0?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(e.success_steps,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},[(0,n.Lk)("div",be,[(0,n.bF)(r,{name:"done",color:"green",size:"sm"}),(0,n.Lk)("span",{innerHTML:e},null,8,we)])])))),128)):(0,n.Q3)("",!0),e.errors.length>0?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(e.errors,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},[(0,n.Lk)("div",xe,[(0,n.bF)(r,{name:"close",color:"red",size:"sm"}),(0,n.Lk)("span",{innerHTML:e},null,8,ke)])])))),128)):(0,n.Q3)("",!0)])],64)))),128)),e.validating?((0,n.uX)(),(0,n.CE)("div",Ie,[(0,n.bF)(d,{color:"primary",size:"10em"})])):(0,n.Q3)("",!0)],64)}var Le=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const Fe=(0,n.pM)({mixins:[],props:{},components:{},data(){return{auto_accounting_setting:$.P1,auto_accounting_types_setting:$.hv,auto_accounting_acc_list_name_setting:$.ez,auto_accounting_po_acc_list_name_setting:$.Eq,auto_accounting_dimensions_options_setting:$.Ej,dimension_general_dropdown_accounting:$.Mp}},mounted:function(){this.validate()},methods:{validate(){return Le(this,void 0,void 0,(function*(){try{if(this.validating=!0,this.invalidMainSettings())return;if(this.hasPoMatchData())return void(yield this.validatePoAccounts());yield this.validateAccounts(),yield this.validateDimensionsDropdown(),yield this.validateGeneralDimensionDropdown()}catch(e){const t="Error";this.validation[t]={},this.validation[t].errors=[],this.validation[t].errors.push(e.message)}finally{this.validating=!1}}))},invalidMainSettings(){const e=this.verifyModuleSettings();if(e.length>0){const t=this.$t("missing_auto_accounting_settings");return this.validation[t]={},this.validation[t].errors=[],this.validation[t].success_steps=[],e.forEach((e=>{this.validation[t].errors.push(e)})),!0}return!1},validateDimensionsDropdown(){return Le(this,void 0,void 0,(function*(){const e="Dimensions Range Options";let t=[];if(this.validation[e]={},this.validation[e].errors=[],this.validation[e].success_steps=[],this.vertifySettings(e,this.auto_accounting_dimensions_options_setting),this.validation[e].errors.length>0)return;const i=this.user_settings[this.auto_accounting_dimensions_options_setting];try{t=yield this.getM3DimensionRulesFromServer();const n=this.$t("list_exists").replace("%s",i);this.validation[e].success_steps.push(n)}catch(a){const t=this.$t("master_data_list_not_found").replace("%s",i);return void this.validation[e].errors.push(t)}if(0===t.length){const t=this.$t("please_check_if_master_data_list_has_data").replace("%s",i);return void this.validation[e].errors.push(t)}this.validation[e].success_steps.push(this.$t("list_has_data"));const n={};Object.keys(t[0]).forEach((e=>{let i=e.trim().toLowerCase().replace(/\s+/g,"_");n[i]=t[0][e]}));const s=Object.keys(n),o=["accounting_identity","accounting_dimension","to_accounting_identity","from_accounting_identity","accounting_dimension"];this.generateColumnsValidityMessage(s,o,e)}))},validateGeneralDimensionDropdown(){return Le(this,void 0,void 0,(function*(){const e="Dimensions General Options";let t=[];if(this.validation[e]={},this.validation[e].errors=[],this.validation[e].success_steps=[],this.vertifySettings(e,this.dimension_general_dropdown_accounting),this.validation[e].errors.length>0)return;const i=this.user_settings[this.dimension_general_dropdown_accounting];try{t=yield this.getM3DimensionsFromServer();const n=this.$t("list_exists").replace("%s",i);this.validation[e].success_steps.push(n)}catch(o){const t=this.$t("master_data_list_not_found").replace("%s",i);return void this.validation[e].errors.push(t)}if(0===t.length){const t=this.$t("please_check_if_master_data_list_has_data").replace("%s",i);return void this.validation[e].errors.push(t)}this.validation[e].success_steps.push(this.$t("list_has_data"));const n=Object.keys(t[0]),s=["id","description","dimension","listid","codevalue"];this.generateColumnsValidityMessage(n,s,e)}))},generateColumnsValidityMessage(e,t,i){const n=t.filter((t=>!e.includes(t)));if(0===n.length){let e=this.$t("list_has_all_columns");return e+="<br /><ul>",Array.from(t).forEach((t=>{e+="<li>"+t.replace(/_/g," ")+"</li>"})),e+="</ul>",void this.validation[i].success_steps.push(e)}if(n.length>0){let e=this.$t("list_has_missing_columns");e+="<br /><ul>",Array.from(n).forEach((t=>{e+="<li>"+t.replace(/_/g," ")+"</li>"})),e+="</ul>",this.validation[i].errors.push(e)}const s=t.filter((t=>e.includes(t)));if(s.length!==t.length){let e=this.$t("list_has_columns");e+="<br /><ul>",Array.from(s).forEach((t=>{e+="<li>"+t.replace(/_/g," ")+"</li>"})),e+="</ul>",this.validation[i].success_steps.push(e)}},validatePoAccounts(){return Le(this,void 0,void 0,(function*(){const e="Accounts";let t=[];if(this.validation[e]={},this.validation[e].errors=[],this.validation[e].success_steps=[],!(0,le.a4)(this.user_settings[this.auto_accounting_po_acc_list_name_setting]))return void this.validation[e].errors.push(this.$t("master_data_list_not_found"));if(this.vertifySettings(e,this.auto_accounting_po_acc_list_name_setting),this.validation[e].errors.length>0)return;const i=this.user_settings[this.auto_accounting_po_acc_list_name_setting];try{t=yield this.getM3POAccountsFromServer();const n=this.$t("list_exists").replace("%s",i);this.validation[e].success_steps.push(n)}catch(o){const t=this.$t("master_data_list_not_found").replace("%s",i);return void this.validation[e].errors.push(t)}if(0===t.length){const t=this.$t("please_check_if_master_data_list_has_data").replace("%s",i);return void this.validation[e].errors.push(t)}this.validation[e].success_steps.push(this.$t("list_has_data"));const n=Object.keys(t[0]),s=["id","description"];this.generateColumnsValidityMessage(n,s,e)}))},vertifySettings(e,t){if(!(0,le.a4)(this.user_settings[t])){let i="";return i+=this.$t("please_set_following_setting"),i+="<ul>",i+="<li>"+t+"</li>",i+="</ul>",void this.validation[e].errors.push(i)}},validateAccounts(){return Le(this,void 0,void 0,(function*(){const e="Accounts";let t=[];if(this.validation[e]={},this.validation[e].errors=[],this.validation[e].success_steps=[],this.vertifySettings(e,this.auto_accounting_acc_list_name_setting),this.validation[e].errors.length>0)return;const i=this.user_settings[this.auto_accounting_acc_list_name_setting];try{t=yield this.getM3AccountsFromServer();const n=this.$t("list_exists").replace("%s",i);this.validation[e].success_steps.push(n)}catch(o){const t=this.$t("master_data_list_not_found").replace("%s",i);return void this.validation[e].errors.push(t)}if(0===t.length){const t=this.$t("please_check_if_master_data_list_has_data").replace("%s",i);return void this.validation[e].errors.push(t)}this.validation[e].success_steps.push(this.$t("list_has_data"));const n=Object.keys(t[0]),s=["id","dimensionprofile","nominalaccount","description"];this.generateColumnsValidityMessage(n,s,e)}))}},setup(){const e=(0,X.WN)(),{getM3AccountsFromServer:t,getM3DimensionsFromServer:i,getM3POAccountsFromServer:n,getM3DimensionRulesFromServer:s,verifyModuleSettings:o}=e,a=(0,X.R9)(),{hasPoMatchData:l}=a,r=(0,X.Bu)(),{user_settings:d}=(0,S.bP)(r);return{verifyModuleSettings:o,getM3DimensionRulesFromServer:s,user_settings:d,hasPoMatchData:l,getM3AccountsFromServer:t,getM3DimensionsFromServer:i,getM3POAccountsFromServer:n,validation:(0,P.KR)({}),validating:(0,P.KR)(!1)}}}),Ce=(0,ce.A)(Fe,[["render",Ae],["__scopeId","data-v-c7263cfe"]]),Se=Ce;_e()(Fe,"components",{QIcon:ue.A,QSpinnerGears:me.A});const Ee=(0,n.pM)({mixins:[],props:{},components:{LN_VIEW:ge,M3_VIEW:Se},watch:{view_template:{handler:function(e,t){this.verifyBasicValidation()}}},mounted(){this.verifyBasicValidation()},methods:{verifyBasicValidation(){""===this.view_template&&this.invalidMainSettings()},invalidMainSettings(){const e=this.verifyModuleSettings();if(e.length>0){const t=this.$t("missing_auto_accounting_settings");return this.validation[t]={},this.validation[t].errors=[],this.validation[t].success_steps=[],e.forEach((e=>{this.validation[t].errors.push(e)})),!0}return!1}},setup(){const e=(0,X.WN)(),{verifyModuleSettings:t}=e,{view_template:i}=(0,S.bP)(e);return{verifyModuleSettings:t,view_template:i,validation:(0,P.KR)({})}}}),qe=(0,ce.A)(Ee,[["render",J]]),Pe=qe;function Te(e,t,i,s,o,a){const l=(0,n.g2)("q-btn"),r=(0,n.g2)("export-dialog"),d=(0,n.g2)("q-dialog");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(l,{unelevated:"",class:"bg-primary text-white",tabindex:"1",onClick:e.onProceed,label:e.$t("proceed"),disabled:e.is_view_readonly},null,8,["onClick","label","disabled"]),(0,n.bF)(d,{modelValue:e.display_config_dialog,"onUpdate:modelValue":t[0]||(t[0]=t=>e.display_config_dialog=t),position:"top",class:"export-dialog",persistent:""},{default:(0,n.k6)((()=>[(0,n.bF)(r)])),_:1},8,["modelValue"])],64)}_e()(Ee,"components",{QIcon:ue.A});var De=i(30739),Me=i(41360),Ve=i(46162),Qe=i(82303),Oe=i(85487);const $e={validate:function(e,t){let i=!1;e=e.trim();for(const n of t)e>=n.start&&e<=n.end&&(i=!0);return i}};var Xe=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const Ke=(0,n.pM)({mixins:[E.A,R.A],components:{ExportDialog:Me.A},watch:{config_saved:{handler:function(e,t){!0===t&&!1===e||(this.display_config_dialog=!1)}}},computed:{},methods:{onProceed(){return Xe(this,void 0,void 0,(function*(){try{if(this.is_view_readonly||!(yield this.validateForm()))return;this.processing=!0;const e=yield this.confirmExportConfiguration();if(!e)return void(this.display_config_dialog=!0);this.callExportApi()}catch(e){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(e)}finally{this.processing=!1}}))},prepareJsonForSave(){this.record.accounting={mode:this.accounting_mode,line_items:this.lineItems}},validateForm(){return Xe(this,void 0,void 0,(function*(){let e=!0;try{this.clearErrors(this.lineItems);const t=this.validateLineItemDimensions(this.lineItems),i=yield this.validateAmounts(),n=this.validateAccounts();t&&i&&n||(e=!1,this.showErrorToast(this.$t("please_check_some_values_are_missing")))}catch(t){logError(t)}return e}))},clearErrors(e){for(const[t,i]of e.entries())if(this.clearLineItemErrors(i),i.hasOwnProperty("split_items")&&i.split_items.length>0)for(const[e,n]of i.split_items.entries())this.clearErrors(i.split_items)},clearLineItemErrors(e){e.hasOwnProperty("account_error")&&(e.account_error=""),e.hasOwnProperty("amount_error")&&(e.amount_error=""),e.hasOwnProperty("error")&&(e.error="")},validateLineItemDimensions(e){let t=!0;for(const[i,n]of e.entries()){if(n.account||(n.dimensions=[]),n.dimensions&&n.dimensions.length>0){const e=this.validateDimensionForEach(n.dimensions,n.account);e||(t=!1)}if(n.hasOwnProperty("split_items")&&n.split_items.length>0){const e=this.validateLineItemDimensions(n.split_items);e||(t=!1)}}return t},validateDimensionForEach(e,t){let i=!0;return Array.from(e).forEach(((e,n)=>{e.error="";const s=this.getDimensionRules(t.id,e.id);"m"==e.rule.toLowerCase()&&0===e.value.trim().length?(e.error=this.buildRangeErrorMessage(s,!0),i=!1):s.length>0&&0!==e.value.trim().length&&!1===$e.validate(e.value,s)&&(e.error=this.buildRangeErrorMessage(s),i=!1)})),i},getDimensionRules(e,t){return this.dimension_rules.hasOwnProperty(e)&&this.dimension_rules[e].hasOwnProperty(t)?this.dimension_rules[e][t]:[]},buildRangeErrorMessage(e,t=!1){let i="";if(t&&(i=this.$t("required")),0===e.length)return i;i=(0,le.jw)(i)?"":" - "+i+"<br />",i+="Please add a value within one of the following ranges:<br />";for(const[n,s]of e.entries()){let e=s.start.toString(),t=s.end.toString();i+=e===t?` - ${e}<br />`:` - From "${e}" to "${t}"<br />`}return i},validateAccounts(){const e=this.getSelectedModeLineItems();return this.validateLineItemsAccounts(e)},getSelectedModeLineItems(){if("total_line"===this.accounting_mode){const e=this.lineItems.filter((e=>"total_line_item"===e.type.toLowerCase()));return e}const e=this.lineItems.filter((e=>"line_item"===e.type.toLowerCase()));return e},validateLineItemsAccounts(e){let t=!0;return Array.from(e).forEach(((e,i)=>{if(e.hasOwnProperty("split_items")&&e.split_items.length>0){const i=this.validateLineItemsAccounts(e.split_items);i||(t=!1)}else e.account||(e.account_error=this.$t("required"),t=!1)})),t},validateAmounts(){return Xe(this,void 0,void 0,(function*(){if(!this.isMultiTaxSection)return yield this.validateLineItemAmount();yield this.calculateTotalByMode();let e=!0;for(const[t,i]of this.lineItems.entries()){const t=yield this.checkTotalForEachLineItem(i);t||(e=!1,i.error=this.$t("line_item_total_not_equal_to_line_item_split_total"))}return e}))},validateLineItemAmount(){return Xe(this,void 0,void 0,(function*(){let e=!0;yield this.calculateTotalByMode();const t=this.getTotalLineIndex();if(-1===t)return!1;const i=this.lineItems[t];if(parseFloat((0,De.H2)(i.pending_amount))>0&&(e=!1,i.error=this.$t("total_amount_not_equal_to_line_items")),"total_line"===this.accounting_mode)return e;for(const[n,s]of this.lineItems.entries()){if("total_line_item"===s.type)continue;const t=yield this.checkTotalForEachLineItem(s);t||(e=!1,s.error=this.$t("line_item_total_not_equal_to_line_item_split_total"))}return e}))},confirmExportConfiguration(){return Xe(this,void 0,void 0,(function*(){let e,t=new FormData;t.append("doc_type",this.record.doc_type),t.append("org_id",(0,Oe.I)());let i=yield(0,Ve.L3)();const n=yield Qe.A.post(Ve.FH.export_configuration_existence,t,{headers:{Authorization:i}});return e=n.data.valid,e}))},callExportApi(){return Xe(this,void 0,void 0,(function*(){try{this.prepareJsonForSave(),this.processing=!0;const e=yield this.exportDocument(this.record.doc_id);if(!1===e.success)throw{message:e.message};if(this.showSuccessToast(this.$t("pages.messages.MSG_SAVE")),this.is_view_readonly=!0,!0===e.success)return void this.$router.push("/dashboard");this.showErrorToast(e.data.message),this.record=e.data}catch(e){const t=O.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.processing=!1}}))}},setup(){const e=(0,X.q3)(),{record:t,processing:i}=(0,S.bP)(e),{saveDocument:n,exportDocument:s}=e,o=(0,X.NF)(),{lineItems:a,is_view_readonly:l,accounting_mode:r,dimension_rules:d,isMultiTaxSection:c}=(0,S.bP)(o),{calculateTotalByMode:u,getTotalLineIndex:m,checkTotalForEachLineItem:h}=o,_=(0,X.t8)(),{clearStateForExportDialog:p,config_saved:g}=_,{display_config_dialog:v}=(0,S.bP)(_);return{isMultiTaxSection:c,config_saved:g,exportDocument:s,display_config_dialog:v,getTotalLineIndex:m,calculateTotalByMode:u,saveDocument:n,checkTotalForEachLineItem:h,record:t,processing:i,lineItems:a,is_view_readonly:l,accounting_mode:r,dimension_rules:d}}});var We=i(56384),Re=i(82156);const Be=(0,ce.A)(Ke,[["render",Te]]),Ne=Be;_e()(Ke,"components",{QBtn:We.A,QDialog:Re.A});var Ue=i(77362);function je(e,t,i,o,a,l){const r=(0,n.g2)("q-tooltip"),d=(0,n.g2)("f-btn");return(0,n.uX)(),(0,n.Wv)(d,{class:"q-ml-sm",icon:"save",onClick:e.onSave,disabled:e.is_view_readonly},{default:(0,n.k6)((()=>[(0,n.bF)(r,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("save")),1)])),_:1})])),_:1},8,["onClick","disabled"])}var ze=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const He=(0,n.pM)({mixins:[E.A,R.A],props:{},components:{},watch:{},computed:{},methods:{onSave(){return ze(this,void 0,void 0,(function*(){try{if(this.is_view_readonly)return;this.processing=!0,this.prepareJsonForSave();const e=yield this.saveDocument(this.record.doc_id);if(!1===e.success)throw{message:e.message};this.setDataToCache(),this.showSuccessToast(this.$t("pages.messages.MSG_SAVE"))}catch(e){const t=O.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.processing=!1}}))},prepareJsonForSave(){this.record.accounting={mode:this.accounting_mode,line_items:this.lineItems}}},setup(){const e=(0,X.q3)(),{record:t,processing:i}=(0,S.bP)(e),{saveDocument:n,setDataToCache:s}=e,o=(0,X.NF)(),{lineItems:a,is_view_readonly:l,accounting_mode:r}=(0,S.bP)(o);return{setDataToCache:s,saveDocument:n,record:t,processing:i,lineItems:a,is_view_readonly:l,accounting_mode:r}}});var Ge=i(97410);const Je=(0,ce.A)(He,[["render",je]]),Ye=Je;_e()(He,"components",{QTooltip:Ge.A});var Ze=i(29104);function et(e,t,i,o,a,l){const r=(0,n.g2)("q-tooltip"),d=(0,n.g2)("f-btn"),c=(0,n.g2)("PredictionPopup"),u=(0,n.g2)("q-dialog");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(d,{class:(0,s.C4)(["q-ml-sm",e.is_view_readonly?" disabled ":""]),icon:"img:images/magic_wand.svg",onClick:e.showPredictions},{default:(0,n.k6)((()=>[(0,n.bF)(r,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("show_predictions")),1)])),_:1})])),_:1},8,["class","onClick"]),(0,n.bF)(u,{modelValue:e.show_popup,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show_popup=t),onKeydown:(0,Ze.jR)(e.cleanupOnhide,["esc"]),onHide:e.cleanupOnhide},{default:(0,n.k6)((()=>[(0,n.bF)(c,{show_popup:e.show_popup,onCleanupOnhide:e.cleanupOnhide},null,8,["show_popup","onCleanupOnhide"])])),_:1},8,["modelValue","onKeydown","onHide"])],64)}const tt={class:"text-weight-bold primary-bg-text"},it={class:"row items-center q-mb-sm"},nt={class:"q-ml-auto q-mr-auto"},st=(0,n.Lk)("img",{src:"images/Magier-active.svg"},null,-1),ot={class:"row q-pl-sm q-pt-sm q-pb-sm table-header"},at={class:"col-2 flex items-center justify-left"},lt={class:"col-9 flex items-center justify-left"},rt=(0,n.Lk)("div",{class:"col-1"},null,-1),dt={key:0,class:"row q-pl-sm q-pt-sm total-line-item-area"},ct={class:"col-12 flex flex-center"},ut={class:"row q-pl-sm q-pt-sm"},mt={class:"col-12 flex items-center justify-left"},ht={class:"row pl-20"},_t={class:"row"},pt={class:"col-10 flex items-center justify-left"},gt={class:"col-1"};function vt(e,t,i,o,a,l){const r=(0,n.g2)("q-toolbar-title"),d=(0,n.g2)("q-btn"),c=(0,n.g2)("q-toolbar"),u=(0,n.g2)("q-avatar"),m=(0,n.g2)("q-checkbox"),h=(0,n.g2)("q-circular-progress"),_=(0,n.g2)("q-separator"),p=(0,n.g2)("q-card-section"),g=(0,n.g2)("f-btn"),v=(0,n.g2)("q-card-actions"),y=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.Wv)(y,{style:{width:"800px","max-width":"1060px"}},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"secondary-toolbar"},{default:(0,n.k6)((()=>[(0,n.bF)(r,null,{default:(0,n.k6)((()=>[(0,n.Lk)("span",tt,(0,s.v_)(e.$t("accounts")),1)])),_:1}),(0,n.bF)(d,{flat:"",round:"",dense:"",class:"primary-bg-text",icon:"close",onClick:e.closeDialog},null,8,["onClick"])])),_:1}),(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",it,[(0,n.Lk)("div",nt,[(0,n.bF)(u,{square:"",size:"80px"},{default:(0,n.k6)((()=>[st])),_:1})])]),(0,n.Lk)("div",ot,[(0,n.Lk)("div",at,(0,s.v_)(e.$t("pages.line_items_columns.POSITION")),1),(0,n.Lk)("div",lt,(0,s.v_)(e.$t("accounts")),1),rt]),0===e.predictions_by_mode.length?((0,n.uX)(),(0,n.CE)("div",dt,[(0,n.Lk)("div",ct,(0,s.v_)(e.$t("no_predictions_found")),1)])):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(e.predictions_by_mode,((t,i)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:i},[(0,n.Lk)("div",ut,[(0,n.Lk)("div",mt,[(0,n.Lk)("span",null,(0,s.v_)(i),1)])]),(0,n.Lk)("div",ht,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t,(t=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"col-6 q-mb-sm"},[(0,n.Lk)("div",_t,[(0,n.Lk)("div",pt,[((0,n.uX)(),(0,n.Wv)(m,{modelValue:t.checked,"onUpdate:modelValue":e=>t.checked=e,label:t.account_obj.label,key:e.index+"_"+t.account_obj.value},null,8,["modelValue","onUpdate:modelValue","label"]))]),(0,n.Lk)("div",gt,[(0,n.bF)(h,{"show-value":"","font-size":"12px",value:t.percentage,size:"40px",thickness:.22,color:t.percentage>55?"primary":"red"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(t.percentage)+"% ",1)])),_:2},1032,["value","color"])])])])))),128))]),(0,n.bF)(_,{class:"q-mt-sm"})],64)))),128))])),_:1}),(0,n.bF)(v,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{appearance:"cancel",label:e.$t("cancel"),onClick:e.closeDialog},null,8,["label","onClick"]),e.is_view_readonly?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(g,{key:0,class:"float-right btns",label:e.$t("proceed"),onClick:t[0]||(t[0]=t=>e.proceed())},null,8,["label"]))])),_:1})])),_:1})}const yt=(0,n.pM)({mixins:[E.A],props:{},components:{},watch:{},emits:["itemSelected","cleanupOnhide"],computed:{},mounted(){},methods:{proceed(){this.saveSelections(),this.closeDialog()},saveSelections(){for(let[e,t]of Object.entries(this.predictions_by_mode)){const t=this.predictions_by_mode[e];let i=[];for(const[e,s]of t.entries())s.checked&&(s.checked=!1,i.push(s));if(0===i.length)continue;const n=t[0].line_index;this.updateAccountInStore(n,null,{}),this.lineItems[n].split_items=[],1===i.length&&this.updateAccountInStore(n,null,i[0].account_obj),i.length>1&&this.makeSplittedLineItems(i,n)}},makeSplittedLineItems(e,t){for(const[i,n]of e.entries()){const e=this.baseSplitLineItem();e.percentage="0%",this.lineItems[t].split_items.push(e),this.updateAccountInStore(t,i,n.account_obj)}this.autFillEmptyLineItems(t)},closeDialog(){this.$emit("cleanupOnhide")}},setup(){const e=(0,X.NF)(),{is_view_readonly:t,total_line_predictions:i,line_items_line_predictions:n,accounting_mode:s,lineItems:o,predictions_by_mode:a,prediction_selections:l}=(0,S.bP)(e),{updateAccount:r,hasTotalPredictions:d,hasLineItemsPredictions:c,getTotalLineIndex:u,baseSplitLineItem:m,autFillEmptyLineItems:h}=e;return{is_view_readonly:t,predictions_by_mode:a,updateAccountInStore:r,autFillEmptyLineItems:h,baseSplitLineItem:m,lineItems:o,getTotalLineIndex:u,hasTotalPredictions:d,hasLineItemsPredictions:c,accounting_mode:s,total_line_predictions:i,line_items_line_predictions:n,prediction_selections:l}}});var ft=i(23316),bt=i(36914),wt=i(39150),xt=i(44189),kt=i(3952),It=i(80460),At=i(34222),Lt=i(10386),Ft=i(62669);const Ct=(0,ce.A)(yt,[["render",vt]]),St=Ct;_e()(yt,"components",{QCard:ft.A,QToolbar:bt.A,QToolbarTitle:wt.A,QBtn:We.A,QCardSection:xt.A,QAvatar:kt.A,QCheckbox:It.A,QCircularProgress:At.A,QSeparator:Lt.A,QCardActions:Ft.A});const Et=(0,n.pM)({mixins:[E.A],props:{},components:{PredictionPopup:St},watch:{},computed:{},methods:{showPredictions(){this.show_popup=!0},cleanupOnhide(){this.show_popup=!1}},setup(){const e=(0,X.NF)(),{is_view_readonly:t}=(0,S.bP)(e);return{is_view_readonly:t,show_popup:(0,P.KR)(!1)}}}),qt=(0,ce.A)(Et,[["render",et]]),Pt=qt;_e()(Et,"components",{QTooltip:Ge.A,QDialog:Re.A});const Tt={key:0,class:"row full-width q-mb-sm"},Dt={class:"col-4"},Mt={class:"col-8"},Vt={class:"fixed-height-div scrolle-y"},Qt={class:"q-ml-sm"},Ot={class:"q-ml-sm"};function $t(e,t,i,o,a,l){const r=(0,n.g2)("q-tooltip"),d=(0,n.g2)("q-btn"),c=(0,n.g2)("TrainingModel"),u=(0,n.g2)("TestModel"),m=(0,n.g2)("q-avatar"),h=(0,n.g2)("q-card-section"),_=(0,n.g2)("f-btn"),p=(0,n.g2)("q-card-actions"),g=(0,n.g2)("q-card"),v=(0,n.g2)("q-dialog"),y=(0,n.gN)("close-popup");return(0,n.uX)(),(0,n.CE)(n.FK,null,[e.is_view_readonly?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Tt,[(0,n.Lk)("div",Dt,[(0,n.bF)(d,{class:"bg-primary text-white",unelevated:"",tabindex:"1",onClick:t[0]||(t[0]=t=>e.confirm_all_training_delete=!0),label:e.$t("Delete All"),disabled:e.is_view_readonly},{default:(0,n.k6)((()=>[(0,n.bF)(r,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("delete_all_training_for_this_org")),1)])),_:1})])),_:1},8,["label","disabled"])]),(0,n.Lk)("div",Mt,[(0,n.bF)(d,{class:"bg-primary text-white q-mr-sm",unelevated:"",tabindex:"1",onClick:t[1]||(t[1]=t=>e.confirm_supplier_training_delete=!0),label:e.$t("Delete Supplier Training"),disabled:e.is_view_readonly},{default:(0,n.k6)((()=>[(0,n.bF)(r,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("delete_current_supplier_training")),1)])),_:1})])),_:1},8,["label","disabled"])])])),(0,n.Lk)("div",Vt,[(0,n.bF)(c),(0,n.bF)(u)]),(0,n.bF)(v,{modelValue:e.confirm_all_training_delete,"onUpdate:modelValue":t[4]||(t[4]=t=>e.confirm_all_training_delete=t),onKeydown:t[5]||(t[5]=(0,Ze.jR)((t=>e.confirm_all_training_delete=!1),["esc"])),onHide:t[6]||(t[6]=t=>e.confirm_all_training_delete=!1)},{default:(0,n.k6)((()=>[(0,n.bF)(g,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,n.k6)((()=>[(0,n.bF)(m,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,n.bF)(h,{class:"row items-center"},{default:(0,n.k6)((()=>[(0,n.Lk)("span",Qt,(0,s.v_)(e.$t("confirm_all_training_delete")),1)])),_:1}),(0,n.bF)(p,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.bF)(_,{appearance:"cancel",label:e.$t("cancel"),onClick:t[2]||(t[2]=t=>e.confirm_all_training_delete=!1)},null,8,["label"]),[[y]]),(0,n.bF)(_,{label:e.$t("proceed"),class:"q-mr-sm",onClick:t[3]||(t[3]=t=>e.deleteAllTrainings())},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.bF)(v,{modelValue:e.confirm_supplier_training_delete,"onUpdate:modelValue":t[9]||(t[9]=t=>e.confirm_supplier_training_delete=t),onKeydown:t[10]||(t[10]=(0,Ze.jR)((t=>e.confirm_supplier_training_delete=!1),["esc"])),onHide:t[11]||(t[11]=t=>e.confirm_supplier_training_delete=!1)},{default:(0,n.k6)((()=>[(0,n.bF)(g,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,n.k6)((()=>[(0,n.bF)(m,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,n.bF)(h,{class:"row items-center"},{default:(0,n.k6)((()=>[(0,n.Lk)("span",Ot,(0,s.v_)(e.$t("confirm_supplier_training_delete")),1)])),_:1}),(0,n.bF)(p,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bF)(_,{appearance:"cancel",label:e.$t("cancel"),onClick:t[7]||(t[7]=t=>e.confirm_supplier_training_delete=!1)},null,8,["label"]),(0,n.bF)(_,{label:e.$t("proceed"),class:"q-mr-sm",onClick:t[8]||(t[8]=t=>e.deleteCurrentSupplierTraining())},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}const Xt={class:"border-left-bdbdbd border-bottom-bdbdbd border-right-bdbdbd border-top-bdbdbd"},Kt={class:"row mb-10 mt-8 q-ml-sm full-width table-header"},Wt={key:0,class:"col-4"},Rt={class:"q-ml-sm"},Bt={class:"q-ml-sm"},Nt=(0,n.Lk)("div",{class:"col-2"},null,-1),Ut={key:0,class:"col-4"},jt={class:"ellipsis"},zt=["innerHTML"],Ht={class:"col-2 flex-center"};function Gt(e,t,i,o,a,l){const r=(0,n.g2)("q-space"),d=(0,n.g2)("q-separator"),c=(0,n.g2)("q-tooltip"),u=(0,n.g2)("q-icon"),m=(0,n.g2)("q-input"),h=(0,n.g2)("q-item-label"),_=(0,n.g2)("q-item-section"),p=(0,n.g2)("q-item"),g=(0,n.g2)("q-select"),v=(0,n.g2)("q-btn"),y=(0,n.g2)("q-card-actions"),f=(0,n.g2)("q-expansion-item");return(0,n.uX)(),(0,n.CE)("div",Xt,[(0,n.bF)(f,{"expand-separator":"","header-class":"highlighted-back"},{header:(0,n.k6)((()=>[(0,n.Lk)("span",null,(0,s.v_)(e.$t("train_data")),1),(0,n.bF)(r)])),default:(0,n.k6)((()=>[(0,n.bF)(d),(0,n.Lk)("div",Kt,["total_line"!==e.accounting_mode?((0,n.uX)(),(0,n.CE)("div",Wt,[(0,n.Lk)("span",Rt,(0,s.v_)(e.$t("description")),1)])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,s.C4)("total_line"!==e.accounting_mode?"col-6":"col-10")},[(0,n.Lk)("span",Bt,(0,s.v_)(e.$t("account")),1)],2),Nt]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.training_data,((t,i)=>((0,n.uX)(),(0,n.CE)("div",{key:i,class:"row mb-10 mt-8 q-ml-sm full-width"},["total_line"!==e.accounting_mode?((0,n.uX)(),(0,n.CE)("div",Ut,[(0,n.bF)(m,{readonly:!0,dense:"",outlined:"",modelValue:t["description"],"onUpdate:modelValue":e=>t["description"]=e,class:(0,s.C4)("q-pl-sm accouting-input ")},{append:(0,n.k6)((()=>[""!==e.errors[i]["description"]?((0,n.uX)(),(0,n.Wv)(u,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,n.Q3)("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue"])])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,s.C4)(["account-container","total_line"!==e.accounting_mode?"col-6":"col-10"])},[(0,n.bF)(g,{dense:"",tabindex:"1",class:"q-mr-sm q-pl-sm accounting-select account-select",clearable:"","use-input":"",outlined:"",modelValue:t["ledger_account"],"onUpdate:modelValue":e=>t["ledger_account"]=e,loading:!e.accounts_loaded,options:e.filterAccounts,onFilter:e.filterAccountsEvent,onInputValue:e.selectInputValue,disable:e.is_view_readonly,"emit-value":"","map-options":""},{"selected-item":(0,n.k6)((e=>[(0,n.Lk)("div",jt,(0,s.v_)(e.opt.label),1)])),option:(0,n.k6)((t=>[(0,n.bF)(p,(0,n.v6)({ref_for:!0},t.itemProps),{default:(0,n.k6)((()=>[(0,n.bF)(_,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.Lk)("span",{innerHTML:e.highlightOption(t.opt.label,e.input_value)},null,8,zt)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),append:(0,n.k6)((()=>[""!==e.errors[i]["ledger_account"]?((0,n.uX)(),(0,n.Wv)(u,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("pages.api_user_messages.FIELD_REQUIRED")),1)])),_:1})])),_:1})):(0,n.Q3)("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue","loading","options","onFilter","onInputValue","disable"])],2),(0,n.Lk)("div",Ht,[(0,n.bF)(u,{tabindex:"1",name:"img:images/trash-bin-default.svg",size:"22px",onClick:t=>e.deleteRow(i),onKeydown:(0,Ze.jR)((t=>e.deleteRow(i)),["enter"]),class:(0,s.C4)(["cursor-pointer q-ml-sm mt-4",e.is_view_readonly?"disabled":""])},null,8,["onClick","onKeydown","class"])])])))),128)),(0,n.bF)(y,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bF)(v,{unelevated:"",color:"grey",class:"q-mr-sm",label:e.$t("refresh"),onClick:t[0]||(t[0]=t=>e.refresh())},null,8,["label"]),(0,n.bF)(v,{unelevated:"",color:"primary",class:"q-mr-sm",label:e.$t("train"),onClick:e.trainModelProceed},null,8,["label","onClick"])])),_:1})])),_:1})])}var Jt=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const Yt=(0,n.pM)({mixins:[E.A,R.A],props:{},components:{},watch:{accounting_mode:{handler:function(e,t){e!==t&&this.init()}}},computed:{},mounted:function(){this.init()},methods:{init(){try{if(this.training_data=[],this.input_value="",!this.isValidData())return;for(const e of this.lineItems)"line_items"===this.accounting_mode&&"total_line_item"===e.type||"total_line"===this.accounting_mode&&"line_item"===e.type||this.addEmptyTrainingLine({description:e.description})}catch(e){}},refresh(){this.is_view_readonly||(this.isValidData()?this.init():this.showErrorToast(this.$t("missing_supplier_warning")))},addEmptyTrainingLine(e={}){const t={supplier_name:this.supplier_name,ledger_account:""},i=Object.assign(e,t);this.training_data.push(i);const n=Object.assign({},{ledger_account:"",description:""});this.errors.push(n)},renderTrainingData(){},deleteRow(e){this.training_data.splice(e,1),this.errors.splice(e,1)},filterAccountsEvent(e,t,i){t(e?()=>{this.filterAccounts=this.accountFilterByAnyValue(e)}:()=>{this.filterAccounts=this.accounts})},trainModelProceed(){return Jt(this,void 0,void 0,(function*(){try{if(this.is_view_readonly)return;if(!this.isValidData())return void this.showErrorToast(this.$t("missing_supplier_warning"));if(this.validateTrainingData())return;this.showLoading();const e={line_items:JSON.stringify(this.training_data)},t=yield T.WM.trainModel(e);if(!1===t.success)throw{message:t.data};this.training_data.map((e=>(delete e["ledger_account"],e)));const i=this.getLineItemsForPredictionAccount(),n={line_items:JSON.stringify(i)};this.getPredictions(n),this.showSuccessToast(this.$t("train_model_success_test"))}catch(e){const t=O.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.hideLoading()}}))},validateTrainingData(){let e=!1;for(const[t,i]of this.training_data.entries())this.errors[t]["supplier_name"]="",""===i["supplier_name"]&&(this.errors[t]["supplier_name"]="error",e=!0),this.errors[t]["ledger_account"]="",""===i["ledger_account"]&&(e=!0,this.errors[t]["ledger_account"]="error"),this.errors[t]["description"]="","line_items"===this.accounting_mode&&""===i["description"]&&(e=!0,this.errors[t]["description"]="error");return e},selectInputValue(e){this.input_value=e}},setup(){const e=(0,X.NF)(),{accountFilterByAnyValue:t,is_view_readonly:i,supplier_name:n,accounts:s,accounts_loaded:o,accounting_mode:a,lineItems:l}=(0,S.bP)(e),{isValidData:r,getPredictions:d,getLineItemsForPredictionAccount:c,highlightOption:u}=e,m=(0,P.KR)(e.accounts);return{isValidData:r,highlightOption:u,getLineItemsForPredictionAccount:c,lineItems:l,getPredictions:d,accounts_loaded:o,accounts:s,accountFilterByAnyValue:t,filterAccounts:m,accounting_mode:a,is_view_readonly:i,supplier_name:n,training_data:(0,P.KR)([]),errors:(0,P.KR)([]),input_value:(0,P.KR)("")}}});var Zt=i(88841),ei=i(93676),ti=i(67837),ii=i(94940),ni=i(90124),si=i(25173),oi=i(13796);const ai=(0,ce.A)(Yt,[["render",Gt]]),li=ai;_e()(Yt,"components",{QExpansionItem:Zt.A,QSpace:ei.A,QSeparator:Lt.A,QInput:ti.A,QIcon:ue.A,QTooltip:Ge.A,QSelect:ii.A,QItem:ni.A,QItemSection:si.A,QItemLabel:oi.A,QCardActions:Ft.A,QBtn:We.A});const ri={class:"border-left-bdbdbd border-bottom-bdbdbd border-right-bdbdbd border-top-bdbdbd q-mt-sm"},di={key:0,class:"row q-pl-sm q-pt-sm total-line-item-area"},ci={class:"col-12 flex flex-center"},ui={class:"col-12 q-pl-sm text-weight-bold"},mi={class:"col-11 q-mt-sm q-pl-md"},hi={class:"col-1"},_i={class:"col-12 q-mb-sm q-mt-sm"},pi={class:"q-ml-sm"};function gi(e,t,i,o,a,l){const r=(0,n.g2)("q-space"),d=(0,n.g2)("q-separator"),c=(0,n.g2)("q-circular-progress"),u=(0,n.g2)("q-tooltip"),m=(0,n.g2)("q-icon"),h=(0,n.g2)("q-btn"),_=(0,n.g2)("q-card-actions"),p=(0,n.g2)("q-expansion-item"),g=(0,n.g2)("q-avatar"),v=(0,n.g2)("q-card-section"),y=(0,n.g2)("f-btn"),f=(0,n.g2)("q-card"),b=(0,n.g2)("q-dialog");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",ri,[(0,n.bF)(p,{"expand-separator":"","header-class":"highlighted-back"},{header:(0,n.k6)((()=>[(0,n.Lk)("span",null,(0,s.v_)(e.$t("test_data")),1),(0,n.bF)(r)])),default:(0,n.k6)((()=>[(0,n.bF)(d),e.test_clicked?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[0===e.has_predictions?((0,n.uX)(),(0,n.CE)("div",di,[(0,n.Lk)("div",ci,(0,s.v_)(e.$t("no_predictions_found")),1)])):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.predictions_by_mode,((t,i)=>((0,n.uX)(),(0,n.CE)("div",{key:i,class:"row q-mt-sm"},[(0,n.Lk)("div",ui,(0,s.v_)(i),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t,((t,i)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:i},[(0,n.Lk)("div",mi,[(0,n.bF)(c,{"show-value":"","font-size":"12px",value:t.percentage,size:"40px",thickness:.22,color:t.percentage>55?"primary":"red"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(t.percentage)+"% ",1)])),_:2},1032,["value","color"]),(0,n.eW)(" "+(0,s.v_)(t.account_obj.label),1)]),(0,n.Lk)("div",hi,[(0,n.bF)(m,{tabindex:"1",name:"img:images/trash-bin-default.svg",size:"22px",onClick:i=>e.deletePredictionData(t),onKeydown:(0,Ze.jR)((i=>e.deletePredictionData(t)),["enter"]),class:(0,s.C4)(["cursor-pointer q-ml-sm mt-4",e.is_view_readonly?"disabled":""])},{default:(0,n.k6)((()=>[(0,n.bF)(u,{anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("delete_prediction_data_for_this_account")),1)])),_:1})])),_:2},1032,["onClick","onKeydown","class"])])],64)))),128)),(0,n.Lk)("div",_i,[(0,n.bF)(d)])])))),128))],64)):(0,n.Q3)("",!0),(0,n.bF)(_,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bF)(h,{unelevated:"",color:"primary",class:"q-mr-sm",label:e.$t("test"),onClick:e.Proceed},null,8,["label","onClick"])])),_:1})])),_:1})]),(0,n.bF)(b,{modelValue:e.confirm_ledger_account_delete,"onUpdate:modelValue":t[2]||(t[2]=t=>e.confirm_ledger_account_delete=t),onKeydown:t[3]||(t[3]=(0,Ze.jR)((t=>e.confirm_ledger_account_delete=!1),["esc"])),onHide:t[4]||(t[4]=t=>e.confirm_ledger_account_delete=!1)},{default:(0,n.k6)((()=>[(0,n.bF)(f,null,{default:(0,n.k6)((()=>[(0,n.bF)(v,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,n.k6)((()=>[(0,n.bF)(g,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,n.bF)(v,{class:"row items-center"},{default:(0,n.k6)((()=>[(0,n.Lk)("span",pi,(0,s.v_)(e.$t("confirm_ledger_account_delete")),1)])),_:1}),(0,n.bF)(_,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bF)(y,{appearance:"cancel",label:e.$t("cancel"),onClick:t[0]||(t[0]=t=>e.confirm_ledger_account_delete=!1)},null,8,["label"]),(0,n.bF)(y,{label:e.$t("proceed"),class:"q-mr-sm",onClick:t[1]||(t[1]=t=>e.deleteSupplierLedgerAccount())},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var vi=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const yi=(0,n.pM)({mixins:[E.A,R.A],props:{},components:{},watch:{accounting_mode:{handler:function(e,t){e!==t&&this.init()}}},computed:{has_predictions(){return"total_line"===this.accounting_mode?this.total_line_predictions.length>0:this.line_items_line_predictions.length>0}},mounted:function(){this.init()},methods:{init(){try{if(this.is_view_readonly)return;this.testing_data=[],this.addEmptyLine()}catch(e){}},addEmptyLine(){const e={supplier_name:this.supplier_name};"total_line"!==this.accounting_mode&&(e["description"]=""),this.testing_data.push(e)},deleteRow(e){this.testing_data.splice(e,1)},Proceed(){return vi(this,void 0,void 0,(function*(){try{if(this.is_view_readonly)return;if(!this.isValidData())return void this.showErrorToast(this.$t("missing_supplier_warning"));this.showLoading();const e=this.getLineItemsForPredictionAccount(),t={line_items:JSON.stringify(e)};yield this.getPredictions(t),this.test_clicked=!0}catch(e){const t=O.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.hideLoading()}}))},deletePredictionData(e){this.is_view_readonly||(this.isValidData()?(this.deletionItem=e,this.confirm_ledger_account_delete=!0):this.showErrorToast(this.$t("missing_supplier_warning")))},deleteSupplierLedgerAccount(){return vi(this,void 0,void 0,(function*(){try{if(this.is_view_readonly||0===(0,le.Ns)(this.deletionItem))return;const e={supplier:this.supplier_name,ledger_account:this.deletionItem.account_obj.id};this.deletionItem.hasOwnProperty("description")&&(e["description"]=this.deletionItem.description),this.showLoading();const t=yield T.WM.deleteTrainingData(e);if(!1===t.success)throw{message:t.message};yield this.Proceed(),this.showSuccessToast(this.$t("selected_training_deleted")),this.confirm_ledger_account_delete=!1}catch(e){const t=O.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.hideLoading()}}))}},setup(){const e=(0,X.NF)(),{total_line_predictions:t,line_items_line_predictions:i,is_view_readonly:n,supplier_name:s,accounting_mode:o,predictions_by_mode:a}=(0,S.bP)(e),{getPredictions:l,getLineItemsForPredictionAccount:r,isValidData:d}=e;return{isValidData:d,predictions_by_mode:a,getLineItemsForPredictionAccount:r,total_line_predictions:t,line_items_line_predictions:i,getPredictions:l,accounting_mode:o,is_view_readonly:n,supplier_name:s,testing_data:(0,P.KR)([]),test_clicked:(0,P.KR)(!1),deletionItem:(0,P.KR)({}),confirm_ledger_account_delete:(0,P.KR)(!1)}}}),fi=(0,ce.A)(yi,[["render",gi]]),bi=fi;_e()(yi,"components",{QExpansionItem:Zt.A,QSpace:ei.A,QSeparator:Lt.A,QCircularProgress:At.A,QIcon:ue.A,QTooltip:Ge.A,QCardActions:Ft.A,QBtn:We.A,QDialog:Re.A,QCard:ft.A,QCardSection:xt.A,QAvatar:kt.A});var wi=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const xi=(0,n.pM)({mixins:[E.A,R.A],props:{},components:{TrainingModel:li,TestModel:bi},watch:{},computed:{},mounted:function(){},methods:{deleteAllTrainings(){return wi(this,void 0,void 0,(function*(){try{this.showLoading();const e={all:!0},t=yield T.WM.deleteTrainingData(e);if(!1===t.success)throw{message:t.message};this.clearPredictions(),this.showSuccessToast(this.$t("all_trainings_deleted")),this.confirm_all_training_delete=!1}catch(e){const t=O.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.hideLoading()}}))},deleteCurrentSupplierTraining(){return wi(this,void 0,void 0,(function*(){try{if(!this.isValidData())throw{message:this.$t("supplier_not_found")};this.showLoading();const e={supplier:this.supplier_name},t=yield T.WM.deleteTrainingData(e);if(!1===t.success)throw{message:t.message};this.clearPredictions(),this.showSuccessToast(this.$t("supplier_training_deleted")),this.confirm_supplier_training_delete=!1}catch(e){const t=O.t.getErrorMessage(e);this.showErrorToast(t),logError(e)}finally{this.hideLoading()}}))}},setup(){const e=(0,X.NF)(),{is_view_readonly:t,supplier_name:i}=(0,S.bP)(e),{clearPredictions:n,isValidData:s}=e;return{isValidData:s,clearPredictions:n,is_view_readonly:t,show_popup:(0,P.KR)(!1),supplier_name:i,confirm_all_training_delete:(0,P.KR)(!1),confirm_supplier_training_delete:(0,P.KR)(!1)}}});var ki=i(88672);const Ii=(0,ce.A)(xi,[["render",$t],["__scopeId","data-v-4d8e7708"]]),Ai=Ii;_e()(xi,"components",{QBtn:We.A,QTooltip:Ge.A,QDialog:Re.A,QCard:ft.A,QCardSection:xt.A,QAvatar:kt.A,QCardActions:Ft.A}),_e()(xi,"directives",{ClosePopup:ki.A});const Li={key:0,class:"line-item-container ml-16 q-mr-sm"},Fi={class:"lineItems"},Ci={class:"row items-center table-header"},Si={class:"",style:{width:"4%"}},Ei={class:"header",style:{width:"8%"}},qi=(0,n.Lk)("div",{class:"",style:{width:"10%"}},null,-1),Pi={class:"row items-center q-mt-sm"},Ti={style:{width:"3%"}},Di={class:"q-ma-sm bg-primary primary-bg-text",style:{width:"22px",display:"inline-block"}},Mi=(0,n.Lk)("div",{style:{width:"97%"}},null,-1);function Vi(e,t,i,o,a,l){const r=(0,n.g2)("q-fab"),d=(0,n.g2)("MuLtiTaxSection"),c=(0,n.g2)("TotalLineItem"),u=(0,n.g2)("q-separator"),m=(0,n.g2)("lineItem"),h=(0,n.g2)("q-tooltip"),_=(0,n.g2)("q-icon");return e.line_item_loaded&&e.accounts_loaded?((0,n.uX)(),(0,n.CE)("div",Li,[(0,n.Lk)("div",Fi,[(0,n.Lk)("div",Ci,[(0,n.Lk)("div",Si,[(0,n.bF)(r,{square:"",flat:"",modelValue:e.fab1,"onUpdate:modelValue":t[0]||(t[0]=t=>e.fab1=t),icon:"keyboard_arrow_up",class:"multi-fab",direction:"down",padding:"xs","active-icon":"keyboard_arrow_down","label-class":"",style:{width:"40px"}},null,8,["modelValue"])]),(0,n.Lk)("div",Ei,(0,s.v_)(e.$t("pages.line_items_columns.POSITION")),1),(0,n.Lk)("div",{class:"header",style:(0,s.Tr)(e.columnWidth)},(0,s.v_)(e.$t("accounts")),5),e.hasAdditionalFields()?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"header",style:(0,s.Tr)(e.columnWidth)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.accounting_additional_fields,((t,i)=>((0,n.uX)(),(0,n.CE)("div",{key:i,style:(0,s.Tr)(e.dynamicAdditionalFieldStyle)},(0,s.v_)(t.field_label),5)))),128))],4)):(0,n.Q3)("",!0),e.isMultiTaxSection&&"line_items"!=e.accounting_mode?((0,n.uX)(),(0,n.CE)("div",{key:1,class:"header",style:(0,s.Tr)(e.columnWidth)},(0,s.v_)(e.$t("tax_code_country")),5)):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:"header",style:(0,s.Tr)(e.columnWidth)},(0,s.v_)(e.$t("amount_title")),5),qi]),e.isMultiTaxSection?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},["line_items"!=e.accounting_mode?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(e.lineItems,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:e},["total_line_item"==e.type?((0,n.uX)(),(0,n.Wv)(d,{key:0,index:t},null,8,["index"])):(0,n.Q3)("",!0)],64)))),128)):(0,n.Q3)("",!0)],64)):((0,n.uX)(),(0,n.Wv)(c,{key:1})),(0,n.bF)(u),"line_items"===e.accounting_mode?((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.lineItems,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:e},["line_item"===e.type?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.bF)(m,{index:t},null,8,["index"]),(0,n.bF)(u,{class:"q-mt-sm"})],64)):(0,n.Q3)("",!0)],64)))),128)),(0,n.Lk)("div",Pi,[(0,n.Lk)("div",Ti,[(0,n.Lk)("div",Di,[(0,n.bF)(_,{name:"add",size:"22px",onClick:t[1]||(t[1]=t=>e.addLineItem()),onKeydown:t[2]||(t[2]=(0,Ze.jR)((t=>e.addLineItem()),["enter"])),tabindex:"1",class:(0,s.C4)(["cursor-pointer",e.is_view_readonly?"disabled":""])},{default:(0,n.k6)((()=>[(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("add_new_line_item")),1)])),_:1})])),_:1},8,["class"])])]),Mi])],64)):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)}const Qi=["id","data-id"],Oi=(0,n.Lk)("div",{class:"",style:{width:"4%"}},null,-1),$i={class:"",style:{width:"8%"}},Xi={key:0},Ki={class:"dimensions",style:{"padding-right":"9px"}},Wi={style:{width:"10%"}},Ri={class:"q-ml-sm bg-primary primary-bg-text",style:{width:"22px",display:"inline-block"}},Bi={class:"splitted-line-items",style:{width:"100%"}},Ni={key:0,class:"row q-pt-sm"},Ui=(0,n.Lk)("div",{style:{width:"12%"}},null,-1),ji={style:{width:"37%"}},zi={class:"float-right q-mr-md"},Hi={style:{width:"51%"}},Gi={key:0,style:{"margin-left":"12px"}};function Ji(e,t,i,o,a,l){const r=(0,n.g2)("Account"),d=(0,n.g2)("Dimensions"),c=(0,n.g2)("q-input"),u=(0,n.g2)("Amount"),m=(0,n.g2)("SplitLineItemBtn"),h=(0,n.g2)("UnSplitLineItemBtn"),_=(0,n.g2)("AddChildLineItem"),p=(0,n.g2)("SplitedLineItems"),g=(0,n.g2)("q-tooltip"),v=(0,n.g2)("q-icon");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",{class:"row q-mt-sm",id:e.lineItems[e.index].id,"data-id":e.lineItems[e.index].id},[Oi,(0,n.Lk)("div",$i,[e.lineItems[e.index].hasOwnProperty("position")?((0,n.uX)(),(0,n.CE)("span",Xi,(0,s.v_)(e.lineItems[e.index].position),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",{class:"account-container",style:(0,s.Tr)(e.columnWidth)},[(0,n.bF)(r,{readonly:e.lineItems[e.index].readonly,onUpdateAccount:e.updateAccount,item:e.lineItems[e.index],index:e.index},null,8,["readonly","onUpdateAccount","item","index"]),(0,n.Lk)("div",Ki,[(0,n.bF)(d,{index:e.index},null,8,["index"])])],4),e.hasAdditionalFields()?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"q-pr-sm",style:(0,s.Tr)(e.columnWidth)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.accounting_additional_fields,((t,i)=>((0,n.uX)(),(0,n.CE)("div",{key:i,style:(0,s.Tr)(e.dynamicAdditionalFieldStyle)},[e.lineItems[e.index].hasOwnProperty(t.field_name)?((0,n.uX)(),(0,n.Wv)(c,{key:0,class:"accouting-input column inline full-width",outlined:"",modelValue:e.lineItems[e.index][t.field_name],"onUpdate:modelValue":i=>e.lineItems[e.index][t.field_name]=i,disable:e.lineItems[e.index].split_items.length>0||e.is_view_readonly},null,8,["modelValue","onUpdate:modelValue","disable"])):(0,n.Q3)("",!0)],4)))),128))],4)):(0,n.Q3)("",!0),(0,n.Lk)("div",{style:(0,s.Tr)(e.columnWidth)},[(0,n.bF)(u,{index:e.index},null,8,["index"])],4),(0,n.Lk)("div",Wi,[(0,n.bF)(m,{index:e.index},null,8,["index"]),(0,n.bF)(h,{index:e.index},null,8,["index"]),(0,n.Lk)("div",Ri,[(0,n.bF)(_,{index:e.index},null,8,["index"])])])],8,Qi),(0,n.Lk)("div",Bi,[(0,n.bF)(p,{index:e.index,columnWidth:e.columnWidth},null,8,["index","columnWidth"])]),e.lineItems[e.index].split_items.length>0?((0,n.uX)(),(0,n.CE)("div",Ni,[Ui,(0,n.Lk)("div",ji,[(0,n.Lk)("span",zi,(0,s.v_)(e.$t("unsettled_amount"))+": ",1)]),(0,n.Lk)("div",Hi,[e.lineItems[e.index].hasOwnProperty("pending_amount")?((0,n.uX)(),(0,n.CE)("span",Gi,(0,s.v_)(e.lineItems[e.index].pending_amount),1)):(0,n.Q3)("",!0),""!==e.lineItems[e.index].error?((0,n.uX)(),(0,n.Wv)(v,{key:1,flat:"",dense:"",name:"error",size:"20px",color:"red",class:"q-ml-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.lineItems[e.index].error),1)])),_:1})])),_:1})):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],64)}function Yi(e,t,i,o,a,l){const r=(0,n.g2)("q-tooltip"),d=(0,n.g2)("q-icon"),c=(0,n.g2)("q-input");return(0,n.uX)(),(0,n.Wv)(c,{tabindex:"1",class:"accouting-input amount-input",outlined:"",modelValue:e.lineItems[e.index].amount,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.lineItems[e.index].amount=t),t[1]||(t[1]=t=>{e.amountUpdated()})],disable:e.isReadOnly()},{append:(0,n.k6)((()=>[""!==e.lineItems[e.index]["amount_error"]?((0,n.uX)(),(0,n.Wv)(d,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.lineItems[e.index]["amount_error"]),1)])),_:1})])),_:1})):(0,n.Q3)("",!0)])),_:1},8,["modelValue","disable"])}const Zi=(0,n.pM)({mixins:[],props:{index:{type:Number,required:!0}},components:{},methods:{isReadOnly(){return this.lineItems[this.index].split_items.length>0||(!(!this.lineItems[this.index].hasOwnProperty("amount_readonly")||!0!==this.lineItems[this.index].amount_readonly)||(!!Boolean(this.lineItems[this.index].readonly)||!!Boolean(this.is_view_readonly)))},clearlineItemAmountError(e){this.lineItems[e].amount_error=""},amountUpdated(){this.is_view_readonly||(this.clearlineItemAmountError(this.index),this.lineItems[this.index]||(this.lineItems[this.index].amount_error=this.$t("amount_is_empty")),(0,De.bA)(this.lineItems[this.index].amount)?this.calculateTotalByMode():this.lineItems[this.index].amount_error=this.$t("amount_invalid"))}},setup(){const e=(0,X.NF)(),{lineItems:t,amount_format_locale:i,is_view_readonly:n}=(0,S.bP)(e),{calculateTotalByMode:s}=e;return{calculateTotalByMode:s,is_view_readonly:n,amount_format_locale:i,lineItems:t}}}),en=(0,ce.A)(Zi,[["render",Yi]]),tn=en;_e()(Zi,"components",{QInput:ti.A,QIcon:ue.A,QTooltip:Ge.A});const nn={class:"ellipsis"},sn=["innerHTML"],on=["innerHTML"],an={class:"row full-width account-search-row q-mb-md back-white p-t-20"},ln={class:"grid account-categories"},rn={class:"content"};function dn(e,t,i,o,a,l){const r=(0,n.g2)("q-item-label"),d=(0,n.g2)("q-item-section"),c=(0,n.g2)("q-item"),u=(0,n.g2)("q-tooltip"),m=(0,n.g2)("q-icon"),h=(0,n.g2)("q-select"),_=(0,n.g2)("q-input"),p=(0,n.g2)("DisplayAccounts"),g=(0,n.g2)("q-card-section"),v=(0,n.g2)("dialog-draggable");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(h,{tabindex:"1",class:"q-mr-sm accounting-select account-select",clearable:"","use-input":"",outlined:"",modelValue:e.localValue,"onUpdate:modelValue":t[1]||(t[1]=t=>e.localValue=t),loading:!e.accounts_loaded,options:e.filterAccounts,onInputValue:e.selectInputValue,onFilter:e.filterAccountsEvent,disable:e.isReadOnly()},{"selected-item":(0,n.k6)((e=>[(0,n.Lk)("div",nn,(0,s.v_)(e.opt.label),1)])),option:(0,n.k6)((t=>[(0,n.bF)(c,(0,s._B)((0,n.Ng)(t.itemProps)),{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>[!1===t.opt.parent?((0,n.uX)(),(0,n.Wv)(r,{key:0,class:(0,s.C4)("pl-20 ")},{default:(0,n.k6)((()=>[(0,n.Lk)("span",{innerHTML:e.highlightOption(t.opt.label,e.input_value)},null,8,sn)])),_:2},1024)):((0,n.uX)(),(0,n.Wv)(r,{key:1},{default:(0,n.k6)((()=>[(0,n.Lk)("span",{innerHTML:e.highlightOption(t.opt.label,e.input_value)},null,8,on)])),_:2},1024))])),_:2},1024)])),_:2},1040)])),append:(0,n.k6)((()=>[""!==e.account_error?((0,n.uX)(),(0,n.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.account_error),1)])),_:1})])),_:1})):(0,n.Q3)("",!0),e.view_template===e.view_types.ln?((0,n.uX)(),(0,n.Wv)(m,{key:1,flat:"",dense:"",size:"24px",class:"cursor-pointer",name:"list",onClick:t[0]||(t[0]=(0,Ze.D$)((t=>e.openAccountDialog()),["stop","prevent"]))},{default:(0,n.k6)((()=>[(0,n.bF)(u,{anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("select_category_manually")),1)])),_:1})])),_:1})):(0,n.Q3)("",!0)])),_:1},8,["modelValue","loading","options","onInputValue","onFilter","disable"]),(0,n.bF)(v,{modelValue:e.display_accounts_dialog,"onUpdate:modelValue":t[3]||(t[3]=t=>e.display_accounts_dialog=t),"full-width":"",onKeydown:(0,Ze.jR)(e.closeDialog,["esc"]),title:e.$t("select_category_manually"),onOnHide:e.closeDialog,width:e.popup_width},{default:(0,n.k6)((()=>[(0,n.bF)(g,{class:"account-container"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",an,[(0,n.bF)(_,{modelValue:e.search_account,"onUpdate:modelValue":t[2]||(t[2]=t=>e.search_account=t),outlined:"",dense:"",class:"col-12 search_account_input",placeholder:e.$t("pages.user.search")+" ("+e.$t("after_typing_press_enter")+")",clearable:"",onClear:e.clearManualAccountsSearch,onKeyup:(0,Ze.jR)(e.searchAccounts,["enter"])},{append:(0,n.k6)((()=>[(0,n.bF)(m,{name:"search",onClick:e.searchAccounts},null,8,["onClick"])])),_:1},8,["modelValue","placeholder","onClear","onKeyup"])]),(0,n.Lk)("div",ln,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dialogFilteredAccounts,((t,i)=>((0,n.uX)(),(0,n.CE)("div",{key:i,class:"item"},[(0,n.Lk)("div",rn,[(0,n.bF)(p,{onAccountSelected:e.accountSelected,nodes:t},null,8,["onAccountSelected","nodes"])])])))),128))])])),_:1})])),_:1},8,["modelValue","onKeydown","title","onOnHide","width"])],64)}var cn=i(96587);const un={key:0,class:"childern account-categories-ul"};function mn(e,t,i,o,a,l){const r=(0,n.g2)("AccountCategory");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("span",{class:"account-link row cursor-pointer",onClick:t[0]||(t[0]=t=>e.accountSelected(e.nodes.value))},(0,s.v_)(e.nodes.label),1),e.nodes.children.length>0?((0,n.uX)(),(0,n.CE)("ul",un,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.nodes.children,((t,i)=>((0,n.uX)(),(0,n.CE)("li",{key:i},[(0,n.bF)(r,{onAccountSelected:e.accountSelected,nodes:t},null,8,["onAccountSelected","nodes"])])))),128))])):(0,n.Q3)("",!0)],64)}const hn=(0,n.pM)({name:"AccountCategory",props:{nodes:{type:Object,required:!0}},emits:["accountSelected"],methods:{accountSelected(e){this.$emit("accountSelected",e)}},setup(){return{}}}),_n=(0,ce.A)(hn,[["render",mn]]),pn=_n;var gn=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const vn=(0,n.pM)({mixins:[],props:{item:{type:Object,required:!0},readonly:{type:Boolean,default:!1},index:{type:Number,required:!0},child_index:{type:Number}},components:{dialogDraggable:cn.A,DisplayAccounts:pn},emits:["update-account"],computed:{account_error:function(){return String(this.item.account_error)},show_auto_detect:function(){let e=!1;return this.hasTotalPredictions()&&(e=!0),this.hasLineItemsPredictions()&&(e=!0),e},localValue:{get(){return this.item.account},set(e){this.$emit("update-account",{index:this.index,value:e})}}},mounted(){this.input_value="",this.popup_width=this.calculateWidthForPopuup(),window.addEventListener("resize",this.calculateWidthForPopuup)},unmounted:function(){window.removeEventListener("resize",this.calculateWidthForPopuup)},methods:{init(){return gn(this,void 0,void 0,(function*(){yield this.$nextTick(),this.searchInput=document.querySelector(".search_account_input"),this.searchInput&&this.searchInput.focus()}))},calculateWidthForPopuup(){let e="800";const t=document.querySelector(".accounting-area");if(!t)return e;const i=t.offsetWidth-300;return i<=0?e:String(i)},closeDialog(){this.dialogFilteredAccounts=this.categorized_accounts,this.display_accounts_dialog=!1},isReadOnly(){return!!this.is_view_readonly||(!!Boolean(this.item.readonly)||!!(this.item.hasOwnProperty("split_items")&&this.item.split_items.length>0))},filterAccountsEvent(e,t,i){t(e?()=>{this.filterAccounts=this.accountFilterByAnyValue(e)}:()=>{this.filterAccounts=this.accounts})},searchAccounts(){if(!this.search_account||0===this.search_account.length)return this.dialogFilteredAccounts=this.categorized_accounts,void this.afterAccountsRendered();const e=this.search_account.toLowerCase(),t=this.accounts.filter((t=>t.label.toLowerCase().indexOf(e)>-1));this.dialogFilteredAccounts=this.getAccountAsCategories(t),this.afterAccountsRendered()},openAccountDialog(){this.search_account="",this.display_accounts_dialog=!0,this.init(),this.afterAccountsRendered()},afterAccountsRendered(){setTimeout((()=>{this.resizeAllGridItems()}),0)},clearManualAccountsSearch(){this.search_account="",this.dialogFilteredAccounts=this.categorized_accounts,this.afterAccountsRendered()},accountSelected(e){const t=this.accounts.filter((t=>t.value.toLowerCase().indexOf(e)>-1));t.length>0&&(this.localValue=t[0]),this.closeDialog()},resizeAllGridItems(){const e=document.getElementsByClassName("item");for(let t=0;t<e.length;t++)this.resizeGridItem(e[t])},resizeGridItem(e){const t=document.getElementsByClassName("grid")[0];if(!t)return;const i=parseInt(window.getComputedStyle(t).getPropertyValue("grid-auto-rows")),n=parseInt(window.getComputedStyle(t).getPropertyValue("grid-row-gap")),s=e.querySelector(".content").offsetHeight,o=Math.ceil((s+n)/(i+n));e.style.gridRowEnd="span "+o},selectInputValue(e){this.input_value=e}},setup(){const e=(0,X.NF)(),{categorized_accounts:t,accounts:i,accounts_loaded:n,is_view_readonly:s,accountFilterByAnyValue:o,total_line_predictions:a,line_items_line_predictions:l,accounting_mode:r}=(0,S.bP)(e),{hasTotalPredictions:d,hasLineItemsPredictions:c,getAccountAsCategories:u,highlightOption:m}=e,h=(0,P.KR)(e.accounts),_=(0,P.KR)(e.categorized_accounts),p=(0,X.WN)(),{view_template:g,view_types:v}=(0,S.bP)(p);return{highlightOption:m,view_types:v,view_template:g,getAccountAsCategories:u,categorized_accounts:t,hasTotalPredictions:d,hasLineItemsPredictions:c,accounting_mode:r,total_line_predictions:a,line_items_line_predictions:l,is_view_readonly:s,filterAccounts:h,dialogFilteredAccounts:_,accounts_loaded:n,accounts:i,accountFilterByAnyValue:o,display_accounts_dialog:(0,P.KR)(!1),popup_width:(0,P.KR)("800"),search_account:(0,P.KR)(""),searchInput:(0,P.KR)({}),input_value:(0,P.KR)("")}}}),yn=(0,ce.A)(vn,[["render",dn],["__scopeId","data-v-aeb637e6"]]),fn=yn;_e()(vn,"components",{QSelect:ii.A,QItem:ni.A,QItemSection:si.A,QItemLabel:oi.A,QIcon:ue.A,QTooltip:Ge.A,QCardSection:xt.A,QInput:ti.A});const bn={key:0,class:"q-pr-sm text-container"};function wn(e,t,i,o,a,l){const r=(0,n.g2)("Dimension");return e.hasDimensions?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(e.lineItems[e.index].dimensions,((t,i)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:i},["p"!==t.rule.toLowerCase()?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,s.C4)(["row items-center q-mt-sm dimension-container",e.expert_mode?"export-mode":""])},[0===i?((0,n.uX)(),(0,n.CE)("div",bn,(0,s.v_)(e.$t("dimensions"))+": ",1)):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,s.C4)(0===i?"input-container":" input-100 ")},[(0,n.bF)(r,{readonly:e.lineItems[e.index].readonly,onUpdateDimension:e.updateDimension,item:t,index:i,account:e.lineItems[e.index].account},null,8,["readonly","onUpdateDimension","item","index","account"])],2)],2)):(0,n.Q3)("",!0)],64)))),128)):(0,n.Q3)("",!0)}const xn={key:0,class:"text-red"},kn={class:"ellipsis"},In=["innerHTML"],An=["innerHTML"],Ln={key:0,class:"text-red"},Fn=["innerHTML"];function Cn(e,t,i,o,a,l){const r=(0,n.g2)("q-item-label"),d=(0,n.g2)("q-item-section"),c=(0,n.g2)("q-item"),u=(0,n.g2)("q-tooltip"),m=(0,n.g2)("q-icon"),h=(0,n.g2)("q-select"),_=(0,n.g2)("q-input");return(0,n.uX)(),(0,n.CE)(n.FK,null,[e.hasList?((0,n.uX)(),(0,n.Wv)(h,{key:0,tabindex:"1",class:"accounting-select dimension-select",clearable:"","use-input":"",outlined:"",modelValue:e.localValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.localValue=t),loading:!e.accounts_loaded,options:e.dimension_options,onFilter:e.filterListEvent,onInputValue:e.selectInputValue,"emit-value":"","map-options":"",disable:e.is_view_readonly||e.dimension_readonly,label:e.item.name+("m"===e.item.rule.toLowerCase()?" *":"")},{label:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.item.name)+" ",1),"m"===e.item.rule.toLowerCase()?((0,n.uX)(),(0,n.CE)("span",xn," *")):(0,n.Q3)("",!0)])),"selected-item":(0,n.k6)((e=>[(0,n.Lk)("div",kn,(0,s.v_)(e.opt.label),1)])),option:(0,n.k6)((t=>[(0,n.bF)(c,(0,s._B)((0,n.Ng)(t.itemProps)),{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.bF)(r,null,{default:(0,n.k6)((()=>[(0,n.Lk)("span",{innerHTML:e.highlightOption(t.opt.label,e.input_value)},null,8,In)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),append:(0,n.k6)((()=>[""!==e.dimension_error?((0,n.uX)(),(0,n.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.Lk)("span",{innerHTML:e.dimension_error},null,8,An)])),_:1})])),_:1})):(0,n.Q3)("",!0)])),_:1},8,["modelValue","loading","options","onFilter","onInputValue","disable","label"])):(0,n.Q3)("",!0),e.hasList?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(_,{key:1,class:"accouting-input column inline full-width dimension-input",outlined:"",label:e.item.name+("m"===e.item.rule.toLowerCase()?"*":""),modelValue:e.localValue,"onUpdate:modelValue":t[1]||(t[1]=t=>e.localValue=t),disable:!!e.is_view_readonly},{label:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.item.name)+" ",1),"m"===e.item.rule.toLowerCase()?((0,n.uX)(),(0,n.CE)("span",Ln," *")):(0,n.Q3)("",!0)])),append:(0,n.k6)((()=>[""!==e.dimension_error?((0,n.uX)(),(0,n.Wv)(m,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.Lk)("span",{innerHTML:e.dimension_error},null,8,Fn)])),_:1})])),_:1})):(0,n.Q3)("",!0)])),_:1},8,["label","modelValue","disable"]))],64)}const Sn=(0,n.pM)({mixins:[],props:{item:{type:Object,required:!0},readonly:{type:Boolean,default:!1},index:{type:Number,required:!0},account:{type:Object,required:!0}},watch:{dimension_dropdowns:{deep:!0,handler:function(e,t){this.setDropDownOptions()}}},components:{},computed:{dimension_error:function(){return String(this.item.error)},localValue:{get(){return String(this.item.value)},set(e){this.$emit("update-dimension",{index:this.index,value:e})}},hasList:function(){return 0!==(0,le.Ns)(this.account)&&(this.view_template==this.view_types.m3?this.hasDimensionByAccount():!!(this.dimension_dropdowns.hasOwnProperty(this.item.id)&&this.dimension_dropdowns[this.item.id].length>0))}},mounted:function(){this.dimension_value=this.item.value,this.input_value="",this.setDropDownOptions()},methods:{setDropDownOptions(){if(0!==(0,le.Ns)(this.account)){if(this.view_template!=this.view_types.m3)return this.dimension_dropdowns.hasOwnProperty(this.item.id)&&this.dimension_dropdowns[this.item.id].length>0?(this.all_dimension_options=this.dimension_dropdowns[this.item.id],void this.setDimensionOptions()):void this.resetOptions();this.getDimenionOptionbyAccount()}else this.resetOptions()},resetOptions(){this.all_dimension_options=[],this.dimension_options=this.all_dimension_options},setDimensionOptions(){this.dimension_options=JSON.parse(JSON.stringify(this.all_dimension_options))},hasDimensionByAccount(){let e=!1;const t=this.isRangeDimension();return t&&this.isRangeDimensionHasOptions()&&(e=!0),e||t||!this.isGeneralDimension()||(e=!0),e},isGeneralDimension(){return!!(this.dimension_general_dropdowns.hasOwnProperty(this.item.id)&&this.dimension_general_dropdowns[this.item.id].length>0)},isRangeDimensionHasOptions(){return!(!this.dimension_dropdowns.hasOwnProperty(this.account.value)||!this.dimension_dropdowns[this.account.value].hasOwnProperty(this.item.id))},isRangeDimension(){return!(!this.dimension_rules.hasOwnProperty(this.account.value)||!this.dimension_rules[this.account.value].hasOwnProperty(this.item.id))},getDimenionOptionbyAccount(){if(!this.hasDimensionByAccount())return void this.resetOptions();const e=this.isRangeDimension();e&&this.isRangeDimensionHasOptions()&&(this.all_dimension_options=this.dimension_dropdowns[this.account.value][this.item.id]),!e&&this.isGeneralDimension()&&(this.all_dimension_options=this.dimension_general_dropdowns[this.item.id]),this.setDimensionOptions()},filterListEvent(e,t,i){t(e?()=>{const t=e.toLowerCase();let i=this.all_dimension_options.filter((e=>e.label.toLowerCase().startsWith(t)));0===i.length&&(i=this.all_dimension_options.filter((e=>e.label.toLowerCase().indexOf(t)>-1))),this.dimension_options=i}:()=>{this.setDimensionOptions()})},selectInputValue(e){this.input_value=e}},setup(){const e=(0,X.NF)(),{dimension_dropdowns:t,dimension_rules:i,accounts_loaded:n,is_view_readonly:s,dimension_general_dropdowns:o}=(0,S.bP)(e),{highlightOption:a}=e,l=(0,X.WN)(),{view_template:r,view_types:d}=(0,S.bP)(l);return{highlightOption:a,view_types:d,view_template:r,is_view_readonly:s,dimension_dropdowns:t,dimension_general_dropdowns:o,accounts_loaded:n,dimension_rules:i,dimension_options:(0,P.KR)([]),all_dimension_options:(0,P.KR)([]),dimension_value:(0,P.KR)(""),input_value:(0,P.KR)("")}}}),En=(0,ce.A)(Sn,[["render",Cn]]),qn=En;_e()(Sn,"components",{QSelect:ii.A,QItem:ni.A,QItemSection:si.A,QItemLabel:oi.A,QIcon:ue.A,QTooltip:Ge.A,QInput:ti.A});const Pn=(0,n.pM)({mixins:[],props:{index:{type:Number,required:!0}},computed:{hasDimensions:function(){return!(!this.lineItems[this.index].hasOwnProperty("dimensions")||void 0===this.lineItems[this.index].dimensions)},setDimensionList(){return!0}},components:{Dimension:qn},methods:{updateDimension(e){if(!e.hasOwnProperty("index")||!e.hasOwnProperty("value"))return;let t=e.value;void 0!==t&&null!==t||(t=""),this.lineItems[this.index].dimensions[e.index].error="",this.lineItems[this.index].dimensions[e.index].value=t}},setup(){const e=(0,X.NF)(),{lineItems:t,dimensions:i,dimension_dropdowns:n,is_view_readonly:s,accounts_loaded:o,expert_mode:a}=(0,S.bP)(e);return{expert_mode:a,accounts_loaded:o,is_view_readonly:s,dimensions:i,lineItems:t,dimension_dropdowns:n}}}),Tn=(0,ce.A)(Pn,[["render",wn],["__scopeId","data-v-4c594f82"]]),Dn=Tn;function Mn(e,t,i,o,a,l){const r=(0,n.g2)("q-tooltip"),d=(0,n.g2)("q-icon");return(0,n.uX)(),(0,n.Wv)(d,{tabindex:"1",name:"add",size:"22px",onClick:e.addChildLineItem,onKeydown:(0,Ze.jR)(e.addChildLineItem,["enter"]),class:(0,s.C4)(["cursor-pointer",e.is_view_readonly||e.lineItems[e.index].readonly?"disabled":""])},{default:(0,n.k6)((()=>[(0,n.bF)(r,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("split_line_item")),1)])),_:1})])),_:1},8,["onClick","onKeydown","class"])}const Vn=(0,n.pM)({mixins:[],props:{index:{type:Number,required:!0}},components:{},methods:{addChildLineItem(){if(this.is_view_readonly||!this.lineItems[this.index].amount||""===this.lineItems[this.index].amount||!0===this.lineItems[this.index].readonly)return;this.resetItem(this.index);const e=this.baseSplitLineItem();e.percentage="0%",e.position=this.lineItems[this.index].position,this.lineItems[this.index].split_items.push(e),this.calculateTotalByMode()}},setup(){const e=(0,X.NF)(),{lineItems:t,is_view_readonly:i}=(0,S.bP)(e),{baseSplitLineItem:n,calculateTotalByMode:s,resetItem:o}=e;return{resetItem:o,calculateTotalByMode:s,is_view_readonly:i,baseSplitLineItem:n,lineItems:t}}}),Qn=(0,ce.A)(Vn,[["render",Mn]]),On=Qn;_e()(Vn,"components",{QIcon:ue.A,QTooltip:Ge.A});const $n=(0,n.Lk)("img",{width:"20",src:"images/split_accounting.svg"},null,-1);function Xn(e,t,i,o,a,l){const r=(0,n.g2)("q-tooltip"),d=(0,n.g2)("q-icon");return 0===e.lineItems[e.index].split_items.length?((0,n.uX)(),(0,n.Wv)(d,{key:0,class:(0,s.C4)(["q-ml-sm cursor-pointer accounting-icon",e.is_view_readonly||e.lineItems[e.index].readonly?"disabled":""]),tabindex:"1",color:"grey",size:"md",onClick:e.splitLineItem,onKeydown:(0,Ze.jR)(e.splitLineItem,["enter"])},{default:(0,n.k6)((()=>[$n,(0,n.bF)(r,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("split_line_item")),1)])),_:1})])),_:1},8,["onClick","onKeydown","class"])):(0,n.Q3)("",!0)}var Kn=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const Wn=(0,n.pM)({mixins:[],props:{index:{type:Number,required:!0}},components:{},methods:{splitLineItem(){return Kn(this,void 0,void 0,(function*(){if(this.is_view_readonly||!this.lineItems[this.index].amount||""===this.lineItems[this.index].amount||!0===this.lineItems[this.index].readonly)return;this.resetItem(this.index);let e=yield this.formatValue(this.lineItems[this.index].amount,this.amount_format_locale);const t=parseFloat(e);let i=t/2;i=parseFloat(i.toFixed(2));let n=yield this.formatValue(String(i),"en_US",this.amount_format_locale);const s=this.baseSplitLineItem();s.percentage="50%",s.amount=n,s.position=this.lineItems[this.index].position,this.lineItems[this.index].split_items.push(s);const o=this.baseSplitLineItem();o.percentage="50%",o.amount=n,o.position=this.lineItems[this.index].position,this.lineItems[this.index].split_items.push(o),this.calculateTotalByMode()}))}},setup(){const e=(0,X.NF)(),{lineItems:t,amount_format_locale:i,is_view_readonly:n}=(0,S.bP)(e),{baseSplitLineItem:s,calculateTotalByMode:o,resetItem:a}=e,l=(0,X.gP)(),{formatValue:r}=l;return{resetItem:a,calculateTotalByMode:o,baseSplitLineItem:s,is_view_readonly:n,amount_format_locale:i,formatValue:r,lineItems:t}}}),Rn=(0,ce.A)(Wn,[["render",Xn]]),Bn=Rn;_e()(Wn,"components",{QIcon:ue.A,QTooltip:Ge.A});const Nn=["id","data-id"],Un=(0,n.Lk)("div",{class:"",style:{width:"12%"}},null,-1),jn={class:"dimensions",style:{"padding-right":"9px"}},zn={style:{width:"10%"}},Hn=(0,n.Lk)("img",{width:"20",src:"images/trash-bin-default.svg"},null,-1);function Gn(e,t,i,o,a,l){const r=(0,n.g2)("Account"),d=(0,n.g2)("Dimensions"),c=(0,n.g2)("q-input"),u=(0,n.g2)("q-select"),m=(0,n.g2)("Amount"),h=(0,n.g2)("Percent"),_=(0,n.g2)("q-icon");return(0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.lineItems[e.index].split_items,((t,i)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"row q-pt-sm",id:t.id,"data-id":t.id},[Un,(0,n.Lk)("div",{class:"account-container",style:(0,s.Tr)(e.columnWidth)},[(0,n.bF)(r,{readonly:t.readonly,onUpdateAccount:e.updateAccount,item:t,index:i},null,8,["readonly","onUpdateAccount","item","index"]),(0,n.Lk)("div",jn,[(0,n.bF)(d,{line_item_index:e.index,split_line_index:i},null,8,["line_item_index","split_line_index"])])],4),e.hasAdditionalFields()?((0,n.uX)(),(0,n.CE)("div",{key:0,style:(0,s.Tr)(e.columnWidth),class:"q-pr-sm"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.accounting_additional_fields,((i,o)=>((0,n.uX)(),(0,n.CE)("div",{key:o,style:(0,s.Tr)(e.dynamicAdditionalFieldStyle)},[t.hasOwnProperty(i.field_name)?((0,n.uX)(),(0,n.Wv)(c,{key:0,class:"accouting-input column inline full-width",outlined:"",modelValue:t[i.field_name],"onUpdate:modelValue":e=>t[i.field_name]=e,disable:!!e.is_view_readonly},null,8,["modelValue","onUpdate:modelValue","disable"])):(0,n.Q3)("",!0)],4)))),128))],4)):(0,n.Q3)("",!0),e.isMultiTaxSection&&"line_items"!=e.accounting_mode?((0,n.uX)(),(0,n.CE)("div",{key:1,class:"account-container",style:(0,s.Tr)(e.columnWidth)},[(0,n.bF)(u,{tabindex:"1",class:"q-mr-sm accounting-select account-select","emit-value":"","map-options":"",outlined:"",modelValue:e.lineItems[e.index].split_items[i].position,"onUpdate:modelValue":t=>e.lineItems[e.index].split_items[i].position=t,options:e.taxCodeAndCountryDropdown,disable:e.is_view_readonly},null,8,["modelValue","onUpdate:modelValue","options","disable"])],4)):(0,n.Q3)("",!0),(0,n.Lk)("div",{style:(0,s.Tr)(e.columnWidth)},[(0,n.bF)(m,{line_item_index:e.index,split_line_index:i},null,8,["line_item_index","split_line_index"]),(0,n.bF)(h,{line_item_index:e.index,split_line_index:i},null,8,["line_item_index","split_line_index"])],4),(0,n.Lk)("div",zn,[(0,n.bF)(_,{class:(0,s.C4)(["q-ml-sm cursor-pointer accounting-icon",e.is_view_readonly?"disabled":""]),tabindex:"1",color:"grey",size:"md",onClick:t=>e.deleteLineItem(i,e.index),onKeydown:(0,Ze.jR)((t=>e.deleteLineItem(i,e.index)),["enter"])},{default:(0,n.k6)((()=>[Hn])),_:2},1032,["onClick","onKeydown","class"])])],8,Nn)))),128)}function Jn(e,t,i,o,a,l){const r=(0,n.g2)("q-tooltip"),d=(0,n.g2)("q-icon"),c=(0,n.g2)("q-input");return(0,n.uX)(),(0,n.Wv)(c,{tabindex:"1",class:"accouting-input column inline",style:{width:"70%"},outlined:"",modelValue:e.lineItems[e.line_item_index].split_items[e.split_line_index].amount,"onUpdate:modelValue":t[0]||(t[0]=t=>e.lineItems[e.line_item_index].split_items[e.split_line_index].amount=t),onKeyup:t[1]||(t[1]=(0,Ze.jR)((t=>e.handleAmountEnter(e.lineItems[e.line_item_index].split_items[e.split_line_index])),["enter"])),disable:!!e.is_view_readonly},{append:(0,n.k6)((()=>[""!==e.lineItems[e.line_item_index].split_items[e.split_line_index]["amount_error"]?((0,n.uX)(),(0,n.Wv)(d,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.lineItems[e.line_item_index].split_items[e.split_line_index]["amount_error"]),1)])),_:1})])),_:1})):(0,n.Q3)("",!0)])),_:1},8,["modelValue","disable"])}var Yn=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const Zn=(0,n.pM)({mixins:[],props:{line_item_index:{type:Number,required:!0},split_line_index:{type:Number,required:!0}},components:{},methods:{clearErrors(e){e.amount_error=""},validateAmountAndSetError(e,t){return t?!!(0,De.bA)(t)||(e.amount_error=this.$t("amount_invalid"),!1):(e.amount_error=this.$t("amount_is_empty"),!1)},validateAmountUpdateAndSetError(e,t,i){return i?!(t>i)||(e.amount_error=this.$t("amount_cannot_be_greater_than_parent_amount"),!1):(e.amount_error=this.$t("parent_amount_is_empty"),!1)},handleAmountEnter(e){return Yn(this,void 0,void 0,(function*(){if(this.is_view_readonly)return;this.clearErrors(e);const t=e.amount;if(!this.validateAmountAndSetError(e,t))return;const i=this.lineItems[this.line_item_index].amount,n=[];n.push({key:t,value:t}),n.push({key:i,value:i});const s=yield this.formatMultiValues(n,this.amount_format_locale),o=this.searchValueByKey(t,s),a=parseFloat(o);if(!this.validateAmountAndSetError(e,a))return;e.amount_standard=a;const l=this.searchValueByKey(this.lineItems[this.line_item_index].amount,s),r=parseFloat(l);if(this.lineItems[this.line_item_index].amount_standard=r,!this.validateAmountUpdateAndSetError(e,a,r))return;const d=a/r*100;logInfo("percentage",d,a,r),e.percentage=(yield this.formatValue(d.toFixed(2),"en_US",this.amount_format_locale))+"%",this.autFillEmptyLineItems(this.line_item_index)}))}},setup(){const e=(0,X.NF)(),{lineItems:t,amount_format_locale:i,is_view_readonly:n}=(0,S.bP)(e),s=(0,X.gP)(),{formatMultiValues:o,formatValue:a}=s,{searchValueByKey:l,autFillEmptyLineItems:r}=e;return{autFillEmptyLineItems:r,searchValueByKey:l,is_view_readonly:n,formatMultiValues:o,formatValue:a,amount_format_locale:i,lineItems:t}}}),es=(0,ce.A)(Zn,[["render",Jn]]),ts=es;function is(e,t,i,o,a,l){const r=(0,n.g2)("q-tooltip"),d=(0,n.g2)("q-icon"),c=(0,n.g2)("q-input");return(0,n.uX)(),(0,n.Wv)(c,{tabindex:"1",class:"accouting-input q-pl-sm column inline",style:{width:"30%"},outlined:"",modelValue:e.lineItems[e.line_item_index].split_items[e.split_line_index].percentage,"onUpdate:modelValue":t[0]||(t[0]=t=>e.lineItems[e.line_item_index].split_items[e.split_line_index].percentage=t),onKeyup:t[1]||(t[1]=(0,Ze.jR)((t=>e.handlePercdntEnter(e.lineItems[e.line_item_index].split_items[e.split_line_index])),["enter"])),disable:!!e.is_view_readonly},{append:(0,n.k6)((()=>[""!==e.lineItems[e.line_item_index].split_items[e.split_line_index]["percentage_error"]?((0,n.uX)(),(0,n.Wv)(d,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.lineItems[e.line_item_index].split_items[e.split_line_index]["percentage_error"]),1)])),_:1})])),_:1})):(0,n.Q3)("",!0)])),_:1},8,["modelValue","disable"])}_e()(Zn,"components",{QInput:ti.A,QIcon:ue.A,QTooltip:Ge.A});var ns=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const ss=(0,n.pM)({mixins:[],props:{line_item_index:{type:Number,required:!0},split_line_index:{type:Number,required:!0}},components:{},methods:{clearErrors(e){e.percentage_error=""},validateAmountAndSetError(e,t){return t?!!(0,De.bA)(t)||(e.amount_error=this.$t("amount_invalid"),!1):(e.amount_error=this.$t("amount_is_empty"),!1)},validatePercentAndSetError(e,t){return t?!!(0,De.bA)(t)||(e.percentage_error=this.$t("percentage_invalid"),!1):(e.percentage_error=this.$t("percentage_is_empty"),!1)},validatePercentUpdateAndSetError(e,t){return t?!(t>100)||(e.percentage_error=this.$t("percentage_cannot_be_greater_than_100"),!1):(e.percentage_error=this.$t("percentage_is_empty"),!1)},handlePercdntEnter(e){return ns(this,void 0,void 0,(function*(){if(this.is_view_readonly)return;this.clearErrors(e);let t=this.lineItems[this.line_item_index].amount,i=e.percentage.replace("%","");if(!this.validateAmountAndSetError(e,t))return;const n=[];n.push({key:t,value:t}),n.push({key:i,value:i});const s=yield this.formatMultiValues(n,this.amount_format_locale),o=this.searchValueByKey(i,s),a=parseFloat(o);if(!this.validatePercentUpdateAndSetError(e,a))return;e.percent_float=a;const l=this.searchValueByKey(t,s),r=parseFloat(l);this.lineItems[this.line_item_index].amount_standard=r;const d=a/100*r,c=parseFloat(d.toFixed(2)),u=isNaN(c);u?e.amount="":(e.amount_standard=c,e.amount=yield this.formatValue(String(c),"en_US",this.amount_format_locale),this.autFillEmptyLineItems(this.line_item_index))}))}},setup(){const e=(0,X.NF)(),{lineItems:t,amount_format_locale:i,is_view_readonly:n}=(0,S.bP)(e),{searchValueByKey:s,autFillEmptyLineItems:o}=e,a=(0,X.gP)(),{formatMultiValues:l,formatValue:r}=a;return{autFillEmptyLineItems:o,searchValueByKey:s,is_view_readonly:n,formatMultiValues:l,formatValue:r,amount_format_locale:i,lineItems:t}}}),os=(0,ce.A)(ss,[["render",is]]),as=os;_e()(ss,"components",{QInput:ti.A,QIcon:ue.A,QTooltip:Ge.A});const ls={key:0,class:"row items-center q-mt-sm dimension-container"},rs={key:0,class:"q-pr-sm text-container"};function ds(e,t,i,o,a,l){const r=(0,n.g2)("Dimension");return(0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.lineItems[e.line_item_index].split_items[e.split_line_index].dimensions,((t,i)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:i},["p"!==t.rule.toLowerCase()?((0,n.uX)(),(0,n.CE)("div",ls,[0===i?((0,n.uX)(),(0,n.CE)("div",rs,(0,s.v_)(e.$t("dimensions"))+": ",1)):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,s.C4)(0===i?"input-container":" input-100 ")},[(0,n.bF)(r,{onUpdateDimension:e.updateDimension,item:t,index:i,account:e.lineItems[e.line_item_index].split_items[e.split_line_index].account},null,8,["onUpdateDimension","item","index","account"])],2)])):(0,n.Q3)("",!0)],64)))),128)}const cs=(0,n.pM)({mixins:[],props:{line_item_index:{type:Number,required:!0},split_line_index:{type:Number,required:!0}},computed:{hasDimensions:function(){return!(!this.lineItems[this.line_item_index].split_items[this.split_line_index].hasOwnProperty("dimensions")||void 0===this.lineItems[this.line_item_index].split_items[this.split_line_index].dimensions)}},components:{Dimension:qn},methods:{updateDimension(e){if(!e.hasOwnProperty("index")||!e.hasOwnProperty("value"))return;let t=e.value;void 0!==t&&null!==t||(t=""),this.lineItems[this.line_item_index].split_items[this.split_line_index].dimensions[e.index].error="",this.lineItems[this.line_item_index].split_items[this.split_line_index].dimensions[e.index].value=t}},setup(){const e=(0,X.NF)(),{lineItems:t,dimensions:i,is_view_readonly:n}=(0,S.bP)(e);return{is_view_readonly:n,dimensions:i,lineItems:t}}}),us=(0,ce.A)(cs,[["render",ds],["__scopeId","data-v-5264c840"]]),ms=us,hs=(0,n.pM)({mixins:[],props:{index:{type:Number,required:!0},columnWidth:{type:Number,default:15}},components:{Account:fn,Amount:ts,Dimensions:ms,Percent:as},methods:{updateAccount(e){if(this.is_view_readonly)return;if(!e.hasOwnProperty("index")||!e.hasOwnProperty("value"))return;const t=e.index,i=e.value;this.updateAccountInStore(this.index,t,i)},validateAmountAndSetError(e,t){return t?!!(0,De.bA)(t)||(e.amount_error=this.$t("amount_invalid"),!1):(e.amount_error=this.$t("amount_is_empty"),!1)},deleteLineItem(e,t){if(!this.is_view_readonly){try{this.lineItems[t].split_items.splice(e,1)}catch(i){logError(i)}this.calculateTotalByMode()}}},setup(){const e=(0,X.NF)(),{lineItems:t,is_view_readonly:i,accounting_mode:n}=(0,S.bP)(e),{calculateTotalByMode:s,getDimensionsForAccount:o,validateLine:a,updateAccount:l,isMultiTaxSection:r,taxCodeAndCountryDropdown:d}=e,c=(0,X.WN)(),{accounting_additional_fields:u}=(0,S.bP)(c),{hasAdditionalFields:m,dynamicAdditionalFieldStyle:h}=c;return{hasAdditionalFields:m,dynamicAdditionalFieldStyle:h,accounting_additional_fields:u,taxCodeAndCountryDropdown:d,getDimensionsForAccount:o,updateAccountInStore:l,calculateTotalByMode:s,isMultiTaxSection:r,is_view_readonly:i,accounting_mode:n,validateLine:a,lineItems:t}}}),_s=(0,ce.A)(hs,[["render",Gn]]),ps=_s;_e()(hs,"components",{QInput:ti.A,QSelect:ii.A,QIcon:ue.A});const gs=(0,n.Lk)("img",{width:"20",src:"images/split_done.svg"},null,-1);function vs(e,t,i,o,a,l){const r=(0,n.g2)("q-tooltip"),d=(0,n.g2)("q-icon");return e.lineItems[e.index].split_items.length>0?((0,n.uX)(),(0,n.Wv)(d,{key:0,class:(0,s.C4)(["q-ml-sm cursor-pointer accounting-icon",e.is_view_readonly||e.lineItems[e.index].readonly?"disabled":""]),tabindex:"1",color:"grey",size:"md",onClick:e.un_splitLineItem,onKeydown:(0,Ze.jR)(e.un_splitLineItem,["enter"])},{default:(0,n.k6)((()=>[gs,(0,n.bF)(r,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("remove_line_item_split")),1)])),_:1})])),_:1},8,["onClick","onKeydown","class"])):(0,n.Q3)("",!0)}const ys=(0,n.pM)({mixins:[],props:{index:{type:Number,required:!0}},components:{},methods:{un_splitLineItem(){this.is_view_readonly||!0===this.lineItems[this.index].readonly||(this.lineItems[this.index].split_items=[],this.calculateTotalByMode())}},setup(){const e=(0,X.NF)(),{lineItems:t,is_view_readonly:i}=(0,S.bP)(e),{calculateTotalByMode:n}=e;return{calculateTotalByMode:n,is_view_readonly:i,lineItems:t}}}),fs=(0,ce.A)(ys,[["render",vs]]),bs=fs;_e()(ys,"components",{QIcon:ue.A,QTooltip:Ge.A});const ws=(0,n.pM)({mixins:[],props:{index:{type:Number,required:!0}},data(){return{objLen:le.Ns}},components:{SplitedLineItems:ps,Dimensions:Dn,Amount:tn,Account:fn,AddChildLineItem:On,SplitLineItemBtn:Bn,UnSplitLineItemBtn:bs},methods:{updateAccount(e){this.is_view_readonly||e.hasOwnProperty("index")&&e.hasOwnProperty("value")&&this.updateAccountInStore(this.index,null,e.value)},updateAmount(e){this.is_view_readonly||null===this.index||e.hasOwnProperty("index")&&e.hasOwnProperty("value")&&(this.lineItems[this.index].amount=e.value)}},setup(){const e=(0,X.NF)(),{lineItems:t,is_view_readonly:i}=(0,S.bP)(e),{getDimensionsForAccount:n,validateLine:s,updateAccount:o,columnWidth:a}=e,l=(0,X.WN)(),{accounting_additional_fields:r}=(0,S.bP)(l),{hasAdditionalFields:d,dynamicAdditionalFieldStyle:c}=l;return{dynamicAdditionalFieldStyle:c,accounting_additional_fields:r,getDimensionsForAccount:n,hasAdditionalFields:d,updateAccountInStore:o,is_view_readonly:i,validateLine:s,columnWidth:a,lineItems:t}}}),xs=(0,ce.A)(ws,[["render",Ji]]),ks=xs;_e()(ws,"components",{QInput:ti.A,QIcon:ue.A,QTooltip:Ge.A});const Is=["id","data-id"],As=(0,n.Lk)("div",{class:"",style:{width:"4%"}},null,-1),Ls={class:"",style:{width:"8%"}},Fs={class:"dimensions",style:{"padding-right":"9px"}},Cs={style:{width:"10%"}},Ss={class:"q-ml-sm bg-primary primary-bg-text",style:{width:"22px",display:"inline-block"}},Es={class:"splitted-line-items total-line-item-area",style:{width:"100%"}},qs={class:"row total-line-item-area q-pb-sm q-pt-md"},Ps=(0,n.Lk)("div",{style:{width:"12%"}},null,-1),Ts={style:{width:"37%"}},Ds={class:"float-right q-mr-md"},Ms={style:{width:"51%"}},Vs={key:0,style:{"margin-left":"12px"}},Qs={class:"row total-line-item-area q-pb-sm"},Os=(0,n.Lk)("div",{style:{width:"12%"}},null,-1),$s={style:{width:"37%"}},Xs={class:"float-right q-mr-md"},Ks={style:{width:"51%"}},Ws={key:0,style:{"margin-left":"12px"}};function Rs(e,t,i,o,a,l){const r=(0,n.g2)("Account"),d=(0,n.g2)("Dimensions"),c=(0,n.g2)("q-input"),u=(0,n.g2)("Amount"),m=(0,n.g2)("SplitLineItemBtn"),h=(0,n.g2)("UnSplitLineItemBtn"),_=(0,n.g2)("AddChildLineItem"),p=(0,n.g2)("SplitedLineItems"),g=(0,n.g2)("q-tooltip"),v=(0,n.g2)("q-icon");return null!==e.header_index?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("div",{class:"row q-pt-sm total-line-item-area",id:e.lineItems[e.header_index].id,"data-id":e.lineItems[e.header_index].id},[As,(0,n.Lk)("div",Ls,(0,s.v_)(e.$t("total")),1),(0,n.Lk)("div",{class:"account-container",style:(0,s.Tr)(e.columnWidth)},[(0,n.bF)(r,{readonly:e.lineItems[e.header_index].readonly,onUpdateAccount:e.updateAccount,item:e.lineItems[e.header_index],index:e.header_index},null,8,["readonly","onUpdateAccount","item","index"]),(0,n.Lk)("div",Fs,[(0,n.bF)(d,{index:e.header_index},null,8,["index"])])],4),e.hasAdditionalFields()?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"q-pr-sm",style:(0,s.Tr)(e.columnWidth)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.accounting_additional_fields,((t,i)=>((0,n.uX)(),(0,n.CE)("div",{key:i,style:(0,s.Tr)(e.dynamicAdditionalFieldStyle)},[e.lineItems[e.header_index].hasOwnProperty(t.field_name)?((0,n.uX)(),(0,n.Wv)(c,{key:0,class:"accouting-input column inline full-width",outlined:"",modelValue:e.lineItems[e.header_index][t.field_name],"onUpdate:modelValue":i=>e.lineItems[e.header_index][t.field_name]=i,disable:e.lineItems[e.header_index].split_items.length>0||e.is_view_readonly},null,8,["modelValue","onUpdate:modelValue","disable"])):(0,n.Q3)("",!0)],4)))),128))],4)):(0,n.Q3)("",!0),(0,n.Lk)("div",{style:(0,s.Tr)(e.columnWidth)},[(0,n.bF)(u,{index:e.header_index},null,8,["index"])],4),(0,n.Lk)("div",Cs,[(0,n.bF)(m,{index:e.header_index},null,8,["index"]),(0,n.bF)(h,{index:e.header_index},null,8,["index"]),(0,n.Lk)("div",Ss,[(0,n.bF)(_,{index:e.header_index},null,8,["index"])])])],8,Is),(0,n.Lk)("div",Es,[(0,n.bF)(p,{index:e.header_index,columnWidth:e.columnWidth},null,8,["index","columnWidth"])]),(0,n.Lk)("div",qs,[Ps,(0,n.Lk)("div",Ts,[(0,n.Lk)("span",Ds,(0,s.v_)(e.$t("recorded_bookings"))+": ",1)]),(0,n.Lk)("div",Ms,[e.lineItems[e.header_index].hasOwnProperty("lines_total_amount")?((0,n.uX)(),(0,n.CE)("span",Vs,(0,s.v_)(e.lineItems[e.header_index].lines_total_amount),1)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",Qs,[Os,(0,n.Lk)("div",$s,[(0,n.Lk)("span",Xs,(0,s.v_)(e.$t("unsettled_amount"))+": ",1)]),(0,n.Lk)("div",Ks,[e.lineItems[e.header_index].hasOwnProperty("pending_amount")?((0,n.uX)(),(0,n.CE)("span",Ws,(0,s.v_)(e.lineItems[e.header_index].pending_amount),1)):(0,n.Q3)("",!0),""!==e.lineItems[e.header_index].error?((0,n.uX)(),(0,n.Wv)(v,{key:1,flat:"",dense:"",name:"error",size:"20px",color:"red",class:"q-ml-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.lineItems[e.header_index].error),1)])),_:1})])),_:1})):(0,n.Q3)("",!0)])])],64)):(0,n.Q3)("",!0)}const Bs=(0,n.pM)({mixins:[],props:{},components:{Amount:tn,Account:fn,Dimensions:Dn,SplitedLineItems:ps,AddChildLineItem:On,SplitLineItemBtn:Bn,UnSplitLineItemBtn:bs},mounted(){this.header_index=this.getTotalLineIndex()},methods:{updateAccount(e){this.is_view_readonly||null===this.header_index||e.hasOwnProperty("index")&&e.hasOwnProperty("value")&&(this.lineItems[this.header_index].account=e.value,this.lineItems[this.header_index].account_error="",this.updateAccountInStore(this.header_index,null,e.value))},updateAmount(e){this.is_view_readonly||null===this.header_index||e.hasOwnProperty("index")&&e.hasOwnProperty("value")&&(this.lineItems[this.header_index].amount=e.value)}},setup(){const e=(0,X.NF)(),{lineItems:t,getTotalLineIndex:i,columnWidth:n,is_view_readonly:s}=(0,S.bP)(e),{getDimensionsForAccount:o,validateLine:a,updateAccount:l}=e,r=(0,X.WN)(),{accounting_additional_fields:d}=(0,S.bP)(r),{hasAdditionalFields:c,dynamicAdditionalFieldStyle:u}=r;return{dynamicAdditionalFieldStyle:u,accounting_additional_fields:d,hasAdditionalFields:c,updateAccountInStore:l,getDimensionsForAccount:o,is_view_readonly:s,getTotalLineIndex:i,lineItems:t,header_index:(0,P.KR)(null),validateLine:a,columnWidth:n}}}),Ns=(0,ce.A)(Bs,[["render",Rs]]),Us=Ns;_e()(Bs,"components",{QInput:ti.A,QIcon:ue.A,QTooltip:Ge.A});const js=["id","data-id"],zs=(0,n.Lk)("div",{class:"",style:{width:"4%"}},null,-1),Hs={class:"",style:{width:"8%"}},Gs={class:"dimensions",style:{"padding-right":"9px"}},Js={style:{width:"10%"}},Ys={class:"q-ml-sm bg-primary primary-bg-text",style:{width:"22px",display:"inline-block"}},Zs={class:"splitted-line-items total-line-item-area",style:{width:"100%"}},eo={key:0,class:"row q-pt-sm"},to=(0,n.Lk)("div",{style:{width:"12%"}},null,-1),io={style:{width:"37%"}},no={class:"float-right q-mr-md"},so={style:{width:"51%"}},oo={key:0,style:{"margin-left":"12px"}};function ao(e,t,i,o,a,l){const r=(0,n.g2)("Account"),d=(0,n.g2)("Dimensions"),c=(0,n.g2)("q-input"),u=(0,n.g2)("q-select"),m=(0,n.g2)("Amount"),h=(0,n.g2)("SplitLineItemBtn"),_=(0,n.g2)("UnSplitLineItemBtn"),p=(0,n.g2)("AddChildLineItem"),g=(0,n.g2)("SplitedLineItems"),v=(0,n.g2)("q-tooltip"),y=(0,n.g2)("q-icon");return null!==e.header_index?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("div",{class:"row q-pt-sm total-line-item-area",id:e.lineItems[e.header_index].id,"data-id":e.lineItems[e.header_index].id},[zs,(0,n.Lk)("div",Hs,(0,s.v_)(e.lineItems[e.header_index].position),1),(0,n.Lk)("div",{class:"account-container",style:(0,s.Tr)(e.columnWidth)},[(0,n.bF)(r,{readonly:e.lineItems[e.header_index].readonly,onUpdateAccount:e.updateAccount,item:e.lineItems[e.header_index],index:e.header_index},null,8,["readonly","onUpdateAccount","item","index"]),(0,n.Lk)("div",Gs,[(0,n.bF)(d,{index:e.header_index},null,8,["index"])])],4),e.hasAdditionalFields()?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"q-pr-sm",style:(0,s.Tr)(e.columnWidth)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.accounting_additional_fields,((t,i)=>((0,n.uX)(),(0,n.CE)("div",{key:i,style:(0,s.Tr)(e.dynamicAdditionalFieldStyle)},[e.lineItems[e.header_index].hasOwnProperty(t.field_name)?((0,n.uX)(),(0,n.Wv)(c,{key:0,class:"accouting-input column inline full-width",outlined:"",modelValue:e.lineItems[e.header_index][t.field_name],"onUpdate:modelValue":i=>e.lineItems[e.header_index][t.field_name]=i,disable:e.lineItems[e.header_index].split_items.length>0||e.is_view_readonly},null,8,["modelValue","onUpdate:modelValue","disable"])):(0,n.Q3)("",!0)],4)))),128))],4)):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:"account-container",style:(0,s.Tr)(e.columnWidth)},[(0,n.bF)(u,{tabindex:"1",class:"q-mr-sm accounting-select ellipsify","emit-value":"","map-options":"",outlined:"",modelValue:e.lineItems[e.header_index].position,"onUpdate:modelValue":t[0]||(t[0]=t=>e.lineItems[e.header_index].position=t),options:e.taxCodeAndCountryDropdown,disable:e.is_view_readonly},null,8,["modelValue","options","disable"])],4),(0,n.Lk)("div",{style:(0,s.Tr)(e.columnWidth)},[(0,n.bF)(m,{index:e.header_index},null,8,["index"])],4),(0,n.Lk)("div",Js,[(0,n.bF)(h,{index:e.header_index},null,8,["index"]),(0,n.bF)(_,{index:e.header_index},null,8,["index"]),(0,n.Lk)("div",Ys,[(0,n.bF)(p,{index:e.header_index},null,8,["index"])])])],8,js),(0,n.Lk)("div",Zs,[(0,n.bF)(g,{index:e.header_index,columnWidth:e.columnWidth},null,8,["index","columnWidth"])]),e.lineItems[e.header_index].split_items.length>0?((0,n.uX)(),(0,n.CE)("div",eo,[to,(0,n.Lk)("div",io,[(0,n.Lk)("span",no,(0,s.v_)(e.$t("unsettled_amount"))+": ",1)]),(0,n.Lk)("div",so,[e.lineItems[e.header_index].hasOwnProperty("pending_amount")?((0,n.uX)(),(0,n.CE)("span",oo,(0,s.v_)(e.lineItems[e.header_index].pending_amount),1)):(0,n.Q3)("",!0),""!==e.lineItems[e.header_index].error?((0,n.uX)(),(0,n.Wv)(y,{key:1,flat:"",dense:"",name:"error",size:"20px",color:"red",class:"q-ml-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(v,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.lineItems[e.header_index].error),1)])),_:1})])),_:1})):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],64)):(0,n.Q3)("",!0)}const lo=(0,n.pM)({mixins:[],props:{index:{type:Number,required:!0}},components:{Amount:tn,Account:fn,Dimensions:Dn,SplitedLineItems:ps,AddChildLineItem:On,SplitLineItemBtn:Bn,UnSplitLineItemBtn:bs},mounted(){this.header_index=this.index},methods:{updateAccount(e){this.is_view_readonly||null===this.header_index||e.hasOwnProperty("index")&&e.hasOwnProperty("value")&&(this.lineItems[this.header_index].account=e.value,this.lineItems[this.header_index].account_error="",this.updateAccountInStore(this.header_index,null,e.value))},updateAmount(e){this.is_view_readonly||null===this.header_index||e.hasOwnProperty("index")&&e.hasOwnProperty("value")&&(this.lineItems[this.header_index].amount=e.value)}},setup(){const e=(0,X.NF)(),{lineItems:t,getTotalLineIndex:i,is_view_readonly:n,taxCodeAndCountryDropdown:s,isMultiTaxSection:o,columnWidth:a}=(0,S.bP)(e),{getDimensionsForAccount:l,validateLine:r,updateAccount:d}=e,c=(0,X.WN)(),{accounting_additional_fields:u}=(0,S.bP)(c),{hasAdditionalFields:m,dynamicAdditionalFieldStyle:h}=c;return{dynamicAdditionalFieldStyle:h,accounting_additional_fields:u,hasAdditionalFields:m,isMultiTaxSection:o,updateAccountInStore:d,getDimensionsForAccount:l,taxCodeAndCountryDropdown:s,is_view_readonly:n,getTotalLineIndex:i,lineItems:t,header_index:(0,P.KR)(null),validateLine:r,columnWidth:a}}}),ro=(0,ce.A)(lo,[["render",ao]]),co=ro;_e()(lo,"components",{QInput:ti.A,QSelect:ii.A,QIcon:ue.A,QTooltip:Ge.A});var uo=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const mo=(0,n.pM)({el:"#app",mixins:[E.A,q.A,R.A],components:{lineItem:ks,TotalLineItem:Us,MuLtiTaxSection:co},watch:{},emits:["addLineItem"],mounted(){this.init()},unmounted:function(){},data(){return{objLen:le.Ns}},methods:{init(){return uo(this,void 0,void 0,(function*(){try{if(!(0,le.jw)(this.accounting_error))return;yield this.getAccountsList(),logInfo("init ln resolveAccountLoadingPromise")}catch(e){const t=O.t.getErrorMessage(e);this.showErrorToast(t),logError(e),this.accounting_error=t}finally{this.resolveAccountLoadingPromise()}}))},addLineItem(){this.$emit("addLineItem")}},setup(){const e=(0,X.NF)(),{lineItems:t,columnWidth:i,accounting_mode:n,accounts_loaded:s,accounting_error:o,isMultiTaxSection:a}=(0,S.bP)(e),{getAccountsList:l}=e,r=(0,X.WN)(),{line_item_loaded:d,accounting_additional_fields:c}=(0,S.bP)(r),{resolveAccountLoadingPromise:u,hasAdditionalFields:m,dynamicAdditionalFieldStyle:h}=r,_=(0,X.Bu)(),{startSettingsFetch:p}=_,{user_settings:g}=(0,S.bP)(_);return{dynamicAdditionalFieldStyle:h,hasAdditionalFields:m,accounting_additional_fields:c,startSettingsFetch:p,user_settings:g,accounting_error:o,accounts_loaded:s,resolveAccountLoadingPromise:u,lineItems:t,isMultiTaxSection:a,accounting_mode:n,getAccountsList:l,line_item_loaded:d,fab1:(0,P.KR)(!1),columnWidth:i}}});var ho=i(54782);const _o=(0,ce.A)(mo,[["render",Vi]]),po=_o;_e()(mo,"components",{QFab:ho.A,QSeparator:Lt.A,QIcon:ue.A,QTooltip:Ge.A});const go={class:"line-item-container ml-16 q-mr-sm"},vo={class:"lineItems"},yo={class:"row items-center table-header"},fo={class:"",style:{width:"4%"}},bo={class:"header",style:{width:"8%"}},wo={class:"header",style:{width:"30%"}},xo={class:"header",style:{width:"18%"}},ko={class:"header",style:{width:"30%"}},Io=(0,n.Lk)("div",{class:"",style:{width:"15%"}},null,-1),Ao=(0,n.Fv)('<div style="width:4%;height:34px;padding-top:10px;"><div class="box loading-shimmer" style="width:70%;"></div></div><div style="width:8%;height:34px;padding-top:10px;"><div class="box loading-shimmer" style="width:70%;"></div></div><div style="width:30%;height:34px;padding-top:10px;"><div class="box loading-shimmer" style="width:70%;"></div></div><div style="width:18%;height:34px;padding-top:10px;"><div class="box loading-shimmer" style="width:70%;"></div></div><div style="width:30%;height:34px;padding-top:10px;"><div class="box loading-shimmer" style="width:70%;"></div></div><div style="width:10%;height:34px;padding-top:10px;"><div class="box loading-shimmer" style="width:70%;"></div></div>',6),Lo=[Ao],Fo={class:"row items-center q-mt-sm"},Co={style:{width:"3%"}},So={class:"q-ma-sm bg-primary primary-bg-text",style:{width:"22px",display:"inline-block"}},Eo=(0,n.Lk)("div",{style:{width:"97%"}},null,-1);function qo(e,t,i,o,a,l){const r=(0,n.g2)("q-fab"),d=(0,n.g2)("TotalLineItem"),c=(0,n.g2)("q-separator"),u=(0,n.g2)("lineItem"),m=(0,n.g2)("q-tooltip"),h=(0,n.g2)("q-icon");return(0,n.uX)(),(0,n.CE)("div",go,[(0,n.Lk)("div",vo,[(0,n.Lk)("div",yo,[(0,n.Lk)("div",fo,[(0,n.bF)(r,{square:"",flat:"",modelValue:e.fab1,"onUpdate:modelValue":t[0]||(t[0]=t=>e.fab1=t),icon:"keyboard_arrow_up",class:"multi-fab",direction:"down",padding:"xs","active-icon":"keyboard_arrow_down","label-class":"",style:{width:"40px"}},null,8,["modelValue"])]),(0,n.Lk)("div",bo,(0,s.v_)(e.$t("pages.line_items_columns.POSITION")),1),(0,n.Lk)("div",wo,(0,s.v_)(e.$t("accounts")),1),(0,n.Lk)("div",xo,(0,s.v_)(e.$t("voucher_text")),1),(0,n.Lk)("div",ko,(0,s.v_)(e.$t("amount_title")),1),Io]),e.accounts_loaded?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)(n.FK,{key:0},(0,n.pI)(4,(e=>(0,n.Lk)("div",{class:"row items-center total-line-item-area",key:e},Lo))),64)),e.line_item_loaded?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.bF)(d),(0,n.bF)(c),"line_items"===e.accounting_mode?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.lineItems,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:e},["line_item"===e.type?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.bF)(u,{index:t},null,8,["index"]),(0,n.bF)(c,{class:"q-mt-sm"})],64)):(0,n.Q3)("",!0)],64)))),128)),(0,n.Lk)("div",Fo,[(0,n.Lk)("div",Co,[(0,n.Lk)("div",So,[(0,n.bF)(h,{name:"add",size:"22px",onClick:t[1]||(t[1]=t=>e.addLineItem()),onKeydown:t[2]||(t[2]=(0,Ze.jR)((t=>e.addLineItem()),["enter"])),tabindex:"1",class:(0,s.C4)(["cursor-pointer",e.is_view_readonly?"disabled":""])},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("add_new_line_item")),1)])),_:1})])),_:1},8,["class"])])]),Eo])],64)):(0,n.Q3)("",!0)],64)):(0,n.Q3)("",!0)])])}const Po=["id","data-id"],To=(0,n.Lk)("div",{class:"",style:{width:"4%"}},null,-1),Do={class:"",style:{width:"8%"}},Mo={key:0},Vo={class:"account-container",style:{width:"30%"}},Qo={class:"dimensions",style:{"padding-right":"9px"}},Oo={style:{width:"18%"},class:"q-pr-sm"},$o={style:{width:"40%"}},Xo={class:"row"},Ko={style:{width:"70%"}},Wo={style:{width:"29%"}},Ro={class:"q-ml-sm bg-primary primary-bg-text",style:{width:"22px",display:"inline-block"}},Bo={class:"splitted-line-items",style:{width:"100%"}},No={key:0,class:"row q-pt-sm"},Uo=(0,n.Lk)("div",{style:{width:"12%"}},null,-1),jo={style:{width:"37%"}},zo={class:"float-right q-mr-md"},Ho={style:{width:"51%"}},Go={key:0,style:{"margin-left":"12px"}};function Jo(e,t,i,o,a,l){const r=(0,n.g2)("Account"),d=(0,n.g2)("Dimensions"),c=(0,n.g2)("q-input"),u=(0,n.g2)("Amount"),m=(0,n.g2)("SplitLineItemBtn"),h=(0,n.g2)("UnSplitLineItemBtn"),_=(0,n.g2)("AddChildLineItem"),p=(0,n.g2)("SplitedLineItems"),g=(0,n.g2)("q-tooltip"),v=(0,n.g2)("q-icon");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",{class:"row q-mt-sm",id:e.lineItems[e.index].id,"data-id":e.lineItems[e.index].id},[To,(0,n.Lk)("div",Do,[e.lineItems[e.index].hasOwnProperty("position")?((0,n.uX)(),(0,n.CE)("span",Mo,(0,s.v_)(e.lineItems[e.index].position),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Vo,[(0,n.bF)(r,{readonly:e.lineItems[e.index].readonly,onUpdateAccount:e.updateAccount,item:e.lineItems[e.index],index:e.index},null,8,["readonly","onUpdateAccount","item","index"]),(0,n.Lk)("div",Qo,[(0,n.bF)(d,{index:e.index},null,8,["index"])])]),(0,n.Lk)("div",Oo,[(0,n.bF)(c,{class:"accouting-input column inline full-width",outlined:"",modelValue:e.lineItems[e.index].voucher_text,"onUpdate:modelValue":t[0]||(t[0]=t=>e.lineItems[e.index].voucher_text=t),disable:e.lineItems[e.index].split_items.length>0||e.is_view_readonly},null,8,["modelValue","disable"])]),(0,n.Lk)("div",$o,[(0,n.Lk)("div",Xo,[(0,n.Lk)("div",Ko,[(0,n.bF)(u,{index:e.index},null,8,["index"])]),(0,n.Lk)("div",Wo,[(0,n.bF)(m,{index:e.index},null,8,["index"]),(0,n.bF)(h,{index:e.index},null,8,["index"]),(0,n.Lk)("div",Ro,[(0,n.bF)(_,{index:e.index},null,8,["index"])])])])])],8,Po),(0,n.Lk)("div",Bo,[(0,n.bF)(p,{index:e.index},null,8,["index"])]),e.lineItems[e.index].split_items.length>0?((0,n.uX)(),(0,n.CE)("div",No,[Uo,(0,n.Lk)("div",jo,[(0,n.Lk)("span",zo,(0,s.v_)(e.$t("unsettled_amount"))+": ",1)]),(0,n.Lk)("div",Ho,[e.lineItems[e.index].hasOwnProperty("pending_amount")?((0,n.uX)(),(0,n.CE)("span",Go,(0,s.v_)(e.lineItems[e.index].pending_amount),1)):(0,n.Q3)("",!0),""!==e.lineItems[e.index].error?((0,n.uX)(),(0,n.Wv)(v,{key:1,flat:"",dense:"",name:"error",size:"20px",color:"red",class:"q-ml-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.lineItems[e.index].error),1)])),_:1})])),_:1})):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],64)}const Yo=["id","data-id"],Zo=(0,n.Lk)("div",{class:"",style:{width:"12%"}},null,-1),ea={class:"account-container",style:{width:"30%"}},ta={class:"dimensions",style:{"padding-right":"9px"}},ia={style:{width:"18%"},class:"q-pr-sm"},na={style:{width:"28%"}},sa={style:{width:"12%"}},oa=(0,n.Lk)("img",{width:"20",src:"images/trash-bin-default.svg"},null,-1);function aa(e,t,i,o,a,l){const r=(0,n.g2)("Account"),d=(0,n.g2)("Dimensions"),c=(0,n.g2)("q-input"),u=(0,n.g2)("Amount"),m=(0,n.g2)("Percent"),h=(0,n.g2)("q-icon");return(0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.lineItems[e.index].split_items,((t,i)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"row q-pt-sm",id:t.id,"data-id":t.id},[Zo,(0,n.Lk)("div",ea,[(0,n.bF)(r,{readonly:t.readonly,onUpdateAccount:e.updateAccount,item:t,index:i},null,8,["readonly","onUpdateAccount","item","index"]),(0,n.Lk)("div",ta,[(0,n.bF)(d,{line_item_index:e.index,split_line_index:i},null,8,["line_item_index","split_line_index"])])]),(0,n.Lk)("div",ia,[(0,n.bF)(c,{class:"accouting-input column inline full-width",outlined:"",modelValue:t.voucher_text,"onUpdate:modelValue":e=>t.voucher_text=e,disable:!!e.is_view_readonly},null,8,["modelValue","onUpdate:modelValue","disable"])]),(0,n.Lk)("div",na,[(0,n.bF)(u,{line_item_index:e.index,split_line_index:i},null,8,["line_item_index","split_line_index"]),(0,n.bF)(m,{line_item_index:e.index,split_line_index:i},null,8,["line_item_index","split_line_index"])]),(0,n.Lk)("div",sa,[(0,n.bF)(h,{class:(0,s.C4)(["q-ml-sm cursor-pointer accounting-icon",e.is_view_readonly?"disabled":""]),tabindex:"1",color:"grey",size:"md",onClick:t=>e.deleteLineItem(i,e.index),onKeydown:(0,Ze.jR)((t=>e.deleteLineItem(i,e.index)),["enter"])},{default:(0,n.k6)((()=>[oa])),_:2},1032,["onClick","onKeydown","class"])])],8,Yo)))),128)}const la=(0,n.pM)({mixins:[],props:{index:{type:Number,required:!0}},components:{Account:fn,Amount:ts,Dimensions:ms,Percent:as},methods:{updateAccount(e){if(this.is_view_readonly)return;if(!e.hasOwnProperty("index")||!e.hasOwnProperty("value"))return;const t=e.index,i=e.value;this.updateAccountInStore(this.index,t,i)},validateAmountAndSetError(e,t){return t?!!(0,De.bA)(t)||(e.amount_error=this.$t("amount_invalid"),!1):(e.amount_error=this.$t("amount_is_empty"),!1)},deleteLineItem(e,t){if(!this.is_view_readonly){try{this.lineItems[t].split_items.splice(e,1)}catch(i){logError(i)}this.calculateTotalByMode()}}},setup(){const e=(0,X.NF)(),{lineItems:t,is_view_readonly:i}=(0,S.bP)(e),{calculateTotalByMode:n,getDimensionsForAccount:s,validateLine:o,updateAccount:a}=e;return{updateAccountInStore:a,validateLine:o,calculateTotalByMode:n,is_view_readonly:i,lineItems:t,getDimensionsForAccount:s}}}),ra=(0,ce.A)(la,[["render",aa]]),da=ra;_e()(la,"components",{QInput:ti.A,QIcon:ue.A});const ca=(0,n.pM)({mixins:[],props:{index:{type:Number,required:!0}},components:{SplitedLineItems:da,Dimensions:Dn,Amount:tn,Account:fn,AddChildLineItem:On,SplitLineItemBtn:Bn,UnSplitLineItemBtn:bs},methods:{updateAccount(e){this.is_view_readonly||e.hasOwnProperty("index")&&e.hasOwnProperty("value")&&this.updateAccountInStore(this.index,null,e.value)},updateAmount(e){this.is_view_readonly||null===this.index||e.hasOwnProperty("index")&&e.hasOwnProperty("value")&&(this.lineItems[this.index].amount=e.value)}},setup(){const e=(0,X.NF)(),{lineItems:t,is_view_readonly:i}=(0,S.bP)(e),{getDimensionsForAccount:n,validateLine:s,updateAccount:o}=e;return{updateAccountInStore:o,is_view_readonly:i,lineItems:t,getDimensionsForAccount:n,validateLine:s}}}),ua=(0,ce.A)(ca,[["render",Jo]]),ma=ua;_e()(ca,"components",{QInput:ti.A,QIcon:ue.A,QTooltip:Ge.A});const ha=["id","data-id"],_a=(0,n.Lk)("div",{class:"",style:{width:"4%"}},null,-1),pa={class:"",style:{width:"8%"}},ga={class:"account-container",style:{width:"30%"}},va={class:"dimensions",style:{"padding-right":"9px"}},ya={style:{width:"18%"},class:"q-pr-sm"},fa={style:{width:"40%"}},ba={class:"row"},wa={style:{width:"70%"}},xa={style:{width:"29%"}},ka={class:"q-ml-sm bg-primary primary-bg-text",style:{width:"22px",display:"inline-block"}},Ia={class:"splitted-line-items total-line-item-area",style:{width:"100%"}},Aa={class:"row total-line-item-area q-pb-sm q-pt-md"},La=(0,n.Lk)("div",{style:{width:"12%"}},null,-1),Fa={style:{width:"37%"}},Ca={class:"float-right q-mr-md"},Sa={style:{width:"51%"}},Ea={key:0,style:{"margin-left":"12px"}},qa={class:"row total-line-item-area q-pb-sm"},Pa=(0,n.Lk)("div",{style:{width:"12%"}},null,-1),Ta={style:{width:"37%"}},Da={class:"float-right q-mr-md"},Ma={style:{width:"51%"}},Va={key:0,style:{"margin-left":"12px"}};function Qa(e,t,i,o,a,l){const r=(0,n.g2)("Account"),d=(0,n.g2)("Dimensions"),c=(0,n.g2)("q-input"),u=(0,n.g2)("Amount"),m=(0,n.g2)("SplitLineItemBtn"),h=(0,n.g2)("UnSplitLineItemBtn"),_=(0,n.g2)("AddChildLineItem"),p=(0,n.g2)("SplitedLineItems"),g=(0,n.g2)("q-tooltip"),v=(0,n.g2)("q-icon");return null!==e.header_index?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("div",{class:"row q-pt-sm total-line-item-area",id:e.lineItems[e.header_index].id,"data-id":e.lineItems[e.header_index].id},[_a,(0,n.Lk)("div",pa,(0,s.v_)(e.$t("total")),1),(0,n.Lk)("div",ga,[(0,n.bF)(r,{readonly:e.lineItems[e.header_index].readonly,onUpdateAccount:e.updateAccount,item:e.lineItems[e.header_index],index:e.header_index},null,8,["readonly","onUpdateAccount","item","index"]),(0,n.Lk)("div",va,[(0,n.bF)(d,{index:e.header_index},null,8,["index"])])]),(0,n.Lk)("div",ya,[(0,n.bF)(c,{class:"accouting-input column inline full-width",outlined:"",modelValue:e.lineItems[e.header_index].voucher_text,"onUpdate:modelValue":t[0]||(t[0]=t=>e.lineItems[e.header_index].voucher_text=t),disable:e.lineItems[e.header_index].split_items.length>0||e.is_view_readonly},null,8,["modelValue","disable"])]),(0,n.Lk)("div",fa,[(0,n.Lk)("div",ba,[(0,n.Lk)("div",wa,[(0,n.bF)(u,{index:e.header_index},null,8,["index"])]),(0,n.Lk)("div",xa,[(0,n.bF)(m,{index:e.header_index},null,8,["index"]),(0,n.bF)(h,{index:e.header_index},null,8,["index"]),(0,n.Lk)("div",ka,[(0,n.bF)(_,{index:e.header_index},null,8,["index"])])])])])],8,ha),(0,n.Lk)("div",Ia,[(0,n.bF)(p,{index:e.header_index},null,8,["index"])]),(0,n.Lk)("div",Aa,[La,(0,n.Lk)("div",Fa,[(0,n.Lk)("span",Ca,(0,s.v_)(e.$t("recorded_bookings"))+": ",1)]),(0,n.Lk)("div",Sa,[e.lineItems[e.header_index].hasOwnProperty("lines_total_amount")?((0,n.uX)(),(0,n.CE)("span",Ea,(0,s.v_)(e.lineItems[e.header_index].lines_total_amount),1)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",qa,[Pa,(0,n.Lk)("div",Ta,[(0,n.Lk)("span",Da,(0,s.v_)(e.$t("unsettled_amount"))+": ",1)]),(0,n.Lk)("div",Ma,[e.lineItems[e.header_index].hasOwnProperty("pending_amount")?((0,n.uX)(),(0,n.CE)("span",Va,(0,s.v_)(e.lineItems[e.header_index].pending_amount),1)):(0,n.Q3)("",!0),""!==e.lineItems[e.header_index].error?((0,n.uX)(),(0,n.Wv)(v,{key:1,flat:"",dense:"",name:"error",size:"20px",color:"red",class:"q-ml-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{class:"bg-red",anchor:"bottom right",self:"top right"},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.lineItems[e.header_index].error),1)])),_:1})])),_:1})):(0,n.Q3)("",!0)])])],64)):(0,n.Q3)("",!0)}const Oa=(0,n.pM)({mixins:[],props:{},components:{SplitedLineItems:da,Dimensions:Dn,Amount:tn,Account:fn,AddChildLineItem:On,SplitLineItemBtn:Bn,UnSplitLineItemBtn:bs},mounted(){this.header_index=this.getTotalLineIndex()},methods:{updateAccount(e){this.is_view_readonly||null===this.header_index||e.hasOwnProperty("index")&&e.hasOwnProperty("value")&&(this.lineItems[this.header_index].account=e.value,this.lineItems[this.header_index].account_error="",this.updateAccountInStore(this.header_index,null,e.value))},updateAmount(e){this.is_view_readonly||null===this.header_index||e.hasOwnProperty("index")&&e.hasOwnProperty("value")&&(this.lineItems[this.header_index].amount=e.value)}},setup(){const e=(0,X.NF)(),{lineItems:t,getTotalLineIndex:i,is_view_readonly:n}=(0,S.bP)(e),{getDimensionsForAccount:s,validateLine:o,updateAccount:a}=e;return{updateAccountInStore:a,getDimensionsForAccount:s,is_view_readonly:n,getTotalLineIndex:i,lineItems:t,header_index:(0,P.KR)(null),validateLine:o}}}),$a=(0,ce.A)(Oa,[["render",Qa]]),Xa=$a;_e()(Oa,"components",{QInput:ti.A,QIcon:ue.A,QTooltip:Ge.A});var Ka=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const Wa=(0,n.pM)({el:"#app",mixins:[E.A,q.A,R.A],components:{lineItem:ma,TotalLineItem:Xa},watch:{},emits:["addLineItem"],mounted(){this.init()},unmounted:function(){},data(){return{}},methods:{init(){return Ka(this,void 0,void 0,(function*(){try{if(!(0,le.jw)(this.accounting_error))return;window.m3=this,yield this.populateAccunts()}catch(e){const t=O.t.getErrorMessage(e);this.showErrorToast(t),logError(e),this.accounting_error=t}finally{this.resolveAccountLoadingPromise()}}))},populateAccunts(){return Ka(this,void 0,void 0,(function*(){this.hasPoMatchData()?yield this.getPOM3AccountsList():yield this.getAccountsList()}))},getPOM3AccountsList(){return Ka(this,void 0,void 0,(function*(){try{this.accounts_loaded=!1,this.accounts=[];const e=yield this.getM3POAccountsFromServer();if(0===e.length)throw{message:"No accounts found"};logInfo("getPOM3Accounts m3 accounts_results",e.length);for(const[t,i]of e.entries()){if(!i.id)continue;const e=i.id+(i.description?" - "+i.description:"");this.accounts.push({value:i.id,id:i.id,flexdimensions:[],label:e})}logInfo("getAccountsList m3 this.accounts",this.accounts),this.accounts_loaded=!0}catch(e){throw e}}))},getAccountsList(){return Ka(this,void 0,void 0,(function*(){try{this.accounts_loaded=!1,this.accounts=[];const e=yield this.getM3AccountsFromServer();if(0===e.length)throw{message:"No accounts found"};yield this.fetchDimensionRules();for(const[t,i]of e.entries()){if(!i.id)continue;const e=this.getDimensions(i),t=i.id+(i.description?" - "+i.description:"");this.accounts.push({value:i.id,id:i.id,flexdimensions:e,label:t})}this.generateDimensionDropdowns(),yield this.fetchDimensionDropdowns(),this.accounts_loaded=!0}catch(e){throw e}}))},getDimensions(e){const t=["dimension1","dimensionprofile"];this.dimensions=[];const i=[];for(const[n,s]of Object.entries(e))if(!t.includes(n)&&n.startsWith("dimension")){const t=n.split("dimension")[1];let o="o";const a="usage"+t;e.hasOwnProperty(a)&&"mandatory"===String(e[a]).toLowerCase()&&(o="m"),this.dimensions.push({rule:o,id:t,name:s,value:"",error:""}),i.push({rule:o,id:t,name:s,value:"",error:""})}return this.dimensions.sort(((e,t)=>e.id-t.id)),i.sort(((e,t)=>e.id-t.id)),i},fetchDimensionRules(){return Ka(this,void 0,void 0,(function*(){try{const e=yield this.getM3DimensionRulesFromServer();this.dimension_rules={};for(const[t,i]of e.entries()){const e={};Object.keys(i).forEach((t=>{let n=t.trim().toLowerCase().replace(/\s+/g,"_");e[n]=i[t]}));const t=e["accounting_identity"],n=e["accounting_dimension"],s=e["to_accounting_identity"],o=e["from_accounting_identity"];t&&e["accounting_dimension"]&&(this.dimension_rules.hasOwnProperty(t)||(this.dimension_rules[t]={}),this.dimension_rules[t].hasOwnProperty(n)||(this.dimension_rules[t][n]=[]),this.dimension_rules[t][n].push({end:s,start:o}))}}catch(e){throw e}}))},generateDimensionDropdowns(){try{for(let[e,t]of Object.entries(this.dimension_rules)){const i=t;for(let[t,n]of Object.entries(i)){const i=this.generateCombinationByRanges(n);0!==i.length&&(this.dimension_dropdowns.hasOwnProperty(e)||(this.dimension_dropdowns[e]={}),this.dimension_dropdowns[e][t]=i)}}}catch(e){throw e}},fetchDimensionDropdowns(){return Ka(this,void 0,void 0,(function*(){try{const e={},t=yield this.getM3DimensionsFromServer();if(0===t.length)return;Array.from(t).forEach(((t,i)=>{const n=t.dimension;if(!n||!t.description)return;e.hasOwnProperty(n)||(e[n]=[]);let s="";!t.hasOwnProperty("codevalue")||(0,le.z)(t.codevalue)||(0,le.jw)(t.codevalue)||(s+=t.codevalue+" - "),s+=t.description,e[n].push({value:t.id,label:s})}));let i={};for(const n in e){const t=e[n].sort(((e,t)=>e.label.localeCompare(t.label)));i[String(n)]=[...t]}this.dimension_general_dropdowns=i,logInfo("fetchDimensionDropdowns",i)}catch(e){throw e}}))},getRangeKey(e){return e.start.toUpperCase().replace(/\s+/g,"_")+"_"+e.end.toUpperCase().replace(/\s+/g,"_")},generateCombinationByRanges(e){let t=[];try{for(const i of e){const e=this.getRangeKey(i);if(this.combination_by_range.hasOwnProperty(e)||(this.combination_by_range[e]=this.generateCombinations(i)),t.push(...this.combination_by_range[e]),t.length>this.max_combinations)throw new Error("Combination over load")}}catch(i){t=[]}return t},generateCombinations(e){let t=[];try{const i=e.start,n=e.end;if(i.length!==n.length)throw new Error("Combination over load");const s=[];for(let e=0;e<i.length;e++)if(i[e]===n[e])s.push([i[e]]);else{const t=i.charCodeAt(e),o=n.charCodeAt(e),a=[];if(t>o){for(let e=t;e<="Z".charCodeAt(0);e++)a.push(String.fromCharCode(e));for(let e="A".charCodeAt(0);e<=o;e++)a.push(String.fromCharCode(e))}else for(let e=t;e<=o;e++)a.push(String.fromCharCode(e));s.push(a)}return this.combine("",s,0,t),t}catch(i){throw new Error("Combination over load")}},combine(e,t,i,n){if(n.length>this.max_combinations)throw new Error("Combination over load");if(i!==t.length)for(let s of t[i])this.combine(e+s,t,i+1,n);else n.push({value:e,label:e})},addLineItem(){this.$emit("addLineItem")}},setup(){const e=(0,X.NF)(),{accounting_mode:t,lineItems:i,accounts:n,accounts_loaded:s,dimensions:o,dimension_dropdowns:a,accounting_error:l,dimension_rules:r,dimension_general_dropdowns:d}=(0,S.bP)(e),c=(0,X.WN)(),{line_item_loaded:u}=(0,S.bP)(c),{getM3AccountsFromServer:m,getM3DimensionsFromServer:h,resolveAccountLoadingPromise:_,getM3POAccountsFromServer:p,getM3DimensionRulesFromServer:g}=c,v=(0,X.R9)(),{hasPoMatchData:y}=v;return{getM3DimensionRulesFromServer:g,getM3POAccountsFromServer:p,hasPoMatchData:y,resolveAccountLoadingPromise:_,getM3DimensionsFromServer:h,getM3AccountsFromServer:m,dimension_general_dropdowns:d,dimension_rules:r,dimension_dropdowns:a,dimensions:o,accounts_loaded:s,accounting_error:l,lineItems:i,accounting_mode:t,line_item_loaded:u,accounts:n,fab1:(0,P.KR)(!1),combination_by_range:(0,P.KR)({}),max_combinations:20}}}),Ra=(0,ce.A)(Wa,[["render",qo]]),Ba=Ra;_e()(Wa,"components",{QFab:ho.A,QSeparator:Lt.A,QIcon:ue.A,QTooltip:Ge.A});var Na=i(41903),Ua=i(43437),ja=function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{r(n.next(e))}catch(t){o(t)}}function l(e){try{r(n["throw"](e))}catch(t){o(t)}}function r(e){e.done?i(e.value):s(e.value).then(a,l)}r((n=n.apply(e,t||[])).next())}))};const za=(0,n.pM)({el:"#app",mixins:[E.A,q.A,R.A],components:{MessageBanner:D.A,ImageComponent:M["default"],ErrorDocumentView:V.A,Loader:W.A,SetupValidation:Pe,ExpertMode:Ai,ProceedBtn:Ne,PredictionBtn:Pt,LN_VIEW:po,M3_VIEW:Ba,SaveBtn:Ye,SubHeader:Ue.A},watch:{accounting_error:{handler:function(e,t){this.is_view_readonly=""!==e}},processing:{handler:function(e,t){1==e?this.showLoading():this.hideLoading()}},data_loaded:{handler:function(e,t){1==e?this.hideLoading():this.showLoading()}},has_fetch_error:{handler:function(e,t){1==e?this.hideLoading():this.showLoading()}}},mounted(){this.init(),window.addEventListener("storage",this.storageChangeEvent)},unmounted:function(){window.removeEventListener("storage",this.storageChangeEvent)},data(){return{auto_accounting_types_setting:$.hv,line_item_columns:["POSITION","DESCRIPTION","ITEM_NUMBER"]}},beforeRouteLeave:function(e,t,i){return ja(this,void 0,void 0,(function*(){this.resetDocStore(e.fullPath),this.resetAccountingStore(),this.resetAccountingTypeStore(),yield this.releaseDocLock({doc_id:this.docId});const t=(0,X.R9)();t.$reset(),"function"===typeof this.missing_supplier_warning&&this.missing_supplier_warning(),i()}))},methods:{init(){return ja(this,void 0,void 0,(function*(){try{if(this.accounting_error="",window.acc=this,this.connect(),this.processing=!0,this.docId=this.$route.params.id,this.doc_url=window.location.href,Na.A.remove("doc_info"),this.line_item_loaded=!1,yield this.getDocumentById(this.docId),!this.record||0===Object.keys(this.record).length||!1===this.record.success)return;yield this.startSettingsFetch(),this.verifyUserSettings(),this.setAccountingModeOptions(),this.handleReadOnlyView(),this.setAccountingVariables(),this.view_template=yield this.loadTemplateSettings(),yield this.startAccountAsyncOperation(),yield this.checkIfMultiTaxCode(),yield this.prepareDataForView(),this.calculateLNColumnWidth(),this.handleMode(),this.data_loaded=!0}catch(e){const t=O.t.getErrorMessage(e);this.showErrorToast(t),logError(e),this.accounting_error=t}finally{this.processing=!1}}))},verifyUserSettings(){this.setup_error=!1;const e=this.verifyModuleSettings();if(e.length>0)throw this.setup_error=!0,new Error(this.$t("missing_auto_accounting_settings"))},storageChangeEvent(e){this.handleSessionStorageChange(e)},handleSessionStorageChange(e){return ja(this,void 0,void 0,(function*(){try{this.handleStorageEvent(e);const t=yield this.loadTemplateSettings();t!==this.view_template&&(this.processing=!0,this.view_template=t,yield this.prepareDataForView())}catch(t){logError(t)}finally{this.processing=!1}}))},handleReadOnlyView(){this.is_view_readonly=!1,$.B2.includes(this.record.status)&&(this.is_view_readonly=!0)},loadTemplateSettings(){return ja(this,void 0,void 0,(function*(){const e=yield this.getSettingWithExpiry(this.auto_accounting_types_setting,"ln");let t=this.view_types.ln;return"m3"===e&&(t=this.view_types.m3),t}))},prepareDataForView(){return ja(this,void 0,void 0,(function*(){this.lineItems=[],this.line_item_loaded=!1,this.accounting_additional_fields=this.getAdditionalFields(),this.setLineItemsObj(),this.hasPoMatchData()&&(this.setPoTotalLineItem(),yield this.calculateMatchedTotal()),this.record.hasOwnProperty("accounting")&&this.loadSavedData(),this.line_item_loaded||this.prepareLineItems(),this.prepareTaxCountryDropdown(),this.doAccountPredictions(),this.line_item_loaded=!0}))},prepareLineItems(){try{if(this.lineItems=[],this.hasPendingPoMatch())return this.setPendingPoTotalLineItem(),this.is_multi_match?this.disable_mode=!0:this.setPoMatchedLineItems(),void(this.isMultiTaxSection=!1);this.isMultiTaxSection?this.prepareAmountsForMultiSection():this.setTotallineItem(),this.setlineItems()}catch(e){logError(e)}},doAccountPredictions(){return ja(this,void 0,void 0,(function*(){try{if(!this.isValidData())return void logInfo("No Supplier for prediction",this.supplier_name);const e=this.getLineItemsForPredictionAccount();if(0===e.length)return;const t={line_items:JSON.stringify(e),source_locale:this.amount_format_locale,doc_id:this.docId};yield this.getPredictions(t)}catch(e){logError(e)}}))},setPoMatchedLineItems(){return ja(this,void 0,void 0,(function*(){try{if(!this.hasPoMatchData()||0===this.record.po_items.length||this.is_multi_match)return;this.buildPoLinesObj(this.record.po_items);const e=yield this.getMatchedLines();if(0===e.length)return;for(const[t,i]of e.entries()){const e=this.baseLineItem();e.id=i.table_line_id,e.amount=i.amount,e.amount_standard=i.amount_standard;const t=this.lineDataObj[i.table_line_id];for(const i of this.line_item_columns)t.columns.hasOwnProperty(i)&&(e[i.toLowerCase()]=t.columns[i].formatted_value);this.lineItems.push(e)}}catch(e){logError(e)}}))},setPendingPoTotalLineItem(){const e=this.getbaseTotalLineItem();e.amount=this.pending_amount,e.amount_standard=this.pending_amount_standard,this.lineItems.push(e)},hasPendingPoMatch(){try{let e=parseFloat(this.pending_amount.replace(/[^0-9]/g,""));return!!(this.pending_amount&&""!=this.pending_amount&&e>0)}catch(e){return logError(e),!0}},loadSavedData(){const e=this.record.accounting.line_items;if(this.accounting_mode=this.record.accounting.mode,this.line_item_loaded=!1,this.hasPendingPoMatch()&&this.is_multi_match&&(this.accounting_mode="total_line",this.disable_mode=!0),!Array.isArray(e)||0===e.length)return!1;const t=["line_item","total_line_item"];for(const[i,n]of e.entries()){let e=this.baseLineItem();"total_line_item"===n.type&&(e=this.getbaseTotalLineItem()),t.includes(n.type)&&(this.line_item_loaded=!0);const i=Object.assign(e,n);if(n.split_items.length>0)for(const[t,n]of i.split_items.entries()){let e=this.baseSplitLineItem();const s=Object.assign(e,n);i.split_items[t]=s}this.lineItems.push(e)}},hasLineItems(){return!(!this.record.tables||0==this.record.tables.length||!this.record.tables[0].hasOwnProperty("rows")||0==this.record.tables[0].rows.length)},setlineItems(){this.hasLineItems()&&Array.from(this.record.tables[0].rows).forEach(((e,t)=>{if(!0===e.is_deleted||!e.id)return;const i=this.baseLineItem();i.id=e.id;const n=new Map;n.set("NET_AMOUNT",""),n.set("TOTAL_AMOUNT","");const s={};Array.from(e.columns).forEach(((e,t)=>{this.line_item_columns.includes(e.name)&&(i[e.name.toLowerCase()]=e.formatted_value),n.has(e.name)&&(n.set(e.name,e.formatted_value),s[e.name]=e.value)}));for(const[o,a]of n.entries())if(""!==a){i.amount=a,i.amount_standard=s[o];break}this.lineItems.push(i)}))},setLineItemsObj(){if(!this.hasLineItems())return;this.prepareTableLayoutObj(),this.getTableColumns();let e={};Array.from(this.record.tables[0].rows).forEach(((t,i)=>{!0!==t.is_deleted&&t.id&&(e[t.id]=JSON.parse(JSON.stringify(t)),e[t.id]["columns"]=[],Array.from(t.columns).forEach(((i,n)=>{e[t.id].columns[i.name]=JSON.parse(JSON.stringify(i))})))})),Object.assign(this.lineDataObj,e)},setTotallineItem(){const e=this.getbaseTotalLineItem();this.record.fields&&Array.isArray(this.record.fields)&&this.record.fields.length>0&&this.record.fields.forEach(((t,i)=>{"total_net_amount"===t.name&&(e.amount=t.formatted_value,e.amount_standard=t.value)})),this.lineItems.push(e)},addLineItem(){if(this.is_view_readonly)return;const e=this.baseLineItem();e.id=(0,C.A)(),this.lineItems.push(e)},setAccountingVariables(){this.amount_format_locale=this.doc_amount_format_locale,this.setSupplier()},setSupplier(){this.supplier_name=this.supplier,this.isValidData()||(this.missing_supplier_warning=this.showWarningAlert(this.$t("missing_supplier_warning")))},emptyLineItems(){0===this.lineItems.length&&(this.empty_line_item=!0)},copyURL(){this.doc_url.trim().length>0&&(0,K.A)(this.doc_url).then((()=>{this.showSuccessToast(this.$t("link_copied_to_clipboard"))}))},closeDialog(e){this.empty_line_item=!1},addDummyData(){this.supplier_name="Fellow Consulting AG",logInfo("addDummyData",this.supplier_name)},handleMode(){let e="total_line_item";"total_line"===this.accounting_mode&&(e="line_item"),this.disableLineItems(e),this.calculateTotalByMode(),this.calculateLNColumnWidth()},disableLineItems(e="line_item"){Array.from(this.lineItems).forEach(((t,i)=>{t.error="",t.type===e?(t.readonly=!0,t.split_items=[],t.dimensions=[]):t.readonly=!1}))},setAccountingModeOptions(){this.accounting_mode_options=[{label:this.$t("split_by_total"),value:"total_line"},{label:this.$t("line_items"),value:"line_items"}]},toggleMenu(){this.is_view_readonly||(this.expert_mode=!this.expert_mode)},routeToBack(){try{if(history.state.back)return void this.$router.back();this.$router.push("/field_validation_v1/"+this.docId)}catch(e){logError(e),this.$router.push("/field_validation_v1/"+this.docId)}},checkIfMultiTaxCode(){return ja(this,void 0,void 0,(function*(){this.isMultiTaxSection=!1,yield this.getLayoutTemplateID(""),yield this.getFormBuilderLayout(),this.checkMultiSections()}))},getFormBuilderLayout(){return ja(this,void 0,void 0,(function*(){let e;this.formLayout=[];try{if(!this.layout_template_id)return;e=yield T.H7.getDocumentLayoutTemplateById(this.layout_template_id);let t=JSON.parse(e.layout_json);t&&(this.formLayout=t.hasOwnProperty("layout")?t.layout:[])}catch(t){return this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void logError(t)}}))},prepareTaxCountryDropdown(){this.taxCodeAndCountryDropdown=[];for(let[e,t]of this.amountFieldsList.entries()){let i=e+1;this.taxCodeAndCountryDropdown.push({value:i,label:i+" "+t.tax_country.formatted_value+", "+t.tax_code_without_country.formatted_value})}},prepareAmountsForMultiSection(){const e=this.getbaseTotalLineItem();for(let[t,i]of this.amountFieldsList.entries()){const n=JSON.parse(JSON.stringify(e));n.amount=i.net_amount.formatted_value,n.amount_standard=i.net_amount.value;let s=t+1;n.position=s,this.lineItems.push(n)}},checkMultiSections(){this.amountFieldsList=[];let e={};this.record.fields.forEach(((t,i)=>{e[t.name]=t}));for(const[t,i]of this.formLayout.entries())for(let[n,s]of i.rows.entries()){if(s.fieldType!=Q.VV.SUB_GROUP)continue;this.isMultiTaxSection=!0;let t=this.findKeyStartingWith(s.rows,"tax_code_without_country")||"",i=this.findKeyStartingWith(s.rows,"net_amount")||"",n=this.findKeyStartingWith(s.rows,"tax_country")||"";i&&this.prepareAmountsData(e,t,i,n)}},prepareAmountsData(e,t,i,n){let s=this.findSubGroupChildFields(i);if(this.prepareAmountObject(e,t,i,n),!s||0!=Object.keys(s).length)for(let o of s)this.prepareAmountObject(e,t,o.name,n)},prepareAmountObject(e,t,i,n){if(!e[i]||!e[i].formatted_value)return;let s="";if(i.includes("__")){const e=this.getStringLastPart(i,"__");s="__"+e}t+=s,n+=s;const o={tax_code_without_country:{orignal_name:t,value:e[t]&&e[t].value?e[t].value:"empty",formatted_value:e[t]&&e[t].formatted_value?e[t].formatted_value:"empty"},net_amount:{orignal_name:i,value:e[i]&&e[i].value?e[i].value:0,formatted_value:e[i]&&e[i].formatted_value?e[i].formatted_value:0},tax_country:{orignal_name:n,value:e[n]&&e[n].value?e[n].value:"empty",formatted_value:e[n]&&e[n].formatted_value?e[n].formatted_value:"empty"}};this.amountFieldsList.push(o)},findKeyStartingWith(e,t){const i=e.find((e=>e.field_name.startsWith(t)));return i?String(i.field_name):""}},setup(){const e=(0,X.q3)(),{record:t,error:i,doc_loaded:n,processing:s,auto_saving:o,auto_saved_done:a,amount_format_locale:l,supplier:r,layout_template_id:d}=(0,S.bP)(e),{getDocumentById:c,saveDocument:u,resetDocStore:m,getLayoutTemplateID:h,findSubGroupChildFields:_}=e,p=(0,X.NF)(),{resetAccountingStore:g,calculateTotalByMode:v,getTotalLineIndex:y,checkTotalForEachLineItem:f,baseSplitLineItem:b,getPredictions:w,getLineItemsForPredictionAccount:x,calculateLNColumnWidth:k,getAccountsList:I,isValidData:A}=p,{lineItems:L,columnWidth:F,amount_format_locale:C,is_view_readonly:E,accounting_mode:q,dimensions:T,accounts:D,dimension_dropdowns:M,supplier_name:V,categorized_accounts:Q,expert_mode:O,accounting_error:$,amountFieldsList:K,taxCodeAndCountryDropdown:W,isMultiTaxSection:R}=(0,S.bP)(p),B=(0,X.R9)(),{calculateMatchedTotal:N,setTotallineItem:U,hasPoMatchData:j,buildPoLinesObj:z,getMatchedLines:H}=B,{total_net_amount:G,pending_amount:J,matched_total_amount:Y,pending_amount_standard:Z,lineDataObj:ee,is_multi_match:te,PODataObj:ie}=(0,S.bP)(B),ne=(0,X.Im)(),{prepareTableLayoutObj:se,getTableColumns:oe}=ne,ae=(0,X.G6)(),{connect:le}=ae,re=(0,X.Bu)(),{startSettingsFetch:de,getSettingWithExpiry:ce,handleStorageEvent:ue}=re,{user_settings:me}=(0,S.bP)(re),he=(0,X.uL)(),{formLayout:_e}=(0,S.bP)(he),pe=(0,X.WN)(),{view_template:ge,view_types:ve,line_item_loaded:ye,accounting_additional_fields:fe}=(0,S.bP)(pe),{baseLineItem:be,getbaseTotalLineItem:we,startAccountAsyncOperation:xe,resetAccountingTypeStore:ke,verifyModuleSettings:Ie,getAdditionalFields:Ae}=pe,Le=(0,X.oI)(),{releaseDocLock:Fe}=Le;return{releaseDocLock:Fe,prepareTableLayoutObj:se,getTableColumns:oe,getLayoutTemplateID:h,findSubGroupChildFields:_,accounting_additional_fields:fe,getAdditionalFields:Ae,isValidData:A,verifyModuleSettings:Ie,user_settings:me,startSettingsFetch:de,getMatchedLines:H,PODataObj:ie,isMultiTaxSection:R,is_multi_match:te,layout_template_id:d,buildPoLinesObj:z,lineDataObj:ee,accounting_error:$,resetAccountingTypeStore:ke,startAccountAsyncOperation:xe,calculateLNColumnWidth:k,taxCodeAndCountryDropdown:W,pending_amount_standard:Z,amountFieldsList:K,getAccountsList:I,line_item_loaded:ye,handleStorageEvent:ue,getbaseTotalLineItem:we,baseLineItem:be,getSettingWithExpiry:ce,view_template:ge,view_types:ve,supplier:r,formLayout:_e,categorized_accounts:Q,getLineItemsForPredictionAccount:x,getPredictions:w,doc_amount_format_locale:l,baseSplitLineItem:b,hasPoMatchData:j,total_net_amount:G,pending_amount:J,matched_total_amount:Y,calculateMatchedTotal:N,setPoTotalLineItem:U,connect:le,dimensions:T,accounts:D,dimension_dropdowns:M,checkTotalForEachLineItem:f,getTotalLineIndex:y,accounting_mode:q,calculateTotalByMode:v,doc_loaded:n,is_view_readonly:E,resetAccountingStore:g,saveDocument:u,resetDocStore:m,getDocumentById:c,lineItems:L,columnWidth:F,auto_saving:o,auto_saved_done:a,has_fetch_error:i,amount_format_locale:C,error_message:(0,P.KR)(""),record:t,processing:s,docId:(0,P.KR)(""),splitterModel:(0,P.KR)(70),messageCategoryClass:(0,P.KR)("error-banner"),empty_line_item:(0,P.KR)(!1),doc_url:(0,P.KR)(""),data_loaded:(0,P.KR)(!1),accounting_mode_options:(0,P.KR)([]),show_setup_validation:(0,P.KR)(!1),disable_mode:(0,P.KR)(!1),supplier_name:V,expert_mode:O,missing_supplier_warning:{},setup_error_message:(0,P.KR)(""),setup_error:(0,P.KR)(!1),mdiShare:Ua.YuT}}});var Ha=i(98072),Ga=i(28975),Ja=i(23954),Ya=i(67156);const Za=(0,ce.A)(za,[["render",F],["__scopeId","data-v-4628290e"]]),el=Za;_e()(za,"components",{QBtn:We.A,QIcon:ue.A,QSplitter:Ha.A,QBtnToggle:Ga.A,QBadge:Ja.A,QTooltip:Ge.A,QDialog:Re.A,QCard:ft.A,QToolbar:bt.A,QToolbarTitle:wt.A,QCardSection:xt.A,QInput:ti.A,QFab:ho.A,QField:Ya.A}),_e()(za,"directives",{ClosePopup:ki.A})}}]);