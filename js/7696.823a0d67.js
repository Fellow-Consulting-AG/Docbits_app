"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[7696],{97696:(e,l,t)=>{t.r(l),t.d(l,{default:()=>ut});var s=t(61758),a=t(58790),i=t(29104);const o=e=>((0,s.Qi)("data-v-6c04dd80"),e=e(),(0,s.jt)(),e),d={class:"container no-padding back"},r={class:"secondary-c-text text-h6 q-pt-md q-pb-md"},n={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},c={class:"container p-b-0 settings"},u={class:"container q-pa-xl settings"},h={class:"q-gutter-y-md"},_={class:"row text-weight-bolder"},p={class:"col-sm-3 col-md-3 col-lg-3 secondary-c-text text-h6"},m={class:"col-sm-3 col-md-3 col-lg-3 text-center"},g={class:"col-sm-3 col-md-3 col-lg-3 text-center"},f=o((()=>(0,s.Lk)("div",{class:"col-sm-3 col-md-3 col-lg-3"},null,-1))),b={class:"row"},y=o((()=>(0,s.Lk)("div",{class:"col-sm-3 col-md-3 col-lg-3"},null,-1))),k={class:"col-sm-3 col-md-3 col-lg-3"},v={class:"col-sm-3 col-md-3 col-lg-3"},F={class:"col-sm-3 col-md-3 col-lg-3"},L={class:"row mt-5"},V={class:"col-4"},E={class:"col-8"},T={class:"full-width"},w={class:"highlighted-back"},C={class:"text-h4 text-uppercase"},x={class:"text-h4 text-uppercase text-center"},D={class:"text-h4 text-uppercase text-center"},R={class:"text-h4 text-uppercase text-center"},A={class:"text-h4 text-uppercase text-center"},$={class:"text-h4 text-uppercase col-100"},U={class:"text-h4 text-uppercase col-100"},q={class:"text-h4 text-uppercase"},N={class:"highlighted-back"},S=o((()=>(0,s.Lk)("th",{class:"text-center"},null,-1))),O=o((()=>(0,s.Lk)("th",null,null,-1))),K={class:"text-center"},G={class:"text-center"},Q={class:"text-center"},P={class:"text-center"},I=o((()=>(0,s.Lk)("th",{class:"col-100"},null,-1))),B=o((()=>(0,s.Lk)("th",{colspan:"2"},null,-1))),M={class:"row-header"},X={class:"text-h5 secondary-c-text",colspan:"7"},W={colspan:"2"},j=o((()=>(0,s.Lk)("img",{class:"",width:"20",height:"20",src:"images/Trash-Block.svg",alt:""},null,-1))),Y=o((()=>(0,s.Lk)("img",{class:"",width:"20",height:"20",src:"images/trash-bin-default.svg",alt:""},null,-1))),z={key:0},H={class:"text-h4 text-center"},Z={class:"text-h4"},J={class:"text-h4 text-center"},ee={class:"text-h4 text-center"},le={class:"text-h4 text-center"},te={class:"text-h4 text-center"},se={class:"text-h4 text col-100"},ae={class:"text-h4 text col-100"},ie={class:"text-h4"},oe=o((()=>(0,s.Lk)("img",{class:"",width:"20",height:"20",src:"images/Trash-Block.svg",alt:""},null,-1))),de=o((()=>(0,s.Lk)("img",{class:"",width:"24",height:"24",src:"images/trash-bin-default.svg",alt:""},null,-1))),re={class:"row full-width"},ne={class:"col-sm-12 col-md-12 col-lg-12 text-align-center"},ce={class:"row"},ue={class:"col-sm-12 col-md-12 col-lg-12"},he={class:"row"},_e={class:"col-sm-12 col-md-12 col-lg-12"},pe={class:"col-sm-12 col-md-12 col-lg-12"},me=o((()=>(0,s.Lk)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},null,-1))),ge={class:"col-sm-12 col-md-12 col-lg-12"},fe={class:"row q-pt-md"},be={class:"col-sm-12 col-md-12 col-lg-12 q-pl-md q-pr-md"},ye={class:"text-weight-bold text-white"},ke={class:"col-sm-12 col-md-12 col-lg-12 q-mb-sm"},ve={class:"col-sm-12 col-md-12 col-lg-12"},Fe={class:"float-right q-mb-sm"},Le={class:"text-weight-bold"},Ve={class:"col-sm-12 col-md-12 col-lg-12"},Ee={class:"col-sm-12 col-md-12 col-lg-12"},Te={class:"col-12"},we={key:0,class:"col-12"},Ce={class:"col-12"},xe={class:"col-sm-12 col-md-12 col-lg-12"},De={class:"col-sm-12 col-md-12 col-lg-12"},Re={key:2,class:"col-sm-12 col-md-12 col-lg-12"},Ae={class:"col-12 text-align-center q-mt-sm"},$e={class:"q-ml-sm"},Ue={class:"text-weight-bold"},qe={class:"col-sm-12 col-md-12 col-lg-12"};function Ne(e,l,t,o,Ne,Se){const Oe=(0,s.g2)("SubHeader"),Ke=(0,s.g2)("q-icon"),Ge=(0,s.g2)("q-btn"),Qe=(0,s.g2)("q-tab"),Pe=(0,s.g2)("q-tabs"),Ie=(0,s.g2)("parentFields"),Be=(0,s.g2)("q-tab-panel"),Me=(0,s.g2)("q-slider"),Xe=(0,s.g2)("f-btn"),We=(0,s.g2)("q-separator"),je=(0,s.g2)("q-input"),Ye=(0,s.g2)("q-checkbox"),ze=(0,s.g2)("q-fab-action"),He=(0,s.g2)("q-fab"),Ze=(0,s.g2)("q-tooltip"),Je=(0,s.g2)("q-markup-table"),el=(0,s.g2)("q-tab-panels"),ll=(0,s.g2)("q-toolbar-title"),tl=(0,s.g2)("q-toolbar"),sl=(0,s.g2)("q-form"),al=(0,s.g2)("q-card-section"),il=(0,s.g2)("q-card"),ol=(0,s.g2)("q-dialog"),dl=(0,s.g2)("q-select"),rl=(0,s.g2)("q-avatar"),nl=(0,s.g2)("q-card-actions"),cl=(0,s.g2)("Loader"),ul=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(Oe,{name:"document_type_fields",label:e.$t("pages.settings.fields")},null,8,["label"]),(0,s.Lk)("div",d,[(0,s.Lk)("div",r,[(0,s.bF)(Ge,{flat:"",rounded:"",color:"primary",to:e.sub_doc_type_key?"/settings/sub_doc_type/"+e.documentType:"/settings/document"},{default:(0,s.k6)((()=>[(0,s.bF)(Ke,{name:"fa-solid fa-circle-arrow-left",size:"sm"}),(0,s.Lk)("label",n,(0,a.v_)(e.$t("pages.settings.document_types")),1)])),_:1},8,["to"])])]),(0,s.Lk)("div",c,[(0,s.bF)(Pe,{modelValue:e.tab,"onUpdate:modelValue":l[0]||(l[0]=l=>e.tab=l),dense:"",class:"text-weight-bold doc2-panels",align:"justify","narrow-indicator":"","active-class":"highlighted-back","active-color":"primary"},{default:(0,s.k6)((()=>[(0,s.bF)(Qe,{name:"fields",label:e.$t("pages.fields_settings.field_setting")},null,8,["label"]),e.sub_doc_type_key?((0,s.uX)(),(0,s.Wv)(Qe,{key:0,name:"parent_doc_type_field",label:e.getParentDocTypeName()+" "+e.$t("fields")+"("+e.$t("readonly")+")"},null,8,["label"])):(0,s.Q3)("",!0)])),_:1},8,["modelValue"])]),(0,s.Lk)("div",u,[(0,s.bF)(el,{modelValue:e.tab,"onUpdate:modelValue":l[29]||(l[29]=l=>e.tab=l),animated:"",class:"page-background"},{default:(0,s.k6)((()=>[(0,s.bF)(Be,{name:"parent_doc_type_field"},{default:(0,s.k6)((()=>[(0,s.bF)(Ie)])),_:1}),(0,s.bF)(Be,{name:"fields"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",h,[(0,s.Lk)("div",_,[(0,s.Lk)("div",p,(0,a.v_)(e.$t("pages.fields_settings.recog")),1),(0,s.Lk)("div",m,(0,a.v_)(e.$t("pages.fields_settings.ocr")),1),(0,s.Lk)("div",g,(0,a.v_)(e.$t("pages.fields_settings.match_score")),1),f]),(0,s.Lk)("div",b,[y,(0,s.Lk)("div",k,[(0,s.bF)(Me,{class:"q-mr-lg",onChange:l[1]||(l[1]=l=>e.setSetting("confidence_threshold")),modelValue:e.confidence_threshold,"onUpdate:modelValue":l[2]||(l[2]=l=>e.confidence_threshold=l),min:0,max:100,step:2,label:"",snap:""},null,8,["modelValue"])]),(0,s.Lk)("div",v,[(0,s.bF)(Me,{class:"q-ml-lg",onChange:l[3]||(l[3]=l=>e.setSetting("match_score_threshold")),modelValue:e.match_score_threshold,"onUpdate:modelValue":l[4]||(l[4]=l=>e.match_score_threshold=l),min:0,max:100,step:2,label:"",snap:""},null,8,["modelValue"])]),(0,s.Lk)("div",F,[(0,s.bF)(Xe,{appearance:"negative-tertiary",label:e.$t("pages.fields_settings.all_default"),class:"float-right",onClick:l[5]||(l[5]=l=>e.resetToDefault())},null,8,["label"])])]),(0,s.bF)(We,{class:"q-ma-sm"}),(0,s.Lk)("div",L,[(0,s.Lk)("div",V,[(0,s.bF)(je,{dense:"",outlined:"",label:e.$t("search_supplier"),modelValue:e.search,"onUpdate:modelValue":l[6]||(l[6]=l=>e.search=l)},null,8,["label","modelValue"])]),(0,s.Lk)("div",E,[(0,s.bF)(Xe,{label:e.$t("pages.master_data_fields.master_data_settings"),class:"right q-ml-md",onClick:l[7]||(l[7]=l=>{e.masterDataSettings()})},null,8,["label"]),(0,s.bF)(Xe,{label:e.$t("create_group"),class:"right",onClick:l[8]||(l[8]=l=>{e.showCreateGroupForm()})},null,8,["label"]),(0,s.bF)(Xe,{label:e.$t("save_settings"),class:"q-mr-md right",onClick:l[9]||(l[9]=l=>e.save())},null,8,["label"])])]),(0,s.Lk)("div",T,[(0,s.bF)(Je,{dense:"",flat:"",class:"dashboard-table-style fields-settings-table-height back-white dashboard-table-header-sticky"},{default:(0,s.k6)((()=>[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",w,[(0,s.Lk)("th",null,[(0,s.bF)(Ye,{modelValue:e.fields_checkbox["move_all"],"onUpdate:modelValue":[l[10]||(l[10]=l=>e.fields_checkbox["move_all"]=l),l[11]||(l[11]=l=>e.updateFieldGroupClicked())]},null,8,["modelValue"]),(0,s.bF)(He,{disable:!e.isFieldSelected(),"label-position":"top",flat:"","data-cy":"actions","external-label":"",icon:"more_vert",direction:"down",padding:"1px"},{default:(0,s.k6)((()=>[(0,s.bF)(ze,{"external-label":"",color:"primary",onClick:l[12]||(l[12]=l=>e.displayUpdateFieldGroupDialog()),icon:"redo",label:e.$t("reassign_field_group")},null,8,["label"])])),_:1},8,["disable"])]),(0,s.Lk)("th",C,(0,a.v_)(e.$t("pages.fields_settings.fields")),1),(0,s.Lk)("th",x,(0,a.v_)(e.$t("pages.fields_settings.requierd")),1),(0,s.Lk)("th",D,(0,a.v_)(e.$t("pages.fields_settings.read_only")),1),(0,s.Lk)("th",R,(0,a.v_)(e.$t("pages.fields_settings.hidden")),1),(0,s.Lk)("th",A,(0,a.v_)(e.$t("pages.fields_settings.force")),1),(0,s.Lk)("th",$,(0,a.v_)(e.$t("pages.fields_settings.ocr")),1),(0,s.Lk)("th",U,(0,a.v_)(e.$t("pages.fields_settings.match_score")),1),(0,s.Lk)("th",q,(0,a.v_)(e.$t("pages.fields_settings.formula")),1)]),(0,s.Lk)("tr",N,[S,O,(0,s.Lk)("th",K,[(0,s.bF)(Ye,{onClick:l[13]||(l[13]=l=>e.setSetting("is_required")),modelValue:e.is_required,"onUpdate:modelValue":l[14]||(l[14]=l=>e.is_required=l)},null,8,["modelValue"])]),(0,s.Lk)("th",G,[(0,s.bF)(Ye,{onClick:l[15]||(l[15]=l=>e.setSetting("is_readonly")),modelValue:e.is_readonly,"onUpdate:modelValue":l[16]||(l[16]=l=>e.is_readonly=l)},null,8,["modelValue"])]),(0,s.Lk)("th",Q,[(0,s.bF)(Ye,{onClick:l[17]||(l[17]=l=>e.setSetting("is_hidden")),modelValue:e.is_hidden,"onUpdate:modelValue":l[18]||(l[18]=l=>e.is_hidden=l)},null,8,["modelValue"])]),(0,s.Lk)("th",P,[(0,s.bF)(Ye,{onClick:l[19]||(l[19]=l=>e.setSetting("force_validation")),modelValue:e.force_validation,"onUpdate:modelValue":l[20]||(l[20]=l=>e.force_validation=l)},null,8,["modelValue"])]),I,B])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.filteredFieldSettings,(t=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t.name},[(0,s.Lk)("tr",M,[(0,s.Lk)("td",X,(0,a.v_)(e.$t("pages.screen2a."+t.translation_key)==="pages.screen2a."+t.translation_key?t.title:e.$t("pages.screen2a."+t.translation_key)),1),(0,s.Lk)("td",W,[e.default_fields_groups.includes(t.id)?((0,s.uX)(),(0,s.Wv)(Ge,{key:0,flat:"",color:"black",class:"right",unelevated:"",style:{cursor:"default"}},{default:(0,s.k6)((()=>[j,(0,s.bF)(Ze,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(e.$t("no_operation_for_standard")),1)])),_:1})])),_:1})):((0,s.uX)(),(0,s.Wv)(Ge,{key:1,flat:"",color:"primary",class:"right",onClick:l=>e.deleteGroup(t.id)},{default:(0,s.k6)((()=>[Y])),_:2},1032,["onClick"])),(0,s.bF)(Xe,{class:"right",label:e.$t("create_field"),onClick:l=>e.showFieldDetailsDlg(t.name)},null,8,["label","onClick"])])]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.rows,((t,i)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:i},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t,(t=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t.field_name},[e.isVisible(t)?((0,s.uX)(),(0,s.CE)("tr",z,[(0,s.Lk)("td",H,["DEFAULT"==t["field_org_id"]?((0,s.uX)(),(0,s.Wv)(Ye,{key:0,class:"disabled_checkbox",modelValue:e.disable_checkbox,"onUpdate:modelValue":l[21]||(l[21]=l=>e.disable_checkbox=l),disable:!0},{default:(0,s.k6)((()=>[(0,s.bF)(Ze,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(e.$t("no_operation_for_standard")),1)])),_:1})])),_:1},8,["modelValue"])):((0,s.uX)(),(0,s.Wv)(Ye,{key:1,modelValue:e.fields_checkbox[t.id],"onUpdate:modelValue":l=>e.fields_checkbox[t.id]=l},null,8,["modelValue","onUpdate:modelValue"]))]),(0,s.Lk)("td",Z,[(0,s.bF)(je,{dense:"",filled:"",style:{background:"transparent"},modelValue:t.field_display_label,"onUpdate:modelValue":[e=>t.field_display_label=e,l=>e.saveNewFieldLabel(t)],label:t.field_name},null,8,["modelValue","onUpdate:modelValue","label"])]),(0,s.Lk)("td",J,[(0,s.bF)(Ye,{disable:e.isFieldHiddenOrReadonly(t),onClick:l[22]||(l[22]=l=>e.prepareDefaultSettings()),modelValue:t.is_required,"onUpdate:modelValue":e=>t.is_required=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",ee,[(0,s.bF)(Ye,{onClick:l[23]||(l[23]=l=>e.prepareDefaultSettings()),modelValue:t.is_readonly,"onUpdate:modelValue":[e=>t.is_readonly=e,l=>e.handleFieldsReset(t)]},null,8,["modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",le,[(0,s.bF)(Ye,{onClick:l[24]||(l[24]=l=>e.prepareDefaultSettings()),modelValue:t.is_hidden,"onUpdate:modelValue":[e=>t.is_hidden=e,l=>e.handleFieldsReset(t)]},null,8,["modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",te,[(0,s.bF)(Ye,{disable:e.isFieldHiddenOrReadonly(t),onClick:l[25]||(l[25]=l=>e.prepareDefaultSettings()),modelValue:t.force_validation,"onUpdate:modelValue":e=>t.force_validation=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",se,[(0,s.bF)(je,{outlined:"",onChange:l[26]||(l[26]=l=>e.prepareDefaultSettings()),modelValue:t.confidence_threshold,"onUpdate:modelValue":e=>t.confidence_threshold=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",ae,[(0,s.bF)(je,{outlined:"",onChange:l[27]||(l[27]=l=>e.prepareDefaultSettings()),modelValue:t.match_score_threshold,"onUpdate:modelValue":e=>t.match_score_threshold=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",ie,[(0,s.bF)(Ge,{round:"",size:"sm",color:"primary",icon:"add",onClick:l=>e.openCalcDialog(t)},{default:(0,s.k6)((()=>[(0,s.bF)(Ze,null,{default:(0,s.k6)((()=>[(0,s.eW)("Show Formula")])),_:1})])),_:2},1032,["onClick"]),"DEFAULT"==t["field_org_id"]?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.bF)(Ge,{flat:"",color:"black",class:"pl-6 pr-6",style:{cursor:"default"}},{default:(0,s.k6)((()=>[oe,(0,s.bF)(Ze,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(e.$t("not_trash")),1)])),_:1})])),_:1}),(0,s.Q3)("",!0)],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.bF)(Ge,{flat:"",color:"primary",class:"pl-6 pr-6",onClick:l=>e.deleteField(t,!1)},{default:(0,s.k6)((()=>[de])),_:2},1032,["onClick"]),(0,s.Q3)("",!0)],64)),(0,s.bF)(Ke,{name:"info",size:"sm"},{default:(0,s.k6)((()=>[(0,s.bF)(Ze,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,"Name : "+(0,a.v_)(t["field_name"]),1),(0,s.Lk)("div",null,"Type : "+(0,a.v_)(t["field_type"]),1),(0,s.Lk)("div",null,"Translation key : "+(0,a.v_)(t["translation_key"]),1)])),_:2},1024)])),_:2},1024)])])):(0,s.Q3)("",!0)],64)))),128))],64)))),128))],64)))),128))])])),_:1})]),(0,s.Lk)("div",re,[(0,s.Lk)("div",ne,[(0,s.bF)(Xe,{label:e.$t("save_settings"),class:"save-btn-width",onClick:l[28]||(l[28]=l=>e.save())},null,8,["label"])])])])])),_:1})])),_:1},8,["modelValue"])]),(0,s.bF)(ol,{modelValue:e.showFormulaDlg,"onUpdate:modelValue":l[32]||(l[32]=l=>e.showFormulaDlg=l)},{default:(0,s.k6)((()=>[(0,s.bF)(il,null,{default:(0,s.k6)((()=>[(0,s.bF)(tl,{class:"secondary-toolbar"},{default:(0,s.k6)((()=>[(0,s.bF)(ll),(0,s.bo)((0,s.bF)(Ge,{flat:"",round:"",dense:"",icon:"close"},null,512),[[ul]])])),_:1}),(0,s.bF)(al,{class:"width-500"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ce,[(0,s.Lk)("div",ue,[(0,s.Lk)("div",he,[(0,s.bF)(sl,{class:"full-width"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",_e,(0,a.v_)(e.$t("pages.fields_settings.formula")),1),(0,s.Lk)("div",pe,[(0,s.bF)(je,{outlined:"",modelValue:this.field_model["calculation_formula"],"onUpdate:modelValue":l[30]||(l[30]=e=>this.field_model["calculation_formula"]=e),type:"textarea"},null,8,["modelValue"])]),me,(0,s.Lk)("div",ge,[(0,s.Lk)("div",fe,[(0,s.Lk)("div",be,[(0,s.bF)(Ge,{label:e.$t("pages.user.save"),onClick:l[31]||(l[31]=l=>e.showFormulaDlg=!1),color:"primary",class:"full-width",icon:"done"},null,8,["label"])])])])])),_:1})])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(ol,{modelValue:e.showGroupDetailsForm,"onUpdate:modelValue":l[37]||(l[37]=l=>e.showGroupDetailsForm=l),persistent:"","transition-show":"scale","transition-hide":"scale",onKeydown:l[38]||(l[38]=(0,i.jR)((l=>e.showGroupDetailsForm=!1),["esc"]))},{default:(0,s.k6)((()=>[(0,s.bF)(il,{style:{width:"50%"}},{default:(0,s.k6)((()=>[(0,s.bF)(tl,{class:"secondary-toolbar"},{default:(0,s.k6)((()=>[(0,s.bF)(ll,null,{default:(0,s.k6)((()=>[(0,s.Lk)("span",ye,(0,a.v_)(e.$t("doc_type_form")),1)])),_:1}),(0,s.bo)((0,s.bF)(Ge,{flat:"",round:"",dense:"",icon:"close",onClick:l[33]||(l[33]=l=>e.closeGroupDlg())},null,512),[[ul]])])),_:1}),(0,s.bF)(al,{class:"row items-center q-pb-none"}),(0,s.bF)(al,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",ke,[(0,s.bF)(je,{outlined:"",modelValue:e.groupName,"onUpdate:modelValue":l[34]||(l[34]=l=>e.groupName=l),label:e.$t("name"),"error-message":"Please provide Name",rules:[e=>e&&e.length>0],hint:e.$t("pages.messages.SPACES_NOT_ALLOWED")},null,8,["modelValue","label","rules","hint"])]),(0,s.Lk)("div",ve,[(0,s.bF)(je,{outlined:"",modelValue:e.groupTitle,"onUpdate:modelValue":l[35]||(l[35]=l=>e.groupTitle=l),label:e.$t("title"),"error-message":"Please provide Title",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])]),(0,s.Lk)("div",Fe,[(0,s.bo)((0,s.bF)(Ge,{class:"highlighted-back q-mr-md",label:e.$t("cancel")},null,8,["label"]),[[ul]]),(0,s.bF)(Ge,{color:"primary",label:e.$t("pages.user.save"),"data-cy":"save",onClick:l[36]||(l[36]=l=>e.createGroup())},null,8,["label"])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(ol,{modelValue:e.showFieldDetailsForm,"onUpdate:modelValue":l[51]||(l[51]=l=>e.showFieldDetailsForm=l),persistent:"","transition-show":"scale","transition-hide":"scale",onKeydown:l[52]||(l[52]=(0,i.jR)((l=>e.showFieldDetailsForm=!1),["esc"]))},{default:(0,s.k6)((()=>[(0,s.bF)(il,{style:{width:"50%"}},{default:(0,s.k6)((()=>[(0,s.bF)(tl,{class:"secondary-toolbar text-white"},{default:(0,s.k6)((()=>[(0,s.bF)(ll,null,{default:(0,s.k6)((()=>[(0,s.Lk)("span",Le,(0,a.v_)(e.$t("document_field_details")),1)])),_:1}),(0,s.bo)((0,s.bF)(Ge,{flat:"",round:"",dense:"",icon:"close",onClick:l[39]||(l[39]=l=>e.closeFieldDlg())},null,512),[[ul]])])),_:1}),(0,s.bF)(al,{class:"row items-center q-pb-none"}),(0,s.bF)(al,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ve,[(0,s.bF)(je,{outlined:"",modelValue:e.fieldName,"onUpdate:modelValue":l[40]||(l[40]=l=>e.fieldName=l),label:e.$t("name"),"error-message":"Please provide Name",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])]),(0,s.Lk)("div",Ee,[(0,s.bF)(je,{outlined:"",modelValue:e.fieldTitle,"onUpdate:modelValue":l[41]||(l[41]=l=>e.fieldTitle=l),label:e.$t("title"),"error-message":"Please provide Title",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])]),(0,s.Lk)("div",Te,[(0,s.bF)(dl,{outlined:"",modelValue:e.fieldType,"onUpdate:modelValue":l[42]||(l[42]=l=>e.fieldType=l),options:e.data_type,rules:[e.fieldTypeRule],"emit-value":"","map-options":"",label:e.$t("select_field_type")},null,8,["modelValue","options","rules","label"])]),"ENUM"===e.fieldType?((0,s.uX)(),(0,s.CE)("div",we,[(0,s.bF)(dl,{outlined:"",modelValue:e.field_list_of_values,"onUpdate:modelValue":l[43]||(l[43]=l=>e.field_list_of_values=l),options:e.lov_list,label:"Select List of Values","emit-value":"","map-options":""},null,8,["modelValue","options"])])):(0,s.Q3)("",!0),"BARCODE"===e.fieldType?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("div",Ce,[(0,s.bF)(dl,{outlined:"",modelValue:e.barcodeType,"onUpdate:modelValue":l[44]||(l[44]=l=>e.barcodeType=l),options:e.barcodeOptions,rules:[e.fieldTypeRule],"emit-value":"","map-options":"",label:e.$t("barcode")},null,8,["modelValue","options","rules","label"])]),(0,s.Lk)("div",xe,[(0,s.bF)(je,{outlined:"",modelValue:e.barCodePattern,"onUpdate:modelValue":l[45]||(l[45]=l=>e.barCodePattern=l),label:e.$t("bar_code_pattern"),"error-message":"Please provide Pattern",rules:[e=>e&&e.length>0]},null,8,["modelValue","label","rules"])])],64)):(0,s.Q3)("",!0),(0,s.Lk)("div",De,[(0,s.bF)(Ye,{modelValue:e.showChargesElement,"onUpdate:modelValue":[l[46]||(l[46]=l=>e.showChargesElement=l),l[47]||(l[47]=l=>e.resetCostingElement())],label:e.$t("enable_charges_element")},null,8,["modelValue","label"])]),e.showChargesElement?((0,s.uX)(),(0,s.CE)("div",Re,[(0,s.bF)(dl,{outlined:"",modelValue:e.field_m3Costing,"onUpdate:modelValue":l[48]||(l[48]=l=>e.field_m3Costing=l),options:e.costingElementList,label:e.$t("select_costing_mapping"),"emit-value":"","map-options":""},null,8,["modelValue","options","label"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Ae,[(0,s.bF)(Ge,{color:"primary",label:e.$t("back"),"data-cy":"back",class:"q-mr-sm",onClick:l[49]||(l[49]=l=>e.closeFieldDlg())},null,8,["label"]),e.selectedRecordId?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(Ge,{key:0,color:"primary",label:e.$t("pages.user.save"),"data-cy":"save",onClick:l[50]||(l[50]=l=>e.createFieldInGroup())},null,8,["label"]))])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(ol,{modelValue:e.fieldDeleteConfirm,"onUpdate:modelValue":l[54]||(l[54]=l=>e.fieldDeleteConfirm=l),persistent:""},{default:(0,s.k6)((()=>[(0,s.bF)(il,null,{default:(0,s.k6)((()=>[(0,s.bF)(al,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,s.k6)((()=>[(0,s.bF)(rl,{icon:"warning",color:"primary"})])),_:1}),(0,s.bF)(al,{class:"row items-center"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",$e,(0,a.v_)(e.$t("sure")),1)])),_:1}),(0,s.bF)(nl,{align:"right"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(Ge,{flat:"",label:e.$t("cancel"),"data-cy":"cancel",color:"primary"},null,8,["label"]),[[ul]]),(0,s.bo)((0,s.bF)(Ge,{flat:"",label:e.$t("delete"),"data-cy":"delete-popup",color:"primary",onClick:l[53]||(l[53]=l=>e.deleteField({},!0))},null,8,["label"]),[[ul]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(ol,{modelValue:e.updateGroupDialog,"onUpdate:modelValue":l[59]||(l[59]=l=>e.updateGroupDialog=l),persistent:"","transition-show":"scale","transition-hide":"scale",onKeydown:l[60]||(l[60]=(0,i.jR)((l=>e.updateGroupDialog=!1),["esc"]))},{default:(0,s.k6)((()=>[(0,s.bF)(il,{style:{width:"50%"}},{default:(0,s.k6)((()=>[(0,s.bF)(tl,{class:"secondary-toolbar"},{default:(0,s.k6)((()=>[(0,s.bF)(ll,null,{default:(0,s.k6)((()=>[(0,s.Lk)("span",Ue,(0,a.v_)(e.$t("Reassign Fields Group")),1)])),_:1}),(0,s.bo)((0,s.bF)(Ge,{flat:"",round:"",dense:"",icon:"close",onClick:l[55]||(l[55]=l=>e.updateGroupDialog=!1)},null,512),[[ul]])])),_:1}),(0,s.bF)(al,{class:"row items-center q-pb-none"}),(0,s.bF)(al,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",qe,[(0,s.bF)(dl,{clearable:"",modelValue:e.selected_group_id,"onUpdate:modelValue":l[56]||(l[56]=l=>e.selected_group_id=l),"use-input":"",options:e.groups_options,onFilter:e.filterGroupsEvent,label:e.$t("Select Group"),"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","label"])])])),_:1}),(0,s.bF)(nl,{align:"right"},{default:(0,s.k6)((()=>[(0,s.bF)(Ge,{color:"primary",label:e.$t("back"),"data-cy":"back",class:"q-mr-sm",onClick:l[57]||(l[57]=l=>e.updateGroupDialog=!1)},null,8,["label"]),(0,s.bF)(Ge,{color:"primary",label:e.$t("pages.user.save"),"data-cy":"save",onClick:l[58]||(l[58]=l=>e.updateFieldGroups())},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(cl)],64)}var Se=t(1659),Oe=t(16332),Ke=t(24622),Ge=t(38734),Qe=t(96056),Pe=t(89156),Ie=t(11470),Be=t(18505),Me=t(64775),Xe=t(76956),We=t(68180);const je=e=>((0,s.Qi)("data-v-5fbb133e"),e=e(),(0,s.jt)(),e),Ye={class:"container q-pa-xl"},ze={class:"q-gutter-y-md"},He={class:"full-width"},Ze={class:"highlighted-back"},Je={class:"text-h4 text-uppercase"},el={class:"text-h4 text-uppercase text-center"},ll={class:"text-h4 text-uppercase text-center"},tl={class:"text-h4 text-uppercase text-center"},sl={class:"text-h4 text-uppercase text-center"},al={class:"text-h4 text-uppercase col-100"},il={class:"text-h4 text-uppercase col-100"},ol={class:"text-h4 text-uppercase"},dl={class:"highlighted-back"},rl=je((()=>(0,s.Lk)("th",null,null,-1))),nl={class:"text-center"},cl={class:"text-center"},ul={class:"text-center"},hl={class:"text-center"},_l=je((()=>(0,s.Lk)("th",{class:"col-100"},null,-1))),pl=je((()=>(0,s.Lk)("th",{colspan:"2"},null,-1))),ml={class:"row-header"},gl={class:"text-h4 secondary-c-text",colspan:"6"},fl=je((()=>(0,s.Lk)("td",{colspan:"2"},null,-1))),bl={class:"text-h4"},yl={class:"text-h4 text-center"},kl={class:"text-h4 text-center"},vl={class:"text-h4 text-center"},Fl={class:"text-h4 text-center"},Ll={class:"text-h4 text col-100"},Vl={class:"text-h4 text col-100"},El={class:"text-h4"},Tl=["src"],wl=je((()=>(0,s.Lk)("div",{class:"row full-width q-mt-sm"},null,-1)));function Cl(e,l,t,i,o,d){const r=(0,s.g2)("q-checkbox"),n=(0,s.g2)("q-input"),c=(0,s.g2)("q-btn"),u=(0,s.g2)("q-markup-table"),h=(0,s.g2)("Loader");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Ye,[(0,s.Lk)("div",ze,[(0,s.Lk)("div",He,[(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",Ze,[(0,s.Lk)("th",Je,(0,a.v_)(e.$t("pages.fields_settings.fields")),1),(0,s.Lk)("th",el,(0,a.v_)(e.$t("pages.fields_settings.requierd")),1),(0,s.Lk)("th",ll,(0,a.v_)(e.$t("pages.fields_settings.read_only")),1),(0,s.Lk)("th",tl,(0,a.v_)(e.$t("pages.fields_settings.hidden")),1),(0,s.Lk)("th",sl,(0,a.v_)(e.$t("pages.fields_settings.force")),1),(0,s.Lk)("th",al,(0,a.v_)(e.$t("pages.fields_settings.ocr")),1),(0,s.Lk)("th",il,(0,a.v_)(e.$t("pages.fields_settings.match_score")),1),(0,s.Lk)("th",ol,(0,a.v_)(e.$t("pages.fields_settings.formula")),1)]),(0,s.Lk)("tr",dl,[rl,(0,s.Lk)("th",nl,[(0,s.bF)(r,{disable:e.isReadOnly,modelValue:e.is_required,"onUpdate:modelValue":l[0]||(l[0]=l=>e.is_required=l)},null,8,["disable","modelValue"])]),(0,s.Lk)("th",cl,[(0,s.bF)(r,{disable:e.isReadOnly,modelValue:e.is_readonly,"onUpdate:modelValue":l[1]||(l[1]=l=>e.is_readonly=l)},null,8,["disable","modelValue"])]),(0,s.Lk)("th",ul,[(0,s.bF)(r,{disable:e.isReadOnly,modelValue:e.is_hidden,"onUpdate:modelValue":l[2]||(l[2]=l=>e.is_hidden=l)},null,8,["disable","modelValue"])]),(0,s.Lk)("th",hl,[(0,s.bF)(r,{disable:e.isReadOnly,modelValue:e.force_validation,"onUpdate:modelValue":l[3]||(l[3]=l=>e.force_validation=l)},null,8,["disable","modelValue"])]),_l,pl])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.apiData,(l=>((0,s.uX)(),(0,s.CE)(s.FK,{key:l.name},[(0,s.Lk)("tr",ml,[(0,s.Lk)("td",gl,(0,a.v_)(e.$t("pages.screen2a."+l.translation_key)==="pages.screen2a."+l.translation_key?l.title:e.$t("pages.screen2a."+l.translation_key)),1),fl]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.rows,((l,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l,(l=>((0,s.uX)(),(0,s.CE)("tr",{key:l.field_name},[(0,s.Lk)("td",bl,[(0,s.bF)(n,{disable:e.isReadOnly,filled:"",style:{background:"transparent"},modelValue:l.field_display_label,"onUpdate:modelValue":e=>l.field_display_label=e,label:l.field_name},null,8,["disable","modelValue","onUpdate:modelValue","label"])]),(0,s.Lk)("td",yl,[(0,s.bF)(r,{disable:e.isReadOnly,modelValue:l.is_required,"onUpdate:modelValue":e=>l.is_required=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",kl,[(0,s.bF)(r,{disable:e.isReadOnly,modelValue:l.is_readonly,"onUpdate:modelValue":e=>l.is_readonly=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",vl,[(0,s.bF)(r,{disable:e.isReadOnly,modelValue:l.is_hidden,"onUpdate:modelValue":e=>l.is_hidden=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",Fl,[(0,s.bF)(r,{disable:e.isReadOnly,modelValue:l.force_validation,"onUpdate:modelValue":e=>l.force_validation=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",Ll,[(0,s.bF)(n,{outlined:"",disable:e.isReadOnly,modelValue:l.confidence_threshold,"onUpdate:modelValue":e=>l.confidence_threshold=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",Vl,[(0,s.bF)(n,{outlined:"",disable:e.isReadOnly,modelValue:l.match_score_threshold,"onUpdate:modelValue":e=>l.match_score_threshold=e},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",El,["DEFAULT"!==l["field_org_id"]?((0,s.uX)(),(0,s.Wv)(c,{key:0,flat:""},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:l["fuzzy_field"]?"images/fuzzy-search.svg":"images/fuzzy-search-grey.svg",width:"30"},null,8,Tl)])),_:2},1024)):(0,s.Q3)("",!0)])])))),128))],64)))),128))],64)))),128))])])),_:1})]),wl])]),(0,s.bF)(h)],64)}var xl=function(e,l,t,s){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,i){function o(e){try{r(s.next(e))}catch(l){i(l)}}function d(e){try{r(s["throw"](e))}catch(l){i(l)}}function r(e){e.done?t(e.value):a(e.value).then(o,d)}r((s=s.apply(e,l||[])).next())}))};const Dl=(0,s.pM)({el:"#app",mixins:[Be.A,Ke.A,Qe.A],components:{Loader:Pe.A},data(){return{}},mounted(){this.documentType=this.$route.params.type.toString(),this.sub_doc_type_key=this.$route.params.sub_doc_type,this.initView()},methods:{initView(){return xl(this,void 0,void 0,(function*(){yield this.getSettingsByType(!0)}))},getSettingsByType(e){return xl(this,void 0,void 0,(function*(){try{e&&this.showLoading();const l=Object.assign(this.getDocTypeParams()),t=yield Ie.bg.getFieldSettingsByType(l);this.apiData=t.field_setting,this.prepareDefaultSettings()}catch(l){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(l)}finally{this.hideLoading()}}))},getDocTypeParams(){const e={};return e["doc_type"]=this.documentType,e["is_sub_doc_type"]="false",e},prepareDefaultSettings(){this.is_required=!0,this.is_readonly=!0,this.is_hidden=!0,this.force_validation=!0,this.confidence_threshold=0,this.match_score_threshold=0,Array.from(this.apiData).forEach((e=>{Array.from(e.rows).forEach((e=>{Array.from(e).forEach((e=>{!0===this.is_required&&(this.is_required=e.is_required),!0===this.is_readonly&&(this.is_readonly=e.is_readonly),!0===this.is_hidden&&(this.is_hidden=e.is_hidden),!0===this.force_validation&&(this.force_validation=e.force_validation),e.confidence_threshold>this.confidence_threshold&&(this.confidence_threshold=e.confidence_threshold),e.match_score_threshold>this.match_score_threshold&&(this.match_score_threshold=e.match_score_threshold),e.field_display_label=e.field_label?e.field_label:this.$t("pages.screen2a."+e.translation_key)==="pages.screen2a."+e.translation_key?e.title:this.$t("pages.screen2a."+e.translation_key)}))}))})),this.$forceUpdate()},isFieldHiddenOrReadonly(e){return!(!e.is_readonly&&!e.is_hidden)&&(this.is_required=!1,this.force_validation=!1,e.is_required=!1,e.force_validation=!1,!0)}},setup(){let e={};return{filtered_master_fields:(0,Ge.KR)([]),field_model:(0,Ge.KR)(e),showMasterDataPopup:(0,Ge.KR)(!1),apiData:(0,Ge.KR)(),singleField:(0,Ge.KR)(!1),allField:(0,Ge.KR)(!1),documentType:(0,Ge.KR)("INVOICE"),is_required:(0,Ge.KR)(!1),is_readonly:(0,Ge.KR)(!1),is_hidden:(0,Ge.KR)(!1),force_validation:(0,Ge.KR)(!1),confidence_threshold:(0,Ge.KR)(50),match_score_threshold:(0,Ge.KR)(50),showFormulaDlg:(0,Ge.KR)(!1),calculation_formula:(0,Ge.KR)(null),sub_doc_type_key:(0,Ge.KR)(""),isReadOnly:(0,Ge.KR)(!0),profile_options:[{label:"DEFAULT",value:"DEFAULT"},{label:"ZUGFeRD",value:"Zugferd"}],data_type:[{label:"Select Type",value:""},{label:Oe.i18n.t("amount"),value:"AMOUNT"},{label:"STRING",value:"STRING"},{label:Oe.i18n.t("invoice_date"),value:"DATE"},{label:Oe.i18n.t("number"),value:"NUMBER"},{label:"BOOLEAN",value:"BOOLEAN"},{label:Oe.i18n.t("currency"),value:"CURRENCY"}]}}});var Rl=t(12807),Al=t(857),$l=t(80460),Ul=t(67837),ql=t(56384),Nl=t(67156),Sl=t(98582),Ol=t.n(Sl);const Kl=(0,Rl.A)(Dl,[["render",Cl],["__scopeId","data-v-5fbb133e"]]),Gl=Kl;Ol()(Dl,"components",{QMarkupTable:Al.A,QCheckbox:$l.A,QInput:Ul.A,QBtn:ql.A,QField:Nl.A});var Ql=t(1595),Pl=function(e,l,t,s){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,i){function o(e){try{r(s.next(e))}catch(l){i(l)}}function d(e){try{r(s["throw"](e))}catch(l){i(l)}}function r(e){e.done?t(e.value):a(e.value).then(o,d)}r((s=s.apply(e,l||[])).next())}))};const Il=(0,s.pM)({el:"#app",mixins:[Be.A,Ke.A,Qe.A],components:{Loader:Pe.A,SubHeader:We.A,parentFields:Gl},data(){return{disable_checkbox:!1,showChargesElement:(0,Ge.KR)(!1),exclude_fields:["move_all"],search:""}},watch:{doc_type_loading:{handler:function(e,l){this.getParentDocTypeName()}}},computed:{filteredFieldSettings(){if(!this.search)return this.apiData;const e=[];return this.search&&this.apiData.forEach((l=>{const t={},s=[];l.rows.forEach((e=>{const l=e.filter((e=>e.field_display_label.toLowerCase().includes(this.search.toLowerCase())||e.field_name.toLowerCase().includes(this.search.toLowerCase())));l.length>0&&s.push(l)})),s.length>0&&(t["rows"]=s,t["name"]=l.name,t["translation_key"]=l.translation_key,t["title"]=l.title,e.push(t)),t.rows||!l.name.toLowerCase().includes(this.search.toLowerCase())&&!l.title.toLowerCase().includes(this.search.toLowerCase())||e.push({rows:s,name:l.name,translation_key:l.translation_key,title:l.title})})),e}},mounted(){this.documentType=this.$route.params.type.toString(),this.sub_doc_type_key=this.$route.params.sub_doc_type,this.initView()},methods:{isFieldSelected(){if(0==Object.keys(this.fields_checkbox).length)return!1;let e=!1;for(const[l,t]of Object.entries(this.fields_checkbox))if(t){e=!0;break}return e},initView(){return Pl(this,void 0,void 0,(function*(){this.getParentDocTypeName(),yield this.getSettingsByType(!0),yield this.getFieldGroups(),yield this.getLovList(),this.user_settings[Xe.lZ]&&(this.costingElementList=yield this.getCostingElementList([])),logInfo(this.apiData,"apiData")}))},masterDataSettings(){const e=this.$route.path;let l="/master_data";e.endsWith("/")&&(l="master_data"),this.$router.push(e+l)},getParentDocTypeName(){if(!this.doc_type_list||!this.sub_doc_type_key)return;if(this.parent_doc_type_name)return this.parent_doc_type_name;const e=this.doc_type_list.filter((e=>e.value.indexOf(this.documentType)>-1));return 0!=e.length?(this.parent_doc_type_name=e[0].label,this.parent_doc_type_name):void 0},getSettingsByType(e){return Pl(this,void 0,void 0,(function*(){try{e&&this.showLoading();const l=Object.assign(this.getDocTypeParams()),t=yield Ie.bg.getFieldSettingsByType(l);this.apiData=t.field_setting,this.prepareDefaultSettings()}catch(l){this.showErrorToast(this.$t("pages.messages.error_internal_occur")),logError(l)}finally{this.hideLoading()}}))},getDocTypeParams(e="doc_type"){const l={};return l[e]=this.documentType,l["is_sub_doc_type"]="false",this.sub_doc_type_key&&(l[e]=this.sub_doc_type_key,l["is_sub_doc_type"]="true"),l},save(){return Pl(this,void 0,void 0,(function*(){try{this.showLoading();const e={data:JSON.stringify(this.apiData)},l=Object.assign(this.getDocTypeParams());yield Ie.bg.update(e,l)}catch(e){const l=Me.t.getErrorMessage(e);this.showErrorToast(l),logError(e)}finally{this.hideLoading()}}))},resetToDefault(){return Pl(this,void 0,void 0,(function*(){try{this.showLoading();const e=Object.assign(this.getDocTypeParams());yield Ie.bg.restoreDefaultFields({},e),yield this.getSettingsByType(!1),this.showSuccessToast(this.$t("pages.messages.SETTING_RESTORED"))}catch(e){const l=Me.t.getErrorMessage(e);this.showErrorToast(l),logError(e)}finally{this.hideLoading()}}))},setSetting(e){let l=!1;Array.from(this.apiData).forEach((t=>{Array.from(t.rows).forEach((t=>{Array.from(t).forEach((t=>{"is_readonly"===e?t.is_readonly=this.is_readonly:"is_hidden"===e?t.is_hidden=this.is_hidden:"confidence_threshold"===e?t.confidence_threshold=this.confidence_threshold:"match_score_threshold"===e?t.match_score_threshold=this.match_score_threshold:"is_required"!==e&&"force_validation"!==e||("is_required"===e?t.is_required=this.is_required:"force_validation"===e&&(t.force_validation=this.force_validation),l=!0)}))}))})),l&&this.showErrorToast(this.$t("pages.messages.REVIEW_YOUR_SELECTION")),this.$forceUpdate()},resetAllSelection(e,l){"is_required"===e&&!1===l?this.is_required=!1:"is_readonly"===e&&!1===l?this.is_readonly=!1:"is_hidden"===e&&!1===l?this.is_hidden=!1:"force_validation"===e&&!1===l?this.force_validation=!1:"confidence_threshold"===e&&this.confidence_threshold!=l?this.confidence_threshold=50:"match_score_threshold"===e&&this.match_score_threshold!=l&&(this.match_score_threshold=50)},prepareDefaultSettings(){this.fields_checkbox["move_all"]=!1,this.is_required=!0,this.is_readonly=!0,this.is_hidden=!0,this.force_validation=!0,this.confidence_threshold=0,this.match_score_threshold=0,Array.from(this.apiData).forEach((e=>{Array.from(e.rows).forEach((l=>{Array.from(l).forEach((l=>{!0===this.is_required&&(this.is_required=l.is_required),!0===this.is_readonly&&(this.is_readonly=l.is_readonly),!0===this.is_hidden&&(this.is_hidden=l.is_hidden),!0===this.force_validation&&(this.force_validation=l.force_validation),l.confidence_threshold>this.confidence_threshold&&(this.confidence_threshold=l.confidence_threshold),l.match_score_threshold>this.match_score_threshold&&(this.match_score_threshold=l.match_score_threshold);let t=l.field_label,s="pages.screen2a.",a="medi.";t=this.$t(s+l.translation_key)!==s+l.translation_key?this.$t(s+l.translation_key):this.$t(a+l.translation_key)!==a+l.translation_key?this.$t(a+l.translation_key):l.title,l.field_display_label=t,"DEFAULT"!==l["field_org_id"]&&(this.fields_checkbox[l.id]=!1),"DEFAULT"!=l["field_org_id"]||this.default_fields_groups.includes(e.id)||this.default_fields_groups.push(e.id)}))}))})),logInfo(this.default_fields_groups),this.$forceUpdate()},saveNewFieldLabel(e){e.field_label=e.field_display_label},openCalcDialog(e){this.field_model=e,this.showFormulaDlg=!0},showCreateGroupForm(){this.showGroupDetailsForm=!0,this.resetCreateGroupForm()},resetCreateGroupForm(){this.groupName="",this.groupTitle=""},closeGroupDlg(){this.showGroupDetailsForm=!1,this.resetCreateGroupForm()},validateGroupCreate(){let e=!0;return""===this.groupName||null===this.groupName?(e=!1,this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY"))):""===this.groupTitle||null===this.groupTitle?(e=!1,this.showErrorToast(this.$t("pages.messages.TITLE_MANDATORY"))):this.hasWhiteSpace(this.groupName)&&(e=!1,this.showErrorToast(this.$t("pages.messages.SPACES_NOT_ALLOWED"))),e},createGroup(){return Pl(this,void 0,void 0,(function*(){try{if(!this.validateGroupCreate())return;this.showLoading();const e={title:this.groupTitle,group_name:this.groupName,doc_type_name:this.sub_doc_type_key?this.sub_doc_type_key:this.documentType,translation_key:this.groupName,is_sub_doc_type_field:this.sub_doc_type_key?"true":"false"},l=yield Ie.bg.createGroup(e);if(!1===l.success)throw{message:l.message};yield this.getSettingsByType(!1),yield this.getFieldGroups(),this.closeGroupDlg()}catch(e){const l=Me.t.getErrorMessage(e);this.showErrorToast(l),logError(e)}finally{this.hideLoading()}}))},fieldTypeRule(e){if(null===e)return"You must make a selection!"},showFieldDetailsDlg(e){this.groupName=e,this.resetCreateFieldForm(),this.showFieldDetailsForm=!0},resetCreateFieldForm(){this.fieldType="",this.fieldName="",this.fieldTitle="",this.barcodeType="EAN2",this.barCodePattern="",this.field_m3Costing="",this.selectedRecordId="",this.field_list_of_values="",this.showChargesElement=!1},closeFieldDlg(){this.showFieldDetailsForm=!1,this.groupName="",this.resetCreateFieldForm()},validateFieldCreate(){let e=!0;return""===this.fieldName||null===this.fieldName?(e=!1,this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY"))):""===this.fieldTitle||null===this.fieldTitle?(e=!1,this.showErrorToast(this.$t("pages.messages.TITLE_MANDATORY"))):""===this.fieldType||null===this.fieldType?(e=!1,this.showErrorToast(this.$t("pages.messages.FIELD_TYPE_MANDATORY"))):this.hasWhiteSpace(this.fieldName)?(e=!1,this.showErrorToast(this.$t("pages.messages.SPACES_NOT_ALLOWED"))):this.checkFirstLetterIsSpecialOrNumber(this.fieldName)&&(e=!1,this.showErrorToast(this.$t("errors.special_letter_number_not_allowed"))),"ENUM"!==this.fieldType||""!==this.field_list_of_values&&null!==this.fieldType?!this.showChargesElement||""!==this.field_m3Costing&&null!==this.fieldType||(e=!1,this.showErrorToast(this.$t("pages.messages.LIST_OF_CHARGES_MANDATORY"))):(e=!1,this.showErrorToast(this.$t("pages.messages.LIST_OF_VALUES_MANDATORY"))),e},createFieldInGroup(){return Pl(this,void 0,void 0,(function*(){try{if(!this.validateFieldCreate())return;this.showLoading(),this.showFieldDetailsForm=!1;let e={};if(e={title:this.fieldTitle,field_name:this.fieldName,field_type:this.fieldType,group_name:this.groupName,list_of_values:this.field_list_of_values,costing_element:this.field_m3Costing,is_sub_doc_type_field:this.sub_doc_type_key?"true":"false",enforce_list_of_values:!!this.field_list_of_values,doc_type_name:this.sub_doc_type_key?this.sub_doc_type_key:this.documentType},"BARCODE"===this.fieldType){const l={barcode_types:this.barcodeType,barcode_pattern:this.barCodePattern};e.additional_attributes=JSON.stringify(l)}const l=yield Ie.bg.createField(e);if(!1===l.success)throw{message:l.message};this.closeGroupDlg(),this.getSettingsByType(!1)}catch(e){this.showErrorToast(this.$t("fieldname_already_exists")),logError(e)}finally{this.hideLoading()}}))},handleFieldsReset(e){setTimeout((()=>{e.is_hidden&&(e.is_required=!1,e.force_validation=!1)}),0)},isFieldHiddenOrReadonly(e){return!!e.is_hidden},isVisible(e){return!this.sub_doc_type_key||!(!e.is_sub_doc_type_field||1!=e.is_sub_doc_type_field)},deleteField(e,l=!1){return Pl(this,void 0,void 0,(function*(){try{if(!l)return this.fieldDeleteConfirm=!0,void(this.selected_delete_record=e);this.showLoading();const t=yield Ie.bg.deleteField(this.selected_delete_record["id"]);if(!1===t.success)throw{message:t.message};this.showSuccessToast(this.$t("pages.messages.DELETED_SUCCESSFULLY")),this.getSettingsByType(!0)}catch(t){const e=Me.t.getErrorMessage(t);this.showErrorToast(e),logError(t)}finally{this.hideLoading()}}))},editField(e){this.fieldName=e.field_name,this.fieldTitle=e.title,this.fieldType=e.field_type,this.selectedRecordId=e.id,this.showFieldDetailsForm=!0},getFieldGroups(){return Pl(this,void 0,void 0,(function*(){try{this.showLoading();const e=this.getDocTypeParams("doc_type_name"),l=yield Ie.bg.getGroupsByDocType(e);if(!1===l.success)throw{message:l.message};l.data.forEach(((e,l)=>{const t=Object.assign({},{value:e.id,label:this.getGroupTranslation(e),group_name:e.group_name});this.groups_options.push(t),this.all_groups.push(t)}))}catch(e){const l=Me.t.getErrorMessage(e);this.showErrorToast(l),logError(e)}finally{this.hideLoading()}}))},getGroupTranslation(e){return this.$t("pages.screen2a."+e.translation_key)==="pages.screen2a."+e.translation_key?e.title:this.$t("pages.screen2a."+e.translation_key)},updateFieldGroupClicked(){const e=this.fields_checkbox["move_all"];for(const l in this.fields_checkbox)this.fields_checkbox[l]=e},displayUpdateFieldGroupDialog(){let e=!1;for(const l in this.fields_checkbox)if(!this.exclude_fields.includes(l)&&this.fields_checkbox[l]){e=!0;break}e?this.updateGroupDialog=!0:this.showErrorToast(this.$t("select_fields"))},updateFieldGroups(){return Pl(this,void 0,void 0,(function*(){try{if(!this.selected_group_id)return void this.showErrorToast(this.$t("select_group"));this.showLoading();let e=[];for(const s in this.fields_checkbox)this.exclude_fields.includes(s)||this.fields_checkbox[s]&&e.push(s);const l={field_ids:e.join(),group_id:this.selected_group_id},t=yield Ie.bg.reassignFieldsToGroup(l);if(!1===t.success)throw{message:t.message};yield this.getSettingsByType(!0)}catch(e){const l=Me.t.getErrorMessage(e);this.showErrorToast(l),logError(e)}finally{this.hideLoading()}}))},filterGroupsEvent(e,l,t){l(e?()=>{const l=e.toLowerCase();this.groups_options=this.all_groups.filter((e=>e.label.toLowerCase().indexOf(l)>-1))}:()=>{this.groups_options=this.all_groups})},deleteGroup(e){return Pl(this,void 0,void 0,(function*(){try{if(!e)return void this.showErrorToast("Group not selected");this.showLoading();const l=yield Ie.bg.deleteGroups(e);if(!1===l.success)throw{message:l.message};yield this.getSettingsByType(!0)}catch(l){const e=Me.t.getErrorMessage(l);this.showErrorToast(e),logError(l)}finally{this.hideLoading()}}))},resetCostingElement(){this.field_m3Costing=""}},setup(){const e=(0,Ql.rD)(),{getCostingElementList:l}=e,t=(0,Ql.cY)(),{doc_type_list:s,doc_type_loading:a}=(0,Se.bP)(t);let i={};const o=(0,Ql.Bu)(),{user_settings:d}=(0,Se.bP)(o),r=(0,Ql.yM)(),{getLovList:n}=r,{lov_list:c}=(0,Se.bP)(r);return{user_settings:d,groupName:(0,Ge.KR)(""),groupTitle:(0,Ge.KR)(""),fieldName:(0,Ge.KR)(""),fieldTitle:(0,Ge.KR)(""),fieldType:(0,Ge.KR)(""),barcodeType:(0,Ge.KR)("EAN2"),barCodePattern:(0,Ge.KR)(""),selectedRecordId:(0,Ge.KR)(""),showGroupDetailsForm:(0,Ge.KR)(!1),showFieldDetailsForm:(0,Ge.KR)(!1),lov_list:c,getLovList:n,costingElementList:[],getCostingElementList:l,field_m3Costing:(0,Ge.KR)(""),field_list_of_values:(0,Ge.KR)(""),doc_type_loading:a,doc_type_list:s,updateGroupDialog:(0,Ge.KR)(!1),filtered_master_fields:(0,Ge.KR)([]),selected_group_id:(0,Ge.KR)(),all_groups:(0,Ge.KR)([]),groups_options:(0,Ge.KR)([]),default_fields_groups:(0,Ge.KR)([]),fields_checkbox:(0,Ge.KR)({}),field_model:(0,Ge.KR)(i),showMasterDataPopup:(0,Ge.KR)(!1),apiData:(0,Ge.KR)([]),singleField:(0,Ge.KR)(!1),allField:(0,Ge.KR)(!1),documentType:(0,Ge.KR)("INVOICE"),parent_doc_type_name:(0,Ge.KR)(""),is_required:(0,Ge.KR)(!1),is_readonly:(0,Ge.KR)(!1),is_hidden:(0,Ge.KR)(!1),force_validation:(0,Ge.KR)(!1),confidence_threshold:(0,Ge.KR)(50),match_score_threshold:(0,Ge.KR)(50),showFormulaDlg:(0,Ge.KR)(!1),calculation_formula:(0,Ge.KR)(null),sub_doc_type_key:(0,Ge.KR)(""),tab:(0,Ge.KR)("fields"),fieldDeleteConfirm:(0,Ge.KR)(!1),selected_delete_record:(0,Ge.KR)({}),profile_options:[{label:"DEFAULT",value:"DEFAULT"},{label:"ZUGFeRD",value:"Zugferd"}],data_type:[{label:"Select Type",value:""},{label:Oe.i18n.t("amount"),value:"AMOUNT"},{label:"STRING",value:"STRING"},{label:Oe.i18n.t("invoice_date"),value:"DATE"},{label:Oe.i18n.t("number"),value:"NUMBER"},{label:"BOOLEAN",value:"BOOLEAN"},{label:Oe.i18n.t("currency"),value:"CURRENCY"},{label:"DROPDOWN",value:"ENUM"},{label:"BARCODE",value:"BARCODE"}],barcodeOptions:[{label:"EAN2",value:"EAN2"},{label:"EAN5",value:"EAN5"},{label:"EAN8",value:"EAN8"},{label:"UPCE",value:"UPCE"},{label:"ISBN10",value:"ISBN10"},{label:"UPCA",value:"UPCA"},{label:"EAN13",value:"EAN13"},{label:"ISBN13",value:"ISBN13"},{label:"CODABAR",value:"CODABAR"},{label:"CODE39",value:"CODE39"},{label:"QRCODE",value:"QRCODE"},{label:"SQCODE",value:"SQCODE"},{label:"CODE93",value:"CODE93"},{label:"CODE128",value:"CODE128"}]}}});var Bl=t(50492),Ml=t(42980),Xl=t(10327),Wl=t(39041),jl=t(71746),Yl=t(1444),zl=t(10386),Hl=t(54782),Zl=t(20284),Jl=t(97410),et=t(82156),lt=t(23316),tt=t(36914),st=t(39150),at=t(44189),it=t(49200),ot=t(94940),dt=t(3952),rt=t(62669),nt=t(88672);const ct=(0,Rl.A)(Il,[["render",Ne],["__scopeId","data-v-6c04dd80"]]),ut=ct;Ol()(Il,"components",{QBtn:ql.A,QIcon:Bl.A,QTabs:Ml.A,QTab:Xl.A,QTabPanels:Wl.A,QTabPanel:jl.A,QSlider:Yl.A,QSeparator:zl.A,QInput:Ul.A,QMarkupTable:Al.A,QCheckbox:$l.A,QFab:Hl.A,QFabAction:Zl.A,QTooltip:Jl.A,QDialog:et.A,QCard:lt.A,QToolbar:tt.A,QToolbarTitle:st.A,QCardSection:at.A,QForm:it.A,QSelect:ot.A,QAvatar:dt.A,QCardActions:rt.A,QField:Nl.A}),Ol()(Il,"directives",{ClosePopup:nt.A})}}]);