"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[5844],{35844:(t,e,o)=>{o.r(e),o.d(e,{default:()=>ut});var n=o(61758),i=o(58790),a=o(29104);const s=t=>((0,n.Qi)("data-v-7491dda3"),t=t(),(0,n.jt)(),t),l={key:0,class:"container"},r={style:{"text-align":"center","line-height":"35px","letter-spacing":"2px"}},c=s((()=>(0,n.Lk)("br",null,null,-1))),d=s((()=>(0,n.Lk)("br",null,null,-1))),u=s((()=>(0,n.Lk)("br",null,null,-1))),g={class:"container"},p={class:"row full-width"},_={class:"col-sm-12 col-md-12 col-lg-12"},b={class:"table-header-text"},f=["data-index","draggable","dropzone","onDragstart","onDrop","onDragover"],h={key:0,class:"cursor-default"},m={key:1,class:"q-pr-md"},y=["onClick"],k={key:0,class:"text-left"},v={key:1,class:"text-left"},C={key:2,class:"text-left"},x={key:3,class:"text-left"},E={key:4,class:"text-center"},S={class:"text-red"},F={key:1},D={colspan:"5",class:"text-h4 text-center"},L={class:"q-ml-sm"};function T(t,e,o,s,T,A){const w=(0,n.g2)("SubHeader"),O=(0,n.g2)("f-btn"),$=(0,n.g2)("BackToSettings"),X=(0,n.g2)("q-btn"),I=(0,n.g2)("q-badge"),Q=(0,n.g2)("q-item-section"),q=(0,n.g2)("q-item"),N=(0,n.g2)("q-separator"),P=(0,n.g2)("q-list"),M=(0,n.g2)("q-menu"),W=(0,n.g2)("q-markup-table"),K=(0,n.g2)("Loader"),R=(0,n.g2)("export-dialog"),z=(0,n.g2)("q-dialog"),B=(0,n.g2)("q-avatar"),J=(0,n.g2)("q-card-section"),V=(0,n.g2)("q-card-actions"),j=(0,n.g2)("q-card"),H=(0,n.gN)("close-popup");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(w,{name:"export_settings",label:t.$t("export_settings")},null,8,["label"]),(0,n.bF)($,null,{default:(0,n.k6)((()=>[(0,n.bF)(O,{class:"float-right",icon:"add","data-cy":"add-integration-button",onClick:e[0]||(e[0]=e=>t.addNewConfig()),label:t.$t("new")},null,8,["label"])])),_:1}),t.configurations?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",r,[(0,n.bF)(X,{style:{"margin-bottom":"20px","pointer-events":"none"},size:"25px",round:"",class:"integration-icon",icon:"upload"}),c,(0,n.Lk)("b",null,(0,i.v_)(t.$t("pages.export.heading")),1),(0,n.eW)(),d,(0,n.eW)(" "+(0,i.v_)(t.$t("pages.export.subheading"))+" ",1),u,(0,n.bF)(X,{style:{"margin-top":"20px","letter-spacing":"2px"},color:"primary",label:t.$t("pages.export.addintegration"),onClick:e[1]||(e[1]=e=>t.addNewConfig())},null,8,["label"])])])),(0,n.Lk)("div",g,[(0,n.Lk)("div",p,[(0,n.Lk)("div",_,[(0,n.bF)(W,{flat:"",class:"dashboard-table-style back-white",id:"export_table"},{default:(0,n.k6)((()=>[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",b,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.table_columns,((o,s)=>((0,n.uX)(),(0,n.CE)("th",{key:o.name,"data-index":s,draggable:t.canDragDropColumn(o),dropzone:t.canDragDropColumn(o),direction:"horizontal",onDragstart:e=>t.onDragStart(e,t.table_columns,s),onDrop:(0,a.D$)((e=>t.handleDrop(e,s)),["prevent"]),onDragover:(0,a.D$)((e=>t.onDragOver(e,s)),["prevent"]),onDragenter:e[2]||(e[2]=(0,a.D$)(((...e)=>t.onDragEnter&&t.onDragEnter(...e)),["prevent"])),onDragleave:e[3]||(e[3]=(0,a.D$)(((...e)=>t.onDragLeave&&t.onDragLeave(...e)),["prevent"])),style:(0,i.Tr)({cursor:t.getIsDragging?"pointer":"move"}),class:(0,i.C4)(o.class||"")},["actions"==o.name?((0,n.uX)(),(0,n.CE)("span",h,(0,i.v_)(t.$t(o.label)),1)):((0,n.uX)(),(0,n.CE)("span",m,(0,i.v_)(t.$t(o.label)),1))],46,f)))),128))])]),(0,n.Lk)("tbody",null,[t.configurations?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(t.configurations,(o=>((0,n.uX)(),(0,n.CE)("tr",{key:o.id,onClick:e=>t.editConfiguration(o),class:"cursor-pointer"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.table_columns,(s=>((0,n.uX)(),(0,n.CE)(n.FK,{key:s.name},["title"==s.name?((0,n.uX)(),(0,n.CE)("td",k,[(0,n.bF)(I,{class:"q-mr-md",rounded:"",color:o.is_active?"green":"red-14"},null,8,["color"]),(0,n.eW)(" "+(0,i.v_)(o.title),1)])):"doc_type"==s.name?((0,n.uX)(),(0,n.CE)("td",v,(0,i.v_)(t.getDocTypeLabel(o)),1)):"sub_organizations"==s.name?((0,n.uX)(),(0,n.CE)("td",C,(0,i.v_)(t.getSubOrgName(o)),1)):"export_method"==s.name?((0,n.uX)(),(0,n.CE)("td",x,(0,i.v_)(o.export_method),1)):((0,n.uX)(),(0,n.CE)("td",E,[(0,n.bF)(X,{flat:"",dense:"",round:"",onClick:e[4]||(e[4]=(0,a.D$)((()=>{}),["stop","prevent"])),icon:"more_horiz"},{default:(0,n.k6)((()=>[(0,n.bF)(M,{"auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)((()=>[(0,n.bF)(P,{dense:"",style:{"min-width":"100px"}},{default:(0,n.k6)((()=>[(0,n.bF)(q,{clickable:""},{default:(0,n.k6)((()=>[o.is_active?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(Q,{key:0,onClick:e=>t.handleDisability(o,o.is_active)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(t.$t("activate")),1)])),_:2},1032,["onClick"])),o.is_active?((0,n.uX)(),(0,n.Wv)(Q,{key:1,onClick:e=>t.handleDisability(o,o.is_active)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(t.$t("deactivate")),1)])),_:2},1032,["onClick"])):(0,n.Q3)("",!0)])),_:2},1024),(0,n.bF)(q,{clickable:""},{default:(0,n.k6)((()=>[(0,n.bF)(Q,{onClick:e=>t.editConfiguration(o)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(t.$t("edit")),1)])),_:2},1032,["onClick"])])),_:2},1024),t.test_connection_types.includes(o.export_method)?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.bF)(N,{inset:""}),(0,n.bF)(q,{clickable:""},{default:(0,n.k6)((()=>[(0,n.bF)(Q,{onClick:e=>t.testConnection(o)},{default:(0,n.k6)((()=>[(0,n.Lk)("span",null,(0,i.v_)(t.$t("test_connection")),1)])),_:2},1032,["onClick"])])),_:2},1024)],64)):(0,n.Q3)("",!0),(0,n.bF)(N,{inset:""}),(0,n.bF)(q,{clickable:""},{default:(0,n.k6)((()=>[(0,n.bF)(Q,{onClick:e=>{t.deleteConfirmation=!0,t.configId=o.id}},{default:(0,n.k6)((()=>[(0,n.Lk)("span",S,(0,i.v_)(t.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)]))],64)))),128))],8,y)))),128)):((0,n.uX)(),(0,n.CE)("tr",F,[(0,n.Lk)("td",D,(0,i.v_)(t.$t("no_configurations")),1)]))])])),_:1})])])]),(0,n.bF)(K),(0,n.bF)(z,{modelValue:t.display_config_dialog,"onUpdate:modelValue":e[5]||(e[5]=e=>t.display_config_dialog=e),persistent:"",onKeydown:e[6]||(e[6]=(0,a.jR)((e=>t.display_config_dialog=!1),["esc"]))},{default:(0,n.k6)((()=>[(0,n.bF)(R)])),_:1},8,["modelValue"]),(0,n.bF)(z,{modelValue:t.deleteConfirmation,"onUpdate:modelValue":e[8]||(e[8]=e=>t.deleteConfirmation=e),persistent:""},{default:(0,n.k6)((()=>[(0,n.bF)(j,null,{default:(0,n.k6)((()=>[(0,n.bF)(J,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,n.k6)((()=>[(0,n.bF)(B,{icon:"warning",color:"primary","text-color":"white"})])),_:1}),(0,n.bF)(J,{class:"row items-center"},{default:(0,n.k6)((()=>[(0,n.Lk)("span",L,(0,i.v_)(t.$t("pages.export.sure")),1)])),_:1}),(0,n.bF)(V,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.bF)(X,{flat:"",label:t.$t("cancel"),"data-cy":"cancel-card",color:"primary"},null,8,["label"]),[[H]]),(0,n.bo)((0,n.bF)(X,{flat:"",label:t.$t("delete"),"data-cy":"done-card",color:"primary",onClick:e[7]||(e[7]=e=>t.deleteConfiguration())},null,8,["label"]),[[H]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var A=o(24622),w=o(10739),O=o(38734),$=o(8420),X=o(18505),I=o(60894),Q=o(62107),q=o(91236),N=o(94124),P=o(1659),M=o(25891),W=o(11470),K=o(64775),R=o(45022),z=function(t,e,o,n){function i(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,a){function s(t){try{r(n.next(t))}catch(e){a(e)}}function l(t){try{r(n["throw"](t))}catch(e){a(e)}}function r(t){t.done?o(t.value):i(t.value).then(s,l)}r((n=n.apply(t,e||[])).next())}))};const B=(0,n.pM)({el:"#app",mixins:[A.A,X.A,M.A,w.A],components:{Loader:$.A,ExportDialog:Q.A,SubHeader:q.A,BackToSettings:I.A},data(){return{dialog:!1,table_columns:[{label:"pages.export.title",name:"title",class:"col-2"},{label:"pages.export.doc_type",name:"doc_type"},{label:"sub_organizations",name:"sub_organizations"},{label:"pages.export.export_method",name:"export_method"},{label:"pages.export.actions",name:"actions",class:"text-center"}]}},watch:{processing:{handler:function(t,e){!1===t?this.hideLoading():this.showLoading()}},config_saved:{handler:function(t,e){!0===t&&(this.display_config_dialog=!1,this.config_saved=!1,this.getExportConfigurations())}}},mounted(){return z(this,void 0,void 0,(function*(){this.processing=!0,this.prepareTableColumn(),yield this.getSubOrgsList(),this.fillDocTypeAndSubTypesListIfEmpty(),yield this.getExportConfigurations(),this.initDragDropColumns("export_table","label",["actions"]),document.addEventListener("export_table-column-drop",this.onDropColumns),this.processing=!1}))},unmounted(){document.removeEventListener("export_table-column-drop",this.onDropColumns)},methods:{editConfiguration(t){const e=t.export_method;if(e){this.display_config_dialog=!0;var o=JSON.parse(JSON.stringify(t));this.setSelectedExportForEdit(o)}else this.showErrorToast(this.$t("pages.messages.ERROR_EXPORT_METHOD_NOT_FOUND"))},addNewConfig(){this.configId=0,this.display_config_dialog=!0,this.clearOnlySelectionConfigState()},prepareTableColumn(){const t=R.A.getItem("EXPORT_SETTING_COLUMNS");this.table_columns=t&&""!=t?JSON.parse(t):this.table_columns},onDropColumns(){R.A.set("EXPORT_SETTING_COLUMNS",JSON.stringify(this.table_columns))},deleteConfiguration(){return z(this,void 0,void 0,(function*(){try{this.processing=!0,yield W.Y1.delete(this.configId.toString()),this.clearStateForExportDialog(),this.getExportConfigurations()}catch(t){return this.showErrorToast(this.$t("pages.messages.error_internal_occur")),void(this.processing=!1)}}))},handleDisability(t,e){return z(this,void 0,void 0,(function*(){try{e=!e,this.processing=!0;const o=yield W.Y1.updateActive(t.id.toString(),e);if(!o.success||!0!==o.success)throw{message:o.message};t.is_active=e}catch(o){const t=K.t.getErrorMessage(o);this.showErrorToast(t)}finally{this.processing=!1}}))},getDocTypeLabel(t){const e=this.doc_type_list.find((e=>e.value===t.doc_type));return String(e?e.label:t.doc_type)},getSubOrgName(t){if(!t.sub_org_id)return"";const e=this.subOrgList.find((e=>e.value===t.sub_org_id));return e&&String(e.label)||""},testConnection(t){return z(this,void 0,void 0,(function*(){try{this.showLoading();const e={config_id:t.id};let o;if(t.export_method===this.export_types.SFTP&&(o=yield W.Y1.testSFTP(e)),t.export_method===this.export_types.SMB_WITH_JPL&&(o=yield W.Y1.testSMB(e)),!1===o.success)throw{message:o.message};this.showSuccessToast(this.$t("test_connection_success"))}catch(e){const t=K.t.getErrorMessage(e);this.showErrorToast(t)}finally{this.hideLoading()}}))}},setup(){const t=(0,N.t8)(),{getExportConfigurations:e,setSelectedExportForEdit:o,clearStateForExportDialog:n,clearOnlySelectionConfigState:i}=t,{configurations:a,processing:s,display_config_dialog:l,config_saved:r,export_types:c}=(0,P.bP)(t),d=(0,N.cY)(),{fillDocTypeAndSubTypesListIfEmpty:u,getSubOrgsList:g}=d,{doc_type_list:p,subOrgList:_}=(0,P.bP)(d),b=[t.export_types.SFTP,t.export_types.SMB_WITH_JPL];return{export_types:c,subOrgList:_,getSubOrgsList:g,doc_type_list:p,display_config_dialog:l,fillDocTypeAndSubTypesListIfEmpty:u,setSelectedExportForEdit:o,exportConfiguration:(0,O.KR)(),isExportConfigured:!1,deleteConfirmation:(0,O.KR)(!1),configId:0,getExportConfigurations:e,configurations:a,processing:s,clearStateForExportDialog:n,clearOnlySelectionConfigState:i,config_saved:r,test_connection_types:b}}});var J=o(12807),V=o(56384),j=o(857),H=o(23954),U=o(84436),Y=o(53999),G=o(90124),Z=o(25173),tt=o(10386),et=o(97410),ot=o(82156),nt=o(23316),it=o(44189),at=o(3952),st=o(62669),lt=o(88672),rt=o(98582),ct=o.n(rt);const dt=(0,J.A)(B,[["render",T],["__scopeId","data-v-7491dda3"]]),ut=dt;ct()(B,"components",{QBtn:V.A,QMarkupTable:j.A,QBadge:H.A,QMenu:U.A,QList:Y.A,QItem:G.A,QItemSection:Z.A,QSeparator:tt.A,QTooltip:et.A,QDialog:ot.A,QCard:nt.A,QCardSection:it.A,QAvatar:at.A,QCardActions:st.A}),ct()(B,"directives",{ClosePopup:lt.A})}}]);