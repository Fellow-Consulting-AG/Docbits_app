"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[8460],{68460:(e,o,t)=>{t.r(o),t.d(o,{default:()=>is});var l=t(59835),i=t(86970);const s=e=>((0,l.dD)("data-v-1aaec969"),e=e(),(0,l.Cn)(),e),a={class:"row q-pl-md q-pr-md highlighted-back"},d={class:"col-4 secondary-c-text text-h6"},n=s((()=>(0,l._)("img",{width:"24",src:"back_new.svg"},null,-1))),r={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},m=s((()=>(0,l._)("img",{width:"24",src:"back_new.svg"},null,-1))),c={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},u={class:"col-8 q-pa-xs"},h={class:"float-right"},p=["innerHTML"],g=s((()=>(0,l._)("img",{width:"20",src:"globe.svg",class:"black_to_white"},null,-1))),f={class:"row q-pl-md q-pr-md q-pb-md"},_={class:"col-xs-12 col-sm-2 col-md-2 col-lg-2 q-pt-sm full-height"},v={class:"full-width scroll-area-height scrolle-y"},y={class:"full-width",style:{position:"relative"}},w={class:"col-xs-12 col-sm-10 col-md-10 col-lg-10 padding-8-0-8-8"},C={class:"full-width"},b={class:"full-width"},T={class:"p-t-b-6 highlighted-back image_control_panel"},B={class:"row"},k={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},M={key:0,class:"row form-builder-image-container",id:"image_scrolle"},x={class:"image_container overflow-scroll",id:"image_container",style:{position:"relative"}},I={class:"max-width-80 q-pl-sm q-pr-sm"},F={class:"justify-center form-builder-image-container"},N=["data-id","onClick","src"],L={key:1,class:"full-width full-height"},O={key:0,class:"p-t-b-6 image_control_panel highlighted-back"},E={class:"row"},S={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},A={class:"row"},q={class:"col-sm-12 col-md-12 col-lg-12"},D={class:"row"},V={class:"col-sm-12 col-md-12 col-lg-12"},P={class:"col-sm-12 col-md-12 col-lg-12"},U=s((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12 text-red-5 height-20 q-pl-md"},null,-1))),W={class:"col-sm-12 col-md-12 col-lg-12"};function z(e,o,t,s,z,R){const Z=(0,l.up)("q-icon"),$=(0,l.up)("q-btn"),X=(0,l.up)("helpLayoutbuilder"),H=(0,l.up)("f-btn"),Y=(0,l.up)("q-item-label"),Q=(0,l.up)("q-tooltip"),J=(0,l.up)("q-item-section"),G=(0,l.up)("q-item"),K=(0,l.up)("q-select"),j=(0,l.up)("q-tab"),ee=(0,l.up)("q-tabs"),oe=(0,l.up)("q-separator"),te=(0,l.up)("DefaultGroups"),le=(0,l.up)("q-expansion-item"),ie=(0,l.up)("DefaultElements"),se=(0,l.up)("Elements"),ae=(0,l.up)("q-tab-panel"),de=(0,l.up)("Properties"),ne=(0,l.up)("GeneralSettings"),re=(0,l.up)("q-tab-panels"),me=(0,l.up)("FieldsDesigner"),ce=(0,l.up)("ImageComponent"),ue=(0,l.up)("import-pdf"),he=(0,l.up)("q-toggle"),pe=(0,l.up)("q-splitter"),ge=(0,l.up)("q-toolbar-title"),fe=(0,l.up)("q-toolbar"),_e=(0,l.up)("q-input"),ve=(0,l.up)("q-form"),ye=(0,l.up)("q-card-section"),we=(0,l.up)("q-card"),Ce=(0,l.up)("q-dialog"),be=(0,l.up)("Loader"),Te=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",a,[(0,l._)("div",d,[e.docType&&!e.subDocType?((0,l.wg)(),(0,l.j4)($,{key:0,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/settings/document"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{class:"text-red-13",size:"sm"},{default:(0,l.w5)((()=>[n])),_:1}),(0,l._)("label",r,(0,i.zw)(e.$t("pages.settings.document_types")),1)])),_:1})):(0,l.kq)("",!0),e.docType&&e.subDocType?((0,l.wg)(),(0,l.j4)($,{key:1,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/settings/sub_doc_type/"+e.docType},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{class:"text-red-13",size:"sm"},{default:(0,l.w5)((()=>[m])),_:1}),(0,l._)("label",c,(0,i.zw)(e.$t("sub_doc_type")),1)])),_:1},8,["to"])):(0,l.kq)("",!0)]),(0,l._)("div",u,[(0,l._)("div",h,[(0,l.Wm)(X)]),(0,l.Wm)(H,{label:e.$t("copy_json"),class:"float-right",icon:"content_copy",onClick:o[0]||(o[0]=o=>e.copyTemplate())},null,8,["label"]),(0,l.Wm)(H,{label:e.$t("edit_json"),class:"float-right q-mr-md",icon:"visibility",onClick:o[1]||(o[1]=o=>e.openJsonForm())},null,8,["label"]),(0,l.Wm)(H,{label:e.$t("use_default_template"),class:"float-right q-mr-md",onClick:o[2]||(o[2]=o=>e.restoreDefaults())},null,8,["label"]),(0,l.Wm)(K,{outlined:"",dense:"",class:"language-select float-right q-mr-md width-200",modelValue:e.language_origin,"onUpdate:modelValue":[o[3]||(o[3]=o=>e.language_origin=o),o[4]||(o[4]=o=>e.createTemplateAccordingToOrigin())],options:e.language_origin_list,"emit-value":"","map-options":""},{option:(0,l.w5)((e=>[(0,l.Wm)(G,(0,i.vs)((0,l.F4)(e.itemProps)),{default:(0,l.w5)((()=>[(0,l.Wm)(J,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Y,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.opt.label),1)])),_:2},1024),e.opt.description?((0,l.wg)(),(0,l.j4)(Q,{key:0},{default:(0,l.w5)((()=>[(0,l._)("span",{innerHTML:e.opt.description},null,8,p)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1040)])),prepend:(0,l.w5)((()=>[(0,l.Wm)(Z,{flat:"",dense:"",color:"primary"},{default:(0,l.w5)((()=>[g])),_:1})])),_:1},8,["modelValue","options"])])]),(0,l._)("div",f,[(0,l._)("div",_,[(0,l._)("div",v,[(0,l._)("div",y,[(0,l.Wm)(ee,{modelValue:e.activeTab,"onUpdate:modelValue":o[5]||(o[5]=o=>e.activeTab=o),dense:"","active-class":"highlighted-back","indicator-color":"primary","active-color":"primary",align:"justify"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{name:"general_settings",class:"no-padding-left-right",icon:"settings"}),(0,l.Wm)(j,{name:"form_elements",label:e.$t("form_builder.elements")},null,8,["label"]),(0,l.Wm)(j,{name:"element_properties",label:e.$t("form_builder.properties")},null,8,["label"])])),_:1},8,["modelValue"]),(0,l.Wm)(oe),(0,l.Wm)(re,{modelValue:e.activeTab,"onUpdate:modelValue":o[6]||(o[6]=o=>e.activeTab=o),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(ae,{name:"form_elements"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{"expand-separator":"","default-opened":"",label:e.$t("groups"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px q-mt-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(te)])),_:1},8,["label"]),(0,l.Wm)(le,{"expand-separator":"",label:e.$t("fields"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px q-mt-sm",class:"q-mb-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(ie)])),_:1},8,["label"]),(0,l.Wm)(le,{"expand-separator":"",label:e.$t("form_builder.form_elements"),group:"fieldsGroup","header-class":"text-weight-bold rounded-borders solid-border-1px"},{default:(0,l.w5)((()=>[e.renderComponent?((0,l.wg)(),(0,l.j4)(se,{key:e.keyToUpdateComponnets})):(0,l.kq)("",!0)])),_:1},8,["label"]),(0,l.Wm)(oe)])),_:1}),(0,l.Wm)(ae,{name:"element_properties"},{default:(0,l.w5)((()=>[e.renderComponent?((0,l.wg)(),(0,l.j4)(de,{key:e.keyToUpdateComponnets})):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(ae,{name:"general_settings"},{default:(0,l.w5)((()=>[(0,l.Wm)(ne)])),_:1})])),_:1},8,["modelValue"])])])]),(0,l._)("div",w,[(0,l.Wm)(pe,{limits:[30,95],modelValue:e.formSplitterModel,"onUpdate:modelValue":[o[10]||(o[10]=o=>e.formSplitterModel=o),e.loadImageDetails],class:"scroll-area-height"},{before:(0,l.w5)((()=>[(0,l._)("div",C,[(0,l.Wm)(me,{isPanelSection:!1,onSaveTemplate:e.saveTemplate,onShowConnectionFromField:e.showConnectionFromField,onMarkTableColumns:e.markTableColumns},null,8,["onSaveTemplate","onShowConnectionFromField","onMarkTableColumns"])])])),after:(0,l.w5)((()=>[(0,l._)("div",b,[(0,l.Wm)(pe,{limits:[30,94],disable:!e.isExtenedPanel,modelValue:e.splitterModel,"onUpdate:modelValue":o[9]||(o[9]=o=>e.splitterModel=o),horizontal:"","separator-class":"bg-black",class:"scroll-area-height","before-class":"handle-scroll"},{before:(0,l.w5)((()=>[(0,l._)("div",T,[(0,l._)("div",B,[(0,l._)("div",k,[(0,l.Wm)(Z,{name:"img:zoom_in.svg",size:"24px",class:"q-mr-sm cursor-pointer",onClick:e.zoomIn},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("zoom_in")),1)])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(Z,{name:"img:zoom_out.svg",size:"24px",class:"q-mr-sm cursor-pointer",onClick:e.zoomOut},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("zoom_out")),1)])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(Z,{name:"img:settings/export.svg",size:"24px",class:"q-mr-sm cursor-pointer right",onClick:o[7]||(o[7]=o=>e.showImages=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("upload")),1)])),_:1})])),_:1})])])]),e.showImages?((0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("div",x,[e.formLayoutImages?((0,l.wg)(),(0,l.j4)(ce,{key:0,"pos-correction":!1,width:e.imageWidth,cropUrl:e.baseUrl+"/"+e.formLayoutImages[e.imageIndex].path+"?"+e.keyImageChange+"&"+e.tokenQueryParam,markedAreasStr:e.markedAreasStr,connectionId:e.connectionId,allowMultiSelection:e.allowMultiSelection,onRestrictDrawing:e.restrictDrawing},null,8,["width","cropUrl","markedAreasStr","connectionId","allowMultiSelection","onRestrictDrawing"])):(0,l.kq)("",!0)]),(0,l._)("div",I,[(0,l._)("div",F,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.formLayoutImages,((o,t)=>((0,l.wg)(),(0,l.iD)("img",{"data-id":t,onClick:o=>e.loadImage(t,!1),class:(0,i.C_)([t===e.imageIndex?"active":"","cursor-pointer q-ma-sm shadow-2 solid-border-1px"]),key:t,src:e.baseUrl+"/"+o.path+"?"+e.keyImageChange+"&"+e.tokenQueryParam,width:"50",draggable:"false"},null,10,N)))),128))])])])):(0,l.kq)("",!0),e.showImages?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",L,[(0,l.Wm)(ue,{onSaveTemplate:e.saveTemplate,onLoadImage:e.loadImage},null,8,["onSaveTemplate","onLoadImage"])]))])),after:(0,l.w5)((()=>[e.isExtenedPanel?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",O,[(0,l._)("div",E,[(0,l._)("div",S,[(0,l.Wm)(he,{size:"24px",modelValue:e.isExtenedPanel,"onUpdate:modelValue":o[8]||(o[8]=o=>e.isExtenedPanel=o),class:"float-right"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("activate")),1)])),_:1})])),_:1},8,["modelValue"])])])])),e.isExtenedPanel&&e.showPanel?((0,l.wg)(),(0,l.j4)(me,{key:1,isPanelSection:!0,onSaveTemplate:e.saveTemplate,onShowConnectionFromField:e.showConnectionFromField,onMarkTableColumns:e.markTableColumns},null,8,["onSaveTemplate","onShowConnectionFromField","onMarkTableColumns"])):(0,l.kq)("",!0)])),_:1},8,["disable","modelValue"])])])),_:1},8,["modelValue","onUpdate:modelValue"])])]),(0,l.Wm)(Ce,{modelValue:e.showJsonForm,"onUpdate:modelValue":o[14]||(o[14]=o=>e.showJsonForm=o)},{default:(0,l.w5)((()=>[(0,l.Wm)(we,null,{default:(0,l.w5)((()=>[(0,l.Wm)(fe,{class:"secondary-toolbar"},{default:(0,l.w5)((()=>[(0,l.Wm)(ge,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("edit_json")),1)])),_:1}),(0,l.wy)((0,l.Wm)($,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Te]])])),_:1}),(0,l.Wm)(ye,{class:"width-500"},{default:(0,l.w5)((()=>[(0,l._)("div",A,[(0,l._)("div",q,[(0,l._)("div",D,[(0,l.Wm)(ve,{class:"full-width"},{default:(0,l.w5)((()=>[(0,l._)("div",V,(0,i.zw)(e.$t("pages.fields_settings.formula")),1),(0,l._)("div",P,[(0,l.Wm)(_e,{outlined:"",modelValue:this.strFormLayout,"onUpdate:modelValue":o[11]||(o[11]=e=>this.strFormLayout=e),type:"textarea"},null,8,["modelValue"])]),U,(0,l._)("div",W,[(0,l.wy)((0,l.Wm)($,{label:e.$t("pages.user.save"),onClick:o[12]||(o[12]=o=>e.savePastedJson()),color:"primary",icon:"done"},null,8,["label"]),[[Te]]),(0,l.Wm)($,{outline:"",color:"primary",label:"Copy Json",class:"float-right",icon:"content_copy",onClick:o[13]||(o[13]=o=>e.copyTemplate())})])])),_:1})])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(be)],64)}var R=t(44173),Z=t(7363),$=t(49990);const X={class:"full-width full-height q-pa-lg"},H={class:""},Y=(0,l._)("img",{src:"settings/export.svg",width:"100","aria-hidden":"true"},null,-1),Q={style:{padding:"20px"}},J={class:"text-white"};function G(e,o,t,s,a,d){const n=(0,l.up)("q-icon"),r=(0,l.up)("q-tooltip"),m=(0,l.up)("q-file");return(0,l.wg)(),(0,l.iD)("div",X,[(0,l._)("div",{class:"drag-area text-center full-width full-height dashed-border-2px",style:{padding:"20px"},onDrop:o[1]||(o[1]=(...o)=>e.drop&&e.drop(...o)),onDragover:o[2]||(o[2]=(...o)=>e.allowDrop&&e.allowDrop(...o)),onDragleave:o[3]||(o[3]=(...o)=>e.dragLeave&&e.dragLeave(...o))},[(0,l._)("div",H,[Y,(0,l._)("div",Q,(0,i.zw)(e.$t("pages.land.dragndrop")),1),(0,l.Wm)(m,{style:{width:"200px !important",margin:"auto","white-space":"nowrap"},color:"white","data-cy":"upload-multiple-docs","label-color":"white","bg-color":"primary",filled:"","onUpdate:modelValue":[e.uploadFile,o[0]||(o[0]=o=>e.uploadedFiles=o)],modelValue:e.uploadedFiles,label:e.$t("pages.land.upload")},{prepend:(0,l.w5)((()=>[(0,l.Wm)(n,{name:"attachment",color:"white"})])),file:(0,l.w5)((({index:e,file:o})=>[(0,l._)("div",J,(0,i.zw)(o.name),1),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(o.name),1)])),_:2},1024),(0,l.kq)("",!0)])),_:1},8,["onUpdate:modelValue","modelValue","label"])])],32)])}var K=t(39981),j=t.n(K),ee=t(60499),oe=t(70501),te=t(46624),le=t(37744),ie=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{n(l.next(e))}catch(o){s(o)}}function d(e){try{n(l["throw"](e))}catch(o){s(o)}}function n(e){e.done?t(e.value):i(e.value).then(a,d)}n((l=l.apply(e,o||[])).next())}))};const se=(0,l.aZ)({el:"#app",mixins:[oe.Z,$.Z],emits:["saveTemplate","loadImage"],props:["showSpinner"],data(){return{}},methods:{uploadFile(e){this.uploadedFiles=e;let o=this.uploadedFiles;o||this.showErrorToast(this.$t("pages.messages.NO_FILE_SELECTED")),this.uploadFilee(o)},allowDrop(e){e.preventDefault(),e.currentTarget.classList.add("bg-grey-5"),e.currentTarget.classList.add("bd-shadow")},drop(e){e.preventDefault(),e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow"),this.uploadFilee(e.dataTransfer.files[0])},dragLeave(e){e.currentTarget.classList.remove("bg-grey-5"),e.currentTarget.classList.remove("bd-shadow")},uploadFilee(e){return ie(this,void 0,void 0,(function*(){if(this.uploadedFiles=null,"application/pdf"!==e.type)return void this.showErrorToast(this.$t("pages.messages.ONLY_PDF_ALLOWED"));this.showLoading();let o=this.$route.params.id;o||this.showErrorToast("Template Id is mandatory");let t,l=new FormData;l.append("id",o),l.append("file",e);try{let e=yield(0,le.O_)();t=yield j().post(le.hi.upload_template_sample,l,{headers:{"Content-Type":"multipart/form-data",Authorization:e}})}catch(i){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}this.formLayoutImages=[],this.formLayoutImages=t.data.images,this.proximityTokens=t.data.proximity_tokens,this.showImages=!0,this.$emit("loadImage",0,!0),this.$emit("saveTemplate",!0)}))}},setup(){const e=(0,te.nc)(),{showImages:o,formLayoutImages:t,proximityTokens:l}=(0,Z.Jk)(e);return{showImages:o,proximityTokens:l,formLayoutImages:t,uploadedFiles:(0,ee.iH)(null)}}});var ae=t(7683),de=t(68879),ne=t(29420),re=t(22857),me=t(46858),ce=t(69984),ue=t.n(ce);const he=(0,ae.Z)(se,[["render",G]]),pe=he;ue()(se,"components",{QBtn:de.Z,QFile:ne.Z,QIcon:re.Z,QTooltip:me.Z});const ge={class:"p-t-b-6 image_control_panel highlighted-back"},fe={class:"row"},_e={class:"panel-right col-sm-12 col-md-12 col-lg-12 pl-10"},ve=["id"],ye={class:"full-width"},we=["id"],Ce={class:"q-pt-sm q-pb-sm"},be={key:0,class:"row cursor-move"},Te={class:"col-sm-8 col-md-8 col-lg-8 q-pr-sm"},Be={class:"col-sm-4 col-md-4 col-lg-4"},ke={key:1,class:"row float-right display-contents"},Me={class:"full-width meta"},xe=["onClick"],Ie={key:1,class:"full-width q-pa-xs height-24"};function Fe(e,o,t,s,a,d){const n=(0,l.up)("q-tooltip"),r=(0,l.up)("q-icon"),m=(0,l.up)("q-toggle"),c=(0,l.up)("q-input"),u=(0,l.up)("q-btn"),h=(0,l.up)("draggable");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",ge,[(0,l._)("div",fe,[(0,l._)("div",_e,[(0,l.Wm)(r,{name:"add_to_queue",size:"24px",class:"float-left q-mr-sm cursor-pointer",onClick:o[0]||(o[0]=o=>e.addGroup())},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("create_group")),1)])),_:1})])),_:1}),e.isPanelSection?((0,l.wg)(),(0,l.j4)(m,{key:0,size:"24px",modelValue:e.isExtenedPanel,"onUpdate:modelValue":o[1]||(o[1]=o=>e.isExtenedPanel=o),class:"float-right"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("deactivate")),1)])),_:1})])),_:1},8,["modelValue"])):(0,l.kq)("",!0),(0,l.Wm)(r,{name:"img:save.svg",size:"24px",class:"float-right q-mr-sm cursor-pointer",onClick:o[2]||(o[2]=o=>e.$emit("saveTemplate",!0))},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("save")),1)])),_:1})])),_:1})])])]),((0,l.wg)(),(0,l.iD)("div",{key:e.reRenderOnGroupChange,class:(0,i.C_)(e.isPanelSection?"":"right-content-height scrolle-y"),id:e.isPanelSection?"field_scrolle_2":"field_scrolle"},[(0,l._)("div",ye,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.formLayout,((o,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:`div-${t}`},[o.is_panel_section_group===e.isPanelSection?((0,l.wg)(),(0,l.iD)("div",{key:0,id:`div-${t}`,class:(0,i.C_)(["section-block dashed-border q-mb-md q-pa-sm display-inline-block",e.getElementBorder(o)]),style:(0,i.j5)("width:"+e.getElementWidth(o)+"%")},[(0,l._)("div",Ce,[e.isPanelSection?((0,l.wg)(),(0,l.iD)("div",ke,[(0,l.Wm)(u,{outline:"",round:"",size:"sm",color:"primary",icon:"settings",class:"h-m-5",onClick:t=>e.inputClicked(o.name)},null,8,["onClick"]),(0,l.Wm)(u,{outline:"",round:"",size:"sm",color:"red-5",icon:"delete",class:"h-m-5 float-right",onClick:o=>e.deleteSection(t)},null,8,["onClick"])])):((0,l.wg)(),(0,l.iD)("div",be,[(0,l._)("div",Te,[(0,l.Wm)(c,{outlined:"",dense:"",modelValue:o.title,"onUpdate:modelValue":e=>o.title=e,label:e.$t("group_title"),onClick:t=>e.inputClicked(o.name)},null,8,["modelValue","onUpdate:modelValue","label","onClick"])]),(0,l._)("div",Be,[(0,l.Wm)(u,{outline:"",round:"",size:"sm",color:"red-5",icon:"delete",class:"h-m-5 float-right",onClick:o=>e.deleteSection(t)},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("delete_group")),1)])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(u,{outline:"",round:"",size:"sm",color:"primary",icon:"move_up",class:"h-m-5 float-right",onClick:o=>e.moveGroupUp(o,t)},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("move_up")),1)])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(u,{outline:"",round:"",size:"sm",color:"primary",icon:"move_down",class:"h-m-5 float-right",onClick:o=>e.moveGroupDown(o,t)},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("move_down")),1)])),_:1})])),_:2},1032,["onClick"])])]))]),(0,l._)("div",Me,[(0,l.Wm)(h,{modelValue:o.rows,"onUpdate:modelValue":e=>o.rows=e,class:"dragArea","item-key":"name",group:{name:"formbuilder",pull:!1,put:!0},sort:!0,"ghost-class":"sortable__ghost",onChange:e.itemAdded},{item:(0,l.w5)((({element:o})=>[(0,l._)("div",(0,l.dG)(o,{onClick:t=>e.inputClicked(o.name),class:["element_parent q-pa-sm cursor-move",(o.name==e.activeFieldName?"is--active  dashed-border":" ")+(e.isPanelSection?" ":" display-block")+(e.isPanelSection?" ":" display-block ")+(o.tr_ocr_model_id?" text-primary ":" ")],style:"width:"+e.getElementWidth(o)+"%"}),[e.renderComponent?((0,l.wg)(),(0,l.j4)((0,l.LL)(o.fieldType),{key:0,currentField:o,isReadOnly:!1,fieldName:o.name,groupIndex:t,onInputClicked:e.inputClicked,onInputValueChanges:e.inputValueChanges,onUpdateModel:e.updateModel,onApplyFuzzySearch:e.applyFuzzySearch,onMarkTableColumns:e.markTableColumns,class:"form__field"},null,8,["currentField","fieldName","groupIndex","onInputClicked","onInputValueChanges","onUpdateModel","onApplyFuzzySearch","onMarkTableColumns"])):(0,l.kq)("",!0),o.name===e.activeFieldName?((0,l.wg)(),(0,l.iD)("div",Ie,[o.fieldType===e.TABLE_OF_CHECKBOXES?((0,l.wg)(),(0,l.j4)(u,{key:0,round:"",color:"primary",icon:"table_rows",size:"xs",class:"h-m-5",onClick:t=>e.addTableRow(o.name)},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("add_row")),1)])),_:1})])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(o.fieldType,e.TABLE_OF_CHECKBOXES,(0,l.kq)("",!0)),(0,l.Wm)(u,{round:"",color:"primary",icon:"delete",size:"xs",class:"float-right delete-ele",onClick:o=>e.removeField(o,t)},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])):(0,l.kq)("",!0)],16,xe)])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])],14,we)):(0,l.kq)("",!0)],64)))),128))])],10,ve))],64)}var Ne=t(50796),Le=t(73130),Oe=t.n(Le),Ee=t(33725),Se=t(17449),Ae=t(48854),qe=t(40535),De=t(17802),Ve=t(80416),Pe=t(3399),Ue=t(83843),We=t(92643),ze=t(83558),Re=t(33354),Ze=t(32285),$e=t(11355),Xe=t(70746),He=t(16675),Ye=t(79081),Qe=t(79388),Je=t(95778),Ge=t(75883),Ke=t(78606);const je=(0,l.aZ)({el:"fields_designer",mixins:[oe.Z,$.Z],emits:["showConnectionFromField","saveTemplate","markTableColumns"],props:{isPanelSection:{type:Boolean,default:!1}},data(){return{reRenderOnGroupChange:(0,ee.iH)(0),TABLE_OF_CHECKBOXES:Ke.oh.TABLE_OF_CHECKBOXES}},components:{draggable:Oe(),Label:Se.Z,CheckBox:Ae.Z,TextInput:Ue.Z,EnumInput:We.Z,ExportButton:qe.Z,MultiCheckBox:ze.Z,LineItemTable:Xe.Z,TableOfCheckboxes:$e.Z,AmountButtonsPanel:Ze.Z,HorizontalSeparator:He.Z,AditionalAmountButtonsPanel:Qe.Z,ExtractedTableTabPanels:Je.Z,PoMatchButton:De.Z,SaveRulesButton:Ve.Z,AutoAccountingButton:Pe.Z,InvoiceButtons:Ye.Z,QRCodeExtractedFields:Ge.Z},mounted:function(){window.et=this,document.addEventListener("add_field_to_designer",this.addFieldToDesigner),document.addEventListener("element_click",this.triggerFieldFocus)},unmounted:function(){document.removeEventListener("add_field_to_designer",this.addFieldToDesigner),document.removeEventListener("element_click",this.triggerFieldFocus)},methods:{itemAdded(e){let o=e.added.element;if(this.keyToUpdateComponnets++,!o.hasOwnProperty("rows"))return;o.elementWidth=100,o.is_stcky_group=!1,o.right_border=!!this.isPanelSection,o.bottom_border=!!this.isPanelSection,o.is_panel_section_group=this.isPanelSection;let t=[];o.rows.forEach(((e,o)=>{e.forEach(((o,l)=>{o.elementWidth=this.calculateRowColSize(e.length),t.push(o)}))})),o.rows=[],o.rows=t,this.formLayout.pop(),(0,Ee.s_)(this.docType)&&"tax_details"==o.name&&(this.filterFieldsForInvoices(o),this.adjustFieldsForInvoices(o)),this.formLayout.push(o)},filterFieldsForInvoices(e){for(let[o,t]of e.rows.entries())if(Ke.kC.amountGroup1.includes(t.field_name)){e.rows.splice(o,0,Re.q.data().AMOUNT_BUTTONS_PANEL);break}for(let[o,t]of e.rows.entries())if(Ke.kC.aditionalAmountFields.includes(t.field_name)){e.rows.splice(o,0,Re.q.data().ADITIONAL_AMOUNT_BUTTONS_PANEL);break}},adjustFieldsForInvoices(e){for(let[o,t]of e.rows.entries())Ke.kC.amountPanelField.includes(t.field_name)?t.elementWidth=Math.round(this.calculateRowColSize(Ke.kC.amountGroup1.length)):Ke.kC.aditionalAmountFields.includes(t.field_name)&&(t.elementWidth=Math.round(this.calculateRowColSize(Ke.kC.additionalAmountInRow)))},calculateRowColSize(e){return e>1?100/e:100},addGroup(){const e={fieldType:Ke.oh.GROUP,name:"group_"+(0,Ne.Z)(),title:"",group_key:"",is_panel_section_group:this.isPanelSection,elementWidth:100,right_border:!!this.isPanelSection,bottom_border:!!this.isPanelSection,is_stcky_group:!1,short_cut_key_1:"",short_cut_key_2:"",rows:[]};this.formLayout.push(e),this.formBuilderConfigModel[e.name]=e},deleteSection(e){this.activeTab="form_elements",this.activeFieldName="",this.$nextTick((function(){this.formLayout.splice(e,1),this.reRenderOnGroupChange++}))},moveGroupUp(e,o){if(0==o)return;const t=o-1,l=JSON.parse(JSON.stringify(this.formLayout[o]));this.formLayout.splice(o,1),this.formLayout.splice(t,0,l),this.reRenderOnGroupChange++,this.$nextTick((function(){let e="div-"+t;document.getElementById(e).scrollIntoView()}))},moveGroupDown(e,o){if(this.formLayout.length==o)return;const t=o+1,l=JSON.parse(JSON.stringify(this.formLayout[o]));this.formLayout.splice(o,1),this.formLayout.splice(o+1,0,l),this.reRenderOnGroupChange++,this.$nextTick((function(){let e="div-"+t;document.getElementById(e).scrollIntoView()}))},removeField(e,o){if(e.stopPropagation(),this.formBuilderConfigModel[this.activeFieldName]&&this.formBuilderConfigModel[this.activeFieldName].isDefaultField)for(let t of this.defaultFields)if(t.name===this.activeFieldName){t.isAlreadyAdded=!1;break}this.formLayout[o].rows=this.formLayout[o].rows.filter((e=>e.name!==this.activeFieldName)),this.removeChildElements(this.formBuilderConfigModel[this.activeFieldName]),delete this.formBuilderConfigModel[this.activeFieldName],delete this.formBuilderModel[this.activeFieldName],this.activeFieldName="",this.activeTab="form_elements"},removeChildElements(e){try{if(!e.hasOwnProperty("child_elements")||!Array.isArray(e.child_elements))return;for(let[o,t]of Object.entries(e.child_elements)){const e=t;delete this.formBuilderConfigModel[e.name],delete this.formBuilderModel[e.name]}}catch(o){}},getElementBorder(e){let o="";return this.formBuilderConfigModel.hasOwnProperty(e.name)?(o=this.formBuilderConfigModel[e.name].right_border?" border-right":"",o+=this.formBuilderConfigModel[e.name].bottom_border?" border-bottom":"",o):(o=e.right_border?" border-right":"",o+=e.bottom_border?" border-bottom":"",o)},triggerFieldFocus(e){this.inputClicked(e.detail)},inputClicked(e){this.activeTab="element_properties",this.activeFieldName=e,Ke.oh.TABLE_OF_CHECKBOXES!==this.formBuilderConfigModel[e].fieldType&&Ke.oh.EXPORT_BUTTON!==this.formBuilderConfigModel[e].fieldType&&(this.setTrOcrModeld(e),this.allowAreaSelection&&this.showConnectionFromField(e))},setTrOcrModeld(e){this.formBuilderConfigModel[e].hasOwnProperty("tr_ocr_model_id")||(this.formBuilderConfigModel[e].tr_ocr_model_id="")},inputValueChanges(e,o){Ke.oh.TABLE_OF_CHECKBOXES===o?this.$emit("showConnectionFromField",e):"checkbox"===o&&this.inputClicked(e),setTimeout((()=>{this.formBuilderModel[e].formatted_value=!1}),50)},updateModel(e,o=!1){if(this.formBuilderConfigModel[e.name]=JSON.parse(JSON.stringify(e)),e.fieldType===Ke.oh.HORIZONTAL_SEPARATOR&&(e.hasOwnProperty("space_from_top")||e.hasOwnProperty("space_from_bottom")||(this.formBuilderConfigModel[e.name].space_from_top="q-mt-lg",this.formBuilderConfigModel[e.name].space_from_bottom="")),e.fieldType===Ke.oh.EXTRACTED_TABLE&&(this.formBuilderModel[e.name]=JSON.parse(JSON.stringify(e))),e.fieldType===Ke.oh.AI_EXTRACTED_TABLE&&(this.formBuilderModel[e.name]=JSON.parse(JSON.stringify(e))),e.fieldType!==Ke.oh.TABLE_OF_CHECKBOXES){if(this.formBuilderModel[e.name]=[],this.formBuilderModel[e.name].page="",this.formBuilderModel[e.name].color="",this.formBuilderModel[e.name].score="",this.formBuilderModel[e.name].coords=[],this.formBuilderModel[e.name].confidence="",e.fieldType===Ke.oh.MULTI_CHECK_BOX?(this.formBuilderModel[e.name].groupList=[],this.formBuilderModel[e.name].value="",this.formBuilderModel[e.name].formatted_value=""):e.fieldType===Ke.oh.CHECK_BOX?(this.formBuilderModel[e.name].value=!1,this.formBuilderModel[e.name].formatted_value=!1,this.formBuilderConfigModel[e.name].hasOwnProperty("field_group")||(this.formBuilderConfigModel[e.name]["field_group"]=""),this.formBuilderConfigModel[e.name].hasOwnProperty("field_threshold")||(this.formBuilderConfigModel[e.name]["field_threshold"]=""),this.formBuilderConfigModel[e.name].hasOwnProperty("run_script_on_change")||(this.formBuilderConfigModel[e.name]["run_script_on_change"]=!1),this.formBuilderConfigModel[e.name].hasOwnProperty("tabIndex")||(this.formBuilderConfigModel[e.name]["tabIndex"]=0)):(this.formBuilderModel[e.name].value="",this.formBuilderModel[e.name].formatted_value="",this.formBuilderConfigModel[e.name].is_textarea=!!this.formBuilderConfigModel[e.name].is_textarea,this.formBuilderConfigModel[e.name].run_script_on_change=!!this.formBuilderConfigModel[e.name].run_script_on_change),this.formBuilderConfigModel[e.name].hasOwnProperty("tabIndex")||(this.formBuilderConfigModel[e.name].tabIndex=0),e.isDefaultField)for(let o of this.defaultFields)if(o.name===e.name){o.isAlreadyAdded=!0;break}o||(this.renderChildElements(e.name),this.activeFieldName=e.name)}else this.formBuilderConfigModel[e.name].tableBodyRows.forEach(((e,o)=>{e.forEach(((e,o)=>{e.hasOwnProperty("field_group")||(e["field_group"]=""),e.hasOwnProperty("field_threshold")||(e["field_threshold"]=""),e.hasOwnProperty("run_script_on_change")||(e["run_script_on_change"]=!1),e.hasOwnProperty("tabIndex")||(e["tabIndex"]=0),this.formBuilderModel[e.name]=JSON.parse(JSON.stringify(e)),this.formBuilderConfigModel[e.name]=JSON.parse(JSON.stringify(e))}))}))},applyFuzzySearch(e){return null},markTableColumns(e){this.$emit("markTableColumns",e)},showConnectionFromField(e){Ke.P8.includes(this.formBuilderConfigModel[e].fieldType)&&this.$emit("showConnectionFromField",e)},addTableRow(e){let o=JSON.parse(JSON.stringify(Ke.Ng));for(let t of o)t.name="checkbox_"+(0,Ne.Z)(),t.formatted_value=!1,t.value=!1,t.fieldType=Ke.oh.CHECK_BOX,this.formBuilderConfigModel[t.name]=[],this.formBuilderConfigModel[t.name]=JSON.parse(JSON.stringify(t)),this.formBuilderModel[t.name]=[],this.formBuilderModel[t.name].page="",this.formBuilderModel[t.name].color="",this.formBuilderModel[t.name].score="",this.formBuilderModel[t.name].coords=[],this.formBuilderModel[t.name].value=!1,this.formBuilderModel[t.name].confidence="",this.formBuilderModel[t.name].formatted_value=!1;this.formBuilderConfigModel[e].tableBodyRows.push(o)},addTableColumn(e){for(let o of this.formBuilderConfigModel[e].tableBodyRows){let e={isLabelArea:!1,isDisabled:!1,name:(0,Ne.Z)()};o.push(e)}for(let o of this.formBuilderConfigModel[e].tableHeaderRows)o.push("C")}},setup(){const e=(0,te.nc)(),{docType:o,showImages:t,activeTab:l,formLayout:i,defaultFields:s,formBuilderModel:a,formBuilderConfigModel:d,activeFieldName:n,keyToUpdateComponnets:r,renderComponent:m,formLayoutImages:c,isExtenedPanel:u,allowAreaSelection:h}=(0,Z.Jk)(e),{getElementWidth:p,renderChildElements:g}=e;return{renderChildElements:g,docType:o,activeTab:l,showImages:t,formLayout:i,defaultFields:s,activeFieldName:n,renderComponent:m,formBuilderModel:a,formLayoutImages:c,keyToUpdateComponnets:r,formBuilderConfigModel:d,allowAreaSelection:h,isExtenedPanel:u,getElementWidth:p}}});var eo=t(23175),oo=t(13119),to=t(18149);const lo=(0,ae.Z)(je,[["render",Fe],["__scopeId","data-v-43a5c844"]]),io=lo;ue()(je,"components",{QIcon:re.Z,QTooltip:me.Z,QToggle:eo.Z,QInput:oo.Z,QBtn:de.Z,QField:to.Z});const so={key:0,class:"full-width"},ao={class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm cursor-pointer mt-5 border-radius-5px"},no={class:"row"},ro=["src"],mo={class:""};function co(e,o,t,s,a,d){const n=(0,l.up)("draggable");return e.filteredFields.length>0?((0,l.wg)(),(0,l.iD)("div",so,[(0,l.Wm)(n,{list:e.filteredFields,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{item:(0,l.w5)((({element:e})=>[(0,l._)("div",ao,[(0,l._)("div",no,[(0,l._)("img",{src:e.icon,width:"14",class:"q-mr-sm"},null,8,ro),(0,l._)("div",mo,(0,i.zw)(e.text),1)])])])),_:1},8,["list"])])):(0,l.kq)("",!0)}var uo=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{n(l.next(e))}catch(o){s(o)}}function d(e){try{n(l["throw"](e))}catch(o){s(o)}}function n(e){e.done?t(e.value):i(e.value).then(a,d)}n((l=l.apply(e,o||[])).next())}))};const ho=(0,l.aZ)({name:"Elements",components:{draggable:Oe()},data(){return{tables:(0,ee.iH)(Re.q.data().tables),fields:(0,ee.iH)(Re.q.data().fields),dropElementOptions:Re.q.data().dropElementOptions}},mounted(){this.init()},methods:{init(){this.prepareTables(),this.filteredFields=this.fields.filter((e=>0==e.hide_in_panel_list||void 0==e.hide_in_panel_list))},prepareTables(){return uo(this,void 0,void 0,(function*(){const e=this.$route.params.doc_type;yield this.getDocumentTables(String(this.$route.params.doc_type));for(let[o,t]of Object.entries(this.documentTables))this.tables[0].name=o,this.tables[0].text="Table ("+o+")","INVOICE"==e&&(this.tables[0].fieldType=Ke.oh.LINE_ITEM_TABLE),this.documentTableNames.push(o)}))},checkStopDragCondition(e){}},setup(){const e=(0,te.nc)(),{documentTables:o,documentTableNames:t}=(0,Z.Jk)(e),{getDocumentTables:l}=e;return{documentTables:o,documentTableNames:t,getDocumentTables:l,filteredFields:(0,ee.iH)([])}}}),po=(0,ae.Z)(ho,[["render",co],["__scopeId","data-v-6c00a092"]]),go=po;ue()(ho,"components",{QBtn:de.Z});var fo=t(49341);const _o={class:"full-width"},vo={class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm cursor-pointer mt-5 border-radius-5px"},yo={class:"row"},wo={class:""};function Co(e,o,t,s,a,d){const n=(0,l.up)("q-icon"),r=(0,l.up)("draggable");return(0,l.wg)(),(0,l.iD)("div",_o,[(0,l.Wm)(r,{list:e.defaultGroups,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{item:(0,l.w5)((({element:o})=>[(0,l._)("div",vo,[(0,l._)("div",yo,[(0,l.Wm)(n,{name:"workspaces",size:"sm",class:"q-mr-sm"}),(0,l._)("div",wo,(0,i.zw)(e.getLabelForFormBuilder(o,"pages.screen2a.")),1)])])])),_:1},8,["list"])])}var bo=t(60937);const To=(0,l.aZ)({name:"GroupElements",mixins:[oe.Z,$.Z,bo.Z],components:{draggable:Oe()},data(){return{}},setup(){const e=(0,te.nc)(),{defaultGroups:o}=(0,Z.Jk)(e);return{defaultGroups:o}}}),Bo=(0,ae.Z)(To,[["render",Co],["__scopeId","data-v-bf503f6c"]]),ko=Bo;ue()(To,"components",{QIcon:re.Z,QBtn:de.Z});const Mo={class:"full-width"},xo={class:"full-width"},Io={key:0,class:"col-sm-12 col-md-12 col-lg-12 cursor-pointer q-pa-sm mt-5 border-radius-5px"},Fo={class:"row"},No={class:"width-20px"},Lo=["src"],Oo={class:"width-100-10px"},Eo={class:"full-width"},So={class:"full-width text-grey-6"};function Ao(e,o,t,s,a,d){const n=(0,l.up)("q-input"),r=(0,l.up)("draggable");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",Mo,[(0,l.Wm)(n,{modelValue:e.searchInput,"onUpdate:modelValue":o[0]||(o[0]=o=>e.searchInput=o),class:"q-pt-md q-pb-md",dense:"",autofocus:"",label:e.$t("pages.user.search"),outlined:""},null,8,["modelValue","label"])]),(0,l._)("div",xo,[(0,l.Wm)(r,{list:e.defaultFields,class:"dragArea row",group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"item-key":"name"},{item:(0,l.w5)((({element:e})=>[e.isHidden||!e.isSearched||e.isAlreadyAdded?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Io,[(0,l._)("div",Fo,[(0,l._)("div",No,[(0,l._)("img",{src:e.icon,width:"14"},null,8,Lo)]),(0,l._)("div",Oo,[(0,l._)("div",Eo,(0,i.zw)(e.label),1),(0,l._)("div",So,(0,i.zw)(" ("+e.field_name+")"),1)])])]))])),_:1},8,["list"])])],64)}var qo=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{n(l.next(e))}catch(o){s(o)}}function d(e){try{n(l["throw"](e))}catch(o){s(o)}}function n(e){e.done?t(e.value):i(e.value).then(a,d)}n((l=l.apply(e,o||[])).next())}))};const Do=(0,l.aZ)({name:"DefaultElements",mixins:[oe.Z,$.Z,bo.Z],components:{draggable:Oe()},data(){return{searchInput:""}},watch:{searchInput(e){for(let o of this.defaultFields)""===e||null==e||o.label.toLowerCase().indexOf(e.toLowerCase())>=0?o.isSearched=!0:o.isSearched=!1}},mounted(){this.init()},methods:{init(){return qo(this,void 0,void 0,(function*(){this.hideLoading();try{yield this.loadDocumentDefaultFields(this.$route.params.doc_type)}catch(e){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))}},setup(){const e=(0,te.nc)(),{defaultFields:o}=(0,Z.Jk)(e),{loadDocumentDefaultFields:t}=e;return{defaultFields:o,loadDocumentDefaultFields:t}}}),Vo=(0,ae.Z)(Do,[["render",Ao],["__scopeId","data-v-1d9f8496"]]),Po=Vo;ue()(Do,"components",{QInput:oo.Z,QBtn:de.Z});const Uo=e=>((0,l.dD)("data-v-88fd59c4"),e=e(),(0,l.Cn)(),e),Wo={key:0,class:"row"},zo={key:0,class:"col-12"},Ro={class:"q-ml-md"},Zo={key:1,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},$o={key:2,class:"full-width"},Xo={class:"col-sm-12 col-md-12 col-lg-12"},Ho=Uo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"},null,-1))),Yo={class:"col-sm-12 col-md-12 col-lg-12"},Qo={class:"q-ml-md"},Jo={class:"col-sm-12 col-md-12 col-lg-12"},Go=Uo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"},null,-1))),Ko={class:"col-sm-12 col-md-12 col-lg-12"},jo={class:"q-ml-md"},et={class:"col-sm-12 col-md-12 col-lg-12"},ot=Uo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"},null,-1))),tt={class:"col-sm-12 col-md-12 col-lg-12"},lt={class:"q-ml-md"},it={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},st=Uo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Pleae Define ShotCut For group ",-1))),at={class:"row"},dt={class:"col-5 q-pr-sm"},nt={class:"col-5 q-pl-sm"},rt=(0,l.Uk)(" Shortcut already in use. Press shift + k to check existing list. "),mt={class:"col-2 q-pl-sm"},ct={key:3,class:"full-width"},ut={key:0,class:"col-sm-12 col-md-12 col-lg-12"},ht={class:"col-sm-12 col-md-12 col-lg-12"},pt={class:"q-ml-md"},gt={class:"col-sm-12 col-md-12 col-lg-12"},ft={class:"q-ml-md"},_t={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},vt={class:"col-sm-12 col-md-12 col-lg-12"},yt={class:"col-sm-12 col-md-12 col-lg-12"},wt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Ct={class:"col-sm-12 col-md-12 col-lg-12"},bt={class:"col-sm-12 col-md-12 col-lg-12"},Tt={key:1,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Bt={class:"col-sm-12 col-md-12 col-lg-12"},kt={class:"col-sm-12 col-md-12 col-lg-12"},Mt={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},xt={class:"col-sm-12 col-md-12 col-lg-12"},It={class:"col-sm-12 col-md-12 col-lg-12"},Ft={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Nt={class:"col-sm-12 col-md-12 col-lg-12"},Lt={class:"col-sm-12 col-md-12 col-lg-12"},Ot={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Et={class:"col-sm-12 col-md-12 col-lg-12"},St={class:"col-sm-12 col-md-12 col-lg-12"},At={key:5,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},qt=Uo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Tab Index ",-1))),Dt={class:"col-sm-12 col-md-12 col-lg-12"},Vt={key:6,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Pt=Uo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Field Group ",-1))),Ut={class:"col-sm-12 col-md-12 col-lg-12"},Wt={key:7,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},zt=Uo((()=>(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12"}," Field Threshold ",-1))),Rt={class:"col-sm-12 col-md-12 col-lg-12"},Zt={key:8,class:"row q-pt-md"},$t={class:"col-sm-5 col-md-5 col-lg-5 q-pa-sm"},Xt={class:"col-sm-5 col-md-5 col-lg-5 q-pa-sm"},Ht=Uo((()=>(0,l._)("div",{class:"col-sm-2 col-md-2 col-lg-2"},null,-1))),Yt={class:"col-sm-5 col-md-5 col-lg-5 q-pa-sm"},Qt={class:"col-sm-5 col-md-5 col-lg-5 q-pa-sm"},Jt={class:"col-sm-2 col-md-2 col-lg-2"},Gt={class:"col-sm-12 col-md-12 col-lg-12"},Kt={key:9,class:"full-width"},jt={key:1,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},el={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},ol={key:0,class:"col-sm-12 col-md-12 col-lg-12"},tl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},ll={class:"col-sm-12 col-md-12 col-lg-12"},il={class:"col-sm-12 col-md-12 col-lg-12"},sl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},al={class:"col-sm-12 col-md-12 col-lg-12"},dl={class:"col-sm-12 col-md-12 col-lg-12"},nl={key:3,class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"};function rl(e,o,t,s,a,d){const n=(0,l.up)("q-toggle"),r=(0,l.up)("q-select"),m=(0,l.up)("q-tooltip"),c=(0,l.up)("q-icon"),u=(0,l.up)("q-input"),h=(0,l.up)("keyboardShortcutInfoBtn"),p=(0,l.up)("q-btn"),g=(0,l.up)("PropertiesOfTableOfCheckboxes"),f=(0,l.up)("q-checkbox"),_=(0,l.up)("PropertiesOfExtractedTable");return(0,l.wg)(),(0,l.iD)(l.HY,null,[e.activeFieldName?((0,l.wg)(),(0,l.iD)("div",Wo,[e.isRunScriptEnabled()?((0,l.wg)(),(0,l.iD)("div",zo,[(0,l._)("span",Ro,(0,i.zw)(e.$t("run_script_on_change")),1),(0,l.Wm)(n,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].run_script_on_change,"onUpdate:modelValue":o[0]||(o[0]=o=>e.formBuilderConfigModel[e.activeFieldName].run_script_on_change=o),val:"md"},null,8,["modelValue"])])):(0,l.kq)("",!0),e.isButtonType()?((0,l.wg)(),(0,l.iD)("div",Zo,[(0,l.Wm)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].exportType,"onUpdate:modelValue":[o[1]||(o[1]=o=>e.formBuilderConfigModel[e.activeFieldName].exportType=o),o[2]||(o[2]=o=>{e.buttonTypeUpdated(o)})],options:e.options,label:"Select Button Type",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.GROUP?((0,l.wg)(),(0,l.iD)("div",$o,[(0,l._)("div",Xo,[Ho,(0,l._)("div",Yo,[(0,l._)("span",Qo,(0,i.zw)(e.$t("is_stcky_group")),1),(0,l.Wm)(n,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].is_stcky_group,"onUpdate:modelValue":o[3]||(o[3]=o=>e.formBuilderConfigModel[e.activeFieldName].is_stcky_group=o),val:"md"},null,8,["modelValue"])])]),(0,l._)("div",Jo,[Go,(0,l._)("div",Ko,[(0,l._)("span",jo,(0,i.zw)(e.$t("active_right_border")),1),(0,l.Wm)(n,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].right_border,"onUpdate:modelValue":o[4]||(o[4]=o=>e.formBuilderConfigModel[e.activeFieldName].right_border=o),val:"md"},null,8,["modelValue"])])]),(0,l._)("div",et,[ot,(0,l._)("div",tt,[(0,l._)("span",lt,(0,i.zw)(e.$t("active_bottom_border")),1),(0,l.Wm)(n,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].bottom_border,"onUpdate:modelValue":o[5]||(o[5]=o=>e.formBuilderConfigModel[e.activeFieldName].bottom_border=o),val:"md"},null,8,["modelValue"])])]),(0,l._)("div",it,[st,(0,l._)("div",at,[(0,l._)("div",dt,[(0,l.Wm)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].short_cut_key_1,"onUpdate:modelValue":[o[6]||(o[6]=o=>e.formBuilderConfigModel[e.activeFieldName].short_cut_key_1=o),o[7]||(o[7]=o=>{e.onShortCutKeyUpdate(e.formBuilderConfigModel[e.activeFieldName].short_cut_key_2)})],options:e.shortCutKeyList,label:"Key 1",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])]),(0,l._)("div",nt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].short_cut_key_2,"onUpdate:modelValue":[o[8]||(o[8]=o=>e.formBuilderConfigModel[e.activeFieldName].short_cut_key_2=o),o[9]||(o[9]=o=>{e.onShortCutKeyUpdate(o)})],class:(0,i.C_)(e.formBuilderConfigModel[e.activeFieldName].error?"column-error-border":"")},{append:(0,l.w5)((()=>[e.formBuilderConfigModel[e.activeFieldName].error?((0,l.wg)(),(0,l.j4)(c,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"bg-red line-error-tooltip"},{default:(0,l.w5)((()=>[e.formBuilderConfigModel[e.activeFieldName].error?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[rt],64)):(0,l.kq)("",!0)])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:1},8,["modelValue","class"])]),(0,l._)("div",mt,[(0,l.Wm)(h)])])])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType!=e.GROUP&&e.formBuilderConfigModel[e.activeFieldName].fieldType!=e.TABLE_OF_CHECKBOXES?((0,l.wg)(),(0,l.iD)("div",ct,[e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT?((0,l.wg)(),(0,l.iD)("div",ut,[(0,l._)("div",ht,[(0,l._)("span",pt,(0,i.zw)(e.$t("display_label_left")),1),(0,l.Wm)(n,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft,"onUpdate:modelValue":o[10]||(o[10]=o=>e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft=o),val:"md"},null,8,["modelValue"])]),(0,l._)("div",gt,[(0,l._)("span",ft,(0,i.zw)(e.$t("is_textarea")),1),(0,l.Wm)(n,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].is_textarea,"onUpdate:modelValue":o[11]||(o[11]=o=>e.formBuilderConfigModel[e.activeFieldName].is_textarea=o),val:"md"},null,8,["modelValue"])])])):(0,l.kq)("",!0),(0,l._)("div",_t,[(0,l._)("div",vt,(0,i.zw)(e.$t("label")),1),(0,l._)("div",yt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].label,"onUpdate:modelValue":o[12]||(o[12]=o=>e.formBuilderConfigModel[e.activeFieldName].label=o),disable:e.formBuilderConfigModel[e.activeFieldName].isDefaultField,onBlur:o[13]||(o[13]=o=>e.updateFieldName(e.activeFieldName))},null,8,["modelValue","disable"])])]),(0,l._)("div",wt,[(0,l._)("div",Ct,(0,i.zw)(e.$t("field_name")),1),(0,l._)("div",bt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].name,"onUpdate:modelValue":o[14]||(o[14]=o=>e.formBuilderConfigModel[e.activeFieldName].name=o),disable:e.formBuilderConfigModel[e.activeFieldName].isDefaultField,onBlur:o[15]||(o[15]=o=>e.onFieldNameFocusLose(e.activeFieldName))},null,8,["modelValue","disable"])])]),e.formBuilderConfigModel[e.activeFieldName].displayLabelOnLeft?((0,l.wg)(),(0,l.iD)("div",Tt,[(0,l._)("div",Bt,(0,i.zw)(e.$t("label_width_percentage")),1),(0,l._)("div",kt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].labelWidth,"onUpdate:modelValue":o[16]||(o[16]=o=>e.formBuilderConfigModel[e.activeFieldName].labelWidth=o),type:"number",rules:[o=>o>=3&&o<=100||e.$t("label_length_between_3_100")]},null,8,["modelValue","rules"])])])):(0,l.kq)("",!0)])):(0,l.kq)("",!0),(0,l._)("div",Mt,[(0,l._)("div",xt,(0,i.zw)(e.$t("element_width_percentage")),1),(0,l._)("div",It,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].elementWidth,"onUpdate:modelValue":[o[17]||(o[17]=o=>e.formBuilderConfigModel[e.activeFieldName].elementWidth=o),o[18]||(o[18]=o=>{e.handleElementWidth(o)})],disable:e.formBuilderConfigModel[e.activeFieldName].fieldType===e.HORIZONTAL_SEPARATOR,type:"number",rules:[o=>o>=3&&o<=100||e.$t("field_length_between_3_100")]},null,8,["modelValue","disable","rules"])])]),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.HORIZONTAL_SEPARATOR?((0,l.wg)(),(0,l.iD)(l.HY,{key:4},[(0,l._)("div",Ft,[(0,l._)("div",Nt,(0,i.zw)(e.$t("space_from_top")),1),(0,l._)("div",Lt,[(0,l.Wm)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].space_from_top,"onUpdate:modelValue":o[19]||(o[19]=o=>e.formBuilderConfigModel[e.activeFieldName].space_from_top=o),options:e.spaceFromTopList,label:e.$t("space_from_top"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])]),(0,l._)("div",Ot,[(0,l._)("div",Et,(0,i.zw)(e.$t("space_from_bottom")),1),(0,l._)("div",St,[(0,l.Wm)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].space_from_bottom,"onUpdate:modelValue":o[20]||(o[20]=o=>e.formBuilderConfigModel[e.activeFieldName].space_from_bottom=o),options:e.spaceFromBottomList,label:e.$t("space_from_bottom"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])])],64)):(0,l.kq)("",!0),e.renderTabIndexField()?((0,l.wg)(),(0,l.iD)("div",At,[qt,(0,l._)("div",Dt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tabIndex,"onUpdate:modelValue":o[21]||(o[21]=o=>e.formBuilderConfigModel[e.activeFieldName].tabIndex=o),type:"number"},null,8,["modelValue"])])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.CHECK_BOX?((0,l.wg)(),(0,l.iD)("div",Vt,[Pt,(0,l._)("div",Ut,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].field_group,"onUpdate:modelValue":o[22]||(o[22]=o=>e.formBuilderConfigModel[e.activeFieldName].field_group=o)},null,8,["modelValue"])])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.CHECK_BOX?((0,l.wg)(),(0,l.iD)("div",Wt,[zt,(0,l._)("div",Rt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].field_threshold,"onUpdate:modelValue":o[23]||(o[23]=o=>e.formBuilderConfigModel[e.activeFieldName].field_threshold=o)},null,8,["modelValue"])])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.MULTI_CHECK_BOX?((0,l.wg)(),(0,l.iD)("div",Zt,[(0,l._)("div",$t,(0,i.zw)(e.$t("label")),1),(0,l._)("div",Xt,(0,i.zw)(e.$t("value")),1),Ht,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.formBuilderConfigModel[e.activeFieldName].options,((o,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[(0,l._)("div",Yt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:o.label,"onUpdate:modelValue":e=>o.label=e,onChange:o=>e.setOptionValue(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),(0,l._)("div",Qt,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:o.value,"onUpdate:modelValue":e=>o.value=e,disable:""},null,8,["modelValue","onUpdate:modelValue"])]),(0,l._)("div",Jt,[e.formBuilderConfigModel[e.activeFieldName].options.length>2?((0,l.wg)(),(0,l.j4)(p,{key:0,flat:"",size:"md",color:"primary",icon:"delete",onClick:o=>e.removeOption(t)},null,8,["onClick"])):(0,l.kq)("",!0)])],64)))),128)),(0,l._)("div",Gt,[(0,l.Wm)(p,{flat:"",color:"primary",label:"Add More",icon:"add",onClick:o[24]||(o[24]=o=>e.addOption())})])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TABLE_OF_CHECKBOXES?((0,l.wg)(),(0,l.iD)("div",Kt,[(0,l.Wm)(g,{isColumnMode:e.isColumnMode,rowIndex:e.rowIndex,columnIndex:e.columnIndex},null,8,["isColumnMode","rowIndex","columnIndex"])])):(0,l.kq)("",!0)])):(0,l.kq)("",!0),e.renderModelDropdown()?((0,l.wg)(),(0,l.iD)("div",jt,[(0,l.Wm)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tr_ocr_model_id,"onUpdate:modelValue":[o[25]||(o[25]=o=>e.formBuilderConfigModel[e.activeFieldName].tr_ocr_model_id=o),o[26]||(o[26]=o=>e.onUpdateTROCRModel())],options:e.model_list,label:e.$t("select_ai_type"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])])):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.TEXT_INPUT?((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[(0,l._)("div",el,[(0,l.Wm)(r,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].list_of_values,"onUpdate:modelValue":[o[27]||(o[27]=o=>e.formBuilderConfigModel[e.activeFieldName].list_of_values=o),o[28]||(o[28]=o=>{e.onListOfValueSelect(o)})],options:e.lov_list,label:e.$t("select_list_of_values"),dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])]),e.formBuilderConfigModel[e.activeFieldName].list_of_values?((0,l.wg)(),(0,l.iD)("div",ol,[(0,l.Wm)(f,{label:e.$t("enforce_list_of_values"),modelValue:e.formBuilderConfigModel[e.activeFieldName].enforce_list_of_values,"onUpdate:modelValue":o[29]||(o[29]=o=>e.formBuilderConfigModel[e.activeFieldName].enforce_list_of_values=o),size:"30px",color:"grey-6"},null,8,["label","modelValue"])])):(0,l.kq)("",!0),(0,l._)("div",tl,[(0,l._)("div",ll,(0,i.zw)(e.$t("field_length")),1),(0,l._)("div",il,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].length,"onUpdate:modelValue":o[30]||(o[30]=o=>e.formBuilderConfigModel[e.activeFieldName].length=o),type:"number"},null,8,["modelValue"])])]),(0,l._)("div",sl,[(0,l._)("div",al,(0,i.zw)(e.$t("banned_keywords")),1),(0,l._)("div",dl,[(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].banned_keywords,"onUpdate:modelValue":o[31]||(o[31]=o=>e.formBuilderConfigModel[e.activeFieldName].banned_keywords=o),label:e.$t("comma_seperated_keywords")},null,8,["modelValue","label"])])])],64)):(0,l.kq)("",!0),e.formBuilderConfigModel[e.activeFieldName].fieldType===e.EXTRACTED_TABLE&&e.formBuilderConfigModel[e.activeFieldName].columns?((0,l.wg)(),(0,l.iD)("div",nl,[(0,l.Wm)(_,{columnIndex:e.columnIndex},null,8,["columnIndex"])])):(0,l.kq)("",!0)],64)}var ml=t(26033);const cl=(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12 q-pt-md text-primary"}," Columns Settings ",-1),ul={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},hl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},pl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"};function gl(e,o,t,i,s,a){const d=(0,l.up)("q-select"),n=(0,l.up)("q-toggle");return(0,l.wg)(),(0,l.iD)(l.HY,null,[cl,(0,l._)("div",ul,[(0,l.Wm)(d,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].tr_ocr_model_id,"onUpdate:modelValue":[o[0]||(o[0]=o=>e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].tr_ocr_model_id=o),o[1]||(o[1]=o=>e.onColumnUpdateTROCRModel(e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].col_id,e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].tr_ocr_model_id))],options:e.model_list,label:"KI Model ("+e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].name+")",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])]),(0,l._)("div",hl,[(0,l.Wm)(d,{outlined:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].list_of_values,"onUpdate:modelValue":o[2]||(o[2]=o=>e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].list_of_values=o),options:e.lov_list,label:"list Of values ("+e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].name+")",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options","label"])]),(0,l._)("div",pl,[(0,l.Wm)(n,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].run_script_on_change,"onUpdate:modelValue":o[3]||(o[3]=o=>e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].run_script_on_change=o),val:"md",label:e.$t("run_script_on_change")+" ("+e.formBuilderConfigModel[e.activeFieldName].columns[e.columnIndex].name+")",class:"q-mt-sm"},null,8,["modelValue","label"])])],64)}const fl=(0,l.aZ)({name:"PropertiesOfTableOfCheckboxes",props:{columnIndex:{type:Number,default:0}},data(){return{}},methods:{onColumnUpdateTROCRModel(e,o){const t=(0,R.$)("#col_"+e);t&&(o?t.classList.add("text-primary"):t.classList.remove("text-primary"))}},setup(){const e=(0,te.nc)(),{formLayout:o,activeFieldName:t,formBuilderModel:l,formBuilderConfigModel:i}=(0,Z.Jk)(e),s=(0,te.At)(),{model_list:a}=(0,Z.Jk)(s),d=(0,te.wr)(),{lov_list:n}=(0,Z.Jk)(d);return{lov_list:n,model_list:a,formLayout:o,activeFieldName:t,formBuilderModel:l,formBuilderConfigModel:i}}});var _l=t(32259);const vl=(0,ae.Z)(fl,[["render",gl]]),yl=vl;ue()(fl,"components",{QSelect:_l.Z,QToggle:eo.Z});const wl={class:"col-sm-8 col-md-8 col-lg-8"},Cl={class:"col-sm-4 col-md-4 col-lg-4"},bl={key:1,class:"row q-pt-md"},Tl={class:"col-sm-12 col-md-12 col-lg-12 q-pa-sm mt-5"},Bl={key:0,class:"row"},kl={key:1,class:"row"},Ml={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},xl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Il=(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"}," Tab Index ",-1),Fl={class:"col-sm-12 col-md-12 col-lg-12"},Nl=(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"}," Field Group ",-1),Ll={class:"col-sm-12 col-md-12 col-lg-12"},Ol=(0,l._)("div",{class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"}," Field Threshold ",-1),El={class:"col-sm-12 col-md-12 col-lg-12"},Sl={class:"col-sm-12 col-md-12 col-lg-12 q-pt-md"},Al={class:"col-sm-12 col-md-12 col-lg-12"};function ql(e,o,t,s,a,d){const n=(0,l.up)("q-input"),r=(0,l.up)("q-tooltip"),m=(0,l.up)("q-btn"),c=(0,l.up)("q-toggle"),u=(0,l.up)("q-checkbox");return(0,l.wg)(),(0,l.iD)(l.HY,null,[e.isColumnMode?((0,l.wg)(!0),(0,l.iD)(l.HY,{key:0},(0,l.Ko)(e.formBuilderConfigModel[e.activeFieldName].tableHeaderRows[e.rowIndex],((o,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"row q-pt-md",key:t},[(0,l._)("div",wl,[(0,l.Wm)(n,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableHeaderRows[e.rowIndex][t],"onUpdate:modelValue":o=>e.formBuilderConfigModel[e.activeFieldName].tableHeaderRows[e.rowIndex][t]=o},null,8,["modelValue","onUpdate:modelValue"])]),(0,l._)("div",Cl,[(0,l.Wm)(m,{round:"",color:"primary",icon:"delete",size:"xs",class:"float-right",onClick:o=>e.deleteColumn(t)},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("delete")),1)])),_:1})])),_:2},1032,["onClick"])])])))),128)):(0,l.kq)("",!0),e.isColumnMode?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",bl,[(0,l._)("div",Tl,[e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].isLabelArea?((0,l.wg)(),(0,l.iD)("div",Bl,[(0,l.Wm)(n,{class:"full-width",outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].label,"onUpdate:modelValue":o[0]||(o[0]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].label=o)},null,8,["modelValue"])])):((0,l.wg)(),(0,l.iD)("div",kl,[(0,l._)("div",Ml,[(0,l.Wm)(c,{size:"md",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].run_script_on_change,"onUpdate:modelValue":o[1]||(o[1]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].run_script_on_change=o),val:"md",label:e.$t("run_script_on_change")},null,8,["modelValue","label"])]),(0,l._)("div",xl,[(0,l.Wm)(u,{modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].isDisabled,"onUpdate:modelValue":o[2]||(o[2]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].isDisabled=o),label:"is Disabled ?"},null,8,["modelValue"])]),Il,(0,l._)("div",Fl,[(0,l.Wm)(n,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].tabIndex,"onUpdate:modelValue":o[3]||(o[3]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].tabIndex=o),type:"number"},null,8,["modelValue"])]),Nl,(0,l._)("div",Ll,[(0,l.Wm)(n,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].field_group,"onUpdate:modelValue":o[4]||(o[4]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].field_group=o)},null,8,["modelValue"])]),Ol,(0,l._)("div",El,[(0,l.Wm)(n,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].field_threshold,"onUpdate:modelValue":o[5]||(o[5]=o=>e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].field_threshold=o)},null,8,["modelValue"])]),(0,l._)("div",Sl,(0,i.zw)(e.$t("name")),1),(0,l._)("div",Al,[(0,l.Wm)(n,{outlined:"",dense:"",modelValue:e.formBuilderConfigModel[e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].name].name,"onUpdate:modelValue":o[6]||(o[6]=o=>e.formBuilderConfigModel[e.formBuilderConfigModel[e.activeFieldName].tableBodyRows[e.rowIndex][e.columnIndex].name].name=o),onBlur:o[7]||(o[7]=o=>e.onInputFocusLose(e.rowIndex,e.columnIndex))},null,8,["modelValue"])])]))])]))],64)}const Dl=(0,l.aZ)({name:"PropertiesOfTableOfCheckboxes",props:{rowIndex:{type:Number,default:0},columnIndex:{type:Number,default:0},isColumnMode:{type:Boolean,default:!1}},data(){return{}},methods:{onInputFocusLose(e,o){const t=this.formBuilderConfigModel[this.activeFieldName].tableBodyRows[this.rowIndex][this.columnIndex].name,l=this.formBuilderConfigModel[t].name;t!==l&&(this.formBuilderConfigModel[l]=[],this.formBuilderConfigModel[l]=this.formBuilderConfigModel[t],this.formBuilderModel[l]=[],this.formBuilderModel[l]=this.formBuilderModel[t],delete this.formBuilderModel[t],delete this.formBuilderConfigModel[t],this.formBuilderConfigModel[this.activeFieldName].tableBodyRows[e][o].name=l)},deleteColumn(e){this.formBuilderConfigModel[this.activeFieldName].tableHeaderRows[this.rowIndex].tableBodyRows.splice(e,1);for(let o of this.formBuilderConfigModel[this.activeFieldName].tableBodyRows)o.splice(e,1)}},setup(){const e=(0,te.nc)(),{activeFieldName:o,formBuilderModel:t,formBuilderConfigModel:l,formLayout:i}=(0,Z.Jk)(e);return{formLayout:i,activeFieldName:o,formBuilderModel:t,formBuilderConfigModel:l}}});var Vl=t(11221);const Pl=(0,ae.Z)(Dl,[["render",ql]]),Ul=Pl;ue()(Dl,"components",{QInput:oo.Z,QBtn:de.Z,QTooltip:me.Z,QToggle:eo.Z,QCheckbox:Vl.Z});var Wl=t(8435),zl=t(32908);const Rl=(0,l.aZ)({name:"Properties",mixins:[ml.Z,$.Z,Wl.Z],components:{keyboardShortcutInfoBtn:zl.Z,PropertiesOfExtractedTable:yl,PropertiesOfTableOfCheckboxes:Ul},data(){return{rowIndex:(0,ee.iH)(0),columnIndex:(0,ee.iH)(0),isColumnMode:(0,ee.iH)(!0),selectedInput:(0,ee.iH)(""),GROUP:Ke.oh.GROUP,CHECK_BOX:Ke.oh.CHECK_BOX,ENUM_INPUT:Ke.oh.ENUM_INPUT,TEXT_INPUT:Ke.oh.TEXT_INPUT,EXPORT_BUTTON:Ke.oh.EXPORT_BUTTON,PO_MATCH_BUTTON:Ke.oh.PO_MATCH_BUTTON,SAVE_RULES_BUTTON:Ke.oh.SAVE_RULES_BUTTON,AUTO_ACCOUNTING_BUTTON:Ke.oh.AUTO_ACCOUNTING_BUTTON,EXTRACTED_TABLE:Ke.oh.EXTRACTED_TABLE,AI_EXTRACTED_TABLE:Ke.oh.AI_EXTRACTED_TABLE,EXTRACTED_TABLE_TAB_PANELS:Ke.oh.EXTRACTED_TABLE_TAB_PANELS,INVOICE_BUTTONS:Ke.oh.INVOICE_BUTTONS,MULTI_CHECK_BOX:Ke.oh.MULTI_CHECK_BOX,TABLE_OF_CHECKBOXES:Ke.oh.TABLE_OF_CHECKBOXES,HORIZONTAL_SEPARATOR:Ke.oh.HORIZONTAL_SEPARATOR,exiting_shortcut_keys:[]}},watch:{activeFieldName(e,o){e!=o&&(this.rowIndex=0,this.columnIndex=0,this.isColumnMode=!1)}},mounted:function(){window.pp=this,this.getModelList(),this.getLovList(),this.initDefaults(),this.exiting_shortcut_keys=this.fixedShortCutKeyList(),document.addEventListener("load_settings",this.loadSettings),document.addEventListener("load_settings_for_series",this.loadSettingsForSeries)},unmounted:function(){document.removeEventListener("load_settings",this.loadSettings),document.removeEventListener("load_settings_for_series",this.loadSettingsForSeries)},methods:{addOption(){const e={label:"Option",value:"op"};this.formBuilderConfigModel[this.activeFieldName].options.push(e)},removeOption(e){this.formBuilderConfigModel[this.activeFieldName].options.splice(e,1)},setOptionValue(e){this.formBuilderConfigModel[this.activeFieldName].options[e].value=this.stringReplaceWithString(this.formBuilderConfigModel[this.activeFieldName].options[e].label," ","")},loadSettings(e){this.rowIndex=e.detail.rowIndex,this.columnIndex=e.detail.columnIndex,this.isColumnMode=e.detail.isColumnMode},loadSettingsForSeries(e){const o=e.detail;if(o)for(const[t,l]of Object.entries(this.formBuilderConfigModel[this.activeFieldName].columns)){const e=l;if(e.col_id===o){this.columnIndex=+t;break}}},onFieldNameFocusLose(e){const o=this.formBuilderConfigModel[e].name;if(o!==e)if(this.validateField(o)){e:for(const t of this.formLayout)for(let l of t.rows)if(l.name===e){l.name=o;for(const[o,t]of Object.entries(this.formBuilderConfigModel[e]))"name"!==o&&(l[o]=t);break e}this.formBuilderConfigModel[o]={},this.formBuilderConfigModel[o]=JSON.parse(JSON.stringify(this.formBuilderConfigModel[e])),this.formBuilderModel[o]={},this.formBuilderModel[o]=JSON.parse(JSON.stringify(this.formBuilderModel[e])),this.activeFieldName=o,delete this.formBuilderModel[e],delete this.formBuilderConfigModel[e]}else this.formBuilderConfigModel[e].name=e},validateField(e){let o=!0;return""===e||null===e?(o=!1,this.showErrorToast(this.$t("pages.messages.NAME_MANDATORY"))):this.hasWhiteSpace(e)?(o=!1,this.showErrorToast(this.$t("pages.messages.SPACES_NOT_ALLOWED"))):this.checkFirstLetterIsSpecialOrNumber(e)&&(o=!1,this.showErrorToast(this.$t("errors.special_letter_number_not_allowed"))),o},updateFieldName(e){const o=this.stringReplaceWithString(this.formBuilderConfigModel[e].label," ","_");o!==e&&(this.formBuilderConfigModel[e].name=o,this.onFieldNameFocusLose(e))},handleElementWidth(e){e>100?(this.formBuilderConfigModel[this.activeFieldName].elementWidth=100,this.showErrorToast(this.$t("field_length_between_3_100"))):e<3&&(this.formBuilderConfigModel[this.activeFieldName].elementWidth=3,this.showErrorToast(this.$t("field_length_between_3_100")))},renderModelDropdown(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.TEXT_INPUT||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.CHECK_BOX},onUpdateTROCRModel(){var e;const o=(0,R.$)("#"+this.activeFieldName);o&&(null===(e=o.closest(".element_parent"))||void 0===e||e.classList.toggle("text-primary"))},onColumnUpdateTROCRModel(e,o){const t=(0,R.$)("#col_"+e);t&&(o?t.classList.add("text-primary"):t.classList.remove("text-primary"))},renderTabIndexField(){return this.TEXT_INPUT===this.formBuilderConfigModel[this.activeFieldName].fieldType||this.CHECK_BOX===this.formBuilderConfigModel[this.activeFieldName].fieldType||this.MULTI_CHECK_BOX===this.formBuilderConfigModel[this.activeFieldName].fieldType},onShortCutKeyUpdate(e){e&&(e=e.toUpperCase());const o=this.formBuilderConfigModel[this.activeFieldName].short_cut_key_1,t=o.toUpperCase()+e;if(this.formBuilderConfigModel[this.activeFieldName].error=!1,!this.vaidateShortCutKey(t))return this.formBuilderConfigModel[this.activeFieldName].error=!0,void(this.formBuilderConfigModel[this.activeFieldName].short_cut_key_2="");this.formBuilderConfigModel[this.activeFieldName].short_cut_key_2=e.charAt(e.length-1)},vaidateShortCutKey(e){if(!e)return!0;const o=this.isUsedByOther(e);return!0!==o&&-1===this.exiting_shortcut_keys.indexOf(e)},isUsedByOther(e){let o=!1;for(const[t,l]of Object.entries(this.formBuilderConfigModel))"Group"===l.fieldType&&this.activeFieldName!=t&&e===l.short_cut_key_2.toUpperCase()&&(o=!0);return o},initDefaults(){const e=this.formBuilderConfigModel[this.activeFieldName].enforce_list_of_values;e||(this.formBuilderConfigModel[this.activeFieldName].enforce_list_of_values=!1)},onListOfValueSelect(e){e||(this.formBuilderConfigModel[this.activeFieldName].enforce_list_of_values=!1)},isRunScriptEnabled(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.TEXT_INPUT||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.ENUM_INPUT||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.CHECK_BOX},isButtonType(){return this.formBuilderConfigModel[this.activeFieldName].fieldType===this.EXPORT_BUTTON||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.PO_MATCH_BUTTON||this.formBuilderConfigModel[this.activeFieldName].fieldType===this.SAVE_RULES_BUTTON},buttonTypeUpdated(e){"po_match"===e&&(this.formBuilderConfigModel[this.activeFieldName].fieldType=Ke.oh.PO_MATCH_BUTTON),"save_rules"===e&&(this.formBuilderConfigModel[this.activeFieldName].fieldType=Ke.oh.SAVE_RULES_BUTTON)}},setup(){const e=(0,te.nc)(),{activeFieldName:o,formBuilderModel:t,formBuilderConfigModel:l,formLayout:i}=(0,Z.Jk)(e),s=(0,te.At)(),{getModelList:a}=s,{model_list:d}=(0,Z.Jk)(s),n=(0,te.wr)(),{getLovList:r}=n,{lov_list:m}=(0,Z.Jk)(n);return{lov_list:m,getLovList:r,model_list:d,formLayout:i,activeFieldName:o,formBuilderModel:t,formBuilderConfigModel:l,options:[{label:"Export",value:Ee.tl["export"]},{label:"Export mit Sonderwunsch",value:Ee.tl.export_with_sonderwunsche},{label:"PO Match",value:Ee.tl.po_match},{label:"Save Rules",value:Ee.tl.save_rules},{label:"Save",value:Ee.tl.save},{label:"Zurückgeben",value:Ee.tl.reject}],shortCutKeyList:[{label:"Shift",value:"shift"},{label:"Alt",value:"alt"}],spaceFromTopList:[{label:"None",value:""},{label:"Extra Small",value:"q-mt-xs"},{label:"Small",value:"q-mt-sm"},{label:"Medium",value:"q-mt-md"},{label:"Large",value:"q-mt-lg"},{label:"Extra Large",value:"q-mt-xl"}],spaceFromBottomList:[{label:"None",value:""},{label:"Extra Small",value:"q-mb-xs"},{label:"Small",value:"q-mb-sm"},{label:"Medium",value:"q-mb-md"},{label:"Large",value:"q-mb-lg"},{label:"Extra Large",value:"q-mb-xl"}],getModelList:a}}}),Zl=(0,ae.Z)(Rl,[["render",rl],["__scopeId","data-v-88fd59c4"]]),$l=Zl;ue()(Rl,"components",{QToggle:eo.Z,QSelect:_l.Z,QInput:oo.Z,QIcon:re.Z,QTooltip:me.Z,QBtn:de.Z,QCheckbox:Vl.Z});const Xl={class:"form-builder-settings"},Hl={class:"col-12"};function Yl(e,o,t,s,a,d){const n=(0,l.up)("q-tooltip"),r=(0,l.up)("q-icon");return(0,l.wg)(),(0,l.iD)("div",Xl,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.fields,((o,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:"row"},[(0,l._)("div",Hl,[(0,l.Uk)((0,i.zw)(e.$t(o.translation_key))+" time-spent-settings ",1),o.has_help?((0,l.wg)(),(0,l.j4)(r,{key:0,name:"help_outline",onClick:t=>e.scrollToHelpSection(o.help_id),class:"help-sign cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,(0,i.zw)(e.$t(o.help_tooltip_translation_key)),1)])),_:2},1024)])),_:2},1032,["onClick"])):(0,l.kq)("",!0),((0,l.wg)(),(0,l.j4)((0,l.LL)(o.type),{outlined:"","field-name":o.name,modelValue:e.settings[o.name],"onUpdate:modelValue":t=>e.settings[o.name]=t},null,8,["field-name","modelValue","onUpdate:modelValue"]))])])))),128))])}var Ql=t(54632);const Jl={methods:{scrollToHelpSection(e){const o=(0,te.nc)();o.showInHelpSection(),setTimeout((()=>{try{const o=document.getElementById(e);if(!o)return;o.scrollIntoView({behavior:"smooth"})}catch(o){}}),0)}}},Gl=(0,l.aZ)({name:"Properties",mixins:[ml.Z,$.Z,Jl],components:{QCheckbox:Vl.Z,QInput:oo.Z},data(){return{fields:Ql.X}},methods:{},setup(){const e=(0,te.e0)(),{settings:o}=(0,Z.Jk)(e),{setGeneralSettings:t}=e;return{settings:o,setGeneralSettings:t}}}),Kl=(0,ae.Z)(Gl,[["render",Yl]]),jl=Kl;ue()(Gl,"components",{QIcon:re.Z,QTooltip:me.Z,QField:to.Z});var ei=t(99903),oi=t(61957);const ti=e=>((0,l.dD)("data-v-f910449c"),e=e(),(0,l.Cn)(),e),li={class:"image-decorator",ref:"image-area",id:"image_area"},ii={id:"screenshot_container"},si=["src","width"],ai=["onMousedown","onMousemove"],di=["id"],ni=["onClick"],ri=["onClick"],mi=ti((()=>(0,l._)("div",{class:"select-areas--delete_area"},null,-1))),ci=[mi],ui={class:"c-crop--hide_main"},hi=["src","width"];function pi(e,o,t,s,a,d){const n=(0,l.up)("Resizable");return(0,l.wg)(),(0,l.iD)("div",li,[(0,l._)("div",ii,[e.url?((0,l.wg)(),(0,l.iD)("img",{key:0,onLoad:o[0]||(o[0]=(...o)=>e.prepareImageData&&e.prepareImageData(...o)),id:"screenshot",class:"original-image",src:e.url,alt:"Original Image",width:e.width},null,40,si)):(0,l.kq)("",!0),(0,l._)("div",{class:"select-areas--overlay",style:(0,i.j5)({opacity:e.opacityOverlay,position:"absolute",width:e.originImgSize.w+"px",height:e.originImgSize.h+"px",display:"block"})},null,4),(0,l._)("div",{class:"pointer-events-none",id:"draw",style:(0,i.j5)({"background-color":"rgb(0, 0, 0)",opacity:0,position:"absolute",width:e.originImgSize.w+"px",height:e.originImgSize.h+"px"}),onMousedown:o[1]||(o[1]=(...o)=>e.mouseDown&&e.mouseDown(...o)),onMousemove:o[2]||(o[2]=(...o)=>e.mouseMove&&e.mouseMove(...o))},null,36),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.areas,(o=>((0,l.wg)(),(0,l.iD)("div",{key:o.id},[(0,l._)("div",{onMousedown:(0,oi.iM)((t=>e.startMove(o,t)),["stop","prevent"]),onMousemove:t=>e.doMove(o,t)},[(0,l._)("div",{id:"table"==o.areaType?o.connectionId+"_"+o.id+"_rect":o.connectionId+"_rect",class:"select-areas--outline",style:(0,i.j5)({opacity:e.opacityOutline,position:"absolute",cursor:"default",width:o.width+4+"px",height:o.height+4+"px",left:e.areaDisplayPosX(o)-2+"px",top:e.areaDisplayPosY(o)-2+"px","z-index":o.z})},null,12,di),(0,l._)("div",{class:"select-areas--background_area",style:(0,i.j5)({background:`#fff url('${e.url}') -${o.x}px -${o.y}px / ${e.originImgSize.w}px ${e.originImgSize.h}px no-repeat`,position:"absolute",cursor:o.connectionId==e.connectionId?"move":"pointer",width:o.width+"px",height:o.height+"px",left:e.areaDisplayPosX(o)+"px",top:e.areaDisplayPosY(o)+"px","z-index":o.z+2}),onClick:t=>e.changeResizable(o.id)},null,12,ni),"table"==o.areaType&&o.resizable&&o.connectionId==e.connectionId?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"delete-area",style:(0,i.j5)({display:"block",left:e.areaDisplayPosX(o)+o.width+"px",top:e.areaDisplayPosY(o)-25+"px","z-index":o.z+2}),onClick:t=>e.deleteSelected(o.id)},ci,12,ri)):(0,l.kq)("",!0),o.connectionId==e.connectionId?((0,l.wg)(),(0,l.j4)(n,{key:1,item:o,posImg:e.posImg,"pos-correction":e.posCorrection,onStartDrag:e.startDrag,onDoDrag:e.doDrag},null,8,["item","posImg","pos-correction","onStartDrag","onDoDrag"])):(0,l.kq)("",!0)],40,ai)])))),128))]),(0,l._)("div",ui,[(0,l._)("img",{id:"c-crop--hide_img",src:e.url,alt:"",width:e.width},null,8,hi)])],512)}var gi=t(72722),fi=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{n(l.next(e))}catch(o){s(o)}}function d(e){try{n(l["throw"](e))}catch(o){s(o)}}function n(e){e.done?t(e.value):i(e.value).then(a,d)}n((l=l.apply(e,o||[])).next())}))};let _i,vi,yi;const wi=(0,l.aZ)({data(){return{mousedown:!1,originImgSize:{w:0,h:0,r:0},url:this.cropUrl,posImg:{top:0,left:0},areas:[{id:1,x:10,y:10,startX:10,startY:10,width:10,height:10,z:0,connectionId:"",areaType:"input",resizable:!1}],latestAreaItem:{startX:0,startY:0,endX:0,endY:0},scrollLeft:0,scrollTop:0,moveTempX:0,moveTempY:0,moveCurrentX:0,moveCurrentY:0,temp:0,dragdown:!1,move:!1,imageHeight:0,imageWidth:0}},props:{cropUrl:{type:String,default:"https://dev.doc2api.cloudintegration.eu/resource/image/1b90b6d5-63b5-446b-92a4-a60d57dc0edd/1.png"},width:{type:Number,default:1500},opacityOutline:{type:Number,default:.2},opacityOverlay:{type:Number,default:.2},posCorrection:{type:Boolean,default:!0},markedAreasStr:{type:String,default:""},connectionId:{type:String,default:""},allowMultiSelection:{type:Boolean,default:!1}},components:{Resizable:gi.Z},mixins:[$.Z],emits:["restrictDrawing"],watch:{cropUrl(e){this.url=e,setTimeout((()=>{this.setSize()}),200)},markedAreasStr(e){this.prepareDataForAreas()},width(e){return fi(this,void 0,void 0,(function*(){yield this.setSize(),this.prepareImageData()}))}},methods:{areaDisplayPosX(e){return e.x+(this.posCorrection?this.posImg.left:0)},areaDisplayPosY(e){return e.y+(this.posCorrection?this.posImg.top:0)},mousePosX(e){return e.pageX-this.posImg.left},mousePosY(e){return e.pageY-this.posImg.top},setSize(){return fi(this,void 0,void 0,(function*(){if(!this.url)return;let e=yield this.getSize(this.url);this.originImgSize=e}))},getSize(e){let o=this.$el.querySelector("#c-crop--hide_img");return new Promise((t=>{e&&o?(o.onload=function(){const e=_i.getSizeImg(o);t(e)},o.src=e):t({w:0,h:0,r:0})}))},getSizeImg(e){let o=e.width,t=e.height,l=0===o&&0===t?0:o/t;return{w:o,h:t,r:l}},calcPosOfBox(){let e=this.$refs["image-area"];this.scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,this.scrollTop=window.pageYOffset||document.documentElement.scrollTop;let o=e.getBoundingClientRect().top,t=e.getBoundingClientRect().left;this.posImg.top=o+this.scrollTop,this.posImg.left=t+this.scrollLeft},mouseDown(e){this.mousedown=!0;let o=null;if(o=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,0!=this.latestAreaItem.startX&&0!=this.latestAreaItem.startY){let t=this.latestAreaItem.startX,l=this.latestAreaItem.startY,i=e.layerX,s=e.layerY,a=i-t,d=s-l;(a<0||d<0)&&(i=t,s=l,t=e.layerX,l=e.layerY,a=i-t,d=s-l);let n={id:o,x:t,y:l,startX:t,startY:l,width:a,height:d,z:0,connectionId:this.connectionId,areaType:this.allowMultiSelection?"table":"input",resizable:!1};return this.areas.push(n),this.temp=n.id,void(this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})}if(o){let t={id:o,x:this.mousePosX(e),y:this.mousePosY(e),startX:this.mousePosX(e),startY:this.mousePosY(e),width:0,height:0,z:0,connectionId:this.connectionId,areaType:this.allowMultiSelection?"table":"input",resizable:!1};this.areas.push(t),this.temp=t.id,this.latestAreaItem.startX=this.mousePosX(e),this.latestAreaItem.startY=this.mousePosY(e),this.latestAreaItem.endX=0,this.latestAreaItem.endY=0}},mouseMove(e){this.mousedown&&(this.areas.filter((e=>e.id===this.temp)).map((o=>{let t=e.pageX-this.posImg.left,l=e.pageY-this.posImg.top,i=o.startX-t,s=o.startY-l;i<0&&(i*=-1,t-=i),s<0&&(s*=-1,l-=s),o.x=t,o.y=l,o.width=i,o.height=s})),this.latestAreaItem={startX:0,startY:0,endX:0,endY:0})},mouseUp(){this.mousedown=!1,this.areas=this.areas.filter((e=>e.width>=3&&e.height>=3)),this.endMove(),this.endDrag(),this.prepareMarkedAreasList(),this.allowMultiSelection||this.$emit("restrictDrawing")},changeResizable(e){this.areas.filter((o=>o.id===e)).map((e=>{e.resizable=!0,e.z=100})),this.areas.filter((o=>o.id!==e)).map((e=>{e.resizable=!1,e.z=0}))},deleteSelected(e){this.areas=this.areas.filter((o=>o.id!==e)),this.prepareMarkedAreasList()},startDrag(){this.dragdown=!0},doDrag(e,o,t){if(this.dragdown)switch(o){case"w":t.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-t.pageX+this.posImg.left,e.x=t.pageX-this.posImg.left),e.width<10&&(e.x=e.x-10,e.width=e.width+10);break;case"sw":t.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-t.pageX+this.posImg.left,e.x=t.pageX-this.posImg.left),t.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=t.pageY-this.posImg.top-e.y),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"s":t.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=t.pageY-this.posImg.top-e.y),e.height<10&&(e.height=e.height+10);break;case"se":t.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=t.pageX-this.posImg.left-e.x),t.pageY-this.posImg.top<=this.originImgSize.h&&(e.height=t.pageY-this.posImg.top-e.y),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"e":t.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=t.pageX-this.posImg.left-e.x),e.width<10&&(e.x=e.x-10,e.width=e.width+10);break;case"ne":t.pageX-this.posImg.left<=this.originImgSize.w&&(e.width=t.pageX-this.posImg.left-e.x),t.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-t.pageY),e.y=t.pageY-this.posImg.top),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;case"n":t.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-t.pageY),e.y=t.pageY-this.posImg.top),e.height<10&&(e.height=e.height+10);break;case"nw":t.pageY-this.posImg.top>=0&&(e.height=e.height+(e.y+this.posImg.top-t.pageY),e.y=t.pageY-this.posImg.top),t.pageX-this.posImg.left>=0&&(e.width=e.width+e.x-t.pageX+this.posImg.left,e.x=t.pageX-this.posImg.left),e.width<10&&(e.x=e.x-10,e.width=e.width+10),e.height<10&&(e.height=e.height+10);break;default:break}},endDrag(){this.dragdown=!1},startMove(e,o){this.move=!0,e.connectionId==this.connectionId&&(this.moveTempX=o.clientX,this.moveTempY=o.clientY,this.moveCurrentX=e.x,this.moveCurrentY=e.y)},doMove(e,o){if(e.connectionId!=this.connectionId&&this.move){let t=this.moveCurrentX+(o.clientX-this.moveTempX),l=this.moveCurrentY+(o.clientY-this.moveTempY),i=this.originImgSize.w-e.width,s=this.originImgSize.h-e.height;t>0&&l>0&&t<i&&l<s&&(e.x=t,e.y=l)}},endMove(){this.move=!1},creatReactangle(e,o,t,l,i,s){let a=null;if(a=this.areas.length>0?this.areas.slice(-1).pop().id+1:1,a){let d={id:a,x:e,y:o,startX:e,startY:o,width:t,height:l,z:0,connectionId:i,areaType:s,resizable:!1};this.areas.push(d),this.temp=d.id}},prepareImageData(){yi=(0,R.$)("#screenshot"),yi&&(this.imageWidth=yi.offsetWidth,this.imageHeight=yi.offsetHeight,this.prepareDataForAreas())},prepareDataForAreas(){this.areas=[];let e=[];this.markedAreasList&&this.markedAreasList.length>0&&Array.from(this.markedAreasList).forEach((o=>{e=o.markedArea.split(",");let t=Math.round(this.imageWidth*e[0]),l=Math.round(this.imageHeight*e[1]),i=Math.round(this.imageWidth*e[2]),s=Math.round(this.imageHeight*e[3]),a=i-t,d=s-l;a<0&&(a*=-1,t-=a),d<0&&(d*=-1,l-=d),this.creatReactangle(t,l,a,d,o.connectionId,o.areaType)}))},getTableAreaAsString(e,o,t,l){let i=e/this.imageWidth,s=o/this.imageHeight,a=t/this.imageWidth,d=l/this.imageHeight;return i.toString()+","+s.toString()+","+a.toString()+","+d.toString()},prepareMarkedAreasList(){this.markedAreasList=[],Array.from(this.areas).forEach((e=>{let o=e.width+e.x,t=e.height+e.y;this.markedAreasList.push(Object.assign({},{markedArea:this.getTableAreaAsString(e.x,e.y,o,t),connectionId:e.connectionId,areaType:e.areaType}))}))},calculateLeftPosition(e){let o=this.areaDisplayPosX(e)+e.width;return o+50>=this.imageWidth&&(o=this.areaDisplayPosX(e)-60),o+"px"},calculatePositionFromTop(e){let o=this.areaDisplayPosY(e)-25;return o<0&&(o=this.areaDisplayPosY(e)),o+"px"}},mounted(){_i=this,this.setSize(),vi=(0,R.$)("#image_area"),this.calcPosOfBox(),vi.addEventListener("mousemove",this.calcPosOfBox),vi.addEventListener("scroll",this.calcPosOfBox),vi.addEventListener("mouseup",this.mouseUp)},unmounted:function(){vi.removeEventListener("mousemove",this.calcPosOfBox),vi.removeEventListener("scroll",this.calcPosOfBox),vi.removeEventListener("mouseup",this.mouseUp)},setup(){const e=(0,te.nc)(),{markedAreasList:o}=(0,Z.Jk)(e);return{markedAreasList:o}}}),Ci=(0,ae.Z)(wi,[["render",pi],["__scopeId","data-v-f910449c"]]),bi=Ci;var Ti=t(37446),Bi=t(77607),ki=t(19302),Mi=t(65054);const xi=(0,l._)("h5",{id:"start-help"},"Layout Builder Help",-1),Ii=(0,l._)("h5",{id:"diable-extraction-confirmation-box"},"Disable Extraction Confirmation Box",-1),Fi=(0,l._)("h5",{id:"time-spent-settings"},"Time spent on validation ",-1);function Ni(e,o,t,s,a,d){const n=(0,l.up)("q-tooltip"),r=(0,l.up)("q-img"),m=(0,l.up)("q-btn"),c=(0,l.up)("q-banner"),u=(0,l.up)("q-popup-proxy"),h=(0,l.up)("q-icon");return(0,l.wg)(),(0,l.j4)(h,{class:"q-ma-sm",size:"sm",name:"help"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("page_number_text")),1)])),_:1}),(0,l.Wm)(u,{modelValue:e.show_help,"onUpdate:modelValue":o[1]||(o[1]=o=>e.show_help=o),class:"z-index-100000"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"row width-600"},{default:(0,l.w5)((()=>[xi,Ii,(0,l._)("div",null,[(0,l.Wm)(r,{src:"help/confirmation-extraction-box.png",width:"500px"})]),Fi,(0,l._)("div",null,[(0,l.Wm)(r,{src:"help/time-spent.png",width:"500px"})]),(0,l.Wm)(m,{class:"q-mt-lg",flat:"",color:"primary",onClick:o[0]||(o[0]=o=>e.scrollToHelpSection("start-help")),label:"Go to the top"})])),_:1})])),_:1},8,["modelValue"])])),_:1})}const Li=(0,l.aZ)({el:"#app",mixins:[Jl],components:{},props:{},data(){return{}},methods:{},setup(){const e=(0,te.nc)(),{show_help:o}=(0,Z.Jk)(e);return{show_help:o}}});var Oi=t(52765),Ei=t(47128),Si=t(70335);const Ai=(0,ae.Z)(Li,[["render",Ni]]),qi=Ai;ue()(Li,"components",{QIcon:re.Z,QTooltip:me.Z,QPopupProxy:Oi.Z,QBanner:Ei.Z,QImg:Si.Z,QBtn:de.Z});var Di=t(31921),Vi=function(e,o,t,l){function i(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{n(l.next(e))}catch(o){s(o)}}function d(e){try{n(l["throw"](e))}catch(o){s(o)}}function n(e){e.done?t(e.value):i(e.value).then(a,d)}n((l=l.apply(e,o||[])).next())}))};const Pi=(0,l.aZ)({el:"#main",mixins:[oe.Z,$.Z,Bi.Z,ml.Z],components:{DefaultElements:Po,FieldsDesigner:io,DefaultGroups:ko,Properties:$l,Elements:go,ImportPdf:pe,ImageComponent:bi,GeneralSettings:jl,helpLayoutbuilder:qi,Loader:Di.Z},watch:{$route(e,o){this.renderComponent=!1,this.isFormBuilderMode=!1,this.defaultFields=[],this.formBuilderModel=[],this.formBuilderConfigModel=[],this.handleScroll(),this.showImages=!1,this.activeTab="form_elements",this.activeFieldName=""},isExtenedPanel(e){this.disableEnablePanel()}},data(){return{imageIndex:0,templateId:(0,ee.iH)(""),subDocType:(0,ee.iH)(""),baseUrl:"",page:(0,ee.iH)(1),imageHeight:0,imageWidth:200,connectionId:"",componentType:"input",keyImageChange:(0,ee.iH)(0),splitterModel:(0,ee.iH)(60),formSplitterModel:(0,ee.iH)(50),showJsonForm:(0,ee.iH)(!1),strFormLayout:(0,ee.iH)(""),showPanel:(0,ee.iH)(!1),markedAreasStr:"",allowMultiSelection:!1,language_origin:(0,ee.iH)("")}},mounted:function(){window.fm=this,this.renderComponent=!0,this.isFormBuilderMode=!0,this.formBuilderModel=[],this.formBuilderConfigModel=[],this.docType=this.$route.params.doc_type,this.templateId=this.$route.params.id,this.setSubDocType(),this.baseUrl=String("https://dev.api.docbits.com"),this.prepareLanguageOriginList(),this.templateId?this.init():(this.formLayout=[],this.formLayoutImages=[],this.saveTemplate(!0)),window.addEventListener("keydown",(e=>{"Escape"===e.key&&(this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing())})),setTimeout((()=>{const e=(0,R.$)(".handle-scroll");e&&e.addEventListener("scroll",this.handleScroll);const o=(0,R.$)("#field_scrolle");o&&o.addEventListener("scroll",this.handleScroll)}),1e3)},unmounted:function(){const e=(0,R.$)(".handle-scroll");e&&e.removeEventListener("scroll",this.handleScroll);const o=(0,R.$)("#field_scrolle");o&&o.removeEventListener("scroll",this.handleScroll)},methods:{init(){return Vi(this,void 0,void 0,(function*(){this.formLayout=[],this.templateId=this.$route.params.id,this.templateId&&(yield this.loadLayoutTemplateById(),this.initImage(),this.prepareRectangles())}))},loadLayoutTemplateById(){return Vi(this,void 0,void 0,(function*(){let e;try{this.showLoading(),e=yield fo.l_.getDocumentLayoutTemplateById(this.templateId),this.language_origin=e.doc_origin;let o=JSON.parse(e.layout_json);this.showImages=!1,o&&(this.formLayout=o.hasOwnProperty("layout")?o.layout:[],o.hasOwnProperty("images")&&o.images.length>0&&(this.formLayoutImages=o.images,this.showImages=!0),this.proximityTokens=o.proximity_tokens,this.isExtenedPanel=!!o.isExtenedPanelEnabled,this.allowAreaSelection=!e.extraction_type||"FLEX_COORDINATES"!==e.extraction_type,this.setGeneralSettings(o),this.disableEnablePanel())}catch(o){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}this.formLayout&&this.prepareLayoutModel()}))},prepareLayoutModel(){for(const e of this.formLayout)e.fieldType||(e.fieldType=Ke.oh.GROUP),this.formBuilderConfigModel[e.name]=JSON.parse(JSON.stringify(e)),this.formBuilderConfigModel[e.name].rows=[],this.formBuilderConfigModel[e.name].hasOwnProperty("short_cut_key_1")||(this.formBuilderConfigModel[e.name]["short_cut_key_1"]="",this.formBuilderConfigModel[e.name]["short_cut_key_2"]=""),this.formBuilderConfigModel[e.name].hasOwnProperty("is_stcky_group")||(this.formBuilderConfigModel[e.name]["is_stcky_group"]=!1)},initImage(){if(!this.showImages)return;let e=(0,R.$)("#image_container");this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight},setSubDocType(){this.$route.query&&this.$route.query.sub_doc_type&&(this.subDocType=String(this.$route.query.sub_doc_type||""))},zoomOut(){this.imageWidth>200&&(this.imageWidth=this.imageWidth-100)},zoomIn(){this.imageWidth=this.imageWidth+100},loadImageDetails(){this.initImage(),this.showPanel=!0,setTimeout((()=>{this.prepareRectangles()}),100)},loadImage(e,o){o&&this.keyImageChange++,this.saveMarkedAreasOfCurrentPage(),this.imageIndex=e,this.page=e+1,this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.prepareRectangles()},prepareFormBuilderJson(){let e=[];for(let[o,t]of this.formLayout.entries()){this.formBuilderConfigModel.hasOwnProperty(t.name)&&(t.elementWidth=this.formBuilderConfigModel[t.name].elementWidth,t.right_border=this.formBuilderConfigModel[t.name].right_border,t.bottom_border=this.formBuilderConfigModel[t.name].bottom_border,t.is_stcky_group=this.formBuilderConfigModel[t.name].is_stcky_group,t.short_cut_key_1=this.formBuilderConfigModel[t.name].short_cut_key_1,t.short_cut_key_2=this.formBuilderConfigModel[t.name].short_cut_key_2,t.is_panel_section_group=this.formBuilderConfigModel[t.name].is_panel_section_group,t.is_stcky_group&&e.push(o));for(let e of t.rows)Object.assign(e,this.formBuilderConfigModel[e.name])}for(const o of e){const e=this.formLayout[o];this.formLayout.splice(o,1),this.formLayout.unshift(e)}this.$forceUpdate()},getLayoutJsonStr(){const e={layout:this.formLayout,images:this.formLayoutImages,proximity_tokens:this.proximityTokens,isExtenedPanelEnabled:this.isExtenedPanel};return Object.assign(e,this.getGeneralSettingsToSave()),JSON.stringify(e)},copyTemplate(){(0,Mi.Z)(this.getLayoutJsonStr()).then((()=>{this.showSuccessToast("Copied!")}))},openJsonForm(){this.strFormLayout=this.getLayoutJsonStr(),this.showJsonForm=!0},savePastedJson(){if(this.strFormLayout){let e=JSON.parse(this.strFormLayout);this.formLayout=e.hasOwnProperty("layout")?e.layout:[],e.hasOwnProperty("images")&&e.images.length>0&&(this.formLayoutImages=e.images,this.showImages=!0),this.proximityTokens=e.proximity_tokens,this.isExtenedPanel=!!e.isExtenedPanelEnabled,this.setGeneralSettings(e)}this.saveTemplate(!1)},createTemplateAccordingToOrigin(){this.templateId="",this.saveTemplate(!0)},saveTemplate(e,o=!0){return Vi(this,void 0,void 0,(function*(){let t;e&&(this.saveMarkedAreasOfCurrentPage(),this.prepareFormBuilderJson());try{this.showLoading();let e={doc_type_key:this.docType,sub_doc_type_key:this.subDocType||"",title:"form builder",layout_json:this.getLayoutJsonStr()};this.templateId?t=yield fo.l_.updateDocumentLayoutTemplateById(e,this.templateId):(e.doc_origin=this.language_origin,t=yield fo.l_.createDocumentLayoutTemplate(e)),t&&o&&this.showSuccessToast("Template Sucessfully saved"),this.templateId=t.id,this.$forceUpdate(),this.refreshView()}catch(l){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},refreshView(){const e=ei.V.getDetailViewRoute({doc_type_key:this.docType||"",layout_template_id:this.templateId||"",sub_doc_type_key:this.subDocType||""});this.$router.push(e)},removeBordersFromRectangles(){let e=document.body.getElementsByTagName("rect");for(let o of e)o.classList.remove("border")},removeAllConnectionLines(){const e=(0,R.$)("#connection_line");e&&e.remove()},saveMarkedAreasOfCurrentPage(){for(const e of this.documentTableNames)if(this.formBuilderConfigModel.hasOwnProperty(e))for(const o of this.formBuilderConfigModel[e].columns)o.coords=[];for(const e of this.markedAreasList)this.saveMarkedAreas(e.connectionId,e.markedArea,e.areaType)},saveMarkedAreas(e,o,t){let l;e:for(const i of this.formLayout)for(let s of i.rows){if(s.fieldType===Ke.oh.EXTRACTED_TABLE&&"table"===t&&(l=e.split("__"),s.name=l[1])){for(const e of this.formBuilderConfigModel[l[1]].columns)e.col_id==l[0]&&e.coords.push({coord:o,page:this.page});break e}if(Ke.P8.includes(s.fieldType)&&"table"!==t&&(s.fieldType===Ke.oh.TABLE_OF_CHECKBOXES&&this.formBuilderConfigModel[s.name].tableBodyRows.forEach(((t,l)=>{t.forEach(((t,l)=>{if(t.name===e)return t.coords=[],t.page=this.page,void t.coords.push(o)}))})),s.name===e)){this.formBuilderConfigModel[e].page=this.page,this.formBuilderConfigModel[e].coords=[],this.formBuilderConfigModel[e].coords.push(o),s.page=this.page,s.coords=[],s.coords.push(o);break e}}},connect(e,o,t,l){const i=this.getOffset(e),s=this.getOffset(o),a=i.left,d=i.top+i.height/2;let n=s.left+s.width;"checkbox"===this.componentType&&(n+=s.left/2);const r=s.top+s.height/2,m=Math.sqrt((n-a)*(n-a)+(r-d)*(r-d)),c=(a+n)/2-m/2,u=(d+r)/2-l/2,h=Math.atan2(d-r,a-n)*(180/Math.PI);this.removeAllConnectionLines();const p=document.createElement("div");p.setAttribute("id","connection_line"),p.style.cssText="z-index: 102;padding:0px; margin:0px; height:"+l+"px; background-color:"+t+"; line-height:1px; position:absolute; left:"+c+"px; top:"+u+"px; width:"+m+"px; -moz-transform:rotate("+h+"deg); -webkit-transform:rotate("+h+"deg); -o-transform:rotate("+h+"deg); -ms-transform:rotate("+h+"deg); transform:rotate("+h+"deg);",document.body.appendChild(p)},getOffset(e){const o=e.getBoundingClientRect();return{left:o.left+window.pageXOffset,right:o.right+window.pageXOffset,top:o.top+window.pageYOffset,width:o.width||e.offsetWidth,height:o.height||e.offsetHeight}},refreshCanvas(){this.$forceUpdate(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.prepareRectangles()},getElementToConnect(e){return this.componentType=e.getAttribute("child_type"),"checkbox"===this.componentType?e.querySelector(".q-checkbox__bg"):e},markTableColumns(e){this.allowMultiSelection=!0,this.connectionId=e,this.enableDrawing(),this.showNotification("Please Mark Areas against this column")},showConnectionFromField(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.allowMultiSelection=!1,this.connectionId=e;let o=this.getElementToConnect((0,R.$)("#"+e)),t=o.getAttribute("pageno"),l=!1;t&&+t!==this.page&&(l=!0,this.page=+t,this.imageIndex=this.page-1,this.loadImageDetails(),this.$forceUpdate()),o.setAttribute("pageno",this.page.toString()),setTimeout((()=>{let t=(0,R.$)("#"+e+"_rect");t&&(this.scrollInToViewCenter(t),document.documentElement.scrollTop=0),setTimeout((()=>{if(!t){this.componentType=o.getAttribute("child_type");let e="";if("checkbox"===this.componentType)e=o.getAttribute("aria-checked")?"true":"";else{let t=o.querySelector(this.componentType);t&&(e=t.value)}return""!=e?this.showNotification(this.$t("pages.messages.SELECT_AREA_NO_COORDINATES")):this.showNotification(this.$t("pages.messages.SELECT_AREA")),void this.enableDrawing()}this.showConnection(e,t,o)}),50)}),l?400:100)},showConnection(e,o,t){o&&t?(this.drawOverlay(e,o),o.setAttribute("class","border"),this.connect(o,t,"#26a69a",2)):alert(this.$t("pages.messages.NO_MAPPING_AVAILABLE"))},drawOverlay(e,o){var t,l;this.connectionId=e,this.removeExistingConfirmationOverlays();const i=(0,R.$)("#"+e);if(!i)return;let s;this.componentType=i.getAttribute("child_type");let a="";if("checkbox"===this.componentType)a=i.getAttribute("aria-label"),s="Un-Checked","true"===i.getAttribute("aria-checked")&&(s="Checked");else{const o=(0,R.$)("."+e);a=o.innerHTML;const t=i.querySelector(this.componentType);s=t.value}const d=this.getOffset(o),n=document.createElement("div");n.setAttribute("id","confirmation_overlay"),n.style.position="absolute",n.style.zIndex="99999",n.style.left=d.left+"px",n.style.top=(+d.top+ +d.height+6).toString()+"px",n.style.background="#e2e2e2",n.style.color="#898989",n.style.minHeight="80px",n.style.minWidth="100px",n.style.maxWidth="50%",n.style.textAlign="center",n.style.padding="5px 10px 5px 10px",n.style.letterSpacing="1px",n.style.borderRadius="7px",n.style.boxShadow="0 1px 2px rgba(0,0,0,0.07),\n      0 2px 4px rgba(0,0,0,0.07),\n      0 4px 8px rgba(0,0,0,0.07),\n      0 8px 16px rgba(0,0,0,0.07),\n      0 16px 32px rgba(0,0,0,0.07),\n      0 32px 64px rgba(0,0,0,0.07);",n.innerHTML=`<div><b>${s}</b></div><div><b style='font-size: 9px'>${a}</b></div>\n                  <div>\n\n                  <span class='divOverlayWrong'>\n                    <i connectionId='${e}' style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.6em;' class='fa fa-times cursor-pointer'></i>\n                  </span>\n                  <span id='divOverlayCorrect'>\n                    <i style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.5em;' class='fas fa-check cursor-pointer'></i>\n                  </span></div>`,document.body.appendChild(n),null===(t=(0,R.$)("#divOverlayCorrect"))||void 0===t||t.addEventListener("click",(e=>{this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines()}));let r=document.getElementsByClassName("divOverlayWrong");Array.from(r).forEach((e=>{null===e||void 0===e||e.addEventListener("click",(e=>{this.connectionId=e.target.getAttribute("connectionId"),this.connectionId&&(this.initTempFieldDelete(),this.markedAreasStr=JSON.stringify(this.markedAreasList),this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.$forceUpdate(),this.enableDrawing())}))}));try{const e=(0,R.$)("#confirmation_overlay"),o=null===(l=(0,R.$)("#confirmation_overlay"))||void 0===l?void 0:l.clientWidth,t=d.width,i=(+o-+t)/2;e.style.left=+d.left-+i+"px"}catch(m){}},initTempFieldDelete(){this.formBuilderConfigModel[this.connectionId].coords=[],this.markedAreasList=this.markedAreasList.filter((e=>e.connectionId!==this.connectionId))},prepareRectangles(){this.markedAreasList=[];for(const e of this.formLayout)for(let o of e.rows)this.formBuilderConfigModel.hasOwnProperty(o.name)&&(o.fieldType!==Ke.oh.EXTRACTED_TABLE?Ke.P8.includes(o.fieldType)&&(o.fieldType!==Ke.oh.TABLE_OF_CHECKBOXES?!o.coords||o.coords.length<1||this.formBuilderConfigModel.hasOwnProperty(o.name)&&o.page&&o.page==this.page&&this.addMarkedAreaToList(o):this.prepareMarkedAreasForTableOfCheckboxes(o)):this.prepareMarkedAreasForSerieTable(o));this.markedAreasStr=JSON.stringify(this.markedAreasList)},prepareMarkedAreasForTableOfCheckboxes(e){for(let o of this.formBuilderConfigModel[e.name].tableBodyRows)for(let e of o)!e.coords||e.coords.length<1||this.formBuilderConfigModel.hasOwnProperty(e.name)&&e.page&&e.page==this.page&&this.addMarkedAreaToList(e)},prepareMarkedAreasForSerieTable(e){for(const o of this.formBuilderConfigModel[e.name].columns)if(o.coords&&!(o.coords.length<1))for(const t of o.coords)t.page&&t.page==this.page&&this.markedAreasList.push(Object.assign({},{markedArea:t.coord,connectionId:o.col_id+"__"+e.name,areaType:"table"}))},addMarkedAreaToList(e){const o=(0,R.$)("#"+e.name);o&&(o.setAttribute("pageno",e.page),this.markedAreasList.push(Object.assign({},{markedArea:e.coords[0],connectionId:e.name,areaType:"input"})))},handleScroll(){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays()},disableEnablePanel(){this.isExtenedPanel?(this.splitterModel=60,this.showPanel=!0):this.splitterModel=94},enableDrawing(){const e=(0,R.$)("#draw");null===e||void 0===e||e.classList.add("cursor-crosshair"),null===e||void 0===e||e.classList.remove("pointer-events-none")},restrictDrawing(){const e=(0,R.$)("#draw");null===e||void 0===e||e.classList.add("pointer-events-none"),null===e||void 0===e||e.classList.remove("cursor-crosshair")},restoreDefaults(){return Vi(this,void 0,void 0,(function*(){try{if(!this.templateId)return;this.showLoading();const e=yield fo.l_.deleteDocumentLayoutTemplate(this.templateId);if(!1===e.success)throw{message:e.message};this.showSuccessToast(this.$t("pages.messages.OPERATION_SUCESSFULL")),this.templateId="",this.saveTemplate(!0,!1)}catch(e){const o=Ti.w.getErrorMessage(e);this.showErrorToast(o)}finally{this.hideLoading()}}))},prepareLanguageOriginList(){return Vi(this,void 0,void 0,(function*(){yield this.getLanguageOptions(),this.language_origin_list=JSON.parse(JSON.stringify(this.language_origins)),this.language_origin_list[0].label=this.$t("default")}))}},setup(){const e=(0,ki.Z)(),o=(0,te.nc)(),{showImages:t,activeTab:l,isFormBuilderMode:i,keyToUpdateComponnets:s,renderComponent:a,defaultFields:d,formLayout:n,documentTableNames:r,formLayoutImages:m,formBuilderModel:c,formBuilderConfigModel:u,activeFieldName:h,isExtenedPanel:p,proximityTokens:g,docType:f,markedAreasList:_,allowAreaSelection:v}=(0,Z.Jk)(o),y=(0,te.e0)(),{setGeneralSettings:w,getGeneralSettingsToSave:C}=y,b=(0,te.A3)(),{language_origins:T}=(0,Z.Jk)(b),{getLanguageOptions:B}=b,k=(0,te.wX)(),{tokenQueryParam:M}=(0,Z.Jk)(k);return k.getTokenQueryParam(),{getLanguageOptions:B,setGeneralSettings:w,getGeneralSettingsToSave:C,docType:f,activeTab:l,showImages:t,formLayout:n,defaultFields:d,activeFieldName:h,renderComponent:a,formLayoutImages:m,formBuilderModel:c,isFormBuilderMode:i,documentTableNames:r,keyToUpdateComponnets:s,formBuilderConfigModel:u,allowAreaSelection:v,isExtenedPanel:p,proximityTokens:g,markedAreasList:_,language_origins:T,language_origin_list:(0,ee.iH)([]),tokenQueryParam:M,showNotification(o){e.notify({message:o,color:"primary",position:"top"})}}}});var Ui=t(490),Wi=t(76749),zi=t(33115),Ri=t(47817),Zi=t(70900),$i=t(50926),Xi=t(89800),Hi=t(84106),Yi=t(50651),Qi=t(7498),Ji=t(32074),Gi=t(44458),Ki=t(51663),ji=t(81973),es=t(63190),os=t(8326),ts=t(62146);const ls=(0,ae.Z)(Pi,[["render",z],["__scopeId","data-v-1aaec969"]]),is=ls;ue()(Pi,"components",{QBtn:de.Z,QIcon:re.Z,QSelect:_l.Z,QItem:Ui.Z,QItemSection:Wi.Z,QItemLabel:zi.Z,QTooltip:me.Z,QTabs:Ri.Z,QTab:Zi.Z,QSeparator:$i.Z,QTabPanels:Xi.Z,QTabPanel:Hi.Z,QExpansionItem:Yi.Z,QSplitter:Qi.Z,QToggle:eo.Z,QDialog:Ji.Z,QCard:Gi.Z,QToolbar:Ki.Z,QToolbarTitle:ji.Z,QCardSection:es.Z,QForm:os.Z,QInput:oo.Z,QCheckbox:Vl.Z}),ue()(Pi,"directives",{ClosePopup:ts.Z})}}]);