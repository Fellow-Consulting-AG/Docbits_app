"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[7505],{87505:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K});var o=a(61758),s=a(58790);const i=e=>((0,o.Qi)("data-v-ff28ad64"),e=e(),(0,o.jt)(),e),n={key:0,class:"container container-wrapper"},l={class:"row full-width"},c={class:"col-12 q-mt-sm"},u={class:"table-header-text"},d=["data-index"],r={key:0,class:"action-align cursor-default"},p={key:1,class:""},m={key:0},h=["onClick"],g={key:1},_={key:2},k=i((()=>(0,o.Lk)("img",{class:"loading-image",src:"images/loader.gif",alt:"Loading..."},null,-1)));function y(e,t,a,i,y,b){const f=(0,o.g2)("SubHeader"),v=(0,o.g2)("f-btn"),D=(0,o.g2)("BackToSettings"),I=(0,o.g2)("q-icon"),T=(0,o.g2)("q-item-label"),C=(0,o.g2)("q-item-section"),L=(0,o.g2)("q-item"),w=(0,o.g2)("q-select"),A=(0,o.g2)("q-markup-table"),F=(0,o.g2)("q-inner-loading");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(f,{name:"access_controll",label:e.$t("access_control"),display_help_link:!1,onSearch:!1},null,8,["label"]),(0,o.bF)(D,{back_to_rotue:"/settings/roles",label:e.groupName},{default:(0,o.k6)((()=>[(0,o.bF)(v,{class:"float-right q-mr-md",label:e.$t("save"),onClick:e.save},null,8,["label","onClick"])])),_:1},8,["label"]),e.renderDataList?((0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("div",l,[(0,o.Lk)("div",c,[(0,o.bF)(A,{flat:"",class:"dashboard-table-style back-white",id:"access_control_table"},{default:(0,o.k6)((()=>[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",u,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.table_columns,((t,a)=>((0,o.uX)(),(0,o.CE)("th",{key:t.name,"data-index":a},["actions"==t.name?((0,o.uX)(),(0,o.CE)("span",r,(0,s.v_)(e.$t(t.label)),1)):((0,o.uX)(),(0,o.CE)("span",p,(0,s.v_)(e.$t(t.label)),1))],8,d)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.documentList,(t=>((0,o.uX)(),(0,o.CE)("tr",{key:t.id},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.table_columns,(a=>((0,o.uX)(),(0,o.CE)(o.FK,{key:a.name},["all"===a.name?((0,o.uX)(),(0,o.CE)("td",m,[(0,o.Lk)("div",{class:"cursor-pointer color-primary",onClick:a=>e.goToAccessControlDetail(t)},(0,s.v_)(t.title),9,h)])):"access"===a.name?((0,o.uX)(),(0,o.CE)("td",g,[(0,o.bF)(w,{modelValue:e.apiData[e.groupId][t.document_key][a.name],"onUpdate:modelValue":o=>e.apiData[e.groupId][t.document_key][a.name]=o,borderless:"",options:e.accessOptionList,dense:"","emit-value":"","map-options":"","hide-dropdown-icon":""},{option:(0,o.k6)((i=>[(0,o.bF)(L,(0,o.v6)({ref_for:!0},i.itemProps),{default:(0,o.k6)((()=>[(0,o.bF)(C,null,{default:(0,o.k6)((()=>[(0,o.bF)(T,null,{default:(0,o.k6)((()=>[i.opt.value===e.apiData[e.groupId][t.document_key][a.name]?((0,o.uX)(),(0,o.Wv)(I,{key:0,name:"check",class:"q-ml-xs",color:"primary"})):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,s.v_)(i.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["modelValue","onUpdate:modelValue","options"])])):((0,o.uX)(),(0,o.CE)("td",_,[(0,o.bF)(w,{modelValue:e.apiData[e.groupId][t.document_key][a.name],"onUpdate:modelValue":o=>e.apiData[e.groupId][t.document_key][a.name]=o,borderless:"",options:e.listOption,dense:"","emit-value":"","map-options":"","hide-dropdown-icon":""},{option:(0,o.k6)((i=>[(0,o.bF)(L,(0,o.v6)({ref_for:!0},i.itemProps),{default:(0,o.k6)((()=>[(0,o.bF)(C,null,{default:(0,o.k6)((()=>[(0,o.bF)(T,null,{default:(0,o.k6)((()=>[i.opt.value===e.apiData[e.groupId][t.document_key][a.name]?((0,o.uX)(),(0,o.Wv)(I,{key:0,name:"check",class:"q-ml-xs",color:"primary"})):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,s.v_)(i.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["modelValue","onUpdate:modelValue","options"])]))],64)))),128))])))),128))])])),_:1})])])])):(0,o.Q3)("",!0),(0,o.bF)(F,{showing:e.processing},{default:(0,o.k6)((()=>[k])),_:1},8,["showing"])],64)}var b=a(38734),f=a(91236),v=a(60894),D=a(94124),I=a(1659),T=a(11470),C=a(24622),L=a(76956),w=function(e,t,a,o){function s(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,i){function n(e){try{c(o.next(e))}catch(t){i(t)}}function l(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?a(e.value):s(e.value).then(n,l)}c((o=o.apply(e,t||[])).next())}))};const A=(0,o.pM)({el:"#app",mixins:[C.A],components:{SubHeader:f.A,BackToSettings:v.A},mounted(){return w(this,void 0,void 0,(function*(){yield this.init()}))},data(){return{table_columns:[{label:"all",name:"all"},{label:"access",name:"access"},{label:"list",name:"list"},{label:"view",name:"view"},{label:"edit",name:"edit"},{label:"delete",name:"delete"},{label:"mass_update",name:"mass_update"},{label:"first_approval",name:"first_approval"},{label:"second_approval",name:"second_approval"},{label:"unlock_document",name:"unlock_document"}],renderDataList:(0,b.KR)(!1),documentList:[],groupId:this.$route.params.id,groupName:this.$route.params.group_name}},methods:{init(){return w(this,void 0,void 0,(function*(){try{this.processing=!0,yield this.getDocTypes(),yield this.fetchAllDocTypeSettings()}catch(e){}finally{this.renderDataList=!0,this.processing=!1}}))},getDocTypes(){return w(this,void 0,void 0,(function*(){try{const e=yield T.p5.fetchDocTypes();if(!e.success)throw null===e||void 0===e?void 0:e.message;this.documentList=e.data.filter((e=>!L.gh.includes(e.document_key)&&!0===e.is_active))}catch(e){}}))},fetchAllDocTypeSettings(){return w(this,void 0,void 0,(function*(){try{yield this.getAllDocTypeSettings(this.groupId),this.mappedPermissionToDocument(this.documentList)}catch(e){}}))},save(){return w(this,void 0,void 0,(function*(){const e={[this.groupId]:{}};this.documentList.forEach((t=>{e[this.groupId][t.document_key]={access:this.apiData[this.groupId][t.document_key]["access"],list:this.apiData[this.groupId][t.document_key]["list"],view:this.apiData[this.groupId][t.document_key]["view"],edit:this.apiData[this.groupId][t.document_key]["edit"],delete:this.apiData[this.groupId][t.document_key]["delete"],mass_update:this.apiData[this.groupId][t.document_key]["mass_update"],first_approval:this.apiData[this.groupId][t.document_key]["first_approval"],second_approval:this.apiData[this.groupId][t.document_key]["second_approval"],unlock_document:this.apiData[this.groupId][t.document_key]["unlock_document"]}}));try{this.processing=!0;const t=JSON.stringify(e);yield this.updateDocTypeSetting(t),yield this.fetchAllDocTypeSettings(),this.showSuccessToast(this.$t("save_successfully"))}catch(t){this.showErrorToast(this.$t("pages.messages.error_internal_occur"))}finally{this.processing=!1}}))},goToAccessControlDetail(e){const t=e.document_key;this.$router.push(`/settings/access_control/detail/${this.groupName}/${t}/${this.groupId}`)}},setup(){const e=(0,D.H4)(),{accessOptionList:t,listOption:a,processing:o,apiData:s}=(0,I.bP)(e),{getAllDocTypeSettings:i,mappedPermissionToDocument:n,updateDocTypeSetting:l}=e;return{accessOptionList:t,listOption:a,processing:o,getAllDocTypeSettings:i,mappedPermissionToDocument:n,updateDocTypeSetting:l,apiData:s}}});var F=a(12807),S=a(857),E=a(94940),X=a(90124),$=a(25173),q=a(13796),Q=a(50492),x=a(39035),V=a(98582),O=a.n(V);const P=(0,F.A)(A,[["render",y],["__scopeId","data-v-ff28ad64"]]),K=P;O()(A,"components",{QMarkupTable:S.A,QSelect:E.A,QItem:X.A,QItemSection:$.A,QItemLabel:q.A,QIcon:Q.A,QInnerLoading:x.A})}}]);