"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[386],{70386:(e,t,i)=>{i.r(t),i.d(t,{default:()=>W});var l=i(59835),s=i(86970);const a={class:"row justify-center"},o={class:"text-h2 text-primary"},r={class:"q-mt-md row"},u={class:"q-mt-md"};function p(e,t,i,p,n,c){const m=(0,l.up)("q-card-section"),d=(0,l.up)("q-seperator"),h=(0,l.up)("q-input"),g=(0,l.up)("q-select"),k=(0,l.up)("f-btn"),f=(0,l.up)("q-card-actions"),y=(0,l.up)("q-card"),T=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",a,[(0,l.Wm)(y,{style:{width:"1000px","margin-top":"7%"},flat:"",class:"rounded-borders page-background"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"text-center"},{default:(0,l.w5)((()=>[(0,l._)("span",o,(0,s.zw)(e.$t("pages.support.support_ticket")),1)])),_:1}),(0,l.Wm)(d),(0,l.Wm)(m,{class:"q-pa-md"},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l.Wm)(h,{outlined:"",modelValue:e.supportTicket.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.supportTicket.email=t),label:e.$t("email"),style:{width:"48%"}},null,8,["modelValue","label"]),(0,l.Wm)(h,{outlined:"",modelValue:e.supportTicket.fullname,"onUpdate:modelValue":t[1]||(t[1]=t=>e.supportTicket.fullname=t),label:e.$t("name"),style:{width:"30%","margin-left":"1%"}},null,8,["modelValue","label"]),(0,l.Wm)(g,{outlined:"",options:e.priorityOptions,modelValue:e.supportTicket.priority,"onUpdate:modelValue":t[2]||(t[2]=t=>e.supportTicket.priority=t),label:e.$t("priority"),style:{width:"20%","margin-left":"1%"}},null,8,["options","modelValue","label"])]),(0,l._)("div",u,[(0,l.Wm)(h,{outlined:"",modelValue:e.supportTicket.message,"onUpdate:modelValue":t[3]||(t[3]=t=>e.supportTicket.message=t),label:e.$t("pages.support.message"),type:"textarea"},null,8,["modelValue","label"])])])),_:1}),(0,l.Wm)(f,{align:"center",class:"q-pb-md"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(k,{appearance:"cancel",label:e.$t("cancel"),onClick:t[4]||(t[4]=e=>this.$router.go(-1))},null,8,["label"]),[[T]]),(0,l.Wm)(k,{class:"on-right",label:e.$t("pages.support.send"),onClick:e.sendSupportTicket},null,8,["label","onClick"])])),_:1})])),_:1})])}var n=i(79860),c=i(49341),m=i(49990),d=i(70501),h=i(60499),g=i(3833),k=function(e,t,i,l){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function o(e){try{u(l.next(e))}catch(t){a(t)}}function r(e){try{u(l["throw"](e))}catch(t){a(t)}}function u(e){e.done?i(e.value):s(e.value).then(o,r)}u((l=l.apply(e,t||[])).next())}))};const f=(0,l.aZ)({mixins:[d.Z,m.Z],setup(){return{priorityOptions:(0,h.iH)([{label:n.i18n.t("pages.support.very_high"),value:"Very High"},{label:n.i18n.t("pages.support.high"),value:"High"},{label:n.i18n.t("pages.support.medium"),value:"Medium"},{label:n.i18n.t("pages.support.low"),value:"Low"}]),supportTicket:(0,h.iH)({email:"",message:"",priority:{label:n.i18n.t("pages.support.medium"),value:"medium"},fullname:""})}},mounted(){this.autofillmail()},methods:{autofillmail(){let e=g.Z.getItem("user_details");this.supportTicket.email=e.username,this.supportTicket.fullname=e.first_name+" "+e.last_name},checkArrayForEmptyString(){return""===this.supportTicket.email||""===this.supportTicket.message},checkStringIfValidEmail(){return this.supportTicket.email.includes("@")},buildRequestBody(){const e=new FormData;return e.append("customer_email",this.supportTicket.email),e.append("body",this.supportTicket.message),e.append("priority",this.supportTicket.priority.value),e.append("fullname",this.supportTicket.fullname),e},sendSupportTicket(){this.showLoading,this.checkStringIfValidEmail()?this.checkArrayForEmptyString()?this.showErrorToast(this.$t("directscan.fill_all_fields")):(this.makeApiCall(),this.hideLoading):this.showErrorToast(this.$t("pages.messages.INVALID_EMAIL"))},makeApiCall(){return k(this,void 0,void 0,(function*(){const e=this.buildRequestBody();return yield c.yZ.create_ticket(e).then((e=>{this.showSuccessToast(this.$t("success"))})).catch((e=>{e.message.error.includes("customer")?this.showErrorToast(this.$t("no_email_found")+" "+this.supportTicket.email):this.showErrorToast(this.$t("errors.INVALID_AUTHORIZATION_CODE"))}))}))}}});var y=i(7683),T=i(44458),b=i(63190),w=i(13119),_=i(32259),v=i(29420),V=i(22857),Z=i(11821),$=i(62146),q=i(69984),C=i.n(q);const I=(0,y.Z)(f,[["render",p]]),W=I;C()(f,"components",{QCard:T.Z,QCardSection:b.Z,QInput:w.Z,QSelect:_.Z,QFile:v.Z,QIcon:V.Z,QCardActions:Z.Z}),C()(f,"directives",{ClosePopup:$.Z})}}]);