"use strict";(globalThis["webpackChunkfc_ocr_vue"]=globalThis["webpackChunkfc_ocr_vue"]||[]).push([[6814],{48448:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(30052),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__),pinia__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(10321),src_utils_cache__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(28741),src_mixins_toasts__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(77378),vue__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(83673),vue__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(61959),_components_Loader_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(72113),src_utils_helperUtil__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(78564),_components_Tooltip_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(23197),src_utils_lineItemUtil__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(30872),src_utils_documentUtil__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(85985),_mixins_helperMixin_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(45401),src_utils_poActionsUtil__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(37295),src_utils_ColorGenerator__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(55276),src_utils_UserPreferences__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(28239),src_utils_taxFieldsHelper__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(63307),src_components_AIDialGauge_vue__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(56815),src_components_autoTesting_vue__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(5029),src_components_DocumentLock_vue__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(97570),src_utils_dateCalculatedField__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(41838),src_utils_displayFieldLabel__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(91777),src_components_MessageBanner_vue__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(88469),pages_invoice_save_export_vue__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(47253),_components_SelectionPopup_vue__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(35352),src_components_Classification_vue__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(88432),src_pages_import_multi_invoice_vue__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(110),src_utils_amountConversionHelper__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(93426),src_constants_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(41891),quasar_src_composables_use_quasar_js__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(48825),quasar_src_plugins_SessionStorage_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(7153),quasar_src_plugins_Cookies_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(12471),quasar_src_utils_uid_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(11185),quasar_src_utils_date_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(25616),src_utils_viewImages__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(49566),pages_APIs__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(54268),src_pages_FieldValidation_restartClassificationPopup_vue__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(22879),src_formBuilder_form_elements_components_autocomplete_vue__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(37214),src_pages_FieldValidation_masterDataLookup_vue__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(54275),src_utils_doc_type_doc_type_sub_type__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(84474),src_pages_Errors_ErrorDocumentView_vue__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(65864),src_components_document_SplitDocument_vue__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(16839),src_components_document_script_scriptBtn_vue__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(57765),src_utils_pythonDateFormatToJs__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(3340),src_validatior_validation_mixin__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(68925),src_services__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(80579),src_core_acls_index__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(98303),src_utils_date__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(85944),src_store_main__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(60727),src_utils_cacheHelper__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(93033),src_components_DialogDraggable_vue__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(67721),src_pages_FieldValidation_QRFieldsPanel_vue__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(77414),src_pages_ValidationScreen_components_autoAccountingBtn_vue__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(26468),__awaiter=function(e,t,i,s){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function l(e){try{n(s.next(e))}catch(t){a(t)}}function r(e){try{n(s["throw"](e))}catch(t){a(t)}}function n(e){e.done?i(e.value):o(e.value).then(l,r)}n((s=s.apply(e,t||[])).next())}))};let fuzzyMap=new Map,rectangles=[],rectCordinate={startX:0,startY:0,endX:0,endY:0};const marqueeRect={x:0,y:0,width:0,height:0,connectionId:""};let startX=0,startY=0;const $=document.querySelector.bind(document);let screenshot,marquee,boxes,_this;const __WEBPACK_DEFAULT_EXPORT__=(0,vue__WEBPACK_IMPORTED_MODULE_46__.aZ)({el:"#app",mixins:[src_mixins_toasts__WEBPACK_IMPORTED_MODULE_2__.Z,src_utils_helperUtil__WEBPACK_IMPORTED_MODULE_4__.Z,_mixins_helperMixin_js__WEBPACK_IMPORTED_MODULE_8__.Z,src_utils_lineItemUtil__WEBPACK_IMPORTED_MODULE_6__.Z,src_utils_documentUtil__WEBPACK_IMPORTED_MODULE_7__.Z,src_utils_poActionsUtil__WEBPACK_IMPORTED_MODULE_9__.Z,src_utils_ColorGenerator__WEBPACK_IMPORTED_MODULE_10__.Z,src_utils_taxFieldsHelper__WEBPACK_IMPORTED_MODULE_12__.Z,src_utils_cache__WEBPACK_IMPORTED_MODULE_1__.Z,src_utils_displayFieldLabel__WEBPACK_IMPORTED_MODULE_16__.Z,src_utils_amountConversionHelper__WEBPACK_IMPORTED_MODULE_22__.Z,src_utils_doc_type_doc_type_sub_type__WEBPACK_IMPORTED_MODULE_32__.Z,src_utils_pythonDateFormatToJs__WEBPACK_IMPORTED_MODULE_36__.Z,src_utils_date__WEBPACK_IMPORTED_MODULE_40__.Z,src_validatior_validation_mixin__WEBPACK_IMPORTED_MODULE_37__.Z],components:{Loader:_components_Loader_vue__WEBPACK_IMPORTED_MODULE_3__.Z,Tooltip:_components_Tooltip_vue__WEBPACK_IMPORTED_MODULE_5__.Z,AIDialGauge:src_components_AIDialGauge_vue__WEBPACK_IMPORTED_MODULE_13__.Z,autoTesting:src_components_autoTesting_vue__WEBPACK_IMPORTED_MODULE_14__.Z,DocumentLock:src_components_DocumentLock_vue__WEBPACK_IMPORTED_MODULE_15__.Z,MessageBanner:src_components_MessageBanner_vue__WEBPACK_IMPORTED_MODULE_17__.Z,SelectionPopup:_components_SelectionPopup_vue__WEBPACK_IMPORTED_MODULE_19__.Z,Classification:src_components_Classification_vue__WEBPACK_IMPORTED_MODULE_20__.Z,InvoiceSaveExport:pages_invoice_save_export_vue__WEBPACK_IMPORTED_MODULE_18__.Z,ErrorDocumentView:src_pages_Errors_ErrorDocumentView_vue__WEBPACK_IMPORTED_MODULE_33__.Z,restartClassificationPopup:src_pages_FieldValidation_restartClassificationPopup_vue__WEBPACK_IMPORTED_MODULE_29__.Z,ImportMultiInvoice:src_pages_import_multi_invoice_vue__WEBPACK_IMPORTED_MODULE_21__.Z,masterDataLookup:src_pages_FieldValidation_masterDataLookup_vue__WEBPACK_IMPORTED_MODULE_31__.Z,dialogDraggable:src_components_DialogDraggable_vue__WEBPACK_IMPORTED_MODULE_43__.Z,SplitDocument:src_components_document_SplitDocument_vue__WEBPACK_IMPORTED_MODULE_34__.Z,QRFieldsPanel:src_pages_FieldValidation_QRFieldsPanel_vue__WEBPACK_IMPORTED_MODULE_44__.Z,autocomplete:src_formBuilder_form_elements_components_autocomplete_vue__WEBPACK_IMPORTED_MODULE_30__.Z,scriptBtn:src_components_document_script_scriptBtn_vue__WEBPACK_IMPORTED_MODULE_35__.Z,autoAccountingBtn:src_pages_ValidationScreen_components_autoAccountingBtn_vue__WEBPACK_IMPORTED_MODULE_45__.Z},watch:{$route(e,t){if(!e.hasOwnProperty("path")||!t.hasOwnProperty("path"))return;const i=e.path.split("/"),s=t.path.split("/");i.length>2&&s.length>2&&i[1]===s[1]&&this.get_cached_data_id!=this.docId&&window.location.reload()},populate_row_to_view:{handler:function(e,t){0!=e&&this.populateMasterDataFields()}}},data(){return{docId:"",conversionFields:[],contact:this.$t("pages.screen2a.confirm"),showDialog:!1,showExportDialog:!1,imageHeight:0,imageWidth:0,viewBox:"0 0 0 0",textConfirmation:!1,saveInstant:!1,connectionId:"",showArticlePage:!1,loading:!1,enableExportButton:!1,magnifyGlass:{},allowedDoctypes:src_constants_js__WEBPACK_IMPORTED_MODULE_23__.rf,format_warning_dismiss:{},origin_warning_alert:{},selection_popup_data:{},showSelectionPopupDialog:!1,amount_fields_confidence_count:0,excluded_fields:["fields_group"],account_block:"",error_message:"",invoice_date:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)({}),origin_masks:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)({"%d/%m/%Y":"D/MM/YYYY","%d.%m.%Y":"D.MM.YYYY","%m %d, %Y":"MM D, YYYY","%Y %m, %d":"YYYY MM, D"}),origin_placeholders:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)({"%d/%m/%Y":"31/01/2023","%d.%m.%Y":"31.01.2023","%m %d, %Y":"01 31, 2023","%Y %m, %d":"2023 01, 31"}),trigger_document_lock:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1),split_document:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1)}},beforeRouteLeave:function(e,t,i){return __awaiter(this,void 0,void 0,(function*(){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.removeMagnifier(),this.removeAllNotifications(),"function"===typeof this.format_warning_dismiss&&this.format_warning_dismiss(),"function"===typeof this.origin_warning_alert&&this.origin_warning_alert(),yield this.releaseDocLock({doc_id:this.record.doc_id}),this.resetDocStore(e.fullPath),this.page=1,i()}))},showDialog1:function(){setTimeout((()=>{this.showDialog=!0}),2e3)},mounted:function(){_this=this,this.setConversionFields(),window.addEventListener("resize",this.windowResize),document.body.addEventListener("click",this.mouseClicked,!0);const e=$("#image_scrolle");e&&$("#image_scrolle").addEventListener("scroll",this.handleScroll);const t=$("#field_scrolle");t&&$("#field_scrolle").addEventListener("scroll",this.handleScroll),document.addEventListener("selection_popup_selected",this.selectionPopupSelected),document.addEventListener("selection_popup_closed",this.selectionPopupClosed),document.addEventListener("reset_classification",this.resetClassification),document.addEventListener("display_fields_errors",this.displayFieldErrors),window.aa=this,this.init(),this.isDebugFlagHandler()},unmounted:function(){window.removeEventListener("resize",this.windowResize),document.removeEventListener("selection_popup_closed",this.selectionPopupClosed),document.removeEventListener("selection_popup_selected",this.selectionPopupSelected),document.removeEventListener("reset_classification",this.resetClassification),document.removeEventListener("display_fields_errors",this.displayFieldErrors)},methods:{updateDateValue(e){this.connectionId=e.field_name,this.connectionId&&(this.deleteRuleFromConnection(),this.enableDrawing(),this.fields[e.field_name].formatted_value=this.invoice_date,this.fields[e.field_name].value=quasar_src_utils_date_js__WEBPACK_IMPORTED_MODULE_27__.ZP.formatDate(this.invoice_date,"YYYY-MM-DD"))},getMaskByOrigin(e){const t=(0,src_utils_UserPreferences__WEBPACK_IMPORTED_MODULE_11__.$8)("DATE_PATTERN");if("invoice_date"==e){const e=this.origin_masks[t];return e}},getPlaceholderByOrigin(e,t){if(e&&"invoice_date"==t){const t=this.origin_placeholders[e];return t}},improveDocuments(){return __awaiter(this,void 0,void 0,(function*(){try{yield src_services__WEBPACK_IMPORTED_MODULE_38__.U0.improve_document_quality(this.docId)}catch(e){return this.hideLoading(),void this.showErrorToast("There was an error improving the document")}}))},init(){return __awaiter(this,void 0,void 0,(function*(){const e=(!0).toString();"true"===e.toLowerCase()?(this.$route.params.id||this.$router.push("/dashboard"),this.doc2AppMode=!0,setTimeout((()=>{this.showDialog=!1}),1e4)):setTimeout((()=>{this.showDialog=!0}),1e4),this.docId=this.$route.params.id,yield this.getInvoiceDataByDocId(this.docId),this.record&&0!==Object.keys(this.record).length&&!1!==this.record.success&&(this.connectWebSocket(),this.handleReadOnly(),this.handleDocLockSubscribe(),this.isReadOnly?(this.error_message=this.$t("pages.messages.READ_ONLY_MSG"),this.trigger_document_lock=!1):this.trigger_document_lock=!0,this.layout=this.record.layout.groups,this.setListOfValues(),yield this.populateListsAndValues(),this.prepareFieldsData(),this.initPage(),this.fieldCaluclations(),this.initEventsOnMountForModelUpdate(),yield this.getLanguageOptions(),this.getOrgSettings())}))},initEventsOnMountForModelUpdate(){return __awaiter(this,void 0,void 0,(function*(){yield this.$nextTick(),this.layout.forEach(((e,t)=>{e.rows.forEach(((e,t)=>{e.forEach(((e,t)=>{e.list_of_values&&this.addEventOnField(e)}))}))}))}))},addEventOnField(e){try{let t=this.getInputEl(e.field_name);t&&t.addEventListener("update_field_value",this.updateModel)}catch(t){}},getInputEl(e){let t=document.querySelector("."+e+"_input");return t},updateModel(e){try{const t=e.target.querySelectorAll("[data-field-name]");if(0==t.length)return;Array.from(t).forEach((t=>{const i=t.getAttribute("data-field-name");this.fields[i].formatted_value=e.detail.val,this.inputValueChanges(i)}))}catch(t){}},handleDocLockSubscribe(){const e=(0,src_store_main__WEBPACK_IMPORTED_MODULE_41__.TB)();e.$subscribe(((e,t)=>{this.isReadOnly=!this.doc_lock.success,this.handleReadOnly()}))},handleReadOnly(){if(src_constants_js__WEBPACK_IMPORTED_MODULE_23__.at.includes(this.record.status))return void(this.isReadOnly=!0);const e=src_core_acls_index__WEBPACK_IMPORTED_MODULE_39__.W1.hasAccess("update");e||(this.isReadOnly=!0)},getInvoiceDataByDocId(e){return __awaiter(this,void 0,void 0,(function*(){try{if(this.record.doc_id===e)return;this.showLoading(),this.clearSelectedSessionStorage(),yield this.getDocumentById(e)}catch(t){this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}}))},getConfidence(e){return e?e<1?(100*+e.toFixed(2)).toFixed(0):+e.toFixed(2):""},getLowerConfidence(e){if(e.confidence&&e.score){let t=e.confidence<1?(100*e.confidence.toFixed(2)).toFixed(0):e.confidence.toFixed(2),i=e.score<=1?(100*e.score.toFixed(2)).toFixed(0):e.score.toFixed(2);return t=Number(t),i=Math.floor(Number(i)),t<i?t:i}return e.confidence?e.confidence<1?(100*e.confidence.toFixed(2)).toFixed(0):e.confidence.toFixed(2):null},setListOfValues(){this.layout.forEach(((e,t)=>{e.rows.forEach(((e,t)=>{e.forEach(((e,t)=>{e.hasOwnProperty("list_of_values")&&e.list_of_values&&this.handleListofValues(e.list_of_values)}))}))}))},prepareFieldsData(){if(0===Object.keys(this.record).length)return{};let e={};this.record.fields.forEach(((t,i)=>{e[t.name]=t,this.fieldsNotDisplayed[t.name]=t})),this.layout.forEach(((t,i)=>{t.rows.forEach(((t,i)=>{t.forEach(((t,i)=>{let s=t.field_name,o=e[s];if(o)o.color="",t.calculation_formula?o.color="":"MD"==o.extraction_method?o.color="extraction_method-border-left":o.is_valid?o.color="success-border-left":o.color="error-border-left";else{let e={confidence:0,color:null,value:"",formatted_value:""};o=e}if(!o.is_required||""!=o.formatted_value&&null!=o.formatted_value||(o.color="error-border-left"),t.field_type&&"enum"==t.field_type.toLowerCase()&&(o.field_type=t.field_type,o.list_of_values=t.list_of_values,o.options=this.getListOfValuesAsSelectList(t.list_of_values)),o.is_required=t.is_required,this.countAmountFieldsConfidence(o),this.fields[s]=o,t.fuzzy_field&&null!=t.fuzzy_field){let e=t.fuzzy_field.split(":");const i=e[1].toLowerCase();if(fuzzyMap.has(e[0]))fuzzyMap.get(e[0]).set(s,i);else{let t=new Map;t.set(s,i),fuzzyMap.set(e[0],t)}}!1===t.is_hidden&&this.fieldsNotDisplayed.hasOwnProperty(s)&&delete this.fieldsNotDisplayed[s],this.view_model[s]=t}))}))})),Object.keys(this.fieldsNotDisplayed).length>=0&&this.record.fields.forEach(((e,t)=>{this.fieldsNotDisplayed.hasOwnProperty(e.name)&&(this.record.fields[t].is_valid=!0,delete this.fieldsNotDisplayed[e.name])})),this.addAdditionalAmountPanelInRows(),this.addFieldsButtonsVibility(),this.prepareLayoutForTemplate(),this.handleConfidenceAlert(),this.$forceUpdate()},handleListofValues(e){e&&this.addNameToLovList(e)},addAdditionalAmountPanelInRows(){let e=!1,t=!0,i={},s={};const o=[{selected:!1,is_hidden:!1,name:"additional_amount",icon:"AdditionalAmount.svg",field:"additional_amount",label:"additional_amount"},{selected:!1,is_hidden:!1,name:"additional_amount_2",icon:"AdditionalAmount.svg",field:"additional_amount_2",label:"additional_amount_2"},{selected:!1,is_hidden:!1,name:"additional_amount_3",icon:"AdditionalAmount.svg",field:"additional_amount_3",label:"additional_amount_3"},{selected:!1,is_hidden:!1,name:"negative_amount",icon:"NegativeAmount.svg",field:"negative_amount",label:"negative_amount"},{selected:!1,is_hidden:!1,name:"negative_amount_2",icon:"NegativeAmount.svg",field:"negative_amount_2",label:"negative_amount_2"},{selected:!1,is_hidden:!1,name:"negative_amount_3",icon:"NegativeAmount.svg",field:"negative_amount_3",label:"negative_amount_3"}];for(const[a,l]of this.layout.entries())if("tax_details"===l.name)for(const[r,n]of l.rows.entries())for(const[a,_]of n.entries()){const a=_.field_name;"fields_group"==a&&(e=!0),"additional_amount"!=a||e||(l.rows.splice(r,0,[{field_name:"fields_group",def:o}]),e=!0);for(const[e,l]of o.entries()){let e=l.field;e===a&&(l.label=this.displayFieldLabelFor2a(_),_.is_hidden?s[l.name]=a:this.fields[a].value?(_.visibile=!0,t=!1,i[l.name]=!0):_.visibile=!1)}}for(const[a,l]of this.layout.entries())if("tax_details"===l.name)for(const[e,o]of l.rows.entries())for(const[a,l]of o.entries()){const e=l.field_name;if("fields_group"==e){for(const[e,t]of l.def.entries())!0===i[t.name]?t.selected=!0:t.selected=!1,s[t.name]||(t.is_hidden=!0);!0===t&&(l.def[0].selected=!0)}!0===t&&"additional_amount"===l.field_name&&(l.visibile=!0)}},countAmountFieldsConfidence(e){let t=["net_amount","tax_amount","tax_rate","net_amount_2","tax_amount_2","tax_rate_2","net_amount_3","tax_amount_3","tax_rate_3","total_amount","total_amount","total_net_amount"];t.includes(e.name)&&1==+e.confidence&&this.amount_fields_confidence_count++},handleConfidenceAlert(){this.amount_fields_confidence_count>1&&(this.origin_warning_alert=this.showWarningAlert(this.$t("selection_popup_origin_warning")))},fieldCaluclations(){return __awaiter(this,void 0,void 0,(function*(){for(const[e,t]of this.layout.entries())for(const[i,s]of t.rows.entries())for(const[e,t]of s.entries())t.calculation_formula&&(yield this.performCalulations(t.field_name,t.calculation_formula,t.field_type))}))},performCalulations(fieldName,formula,field_type){return __awaiter(this,void 0,void 0,(function*(){if(field_type&&(0,src_utils_dateCalculatedField__WEBPACK_IMPORTED_MODULE_48__.y)(field_type))return void 0;let tempFormulaString="",tempStrContainer="";const values=[],tempArray=formula.split(" ");for(let e=0;e<tempArray.length;e+=1)tempStrContainer=tempArray[e].trim(),tempArray[e].startsWith("[")&&(tempStrContainer=tempStrContainer.replace("[",""),tempStrContainer=tempStrContainer.replace("]",""),this.fields[tempStrContainer]&&this.fields[tempStrContainer].formatted_value&&null!=this.fields[tempStrContainer].formatted_value&&""!=this.fields[tempStrContainer].formatted_value&&values.push({key:this.fields[tempStrContainer].formatted_value,value:this.fields[tempStrContainer].formatted_value}));const formatted_values=yield this.formatMultiValues(values,this.amount_format_locale);for(let e=0;e<tempArray.length;e+=1)if(tempStrContainer=tempArray[e].trim(),tempArray[e].startsWith("["))if(tempStrContainer=tempStrContainer.replace("[",""),tempStrContainer=tempStrContainer.replace("]",""),this.fields[tempStrContainer]&&this.fields[tempStrContainer].formatted_value&&null!=this.fields[tempStrContainer].formatted_value&&""!=this.fields[tempStrContainer].formatted_value){const e=this.searchValueByKey(this.fields[tempStrContainer].formatted_value,formatted_values);tempStrContainer=e,tempFormulaString+=parseFloat(tempStrContainer).toString()}else tempFormulaString+="0";else tempFormulaString+=tempStrContainer;this.fields[fieldName].value=eval(tempFormulaString).toFixed(2),this.fields[fieldName].formatted_value=yield this.formatValue(this.fields[fieldName].value,"en_US",this.amount_format_locale)}))},prepareLayoutForTemplate(){const e=this.getCalculatorFieldsDef();let t=[];this.layout.forEach(((i,s)=>{let o=0,a=0;i.filteredRows=JSON.parse(JSON.stringify(i.rows)),i.filteredRows.forEach(((i,l)=>{i.forEach(((i,r)=>{e.hasOwnProperty(i.field_name)&&Object.assign(i,e[i.field_name]),o++,i.is_hidden&&a++,(void 0!==i.visibile&&!1===i.visibile||i.is_hidden)&&t.push({group_index:s,row_index:l,field_index:r,field_name:i.field_name})}))})),i.is_hidden=o===a})),t.length>0&&t.forEach((e=>{this.removeFieldFromFilteredRows(e.group_index,e.row_index,e.field_name)}))},removeFieldFromFilteredRows(e,t,i){let s=null;this.layout[e].filteredRows[t].forEach(((e,t)=>{i==e.field_name&&(s=t)})),null!==s&&this.layout[e].filteredRows[t].splice(s,1)},initPage(){this.handleLanguageOptions(),this.handleFormatWarning(),this.setImages(),this.prepareTableErrors(),this.setLineItemCount(),this.document_version=this.record.document_version?this.record.document_version:1,this.handleLineItemsVisibilty(),screenshot=$(".screenshot"),boxes=$("#boxes"),marquee=$("#marquee"),marquee&&marquee.classList.add("hide");let e=$("#image_container");this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight,this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight),screenshot.addEventListener("dblclick",this.dblClickToSelect),screenshot.addEventListener("pointerdown",this.startDrag),window.addEventListener("keydown",(e=>{"Escape"===e.key?(this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.removeMagnifier()):"Enter"===e.key?(e.preventDefault(),this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.selectNextRedField(this.connectionId),setTimeout((()=>{this.enableOrDisableExportButton()}),5),this.connectionId=""):"ArrowDown"===e.key&&(this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.selectNextField(this.connectionId),setTimeout((()=>{this.enableOrDisableExportButton()}),5),this.connectionId="")})),this.getAI_IndicatorData()},setImages(){let e=this.handleImageBaseURL(this.record.images);""!==e&&(this.baseUrl=e),this.image=this.baseUrl+"/"+(0,src_utils_viewImages__WEBPACK_IMPORTED_MODULE_49__.Rl)(this.record.images[0].path),this.images=(0,src_utils_viewImages__WEBPACK_IMPORTED_MODULE_49__.PN)(this.record.images)},getAI_IndicatorData(){return __awaiter(this,void 0,void 0,(function*(){try{let e;if(this.ai_fields=this.record&&this.record.fields&&Array.isArray(this.record.fields)?this.record.fields.length:0,!this.record.filter_values||!(this.record.filter_values.length>0)||!Array.isArray(this.record.filter_values))throw"getAI_IndicatorData () no filter_values or doc_type to proceed";let t="?doc_type="+this.record.doc_type+"&filter_values="+this.record.filter_values.join(),i=yield(0,pages_APIs__WEBPACK_IMPORTED_MODULE_28__.O_)();if(e=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(pages_APIs__WEBPACK_IMPORTED_MODULE_28__.hi.get_ai_score+t,new FormData,{headers:{Authorization:i}}),!1===e.data.success)throw e.data.message;if(!0===e.data.success){this.ai_rules=e.data.rules;const t=new CustomEvent("FV_gauge_calculation",{detail:e.data});document.dispatchEvent(t)}}catch(e){}}))},handleLineItemsVisibilty(){const e=(!0).toString();"true"===e.toLowerCase()&&this.record.tables&&(this.showArticlePage=!0),this.account_block="",(this.record.hasOwnProperty("table_blocked")&&1==this.record.table_blocked||"true"==this.record.table_blocked)&&(this.account_block="table_blocked",this.showArticlePage=!1),(this.record.hasOwnProperty("table_extraction_disabled")&&1==this.record.table_extraction_disabled||"true"==this.record.table_extraction_disabled)&&(this.account_block="table_extraction_disabled",this.showArticlePage=!1),(this.record.hasOwnProperty("table_not_supported")&&1==this.record.table_not_supported||"true"==this.record.table_not_supported)&&(this.account_block="table_not_supported",this.showArticlePage=!1)},imageclicked(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.image=this.baseUrl+"/"+(0,src_utils_viewImages__WEBPACK_IMPORTED_MODULE_49__.Rl)(this.record.images[e.target.dataset.id].path),this.getImageDetails(),this.page=parseInt(e.target.dataset.id)+1},setLineItemCount(){this.lineitem_count=0,this.lineitem_error=this.record["table_has_error"],this.record.hasOwnProperty("tables")&&0!=this.record.tables.length&&(this.record.tables[0].hasOwnProperty("version")&&"v3"==this.record.tables[0].version?this.lineitem_count=this.getVisibleRowCountForTE():this.record.tables[0].hasOwnProperty("data")&&(this.lineitem_count=this.record.tables[0].data.length))},getVisibleRowCountForTE(){let e=0;return this.record.tables&&0!=this.record.tables.length&&this.record.tables[0].hasOwnProperty("rows")&&0!=this.record.tables[0].rows.length?(Array.from(this.record.tables[0].rows).forEach((t=>{!1===t.is_deleted&&e++})),e):e},goToLineItems(){this.$router.push("/tbl_ext_v3/"+this.$route.params.id)},landing(){this.removeCache(),this.$router.push("/land")},startDrag(e){let t=0,i=0;if(1===e.button){const t=this.hitTest(e.layerX,e.layerY);return void(t&&(rectangles.splice(rectangles.indexOf(t),1),this.redraw()))}window.addEventListener("pointerup",this.stopDrag),screenshot.addEventListener("pointermove",this.moveDrag),marquee.classList.remove("hide"),startX=e.layerX,startY=e.layerY;let s="";Object.assign(marqueeRect,{startX,startY,width:i,height:t,connectionId:s}),this.drawRect(marquee,marqueeRect)},stopDrag(e){marquee.classList.add("hide"),window.removeEventListener("pointerup",this.stopDrag),screenshot.removeEventListener("pointermove",this.moveDrag),e.target===screenshot&&marqueeRect.width&&marqueeRect.height&&(this.connectionId&&(marqueeRect.connectionId=this.connectionId),rectangles.push(Object.assign({},marqueeRect)),this.redraw(),this.restrictDrawing(),this.saveOverlayResult())},moveDrag(e){let t=e.layerX,i=e.layerY,s=e.layerX,o=e.layerY,a=startX-t,l=startY-i;a<0&&(a*=-1,t-=a),l<0&&(l*=-1,i-=l);let r="";Object.assign(rectCordinate,{startX,startY,endX:s,endY:o}),Object.assign(marqueeRect,{x:t,y:i,width:a,height:l,connectionId:r}),this.drawRect(marquee,marqueeRect)},hitTest(e,t){return rectangles.find((i=>e>=i.x&&t>=i.y&&e<=i.x+i.width&&t<=i.y+i.height))},redraw(){boxes.innerHTML="",rectangles.forEach((e=>{boxes.appendChild(this.drawRect(document.createElementNS("http://www.w3.org/2000/svg","rect"),e))}))},drawRect(e,t){if("object"==typeof t){let i="cursor-pointer";const{x:s,y:o,width:a,height:l,connectionId:r}=t;if(e.setAttributeNS(null,"width",a),e.setAttributeNS(null,"height",l),e.setAttributeNS(null,"x",s),e.setAttributeNS(null,"y",o),e.setAttributeNS(null,"connectionId",r),r){e.setAttributeNS(null,"id",r+"_rect");let t=this.fields[r]||{};t.hasOwnProperty("trocr_processor")&&""!=t.trocr_processor&&(i+=" extract_by_tcocr ")}e.setAttributeNS(null,"class",i),!1===this.isReadOnly&&e.addEventListener("click",this.showConnectionFromRect)}return e},getImageDetails(){this.imageWidth=screenshot.offsetWidth,this.imageHeight=screenshot.offsetHeight,this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight),this.prepareRectangles(),this.enableOrDisableExportButton()},prepareRectangles(){const e=this.record;rectangles=[],Array.from(e.fields).forEach((e=>{const t=$("#"+e.name);if(t){if(this.page==e.page&&e.coords){let t=Math.round(this.imageWidth*e.coords[0].x),i=Math.round(this.imageHeight*e.coords[0].y),s=Math.round(this.imageWidth*e.coords[2].x),o=Math.round(this.imageHeight*e.coords[2].y),a=s-t,l=o-i;a<0&&(a*=-1,t-=a),l<0&&(l*=-1,i-=l),marqueeRect.x=t,marqueeRect.y=i,marqueeRect.width=a,marqueeRect.height=l,marqueeRect.connectionId=e.name,rectangles.push(Object.assign({},marqueeRect))}e.page&&null!=e.page&&e.coords&&t.setAttribute("pageno",e.page)}})),this.redraw()},showConnectionFromRect(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing();let t=e.target.getAttribute("connectionId"),i=e.target,s=$("#"+t);this.scrollInToViewCenter(s),this.scrollInToViewCenter(i),document.documentElement.scrollTop=0,setTimeout((()=>{this.showConnection(t,i,s)}),50)},showConnectionFromField(e){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing();let t=$("#"+e),i=t.getAttribute("pageno"),s=!1;i&&"none"!=i.toLowerCase()&&+i!==this.page&&(s=!0,this.page=+i,this.image=this.baseUrl+"/"+(0,src_utils_viewImages__WEBPACK_IMPORTED_MODULE_49__.Rl)(this.record.images[this.page-1].path),this.getImageDetails(),this.$forceUpdate()),setTimeout((()=>{let i=$("#"+e+"_rect");i&&(this.scrollInToViewCenter(i),document.documentElement.scrollTop=0),setTimeout((()=>{if(!i){this.connectionId=e,this.componentType=t.getAttribute("child_type");const i=t.querySelector(this.componentType);if(!1===this.extractable)return;return i&&i.value&&""!=i.value?this.showNotification(this.$t("pages.messages.SELECT_AREA_NO_COORDINATES")):this.showNotification(this.$t("pages.messages.SELECT_AREA")),void this.enableDrawing()}this.showConnection(e,i,t)}),50)}),s?400:100)},showConnection(e,t,i){t&&i?(this.drawOverlay(e,t),t.classList.add("border"),this.connect(t,i,"#26a69a",2)):alert(this.$t("pages.messages.NO_MAPPING_AVAILABLE"))},drawOverlay(e,t){var i,s,o;this.connectionId=e,this.removeExistingConfirmationOverlays();const a=$("#"+e);if(!a)return;this.componentType=a.getAttribute("child_type");const l=a.querySelector(this.componentType),r=l.value,n=$("."+e),_=n.innerHTML,d=this.getOffset(t),c=document.createElement("div");c.setAttribute("id","confirmation_overlay"),c.style.position="absolute",c.style.zIndex="99999",c.style.left=d.left+"px",c.style.top=(+d.top+ +d.height+6).toString()+"px",c.style.background="#e2e2e2",c.style.color="#898989",c.style.minHeight="80px",c.style.minWidth="100px",c.style.maxWidth="50%",c.style.textAlign="center",c.style.padding="5px 10px 5px 10px",c.style.letterSpacing="1px",c.style.borderRadius="7px",c.style.boxShadow="0 1px 2px rgba(0,0,0,0.07),\n      0 2px 4px rgba(0,0,0,0.07),\n      0 4px 8px rgba(0,0,0,0.07),\n      0 8px 16px rgba(0,0,0,0.07),\n      0 16px 32px rgba(0,0,0,0.07),\n      0 32px 64px rgba(0,0,0,0.07);";let u=this.getTrashIcon(e);c.innerHTML=`<div><b>${r}</b></div><div><b style='font-size: 9px'>${_}</b></div>\n                  <div>\n                  ${u}\n                  <span class='divOverlayWrong'>\n                    <i connectionId='${e}' style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.6em;' class='fa fa-times'></i>\n                  </span>\n                  <span id='divOverlayCorrect'>\n                    <i style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.5em;' class='fas fa-check'></i>\n                  </span></div>`,document.body.appendChild(c),null===(i=$("#divOverlayCorrect"))||void 0===i||i.addEventListener("click",(t=>{this.removeExistingConfirmationOverlays(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.selectNextField(e),setTimeout((()=>{this.enableOrDisableExportButton()}),5)}));let h=document.getElementsByClassName("divOverlayWrong");Array.from(h).forEach((e=>{null===e||void 0===e||e.addEventListener("click",(e=>{this.connectionId=e.target.getAttribute("connectionId"),this.connectionId&&(this.initTempFieldDelete(),this.refreshCanvas(),this.$forceUpdate(),setTimeout((()=>{this.enableOrDisableExportButton()}),0),this.enableDrawing())}))})),null===(s=$("#deleteRuleFromConnection"))||void 0===s||s.addEventListener("click",(e=>{this.connectionId=e.target.getAttribute("connectionId"),this.connectionId&&(this.deleteRuleFromConnection(),this.enableDrawing())}));try{const i=$("#confirmation_overlay"),s=null===(o=$("#confirmation_overlay"))||void 0===o?void 0:o.clientWidth,a=d.width,l=(+s-+a)/2;i.style.left=+d.left-+l+"px";let r=+t.getAttribute("width")+ +t.getAttribute("y")+i.offsetHeight;r>=screenshot.offsetHeight&&(c.style.top=(+d.top-6-+i.offsetHeight).toString()+"px");let n=null,_=this.getScoreDescription(this.fields[e]);null!=_&&""!==_&&(n={score:String(_),background:this.getColor(Number(_))}),n&&setTimeout((()=>{this.overlayForScore(i,n)}),10)}catch(p){}},overlayForScore(e,t){let i=t.score,s=t.background;const o=this.getOffset(e),a=document.createElement("div");a.setAttribute("id","score_overlay"),a.style.position="absolute",a.style.zIndex="99999",a.style.left=(+o.left+o.width-10).toString()+"px",a.style.top=(+o.top-20).toString()+"px",a.style.background=s,a.style.color="#898989",a.style.fontSize="14px",a.style.fontWeight="bold",a.style.letterSpacing="2px",a.style.cursor="pointer",a.style.padding="0.1em 0.6em",a.style.border="1px solid #f5f5f5",a.style.borderRadius="50px",a.innerHTML=`<div> <span  class='column-score-test' > ${i} </span> </div>`,document.body.appendChild(a)},getScoreDescription(e){let t="";return e&&e.hasOwnProperty("score_description")&&""!==e.score_description&&null!=e.score_description&&(t=e.score_description),String(t)},initTempFieldDelete(){this.record.fields.forEach(((e,t)=>{e.name===this.connectionId&&(this.fields[this.connectionId]=Object.assign(this.fields[this.connectionId],{color:null,value:"",confidence:0,formatted_value:"",content:"",validation_code:null,coords:null,page:null}),this.record.fields.splice(t,1))}));let e=$("#"+this.connectionId);e&&e.setAttribute("pageno","")},removeBordersFromRectangles(){let e=document.body.getElementsByTagName("rect");for(let t of e)t.classList.remove("border")},removeAllConnectionLines(){const e=$("#connection_line");e&&e.remove()},enableDrawing(e=!1){e&&(rectangles.pop(),this.redraw());const t=$("#draw");null===t||void 0===t||t.classList.add("enableDrawingRectangle");const i=$(".screenshot");null===i||void 0===i||i.classList.add("cursor-crosshair")},askLater(){quasar_src_plugins_Cookies_js__WEBPACK_IMPORTED_MODULE_25__.Z.set("dontAsk","neverAsk"),quasar_src_plugins_Cookies_js__WEBPACK_IMPORTED_MODULE_25__.Z.get("dontAsk")},restrictDrawing(){const e=$("#draw");null===e||void 0===e||e.classList.remove("enableDrawingRectangle");const t=$(".screenshot");null===t||void 0===t||t.classList.remove("cursor-crosshair")},cancelOverlayDiv(){rectangles.pop(),this.redraw(),this.textApiResponse=null},saveOverlayResult(){const e=rectangles[rectangles.length-1],t=rectangles.filter((function(t,i,s){return t.connectionId!==e.connectionId}));rectangles=[],rectangles=JSON.parse(JSON.stringify(t)),rectangles.push(e),this.redraw(),this.getTextByCoordinates(rectCordinate)},connect(e,t,i,s){const o=this.getOffset(e),a=this.getOffset(t),l=o.left+o.width,r=o.top+o.height/2,n=a.left,_=a.top,d=Math.sqrt((n-l)*(n-l)+(_-r)*(_-r)),c=(l+n)/2-d/2,u=(r+_)/2-s/2,h=Math.atan2(r-_,l-n)*(180/Math.PI);this.removeAllConnectionLines();const p=document.createElement("div");p.setAttribute("id","connection_line"),p.style.cssText="z-index: 102;padding:0px; margin:0px; height:"+s+"px; background-color:"+i+"; line-height:1px; position:absolute; left:"+c+"px; top:"+u+"px; width:"+d+"px; -moz-transform:rotate("+h+"deg); -webkit-transform:rotate("+h+"deg); -o-transform:rotate("+h+"deg); -ms-transform:rotate("+h+"deg); transform:rotate("+h+"deg);",document.body.appendChild(p)},getOffset(e){const t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,width:t.width||e.offsetWidth,height:t.height||e.offsetHeight}},getTextByCoordinates(e){return __awaiter(this,void 0,void 0,(function*(){const t=this.record;let i,s=new FormData,o=e.startX/this.imageWidth,a=e.startY/this.imageHeight,l=e.endX/this.imageWidth,r=e.endY/this.imageHeight;s.append("x0",o.toString()),s.append("y0",a.toString()),s.append("x1",l.toString()),s.append("y1",r.toString()),s.append("doc_id",t.doc_id),s.append("page",this.page.toString()),s.append("field_name",_this.connectionId),this.showLoading();try{let e=yield(0,pages_APIs__WEBPACK_IMPORTED_MODULE_28__.O_)();i=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(pages_APIs__WEBPACK_IMPORTED_MODULE_28__.hi.get_field_value,s,{headers:{Authorization:e}})}catch(_){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}finally{this.hideLoading()}this.textApiResponse=i.data;const n=this.textApiResponse.coords;if(!n||0===n[0].x&&0===n[0].y&&""===this.textApiResponse.formatted_value)return this.showErrorToast(this.$t("pages.messages.EMPTY_MAPPING_NOT_ALLOWED")),this.prepareRectangles(),void this.enableDrawing();this.dontAsk?(this.textApiResponse.multi_line?this.textConfirmationMsg=this.$t("isMultiLineConfirm"):this.textConfirmationMsg=this.$t("isdrawcorrect"),this.textConfirmation=!0):this.saveInstant=!0}))},updateFieldData(){let e=$("#"+this.connectionId);if(e.setAttribute("pageno",this.page.toString()),this.textApiResponse.extracted_value&&0!==Object.keys(this.textApiResponse.extracted_value).length)return this.hideLoading(),this.openSelectionPopup(JSON.parse(JSON.stringify(this.textApiResponse))),void(this.textApiResponse.extracted_value=null);this.fields[this.connectionId].value=this.textApiResponse.value,this.fields[this.connectionId].content=this.textApiResponse.text,this.fields[this.connectionId].api_save=!0,this.fields[this.connectionId].score_description="",this.fields[this.connectionId].formatted_value=this.textApiResponse.formatted_value,this.fields[this.connectionId].coords=this.textApiResponse.coords,this.textApiResponse&&!0===this.textApiResponse.multi_line?this.fields[this.connectionId].multi_line=!0:this.fields[this.connectionId].multi_line=!1,this.inputValueChanges(this.connectionId,this.textApiResponse.coords,this.page),this.enableOrDisableExportButton(),this.$forceUpdate(),this.prepareRectangles(),this.textApiResponse=null,this.saveInstant=!1},changeEventHandler(e){setTimeout((()=>{this.removeConnection(e),this.inputValueChanges(e),this.refreshCanvas()}),20)},inputValueChanges(e,t,i){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.removeFieldInputError(e),this.validateUpdateValue(e);let s=$("#"+e),o=$("#"+e+"_rect");o&&s&&this.showConnection(e,o,s),this.$forceUpdate(),t&&i?this.updateImportJson(e,t,i,"AI"):this.updateImportJson(e),this.fieldCaluclations(),"purchase_order"===e&&(this.confirmationForPoConnectionReset=!0),this.$forceUpdate()},validateUpdateValue(e){return __awaiter(this,void 0,void 0,(function*(){let t=this.fields[e];if(!t||""==t.formatted_value)return;let i=!0,s="";if(({is_valid:i,input_error:s}=yield this.runValidationOnField(e)),i)return;this.fields[e].formatted_value="",this.fields[e].input_error=s,this.removeConnection(e),this.refreshCanvas();const o=$("#"+e);if(!o)return;const a=o.getAttribute("child_type"),l=o.querySelector(a);l&&(l.value="")}))},runValidationOnField(e){return __awaiter(this,void 0,void 0,(function*(){let t=this.fields[e],i=!0,s="";if(this.isFieldTypeAmount(e)&&({is_valid:i,input_error:s}=yield this.validateAmount(t.formatted_value)),this.isFieldTypeDate(e)){const e=this.convertPYDateFormatToMask(this.record.date_format_pattern);({is_valid:i,input_error:s}=yield this.validateDate(t.formatted_value,e))}return this.isListOfValuesEnforecd(e)&&({is_valid:i,input_error:s}=yield this.validateListOfValues(t.formatted_value,this.getListOfValues(this.getListofValueName(e)))),{is_valid:i,input_error:s}}))},validateFieldBeforeExport(e){return __awaiter(this,void 0,void 0,(function*(){let t=this.fields[e];if(!t||""==t.formatted_value)return!0;let i=!0,s="";return({is_valid:i,input_error:s}=yield this.runValidationOnField(e)),!!i||(this.fields[e].input_error=s,!1)}))},removeConnection(e){const t={color:null,confidence:0,validation_code:null,coords:null};this.record.fields.forEach(((i,s)=>{i.name===e&&(this.fields[e]=Object.assign(this.fields[e],t),this.record.fields[s]=Object.assign(this.record.fields[s],t))}))},getListofValueName(e){let t="";return this.layout.forEach(((i,s)=>{i.rows.forEach(((i,s)=>{i.forEach(((i,s)=>{i.field_name==e&&i.list_of_values&&(t=i.list_of_values)}))}))})),t},isListOfValuesEnforecd(e){let t=!1;return this.layout.forEach(((i,s)=>{i.rows.forEach(((i,s)=>{i.forEach(((i,s)=>{i.field_name==e&&i.enforce_list_of_values&&(t=!0)}))}))})),t},updateImportJson(e,t,i,s){let o=!1;this.record.fields.forEach(((a,l)=>__awaiter(this,void 0,void 0,(function*(){if(a.name===e){o=!0,a.hasOwnProperty("original")||(a["original"]=Object.assign({},a)),(t||null===t)&&(a.coords=t),i&&(a.page=i),s&&(a.extraction_method=s),a.is_valid=!0,a.is_validated=!0;let l=_this.fields[e];a.formatted_value=l.formatted_value,a.value=l.formatted_value,a.content=l.content,l.hasOwnProperty("api_save")&&l.api_save||(a.value=l.formatted_value);const r=this.record.amount_format_locale.split(".");return""==a.value||l.hasOwnProperty("api_save")&&l.api_save||!this.conversionFields.includes(l.name)||"en_US"==r[0]||(a.value=yield this.convertValueAccordingToLocale(a.value,r[0],"en_US"),a.float_value=+a.value),a.color="success-border-left","MD"==a.extraction_method&&(a.color="extraction_method-border-left"),!a.is_required||""!=a.formatted_value&&null!=a.formatted_value||(a.color="error-border-left"),void(this.textApiResponse&&(!0===this.textApiResponse.multi_line?a.multi_line=!0:a.multi_line=!1))}})))),o||(this.record.fields.push({}),this.record.fields[this.record.fields.length-1].name=e,this.record.fields[this.record.fields.length-1].content=_this.fields[e].content,this.record.fields[this.record.fields.length-1].formatted_value=_this.fields[e].formatted_value,this.record.fields[this.record.fields.length-1].value=_this.fields[e].value,this.record.fields[this.record.fields.length-1].validation_code="",this.record.fields[this.record.fields.length-1].extraction_method=s,this.record.fields[this.record.fields.length-1].is_validated=!0,this.record.fields[this.record.fields.length-1].is_valid=!0,this.record.fields[this.record.fields.length-1].color="success-border-left",this.textApiResponse&&(!0===this.textApiResponse.multi_line?this.record.fields[this.record.fields.length-1].multi_line=!0:this.record.fields[this.record.fields.length-1].multi_line=!1),t&&(this.record.fields[this.record.fields.length-1].coords=t),i&&(this.record.fields[this.record.fields.length-1].page=i))},selectNextRedField(e){let t=!1,i=!1;this.layout.forEach(((s,o)=>{s.rows.forEach(((s,o)=>{s.forEach(((s,o)=>{let a=s.field_name,l=this.fields[a];if(!0===t){if(1!=s.is_readonly&&0==s.is_hidden&&(0==l.is_valid||s.calculation_formula)&&(!s.hasOwnProperty("visibile")||!1!==s.visibile)){const e=$("#"+a);this.componentType=e.getAttribute("child_type");const s=e.querySelector(this.componentType);if(s)return this.scrollInToViewCenter(s),s.click(),s.focus(),t=!1,void(i=!1)}}else l&&a===e&&(this.fields[a].color="success-border-left",this.fields[a].is_valid=!0,this.fields[a].validation_code=null,this.fields[a].validation_message=null,this.fields[a].is_validated=!0,t=!0,i=!0)}))}))})),0!=i&&!0===this.doc2AppMode&&(this.handleScroll(),setTimeout((()=>{$("#enableExportButton").scrollIntoView(),$("#enableExportButton").click()}),10))},selectNextField(e){let t=!1;this.layout.forEach(((i,s)=>{i.rows.forEach(((i,s)=>{i.forEach(((i,s)=>{let o=i.field_name,a=this.fields[o];if(!0===t){if(1!=i.is_readonly&&0==i.is_hidden&&(!i.hasOwnProperty("visibile")||!1!==i.visibile)){const e=$("#"+o);this.componentType=e.getAttribute("child_type");const i=e.querySelector(this.componentType);if(i)return this.scrollInToViewCenter(i),i.click(),i.focus(),void(t=!1)}}else if(a&&o===e){const e=$("#"+o);this.componentType=e.getAttribute("child_type");const i=e.querySelector(this.componentType);i.blur(),this.fields[o].color="success-border-left",this.fields[o].is_valid=!0,this.fields[o].validation_code=null,this.fields[o].validation_message=null,this.fields[o].is_validated=!0,t=!0}}))}))}))},closeMsDialog(){this.fuzzyDialog=!1,this.ms_advance_filters={}},masterDataSearchByField(e){try{if(!e)return;const t=(0,quasar_src_utils_uid_js__WEBPACK_IMPORTED_MODULE_26__.Z)();this.ms_advance_filters[t]={fuzzy_field:e.fuzzy_field,search_text:this.fields[e.field_name].formatted_value,field_name:e.field_name,primary:!0};let i=e.fuzzy_field.split(":")||{};this.master_lookup_type=i[0],this.ms_view_model=this.view_model,this.master_data_fields_map=fuzzyMap,this.fuzzyDialog=!0}catch(t){}},populateMasterDataFields(){return __awaiter(this,void 0,void 0,(function*(){try{this.closeMsDialog(),this.showLoading();let e=JSON.parse(this.master_data_row);const t=[];for(const[s,o]of fuzzyMap.entries())for(const[i,a]of o.entries())e.hasOwnProperty(a)&&this.conversionFields.includes(i)&&null!=e[a]&&t.push({key:e[a],value:e[a]});let i=[];t.length>0&&(i=yield this.formatMultiValues(t,"en_US",this.amount_format_locale)),fuzzyMap.forEach(((t,s)=>{t.forEach(((t,s)=>{if(e.hasOwnProperty(t)){let o=e[t];this.conversionFields.includes(s)&&null!=e[t]&&(o=this.searchValueByKey(o,i)),this.fields[s].formatted_value=o,this.fields[s].value=e[t],this.fields[s].color="extraction_method-border-left",this.fields[s].extraction_method="MD",!this.isCurrentFieldPrimary(s)&&this.isContentChanged(this.fields[s].content,e[t])&&(this.fields[s].content=e[t],this.fields[s].coords=null,this.fields[s].confidence=0,this.fields[s].validation_code=null),this.updateImportJson(s,null,this.page,"fuzzy")}}))})),this.resetMasterDataStore(),setTimeout((()=>{this.enableOrDisableExportButton()}),5),this.refreshCanvas()}catch(e){}finally{this.hideLoading()}}))},enableOrDisableExportButton(e){this.enableExportButton=!0,this.fieldsErrorArray=[],this.record.fields.forEach(((e,t)=>__awaiter(this,void 0,void 0,(function*(){if(!1===e.is_valid&&!this.isFieldCalcualtedFromLayout(e.name)&&this.isfieldsNotDisplayed(e.name)&&(this.enableExportButton=!1,this.fieldsErrorArray.push(this.$t("pages.screen2a."+e.name))),this.enableExportButton){const t=yield this.validateFieldBeforeExport(e.name);t||(this.enableExportButton=!1,this.fieldsErrorArray.push(this.$t("pages.screen2a."+e.name)))}})))),quasar_src_plugins_SessionStorage_js__WEBPACK_IMPORTED_MODULE_24__.Z.set("enableExportButton",this.enableExportButton),this.$forceUpdate(),e&&this.printFieldsNeedToBeValidated(this.fieldsErrorArray)},printFieldsNeedToBeValidated(e){},isFieldCalcualtedFromLayout(e){let t=!1;return this.layout.forEach(((i,s)=>{i.rows.forEach(((i,s)=>{i.forEach(((i,s)=>{i.field_name==e&&i.calculation_formula&&(t=!0)}))}))})),t},isfieldsNotDisplayed(e){let t=!0;return this.fieldsNotDisplayed.hasOwnProperty(e)&&(t=!1),t},fieldIsNotHidden(e){let t=!1;return this.layout.forEach(((i,s)=>{i.rows.forEach(((i,s)=>{i.forEach(((i,s)=>{i.field_name==e&&i.is_hidden&&(t=!0)}))}))})),t},isFieldTypeAmount(e){let t=!1,i="";return this.layout.forEach(((t,s)=>{t.rows.forEach(((t,s)=>{t.forEach(((t,s)=>{t.field_name==e&&(i=t.field_type)}))}))})),"amount"==i.toLowerCase()&&(t=!0),t},isFieldTypeDate(e){let t=!1,i="";return this.layout.forEach(((t,s)=>{t.rows.forEach(((t,s)=>{t.forEach(((t,s)=>{t.field_name==e&&(i=t.field_type)}))}))})),"date"==i.toLowerCase()&&(t=!0),t},removeFieldInputError(e){this.fields[e].hasOwnProperty("input_error")&&(this.fields[e].input_error="")},setApiData(e){this.record=e,this.$forceUpdate(),this.prepareFieldsData()},setFieldsData(e){this.record.document_version=e.document_version,this.record.fields=e.fields,this.record.tables=e.tables,this.$forceUpdate(),this.prepareFieldsData()},windowResize(){let e=$("#image_container");this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight,this.viewBox="0 0 "+String(this.imageWidth)+" "+String(this.imageHeight),this.$forceUpdate(),setTimeout((()=>{this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.restrictDrawing(),this.getImageDetails(),this.removeMagnifier()}),20)},handleScroll(){this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays()},isButtonToggleDisable(){return!!src_constants_js__WEBPACK_IMPORTED_MODULE_23__.at.includes(this.record.status)},toggleFieldsVisibility(e,t,i,s){if(this.isButtonToggleDisable())return;let o={};this.layout.forEach(((a,l)=>{a.name==t&&(o=a,a.buttons.forEach(((e,t)=>{e.name==i&&(e.selected=!s)})));this.handleTabGroupLabels(o,t);a.rows.forEach(((t,i)=>{t.forEach(((t,i)=>{let o=t.field_name;e.some((e=>e===o))&&(t.visibile=!s)}))}))})),this.prepareLayoutForTemplate(),this.$forceUpdate(),setTimeout((()=>{this.refreshCanvas()}),10)},toggleGroupFieldsVisibility(e,t,i,s,o){if(this.isButtonToggleDisable())return;let a={};this.layout.forEach(((l,r)=>{l.name==o&&(a=l,l.rows.forEach(((o,a)=>{o.forEach(((o,a)=>{let l=o.field_name;l==t.field_name&&(o.def[i].selected=!s),e===l&&(o.visibile=!s)}))})))})),this.prepareLayoutForTemplate(),this.refreshCanvas()},handleTabGroupLabels(e,t){let i=!1,s={};if(0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype||"tax_details"!==t)return s;for(let o of e.buttons)if("full"==o.name&&!0===o.selected){i=!0;break}if(i)return s;for(let o of e.buttons)if("full"!==o.name&&!0===o.selected){s=o.alt_translation_keys;break}return s},deleteRuleConfirmation(e,t){this.deleteConfirmationDlg=!0,this.selectedInputObj=e,this.selectedGroupButtons=t},deleteRule(e){this.record.hasOwnProperty("clear_rules_fields_for_user")||(this.record.clear_rules_fields_for_user=[]);let t=!1,i=[];if(this.selectedGroupButtons&&this.selectedGroupButtons.length>0)for(const s of this.selectedGroupButtons)s.fields.includes(e.field_name)&&(i=s.fields,t=!0);t||i.push(e.field_name),this.record.fields.forEach(((e,t)=>{i.includes(e.name)&&(this.record.clear_rules_fields_for_user.push(e.name),this.fields[e.name]=Object.assign(this.fields[e.name],{color:null,value:"",confidence:0,formatted_value:"",content:"",validation_code:null,coords:null,page:null}),this.record.fields.splice(t,1))})),this.refreshCanvas(),setTimeout((()=>{this.enableOrDisableExportButton()}),0)},refreshCanvas(){this.prepareRectangles(),this.$forceUpdate(),this.removeBordersFromRectangles(),this.removeAllConnectionLines(),this.removeExistingConfirmationOverlays(),this.getImageDetails(),this.redraw()},checkButtonsVisibilty(e,t){var i={};return t.forEach(((t,s)=>{t.forEach(((t,s)=>{let o=t.field_name;e.buttons.forEach(((e,t)=>{let s=Object.values(e.fields);i.hasOwnProperty(e.name)||(i[e.name]=!1),-1!==s.indexOf(o)&&(this.fields[o].value||this.fields[o].is_required||"error-border-left"==this.fields[o].color)&&(i[e.name]=!0)}))}))})),"tax_details"===e.name&&this.makeFullTaxDetailRowVisible(i),i},addFieldsButtonsVibility(){this.layout.forEach(((e,t)=>{if(this.addVibilityButtons(e),e.buttons){let t=this.checkButtonsVisibilty(e,e.rows);e.rows.forEach(((i,s)=>{i.forEach(((i,s)=>{let o=i.field_name;e.buttons.forEach(((e,s)=>{let a=Object.values(e.fields);-1!==a.indexOf(o)&&(!0===t[e.name]?(e.selected=!0,i.visibile=!0):(e.selected=!1,i.visibile=!1))}))}))}))}}))},makeFullTaxDetailRowVisible(e){let t=!1;for(let[i,s]of Object.entries(e))s&&(t=!0);t||(e["full"]=!0)},addVibilityButtons(e){"tax_details"===e.name&&(e.buttons=[{selected:!1,name:"full",translation_key:"full",fields:["net_amount","tax_amount","tax_rate","tax_code"]},{selected:!1,name:"reduced",translation_key:"reduced",fields:["net_amount_2","tax_amount_2","tax_rate_2","tax_code_2"],alt_translation_keys:{net_amount_2:"net_amount",tax_amount_2:"tax_amount",tax_rate_2:"tax_rate",tax_code_2:"tax_code_2"}},{selected:!1,name:"free",translation_key:"free",fields:["net_amount_3","tax_amount_3","tax_rate_3","tax_code_3"],alt_translation_keys:{net_amount_3:"net_amount",tax_amount_3:"tax_amount",tax_rate_3:"tax_rate",tax_code_3:"tax_code_3"}}])},triggerNewClassification(){this.restartClassificationDlg=!1;const e=new CustomEvent("trigger_classification",{detail:{skipConfirmation:!0}});document.dispatchEvent(e)},resetClassification(){this.setLanguage(),this.setDocType()},startMagnifyGlass(e){let t=document.getElementById("zoom");if(t.classList.contains("enable-glass"))return;let i=$(".screenshot");this.restrictDrawing();const s=$("#glassBtn");s.classList.add("glass-active"),t.classList.add("enable-glass"),t.style.backgroundImage="url("+i.src+")",this.magnifyGlass={Ix:i.offsetLeft,Iy:i.offsetTop,Zw:t.offsetWidth,Zh:t.offsetHeight,ratio:i.naturalWidth/i.width};const o=$("#draw");o.addEventListener("pointermove",this.updateMagnifier),t.addEventListener("pointermove",this.updateMagnifier)},updateMagnifier(e){let t=document.getElementById("zoom");if(!t.classList.contains("enable-glass"))return;var i,s,o;e.preventDefault(),i=this.getCursorPos(e),s=i.x,o=i.y,document.body.classList.add("active");let a=50,l=20,r=l,n=a+30;t.style.top=i.y-this.magnifyGlass.Zh/2+a+"px",t.style.left=i.x-this.magnifyGlass.Zw/2+l+"px";let _=(this.magnifyGlass.Ix-s)*this.magnifyGlass.ratio+this.magnifyGlass.Zw/2-r,d=(this.magnifyGlass.Iy-o)*this.magnifyGlass.ratio+this.magnifyGlass.Zh/2-n,c=_+"px "+d+"px";t.style.backgroundPosition=c},getCursorPos(e){var t,i=0,s=0;e=e||window.event;let o=$(".screenshot");return t=o.getBoundingClientRect(),i=e.pageX-t.left,s=e.pageY-t.top,i-=window.pageXOffset,s-=window.pageYOffset,{x:i,y:s}},removeMagnifier(){const e=$("#glassBtn");e&&e.classList.remove("glass-active");const t=document.getElementById("zoom");t&&(t.classList.remove("enable-glass"),t.removeEventListener("pointermove",this.updateMagnifier,!1));const i=$("#draw");i&&i.removeEventListener("pointermove",this.updateMagnifier,!1),document.body.classList.remove("active"),this.magnifyGlass=null},calculateRowColSize(e,t){let i=e.length;return e.length>1&&12==t.input_size?" col-12":" col-"+12/i},mouseClicked(e){this.removeMagnifier()},currentPage(){return this.page},setConversionFields(){this.conversionFields=this.getConversionFields()},dblClickToSelect(e){rectCordinate={startX:e.layerX,startY:e.layerY,endX:e.layerX,endY:e.layerY},this.getTextByCoordinates(rectCordinate)},deleteRuleFromConnection(){let e={};e.field_name=this.connectionId,this.deleteRule(e)},getTrashIcon(e){let t=this.fields[e],i="";return t?(i=!t.deleted&&t.rule?`<span id='deleteRuleFromConnection'>\n          <i connectionId='${e}' style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.6em;' class='fa fa-trash'></i>\n          </span>`:`<span class='divOverlayWrong'>\n                    <i connectionId='${e}' style='display: inline-block;border-radius: 50px;box-shadow: 0px 0px 2px #888;padding: 0.5em 0.6em;' class='fa fa-trash'></i>\n                  </span>`,i):i},handleFormatWarning(){this.doc2AppMode&&"XML_INVOICE"!=this.record.doc_type&&!0===this.extractable&&(this.format_warning_dismiss=this.showRulesNotFoundToast(this.record,window.location.href))},setDocType(){if(this.record.doc_type&&(this.selected_doc_type=this.record.doc_type),!this.record.sub_doc_type)return;const e=this.getDocTypeSubDocType(this.sub_doc_type);e&&e.hasOwnProperty("doc_type_key")&&e.hasOwnProperty("sub_doc_type")&&(this.selected_doc_type=this.sub_doc_type)},handleLanguageOptions(){return __awaiter(this,void 0,void 0,(function*(){yield this.fetchLanguageOptions(),this.setLanguage()}))},setLanguage(){const e=this.record.doc_origin;e&&(this.language_origin=e)},fetchLanguageOptions(){return __awaiter(this,void 0,void 0,(function*(){let e;try{let t=yield(0,pages_APIs__WEBPACK_IMPORTED_MODULE_28__.O_)();e=yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(pages_APIs__WEBPACK_IMPORTED_MODULE_28__.hi.get_items_from_dictionary+"DOC_ORIGIN",{headers:{Authorization:t}})}catch(t){return void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}if(e.data&&0!==Object.keys(e.data).length){this.language_origin_list=[];for(const t in e.data){let i=e.data[t],s=i.description?i.description:"";this.language_origin_list.push(Object.assign({},{value:i.value,label:i.label,description:s.replaceAll("\\n","<br />")}))}(0,src_utils_cacheHelper__WEBPACK_IMPORTED_MODULE_42__.w4)("language_origin_list",this.language_origin_list)}}))},openSelectionPopup(e){this.selection_popup_data["title"]=this.$t("selection_popup_heading"),this.selection_popup_data["data"]=e,this.selection_popup_data["value_1"]={key:"suggested",value:e.formatted_value,disable:!e.value||""==e.value,label:this.$t("suggested_value")};let t=e.extracted_value;this.selection_popup_data["value_2"]={key:"extracted",value:t.formatted_value,disable:!t.value||""==t.value,message:t.message&&""!=t.message?t.message:"",label:this.$t("extracted_value")},this.showSelectionPopupDialog=!0},selectionPopupSelected(e){if(!e.detail||!e.detail.data||!e.detail.data.data||!e.detail.selected)return;this.showSelectionPopupDialog=!1;let t=e.detail.data.data,i=t.coords;"extracted"==e.detail.selected&&(t=t.extracted_value),this.fields[this.connectionId].value=t.value,this.fields[this.connectionId].content=t.text,this.fields[this.connectionId].api_save=!0,this.fields[this.connectionId].formatted_value=t.formatted_value,this.inputValueChanges(this.connectionId,i,this.page),this.$forceUpdate(),this.hideLoading(),this.prepareRectangles()},selectionPopupClosed(){this.showSelectionPopupDialog=!1,this.enableDrawing(!0)},getSupplier(){let e="supplier_name",t="";for(let i of this.record.fields)if(i.name===e&&i.formatted_value){t=i.formatted_value;break}return t},enableBlockedSupplier(){return __awaiter(this,void 0,void 0,(function*(){this.showLoading();try{if(!this.record.filter_values||!(this.record.filter_values.length>0))throw"No Supplier found to unblock";let e=[];if(e=yield this.getBlockedSuppliersList(),e.length>0){let t=0;for(const i of e){const e=yield this.deleteRecord(i);"true"==e&&t++}}const t=yield this.restartExport(this.record.doc_id);if(!t)throw"Failed to unblock";this.hideLoading(),this.$router.push("/dashboard")}catch(e){return this.hideLoading(),void this.showErrorToast(this.$t("pages.messages.ERROR_INTERNAL_OCCUR"))}}))},getBlockedSuppliersList(){return __awaiter(this,void 0,void 0,(function*(){let e;try{let t=yield(0,pages_APIs__WEBPACK_IMPORTED_MODULE_28__.O_)();if(e=yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(pages_APIs__WEBPACK_IMPORTED_MODULE_28__.hi.get_blocked_supplier_list,{headers:{Authorization:t}}),!1===e.data.success)throw e.data.message;if(!(e.data.length>0))return[];let i=this.getSupplier();if(!i)throw this.$t("pages.messages.SUPPLIER_NAME_MISSING");let s=[];return s=e.data.filter((e=>{if(e.supplier!==i)return!1;let t=!0;return this.record.filter_values.forEach((function(i,s){let o="filterID"+(s+1);e.hasOwnProperty(o)&&e[o]==i||(t=!1)})),e.id&&e.org_id||(t=!1),t})),s}catch(t){throw t}}))},deleteRecord(e){return __awaiter(this,void 0,void 0,(function*(){if(!e.id||!e.org_id)return"ID not found";let t;try{let i=yield(0,pages_APIs__WEBPACK_IMPORTED_MODULE_28__.O_)();if(t=yield axios__WEBPACK_IMPORTED_MODULE_0___default()["delete"](pages_APIs__WEBPACK_IMPORTED_MODULE_28__.hi.delete_blocked_supplier+e.id,{headers:{Authorization:i}}),!1===t.data.success)throw t.data.message;return"true"}catch(i){throw i}}))},restartExport(e){return __awaiter(this,void 0,void 0,(function*(){try{let t=yield(0,pages_APIs__WEBPACK_IMPORTED_MODULE_28__.O_)();return yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(pages_APIs__WEBPACK_IMPORTED_MODULE_28__.hi.restart_document+e,{headers:{Authorization:t}}),!0}catch(t){throw t}}))},calculateValueOnCalulatorClick(row){return __awaiter(this,void 0,void 0,(function*(){try{let field_name=row.field_name;this.removeFieldInputError(field_name);let calculator_formula=row.calculator_formula,translated_formula=calculator_formula,result2=null,isAnyFieldEmpty=!1;var pattern=/\[(.*?)\]/g;const values=[];while(null!==(result2=pattern.exec(calculator_formula))){const e=result2[1];let t=this.fields[e].formatted_value;if(!t||""==t){isAnyFieldEmpty=!0;break}values.push({key:t,value:t})}if(1==isAnyFieldEmpty)return void this.showErrorToast(this.$t("pages.messages.ERROR_CALCULATION_NOT_POSSIBLE"));const formatted_values=yield this.formatMultiValues(values,this.amount_format_locale);while(null!==(result2=pattern.exec(calculator_formula))){const e=result2[1];let t=this.fields[e].formatted_value;const i=this.searchValueByKey(t,formatted_values),s="["+e+"]";translated_formula=translated_formula.replace(s,i)}let calculated_value=eval(translated_formula).toFixed(2);field_name.startsWith("tax_rate")&&(calculated_value=parseFloat(calculated_value).toFixed(1)),this.fields[field_name].value=calculated_value,this.fields[field_name].formatted_value=yield this.formatValue(this.fields[field_name].value,"en_US",this.amount_format_locale),this.fieldCaluclations(),this.updateImportJson(field_name,null,this.page,"calculated"),this.$forceUpdate()}catch(err){}}))},isCalculatorIconAllowed(e){try{let i=void 0!=e.calculator&&null!=e.calculator&&1==e.calculator&&(""==this.fields[e.field_name].formatted_value||null==this.fields[e.field_name].formatted_value);if(0==i)return!1;let s=e.calculator_formula;var t=/\[(.*?)\]/g;let o=null,a=!1;while(null!==(o=t.exec(s))){const e=o[1],t=this.fields[e].value?this.fields[e].value:this.fields[e].formatted_value;if(!t||""==t){a=!0;break}}return 1!=a}catch(i){return!1}},isDebugFlagHandler(){this.is_debug=!1,this.$route.query&&"true"===this.$route.query.is_debug&&(this.is_debug=!0)},viewOCRDocument(){let e=this.$router.resolve({path:"/ocr-document/"+this.docId+"/"+this.page});window.open(e.href,"_blank","location=yes,toolbar=yes,scrollbars=yes,resizable=yes,left=500,width=1500,height=1000")},displayConfidenceAndDeleteButton(e){return!this.fields[e.field_name].deleted&&this.fields[e.field_name].rule||this.getLowerConfidence(this.fields[e.field_name])},fieldValidationError(e){let t="REQUIRED";return e&&(t=e),t},renderTooltip(e){return!this.isReadOnly&&(!!this.fields[e].validation_code||!(!this.fields[e].is_required||""!=this.fields[e].formatted_value&&null!=this.fields[e].formatted_value))},toFlowScreen(e){this.$router.push("/doc_flow/"+e)},displaySplitDocumentView(){this.isReadOnly||(this.split_document=!0)},UpdateEnumList(e,t){this.layout.forEach(((i,s)=>{i.rows.forEach(((i,s)=>{i.forEach(((i,s)=>{i.field_name==e&&(i.options=t)}))}))}))},filterlistEvent(e,t,i,s){const o=this.getListOfValuesAsSelectList(s.list_of_values);t(e?()=>{const t=e.toLowerCase(),i=o.filter((e=>e.label.toLowerCase().indexOf(t)>-1));this.fields[s.field_name].options=i}:()=>{this.fields[s.field_name].options=o})},isDeleteRuleButton(e,t,i,s){return 0!=this.extractable&&("lable_area"==s?!(e&&"tax_details"===e.name&&e.buttons&&t.length>1):!!(e&&"tax_details"===e.name&&e.buttons&&t.length>1&&t[t.length-1].field_name==i.field_name)||void 0)},validateField(e){this.selectNextRedField(e),setTimeout((()=>{this.enableOrDisableExportButton()}),5)},displayFieldErrors(){this.prepareTableErrors(),this.lineitem_error=this.record["table_has_error"]}},setup(){const e=(0,quasar_src_composables_use_quasar_js__WEBPACK_IMPORTED_MODULE_50__.Z)(),t=(quasar_src_plugins_Cookies_js__WEBPACK_IMPORTED_MODULE_25__.Z.set("dontAsk",""),quasar_src_plugins_Cookies_js__WEBPACK_IMPORTED_MODULE_25__.Z.get("dontAsk"),(0,src_store_main__WEBPACK_IMPORTED_MODULE_41__.H_)()),{record:i,doctype:s,language_origin:o,confirmationForPoConnectionReset:a,error:l,notifications:r,sub_doc_type:n,get_cached_data_id:_,selected_doc_type:d,extractable:c,fieldsErrorArray:u,amount_format_locale:h,tb_version:p}=(0,pinia__WEBPACK_IMPORTED_MODULE_51__.Jk)(t),{getDocumentById:m,setRecordFromCache:f,setDataToCache:g,removeCache:v,resetDocStore:E}=t,w=(0,src_store_main__WEBPACK_IMPORTED_MODULE_41__.At)(),{doc_types_sub_types_list:y}=(0,pinia__WEBPACK_IMPORTED_MODULE_51__.Jk)(w);let D={},b=[],O=(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1),C=(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1),P=(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1);const M=(0,src_store_main__WEBPACK_IMPORTED_MODULE_41__.TB)(),{releaseDocLock:k}=M,{doc_lock:x}=(0,pinia__WEBPACK_IMPORTED_MODULE_51__.Jk)(M),A=(0,src_store_main__WEBPACK_IMPORTED_MODULE_41__.A3)(),{getLanguageOptions:L}=A,I=(0,src_store_main__WEBPACK_IMPORTED_MODULE_41__.fI)(),{master_lookup_type:R,model:T,advance_filters:W,selected_row:B,populate_row_to_view:U,master_data_fields_map:q}=(0,pinia__WEBPACK_IMPORTED_MODULE_51__.Jk)(I),{resetMasterDataStore:F,isContentChanged:K,isCurrentFieldPrimary:S}=I,V=(0,src_store_main__WEBPACK_IMPORTED_MODULE_41__.wr)(),{getListOfValuesAsSelectList:$,populateListsAndValues:z,addNameToLovList:H}=V,{getListOfValues:N}=(0,pinia__WEBPACK_IMPORTED_MODULE_51__.Jk)(V),Z=(0,src_store_main__WEBPACK_IMPORTED_MODULE_41__.V_)(),{formatMultiValues:j,formatValue:Y,searchValueByKey:G}=Z,Q=(0,src_store_main__WEBPACK_IMPORTED_MODULE_41__.b8)(),{connect:X}=Q,J=(0,src_store_main__WEBPACK_IMPORTED_MODULE_41__.VF)(),{getOrgSettings:ee,getUserSettingWithExpiry:te}=J;return{isCurrentFieldPrimary:S,addNameToLovList:H,getUserSettingWithExpiry:te,getOrgSettings:ee,connectWebSocket:X,searchValueByKey:G,amount_format_locale:h,formatMultiValues:j,formatValue:Y,fieldsErrorArray:u,selected_doc_type:d,removeCache:v,resetDocStore:E,setDataToCache:g,setRecordFromCache:f,get_cached_data_id:_,getLanguageOptions:L,populateListsAndValues:z,getListOfValues:N,getListOfValuesAsSelectList:$,ms_view_model:T,master_lookup_type:R,ms_advance_filters:W,isContentChanged:K,resetMasterDataStore:F,master_data_row:B,populate_row_to_view:U,master_data_fields_map:q,extractable:c,fuzzyDialog:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1),master_lookup_columns:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)({}),view_model:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)({}),sub_doc_type:n,doc_types_sub_types_list:y,notifications:r,getDocumentById:m,record:i,doctype:s,language_origin:o,confirmationForPoConnectionReset:a,doc_fetch_error:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(l),doc_lock:x,dropdown_store:w,releaseDocLock:k,page:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(1),showTooltip:O,showTooltipWithHide:C,showTooltipWithClose:P,fields:D,fieldsNotDisplayed:b,image:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(""),layout:b,images:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)({}),baseUrl:"https://api.docbits.com",isReadOnly:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1),componentType:"input",lineitem_count:0,lineitem_error:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1),doc2AppMode:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1),is_debug:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1),document_version:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(0),showNotification(t){e.notify({message:t,color:"primary",position:"top"})},doc_type_list:b,language_origin_list:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(b),confirm_supplier_unblock:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1),ai_rules:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(0),ai_fields:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(0),deleteConfirmationDlg:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1),selectedInputObj:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(b),selectedGroupButtons:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(b),restartClassificationDlg:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(!1),textApiResponse:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)(),textConfirmationMsg:(0,vue__WEBPACK_IMPORTED_MODULE_47__.iH)("")}}})},23197:(e,t,i)=>{i.d(t,{Z:()=>p});var s=i(83673),o=i(62323);function a(e,t,i,a,l,r){const n=(0,s.up)("q-btn"),_=(0,s.up)("q-tooltip");return(0,s.wg)(),(0,s.j4)(_,{onShow:a.onShow,class:(0,o.C_)(["tooltip bg-transparent q-pa-none",`tooltip-arrow-${a.arrowClass}`]),ref:"tooltipRef"},{default:(0,s.w5)((()=>[(0,s._)("div",{class:(0,o.C_)(["tooltip-text text-body1 text-weight-bold relative-position",`bg-${i.bgColor} text-${i.color}`])},[(0,s.WI)(e.$slots,"default"),i.closeable?((0,s.wg)(),(0,s.j4)(n,{key:0,onClick:a.closeTooltip,class:"tooltip-close absolute-top-right",icon:"close",size:"sm",flat:"",round:"",dense:""},null,8,["onClick"])):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,o.C_)(["tooltip-arrow absolute",`bg-${i.bgColor}`])},null,2)])),_:3},8,["onShow","class"])}i(65363);var l=i(61959);const r={props:{arrow:{type:String,default:"top"},duration:{type:Number,default:null},closeable:{type:Boolean,default:!1},bgColor:{type:String,default:"grey-10"},color:{type:String,default:"white"}},setup(e){const t=(0,l.iH)(null),i=(0,s.Fl)((()=>{let t="top";t=e.arrow.replace(" ","-");let i=["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-top","left-bottom","right","right-top","right-bottom"];return i.includes(t)?t:"top"})),o=()=>{e.duration&&setTimeout((()=>{t.value.hide()}),e.duration)},a=()=>{t.value.hide()};return{arrowClass:i,tooltipRef:t,onShow:o,closeTooltip:a}}};var n=i(74260),_=i(5363),d=i(2165),c=i(7518),u=i.n(c);const h=(0,n.Z)(r,[["render",a]]),p=h;u()(r,"components",{QTooltip:_.Z,QBtn:d.Z})},77414:(e,t,i)=>{i.d(t,{Z:()=>k});var s=i(62323),o=i(83673);const a={key:0,class:"full-width"},l={class:"row q-pl-sm q-pr-sm"},r={class:"col-sm-6 secondary-c-text text-h6 q-pt-sm q-pb-sm text-weight-bold"},n={class:(0,s.C_)("row full-width ")},_={key:0,class:"col-6 q-pt-sm qr-fields"},d={class:"row"},c={class:"row"},u={class:(0,s.C_)("row full-width ")},h={key:0,class:"col-6 q-mt-sm qr-fields"},p={class:"row"},m={class:"row"};function f(e,t,i,f,g,v){const E=(0,o.up)("q-input"),w=(0,o.up)("q-separator");return e.doc_loaded&&e.hasQRInfo()?((0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",l,[(0,o._)("div",r,(0,s.zw)(e.$t("qr_code")),1),(0,o._)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.record.qr_code_data,((t,i)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i},[t&&"object"!==typeof t?((0,o.wg)(),(0,o.iD)("div",_,[(0,o._)("div",d,(0,s.zw)(e.makeLabelFromFieldName(i)),1),(0,o._)("div",c,[(0,o.Wm)(E,{"data-field-name":i,outlined:"",disable:e.isReadOnly,class:(0,s.C_)(" bg-disable full-width "+i+"_input "),type:"text",modelValue:e.record.qr_code_data[i],"onUpdate:modelValue":t=>e.record.qr_code_data[i]=t},null,8,["data-field-name","disable","class","modelValue","onUpdate:modelValue"])])])):(0,o.kq)("",!0)],64)))),128))]),e.show_more?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:0,class:"row link cursor-pointer font-size-14",onClick:t[0]||(t[0]=t=>e.show_more=!0)},(0,s.zw)(e.$t("show_more")),1)),e.show_more?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.record.qr_code_data,((t,i)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:i},[t&&"object"===typeof t?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",{class:(0,s.C_)("row full-width q-pt-sm pr-14 "+i+("object"===typeof t?" secondary-c-text text-weight-bold ":""))},(0,s.zw)(e.makeLabelFromFieldName(i)),3),(0,o._)("div",u,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t,((t,a)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:a},[t?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("div",p,(0,s.zw)(e.makeLabelFromFieldName(a)),1),(0,o._)("div",m,[(0,o.Wm)(E,{"data-field-name":a,outlined:"",disable:e.isReadOnly,class:(0,s.C_)(" bg-disable full-width "+a+"_input "),type:"text",modelValue:e.record.qr_code_data[i][a],"onUpdate:modelValue":t=>e.record.qr_code_data[i][a]=t},null,8,["data-field-name","disable","class","modelValue","onUpdate:modelValue"])])])):(0,o.kq)("",!0)],64)))),128))])],64)):(0,o.kq)("",!0)],64)))),128)),(0,o._)("div",{class:"row link cursor-pointer font-size-14",onClick:t[1]||(t[1]=t=>e.show_more=!1)},(0,s.zw)(e.$t("show_less")),1)],64)):(0,o.kq)("",!0)]),(0,o.Wm)(w,{class:"amn q-mt-xl q-mt-sm q-ma-sm"})])):(0,o.kq)("",!0)}var g=i(61959),v=i(60727),E=i(10321);const w=(0,o.aZ)({el:"#app",mixins:[],components:{},watch:{doc_loaded:{handler:function(e,t){e&&(this.load_view=!0)}}},mounted:function(){window.qr=this},methods:{hasQRInfo(){return this.doc_loaded&&this.record.hasOwnProperty("qr_code_data")&&null!=this.record.qr_code_data},makeLabelFromFieldName(e){return e.replace(/_/g," ").toUpperCase()}},setup(){const e=(0,v.H_)(),{doc_loaded:t,record:i}=(0,E.Jk)(e);return{doc_loaded:t,record:i,isReadOnly:(0,g.iH)(!0),load_view:(0,g.iH)(!1),show_more:(0,g.iH)(!1)}}});var y=i(74260),D=i(64689),b=i(65869),O=i(86115),C=i(7518),P=i.n(C);const M=(0,y.Z)(w,[["render",f]]),k=M;P()(w,"components",{QInput:D.Z,QSeparator:b.Z,QField:O.Z})},46814:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Dt});var s=i(83673),o=i(62323),a=i(98880);const l=e=>((0,s.dD)("data-v-33b1e251"),e=e(),(0,s.Cn)(),e),r={class:"row q-pl-md q-pr-md back-white"},n={class:"secondary-c-text text-h6"},_=l((()=>(0,s._)("img",{width:"24",src:"back_new.svg"},null,-1))),d={class:"primary-dashboard"},c=l((()=>(0,s._)("img",{width:"24",src:"back_new.svg"},null,-1))),u={style:{"vertical-align":"middle","margin-left":"10px","font-size":"20px",cursor:"pointer"}},h={key:1,class:"row q-pl-md q-pr-md q-pb-md"},p={class:"max-width-120 back-white",id:"left_section",ref:"left_section"},m={class:"full-width q-ma-sm scroll-area-height"},f={class:"row justify-center q-pl-md q-pr-md q-pt-md"},g={class:"secondary-c-text text-h6 text-weight-bold"},v={class:"full-width left-scroll-area-height scrolle-y q-pa-sm"},E=["data-id","src"],w={class:"right_section_2a q-pl-sm",id:"right_section",ref:"right_section"},y={class:"row"},D={class:"col-xs-12 col-sm-7 col-md-7 col-lg-7 q-pa-sm scroll-area-height"},b={class:"back-white mb-4 image_control_panel"},O={class:"row"},C={class:"panel-left col-sm-6 col-md-6 col-lg-6"},P={class:"row"},M={class:"panel-middle col-sm-1 col-md-1 col-lg-1 mt-8"},k={class:"page-numbers"},x={class:"panel-right col-sm-5 col-md-5 col-lg-5"},A=l((()=>(0,s._)("img",{width:"24",height:"24",src:"ocr_icon.svg",class:"black_to_white"},null,-1))),L=l((()=>(0,s._)("img",{width:"24",height:"24",src:"loupe.svg",class:"black_to_white"},null,-1))),I=l((()=>(0,s._)("img",{width:"24",height:"24",src:"split.svg",class:"black_to_white"},null,-1))),R=l((()=>(0,s._)("img",{width:"24",height:"24",src:"improve_document.svg",class:"black_to_white"},null,-1))),T=l((()=>(0,s._)("i",{class:"notranslate material-icons q-icon","aria-hidden":"true",role:"presentation"},"account_tree",-1))),W={class:"float-right mt-4"},B={class:"float-right mt-4"},U=(0,s.Uk)("Debug Field Validations. Results will be displayed in the console after clicking it"),q={class:"float-right"},F={class:"full-width right-content-height",id:"image_container"},K={class:"full-width right-content-height q-pa-sm scrolle-y",id:"image_scrolle",style:{position:"relative"}},S=["src","width"],V=["width","height","viewBox"],$={id:"marquee",ref:"marquee",x:"450",y:"420",width:"150",height:"150"},z={id:"boxes",ref:"boxes"},H={class:"col-xs-12 col-sm-5 col-md-5 col-lg-5 q-pa-sm full-height"},N={class:"back-white full-width scrolle-y scroll-area-height",id:"field_scrolle"},Z={class:"row q-pl-sm q-pr-sm"},j=["innerHTML"],Y={class:"back-white row q-pl-sm q-pr-sm",style:{height:"70px"}},G={class:"full-width"},Q={key:0},X={style:{display:"inline-table",position:"relative",top:"-1px"}},J={class:""},ee=l((()=>(0,s._)("br",null,null,-1))),te={class:"ai-indicator"},ie={class:""},se=l((()=>(0,s._)("br",null,null,-1))),oe={class:"ai-indicator"},ae={key:0,class:"full-width"},le={class:"row q-pl-sm q-pr-sm"},re={class:"col-sm-6 secondary-c-text text-h6 q-pt-sm q-pb-sm text-weight-bold"},ne={class:"col-sm-6 secondary-c-text-grey text-h6 q-pt-sm q-pb-sm text-weight-bold"},_e={key:0,class:"col-sm-12 col-md-12 col-lg-12"},de={class:"row full-width q-pt-sm"},ce=["src"],ue={key:1,class:"row q-pt-sm pr-14"},he={key:0,class:"text-red"},pe={key:0,class:"width-70px"},me={key:0,class:"float-right text-teal-5 mt-3"},fe=["onClick"],ge={class:"row full-width"},ve=["id","child_type"],Ee=["id"],we={class:"inner-field-actions",style:{height:"60px"}},ye={class:"row items-center justify-end"},De=["onClick"],be={class:"inner-field-actions",style:{height:"60px"}},Oe={key:0,class:"line-error-tooltip"},Ce={class:"inner-field-actions",style:{height:"60px"}},Pe=["onClick"],Me={key:0,class:"row q-pl-sm q-pr-sm"},ke={class:"col-sm-8 secondary-c-text text-h6 q-pt-sm q-pb-sm text-weight-bold"},xe={class:"float-left p-t-0"},Ae=l((()=>(0,s._)("div",{class:"col-sm-4 secondary-c-text text-h6 q-pt-sm q-pb-sm text-weight-bold"},null,-1))),Le={class:"col-sm-12 col-md-12 col-lg-12 q-pt-sm"},Ie={class:"row"},Re={class:"lineitem_count col-sm-6 col-md-6 col-lg-6"},Te={id:"lineitem_count",class:"col-sm-12 col-md-12 col-lg-12 input-text field-icon"},We={style:{"padding-left":"5px"}},Be={key:3,class:"row q-pt-xl"},Ue=l((()=>(0,s._)("div",{class:"q-mb-md"},null,-1))),qe={key:2,class:"row q-pl-md q-pr-md q-pb-md"},Fe={class:""},Ke={class:"text-weight-bold"},Se={style:{width:"100%"}},Ve=l((()=>(0,s._)("div",{class:"text-h6 text-bold"},"Need help deciding?",-1))),$e=(0,s.Uk)(" Don't think too much and just contact us to learn more about the application! "),ze={class:"row"},He={class:"q-ml-sm"},Ne={class:"q-ml-sm"};function Ze(e,t,i,l,Ze,je){const Ye=(0,s.up)("DocumentLock"),Ge=(0,s.up)("MessageBanner"),Qe=(0,s.up)("q-icon"),Xe=(0,s.up)("q-btn"),Je=(0,s.up)("q-tooltip"),et=(0,s.up)("import-multi-invoice"),tt=(0,s.up)("scriptBtn"),it=(0,s.up)("autoAccountingBtn"),st=(0,s.up)("autoTesting"),ot=(0,s.up)("q-item-label"),at=(0,s.up)("q-item-section"),lt=(0,s.up)("q-item"),rt=(0,s.up)("q-select"),nt=(0,s.up)("AIDialGauge"),_t=(0,s.up)("q-separator"),dt=(0,s.up)("q-btn-group"),ct=(0,s.up)("q-date"),ut=(0,s.up)("q-popup-proxy"),ht=(0,s.up)("q-avatar"),pt=(0,s.up)("q-input"),mt=(0,s.up)("autocomplete"),ft=(0,s.up)("tooltip"),gt=(0,s.up)("QRFieldsPanel"),vt=(0,s.up)("invoice-save-export"),Et=(0,s.up)("ErrorDocumentView"),wt=(0,s.up)("q-toolbar-title"),yt=(0,s.up)("q-toolbar"),Dt=(0,s.up)("q-card-section"),bt=(0,s.up)("q-card-actions"),Ot=(0,s.up)("q-card"),Ct=(0,s.up)("q-dialog"),Pt=(0,s.up)("masterDataLookup"),Mt=(0,s.up)("dialog-draggable"),kt=(0,s.up)("Loader"),xt=(0,s.up)("q-space"),At=(0,s.up)("Classification"),Lt=(0,s.up)("selection-popup"),It=(0,s.up)("restartClassificationPopup"),Rt=(0,s.up)("SplitDocument"),Tt=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(Ye,{document_version:e.document_version,trigger_document_lock:e.trigger_document_lock},null,8,["document_version","trigger_document_lock"]),e.isReadOnly?((0,s.wg)(),(0,s.j4)(Ge,{key:0,message:e.error_message,messageCategoryClass:"error-banner"},null,8,["message"])):(0,s.kq)("",!0),(0,s._)("div",r,[(0,s._)("div",n,[e.doc2AppMode?((0,s.wg)(),(0,s.j4)(Xe,{key:0,flat:"",rounded:"","data-cy":"dashboard",color:"primary",to:"/dashboard"},{default:(0,s.w5)((()=>[(0,s.Wm)(Qe,{class:"text-red-13",size:"sm"},{default:(0,s.w5)((()=>[_])),_:1}),(0,s._)("label",d,(0,o.zw)(e.$t("pages.screen2a.dashboard")),1)])),_:1})):(0,s.kq)("",!0),e.doc2AppMode?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(Xe,{key:1,flat:"",rounded:"",color:"primary",onClick:e.landing},{default:(0,s.w5)((()=>[(0,s.Wm)(Qe,{class:"text-red-13",size:"sm"},{default:(0,s.w5)((()=>[c])),_:1}),(0,s._)("label",u,(0,o.zw)(e.$t("pages.land.caption")),1)])),_:1},8,["onClick"]))])]),e.doc_fetch_error?((0,s.wg)(),(0,s.iD)("div",qe,[(0,s.Wm)(Et)])):((0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",p,[(0,s._)("div",m,[(0,s._)("div",f,[(0,s._)("span",g,(0,o.zw)(e.$t("pages.screen2a.pages")),1)]),(0,s._)("div",v,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.images,((i,a)=>((0,s.wg)(),(0,s.iD)("img",{"data-id":a,key:a,src:e.baseUrl+"/"+i.path,class:(0,o.C_)(["q-pa-xs shadow-5 full-width q-ma-sm cursor-pointer",a===this.page-1?"active":""]),style:{height:"auto"},onClick:t[0]||(t[0]=(...t)=>e.imageclicked&&e.imageclicked(...t))},null,10,E)))),128))])])],512),(0,s._)("div",w,[(0,s._)("div",y,[(0,s._)("div",D,[(0,s._)("div",b,[(0,s._)("div",O,[(0,s._)("div",C,[(0,s._)("div",P,[(0,s.Wm)(Xe,{id:"menu_btn",round:"",icon:"chevron_left",size:"xs",class:"text-grey-6 toggler-right p-t-40",onClick:t[1]||(t[1]=t=>e.toggleMenu())}),(0,s.Uk)(" "+(0,o.zw)(e.record.filename),1)])]),(0,s._)("div",M,[(0,s._)("span",k,(0,o.zw)(e.currentPage())+"/"+(0,o.zw)(e.images.length),1)]),(0,s._)("div",x,[(0,s.Wm)(Xe,{flat:"",class:"float-right pr-6 pl-6",onClick:e.viewOCRDocument},{default:(0,s.w5)((()=>[A,(0,s.Wm)(Je,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("ocr_view")),1)])),_:1})])),_:1},8,["onClick"]),(0,s.Wm)(Xe,{flat:"",id:"glassBtn",class:"float-right pr-6 pl-6",onClick:e.startMagnifyGlass},{default:(0,s.w5)((()=>[L,(0,s.Wm)(Je,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("pages.screen2a.magnify")),1)])),_:1})])),_:1},8,["onClick"]),e.extractable?((0,s.wg)(),(0,s.j4)(Xe,{key:0,flat:"",id:"split_document",class:"float-right pr-6 pl-6 btn-color",onClick:e.displaySplitDocumentView},{default:(0,s.w5)((()=>[I,(0,s.Wm)(Je,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("split_document_btn_tooltip")),1)])),_:1})])),_:1},8,["onClick"])):(0,s.kq)("",!0),(0,s.Wm)(Xe,{flat:"",id:"improve_document",class:"float-right pr-6 pl-6 btn-color",onClick:t[2]||(t[2]=t=>e.improveDocuments()),to:"/dashboard"},{default:(0,s.w5)((()=>[R,(0,s.Wm)(Je,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("improve_document_btn_tooltip")),1)])),_:1})])),_:1}),(0,s.Wm)(Xe,{flat:"",id:"document_flow","data-cy":"docflow",class:"float-right pr-6 pl-6 btn-color",onClick:t[3]||(t[3]=t=>e.toFlowScreen(this.$route.params.id))},{default:(0,s.w5)((()=>[T,(0,s.Wm)(Je,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("document_flow")),1)])),_:1})])),_:1}),(0,s.Wm)(et,{isDashboard:!1,docId:e.docId,onSetImages:e.setImages},null,8,["docId","onSetImages"]),(0,s._)("span",W,[(0,s.Wm)(tt)]),(0,s._)("span",B,[(0,s.Wm)(it,{isReadOnly:e.isReadOnly},null,8,["isReadOnly"])]),!0===this.is_debug?((0,s.wg)(),(0,s.j4)(Xe,{key:1,flat:"",icon:"adb",class:"float-right pr-6 pl-6",onClick:t[4]||(t[4]=t=>e.enableOrDisableExportButton(!0))},{default:(0,s.w5)((()=>[(0,s.Wm)(Je,null,{default:(0,s.w5)((()=>[U])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s._)("span",q,[(0,s.Wm)(st,{onSetApiData:e.setApiData},null,8,["onSetApiData"])])])])]),(0,s._)("div",F,[(0,s._)("div",K,[(0,s._)("div",{id:"zoom",style:(0,o.j5)('background-image: url("'+e.image+' "); top: 51px;left: 506px; background-position: 268.297px 82.6934px;')},null,4),(0,s._)("img",{class:"screenshot",src:e.image,width:e.imageWidth,id:"screenshot",ref:"screenshot",draggable:"false",onLoad:t[5]||(t[5]=(...t)=>e.getImageDetails&&e.getImageDetails(...t))},null,40,S),((0,s.wg)(),(0,s.iD)("svg",{width:e.imageWidth,height:e.imageHeight,viewBox:e.viewBox,id:"draw",ref:"draw",xmlns:"http://www.w3.org/2000/svg",style:{height:"auto","border-bottom":"5px dotted"}},[(0,s._)("rect",$,null,512),(0,s._)("g",z,null,512)],8,V))])])]),(0,s._)("div",H,[(0,s._)("div",N,[(0,s._)("div",Z,[(0,s.Wm)(rt,{disable:e.isReadOnly||!1===e.extractable,style:{width:"50%"},modelValue:e.selected_doc_type,"onUpdate:modelValue":[t[6]||(t[6]=t=>e.selected_doc_type=t),t[7]||(t[7]=t=>e.restartClassificationDlg=!0)],options:e.doc_types_sub_types_list,"emit-value":"","map-options":"",label:e.$t("pages.screen2a.doctype")},{option:(0,s.w5)((t=>[(0,s.Wm)(lt,(0,o.vs)((0,s.F4)(t.itemProps)),{default:(0,s.w5)((()=>[(0,s.Wm)(at,null,{default:(0,s.w5)((()=>[t.opt.doc_type_key?((0,s.wg)(),(0,s.j4)(ot,{key:0,class:(0,o.C_)("pl-20 "+(e.sub_doc_type===t.opt.value?"q-item--active":""))},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.opt.label),1)])),_:2},1032,["class"])):((0,s.wg)(),(0,s.j4)(ot,{key:1},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.opt.label),1)])),_:2},1024))])),_:2},1024)])),_:2},1040)])),_:1},8,["disable","modelValue","options","label"]),(0,s.Wm)(rt,{style:{width:"45%"},modelValue:e.language_origin,"onUpdate:modelValue":[t[8]||(t[8]=t=>e.language_origin=t),t[9]||(t[9]=t=>e.restartClassificationDlg=!0)],options:e.language_origin_list,"emit-value":"","map-options":"",label:e.$t("amount_date_format"),disable:e.isReadOnly||!1===e.extractable},{option:(0,s.w5)((e=>[(0,s.Wm)(lt,(0,o.vs)((0,s.F4)(e.itemProps)),{default:(0,s.w5)((()=>[(0,s.Wm)(at,null,{default:(0,s.w5)((()=>[(0,s.Wm)(ot,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.opt.label),1)])),_:2},1024),e.opt.description?((0,s.wg)(),(0,s.j4)(Je,{key:0},{default:(0,s.w5)((()=>[(0,s._)("span",{innerHTML:e.opt.description},null,8,j)])),_:2},1024)):(0,s.kq)("",!0)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","label","disable"])]),(0,s._)("div",Y,[(0,s._)("div",G,[(0,s.Wm)(nt),!0===e.is_debug?((0,s.wg)(),(0,s.iD)("div",Q,(0,o.zw)(this.record.filter_values&&Array.isArray(this.record.filter_values)&&this.record.filter_values.length>0?"FILTER VALUES: "+this.record.filter_values.join():"FILTER VALUES:  NOT FOUND"),1)):(0,s.kq)("",!0),(0,s._)("table",X,[(0,s._)("tr",null,[(0,s._)("td",null,[(0,s._)("span",J,(0,o.zw)(e.$t("ai_fields")),1),ee,(0,s._)("span",te,(0,o.zw)(e.ai_fields),1)]),(0,s._)("td",null,[(0,s._)("span",ie,(0,o.zw)(e.$t("ai_rules")),1),se,(0,s._)("span",oe,(0,o.zw)(e.ai_rules),1)])])]),(0,s.Wm)(_t,{class:"q-mt-md q-ma-sm",style:{"margin-top":"3px"}})])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.layout,(i=>((0,s.wg)(),(0,s.iD)(s.HY,{key:i["name"]},[i.is_hidden?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ae,[(0,s._)("div",le,[(0,s._)("div",re,(0,o.zw)(e.$t("pages.screen2a."+i.translation_key)==="pages.screen2a."+i.translation_key?i.title:e.$t("pages.screen2a."+i.translation_key)),1),(0,s._)("div",ne,[(0,s.Wm)(dt,{"v-if":i.buttons,class:"group-btn-panel",outline:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.buttons,((t,a)=>((0,s.wg)(),(0,s.j4)(Xe,{key:a,class:(0,o.C_)(t.selected?"q-btn-selected":""),outline:"",color:"#9d9898",label:e.$t("pages.screen2a."+t.translation_key),onClick:s=>e.toggleFieldsVisibility(t.fields,i["name"],t.name,t.selected)},null,8,["class","label","onClick"])))),128))])),_:2},1032,["v-if"])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.filteredRows,((a,l)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:l},[a.length>0?((0,s.wg)(),(0,s.iD)("div",_e,[(0,s._)("div",de,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.field_name,class:(0,o.C_)(e.calculateRowColSize(a,t))},["fields_group"==t.field_name?((0,s.wg)(),(0,s.j4)(dt,{key:0,class:"group-btn-panel pr-14 mt-15",outline:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.def,((a,l)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[1==a.is_hidden?((0,s.wg)(),(0,s.j4)(Xe,{key:l,class:(0,o.C_)(a.selected?"q-btn-selected":""),outline:"",color:"#9d9898",onClick:s=>e.toggleGroupFieldsVisibility(a.field,t,l,a.selected,i["name"])},{default:(0,s.w5)((()=>[(0,s.Wm)(Qe,{size:"md"},{default:(0,s.w5)((()=>[(0,s._)("img",{width:"26",src:a.icon},null,8,ce)])),_:2},1024),(0,s.Wm)(Je,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(a.label),1)])),_:2},1024)])),_:2},1032,["class","onClick"])):(0,s.kq)("",!0)],64)))),256))])),_:2},1024)):(0,s.kq)("",!0),0==t.is_hidden?((0,s.wg)(),(0,s.iD)("div",ue,[(0,s._)("div",{class:(0,o.C_)(t.field_name+" "+(e.displayConfidenceAndDeleteButton(t)?"label-area":"full-width"))},[(0,s.Uk)((0,o.zw)(e.displayFieldLabelFor2a(t))+" ",1),t.is_required?((0,s.wg)(),(0,s.iD)("span",he," * ")):(0,s.kq)("",!0)],2),e.displayConfidenceAndDeleteButton(t)?((0,s.wg)(),(0,s.iD)("div",pe,[!e.fields[t.field_name].deleted&&e.fields[t.field_name].rule?((0,s.wg)(),(0,s.iD)("span",me,[e.isDeleteRuleButton(i,a,t,"lable_area")&&!e.isReadOnly?((0,s.wg)(),(0,s.iD)("img",{key:0,onClick:s=>e.deleteRuleConfirmation(t,i.buttons),class:"q-pb-xs cursor-pointer",width:"18",height:"18",src:"trash-bin-default.svg"},null,8,fe)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),e.getLowerConfidence(e.fields[t.field_name])?((0,s.wg)(),(0,s.iD)("span",{key:1,class:(0,o.C_)(["float-right","error-border-left"===e.fields[t.field_name].color?"text-red":"text-teal-5"])},[(0,s.Wm)(Qe,{name:"check_circle_outline",class:"q-pb-xs"}),(0,s.Uk)(" "+(0,o.zw)(e.getLowerConfidence(e.fields[t.field_name]))+"%",1)],2)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)],2)))),128))]),(0,s._)("div",ge,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a,(l=>((0,s.wg)(),(0,s.iD)("div",{key:l.field_name,id:l.field_name,class:(0,o.C_)(e.calculateRowColSize(a,l)+(l.fuzzy_name&&null!=l.fuzzy_name?" field-icon":"")),child_type:l.hasOwnProperty("input_type")&&null!=l.input_type?l.input_type:"input"},[0==l.is_hidden?((0,s.wg)(),(0,s.iD)("div",{key:0,id:l.field_name+"_parent",class:"items-center pr-14 flex no-wrap row"},["enum"!=l.field_type.toLowerCase()?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Wm)(pt,{"data-field-name":l.field_name,outlined:"",autogrow:!(!l.hasOwnProperty("input_type")||null==l.input_type||"textarea"!==l.input_type),disable:e.isReadOnly||!!l.is_readonly,class:(0,o.C_)("full-width "+l.field_name+"_input "+e.fields[l.field_name].color+" "+(e.fields[l.field_name].input_error?" invalid-input ":"")+e.fields[l.field_name].input_error+" "+(l.hasOwnProperty("input_type")&&null!=l.input_type?l.input_type:"text")+(e.isReadOnly||l.is_readonly?" bg-disable ":"")),type:l.hasOwnProperty("input_type")&&null!=l.input_type?l.input_type:"text",onClick:t=>e.showConnectionFromField(l.field_name),onChange:t=>{e.fields[l.field_name].value=e.fields[l.field_name].formatted_value,e.changeEventHandler(l.field_name)},modelValue:e.fields[l.field_name].formatted_value,"onUpdate:modelValue":t=>e.fields[l.field_name].formatted_value=t,"data-cy":l.field_name,placeholder:null!=l.placeholder||void 0!=l.placeholder?l.placeholder:e.getPlaceholderByOrigin(this.language_origin,l.translation_key)},{append:(0,s.w5)((()=>[(0,s._)("div",we,[e.isCalculatorIconAllowed(l)?((0,s.wg)(),(0,s.j4)(Qe,{key:0,flat:"",dense:"",name:"calculate",size:"24px",class:"cursor-pointer",tabindex:"0",onClick:t=>e.calculateValueOnCalulatorClick(l)},null,8,["onClick"])):(0,s.kq)("",!0)]),"invoice_date"==l.translation_key?((0,s.wg)(),(0,s.j4)(Qe,{key:0,name:"event",class:"cursor-pointer",style:{"margin-bottom":"20px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(ut,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(ct,{modelValue:e.invoice_date,"onUpdate:modelValue":[t[10]||(t[10]=t=>e.invoice_date=t),t=>e.updateDateValue(l)],mask:e.getMaskByOrigin(l.translation_key)},{default:(0,s.w5)((()=>[(0,s._)("div",ye,[(0,s.wy)((0,s.Wm)(Xe,{label:"Close",color:"primary",flat:""},null,512),[[Tt]])])])),_:2},1032,["modelValue","onUpdate:modelValue","mask"])])),_:2},1024)])),_:2},1024)):(0,s.kq)("",!0),l.fuzzy_name&&null!=l.fuzzy_name?((0,s.wg)(),(0,s.j4)(ht,{key:1,class:"cursor-pointer"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:"fuzzy-search.svg",style:{width:"24px"},onClick:t=>e.masterDataSearchByField(l)},null,8,De)])),_:2},1024)):(0,s.kq)("",!0),(0,s._)("div",be,[e.fields[l.field_name].input_error?((0,s.wg)(),(0,s.j4)(Qe,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.w5)((()=>[(0,s.Wm)(Je,{anchor:"bottom right",self:"top right",class:"bg-red"},{default:(0,s.w5)((()=>[""!==e.fields[l.field_name].input_error?((0,s.wg)(),(0,s.iD)("div",Oe,(0,o.zw)(e.$t(e.fields[l.field_name].input_error)),1)):(0,s.kq)("",!0)])),_:2},1024)])),_:2},1024)):(0,s.kq)("",!0),e.extractable||0!=e.fields[l.field_name].is_valid?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(Qe,{key:1,dense:"",name:"check_circle",color:"primary",size:"24px",onClick:t=>e.validateField(l.field_name),class:(0,o.C_)("cursor-pointer validate-icon ")},{default:(0,s.w5)((()=>[(0,s.Wm)(Je,{anchor:"bottom right",self:"top right"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("validate_field")),1)])),_:1})])),_:2},1032,["onClick"]))])])),_:2},1032,["data-field-name","autogrow","disable","class","type","onClick","onChange","modelValue","onUpdate:modelValue","data-cy","placeholder"]),l.list_of_values?((0,s.wg)(),(0,s.j4)(mt,{key:0,input_class:l.field_name+"_input",parent_id:l.field_name+"_parent",options:e.getListOfValues(l.list_of_values)},null,8,["input_class","parent_id","options"])):(0,s.kq)("",!0)],64)):((0,s.wg)(),(0,s.j4)(rt,{key:1,outlined:"","data-field-name":l.field_name,options:e.fields[l.field_name].options,disable:e.isReadOnly||!!l.is_readonly,class:(0,o.C_)("full-width field-validation-select "+l.field_name+"_input "+e.fields[l.field_name].color+" "+(e.fields[l.field_name].input_error?" invalid-input ":"")+e.fields[l.field_name].input_error+" "+(l.hasOwnProperty("input_type")&&null!=l.input_type?l.input_type:"text")),"onUpdate:modelValue":[t=>{e.fields[l.field_name].value=e.fields[l.field_name].formatted_value,e.changeEventHandler(l.field_name)},t=>e.fields[l.field_name].formatted_value=t],modelValue:e.fields[l.field_name].formatted_value,"data-cy":l.field_name,"emit-value":"","map-options":""},{append:(0,s.w5)((()=>[(0,s._)("div",Ce,[e.fields[l.field_name].input_error?((0,s.wg)(),(0,s.j4)(Qe,{key:0,flat:"",dense:"",name:"error",size:"24px",color:"red"},{default:(0,s.w5)((()=>[(0,s.Wm)(Je,{class:"bg-red line-error-tooltip"},{default:(0,s.w5)((()=>[""!==e.fields[l.field_name].input_error?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Uk)((0,o.zw)(e.$t(e.fields[l.field_name].input_error)),1)],64)):(0,s.kq)("",!0)])),_:2},1024)])),_:2},1024)):(0,s.kq)("",!0),e.extractable?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(Qe,{key:1,dense:"",name:"check_circle",size:"24px",color:"green"}))])])),_:2},1032,["data-field-name","options","disable","class","onUpdate:modelValue","modelValue","data-cy"])),e.renderTooltip(l.field_name)?((0,s.wg)(),(0,s.j4)(ft,{key:2,arrow:"top","bg-color":"red"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("pages.api_user_messages."+e.fieldValidationError(e.fields[l.field_name].validation_code))),1)])),_:2},1024)):(0,s.kq)("",!0),e.isDeleteRuleButton(i,a,l,"input_area")&&!e.isReadOnly?((0,s.wg)(),(0,s.iD)("img",{key:3,onClick:t=>e.deleteRuleConfirmation(l,i.buttons),class:"q-pb-xs cursor-pointer",width:"18",height:"18",src:"trash-bin-default.svg"},null,8,Pe)):(0,s.kq)("",!0)],8,Ee)):(0,s.kq)("",!0)],10,ve)))),128))])])):(0,s.kq)("",!0)],64)))),128))]),(0,s.Wm)(_t,{class:"q-mt-xl q-mt-sm q-ma-sm"})]))],64)))),128)),(0,s.Wm)(gt),e.showArticlePage?((0,s.wg)(),(0,s.iD)("div",Me,[(0,s._)("div",ke,[(0,s._)("span",xe,(0,o.zw)(e.$t("pages.screen2a.line")),1)]),Ae,(0,s._)("div",Le,[(0,s._)("div",Ie,[(0,s._)("div",Re,(0,o.zw)(e.$t("pages.screen2a.lineq")),1)])]),(0,s._)("div",Te,[(0,s.Wm)(pt,{outlined:"","data-cy":"lineitem_count",class:(0,o.C_)(["full-width",e.lineitem_error?"error-border-left":"success-border-left"]),onChange:t[11]||(t[11]=t=>e.inputValueChanges("lineitem_count")),modelValue:e.lineitem_count,"onUpdate:modelValue":t[12]||(t[12]=t=>e.lineitem_count=t)},{append:(0,s.w5)((()=>[(0,s.Wm)(Qe,{onClick:e.goToLineItems,name:"las la-table",class:"cursor-pointer"},null,8,["onClick"])])),_:1},8,["class","modelValue"])])])):(0,s.kq)("",!0),""!=e.account_block?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s.Wm)(Qe,{class:"text-blue",style:{"font-size":"18px","padding-left":"5px"},name:"info"}),(0,s._)("span",We,(0,o.zw)(e.$t("block_supplier_warning")),1),"table_blocked"==e.account_block?((0,s.wg)(),(0,s.j4)(Xe,{key:0,flat:"",style:{color:"#ff0080"},label:e.$t("enable"),onClick:t[13]||(t[13]=t=>{t.stopPropagation(),e.confirm_supplier_unblock=!0})},null,8,["label"])):(0,s.kq)("",!0)],64)):(0,s.kq)("",!0),!e.isReadOnly&&e.doc2AppMode?((0,s.wg)(),(0,s.j4)(vt,{key:2,isValidationView:!0,enableExportButton:e.enableExportButton,onSetApiData:e.setFieldsData},null,8,["enableExportButton","onSetApiData"])):(0,s.kq)("",!0),e.doc2AppMode?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Be,[(0,s.Wm)(Xe,{color:"primary","data-cy":"confirm-export",label:e.$t("pages.screen2a.contact"),icon:"check",class:"full-width",onClick:t[14]||(t[14]=t=>e.goFormular())},null,8,["label"])])),Ue])])])],512)])),(0,s._)("div",Fe,[(0,s.Wm)(Ct,{modelValue:e.textConfirmation,"onUpdate:modelValue":t[19]||(t[19]=t=>e.textConfirmation=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(Ot,{style:{width:"440px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(yt,{class:"secondary-toolbar"},{default:(0,s.w5)((()=>[(0,s.Wm)(wt,null,{default:(0,s.w5)((()=>[(0,s._)("span",Ke,(0,o.zw)(e.$t("pages.screen2a.confirmation")),1)])),_:1}),(0,s.wy)((0,s.Wm)(Xe,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Tt]])])),_:1}),(0,s.Wm)(Dt,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(this.textConfirmationMsg),1)])),_:1}),(0,s.Wm)(bt,{align:"right",class:"text-teal"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(Xe,{color:"grey",label:e.$t("pages.screen2a.cancel"),"data-cy":"cancel",onClick:t[15]||(t[15]=t=>e.cancelOverlayDiv())},null,8,["label"]),[[Tt]]),(0,s.wy)((0,s.Wm)(Xe,{color:"grey","data-cy":"no",label:"Don't ask again",onClick:t[16]||(t[16]=t=>e.askLater())},null,512),[[Tt]]),(0,s.wy)((0,s.Wm)(Xe,{color:"grey","data-cy":"no",label:e.$t("re_select"),onClick:t[17]||(t[17]=t=>e.enableDrawing(!0))},null,8,["label"]),[[Tt]]),(0,s.wy)((0,s.Wm)(Xe,{color:"primary","data-cy":"yes",label:e.$t("pages.screen2a.yes"),onClick:t[18]||(t[18]=t=>e.updateFieldData())},null,8,["label"]),[[Tt]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(Ct,{modelValue:e.saveInstant,"onUpdate:modelValue":t[20]||(t[20]=t=>e.saveInstant=t)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.updateFieldData()),1)])),_:1},8,["modelValue"])]),(0,s.Wm)(Mt,{modelValue:e.fuzzyDialog,"onUpdate:modelValue":t[21]||(t[21]=t=>e.fuzzyDialog=t),persistent:"",onKeydown:(0,a.D2)(e.closeMsDialog,["esc"]),title:e.$t("pages.screen2a.validation"),onOnHide:e.closeMsDialog},{default:(0,s.w5)((()=>[(0,s._)("div",Se,[(0,s.Wm)(Pt)])])),_:1},8,["modelValue","onKeydown","title","onOnHide"]),(0,s.Wm)(kt),(0,s.Wm)(Ct,{modelValue:e.showDialog,"onUpdate:modelValue":t[23]||(t[23]=t=>e.showDialog=t)},{default:(0,s.w5)((()=>[(0,s.Wm)(Ot,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Dt,{class:"row items-center q-pb-none"},{default:(0,s.w5)((()=>[Ve,(0,s.Wm)(xt),(0,s.wy)((0,s.Wm)(Xe,{icon:"close",flat:"",round:"",dense:""},null,512),[[Tt]])])),_:1}),(0,s.Wm)(Dt,null,{default:(0,s.w5)((()=>[$e])),_:1}),(0,s._)("div",ze,[(0,s.Wm)(xt),(0,s.Wm)(Xe,{flat:"",color:"primary",label:"Contact us",onClick:t[22]||(t[22]=t=>e.goFormular())})])])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(At,{language_origin:e.language_origin,doctype:e.selected_doc_type},null,8,["language_origin","doctype"]),(0,s.Wm)(Ct,{modelValue:e.showSelectionPopupDialog,"onUpdate:modelValue":t[24]||(t[24]=t=>e.showSelectionPopupDialog=t),position:"top",persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(Lt,{data:e.selection_popup_data},null,8,["data"])])),_:1},8,["modelValue"]),(0,s.Wm)(Ct,{modelValue:e.confirm_supplier_unblock,"onUpdate:modelValue":t[25]||(t[25]=t=>e.confirm_supplier_unblock=t),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(Ot,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Dt,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(ht,{icon:"block",color:"primary"}),(0,s._)("span",He,(0,o.zw)(e.$t("unblock_supplier_confirmation")),1)])),_:1}),(0,s.Wm)(bt,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(Xe,{class:"bg-grey-3",label:e.$t("cancel")},null,8,["label"]),[[Tt]]),(0,s.Wm)(Xe,{color:"primary",class:"q-mr-sm","data-cy":"setvatfield",label:e.$t("confirm"),onClick:e.enableBlockedSupplier},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(Ct,{modelValue:e.deleteConfirmationDlg,"onUpdate:modelValue":t[27]||(t[27]=t=>e.deleteConfirmationDlg=t),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(Ot,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Dt,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:(0,s.w5)((()=>[(0,s.Wm)(ht,{icon:"warning",color:"primary"})])),_:1}),(0,s.Wm)(Dt,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s._)("span",Ne,(0,o.zw)(e.$t("pages.messages.MSG_DELETE_RULE")),1)])),_:1}),(0,s.Wm)(bt,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(Xe,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[Tt]]),(0,s.wy)((0,s.Wm)(Xe,{flat:"",label:e.$t("delete"),color:"primary",onClick:t[26]||(t[26]=t=>e.deleteRule(e.selectedInputObj))},null,8,["label"]),[[Tt]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(Ct,{modelValue:e.restartClassificationDlg,"onUpdate:modelValue":t[28]||(t[28]=t=>e.restartClassificationDlg=t)},{default:(0,s.w5)((()=>[(0,s.Wm)(It,{isReadOnly:e.isReadOnly,language_origin_list:e.language_origin_list},null,8,["isReadOnly","language_origin_list"])])),_:1},8,["modelValue"]),(0,s.Wm)(Ct,{modelValue:e.split_document,"onUpdate:modelValue":t[29]||(t[29]=t=>e.split_document=t),persistent:"",onKeydown:t[30]||(t[30]=(0,a.D2)((t=>e.split_document=!1),["esc"]))},{default:(0,s.w5)((()=>[(0,s.Wm)(Rt)])),_:1},8,["modelValue"])],64)}var je=i(48448),Ye=i(74260),Ge=i(2165),Qe=i(24554),Xe=i(5363),Je=i(72448),et=i(83414),tt=i(52035),it=i(2350),st=i(65869),ot=i(36375),at=i(64689),lt=i(83944),rt=i(85626),nt=i(75096),_t=i(46778),dt=i(10151),ct=i(39570),ut=i(13747),ht=i(25589),pt=i(99367),mt=i(62025),ft=i(86115),gt=i(17132),vt=i(60677),Et=i(7518),wt=i.n(Et);const yt=(0,Ye.Z)(je.Z,[["render",Ze],["__scopeId","data-v-33b1e251"]]),Dt=yt;wt()(je.Z,"components",{QBtn:Ge.Z,QIcon:Qe.Z,QTooltip:Xe.Z,QSelect:Je.Z,QItem:et.Z,QItemSection:tt.Z,QItemLabel:it.Z,QSeparator:st.Z,QBtnGroup:ot.Z,QInput:at.Z,QPopupProxy:lt.Z,QDate:rt.Z,QAvatar:nt.Z,QDialog:_t.Z,QCard:dt.Z,QToolbar:ct.Z,QToolbarTitle:ut.Z,QCardSection:ht.Z,QCardActions:pt.Z,QSpace:mt.Z,QField:ft.Z,QTable:gt.Z}),wt()(je.Z,"directives",{ClosePopup:vt.Z})}}]);